{"ast":null,"code":"import { Attribute, ChangeDetectionStrategy, ChangeDetectorRef, Component, ComponentFactoryResolver, ContentChild, ContentChildren, Directive, ElementRef, EventEmitter, Host, HostBinding, HostListener, Inject, Injectable, InjectionToken, Injector, Input, IterableDiffers, LOCALE_ID, NgModule, NgZone, Optional, Output, PLATFORM_ID, Renderer2, SimpleChange, SkipSelf, TemplateRef, Type, ViewChild, ViewChildren, ViewContainerRef, forwardRef, isDevMode, ɵɵdefineInjectable, ɵɵinject } from '@angular/core';\nimport * as i0 from '@angular/core';\nimport { CommonModule, DOCUMENT, DatePipe, FormStyle, FormatWidth, Location, TranslationWidth, getLocaleDayNames, getLocaleFirstDayOfWeek, getLocaleMonthNames, getLocaleTimeFormat, isPlatformBrowser } from '@angular/common';\nimport { BehaviorSubject, EMPTY, Observable, ReplaySubject, Subject, combineLatest, forkJoin, from, fromEvent, interval, merge, of, timer } from 'rxjs';\nimport { debounceTime, delay, distinctUntilChanged, filter, finalize, map, pairwise, publish, refCount, repeat, share, skip, startWith, switchMap, take, takeUntil, takeWhile, tap } from 'rxjs/operators';\nimport { FormsModule, NG_VALIDATORS, NG_VALUE_ACCESSOR, Validators } from '@angular/forms';\nimport { ActivatedRoute, NavigationEnd, Router, RouterModule } from '@angular/router';\nimport { ActiveDescendantKeyManager, FocusKeyManager, FocusMonitor, FocusTrap, FocusTrapFactory, InteractivityChecker } from '@angular/cdk/a11y';\nimport { CdkPortal, CdkPortalOutlet, ComponentPortal, PortalInjector, PortalModule, TemplatePortal } from '@angular/cdk/portal';\nimport { BlockScrollStrategy, FlexibleConnectedPositionStrategy, GlobalPositionStrategy, Overlay, OverlayContainer, OverlayModule, OverlayPositionBuilder, ScrollDispatcher, ScrollStrategyOptions, ViewportRuler } from '@angular/cdk/overlay';\nimport { Platform } from '@angular/cdk/platform';\nimport * as i1 from '@angular/cdk/platform';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { animate, state, style, transition, trigger } from '@angular/animations';\nimport 'intersection-observer';\nimport { BidiModule, Directionality } from '@angular/cdk/bidi';\nimport { CdkCell, CdkCellDef, CdkCellOutlet, CdkColumnDef, CdkFooterCell, CdkFooterCellDef, CdkFooterRow, CdkFooterRowDef, CdkHeaderCell, CdkHeaderCellDef, CdkHeaderRow, CdkHeaderRowDef, CdkRow, CdkRowDef, CdkTable, CdkTableModule, DataRowOutlet, DataSource, FooterRowOutlet, HeaderRowOutlet, NoDataRowOutlet, STICKY_POSITIONING_LISTENER, _COALESCED_STYLE_SCHEDULER, _CoalescedStyleScheduler } from '@angular/cdk/table';\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\nimport { _DisposeViewRepeaterStrategy, _VIEW_REPEATER_STRATEGY } from '@angular/cdk/collections';\nimport { BACKSPACE, DELETE, ENTER, ESCAPE, SPACE } from '@angular/cdk/keycodes';\nimport * as _angular_cdk_keycodes from '@angular/cdk/keycodes';\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nimport * as ɵngcc0 from '@angular/core';\nimport * as ɵngcc1 from '@angular/cdk/a11y';\nimport * as ɵngcc2 from '@angular/common';\nimport * as ɵngcc3 from '@angular/cdk/overlay';\nimport * as ɵngcc4 from '@angular/platform-browser';\nimport * as ɵngcc5 from '@angular/router';\nimport * as ɵngcc6 from '@angular/forms';\nimport * as ɵngcc7 from '@angular/cdk/table';\n\nfunction NbOverlayContainerComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.content);\n  }\n}\n\nfunction NbOverlayContainerComponent_ng_template_1_Template(rf, ctx) {}\n\nconst _c0 = [\"*\"];\nconst _c1 = [[[\"nb-card-header\"]], [[\"nb-card-body\"]], \"*\", [[\"nb-card-footer\"]]];\nconst _c2 = [\"nb-card-header\", \"nb-card-body\", \"*\", \"nb-card-footer\"];\n\nfunction NbRevealCardComponent_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function NbRevealCardComponent_a_3_Template_a_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r2);\n      const ctx_r1 = ɵngcc0.ɵɵnextContext();\n      return ctx_r1.toggle();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 3);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c3 = [[[\"nb-card-front\"]], [[\"nb-card-back\"]]];\nconst _c4 = [\"nb-card-front\", \"nb-card-back\"];\n\nfunction NbFlipCardComponent_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function NbFlipCardComponent_a_3_Template_a_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      const ctx_r2 = ɵngcc0.ɵɵnextContext();\n      return ctx_r2.toggle();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NbFlipCardComponent_a_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 4);\n    ɵngcc0.ɵɵlistener(\"click\", function NbFlipCardComponent_a_6_Template_a_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.toggle();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c5 = [[[\"nb-card\"]]];\nconst _c6 = [\"nb-card\"];\nconst _c7 = [\"nbButton\", \"\"];\n\nfunction NbCalendarDayPickerComponent_nb_calendar_week_numbers_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-calendar-week-numbers\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"weeks\", ctx_r0.weeks)(\"size\", ctx_r0.size)(\"weekNumberSymbol\", ctx_r0.weekNumberSymbol);\n  }\n}\n\nfunction NbCalendarDaysNamesComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 1);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const day_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵclassProp(\"holiday\", day_r1.isHoliday);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(day_r1.name);\n  }\n}\n\nfunction NbCalendarPickerComponent_nb_calendar_picker_row_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-calendar-picker-row\", 1);\n    ɵngcc0.ɵɵlistener(\"select\", function NbCalendarPickerComponent_nb_calendar_picker_row_0_Template_nb_calendar_picker_row_select_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      const ctx_r2 = ɵngcc0.ɵɵnextContext();\n      return ctx_r2.select.emit($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const row_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"row\", row_r1)(\"visibleDate\", ctx_r0.visibleDate)(\"selectedValue\", ctx_r0.selectedValue)(\"component\", ctx_r0.cellComponent)(\"min\", ctx_r0.min)(\"max\", ctx_r0.max)(\"filter\", ctx_r0.filter)(\"size\", ctx_r0.size);\n  }\n}\n\nfunction NbCalendarPickerRowComponent_ng_template_0_Template(rf, ctx) {}\n\nfunction NbCalendarWeekNumberComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 3);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const weekNumber_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(weekNumber_r1);\n  }\n}\n\nconst _c8 = \"[_nghost-%COMP%]{display:flex;flex-direction:column}\";\n\nfunction NbBaseCalendarComponent_nb_card_header_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-card-header\", 5);\n    ɵngcc0.ɵɵelementStart(1, \"nb-calendar-view-mode\", 6);\n    ɵngcc0.ɵɵlistener(\"changeMode\", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_view_mode_changeMode_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.onChangeViewMode();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"nb-calendar-pageable-navigation\", 7);\n    ɵngcc0.ɵɵlistener(\"prev\", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_pageable_navigation_prev_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r6 = ɵngcc0.ɵɵnextContext();\n      return ctx_r6.navigatePrev();\n    })(\"next\", function NbBaseCalendarComponent_nb_card_header_1_Template_nb_calendar_pageable_navigation_next_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext();\n      return ctx_r7.navigateNext();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"date\", ctx_r0.visibleDate)(\"viewMode\", ctx_r0.activeViewMode);\n  }\n}\n\nfunction NbBaseCalendarComponent_nb_calendar_day_picker_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-calendar-day-picker\", 8);\n    ɵngcc0.ɵɵlistener(\"dateChange\", function NbBaseCalendarComponent_nb_calendar_day_picker_3_Template_nb_calendar_day_picker_dateChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r9);\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.dateChange.emit($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"boundingMonths\", ctx_r1.boundingMonth)(\"cellComponent\", ctx_r1.dayCellComponent)(\"min\", ctx_r1.min)(\"max\", ctx_r1.max)(\"filter\", ctx_r1.filter)(\"visibleDate\", ctx_r1.visibleDate)(\"size\", ctx_r1.size)(\"date\", ctx_r1.date)(\"showWeekNumber\", ctx_r1.showWeekNumber)(\"weekNumberSymbol\", ctx_r1.weekNumberSymbol);\n  }\n}\n\nfunction NbBaseCalendarComponent_nb_calendar_year_picker_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-calendar-year-picker\", 9);\n    ɵngcc0.ɵɵlistener(\"yearChange\", function NbBaseCalendarComponent_nb_calendar_year_picker_4_Template_nb_calendar_year_picker_yearChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      const ctx_r10 = ɵngcc0.ɵɵnextContext();\n      ctx_r10.setVisibleDate($event);\n      return ctx_r10.setViewMode(ctx_r10.ViewMode.MONTH);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"cellComponent\", ctx_r2.yearCellComponent)(\"date\", ctx_r2.date)(\"min\", ctx_r2.min)(\"max\", ctx_r2.max)(\"filter\", ctx_r2.filter)(\"size\", ctx_r2.size)(\"year\", ctx_r2.visibleDate);\n  }\n}\n\nfunction NbBaseCalendarComponent_nb_calendar_month_picker_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-calendar-month-picker\", 10);\n    ɵngcc0.ɵɵlistener(\"monthChange\", function NbBaseCalendarComponent_nb_calendar_month_picker_5_Template_nb_calendar_month_picker_monthChange_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r13);\n      const ctx_r12 = ɵngcc0.ɵɵnextContext();\n      ctx_r12.setVisibleDate($event);\n      return ctx_r12.setViewMode(ctx_r12.ViewMode.DATE);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"cellComponent\", ctx_r3.monthCellComponent)(\"min\", ctx_r3.min)(\"max\", ctx_r3.max)(\"filter\", ctx_r3.filter)(\"size\", ctx_r3.size)(\"month\", ctx_r3.visibleDate)(\"date\", ctx_r3.date);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵtext(2, \"Time\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_3_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r8.secondsText);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_3_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r9.ampmText);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"div\", 8);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbTimePickerComponent_nb_card_0_ng_template_3_div_4_Template, 2, 1, \"div\", 9);\n    ɵngcc0.ɵɵtemplate(5, NbTimePickerComponent_nb_card_0_ng_template_3_div_5_Template, 2, 1, \"div\", 9);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.hoursText);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.minutesText);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.withSeconds);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.twelveHoursFormat);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_container_6_nb_list_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-list-item\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"nb-timepicker-cell\", 13);\n    ɵngcc0.ɵɵlistener(\"select\", function NbTimePickerComponent_nb_card_0_ng_container_6_nb_list_item_2_Template_nb_timepicker_cell_select_1_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r13);\n      const item_r11 = restoredCtx.$implicit;\n      const ctx_r12 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r12.selectFullTime(item_r11);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r11 = ctx.$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r10.isSelectedFullTimeValue(item_r11));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", ctx_r10.getFullTimeString(item_r11))(\"selected\", ctx_r10.isSelectedFullTimeValue(item_r11));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"nb-list\", 10);\n    ɵngcc0.ɵɵtemplate(2, NbTimePickerComponent_nb_card_0_ng_container_6_nb_list_item_2_Template, 2, 4, \"nb-list-item\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r4.fullTimeOptions)(\"ngForTrackBy\", ctx_r4.trackBySingleColumnValue.bind(ctx_r4));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-list-item\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"nb-timepicker-cell\", 13);\n    ɵngcc0.ɵɵlistener(\"select\", function NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_1_Template_nb_timepicker_cell_select_1_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r20);\n      const item_r18 = restoredCtx.$implicit;\n      const ctx_r19 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r19.setHour(item_r18.value);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r18 = ctx.$implicit;\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r14.isSelectedHour(item_r18.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", item_r18.text)(\"selected\", ctx_r14.isSelectedHour(item_r18.value));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-list-item\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"nb-timepicker-cell\", 13);\n    ɵngcc0.ɵɵlistener(\"select\", function NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_3_Template_nb_timepicker_cell_select_1_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r23);\n      const item_r21 = restoredCtx.$implicit;\n      const ctx_r22 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r22.setMinute(item_r21.value);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r21 = ctx.$implicit;\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r15.isSelectedMinute(item_r21.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", item_r21.text)(\"selected\", ctx_r15.isSelectedMinute(item_r21.value));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_4_nb_list_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-list-item\", 12);\n    ɵngcc0.ɵɵelementStart(1, \"nb-timepicker-cell\", 13);\n    ɵngcc0.ɵɵlistener(\"select\", function NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_4_nb_list_item_1_Template_nb_timepicker_cell_select_1_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r27);\n      const item_r25 = restoredCtx.$implicit;\n      const ctx_r26 = ɵngcc0.ɵɵnextContext(4);\n      return ctx_r26.setSecond(item_r25.value);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r25 = ctx.$implicit;\n    const ctx_r24 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r24.isSelectedSecond(item_r25.value));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", item_r25.text)(\"selected\", ctx_r24.isSelectedSecond(item_r25.value));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-list\", 10);\n    ɵngcc0.ɵɵtemplate(1, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_4_nb_list_item_1_Template, 2, 4, \"nb-list-item\", 11);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r16 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r16.secondsColumnOptions)(\"ngForTrackBy\", ctx_r16.trackByTimeValues);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_5_nb_list_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-list-item\", 16);\n    ɵngcc0.ɵɵelementStart(1, \"nb-timepicker-cell\", 13);\n    ɵngcc0.ɵɵlistener(\"select\", function NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_5_nb_list_item_1_Template_nb_timepicker_cell_select_1_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r31);\n      const dayPeriod_r29 = restoredCtx.$implicit;\n      const ctx_r30 = ɵngcc0.ɵɵnextContext(4);\n      return ctx_r30.changeDayPeriod(dayPeriod_r29);\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const dayPeriod_r29 = ctx.$implicit;\n    const ctx_r28 = ɵngcc0.ɵɵnextContext(4);\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r28.isSelectedDayPeriod(dayPeriod_r29));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"value\", dayPeriod_r29)(\"selected\", ctx_r28.isSelectedDayPeriod(dayPeriod_r29));\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-list\", 10);\n    ɵngcc0.ɵɵtemplate(1, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_5_nb_list_item_1_Template, 2, 4, \"nb-list-item\", 15);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r17 = ɵngcc0.ɵɵnextContext(3);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r17.dayPeriodColumnOptions)(\"ngForTrackBy\", ctx_r17.trackByDayPeriod);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-list\", 10);\n    ɵngcc0.ɵɵtemplate(1, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_1_Template, 2, 4, \"nb-list-item\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(2, \"nb-list\", 10);\n    ɵngcc0.ɵɵtemplate(3, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_item_3_Template, 2, 4, \"nb-list-item\", 11);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_4_Template, 2, 2, \"nb-list\", 14);\n    ɵngcc0.ɵɵtemplate(5, NbTimePickerComponent_nb_card_0_ng_template_7_nb_list_5_Template, 2, 2, \"nb-list\", 14);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r6.hoursColumnOptions)(\"ngForTrackBy\", ctx_r6.trackByTimeValues);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r6.minutesColumnOptions)(\"ngForTrackBy\", ctx_r6.trackByTimeValues);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.showSeconds());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r6.twelveHoursFormat);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_nb_card_footer_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-card-footer\", 17);\n    ɵngcc0.ɵɵelementStart(1, \"nb-calendar-actions\", 18);\n    ɵngcc0.ɵɵlistener(\"setCurrentTime\", function NbTimePickerComponent_nb_card_0_nb_card_footer_9_Template_nb_calendar_actions_setCurrentTime_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r32 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r32.setCurrentTime();\n    })(\"saveValue\", function NbTimePickerComponent_nb_card_0_nb_card_footer_9_Template_nb_calendar_actions_saveValue_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r34 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r34.saveValue();\n    });\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"applyButtonText\", ctx_r7.applyButtonText)(\"currentTimeButtonText\", ctx_r7.currentTimeButtonText);\n  }\n}\n\nfunction NbTimePickerComponent_nb_card_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-card\", 1);\n    ɵngcc0.ɵɵelementStart(1, \"nb-card-header\", 2);\n    ɵngcc0.ɵɵtemplate(2, NbTimePickerComponent_nb_card_0_ng_container_2_Template, 3, 0, \"ng-container\", 3);\n    ɵngcc0.ɵɵtemplate(3, NbTimePickerComponent_nb_card_0_ng_template_3_Template, 6, 4, \"ng-template\", null, 4, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(5, \"div\", 5);\n    ɵngcc0.ɵɵtemplate(6, NbTimePickerComponent_nb_card_0_ng_container_6_Template, 3, 2, \"ng-container\", 3);\n    ɵngcc0.ɵɵtemplate(7, NbTimePickerComponent_nb_card_0_ng_template_7_Template, 6, 6, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(9, NbTimePickerComponent_nb_card_0_nb_card_footer_9_Template, 2, 2, \"nb-card-footer\", 7);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r2 = ɵngcc0.ɵɵreference(4);\n\n    const _r5 = ɵngcc0.ɵɵreference(8);\n\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"supports-scrollbar-theming\", !ctx_r0.isFirefox());\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.singleColumn)(\"ngIfElse\", _r2);\n    ɵngcc0.ɵɵadvance(4);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.singleColumn)(\"ngIfElse\", _r5);\n    ɵngcc0.ɵɵadvance(3);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.showFooter);\n  }\n}\n\nconst _c9 = [\"layoutTopDynamicArea\"];\nconst _c10 = [\"scrollableContainer\"];\nconst _c11 = [\"layoutContainer\"];\nconst _c12 = [[[\"nb-layout-header\", 3, \"subheader\", \"\"]], [[\"nb-sidebar\"]], [[\"nb-layout-header\", \"subheader\", \"\"]], [[\"nb-layout-column\"]], [[\"nb-layout-footer\"]]];\nconst _c13 = [\"nb-layout-header:not([subheader])\", \"nb-sidebar\", \"nb-layout-header[subheader]\", \"nb-layout-column\", \"nb-layout-footer\"];\nconst _c14 = [\"nbMenuItem\", \"\"];\n\nfunction NbMenuItemComponent_span_0_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r8.menuItem.icon);\n  }\n}\n\nfunction NbMenuItemComponent_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_span_0_nb_icon_1_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵtext(2);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.menuItem.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r0.menuItem.title, \"\\n\");\n  }\n}\n\nfunction NbMenuItemComponent_a_1_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r9.menuItem.icon);\n  }\n}\n\nfunction NbMenuItemComponent_a_1_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 11);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext(2);\n\n    const _r6 = ɵngcc0.ɵɵreference(7);\n\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\n\nfunction NbMenuItemComponent_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 8);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function NbMenuItemComponent_a_1_Template_a_mouseenter_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      const ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ctx_r11.onHoverItem(ctx_r11.menuItem);\n    })(\"click\", function NbMenuItemComponent_a_1_Template_a_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      const ctx_r13 = ɵngcc0.ɵɵnextContext();\n      return ctx_r13.onItemClick(ctx_r13.menuItem);\n    });\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_1_nb_icon_1_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 9);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_1_ng_container_4_Template, 1, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"active\", ctx_r1.menuItem.selected);\n    ɵngcc0.ɵɵproperty(\"routerLink\", ctx_r1.menuItem.link)(\"queryParams\", ctx_r1.menuItem.queryParams)(\"fragment\", ctx_r1.menuItem.fragment)(\"queryParamsHandling\", ctx_r1.menuItem.queryParamsHandling)(\"preserveFragment\", ctx_r1.menuItem.preserveFragment)(\"skipLocationChange\", ctx_r1.menuItem.skipLocationChange);\n    ɵngcc0.ɵɵattribute(\"target\", ctx_r1.menuItem.target)(\"title\", ctx_r1.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.menuItem.icon);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.badge);\n  }\n}\n\nfunction NbMenuItemComponent_a_2_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r14 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r14.menuItem.icon);\n  }\n}\n\nfunction NbMenuItemComponent_a_2_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 11);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext(2);\n\n    const _r6 = ɵngcc0.ɵɵreference(7);\n\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\n\nfunction NbMenuItemComponent_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 12);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function NbMenuItemComponent_a_2_Template_a_mouseenter_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext();\n      return ctx_r16.onHoverItem(ctx_r16.menuItem);\n    })(\"click\", function NbMenuItemComponent_a_2_Template_a_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r18 = ɵngcc0.ɵɵnextContext();\n      return ctx_r18.onSelectItem(ctx_r18.menuItem);\n    });\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_2_nb_icon_1_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 9);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_2_ng_container_4_Template, 1, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"active\", ctx_r2.menuItem.selected);\n    ɵngcc0.ɵɵattribute(\"href\", ctx_r2.menuItem.url, ɵngcc0.ɵɵsanitizeUrl)(\"target\", ctx_r2.menuItem.target)(\"title\", ctx_r2.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.menuItem.icon);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.badge);\n  }\n}\n\nfunction NbMenuItemComponent_a_3_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r19 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r19.menuItem.icon);\n  }\n}\n\nfunction NbMenuItemComponent_a_3_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 11);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext(2);\n\n    const _r6 = ɵngcc0.ɵɵreference(7);\n\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\n\nfunction NbMenuItemComponent_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 12);\n    ɵngcc0.ɵɵlistener(\"mouseenter\", function NbMenuItemComponent_a_3_Template_a_mouseenter_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r22);\n      const ctx_r21 = ɵngcc0.ɵɵnextContext();\n      return ctx_r21.onHoverItem(ctx_r21.menuItem);\n    })(\"click\", function NbMenuItemComponent_a_3_Template_a_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r22);\n      const ctx_r23 = ɵngcc0.ɵɵnextContext();\n      $event.preventDefault();\n      return ctx_r23.onItemClick(ctx_r23.menuItem);\n    });\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_3_nb_icon_1_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 9);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_3_ng_container_4_Template, 1, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"active\", ctx_r3.menuItem.selected);\n    ɵngcc0.ɵɵattribute(\"target\", ctx_r3.menuItem.target)(\"title\", ctx_r3.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.menuItem.icon);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r3.badge);\n  }\n}\n\nfunction NbMenuItemComponent_a_4_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r24 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r24.menuItem.icon);\n  }\n}\n\nfunction NbMenuItemComponent_a_4_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0, 11);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext(2);\n\n    const _r6 = ɵngcc0.ɵɵreference(7);\n\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\n\nfunction NbMenuItemComponent_a_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"a\", 13);\n    ɵngcc0.ɵɵlistener(\"click\", function NbMenuItemComponent_a_4_Template_a_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r27);\n      const ctx_r26 = ɵngcc0.ɵɵnextContext();\n      $event.preventDefault();\n      return ctx_r26.onToggleSubMenu(ctx_r26.menuItem);\n    })(\"mouseenter\", function NbMenuItemComponent_a_4_Template_a_mouseenter_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r27);\n      const ctx_r28 = ɵngcc0.ɵɵnextContext();\n      return ctx_r28.onHoverItem(ctx_r28.menuItem);\n    });\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_4_nb_icon_1_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 9);\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_4_ng_container_4_Template, 1, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵelement(5, \"nb-icon\", 14);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"active\", ctx_r4.menuItem.selected);\n    ɵngcc0.ɵɵattribute(\"target\", ctx_r4.menuItem.target)(\"title\", ctx_r4.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.menuItem.icon);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r4.menuItem.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.badge);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"icon\", ctx_r4.getExpandStateIcon());\n  }\n}\n\nfunction NbMenuItemComponent_ul_5_ng_container_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 18);\n    ɵngcc0.ɵɵlistener(\"hoverItem\", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_hoverItem_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r32 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r32.onHoverItem($event);\n    })(\"toggleSubMenu\", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_toggleSubMenu_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r34 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r34.onToggleSubMenu($event);\n    })(\"selectItem\", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_selectItem_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r35 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r35.onSelectItem($event);\n    })(\"itemClick\", function NbMenuItemComponent_ul_5_ng_container_1_li_1_Template_li_itemClick_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r33);\n      const ctx_r36 = ɵngcc0.ɵɵnextContext(3);\n      return ctx_r36.onItemClick($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r30 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵclassProp(\"menu-group\", item_r30.group);\n    ɵngcc0.ɵɵproperty(\"menuItem\", item_r30)(\"badge\", item_r30.badge);\n  }\n}\n\nfunction NbMenuItemComponent_ul_5_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_ul_5_ng_container_1_li_1_Template, 1, 4, \"li\", 17);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r30 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !item_r30.hidden);\n  }\n}\n\nfunction NbMenuItemComponent_ul_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"ul\", 15);\n    ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_ul_5_ng_container_1_Template, 2, 1, \"ng-container\", 16);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"collapsed\", !(ctx_r5.menuItem.children && ctx_r5.menuItem.expanded))(\"expanded\", ctx_r5.menuItem.expanded);\n    ɵngcc0.ɵɵproperty(\"@toggle\", ctx_r5.toggleState);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r5.menuItem.children);\n  }\n}\n\nfunction NbMenuItemComponent_ng_template_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-badge\", 19);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"text\", ctx_r7.badge.text)(\"dotMode\", ctx_r7.badge.dotMode)(\"status\", ctx_r7.badge.status);\n  }\n}\n\nfunction NbMenuComponent_ng_container_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 3);\n    ɵngcc0.ɵɵlistener(\"hoverItem\", function NbMenuComponent_ng_container_1_li_1_Template_li_hoverItem_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r4);\n      const ctx_r3 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r3.onHoverItem($event);\n    })(\"toggleSubMenu\", function NbMenuComponent_ng_container_1_li_1_Template_li_toggleSubMenu_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r4);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r5.onToggleSubMenu($event);\n    })(\"selectItem\", function NbMenuComponent_ng_container_1_li_1_Template_li_selectItem_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r4);\n      const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r6.onSelectItem($event);\n    })(\"itemClick\", function NbMenuComponent_ng_container_1_li_1_Template_li_itemClick_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r4);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r7.onItemClick($event);\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵclassProp(\"menu-group\", item_r1.group);\n    ɵngcc0.ɵɵproperty(\"menuItem\", item_r1)(\"badge\", item_r1.badge);\n  }\n}\n\nfunction NbMenuComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbMenuComponent_ng_container_1_li_1_Template, 1, 4, \"li\", 2);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const item_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !item_r1.hidden);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_li_1_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 8);\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵproperty(\"config\", tab_r1.icon);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_li_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(tab_r1.title);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"li\", 4);\n    ɵngcc0.ɵɵelementStart(1, \"a\", 5);\n    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_li_1_nb_icon_2_Template, 1, 1, \"nb-icon\", 6);\n    ɵngcc0.ɵɵtemplate(3, NbRouteTabsetComponent_ng_container_1_li_1_span_3_Template, 2, 1, \"span\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵclassProp(\"responsive\", tab_r1.responsive);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.title);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_ng_template_2_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 12);\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵproperty(\"icon\", tab_r1.icon);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_ng_template_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 9);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(tab_r1.title);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function NbRouteTabsetComponent_ng_container_1_ng_template_2_Template_li_click_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r16);\n      const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n      const ctx_r14 = ɵngcc0.ɵɵnextContext();\n      $event.preventDefault();\n      return ctx_r14.selectTab(tab_r1);\n    });\n    ɵngcc0.ɵɵelementStart(1, \"a\", 5);\n    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_ng_template_2_nb_icon_2_Template, 1, 1, \"nb-icon\", 11);\n    ɵngcc0.ɵɵtemplate(3, NbRouteTabsetComponent_ng_container_1_ng_template_2_span_3_Template, 2, 1, \"span\", 7);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"responsive\", tab_r1.responsive);\n    ɵngcc0.ɵɵproperty(\"routerLink\", tab_r1.route)(\"routerLinkActiveOptions\", ctx_r4.activeLinkOptions)(\"queryParams\", tab_r1.queryParams)(\"queryParamsHandling\", tab_r1.queryParamsHandling)(\"fragment\", tab_r1.fragment)(\"preserveFragment\", tab_r1.preserveFragment)(\"skipLocationChange\", tab_r1.skipLocationChange)(\"replaceUrl\", tab_r1.replaceUrl)(\"state\", tab_r1.state);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.title);\n  }\n}\n\nfunction NbRouteTabsetComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbRouteTabsetComponent_ng_container_1_li_1_Template, 4, 4, \"li\", 2);\n    ɵngcc0.ɵɵtemplate(2, NbRouteTabsetComponent_ng_container_1_ng_template_2_Template, 4, 13, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ctx.$implicit;\n\n    const _r3 = ɵngcc0.ɵɵreference(3);\n\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.disabled)(\"ngIfElse\", _r3);\n  }\n}\n\nconst _c15 = [[[\"nb-sidebar-header\"]], \"*\", [[\"nb-sidebar-footer\"]]];\nconst _c16 = [\"nb-sidebar-header\", \"*\", \"nb-sidebar-footer\"];\n\nfunction NbTabComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵprojection(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NbTabsetComponent_li_1_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"config\", tab_r1.tabIcon);\n  }\n}\n\nfunction NbTabsetComponent_li_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 8);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(tab_r1.tabTitle);\n  }\n}\n\nfunction NbTabsetComponent_li_1_nb_badge_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-badge\", 9);\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"text\", tab_r1.badgeText)(\"dotMode\", tab_r1.badgeDot)(\"status\", tab_r1.badgeStatus)(\"position\", tab_r1.badgePosition);\n  }\n}\n\nfunction NbTabsetComponent_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"li\", 2);\n    ɵngcc0.ɵɵlistener(\"click\", function NbTabsetComponent_li_1_Template_li_click_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r9);\n      const tab_r1 = restoredCtx.$implicit;\n      const ctx_r8 = ɵngcc0.ɵɵnextContext();\n      return ctx_r8.selectTab(tab_r1);\n    })(\"keyup.space\", function NbTabsetComponent_li_1_Template_li_keyup_space_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r9);\n      const tab_r1 = restoredCtx.$implicit;\n      const ctx_r10 = ɵngcc0.ɵɵnextContext();\n      return ctx_r10.selectTab(tab_r1);\n    })(\"keyup.enter\", function NbTabsetComponent_li_1_Template_li_keyup_enter_0_listener() {\n      const restoredCtx = ɵngcc0.ɵɵrestoreView(_r9);\n      const tab_r1 = restoredCtx.$implicit;\n      const ctx_r11 = ɵngcc0.ɵɵnextContext();\n      return ctx_r11.selectTab(tab_r1);\n    });\n    ɵngcc0.ɵɵelementStart(1, \"a\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function NbTabsetComponent_li_1_Template_a_click_1_listener($event) {\n      return $event.preventDefault();\n    });\n    ɵngcc0.ɵɵtemplate(2, NbTabsetComponent_li_1_nb_icon_2_Template, 1, 1, \"nb-icon\", 4);\n    ɵngcc0.ɵɵtemplate(3, NbTabsetComponent_li_1_span_3_Template, 2, 1, \"span\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵtemplate(4, NbTabsetComponent_li_1_nb_badge_4_Template, 1, 4, \"nb-badge\", 6);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tab_r1 = ctx.$implicit;\n    ɵngcc0.ɵɵclassProp(\"responsive\", tab_r1.responsive)(\"active\", tab_r1.active)(\"disabled\", tab_r1.disabled);\n    ɵngcc0.ɵɵattribute(\"tabindex\", tab_r1.disabled ? -1 : 0)(\"data-tab-id\", tab_r1.tabId);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.tabIcon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.tabTitle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", tab_r1.badgeText || tab_r1.badgeDot);\n  }\n}\n\nconst _c17 = [[[\"nb-tab\"]]];\nconst _c18 = [\"nb-tab\"];\n\nfunction NbUserComponent_div_1_nb_badge_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-badge\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"text\", ctx_r4.badgeText)(\"status\", ctx_r4.badgeStatus)(\"position\", ctx_r4.badgePosition);\n  }\n}\n\nfunction NbUserComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 6);\n    ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_1_nb_badge_1_Template, 1, 3, \"nb-badge\", 7);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"background-image\", ctx_r0.imageBackgroundStyle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.badgeText);\n  }\n}\n\nfunction NbUserComponent_div_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r5.getInitials(), \" \");\n  }\n}\n\nfunction NbUserComponent_div_2_nb_badge_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-badge\", 8);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"text\", ctx_r6.badgeText)(\"status\", ctx_r6.badgeStatus)(\"position\", ctx_r6.badgePosition);\n  }\n}\n\nfunction NbUserComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 9);\n    ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_2_ng_container_1_Template, 2, 1, \"ng-container\", 10);\n    ɵngcc0.ɵɵtemplate(2, NbUserComponent_div_2_nb_badge_2_Template, 1, 3, \"nb-badge\", 7);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"background-color\", ctx_r1.color);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.showInitials);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.badgeText);\n  }\n}\n\nfunction NbUserComponent_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 11);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r2.name);\n  }\n}\n\nfunction NbUserComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 12);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.title);\n  }\n}\n\nfunction NbActionComponent_ng_container_0_a_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 6);\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 7);\n    ɵngcc0.ɵɵelementContainer(2, 8);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵproperty(\"routerLink\", ctx_r5.link)(\"title\", ctx_r5.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r5.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction NbActionComponent_ng_container_0_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 9);\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 7);\n    ɵngcc0.ɵɵelementContainer(2, 8);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵproperty(\"href\", ctx_r6.href, ɵngcc0.ɵɵsanitizeUrl)(\"title\", ctx_r6.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r6.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction NbActionComponent_ng_container_0_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function NbActionComponent_ng_container_0_a_3_Template_a_click_0_listener($event) {\n      return $event.preventDefault();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 7);\n    ɵngcc0.ɵɵelementContainer(2, 8);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵproperty(\"title\", ctx_r7.title);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r7.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction NbActionComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbActionComponent_ng_container_0_a_1_Template, 3, 4, \"a\", 3);\n    ɵngcc0.ɵɵtemplate(2, NbActionComponent_ng_container_0_a_2_Template, 3, 4, \"a\", 4);\n    ɵngcc0.ɵɵtemplate(3, NbActionComponent_ng_container_0_a_3_Template, 3, 3, \"a\", 5);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.link);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.href && !ctx_r0.link);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r0.href && !ctx_r0.link);\n  }\n}\n\nfunction NbActionComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0);\n    ɵngcc0.ɵɵelementContainer(1, 8);\n  }\n\n  if (rf & 2) {\n    ɵngcc0.ɵɵnextContext();\n\n    const _r3 = ɵngcc0.ɵɵreference(4);\n\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\n\nfunction NbActionComponent_ng_template_3_nb_badge_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-badge\", 12);\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"text\", ctx_r9.badgeText)(\"dotMode\", ctx_r9.badgeDot)(\"status\", ctx_r9.badgeStatus)(\"position\", ctx_r9.badgePosition);\n  }\n}\n\nfunction NbActionComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtemplate(0, NbActionComponent_ng_template_3_nb_badge_0_Template, 1, 4, \"nb-badge\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r4.badgeText || ctx_r4.badgeDot);\n  }\n}\n\nconst _c19 = [[[\"nb-action\"]]];\nconst _c20 = [\"nb-action\"];\nconst _c21 = [\"searchInput\"];\nconst _c22 = [\"searchButton\"];\n\nfunction NbSearchComponent_nb_search_field_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-search-field\", 4);\n    ɵngcc0.ɵɵlistener(\"search\", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_search_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      const ctx_r2 = ɵngcc0.ɵɵnextContext();\n      return ctx_r2.search($event);\n    })(\"searchInput\", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_searchInput_0_listener($event) {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.emitInput($event);\n    })(\"close\", function NbSearchComponent_nb_search_field_3_Template_nb_search_field_close_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r3);\n      const ctx_r5 = ɵngcc0.ɵɵnextContext();\n      return ctx_r5.emitDeactivate();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"show\", ctx_r1.showSearchField)(\"type\", ctx_r1.type)(\"placeholder\", ctx_r1.placeholder)(\"hint\", ctx_r1.hint);\n  }\n}\n\nfunction NbCheckboxComponent_nb_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 6);\n  }\n}\n\nfunction NbCheckboxComponent_nb_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n}\n\nfunction NbProgressBarComponent_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ctx_r0.value, \"%\");\n  }\n}\n\nfunction NbAlertComponent_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function NbAlertComponent_button_0_Template_button_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r2);\n      const ctx_r1 = ɵngcc0.ɵɵnextContext();\n      return ctx_r1.onClose();\n    });\n    ɵngcc0.ɵɵelementStart(1, \"span\", 2);\n    ɵngcc0.ɵɵtext(2, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NbChatFormComponent_div_0_ng_container_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelementStart(1, \"span\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function NbChatFormComponent_div_0_ng_container_1_div_1_Template_span_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const file_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n      const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r6.removeFile(file_r3);\n    });\n    ɵngcc0.ɵɵtext(2, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const file_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵstyleProp(\"background-image\", file_r3.urlStyle);\n  }\n}\n\nfunction NbChatFormComponent_div_0_ng_container_1_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\");\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 9);\n    ɵngcc0.ɵɵelementStart(2, \"span\", 8);\n    ɵngcc0.ɵɵlistener(\"click\", function NbChatFormComponent_div_0_ng_container_1_div_2_Template_span_click_2_listener() {\n      ɵngcc0.ɵɵrestoreView(_r12);\n      const file_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n      const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r10.removeFile(file_r3);\n    });\n    ɵngcc0.ɵɵtext(3, \"\\u00D7\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NbChatFormComponent_div_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_div_0_ng_container_1_div_1_Template, 3, 2, \"div\", 6);\n    ɵngcc0.ɵɵtemplate(2, NbChatFormComponent_div_0_ng_container_1_div_2_Template, 4, 0, \"div\", 7);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const file_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", file_r3.urlStyle);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !file_r3.urlStyle);\n  }\n}\n\nfunction NbChatFormComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_div_0_ng_container_1_Template, 3, 2, \"ng-container\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.droppedFiles);\n  }\n}\n\nfunction NbChatFormComponent_button_3_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r13 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"icon\", ctx_r13.buttonIcon);\n  }\n}\n\nfunction NbChatFormComponent_button_3_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r15 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r15.buttonTitle);\n  }\n}\n\nfunction NbChatFormComponent_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 10);\n    ɵngcc0.ɵɵlistener(\"click\", function NbChatFormComponent_button_3_Template_button_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const ctx_r16 = ɵngcc0.ɵɵnextContext();\n      return ctx_r16.sendMessage();\n    });\n    ɵngcc0.ɵɵtemplate(1, NbChatFormComponent_button_3_nb_icon_1_Template, 1, 1, \"nb-icon\", 11);\n    ɵngcc0.ɵɵtemplate(2, NbChatFormComponent_button_3_ng_template_2_Template, 1, 1, \"ng-template\", null, 12, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const _r14 = ɵngcc0.ɵɵreference(3);\n\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"with-icon\", !ctx_r1.buttonTitle);\n    ɵngcc0.ɵɵproperty(\"status\", ctx_r1.getButtonStatus());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.buttonTitle)(\"ngIfElse\", _r14);\n  }\n}\n\nfunction NbChatMessageComponent_nb_chat_avatar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-avatar\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"initials\", ctx_r0.getInitials())(\"avatarStyle\", ctx_r0.avatarStyle);\n  }\n}\n\nfunction NbChatMessageComponent_ng_container_2_nb_chat_message_file_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-message-file\", 10);\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"sender\", ctx_r4.sender)(\"date\", ctx_r4.date)(\"dateFormat\", ctx_r4.dateFormat)(\"message\", ctx_r4.message)(\"files\", ctx_r4.files);\n  }\n}\n\nfunction NbChatMessageComponent_ng_container_2_nb_chat_message_quote_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-message-quote\", 11);\n  }\n\n  if (rf & 2) {\n    const ctx_r5 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"sender\", ctx_r5.sender)(\"date\", ctx_r5.date)(\"dateFormat\", ctx_r5.dateFormat)(\"message\", ctx_r5.message)(\"quote\", ctx_r5.quote);\n  }\n}\n\nfunction NbChatMessageComponent_ng_container_2_nb_chat_message_map_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-message-map\", 12);\n  }\n\n  if (rf & 2) {\n    const ctx_r6 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"sender\", ctx_r6.sender)(\"date\", ctx_r6.date)(\"message\", ctx_r6.message)(\"latitude\", ctx_r6.latitude)(\"longitude\", ctx_r6.longitude);\n  }\n}\n\nfunction NbChatMessageComponent_ng_container_2_nb_chat_message_text_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-message-text\", 13);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"sender\", ctx_r7.sender)(\"date\", ctx_r7.date)(\"dateFormat\", ctx_r7.dateFormat)(\"message\", ctx_r7.message);\n  }\n}\n\nfunction NbChatMessageComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0, 5);\n    ɵngcc0.ɵɵtemplate(1, NbChatMessageComponent_ng_container_2_nb_chat_message_file_1_Template, 1, 5, \"nb-chat-message-file\", 6);\n    ɵngcc0.ɵɵtemplate(2, NbChatMessageComponent_ng_container_2_nb_chat_message_quote_2_Template, 1, 5, \"nb-chat-message-quote\", 7);\n    ɵngcc0.ɵɵtemplate(3, NbChatMessageComponent_ng_container_2_nb_chat_message_map_3_Template, 1, 5, \"nb-chat-message-map\", 8);\n    ɵngcc0.ɵɵtemplate(4, NbChatMessageComponent_ng_container_2_nb_chat_message_text_4_Template, 1, 4, \"nb-chat-message-text\", 9);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngSwitch\", ctx_r1.type);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", \"file\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", \"quote\");\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngSwitchCase\", \"map\");\n  }\n}\n\nfunction NbChatMessageComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-chat-message-text\", 13);\n    ɵngcc0.ɵɵelementStart(1, \"div\");\n    ɵngcc0.ɵɵelementContainer(2, 14);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"sender\", ctx_r3.sender)(\"date\", ctx_r3.date)(\"dateFormat\", ctx_r3.dateFormat)(\"message\", ctx_r3.message);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵclassProp(\"nb-custom-message\", ctx_r3._areDefaultStylesEnabled())(\"nb-custom-message-no-space\", ctx_r3._addNoSpaceClass)(\"nb-custom-message-reply\", ctx_r3._addReplyClass)(\"nb-custom-message-not-reply\", ctx_r3._addNotReplyClass)(\"nb-custom-message-full-width\", !ctx_r3._areDefaultStylesEnabled());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r3._getTemplate())(\"ngTemplateOutletContext\", ctx_r3._getTemplateContext());\n  }\n}\n\nconst _c23 = [\"scrollable\"];\n\nfunction NbChatComponent_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 6);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.noMessagesPlaceholder);\n  }\n}\n\nconst _c24 = [[[\"nb-chat-message\"]], [[\"nb-chat-form\"]]];\nconst _c25 = [\"nb-chat-message\", \"nb-chat-form\"];\n\nconst _c26 = function (a0) {\n  return [a0];\n};\n\nfunction NbChatMessageFileComponent_ng_container_2_a_2_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const file_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵproperty(\"icon\", file_r3.icon);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_2_a_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\");\n  }\n\n  if (rf & 2) {\n    const file_r3 = ɵngcc0.ɵɵnextContext().$implicit;\n    ɵngcc0.ɵɵstyleProp(\"background-image\", file_r3.urlStyle);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_2_a_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"a\", 4);\n    ɵngcc0.ɵɵtemplate(1, NbChatMessageFileComponent_ng_container_2_a_2_nb_icon_1_Template, 1, 1, \"nb-icon\", 5);\n    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_a_2_div_2_Template, 1, 2, \"div\", 6);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const file_r3 = ctx.$implicit;\n    ɵngcc0.ɵɵproperty(\"href\", file_r3.url, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !file_r3.urlStyle && file_r3.icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", file_r3.urlStyle);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"div\", 2);\n    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_a_2_Template, 3, 3, \"a\", 3);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngForOf\", ctx_r0.readyFiles);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_3_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r8 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵproperty(\"icon\", ctx_r8.readyFiles[0].icon);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_3_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\");\n  }\n\n  if (rf & 2) {\n    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵstyleProp(\"background-image\", ctx_r9.readyFiles[0].urlStyle);\n  }\n}\n\nfunction NbChatMessageFileComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"a\", 4);\n    ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_3_nb_icon_2_Template, 1, 1, \"nb-icon\", 5);\n    ɵngcc0.ɵɵtemplate(3, NbChatMessageFileComponent_ng_container_3_div_3_Template, 1, 2, \"div\", 6);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"href\", ctx_r1.readyFiles[0].url, ɵngcc0.ɵɵsanitizeUrl);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r1.readyFiles[0].urlStyle && ctx_r1.readyFiles[0].icon);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.readyFiles[0].urlStyle);\n  }\n}\n\nfunction NbChatMessageQuoteComponent_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 3);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementStart(2, \"time\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"date\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ctx_r0.sender, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(4, 2, ctx_r0.date, ctx_r0.dateFormat));\n  }\n}\n\nfunction NbChatMessageTextComponent_p_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementStart(2, \"time\");\n    ɵngcc0.ɵɵtext(3);\n    ɵngcc0.ɵɵpipe(4, \"date\");\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\"\", ctx_r0.sender, \" \");\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵtextInterpolate(ɵngcc0.ɵɵpipeBind2(4, 2, ctx_r0.date, ctx_r0.dateFormat));\n  }\n}\n\nfunction NbChatMessageTextComponent_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"p\", 3);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.message);\n  }\n}\n\nfunction NbChatAvatarComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate1(\" \", ctx_r0.initials, \" \");\n  }\n}\n\nfunction NbSpinnerComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\", 2);\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r0.message);\n  }\n}\n\nfunction NbStepComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0);\n  }\n}\n\nfunction NbStepperComponent_ng_template_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵprojection(0);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"div\", 6);\n  }\n\n  if (rf & 2) {\n    const index_r3 = ɵngcc0.ɵɵnextContext().index;\n    const ctx_r5 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"connector-past\", index_r3 <= ctx_r5.selectedIndex);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const index_r3 = ɵngcc0.ɵɵnextContext(2).index;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(index_r3 + 1);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_nb_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 12);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_ng_container_5_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainer(0);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbStepperComponent_ng_container_2_div_2_ng_container_5_ng_container_1_Template, 1, 0, \"ng-container\", 13);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const step_r2 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    const ctx_r10 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx_r10.getStepTemplate(step_r2));\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_span_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const step_r2 = ɵngcc0.ɵɵnextContext(2).$implicit;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(step_r2.label);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"div\", 7);\n    ɵngcc0.ɵɵlistener(\"click\", function NbStepperComponent_ng_container_2_div_2_Template_div_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r17);\n      const step_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n      const ctx_r16 = ɵngcc0.ɵɵnextContext();\n      return !ctx_r16.disableStepNavigation && step_r2.select();\n    });\n    ɵngcc0.ɵɵelementStart(1, \"div\", 8);\n    ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_div_2_span_2_Template, 2, 1, \"span\", 9);\n    ɵngcc0.ɵɵtemplate(3, NbStepperComponent_ng_container_2_div_2_nb_icon_3_Template, 1, 0, \"nb-icon\", 10);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementStart(4, \"div\", 11);\n    ɵngcc0.ɵɵtemplate(5, NbStepperComponent_ng_container_2_div_2_ng_container_5_Template, 2, 1, \"ng-container\", 9);\n    ɵngcc0.ɵɵtemplate(6, NbStepperComponent_ng_container_2_div_2_span_6_Template, 2, 1, \"span\", 9);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const step_r2 = ɵngcc0.ɵɵnextContext().$implicit;\n    const ctx_r6 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassProp(\"selected\", ctx_r6.isStepSelected(step_r2))(\"completed\", !ctx_r6.isStepSelected(step_r2) && step_r2.completed)(\"noninteractive\", ctx_r6.disableStepNavigation);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !step_r2.completed || ctx_r6.isStepSelected(step_r2));\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !ctx_r6.isStepSelected(step_r2) && step_r2.completed);\n    ɵngcc0.ɵɵadvance(2);\n    ɵngcc0.ɵɵproperty(\"ngIf\", step_r2.isLabelTemplate);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !step_r2.isLabelTemplate);\n  }\n}\n\nfunction NbStepperComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbStepperComponent_ng_container_2_div_1_Template, 1, 2, \"div\", 4);\n    ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_div_2_Template, 7, 10, \"div\", 5);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const step_r2 = ctx.$implicit;\n    const first_r4 = ctx.first;\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !first_r4 && !step_r2.hidden);\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", !step_r2.hidden);\n  }\n}\n\nconst _c27 = [[[\"nb-step\"]]];\nconst _c28 = [\"nb-step\"];\nconst _c29 = [[[\"nb-accordion-item\"]]];\nconst _c30 = [\"nb-accordion-item\"];\nconst _c31 = [[[\"nb-accordion-item-header\"]], [[\"nb-accordion-item-body\"]]];\nconst _c32 = [\"nb-accordion-item-header\", \"nb-accordion-item-body\"];\n\nconst _c33 = function (a0) {\n  return {\n    value: a0\n  };\n};\n\nfunction NbAccordionItemHeaderComponent_nb_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 1);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"@expansionIndicator\", ctx_r0.state);\n  }\n}\n\nconst _c34 = [[[\"nb-accordion-item-title\"]], [[\"nb-accordion-item-description\"]], \"*\"];\nconst _c35 = [\"nb-accordion-item-title\", \"nb-accordion-item-description\", \"*\"];\nconst _c36 = [[[\"nb-list-item\"]]];\nconst _c37 = [\"nb-list-item\"];\n\nfunction NbDialogContainerComponent_ng_template_0_Template(rf, ctx) {}\n\nfunction NbToastComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 4);\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r0.icon);\n  }\n}\n\nfunction NbToastrContainerComponent_nb_toast_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-toast\", 1);\n  }\n\n  if (rf & 2) {\n    const toast_r1 = ctx.$implicit;\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"@fadeIn\", ctx_r0.fadeIn)(\"toast\", toast_r1);\n  }\n}\n\nfunction NbTooltipComponent_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"config\", ctx_r0.context.icon);\n  }\n}\n\nfunction NbTooltipComponent_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"span\");\n    ɵngcc0.ɵɵtext(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r1.content);\n  }\n}\n\nfunction NbOptionComponent_nb_checkbox_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-checkbox\", 1);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"checked\", ctx_r0.selected)(\"disabled\", ctx_r0.disabled);\n  }\n}\n\nconst _c38 = [\"selectButton\"];\n\nfunction NbSelectComponent_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵprojection(1);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NbSelectComponent_ng_container_2_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n    ɵngcc0.ɵɵtextInterpolate(ctx_r7.selectionView);\n  }\n}\n\nfunction NbSelectComponent_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbSelectComponent_ng_container_2_ng_container_1_Template, 2, 0, \"ng-container\", 2);\n    ɵngcc0.ɵɵtemplate(2, NbSelectComponent_ng_container_2_ng_template_2_Template, 1, 1, \"ng-template\", null, 6, ɵngcc0.ɵɵtemplateRefExtractor);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const _r6 = ɵngcc0.ɵɵreference(3);\n\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.customLabel)(\"ngIfElse\", _r6);\n  }\n}\n\nfunction NbSelectComponent_ng_template_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵtext(0);\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵtextInterpolate(ctx_r3.placeholder);\n  }\n}\n\nfunction NbSelectComponent_nb_option_list_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-option-list\", 7);\n    ɵngcc0.ɵɵprojection(1, 1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r4 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"width\", ctx_r4.hostWidth, \"px\");\n    ɵngcc0.ɵɵproperty(\"size\", ctx_r4.size)(\"position\", ctx_r4.overlayPosition)(\"ngClass\", ctx_r4.optionsListClass);\n  }\n}\n\nconst _c39 = [[[\"nb-select-label\"]], [[\"nb-option\"], [\"nb-option-group\"]]];\nconst _c40 = [\"nb-select-label\", \"nb-option, nb-option-group\"];\nconst _c41 = [[[\"nb-option\"], [\"ng-container\"]]];\nconst _c42 = [\"nb-option, ng-container\"];\n\nfunction NbAutocompleteComponent_nb_option_list_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-option-list\", 1);\n    ɵngcc0.ɵɵprojection(1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵstyleProp(\"width\", ctx_r0.hostWidth, \"px\");\n    ɵngcc0.ɵɵclassProp(\"empty\", !(ctx_r0.options == null ? null : ctx_r0.options.length));\n    ɵngcc0.ɵɵproperty(\"size\", ctx_r0.size)(\"position\", ctx_r0.overlayPosition)(\"id\", ctx_r0.id)(\"ngClass\", ctx_r0.optionsListClass);\n  }\n}\n\nconst _c43 = [[[\"nb-option\"], [\"nb-option-group\"]]];\nconst _c44 = [\"nb-option, nb-option-group\"];\nconst _c45 = [\"viewContainerRef\"];\n\nfunction NbWindowComponent_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵelementStart(1, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function NbWindowComponent_ng_container_5_Template_button_click_1_listener() {\n      ɵngcc0.ɵɵrestoreView(_r5);\n      const ctx_r4 = ɵngcc0.ɵɵnextContext();\n      return ctx_r4.minimize();\n    });\n    ɵngcc0.ɵɵelement(2, \"nb-icon\", 5);\n    ɵngcc0.ɵɵelementEnd();\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NbWindowComponent_ng_container_6_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function NbWindowComponent_ng_container_6_button_1_Template_button_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r8);\n      const ctx_r7 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r7.maximize();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 7);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NbWindowComponent_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbWindowComponent_ng_container_6_button_1_Template, 2, 0, \"button\", 6);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r1.isFullScreen);\n  }\n}\n\nfunction NbWindowComponent_ng_container_7_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"button\", 3);\n    ɵngcc0.ɵɵlistener(\"click\", function NbWindowComponent_ng_container_7_button_1_Template_button_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r11);\n      const ctx_r10 = ɵngcc0.ɵɵnextContext(2);\n      return ctx_r10.maximizeOrFullScreen();\n    });\n    ɵngcc0.ɵɵelement(1, \"nb-icon\", 8);\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nfunction NbWindowComponent_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbWindowComponent_ng_container_7_button_1_Template, 2, 0, \"button\", 6);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r2.minimized || ctx_r2.maximized);\n  }\n}\n\nfunction NbWindowComponent_nb_card_body_10_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"nb-card-body\");\n    ɵngcc0.ɵɵelement(1, \"nb-overlay-container\");\n    ɵngcc0.ɵɵelementEnd();\n  }\n}\n\nconst _c46 = [\"valueContainer\"];\nconst _c47 = [\"input\"];\nconst _c48 = [[[\"nb-radio\"]]];\nconst _c49 = [\"nb-radio\"];\n\nfunction NbTagComponent_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = ɵngcc0.ɵɵgetCurrentView();\n\n    ɵngcc0.ɵɵelementStart(0, \"nb-icon\", 1);\n    ɵngcc0.ɵɵlistener(\"click\", function NbTagComponent_nb_icon_1_Template_nb_icon_click_0_listener() {\n      ɵngcc0.ɵɵrestoreView(_r2);\n      const ctx_r1 = ɵngcc0.ɵɵnextContext();\n      return ctx_r1._remove();\n    });\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵclassMapInterpolate1(\"nb-tag-remove size-\", ctx_r0.size, \"\");\n  }\n}\n\nconst _c50 = [[[\"nb-tag\"], [\"input\", \"nbTagInput\", \"\"]]];\nconst _c51 = [\"nb-tag, input[nbTagInput]\"];\n\nfunction NbSortIconComponent_ng_container_0_nb_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 3);\n  }\n}\n\nfunction NbSortIconComponent_ng_container_0_nb_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 4);\n  }\n}\n\nfunction NbSortIconComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementContainerStart(0);\n    ɵngcc0.ɵɵtemplate(1, NbSortIconComponent_ng_container_0_nb_icon_1_Template, 1, 0, \"nb-icon\", 1);\n    ɵngcc0.ɵɵtemplate(2, NbSortIconComponent_ng_container_0_nb_icon_2_Template, 1, 0, \"nb-icon\", 2);\n    ɵngcc0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isAscending());\n    ɵngcc0.ɵɵadvance(1);\n    ɵngcc0.ɵɵproperty(\"ngIf\", ctx_r0.isDescending());\n  }\n}\n\nconst _c52 = [\"nbSortHeader\", \"\"];\n\nfunction NbSortHeaderComponent_nb_sort_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-sort-icon\", 4);\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"direction\", ctx_r0.direction);\n  }\n}\n\nfunction NbSortHeaderComponent_ng_template_3_Template(rf, ctx) {}\n\nconst _c53 = [\"nbTreeGrid\", \"\"];\nconst _c54 = [\"nbTreeGridRow\", \"\"];\nconst _c55 = [\"nbTreeGridHeaderRow\", \"\"];\nconst _c56 = [\"nbTreeGridFooterRow\", \"\"];\n\nfunction NbToggleComponent_nb_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelement(0, \"nb-icon\", 6);\n  }\n}\n\nfunction NbFormFieldComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵprojection(2, 1);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r0.prefixClasses$));\n  }\n}\n\nfunction NbFormFieldComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    ɵngcc0.ɵɵelementStart(0, \"div\", 2);\n    ɵngcc0.ɵɵpipe(1, \"async\");\n    ɵngcc0.ɵɵprojection(2, 2);\n    ɵngcc0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = ɵngcc0.ɵɵnextContext();\n    ɵngcc0.ɵɵproperty(\"ngClass\", ɵngcc0.ɵɵpipeBind1(1, 1, ctx_r1.suffixClasses$));\n  }\n}\n\nconst _c57 = [\"*\", [[\"\", \"nbPrefix\", \"\"]], [[\"\", \"nbSuffix\", \"\"]]];\nconst _c58 = [\"*\", \"[nbPrefix]\", \"[nbSuffix]\"];\nconst NB_THEME_OPTIONS = new InjectionToken('Nebular Theme Options');\nconst NB_MEDIA_BREAKPOINTS = new InjectionToken('Nebular Media Breakpoints');\nconst NB_BUILT_IN_JS_THEMES = new InjectionToken('Nebular Built-in JS Themes');\nconst NB_JS_THEMES = new InjectionToken('Nebular JS Themes');\n/**\n * We're providing browser apis with tokens to improve testing capabilities.\n * */\n\nconst NB_WINDOW = new InjectionToken('Window');\nconst NB_DOCUMENT = new InjectionToken('Document');\nconst palette = {\n  primary: '#3366ff',\n  success: '#00d68f',\n  info: '#0095ff',\n  warning: '#ffaa00',\n  danger: '#ff3d71'\n};\nconst DEFAULT_THEME = {\n  name: 'default',\n  variables: {\n    fontMain: 'Open Sans, sans-serif',\n    fontSecondary: 'Raleway, sans-serif',\n    bg: '#ffffff',\n    bg2: '#f7f9fc',\n    bg3: '#edf1f7',\n    bg4: '#e4e9f2',\n    border: '#ffffff',\n    border2: '#f7f9fc',\n    border3: '#edf1f7',\n    border4: '#e4e9f2',\n    border5: '#c5cee0',\n    fg: '#8f9bb3',\n    fgHeading: '#1a2138',\n    fgText: '#1a2138',\n    fgHighlight: palette.primary,\n    layoutBg: '#f7f9fc',\n    separator: '#edf1f7',\n    primary: palette.primary,\n    success: palette.success,\n    info: palette.info,\n    warning: palette.warning,\n    danger: palette.danger,\n    primaryLight: '#598bff',\n    successLight: '#2ce69b',\n    infoLight: '#42aaff',\n    warningLight: '#ffc94d',\n    dangerLight: '#ff708d'\n  }\n};\nconst palette$1 = {\n  primary: '#a16eff',\n  success: '#00d68f',\n  info: '#0095ff',\n  warning: '#ffaa00',\n  danger: '#ff3d71'\n};\nconst COSMIC_THEME = {\n  name: 'cosmic',\n  variables: {\n    fontMain: 'Open Sans, sans-serif',\n    fontSecondary: 'Raleway, sans-serif',\n    bg: '#323259',\n    bg2: '#252547',\n    bg3: '#1b1b38',\n    bg4: '#13132b',\n    border: '#323259',\n    border2: '#252547',\n    border3: '#1b1b38',\n    border4: '#13132b',\n    border5: '#13132b',\n    fg: '#b4b4db',\n    fgHeading: '#ffffff',\n    fgText: '#ffffff',\n    fgHighlight: palette$1.primary,\n    layoutBg: '#151a30',\n    separator: '#151a30',\n    primary: palette$1.primary,\n    success: palette$1.success,\n    info: palette$1.info,\n    warning: palette$1.warning,\n    danger: palette$1.danger,\n    primaryLight: '#b18aff',\n    successLight: '#2ce69b',\n    infoLight: '#42aaff',\n    warningLight: '#ffc94d',\n    dangerLight: '#ff708d'\n  }\n};\nconst palette$2 = {\n  primary: '#73a1ff',\n  success: '#5dcfe3',\n  info: '#ba7fec',\n  warning: '#ffa36b',\n  danger: '#ff6b83'\n};\nconst CORPORATE_THEME = {\n  name: 'corporate',\n  base: 'default',\n  variables: {\n    fontMain: 'Open Sans, sans-serif',\n    fontSecondary: 'Raleway, sans-serif',\n    bg: '#ffffff',\n    bg2: '#f7f9fc',\n    bg3: '#edf1f7',\n    bg4: '#e4e9f2',\n    border: '#ffffff',\n    border2: '#f7f9fc',\n    border3: '#edf1f7',\n    border4: '#e4e9f2',\n    border5: '#c5cee0',\n    fg: '#8f9bb3',\n    fgHeading: '#1a2138',\n    fgText: '#1a2138',\n    fgHighlight: palette$2.primary,\n    layoutBg: '#f7f9fc',\n    separator: '#edf1f7',\n    primary: palette$2.primary,\n    success: palette$2.success,\n    info: palette$2.info,\n    warning: palette$2.warning,\n    danger: palette$2.danger,\n    primaryLight: '#598bff',\n    successLight: '#2ce69b',\n    infoLight: '#42aaff',\n    warningLight: '#ffc94d',\n    dangerLight: '#ff708d'\n  }\n};\nconst palette$3 = {\n  primary: '#3366ff',\n  success: '#00d68f',\n  info: '#0095ff',\n  warning: '#ffaa00',\n  danger: '#ff3d71'\n};\nconst DARK_THEME = {\n  name: 'dark',\n  variables: {\n    fontMain: 'Open Sans, sans-serif',\n    fontSecondary: 'Raleway, sans-serif',\n    bg: '#222b45',\n    bg2: '#1a2138',\n    bg3: '#151a30',\n    bg4: '#101426',\n    border: '#222b45',\n    border2: '#1a2138',\n    border3: '#151a30',\n    border4: '#101426',\n    border5: '#101426',\n    fg: '#8f9bb3',\n    fgHeading: '#ffffff',\n    fgText: '#ffffff',\n    fgHighlight: palette$3.primary,\n    layoutBg: '#1b1b38',\n    separator: '#1b1b38',\n    primary: palette$3.primary,\n    success: palette$3.success,\n    info: palette$3.info,\n    warning: palette$3.warning,\n    danger: palette$3.danger,\n    primaryLight: '#598bff',\n    successLight: '#2ce69b',\n    infoLight: '#42aaff',\n    warningLight: '#ffc94d',\n    dangerLight: '#ff708d'\n  }\n};\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\nconst BUILT_IN_THEMES = [DEFAULT_THEME, COSMIC_THEME, CORPORATE_THEME, DARK_THEME];\n/**\n * Js Themes registry - provides access to the JS themes' variables.\n * Usually shouldn't be used directly, but through the NbThemeService class methods (getJsTheme).\n */\n\nlet NbJSThemesRegistry = /*#__PURE__*/(() => {\n  class NbJSThemesRegistry {\n    constructor(builtInThemes, newThemes = []) {\n      this.themes = {};\n      const themes = this.combineByNames(newThemes, builtInThemes);\n      themes.forEach(theme => {\n        this.register(theme, theme.name, theme.base);\n      });\n    }\n    /**\n     * Registers a new JS theme\n     * @param config any\n     * @param themeName string\n     * @param baseTheme string\n     */\n\n\n    register(config, themeName, baseTheme) {\n      const base = this.has(baseTheme) ? this.get(baseTheme) : {};\n      this.themes[themeName] = this.mergeDeep({}, base, config);\n    }\n    /**\n     * Checks whether the theme is registered\n     * @param themeName\n     * @returns boolean\n     */\n\n\n    has(themeName) {\n      return !!this.themes[themeName];\n    }\n    /**\n     * Return a theme\n     * @param themeName\n     * @returns NbJSThemeOptions\n     */\n\n\n    get(themeName) {\n      if (!this.themes[themeName]) {\n        throw Error(`NbThemeConfig: no theme '${themeName}' found registered.`);\n      }\n\n      return JSON.parse(JSON.stringify(this.themes[themeName]));\n    }\n\n    combineByNames(newThemes, oldThemes) {\n      if (newThemes) {\n        const mergedThemes = [];\n        newThemes.forEach(theme => {\n          const sameOld = oldThemes.find(tm => tm.name === theme.name) || {};\n          const mergedTheme = this.mergeDeep({}, sameOld, theme);\n          mergedThemes.push(mergedTheme);\n        });\n        oldThemes.forEach(theme => {\n          if (!mergedThemes.find(tm => tm.name === theme.name)) {\n            mergedThemes.push(theme);\n          }\n        });\n        return mergedThemes;\n      }\n\n      return oldThemes;\n    }\n\n    isObject(item) {\n      return item && typeof item === 'object' && !Array.isArray(item);\n    } // TODO: move to helpers\n\n\n    mergeDeep(target, ...sources) {\n      if (!sources.length) {\n        return target;\n      }\n\n      const source = sources.shift();\n\n      if (this.isObject(target) && this.isObject(source)) {\n        for (const key in source) {\n          if (this.isObject(source[key])) {\n            if (!target[key]) {\n              Object.assign(target, {\n                [key]: {}\n              });\n            }\n\n            this.mergeDeep(target[key], source[key]);\n          } else {\n            Object.assign(target, {\n              [key]: source[key]\n            });\n          }\n        }\n      }\n\n      return this.mergeDeep(target, ...sources);\n    }\n\n  }\n\n  NbJSThemesRegistry.ɵfac = function NbJSThemesRegistry_Factory(t) {\n    return new (t || NbJSThemesRegistry)(ɵngcc0.ɵɵinject(NB_BUILT_IN_JS_THEMES), ɵngcc0.ɵɵinject(NB_JS_THEMES));\n  };\n\n  NbJSThemesRegistry.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbJSThemesRegistry,\n    factory: NbJSThemesRegistry.ɵfac\n  });\n  return NbJSThemesRegistry;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst DEFAULT_MEDIA_BREAKPOINTS = [{\n  name: 'xs',\n  width: 0\n}, {\n  name: 'is',\n  width: 400\n}, {\n  name: 'sm',\n  width: 576\n}, {\n  name: 'md',\n  width: 768\n}, {\n  name: 'lg',\n  width: 992\n}, {\n  name: 'xl',\n  width: 1200\n}, {\n  name: 'xxl',\n  width: 1400\n}, {\n  name: 'xxxl',\n  width: 1600\n}];\n/**\n * Manages media breakpoints\n *\n * Provides access to available media breakpoints to convert window width to a configured breakpoint,\n * e.g. 200px - *xs* breakpoint\n */\n\nlet NbMediaBreakpointsService = /*#__PURE__*/(() => {\n  class NbMediaBreakpointsService {\n    constructor(breakpoints) {\n      this.breakpoints = breakpoints;\n      this.breakpointsMap = this.breakpoints.reduce((res, b) => {\n        res[b.name] = b.width;\n        return res;\n      }, {});\n    }\n    /**\n     * Returns a configured breakpoint by width\n     * @param width number\n     * @returns {Z|{name: string, width: number}}\n     */\n\n\n    getByWidth(width) {\n      const unknown = {\n        name: 'unknown',\n        width: width\n      };\n      const breakpoints = this.getBreakpoints();\n      return breakpoints.find((point, index) => {\n        const next = breakpoints[index + 1];\n        return width >= point.width && (!next || width < next.width);\n      }) || unknown;\n    }\n    /**\n     * Returns a configured breakpoint by name\n     * @param name string\n     * @returns NbMediaBreakpoint\n     */\n\n\n    getByName(name) {\n      const unknown = {\n        name: 'unknown',\n        width: NaN\n      };\n      const breakpoints = this.getBreakpoints();\n      return breakpoints.find(point => name === point.name) || unknown;\n    }\n    /**\n     * Returns a list of configured breakpoints for the theme\n     * @returns NbMediaBreakpoint[]\n     */\n\n\n    getBreakpoints() {\n      return this.breakpoints;\n    }\n    /**\n     * Returns a map of configured breakpoints for the theme\n     * @returns {[p: string]: number}\n     */\n\n\n    getBreakpointsMap() {\n      return this.breakpointsMap;\n    }\n\n  }\n\n  NbMediaBreakpointsService.ɵfac = function NbMediaBreakpointsService_Factory(t) {\n    return new (t || NbMediaBreakpointsService)(ɵngcc0.ɵɵinject(NB_MEDIA_BREAKPOINTS));\n  };\n\n  NbMediaBreakpointsService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbMediaBreakpointsService,\n    factory: NbMediaBreakpointsService.ɵfac\n  });\n  return NbMediaBreakpointsService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Main Nebular service. Includes various helper methods.\n */\n\n\nlet NbThemeService = /*#__PURE__*/(() => {\n  class NbThemeService {\n    constructor(options, breakpointService, jsThemesRegistry) {\n      this.options = options;\n      this.breakpointService = breakpointService;\n      this.jsThemesRegistry = jsThemesRegistry;\n      this.themeChanges$ = new ReplaySubject(1);\n      this.appendLayoutClass$ = new Subject();\n      this.removeLayoutClass$ = new Subject();\n      this.changeWindowWidth$ = new ReplaySubject(2);\n\n      if (options && options.name) {\n        this.changeTheme(options.name);\n      }\n    }\n    /**\n     * Change current application theme\n     * @param {string} name\n     */\n\n\n    changeTheme(name) {\n      this.themeChanges$.next({\n        name,\n        previous: this.currentTheme\n      });\n      this.currentTheme = name;\n    }\n\n    changeWindowWidth(width) {\n      this.changeWindowWidth$.next(width);\n    }\n    /**\n     * Returns a theme object with variables (color/paddings/etc) on a theme change.\n     * Once subscribed - returns current theme.\n     *\n     * @returns {Observable<NbJSThemeOptions>}\n     */\n\n\n    getJsTheme() {\n      return this.onThemeChange().pipe(map(theme => {\n        return this.jsThemesRegistry.get(theme.name);\n      }));\n    }\n    /**\n     * Triggers media query breakpoint change\n     * Returns a pair where the first item is previous media breakpoint and the second item is current breakpoit.\n     * ```ts\n     *  [{ name: 'xs', width: 0 }, { name: 'md', width: 768 }] // change from `xs` to `md`\n     * ```\n     * @returns {Observable<[NbMediaBreakpoint, NbMediaBreakpoint]>}\n     */\n\n\n    onMediaQueryChange() {\n      return this.changeWindowWidth$.pipe(startWith(undefined), pairwise(), map(([prevWidth, width]) => {\n        return [this.breakpointService.getByWidth(prevWidth), this.breakpointService.getByWidth(width)];\n      }), filter(([prevPoint, point]) => {\n        return prevPoint.name !== point.name;\n      }), distinctUntilChanged(null, params => params[0].name + params[1].name), share());\n    }\n    /**\n     * Triggered when current theme is changed\n     * @returns {Observable<any>}\n     */\n\n\n    onThemeChange() {\n      return this.themeChanges$.pipe(share());\n    }\n    /**\n     * Append a class to nb-layout\n     * @param {string} className\n     */\n\n\n    appendLayoutClass(className) {\n      this.appendLayoutClass$.next(className);\n    }\n    /**\n     * Triggered when a new class is added to nb-layout through `appendLayoutClass` method\n     * @returns {Observable<any>}\n     */\n\n\n    onAppendLayoutClass() {\n      return this.appendLayoutClass$.pipe(share());\n    }\n    /**\n     * Removes a class from nb-layout\n     * @param {string} className\n     */\n\n\n    removeLayoutClass(className) {\n      this.removeLayoutClass$.next(className);\n    }\n    /**\n     * Triggered when a class is removed from nb-layout through `removeLayoutClass` method\n     * @returns {Observable<any>}\n     */\n\n\n    onRemoveLayoutClass() {\n      return this.removeLayoutClass$.pipe(share());\n    }\n\n  }\n\n  NbThemeService.ɵfac = function NbThemeService_Factory(t) {\n    return new (t || NbThemeService)(ɵngcc0.ɵɵinject(NB_THEME_OPTIONS), ɵngcc0.ɵɵinject(NbMediaBreakpointsService), ɵngcc0.ɵɵinject(NbJSThemesRegistry));\n  };\n\n  NbThemeService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbThemeService,\n    factory: NbThemeService.ɵfac\n  });\n  return NbThemeService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Service to control the global page spinner.\n */\n\n\nlet NbSpinnerService = /*#__PURE__*/(() => {\n  class NbSpinnerService {\n    constructor(document) {\n      this.document = document;\n      this.loaders = [];\n      this.selector = 'nb-global-spinner';\n    }\n    /**\n     * Appends new loader to the list of loader to be completed before\n     * spinner will be hidden\n     * @param method Promise<any>\n     */\n\n\n    registerLoader(method) {\n      this.loaders.push(method);\n    }\n    /**\n     * Clears the list of loader\n     */\n\n\n    clear() {\n      this.loaders = [];\n    }\n    /**\n     * Start the loader process, show spinnder and execute loaders\n     */\n\n\n    load() {\n      this.showSpinner();\n      this.executeAll();\n    }\n\n    executeAll(done = () => {}) {\n      Promise.all(this.loaders).then(values => {\n        this.hideSpinner();\n        done.call(null, values);\n      }).catch(error => {\n        // TODO: Promise.reject\n        console.error(error);\n      });\n    } // TODO is there any better way of doing this?\n\n\n    showSpinner() {\n      const el = this.getSpinnerElement();\n\n      if (el) {\n        el.style['display'] = 'block';\n      }\n    }\n\n    hideSpinner() {\n      const el = this.getSpinnerElement();\n\n      if (el) {\n        el.style['display'] = 'none';\n      }\n    }\n\n    getSpinnerElement() {\n      return this.document.getElementById(this.selector);\n    }\n\n  }\n\n  NbSpinnerService.ɵfac = function NbSpinnerService_Factory(t) {\n    return new (t || NbSpinnerService)(ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbSpinnerService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbSpinnerService,\n    factory: NbSpinnerService.ɵfac\n  });\n  return NbSpinnerService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Layout direction.\n * */\n\n\nvar NbLayoutDirection = /*#__PURE__*/(() => {\n  (function (NbLayoutDirection) {\n    NbLayoutDirection[\"LTR\"] = \"ltr\";\n    NbLayoutDirection[\"RTL\"] = \"rtl\";\n  })(NbLayoutDirection || (NbLayoutDirection = {}));\n\n  return NbLayoutDirection;\n})();\n\n/**\n * Layout direction setting injection token.\n * */\nconst NB_LAYOUT_DIRECTION = new InjectionToken('Layout direction');\n/**\n * Layout Direction Service.\n * Allows to set or get layout direction and listen to its changes\n */\n\nlet NbLayoutDirectionService = /*#__PURE__*/(() => {\n  class NbLayoutDirectionService {\n    constructor(direction = NbLayoutDirection.LTR) {\n      this.direction = direction;\n      this.$directionChange = new ReplaySubject(1);\n      this.setDirection(direction);\n    }\n    /**\n     * Returns true if layout direction set to left to right.\n     * @returns boolean.\n     * */\n\n\n    isLtr() {\n      return this.direction === NbLayoutDirection.LTR;\n    }\n    /**\n     * Returns true if layout direction set to right to left.\n     * @returns boolean.\n     * */\n\n\n    isRtl() {\n      return this.direction === NbLayoutDirection.RTL;\n    }\n    /**\n     * Returns current layout direction.\n     * @returns NbLayoutDirection.\n     * */\n\n\n    getDirection() {\n      return this.direction;\n    }\n    /**\n     * Sets layout direction\n     * @param {NbLayoutDirection} direction\n     */\n\n\n    setDirection(direction) {\n      this.direction = direction;\n      this.$directionChange.next(direction);\n    }\n    /**\n     * Triggered when direction was changed.\n     * @returns Observable<NbLayoutDirection>.\n     */\n\n\n    onDirectionChange() {\n      return this.$directionChange.pipe(share());\n    }\n\n  }\n\n  NbLayoutDirectionService.ɵfac = function NbLayoutDirectionService_Factory(t) {\n    return new (t || NbLayoutDirectionService)(ɵngcc0.ɵɵinject(NB_LAYOUT_DIRECTION, 8));\n  };\n\n  NbLayoutDirectionService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbLayoutDirectionService,\n    factory: NbLayoutDirectionService.ɵfac\n  });\n  return NbLayoutDirectionService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Layout scroll service. Provides information about current scroll position,\n * as well as methods to update position of the scroll.\n *\n * The reason we added this service is that in Nebular there are two scroll modes:\n * - the default mode when scroll is on body\n * - and the `withScroll` mode, when scroll is removed from the body and moved to an element inside of the\n * `nb-layout` component\n */\n\n\nlet NbLayoutScrollService = /*#__PURE__*/(() => {\n  class NbLayoutScrollService {\n    constructor() {\n      this.scrollPositionReq$ = new Subject();\n      this.manualScroll$ = new Subject();\n      this.scroll$ = new Subject();\n      this.scrollable$ = new Subject();\n    }\n    /**\n     * Returns scroll position\n     *\n     * @returns {Observable<NbScrollPosition>}\n     */\n\n\n    getPosition() {\n      return new Observable(observer => {\n        const listener = new Subject();\n        listener.subscribe(observer);\n        this.scrollPositionReq$.next({\n          listener\n        });\n        return () => listener.complete();\n      });\n    }\n    /**\n     * Sets scroll position\n     *\n     * @param {number} x\n     * @param {number} y\n     */\n\n\n    scrollTo(x = null, y = null) {\n      this.manualScroll$.next({\n        x,\n        y\n      });\n    }\n    /**\n     * Returns a stream of scroll events\n     *\n     * @returns {Observable<any>}\n     */\n\n\n    onScroll() {\n      return this.scroll$.pipe(share());\n    }\n    /**\n     * @private\n     * @returns Observable<NbScrollPosition>.\n     */\n\n\n    onManualScroll() {\n      return this.manualScroll$.pipe(share());\n    }\n    /**\n     * @private\n     * @returns {Subject<any>}\n     */\n\n\n    onGetPosition() {\n      return this.scrollPositionReq$;\n    }\n\n    onScrollableChange() {\n      return this.scrollable$.pipe(share());\n    }\n    /**\n     * @private\n     * @param {any} event\n     */\n\n\n    fireScrollChange(event) {\n      this.scroll$.next(event);\n    }\n\n    scrollable(scrollable) {\n      this.scrollable$.next(scrollable);\n    }\n\n  }\n\n  NbLayoutScrollService.ɵfac = function NbLayoutScrollService_Factory(t) {\n    return new (t || NbLayoutScrollService)();\n  };\n\n  NbLayoutScrollService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbLayoutScrollService,\n    factory: NbLayoutScrollService.ɵfac\n  });\n  return NbLayoutScrollService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Simple helper service to return Layout dimensions\n * Depending of current Layout scroll mode (default or `withScroll` when scroll is moved to an element\n * inside of the layout) corresponding dimensions will be returns  - of `documentElement` in first case and\n * `.scrollable-container` in the second.\n */\n\n\nlet NbLayoutRulerService = /*#__PURE__*/(() => {\n  class NbLayoutRulerService {\n    constructor() {\n      this.contentDimensionsReq$ = new Subject();\n    }\n    /**\n     * Content dimensions\n     * @returns {Observable<NbLayoutDimensions>}\n     */\n\n\n    getDimensions() {\n      return new Observable(observer => {\n        const listener = new Subject();\n        listener.subscribe(observer);\n        this.contentDimensionsReq$.next({\n          listener\n        });\n        return () => listener.complete();\n      });\n    }\n    /**\n     * @private\n     * @returns {Subject<any>}\n     */\n\n\n    onGetDimensions() {\n      return this.contentDimensionsReq$;\n    }\n\n  }\n\n  NbLayoutRulerService.ɵfac = function NbLayoutRulerService_Factory(t) {\n    return new (t || NbLayoutRulerService)();\n  };\n\n  NbLayoutRulerService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbLayoutRulerService,\n    factory: NbLayoutRulerService.ɵfac\n  });\n  return NbLayoutRulerService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbSharedModule = /*#__PURE__*/(() => {\n  class NbSharedModule {}\n\n  NbSharedModule.ɵfac = function NbSharedModule_Factory(t) {\n    return new (t || NbSharedModule)();\n  };\n\n  NbSharedModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbSharedModule\n  });\n  NbSharedModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [CommonModule, // TODO: probably we don't need FormsModule in SharedModule\n    FormsModule, RouterModule]\n  });\n  return NbSharedModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSharedModule, {\n    exports: function () {\n      return [CommonModule, // TODO: probably we don't need FormsModule in SharedModule\n      FormsModule, RouterModule];\n    }\n  });\n})();\n/**\n * Overrides angular cdk focus trap to keep restore functionality inside trap.\n * */\n\n\nclass NbFocusTrap extends FocusTrap {\n  constructor(element, checker, ngZone, document, deferAnchors) {\n    super(element, checker, ngZone, document, deferAnchors);\n    this.element = element;\n    this.checker = checker;\n    this.ngZone = ngZone;\n    this.document = document;\n    this.savePreviouslyFocusedElement();\n  }\n\n  restoreFocus() {\n    this.previouslyFocusedElement.focus();\n    this.destroy();\n  }\n\n  blurPreviouslyFocusedElement() {\n    this.previouslyFocusedElement.blur();\n  }\n\n  savePreviouslyFocusedElement() {\n    this.previouslyFocusedElement = this.document.activeElement;\n  }\n\n}\n\nlet NbFocusTrapFactoryService = /*#__PURE__*/(() => {\n  class NbFocusTrapFactoryService extends FocusTrapFactory {\n    constructor(checker, ngZone, document) {\n      super(checker, ngZone, document);\n      this.checker = checker;\n      this.ngZone = ngZone;\n      this.document = document;\n    }\n\n    create(element, deferCaptureElements) {\n      return new NbFocusTrap(element, this.checker, this.ngZone, this.document, deferCaptureElements);\n    }\n\n  }\n\n  NbFocusTrapFactoryService.ɵfac = function NbFocusTrapFactoryService_Factory(t) {\n    return new (t || NbFocusTrapFactoryService)(ɵngcc0.ɵɵinject(ɵngcc1.InteractivityChecker), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbFocusTrapFactoryService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbFocusTrapFactoryService,\n    factory: NbFocusTrapFactoryService.ɵfac\n  });\n  return NbFocusTrapFactoryService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbFocusKeyManager extends FocusKeyManager {}\n\nclass NbFocusKeyManagerFactoryService {\n  create(items) {\n    return new NbFocusKeyManager(items);\n  }\n\n}\n\nclass NbActiveDescendantKeyManager extends ActiveDescendantKeyManager {}\n\nclass NbActiveDescendantKeyManagerFactoryService {\n  create(items) {\n    return new NbActiveDescendantKeyManager(items);\n  }\n\n}\n\nvar NbKeyManagerActiveItemMode = /*#__PURE__*/(() => {\n  (function (NbKeyManagerActiveItemMode) {\n    NbKeyManagerActiveItemMode[NbKeyManagerActiveItemMode[\"RESET_ACTIVE\"] = -1] = \"RESET_ACTIVE\";\n    NbKeyManagerActiveItemMode[NbKeyManagerActiveItemMode[\"FIRST_ACTIVE\"] = 0] = \"FIRST_ACTIVE\";\n  })(NbKeyManagerActiveItemMode || (NbKeyManagerActiveItemMode = {}));\n\n  return NbKeyManagerActiveItemMode;\n})();\nlet NbFocusMonitor = /*#__PURE__*/(() => {\n  class NbFocusMonitor extends FocusMonitor {}\n\n  NbFocusMonitor.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFocusMonitor_BaseFactory;\n    return function NbFocusMonitor_Factory(t) {\n      return (ɵNbFocusMonitor_BaseFactory || (ɵNbFocusMonitor_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFocusMonitor)))(t || NbFocusMonitor);\n    };\n  }();\n\n  NbFocusMonitor.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbFocusMonitor,\n    factory: NbFocusMonitor.ɵfac\n  });\n  return NbFocusMonitor;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbA11yModule = /*#__PURE__*/(() => {\n  class NbA11yModule {\n    static forRoot() {\n      return {\n        ngModule: NbA11yModule,\n        providers: [NbFocusTrapFactoryService, NbFocusKeyManagerFactoryService, NbActiveDescendantKeyManagerFactoryService, {\n          provide: NbFocusMonitor,\n          useClass: FocusMonitor\n        }]\n      };\n    }\n\n  }\n\n  NbA11yModule.ɵfac = function NbA11yModule_Factory(t) {\n    return new (t || NbA11yModule)();\n  };\n\n  NbA11yModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbA11yModule\n  });\n  NbA11yModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return NbA11yModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbPortalDirective = /*#__PURE__*/(() => {\n  class NbPortalDirective extends CdkPortal {}\n\n  NbPortalDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbPortalDirective_BaseFactory;\n    return function NbPortalDirective_Factory(t) {\n      return (ɵNbPortalDirective_BaseFactory || (ɵNbPortalDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPortalDirective)))(t || NbPortalDirective);\n    };\n  }();\n\n  NbPortalDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbPortalDirective,\n    selectors: [[\"\", \"nbPortal\", \"\"]],\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbPortalDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbPortalOutletDirective = /*#__PURE__*/(() => {\n  class NbPortalOutletDirective extends CdkPortalOutlet {}\n\n  NbPortalOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbPortalOutletDirective_BaseFactory;\n    return function NbPortalOutletDirective_Factory(t) {\n      return (ɵNbPortalOutletDirective_BaseFactory || (ɵNbPortalOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPortalOutletDirective)))(t || NbPortalOutletDirective);\n    };\n  }();\n\n  NbPortalOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbPortalOutletDirective,\n    selectors: [[\"\", \"nbPortalOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbPortalOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbComponentPortal extends ComponentPortal {}\n\nlet NbOverlay = /*#__PURE__*/(() => {\n  class NbOverlay extends Overlay {}\n\n  NbOverlay.ɵfac = /*@__PURE__*/function () {\n    let ɵNbOverlay_BaseFactory;\n    return function NbOverlay_Factory(t) {\n      return (ɵNbOverlay_BaseFactory || (ɵNbOverlay_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlay)))(t || NbOverlay);\n    };\n  }();\n\n  NbOverlay.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbOverlay,\n    factory: NbOverlay.ɵfac\n  });\n  return NbOverlay;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbOverlayPositionBuilder = /*#__PURE__*/(() => {\n  class NbOverlayPositionBuilder extends OverlayPositionBuilder {}\n\n  NbOverlayPositionBuilder.ɵfac = /*@__PURE__*/function () {\n    let ɵNbOverlayPositionBuilder_BaseFactory;\n    return function NbOverlayPositionBuilder_Factory(t) {\n      return (ɵNbOverlayPositionBuilder_BaseFactory || (ɵNbOverlayPositionBuilder_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayPositionBuilder)))(t || NbOverlayPositionBuilder);\n    };\n  }();\n\n  NbOverlayPositionBuilder.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbOverlayPositionBuilder,\n    factory: NbOverlayPositionBuilder.ɵfac\n  });\n  return NbOverlayPositionBuilder;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbTemplatePortal extends TemplatePortal {\n  constructor(template, viewContainerRef, context) {\n    super(template, viewContainerRef, context);\n  }\n\n}\n\nlet NbOverlayContainer = /*#__PURE__*/(() => {\n  class NbOverlayContainer extends OverlayContainer {}\n\n  NbOverlayContainer.ɵfac = /*@__PURE__*/function () {\n    let ɵNbOverlayContainer_BaseFactory;\n    return function NbOverlayContainer_Factory(t) {\n      return (ɵNbOverlayContainer_BaseFactory || (ɵNbOverlayContainer_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayContainer)))(t || NbOverlayContainer);\n    };\n  }();\n\n  NbOverlayContainer.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbOverlayContainer,\n    factory: NbOverlayContainer.ɵfac\n  });\n  return NbOverlayContainer;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbFlexibleConnectedPositionStrategy extends FlexibleConnectedPositionStrategy {}\n\nclass NbPortalInjector extends PortalInjector {}\n\nconst CDK_MODULES = [OverlayModule, PortalModule];\n/**\n * This module helps us to keep all angular/cdk deps inside our cdk module via providing aliases.\n * Approach will help us move cdk in separate npm package and refactor nebular/theme code.\n * */\n\nlet NbCdkMappingModule = /*#__PURE__*/(() => {\n  class NbCdkMappingModule {\n    static forRoot() {\n      return {\n        ngModule: NbCdkMappingModule,\n        providers: [NbOverlay, NbOverlayPositionBuilder]\n      };\n    }\n\n  }\n\n  NbCdkMappingModule.ɵfac = function NbCdkMappingModule_Factory(t) {\n    return new (t || NbCdkMappingModule)();\n  };\n\n  NbCdkMappingModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCdkMappingModule\n  });\n  NbCdkMappingModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[...CDK_MODULES], OverlayModule, PortalModule]\n  });\n  return NbCdkMappingModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCdkMappingModule, {\n    declarations: [NbPortalDirective, NbPortalOutletDirective],\n    imports: [OverlayModule, PortalModule],\n    exports: [OverlayModule, PortalModule, NbPortalDirective, NbPortalOutletDirective]\n  });\n})();\n\nlet NbPlatform = /*#__PURE__*/(() => {\n  class NbPlatform extends Platform {}\n\n  NbPlatform.ɵfac = /*@__PURE__*/function () {\n    let ɵNbPlatform_BaseFactory;\n    return function NbPlatform_Factory(t) {\n      return (ɵNbPlatform_BaseFactory || (ɵNbPlatform_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPlatform)))(t || NbPlatform);\n    };\n  }();\n\n  NbPlatform.ɵprov = ɵɵdefineInjectable({\n    factory: function NbPlatform_Factory() {\n      return new Platform(ɵɵinject(PLATFORM_ID));\n    },\n    token: NbPlatform,\n    providedIn: \"root\"\n  });\n  return NbPlatform;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Provides nb-layout as overlay container.\n * Container has to be cleared when layout destroys.\n * Another way previous version of the container will be used\n * but it isn't inserted in DOM and exists in memory only.\n * This case important only if you switch between multiple layouts.\n * */\n\n\nlet NbOverlayContainerAdapter = /*#__PURE__*/(() => {\n  class NbOverlayContainerAdapter extends NbOverlayContainer {\n    setContainer(container) {\n      this.container = container;\n    }\n\n    clearContainer() {\n      this.container = null;\n      this._containerElement = null;\n    }\n\n    _createContainer() {\n      const container = this._document.createElement('div');\n\n      container.classList.add('cdk-overlay-container');\n      this.container.appendChild(container);\n      this._containerElement = container;\n    }\n\n  }\n\n  NbOverlayContainerAdapter.ɵfac = /*@__PURE__*/function () {\n    let ɵNbOverlayContainerAdapter_BaseFactory;\n    return function NbOverlayContainerAdapter_Factory(t) {\n      return (ɵNbOverlayContainerAdapter_BaseFactory || (ɵNbOverlayContainerAdapter_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbOverlayContainerAdapter)))(t || NbOverlayContainerAdapter);\n    };\n  }();\n\n  NbOverlayContainerAdapter.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbOverlayContainerAdapter,\n    factory: NbOverlayContainerAdapter.ɵfac\n  });\n  return NbOverlayContainerAdapter;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbViewportRulerAdapter = /*#__PURE__*/(() => {\n  class NbViewportRulerAdapter extends ViewportRuler {\n    constructor(platform, ngZone, ruler, scroll, document) {\n      super(platform, ngZone, document);\n      this.ruler = ruler;\n      this.scroll = scroll;\n    }\n\n    getViewportSize() {\n      let res;\n      /*\n      * getDimensions call is really synchronous operation.\n      * And we have to conform with the interface of the original service.\n      * */\n\n      this.ruler.getDimensions().pipe(map(dimensions => ({\n        width: dimensions.clientWidth,\n        height: dimensions.clientHeight\n      }))).subscribe(rect => res = rect);\n      return res;\n    }\n\n    getViewportScrollPosition() {\n      let res;\n      /*\n      * getPosition call is really synchronous operation.\n      * And we have to conform with the interface of the original service.\n      * */\n\n      this.scroll.getPosition().pipe(map(position => ({\n        top: position.y,\n        left: position.x\n      }))).subscribe(position => res = position);\n      return res;\n    }\n\n  }\n\n  NbViewportRulerAdapter.ɵfac = function NbViewportRulerAdapter_Factory(t) {\n    return new (t || NbViewportRulerAdapter)(ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbLayoutRulerService), ɵngcc0.ɵɵinject(NbLayoutScrollService), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbViewportRulerAdapter.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbViewportRulerAdapter,\n    factory: NbViewportRulerAdapter.ɵfac\n  });\n  return NbViewportRulerAdapter;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nvar NbGlobalLogicalPosition = /*#__PURE__*/(() => {\n  (function (NbGlobalLogicalPosition) {\n    NbGlobalLogicalPosition[\"TOP_START\"] = \"top-start\";\n    NbGlobalLogicalPosition[\"TOP_END\"] = \"top-end\";\n    NbGlobalLogicalPosition[\"BOTTOM_START\"] = \"bottom-start\";\n    NbGlobalLogicalPosition[\"BOTTOM_END\"] = \"bottom-end\";\n  })(NbGlobalLogicalPosition || (NbGlobalLogicalPosition = {}));\n\n  return NbGlobalLogicalPosition;\n})();\nvar NbGlobalPhysicalPosition = /*#__PURE__*/(() => {\n  (function (NbGlobalPhysicalPosition) {\n    NbGlobalPhysicalPosition[\"TOP_RIGHT\"] = \"top-right\";\n    NbGlobalPhysicalPosition[\"TOP_LEFT\"] = \"top-left\";\n    NbGlobalPhysicalPosition[\"BOTTOM_RIGHT\"] = \"bottom-right\";\n    NbGlobalPhysicalPosition[\"BOTTOM_LEFT\"] = \"bottom-left\";\n  })(NbGlobalPhysicalPosition || (NbGlobalPhysicalPosition = {}));\n\n  return NbGlobalPhysicalPosition;\n})();\nlet NbPositionHelper = /*#__PURE__*/(() => {\n  class NbPositionHelper {\n    constructor(layoutDirection) {\n      this.layoutDirection = layoutDirection;\n    }\n\n    toLogicalPosition(position) {\n      if (Object.values(NbGlobalLogicalPosition).includes(position)) {\n        return position;\n      }\n\n      if (this.layoutDirection.isLtr()) {\n        return this.toLogicalPositionWhenLtr(position);\n      } else {\n        return this.toLogicalPositionWhenRtl(position);\n      }\n    }\n\n    toPhysicalPosition(position) {\n      if (Object.values(NbGlobalPhysicalPosition).includes(position)) {\n        return position;\n      }\n\n      if (this.layoutDirection.isLtr()) {\n        return this.toPhysicalPositionWhenLtr(position);\n      } else {\n        return this.toPhysicalPositionWhenRtl(position);\n      }\n    }\n\n    isTopPosition(position) {\n      const logicalPosition = this.toLogicalPosition(position);\n      return logicalPosition === NbGlobalLogicalPosition.TOP_END || logicalPosition === NbGlobalLogicalPosition.TOP_START;\n    }\n\n    isRightPosition(position) {\n      const physicalPosition = this.toPhysicalPosition(position);\n      return physicalPosition === NbGlobalPhysicalPosition.TOP_RIGHT || physicalPosition === NbGlobalPhysicalPosition.BOTTOM_RIGHT;\n    }\n\n    toLogicalPositionWhenLtr(position) {\n      switch (position) {\n        case NbGlobalPhysicalPosition.TOP_RIGHT:\n          return NbGlobalLogicalPosition.TOP_END;\n\n        case NbGlobalPhysicalPosition.TOP_LEFT:\n          return NbGlobalLogicalPosition.TOP_START;\n\n        case NbGlobalPhysicalPosition.BOTTOM_RIGHT:\n          return NbGlobalLogicalPosition.BOTTOM_END;\n\n        case NbGlobalPhysicalPosition.BOTTOM_LEFT:\n          return NbGlobalLogicalPosition.BOTTOM_START;\n      }\n    }\n\n    toLogicalPositionWhenRtl(position) {\n      switch (position) {\n        case NbGlobalPhysicalPosition.TOP_RIGHT:\n          return NbGlobalLogicalPosition.TOP_START;\n\n        case NbGlobalPhysicalPosition.TOP_LEFT:\n          return NbGlobalLogicalPosition.TOP_END;\n\n        case NbGlobalPhysicalPosition.BOTTOM_RIGHT:\n          return NbGlobalLogicalPosition.BOTTOM_START;\n\n        case NbGlobalPhysicalPosition.BOTTOM_LEFT:\n          return NbGlobalLogicalPosition.BOTTOM_END;\n      }\n    }\n\n    toPhysicalPositionWhenLtr(position) {\n      switch (position) {\n        case NbGlobalLogicalPosition.TOP_START:\n          return NbGlobalPhysicalPosition.TOP_LEFT;\n\n        case NbGlobalLogicalPosition.TOP_END:\n          return NbGlobalPhysicalPosition.TOP_RIGHT;\n\n        case NbGlobalLogicalPosition.BOTTOM_START:\n          return NbGlobalPhysicalPosition.BOTTOM_LEFT;\n\n        case NbGlobalLogicalPosition.BOTTOM_END:\n          return NbGlobalPhysicalPosition.BOTTOM_RIGHT;\n      }\n    }\n\n    toPhysicalPositionWhenRtl(position) {\n      switch (position) {\n        case NbGlobalLogicalPosition.TOP_START:\n          return NbGlobalPhysicalPosition.TOP_RIGHT;\n\n        case NbGlobalLogicalPosition.TOP_END:\n          return NbGlobalPhysicalPosition.TOP_LEFT;\n\n        case NbGlobalLogicalPosition.BOTTOM_START:\n          return NbGlobalPhysicalPosition.BOTTOM_RIGHT;\n\n        case NbGlobalLogicalPosition.BOTTOM_END:\n          return NbGlobalPhysicalPosition.BOTTOM_LEFT;\n      }\n    }\n\n  }\n\n  NbPositionHelper.ɵfac = function NbPositionHelper_Factory(t) {\n    return new (t || NbPositionHelper)(ɵngcc0.ɵɵinject(NbLayoutDirectionService));\n  };\n\n  NbPositionHelper.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbPositionHelper,\n    factory: NbPositionHelper.ɵfac\n  });\n  return NbPositionHelper;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nvar NbAdjustment = /*#__PURE__*/(() => {\n  (function (NbAdjustment) {\n    NbAdjustment[\"NOOP\"] = \"noop\";\n    NbAdjustment[\"CLOCKWISE\"] = \"clockwise\";\n    NbAdjustment[\"COUNTERCLOCKWISE\"] = \"counterclockwise\";\n    NbAdjustment[\"VERTICAL\"] = \"vertical\";\n    NbAdjustment[\"HORIZONTAL\"] = \"horizontal\";\n  })(NbAdjustment || (NbAdjustment = {}));\n\n  return NbAdjustment;\n})();\nvar NbPosition = /*#__PURE__*/(() => {\n  (function (NbPosition) {\n    NbPosition[\"TOP\"] = \"top\";\n    NbPosition[\"BOTTOM\"] = \"bottom\";\n    NbPosition[\"LEFT\"] = \"left\";\n    NbPosition[\"RIGHT\"] = \"right\";\n    NbPosition[\"START\"] = \"start\";\n    NbPosition[\"END\"] = \"end\";\n    NbPosition[\"TOP_END\"] = \"top-end\";\n    NbPosition[\"TOP_START\"] = \"top-start\";\n    NbPosition[\"BOTTOM_END\"] = \"bottom-end\";\n    NbPosition[\"BOTTOM_START\"] = \"bottom-start\";\n    NbPosition[\"END_TOP\"] = \"end-top\";\n    NbPosition[\"END_BOTTOM\"] = \"end-bottom\";\n    NbPosition[\"START_TOP\"] = \"start-top\";\n    NbPosition[\"START_BOTTOM\"] = \"start-bottom\";\n  })(NbPosition || (NbPosition = {}));\n\n  return NbPosition;\n})();\nconst POSITIONS = {\n  [NbPosition.RIGHT](offset) {\n    return {\n      originX: 'end',\n      originY: 'center',\n      overlayX: 'start',\n      overlayY: 'center',\n      offsetX: offset\n    };\n  },\n\n  [NbPosition.BOTTOM](offset) {\n    return {\n      originX: 'center',\n      originY: 'bottom',\n      overlayX: 'center',\n      overlayY: 'top',\n      offsetY: offset\n    };\n  },\n\n  [NbPosition.LEFT](offset) {\n    return {\n      originX: 'start',\n      originY: 'center',\n      overlayX: 'end',\n      overlayY: 'center',\n      offsetX: -offset\n    };\n  },\n\n  [NbPosition.TOP](offset) {\n    return {\n      originX: 'center',\n      originY: 'top',\n      overlayX: 'center',\n      overlayY: 'bottom',\n      offsetY: -offset\n    };\n  },\n\n  [NbPosition.START](offset) {\n    return this[NbPosition.LEFT](offset);\n  },\n\n  [NbPosition.END](offset) {\n    return this[NbPosition.RIGHT](offset);\n  },\n\n  [NbPosition.END_TOP](offset) {\n    return {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      offsetX: offset\n    };\n  },\n\n  [NbPosition.END_BOTTOM](offset) {\n    return {\n      originX: 'end',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'top',\n      offsetX: offset\n    };\n  },\n\n  [NbPosition.BOTTOM_START](offset) {\n    return {\n      originX: 'end',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'top',\n      offsetY: offset\n    };\n  },\n\n  [NbPosition.BOTTOM_END](offset) {\n    return {\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'start',\n      overlayY: 'top',\n      offsetY: offset\n    };\n  },\n\n  [NbPosition.START_TOP](offset) {\n    return {\n      originX: 'start',\n      originY: 'bottom',\n      overlayX: 'end',\n      overlayY: 'bottom',\n      offsetX: -offset\n    };\n  },\n\n  [NbPosition.START_BOTTOM](offset) {\n    return {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'end',\n      overlayY: 'top',\n      offsetX: -offset\n    };\n  },\n\n  [NbPosition.TOP_START](offset) {\n    return {\n      originX: 'end',\n      originY: 'top',\n      overlayX: 'end',\n      overlayY: 'bottom',\n      offsetY: -offset\n    };\n  },\n\n  [NbPosition.TOP_END](offset) {\n    return {\n      originX: 'start',\n      originY: 'top',\n      overlayX: 'start',\n      overlayY: 'bottom',\n      offsetY: -offset\n    };\n  }\n\n};\nconst COUNTER_CLOCKWISE_POSITIONS = [NbPosition.TOP, NbPosition.TOP_END, NbPosition.TOP_START, NbPosition.START, NbPosition.START_TOP, NbPosition.START_BOTTOM, NbPosition.BOTTOM, NbPosition.BOTTOM_START, NbPosition.BOTTOM_END, NbPosition.END, NbPosition.END_BOTTOM, NbPosition.END_TOP];\nconst CLOCKWISE_POSITIONS = [NbPosition.TOP, NbPosition.TOP_START, NbPosition.TOP_END, NbPosition.END, NbPosition.END_TOP, NbPosition.END_BOTTOM, NbPosition.BOTTOM, NbPosition.BOTTOM_END, NbPosition.BOTTOM_START, NbPosition.START, NbPosition.START_BOTTOM, NbPosition.START_TOP];\nconst VERTICAL_POSITIONS = [NbPosition.BOTTOM, NbPosition.TOP];\nconst HORIZONTAL_POSITIONS = [NbPosition.START, NbPosition.END];\n\nfunction comparePositions(p1, p2) {\n  return p1.originX === p2.originX && p1.originY === p2.originY && p1.overlayX === p2.overlayX && p1.overlayY === p2.overlayY;\n}\n/**\n * The main idea of the adjustable connected strategy is to provide predefined set of positions for your overlay.\n * You have to provide adjustment and appropriate strategy will be chosen in runtime.\n * */\n\n\nclass NbAdjustableConnectedPositionStrategy extends NbFlexibleConnectedPositionStrategy {\n  constructor() {\n    super(...arguments);\n    this._offset = 15;\n    this.positionChange = this.positionChanges.pipe(map(positionChange => positionChange.connectionPair), map(connectionPair => {\n      return this.appliedPositions.find(({\n        connectedPosition\n      }) => {\n        return comparePositions(connectedPosition, connectionPair);\n      }).key;\n    }));\n  }\n\n  attach(overlayRef) {\n    /**\n     * We have to apply positions before attach because super.attach() validates positions and crashes app\n     * if no positions provided.\n     * */\n    this.applyPositions();\n    super.attach(overlayRef);\n  }\n\n  apply() {\n    this.applyPositions();\n    super.apply();\n  }\n\n  position(position) {\n    this._position = position;\n    return this;\n  }\n\n  adjustment(adjustment) {\n    this._adjustment = adjustment;\n    return this;\n  }\n\n  offset(offset) {\n    this._offset = offset;\n    return this;\n  }\n\n  applyPositions() {\n    const positions = this.createPositions();\n    this.persistChosenPositions(positions);\n    this.withPositions(this.appliedPositions.map(({\n      connectedPosition\n    }) => connectedPosition));\n  }\n\n  createPositions() {\n    switch (this._adjustment) {\n      case NbAdjustment.NOOP:\n        return [this._position];\n\n      case NbAdjustment.CLOCKWISE:\n        return this.reorderPreferredPositions(CLOCKWISE_POSITIONS);\n\n      case NbAdjustment.COUNTERCLOCKWISE:\n        return this.reorderPreferredPositions(COUNTER_CLOCKWISE_POSITIONS);\n\n      case NbAdjustment.HORIZONTAL:\n        return this.reorderPreferredPositions(HORIZONTAL_POSITIONS);\n\n      case NbAdjustment.VERTICAL:\n        return this.reorderPreferredPositions(VERTICAL_POSITIONS);\n    }\n  }\n\n  persistChosenPositions(positions) {\n    this.appliedPositions = positions.map(position => ({\n      key: position,\n      connectedPosition: POSITIONS[position](this._offset)\n    }));\n  }\n\n  reorderPreferredPositions(positions) {\n    // Physical positions should be mapped to logical as adjustments use logical positions.\n    const startPositionIndex = positions.indexOf(this.mapToLogicalPosition(this._position));\n    const firstPart = positions.slice(startPositionIndex);\n    const secondPart = positions.slice(0, startPositionIndex);\n    return firstPart.concat(secondPart);\n  }\n\n  mapToLogicalPosition(position) {\n    if (position === NbPosition.LEFT) {\n      return NbPosition.START;\n    }\n\n    if (position === NbPosition.RIGHT) {\n      return NbPosition.END;\n    }\n\n    return position;\n  }\n\n}\n\nclass NbGlobalPositionStrategy extends GlobalPositionStrategy {\n  position(position) {\n    switch (position) {\n      case NbGlobalLogicalPosition.TOP_START:\n        return this.top().left();\n\n      case NbGlobalLogicalPosition.TOP_END:\n        return this.top().right();\n\n      case NbGlobalLogicalPosition.BOTTOM_START:\n        return this.bottom().left();\n\n      case NbGlobalLogicalPosition.BOTTOM_END:\n        return this.bottom().right();\n    }\n  }\n\n}\n\nlet NbPositionBuilderService = /*#__PURE__*/(() => {\n  class NbPositionBuilderService {\n    constructor(document, viewportRuler, platform, positionBuilder, overlayContainer) {\n      this.document = document;\n      this.viewportRuler = viewportRuler;\n      this.platform = platform;\n      this.positionBuilder = positionBuilder;\n      this.overlayContainer = overlayContainer;\n    }\n\n    global() {\n      return new NbGlobalPositionStrategy();\n    }\n\n    connectedTo(elementRef) {\n      return new NbAdjustableConnectedPositionStrategy(elementRef, this.viewportRuler, this.document, this.platform, this.overlayContainer).withFlexibleDimensions(false).withPush(false);\n    }\n\n  }\n\n  NbPositionBuilderService.ɵfac = function NbPositionBuilderService_Factory(t) {\n    return new (t || NbPositionBuilderService)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(NbOverlayPositionBuilder), ɵngcc0.ɵɵinject(NbOverlayContainerAdapter));\n  };\n\n  NbPositionBuilderService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbPositionBuilderService,\n    factory: NbPositionBuilderService.ɵfac\n  });\n  return NbPositionBuilderService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbPositionedContainerComponent = /*#__PURE__*/(() => {\n  class NbPositionedContainerComponent {\n    get top() {\n      return this.position === NbPosition.TOP;\n    }\n\n    get topStart() {\n      return this.position === NbPosition.TOP_START;\n    }\n\n    get topEnd() {\n      return this.position === NbPosition.TOP_END;\n    }\n\n    get right() {\n      return this.position === NbPosition.RIGHT || this.position === NbPosition.END;\n    }\n\n    get endTop() {\n      return this.position === NbPosition.END_TOP;\n    }\n\n    get endBottom() {\n      return this.position === NbPosition.END_BOTTOM;\n    }\n\n    get bottom() {\n      return this.position === NbPosition.BOTTOM;\n    }\n\n    get bottomStart() {\n      return this.position === NbPosition.BOTTOM_START;\n    }\n\n    get bottomEnd() {\n      return this.position === NbPosition.BOTTOM_END;\n    }\n\n    get left() {\n      return this.position === NbPosition.LEFT || this.position === NbPosition.START;\n    }\n\n    get startTop() {\n      return this.position === NbPosition.START_TOP;\n    }\n\n    get startBottom() {\n      return this.position === NbPosition.START_BOTTOM;\n    }\n\n  }\n\n  NbPositionedContainerComponent.ɵfac = function NbPositionedContainerComponent_Factory(t) {\n    return new (t || NbPositionedContainerComponent)();\n  };\n\n  NbPositionedContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbPositionedContainerComponent,\n    selectors: [[\"ng-component\"]],\n    hostVars: 24,\n    hostBindings: function NbPositionedContainerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"nb-overlay-top\", ctx.top)(\"nb-overlay-top-start\", ctx.topStart)(\"nb-overlay-top-end\", ctx.topEnd)(\"nb-overlay-right\", ctx.right)(\"nb-overlay-end-top\", ctx.endTop)(\"nb-overlay-end-bottom\", ctx.endBottom)(\"nb-overlay-bottom\", ctx.bottom)(\"nb-overlay-bottom-start\", ctx.bottomStart)(\"nb-overlay-bottom-end\", ctx.bottomEnd)(\"nb-overlay-left\", ctx.left)(\"nb-overlay-start-top\", ctx.startTop)(\"nb-overlay-start-bottom\", ctx.startBottom);\n      }\n    },\n    inputs: {\n      position: \"position\"\n    },\n    decls: 0,\n    vars: 0,\n    template: function NbPositionedContainerComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n  return NbPositionedContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbOverlayContainerComponent = /*#__PURE__*/(() => {\n  class NbOverlayContainerComponent {\n    constructor(vcr, injector, changeDetectorRef) {\n      this.vcr = vcr;\n      this.injector = injector;\n      this.changeDetectorRef = changeDetectorRef;\n      this.isAttached = false;\n    }\n\n    get isStringContent() {\n      return !!this.content;\n    }\n\n    attachComponentPortal(portal, context) {\n      portal.injector = this.createChildInjector(portal.componentFactoryResolver);\n      const componentRef = this.portalOutlet.attachComponentPortal(portal);\n\n      if (context) {\n        Object.assign(componentRef.instance, context);\n      }\n\n      componentRef.changeDetectorRef.markForCheck();\n      componentRef.changeDetectorRef.detectChanges();\n      this.isAttached = true;\n      return componentRef;\n    }\n\n    attachTemplatePortal(portal) {\n      const templateRef = this.portalOutlet.attachTemplatePortal(portal);\n      templateRef.detectChanges();\n      this.isAttached = true;\n      return templateRef;\n    }\n\n    attachStringContent(content) {\n      this.content = content;\n      this.changeDetectorRef.markForCheck();\n      this.changeDetectorRef.detectChanges();\n      this.isAttached = true;\n    }\n\n    detach() {\n      if (this.portalOutlet.hasAttached()) {\n        this.portalOutlet.detach();\n      }\n\n      this.attachStringContent(null);\n      this.isAttached = false;\n    }\n\n    createChildInjector(cfr) {\n      return new NbPortalInjector(this.injector, new WeakMap([[ComponentFactoryResolver, cfr]]));\n    }\n\n  }\n\n  NbOverlayContainerComponent.ɵfac = function NbOverlayContainerComponent_Factory(t) {\n    return new (t || NbOverlayContainerComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Injector), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbOverlayContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbOverlayContainerComponent,\n    selectors: [[\"nb-overlay-container\"]],\n    viewQuery: function NbOverlayContainerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalOutletDirective, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);\n      }\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[\"class\", \"primitive-overlay\", 4, \"ngIf\"], [\"nbPortalOutlet\", \"\"], [1, \"primitive-overlay\"]],\n    template: function NbOverlayContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbOverlayContainerComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbOverlayContainerComponent_ng_template_1_Template, 0, 0, \"ng-template\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isStringContent);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbPortalOutletDirective],\n    encapsulation: 2\n  });\n  return NbOverlayContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nfunction patch(container, containerContext) {\n  Object.assign(container.instance, containerContext);\n  container.changeDetectorRef.detectChanges();\n  return container;\n}\n\nfunction createContainer(ref, container, context, componentFactoryResolver) {\n  const containerRef = ref.attach(new NbComponentPortal(container, null, null, componentFactoryResolver));\n  patch(containerRef, context);\n  return containerRef;\n}\n\nlet NbOverlayService = /*#__PURE__*/(() => {\n  class NbOverlayService {\n    constructor(overlay, layoutDirection) {\n      this.overlay = overlay;\n      this.layoutDirection = layoutDirection;\n    }\n\n    get scrollStrategies() {\n      return this.overlay.scrollStrategies;\n    }\n\n    create(config) {\n      const overlayRef = this.overlay.create(config);\n      this.layoutDirection.onDirectionChange().subscribe(dir => overlayRef.setDirection(dir));\n      return overlayRef;\n    }\n\n  }\n\n  NbOverlayService.ɵfac = function NbOverlayService_Factory(t) {\n    return new (t || NbOverlayService)(ɵngcc0.ɵɵinject(NbOverlay), ɵngcc0.ɵɵinject(NbLayoutDirectionService));\n  };\n\n  NbOverlayService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbOverlayService,\n    factory: NbOverlayService.ɵfac\n  });\n  return NbOverlayService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbScrollDispatcherAdapter = /*#__PURE__*/(() => {\n  class NbScrollDispatcherAdapter extends ScrollDispatcher {\n    constructor(ngZone, platform, scrollService, document) {\n      super(ngZone, platform, document);\n      this.scrollService = scrollService;\n    }\n\n    scrolled(auditTimeInMs) {\n      return merge(super.scrolled(auditTimeInMs), this.scrollService.onScroll());\n    }\n\n  }\n\n  NbScrollDispatcherAdapter.ɵfac = function NbScrollDispatcherAdapter_Factory(t) {\n    return new (t || NbScrollDispatcherAdapter)(ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbPlatform), ɵngcc0.ɵɵinject(NbLayoutScrollService), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbScrollDispatcherAdapter.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbScrollDispatcherAdapter,\n    factory: NbScrollDispatcherAdapter.ɵfac\n  });\n  return NbScrollDispatcherAdapter;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Overrides default block scroll strategy because default strategy blocks scrolling on the body only.\n * But Nebular has its own scrollable container - nb-layout. So, we need to block scrolling in it to.\n * */\n\n\nlet NbBlockScrollStrategyAdapter = /*#__PURE__*/(() => {\n  class NbBlockScrollStrategyAdapter extends BlockScrollStrategy {\n    constructor(document, viewportRuler, scrollService) {\n      super(viewportRuler, document);\n      this.scrollService = scrollService;\n    }\n\n    enable() {\n      super.enable();\n      this.scrollService.scrollable(false);\n    }\n\n    disable() {\n      super.disable();\n      this.scrollService.scrollable(true);\n    }\n\n  }\n\n  NbBlockScrollStrategyAdapter.ɵfac = function NbBlockScrollStrategyAdapter_Factory(t) {\n    return new (t || NbBlockScrollStrategyAdapter)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(NbLayoutScrollService));\n  };\n\n  NbBlockScrollStrategyAdapter.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbBlockScrollStrategyAdapter,\n    factory: NbBlockScrollStrategyAdapter.ɵfac\n  });\n  return NbBlockScrollStrategyAdapter;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbScrollStrategyOptions = /*#__PURE__*/(() => {\n  class NbScrollStrategyOptions extends ScrollStrategyOptions {\n    constructor(scrollService, scrollDispatcher, viewportRuler, ngZone, document) {\n      super(scrollDispatcher, viewportRuler, ngZone, document);\n      this.scrollService = scrollService;\n      this.scrollDispatcher = scrollDispatcher;\n      this.viewportRuler = viewportRuler;\n      this.ngZone = ngZone;\n      this.document = document;\n\n      this.block = () => new NbBlockScrollStrategyAdapter(this.document, this.viewportRuler, this.scrollService);\n    }\n\n  }\n\n  NbScrollStrategyOptions.ɵfac = function NbScrollStrategyOptions_Factory(t) {\n    return new (t || NbScrollStrategyOptions)(ɵngcc0.ɵɵinject(NbLayoutScrollService), ɵngcc0.ɵɵinject(ɵngcc3.ScrollDispatcher), ɵngcc0.ɵɵinject(NbViewportRulerAdapter), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbScrollStrategyOptions.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbScrollStrategyOptions,\n    factory: NbScrollStrategyOptions.ɵfac\n  });\n  return NbScrollStrategyOptions;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbCdkAdapterModule = /*#__PURE__*/(() => {\n  class NbCdkAdapterModule {\n    static forRoot() {\n      return {\n        ngModule: NbCdkAdapterModule,\n        providers: [NbViewportRulerAdapter, NbOverlayContainerAdapter, NbBlockScrollStrategyAdapter, NbScrollDispatcherAdapter, NbScrollStrategyOptions, {\n          provide: OverlayContainer,\n          useExisting: NbOverlayContainerAdapter\n        }, {\n          provide: NbOverlayContainer,\n          useExisting: NbOverlayContainerAdapter\n        }, {\n          provide: ScrollDispatcher,\n          useExisting: NbScrollDispatcherAdapter\n        }, {\n          provide: ScrollStrategyOptions,\n          useExisting: NbScrollStrategyOptions\n        }]\n      };\n    }\n\n  }\n\n  NbCdkAdapterModule.ɵfac = function NbCdkAdapterModule_Factory(t) {\n    return new (t || NbCdkAdapterModule)();\n  };\n\n  NbCdkAdapterModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCdkAdapterModule\n  });\n  NbCdkAdapterModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return NbCdkAdapterModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nvar NbTrigger = /*#__PURE__*/(() => {\n  (function (NbTrigger) {\n    NbTrigger[\"NOOP\"] = \"noop\";\n    NbTrigger[\"CLICK\"] = \"click\";\n    NbTrigger[\"HOVER\"] = \"hover\";\n    NbTrigger[\"HINT\"] = \"hint\";\n    NbTrigger[\"FOCUS\"] = \"focus\";\n  })(NbTrigger || (NbTrigger = {}));\n\n  return NbTrigger;\n})();\n\n/**\n * TODO maybe we have to use renderer.listen instead of observableFromEvent?\n * Renderer provides capability use it in service worker, ssr and so on.\n * */\nclass NbTriggerStrategyBase {\n  constructor(document, host, container) {\n    this.document = document;\n    this.host = host;\n    this.container = container;\n    this.destroyed$ = new Subject();\n  }\n\n  destroy() {\n    this.destroyed$.next();\n  }\n\n  isNotOnHostOrContainer(event) {\n    return !this.isOnHost(event) && !this.isOnContainer(event);\n  }\n\n  isOnHostOrContainer(event) {\n    return this.isOnHost(event) || this.isOnContainer(event);\n  }\n\n  isOnHost({\n    target\n  }) {\n    return this.host.contains(target);\n  }\n\n  isOnContainer({\n    target\n  }) {\n    return this.container() && this.container().location.nativeElement.contains(target);\n  }\n\n}\n/**\n * Creates show and hide event streams.\n * Fires toggle event when the click was performed on the host element.\n * Fires close event when the click was performed on the document but\n * not on the host or container.\n * */\n\n\nclass NbClickTriggerStrategy extends NbTriggerStrategyBase {\n  constructor() {\n    super(...arguments); // since we should track click for both SHOW and HIDE event we firstly need to track the click and the state\n    // of the container and then later on decide should we hide it or show\n    // if we track the click & state separately this will case a behavior when the container is getting shown\n    // and then hidden right away\n\n    this.click$ = fromEvent(this.document, 'click').pipe(map(event => [!this.container() && this.isOnHost(event), event]), share(), takeUntil(this.destroyed$));\n    this.show$ = this.click$.pipe(filter(([shouldShow]) => shouldShow), map(([, event]) => event), takeUntil(this.destroyed$));\n    this.hide$ = this.click$.pipe(filter(([shouldShow, event]) => !shouldShow && !this.isOnContainer(event)), map(([, event]) => event), takeUntil(this.destroyed$));\n  }\n\n}\n/**\n * Creates show and hide event streams.\n * Fires open event when a mouse hovers over the host element and stay over at least 100 milliseconds.\n * Fires close event when the mouse leaves the host element and stops out of the host and popover container.\n * */\n\n\nclass NbHoverTriggerStrategy extends NbTriggerStrategyBase {\n  constructor() {\n    super(...arguments);\n    this.show$ = fromEvent(this.host, 'mouseenter').pipe(filter(() => !this.container()), // this `delay & takeUntil & repeat` operators combination is a synonym for `conditional debounce`\n    // meaning that if one event occurs in some time after the initial one we won't react to it\n    delay(100), // tslint:disable-next-line:rxjs-no-unsafe-takeuntil\n    takeUntil(fromEvent(this.host, 'mouseleave')), repeat(), takeUntil(this.destroyed$));\n    this.hide$ = fromEvent(this.host, 'mouseleave').pipe(switchMap(() => fromEvent(this.document, 'mousemove').pipe(debounceTime(100), takeWhile(() => !!this.container()), filter(event => this.isNotOnHostOrContainer(event)))), takeUntil(this.destroyed$));\n  }\n\n}\n/**\n * Creates show and hide event streams.\n * Fires open event when a mouse hovers over the host element and stay over at least 100 milliseconds.\n * Fires close event when the mouse leaves the host element.\n * */\n\n\nclass NbHintTriggerStrategy extends NbTriggerStrategyBase {\n  constructor() {\n    super(...arguments);\n    this.show$ = fromEvent(this.host, 'mouseenter').pipe( // this `delay & takeUntil & repeat` operators combination is a synonym for `conditional debounce`\n    // meaning that if one event occurs in some time after the initial one we won't react to it\n    delay(100), // tslint:disable-next-line:rxjs-no-unsafe-takeuntil\n    takeUntil(fromEvent(this.host, 'mouseleave')), repeat(), takeUntil(this.destroyed$));\n    this.hide$ = fromEvent(this.host, 'mouseleave').pipe(takeUntil(this.destroyed$));\n  }\n\n}\n/**\n * Creates show and hide event streams.\n * Fires open event when a focus is on the host element and stay over at least 100 milliseconds.\n * Fires close event when the focus leaves the host element.\n * */\n\n\nclass NbFocusTriggerStrategy extends NbTriggerStrategyBase {\n  constructor() {\n    super(...arguments);\n    this.focusOut$ = fromEvent(this.host, 'focusout').pipe(switchMap(() => fromEvent(this.document, 'focusin').pipe(takeWhile(() => !!this.container()), filter(event => this.isNotOnHostOrContainer(event)))), takeUntil(this.destroyed$));\n    this.clickIn$ = fromEvent(this.host, 'click').pipe(filter(() => !this.container()), takeUntil(this.destroyed$));\n    this.clickOut$ = fromEvent(this.document, 'click').pipe(filter(() => !!this.container()), filter(event => this.isNotOnHostOrContainer(event)), takeUntil(this.destroyed$));\n    this.tabKeyPress$ = fromEvent(this.document, 'keydown').pipe(filter(event => event.keyCode === 9), filter(() => !!this.container()), takeUntil(this.destroyed$));\n    this.show$ = merge(fromEvent(this.host, 'focusin'), this.clickIn$).pipe(filter(() => !this.container()), debounceTime(100), // tslint:disable-next-line:rxjs-no-unsafe-takeuntil\n    takeUntil(fromEvent(this.host, 'focusout')), repeat(), takeUntil(this.destroyed$));\n    this.hide$ = merge(this.focusOut$, this.tabKeyPress$, this.clickOut$).pipe(takeUntil(this.destroyed$));\n  }\n\n}\n/**\n * Creates empty show and hide event streams.\n * */\n\n\nclass NbNoopTriggerStrategy extends NbTriggerStrategyBase {\n  constructor() {\n    super(...arguments);\n    this.show$ = EMPTY;\n    this.hide$ = EMPTY;\n  }\n\n}\n\nlet NbTriggerStrategyBuilderService = /*#__PURE__*/(() => {\n  class NbTriggerStrategyBuilderService {\n    constructor(_document) {\n      this._document = _document;\n    }\n\n    trigger(trigger$$1) {\n      this._trigger = trigger$$1;\n      return this;\n    }\n\n    host(host) {\n      this._host = host;\n      return this;\n    }\n\n    container(container) {\n      this._container = container;\n      return this;\n    }\n\n    build() {\n      switch (this._trigger) {\n        case NbTrigger.CLICK:\n          return new NbClickTriggerStrategy(this._document, this._host, this._container);\n\n        case NbTrigger.HINT:\n          return new NbHintTriggerStrategy(this._document, this._host, this._container);\n\n        case NbTrigger.HOVER:\n          return new NbHoverTriggerStrategy(this._document, this._host, this._container);\n\n        case NbTrigger.FOCUS:\n          return new NbFocusTriggerStrategy(this._document, this._host, this._container);\n\n        case NbTrigger.NOOP:\n          return new NbNoopTriggerStrategy(this._document, this._host, this._container);\n\n        default:\n          throw new Error('Trigger have to be provided');\n      }\n    }\n\n  }\n\n  NbTriggerStrategyBuilderService.ɵfac = function NbTriggerStrategyBuilderService_Factory(t) {\n    return new (t || NbTriggerStrategyBuilderService)(ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbTriggerStrategyBuilderService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTriggerStrategyBuilderService,\n    factory: NbTriggerStrategyBuilderService.ɵfac\n  });\n  return NbTriggerStrategyBuilderService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbOverlayModule = /*#__PURE__*/(() => {\n  class NbOverlayModule {\n    static forRoot() {\n      return {\n        ngModule: NbOverlayModule,\n        providers: [NbPositionBuilderService, NbTriggerStrategyBuilderService, NbOverlayService, NbPositionHelper, ...NbCdkMappingModule.forRoot().providers, ...NbCdkAdapterModule.forRoot().providers, ...NbA11yModule.forRoot().providers]\n      };\n    }\n\n  }\n\n  NbOverlayModule.ɵfac = function NbOverlayModule_Factory(t) {\n    return new (t || NbOverlayModule)();\n  };\n\n  NbOverlayModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbOverlayModule\n  });\n  NbOverlayModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbCdkMappingModule, NbSharedModule], NbCdkMappingModule, NbCdkAdapterModule]\n  });\n  return NbOverlayModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbOverlayModule, {\n    declarations: [NbPositionedContainerComponent, NbOverlayContainerComponent],\n    imports: [NbCdkMappingModule, NbSharedModule],\n    exports: [NbCdkMappingModule, NbCdkAdapterModule, NbOverlayContainerComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbStatusService = /*#__PURE__*/(() => {\n  class NbStatusService {\n    constructor() {\n      this.coreStatuses = ['basic', 'primary', 'info', 'warning', 'danger', 'control'];\n    }\n\n    isCoreStatus(status) {\n      return this.coreStatuses.includes(status);\n    }\n\n    isCustomStatus(status) {\n      if (this.isValidStatusString(status)) {\n        return !this.isCoreStatus(status);\n      }\n\n      return false;\n    }\n\n    getStatusClass(status) {\n      if (this.isValidStatusString(status)) {\n        return `status-${status}`;\n      }\n\n      return undefined;\n    }\n\n    isValidStatusString(status) {\n      return typeof status === 'string' && status.length > 0;\n    }\n\n  }\n\n  NbStatusService.ɵfac = function NbStatusService_Factory(t) {\n    return new (t || NbStatusService)();\n  };\n\n  NbStatusService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbStatusService,\n    factory: NbStatusService.ɵfac\n  });\n  return NbStatusService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nfunction windowFactory(platformId) {\n  if (isPlatformBrowser(platformId)) {\n    return window;\n  } // Provide undefined to get the error when trying to access the window as it\n  // shouldn't be used outside the browser. Those who need to provide something\n  // instead of window (e.g. domino window when running in node) could override\n  // NB_WINDOW token.\n\n\n  return undefined;\n}\n\nlet NbThemeModule = /*#__PURE__*/(() => {\n  class NbThemeModule {\n    // TODO: check the options (throw exception?)\n\n    /**\n     * Main Theme Module\n     *\n     * @param nbThemeOptions {NbThemeOptions} Main theme options\n     * @param nbJSThemes {NbJSThemeOptions[]} List of JS Themes, will be merged with default themes\n     * @param nbMediaBreakpoints {NbMediaBreakpoint} Available media breakpoints\n     * @param layoutDirection {NbLayoutDirection} Layout direction\n     *\n     * @returns {ModuleWithProviders}\n     */\n    static forRoot(nbThemeOptions = {\n      name: 'default'\n    }, nbJSThemes, nbMediaBreakpoints, layoutDirection) {\n      return {\n        ngModule: NbThemeModule,\n        providers: [{\n          provide: NB_THEME_OPTIONS,\n          useValue: nbThemeOptions || {}\n        }, {\n          provide: NB_BUILT_IN_JS_THEMES,\n          useValue: BUILT_IN_THEMES\n        }, {\n          provide: NB_JS_THEMES,\n          useValue: nbJSThemes || []\n        }, {\n          provide: NB_MEDIA_BREAKPOINTS,\n          useValue: nbMediaBreakpoints || DEFAULT_MEDIA_BREAKPOINTS\n        }, {\n          provide: NB_DOCUMENT,\n          useExisting: DOCUMENT\n        }, {\n          provide: NB_WINDOW,\n          useFactory: windowFactory,\n          deps: [PLATFORM_ID]\n        }, NbJSThemesRegistry, NbThemeService, NbMediaBreakpointsService, NbSpinnerService, {\n          provide: NB_LAYOUT_DIRECTION,\n          useValue: layoutDirection || NbLayoutDirection.LTR\n        }, NbLayoutDirectionService, NbLayoutScrollService, NbLayoutRulerService, ...NbOverlayModule.forRoot().providers, NbStatusService]\n      };\n    }\n\n  }\n\n  NbThemeModule.ɵfac = function NbThemeModule_Factory(t) {\n    return new (t || NbThemeModule)();\n  };\n\n  NbThemeModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbThemeModule\n  });\n  NbThemeModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return NbThemeModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbThemeModule, {\n    imports: function () {\n      return [CommonModule];\n    }\n  });\n})();\n\nclass NbColorHelper {\n  static shade(color, weight) {\n    return NbColorHelper.mix('#000000', color, weight);\n  }\n\n  static tint(color, weight) {\n    return NbColorHelper.mix('#ffffff', color, weight);\n  }\n\n  static mix(color1, color2, weight) {\n    const d2h = d => d.toString(16);\n\n    const h2d = h => parseInt(h, 16);\n\n    let result = '#';\n\n    for (let i = 1; i < 7; i += 2) {\n      const firstPart = h2d(color1.substr(i, 2));\n      const secondPart = h2d(color2.substr(i, 2));\n      const resultPart = d2h(Math.floor(secondPart + (firstPart - secondPart) * (weight / 100.0)));\n      result += ('0' + resultPart).slice(-2);\n    }\n\n    return result;\n  }\n\n  static hexToRgbA(hex, alpha) {\n    let c;\n\n    if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {\n      c = hex.substring(1).split('');\n\n      if (c.length === 3) {\n        c = [c[0], c[0], c[1], c[1], c[2], c[2]];\n      }\n\n      c = '0x' + c.join('');\n      return 'rgba(' + [c >> 16 & 255, c >> 8 & 255, c & 255].join(',') + ',' + alpha + ')';\n    }\n\n    throw new Error('Bad Hex');\n  }\n\n}\n\nvar NbIconPackType = /*#__PURE__*/(() => {\n  (function (NbIconPackType) {\n    NbIconPackType[\"SVG\"] = \"svg\";\n    NbIconPackType[\"FONT\"] = \"font\";\n  })(NbIconPackType || (NbIconPackType = {}));\n\n  return NbIconPackType;\n})();\n\nclass NbFontIcon {\n  constructor(name, content, params = {}) {\n    this.name = name;\n    this.content = content;\n    this.params = params;\n  }\n\n  getClasses(options) {\n    const classes = [];\n\n    if (this.params.packClass) {\n      classes.push(this.params.packClass);\n    }\n\n    const name = this.params.iconClassPrefix ? `${this.params.iconClassPrefix}-${this.name}` : this.name;\n    classes.push(name);\n    return classes;\n  }\n\n  getContent(options) {\n    return this.content;\n  }\n\n}\n\nclass NbSvgIcon {\n  constructor(name, content, params = {}) {\n    this.name = name;\n    this.content = content;\n    this.params = params;\n  }\n\n  getClasses(options) {\n    const classes = [];\n\n    if (this.params.packClass) {\n      classes.push(this.params.packClass);\n    }\n\n    return classes;\n  }\n\n  getContent(options) {\n    return this.content;\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbIconDefinition {}\n\nfunction throwPackNotFoundError(name) {\n  throw Error(`Icon Pack '${name}' is not registered`);\n}\n\nfunction throwNoDefaultPackError() {\n  throw Error('Default pack is not registered.');\n}\n\nfunction throwWrongPackTypeError(name, type, desiredType) {\n  throw Error(`Pack '${name}' is not an '${desiredType}' Pack and its type is '${type}'`);\n}\n/**\n * This service allows to register multiple icon packs to use them later within `<nb-icon></nb-icon>` component.\n */\n\n\nlet NbIconLibraries = /*#__PURE__*/(() => {\n  class NbIconLibraries {\n    constructor() {\n      this.packs = new Map();\n    }\n    /**\n     * Registers new Svg icon pack\n     * @param {string} name\n     * @param {NbIcon} icons\n     * @param {NbIconPackParams} params\n     */\n\n\n    registerSvgPack(name, icons, params = {}) {\n      this.packs.set(name, {\n        name,\n        icons: new Map(Object.entries(icons)),\n        params,\n        type: NbIconPackType.SVG\n      });\n    }\n    /**\n     * Registers new font pack\n     * @param {string} name\n     * @param {NbIconPackParams} params\n     */\n\n\n    registerFontPack(name, params = {}) {\n      this.packs.set(name, {\n        name,\n        params,\n        icons: new Map(),\n        type: NbIconPackType.FONT\n      });\n    }\n    /**\n     * Returns pack by name\n     * @param {string} name\n     */\n\n\n    getPack(name) {\n      return this.packs.get(name);\n    }\n    /**\n     * Sets pack as a default\n     * @param {string} name\n     */\n\n\n    setDefaultPack(name) {\n      if (!this.packs.has(name)) {\n        throwPackNotFoundError(name);\n      }\n\n      this.defaultPack = this.packs.get(name);\n    }\n    /**\n     * Returns Svg icon\n     * @param {string} name\n     * @param {string} pack\n     *\n     * @returns NbIconDefinition\n     */\n\n\n    getSvgIcon(name, pack) {\n      const iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();\n\n      if (iconsPack.type !== NbIconPackType.SVG) {\n        throwWrongPackTypeError(iconsPack.name, iconsPack.type, 'SVG');\n      }\n\n      const icon = this.getIconFromPack(name, iconsPack);\n\n      if (!icon) {\n        return null;\n      }\n\n      return {\n        name,\n        pack: iconsPack.name,\n        type: NbIconPackType.SVG,\n        icon: this.createSvgIcon(name, icon, iconsPack.params)\n      };\n    }\n    /**\n     * Returns Font icon\n     * @param {string} name\n     * @param {string} pack\n     *\n     * @returns NbIconDefinition\n     */\n\n\n    getFontIcon(name, pack) {\n      const iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();\n\n      if (iconsPack.type !== NbIconPackType.FONT) {\n        throwWrongPackTypeError(iconsPack.name, iconsPack.type, 'Font');\n      }\n\n      const icon = this.getIconFromPack(name, iconsPack);\n      return {\n        name,\n        pack: iconsPack.name,\n        type: NbIconPackType.FONT,\n        icon: this.createFontIcon(name, icon ? icon : '', iconsPack.params)\n      };\n    }\n    /**\n     * Returns an icon\n     * @param {string} name\n     * @param {string} pack\n     *\n     * @returns NbIconDefinition\n     */\n\n\n    getIcon(name, pack) {\n      const iconsPack = pack ? this.getPackOrThrow(pack) : this.getDefaultPackOrThrow();\n\n      if (iconsPack.type === NbIconPackType.SVG) {\n        return this.getSvgIcon(name, pack);\n      }\n\n      return this.getFontIcon(name, pack);\n    }\n\n    createSvgIcon(name, content, params) {\n      return content instanceof NbSvgIcon ? content : new NbSvgIcon(name, content, params);\n    }\n\n    createFontIcon(name, content, params) {\n      return content instanceof NbFontIcon ? content : new NbFontIcon(name, content, params);\n    }\n\n    getPackOrThrow(name) {\n      const pack = this.packs.get(name);\n\n      if (!pack) {\n        throwPackNotFoundError(name);\n      }\n\n      return pack;\n    }\n\n    getDefaultPackOrThrow() {\n      if (!this.defaultPack) {\n        throwNoDefaultPackError();\n      }\n\n      return this.defaultPack;\n    }\n\n    getIconFromPack(name, pack) {\n      if (pack.icons.has(name)) {\n        return pack.icons.get(name);\n      }\n\n      return null;\n    }\n\n  }\n\n  NbIconLibraries.ɵfac = function NbIconLibraries_Factory(t) {\n    return new (t || NbIconLibraries)();\n  };\n\n  NbIconLibraries.ɵprov = ɵɵdefineInjectable({\n    factory: function NbIconLibraries_Factory() {\n      return new NbIconLibraries();\n    },\n    token: NbIconLibraries,\n    providedIn: \"root\"\n  });\n  return NbIconLibraries;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Icon component. Allows to render both `svg` and `font` icons.\n * Starting from Nebular 4.0 uses [Eva Icons](https://akveo.github.io/eva-icons/) pack by default.\n *\n * Basic icon example:\n * @stacked-example(Showcase, icon/icon-showcase.component)\n *\n * Icon configuration:\n *\n * ```html\n * <nb-icon icon=\"star\"></nb-icon>\n * ```\n * ### Installation\n *\n * By default Nebular comes without any pre-installed icon pack.\n * Starting with Nebular 4.0.0 we ship separate package called `@nebular/eva-icons`\n * which integrates SVG [Eva Icons](https://akveo.github.io/eva-icons/) pack to Nebular. To add it to your\n * project run:\n * ```sh\n * npm i eva-icons @nebular/eva-icons\n * ```\n * This command will install Eva Icons pack. Then register `NbEvaIconsModule` into your app module:\n * ```ts\n * import { NbEvaIconsModule } from '@nebular/eva-icons';\n *\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbEvaIconsModule,\n *   ],\n * })\n * export class AppModule { }\n * ```\n * Last thing, import `NbIconModule` to your feature module where you need to show an icon:\n * ```ts\n * import { NbIconModule } from '@nebular/theme';\n *\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbIconModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Icon can be colored using `status` input:\n * ```html\n * <nb-icon icon=\"star\" status=\"warning\"></nb-icon>\n * ```\n *\n * Colored icons:\n * @stacked-example(Colored Icons, icon/icon-colors.component)\n *\n * In case you need to specify an icon from a specific icon pack, this could be done using `pack` input property:\n * ```html\n * <nb-icon icon=\"star\" pack=\"font-awesome\"></nb-icon>\n * ```\n * Additional icon settings (if available by the icon pack) could be passed using `options` input:\n *\n * ```html\n * <nb-icon icon=\"star\" [options]=\"{ animation: { type: 'zoom' } }\"></nb-icon>\n * ```\n *\n * @styles\n *\n * icon-font-size:\n * icon-line-height:\n * icon-width:\n * icon-height:\n * icon-svg-vertical-align:\n * icon-basic-color:\n * icon-primary-color:\n * icon-info-color:\n * icon-success-color:\n * icon-warning-color:\n * icon-danger-color:\n * icon-control-color:\n */\n\n\nlet NbIconComponent = /*#__PURE__*/(() => {\n  class NbIconComponent {\n    constructor(sanitizer, iconLibrary, el, renderer, statusService) {\n      this.sanitizer = sanitizer;\n      this.iconLibrary = iconLibrary;\n      this.el = el;\n      this.renderer = renderer;\n      this.statusService = statusService;\n      this.prevClasses = [];\n      this.html = '';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n    /**\n     * Sets all icon configurable properties via config object.\n     * If passed value is a string set icon name.\n     * @docs-private\n     */\n\n\n    get config() {\n      return this._config;\n    }\n\n    set config(value) {\n      if (!value) {\n        return;\n      }\n\n      this._config = value;\n\n      if (typeof value === 'string') {\n        this.icon = value;\n      } else {\n        this.icon = value.icon;\n        this.pack = value.pack;\n        this.status = value.status;\n        this.options = value.options;\n      }\n    }\n\n    ngOnInit() {\n      this.iconDef = this.renderIcon(this.icon, this.pack, this.options);\n    }\n\n    ngOnChanges() {\n      const iconDef = this.iconLibrary.getIcon(this.icon, this.pack);\n\n      if (iconDef) {\n        this.renderIcon(this.icon, this.pack, this.options);\n      } else {\n        this.clearIcon();\n      }\n    }\n\n    renderIcon(name, pack, options) {\n      const iconDefinition = this.iconLibrary.getIcon(name, pack);\n\n      if (!iconDefinition) {\n        return;\n      }\n\n      const content = iconDefinition.icon.getContent(options);\n\n      if (content) {\n        this.html = this.sanitizer.bypassSecurityTrustHtml(content);\n      }\n\n      this.assignClasses(iconDefinition.icon.getClasses(options));\n      return iconDefinition;\n    }\n\n    clearIcon() {\n      this.html = '';\n      this.assignClasses([]);\n    }\n\n    assignClasses(classes) {\n      this.prevClasses.forEach(className => {\n        this.renderer.removeClass(this.el.nativeElement, className);\n      });\n      classes.forEach(className => {\n        this.renderer.addClass(this.el.nativeElement, className);\n      });\n      this.prevClasses = classes;\n    }\n\n  }\n\n  NbIconComponent.ɵfac = function NbIconComponent_Factory(t) {\n    return new (t || NbIconComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(NbIconLibraries), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbIconComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbIconComponent,\n    selectors: [[\"nb-icon\"]],\n    hostVars: 17,\n    hostBindings: function NbIconComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵhostProperty(\"innerHtml\", ctx.html, ɵngcc0.ɵɵsanitizeHtml);\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      config: \"config\",\n      icon: \"icon\",\n      pack: \"pack\",\n      status: \"status\",\n      options: \"options\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbIconComponent_Template(rf, ctx) {},\n    styles: [\"[_nghost-%COMP%]{display:inline-block}\"],\n    changeDetection: 0\n  });\n  return NbIconComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbIconModule = /*#__PURE__*/(() => {\n  class NbIconModule {\n    constructor(iconsLibrary) {\n      this.iconsLibrary = iconsLibrary;\n      this.essentialsPackName = 'nebular-essentials'; // in case of consequent calls we don't need to enable `nebular-essentials` pack again\n\n      if (this.iconsLibrary.getPack(this.essentialsPackName)) {\n        return;\n      } // tslint:disable:max-line-length\n\n\n      this.iconsLibrary.registerSvgPack(this.essentialsPackName, {\n        'chevron-down-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"chevron-down\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M12 15.5a1 1 0 0 1-.71-.29l-4-4a1 1 0 1 1 1.42-1.42L12 13.1l3.3-3.18a1 1 0 1 1 1.38 1.44l-4 3.86a1 1 0 0 1-.68.28z\"/></g></g></svg>',\n        'chevron-up-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"chevron-up\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M16 14.5a1 1 0 0 1-.71-.29L12 10.9l-3.3 3.18a1 1 0 0 1-1.41 0 1 1 0 0 1 0-1.42l4-3.86a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1 0 1.42 1 1 0 0 1-.69.28z\"/></g></g></svg>',\n        'chevron-left-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"chevron-left\"><rect width=\"24\" height=\"24\" transform=\"rotate(90 12 12)\" opacity=\"0\"/><path d=\"M13.36 17a1 1 0 0 1-.72-.31l-3.86-4a1 1 0 0 1 0-1.4l4-4a1 1 0 1 1 1.42 1.42L10.9 12l3.18 3.3a1 1 0 0 1 0 1.41 1 1 0 0 1-.72.29z\"/></g></g></svg>',\n        'chevron-right-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"chevron-right\"><rect width=\"24\" height=\"24\" transform=\"rotate(-90 12 12)\" opacity=\"0\"/><path d=\"M10.5 17a1 1 0 0 1-.71-.29 1 1 0 0 1 0-1.42L13.1 12 9.92 8.69a1 1 0 0 1 0-1.41 1 1 0 0 1 1.42 0l3.86 4a1 1 0 0 1 0 1.4l-4 4a1 1 0 0 1-.7.32z\"/></g></g></svg>',\n        'checkmark-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"checkmark\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M9.86 18a1 1 0 0 1-.73-.32l-4.86-5.17a1 1 0 1 1 1.46-1.37l4.12 4.39 8.41-9.2a1 1 0 1 1 1.48 1.34l-9.14 10a1 1 0 0 1-.73.33z\"/></g></g></svg>',\n        'paper-plane-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"paper-plane\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M21 4a1.31 1.31 0 0 0-.06-.27v-.09a1 1 0 0 0-.2-.3 1 1 0 0 0-.29-.19h-.09a.86.86 0 0 0-.31-.15H20a1 1 0 0 0-.3 0l-18 6a1 1 0 0 0 0 1.9l8.53 2.84 2.84 8.53a1 1 0 0 0 1.9 0l6-18A1 1 0 0 0 21 4zm-4.7 2.29l-5.57 5.57L5.16 10zM14 18.84l-1.86-5.57 5.57-5.57z\"/></g></g></svg>',\n        'file-text-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"file-text\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M15 16H9a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2z\"/><path d=\"M9 14h3a1 1 0 0 0 0-2H9a1 1 0 0 0 0 2z\"/><path d=\"M19.74 8.33l-5.44-6a1 1 0 0 0-.74-.33h-7A2.53 2.53 0 0 0 4 4.5v15A2.53 2.53 0 0 0 6.56 22h10.88A2.53 2.53 0 0 0 20 19.5V9a1 1 0 0 0-.26-.67zM14 5l2.74 3h-2a.79.79 0 0 1-.74-.85zm3.44 15H6.56a.53.53 0 0 1-.56-.5v-15a.53.53 0 0 1 .56-.5H12v3.15A2.79 2.79 0 0 0 14.71 10H18v9.5a.53.53 0 0 1-.56.5z\"/></g></g></svg>',\n        'alert-triangle-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"alert-triangle\"><rect width=\"24\" height=\"24\" transform=\"rotate(90 12 12)\" opacity=\"0\"/><path d=\"M22.56 16.3L14.89 3.58a3.43 3.43 0 0 0-5.78 0L1.44 16.3a3 3 0 0 0-.05 3A3.37 3.37 0 0 0 4.33 21h15.34a3.37 3.37 0 0 0 2.94-1.66 3 3 0 0 0-.05-3.04zm-1.7 2.05a1.31 1.31 0 0 1-1.19.65H4.33a1.31 1.31 0 0 1-1.19-.65 1 1 0 0 1 0-1l7.68-12.73a1.48 1.48 0 0 1 2.36 0l7.67 12.72a1 1 0 0 1 .01 1.01z\"/><circle cx=\"12\" cy=\"16\" r=\"1\"/><path d=\"M12 8a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0V9a1 1 0 0 0-1-1z\"/></g></g></svg>',\n        'question-mark-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"question-mark\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M17 9A5 5 0 0 0 7 9a1 1 0 0 0 2 0 3 3 0 1 1 3 3 1 1 0 0 0-1 1v2a1 1 0 0 0 2 0v-1.1A5 5 0 0 0 17 9z\"/><circle cx=\"12\" cy=\"19\" r=\"1\"/></g></g></svg>',\n        'email-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"email\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M19 4H5a3 3 0 0 0-3 3v10a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V7a3 3 0 0 0-3-3zm-.67 2L12 10.75 5.67 6zM19 18H5a1 1 0 0 1-1-1V7.25l7.4 5.55a1 1 0 0 0 .6.2 1 1 0 0 0 .6-.2L20 7.25V17a1 1 0 0 1-1 1z\"/></g></g></svg>',\n        'flash-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"flash\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M11.11 23a1 1 0 0 1-.34-.06 1 1 0 0 1-.65-1.05l.77-7.09H5a1 1 0 0 1-.83-1.56l7.89-11.8a1 1 0 0 1 1.17-.38 1 1 0 0 1 .65 1l-.77 7.14H19a1 1 0 0 1 .83 1.56l-7.89 11.8a1 1 0 0 1-.83.44zM6.87 12.8H12a1 1 0 0 1 .74.33 1 1 0 0 1 .25.78l-.45 4.15 4.59-6.86H12a1 1 0 0 1-1-1.11l.45-4.15z\"/></g></g></svg>',\n        'search-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"search\"><rect width=\"24\" height=\"24\" opacity=\"0\"/><path d=\"M20.71 19.29l-3.4-3.39A7.92 7.92 0 0 0 19 11a8 8 0 1 0-8 8 7.92 7.92 0 0 0 4.9-1.69l3.39 3.4a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42zM5 11a6 6 0 1 1 6 6 6 6 0 0 1-6-6z\"/></g></g></svg>',\n        'close-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"close\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z\"/></g></g></svg>',\n        'collapse-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"collapse\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M19 9h-2.58l3.29-3.29a1 1 0 1 0-1.42-1.42L15 7.57V5a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2z\"/><path d=\"M10 13H5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L9 16.42V19a1 1 0 0 0 1 1 1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1z\"/></g></g></svg>',\n        'expand-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"expand\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M20 5a1 1 0 0 0-1-1h-5a1 1 0 0 0 0 2h2.57l-3.28 3.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0L18 7.42V10a1 1 0 0 0 1 1 1 1 0 0 0 1-1z\"/><path d=\"M10.71 13.29a1 1 0 0 0-1.42 0L6 16.57V14a1 1 0 0 0-1-1 1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h5a1 1 0 0 0 0-2H7.42l3.29-3.29a1 1 0 0 0 0-1.42z\"/></g></g></svg>',\n        'minus-outline': '<svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"currentColor\" width=\"100%\" height=\"100%\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"minus\"><rect width=\"24\" height=\"24\" transform=\"rotate(180 12 12)\" opacity=\"0\"/><path d=\"M19 13H5a1 1 0 0 1 0-2h14a1 1 0 0 1 0 2z\"/></g></g></svg>',\n        'minus-bold-outline': '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" fill=\"currentColor\" viewBox=\"0 0 8 2\" width=\"100%\" height=\"100%\"><defs><rect id=\"nb-mbo\" y=\"3\" width=\"8\" height=\"2\" rx=\"1\"/></defs><use xlink:href=\"#nb-mbo\" transform=\"translate(0 -3)\" fill-rule=\"evenodd\"/></svg>',\n        'checkmark-bold-outline': '<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" fill=\"currentColor\" viewBox=\"0 0 8 7\" width=\"100%\" height=\"100%\"><defs><path id=\"nb-cbo\" d=\"M6.039 1.43a1.11 1.11 0 0 1 1.517-.228c.483.342.588.998.234 1.466L4.431 7.1a1 1 0 0 1-1.492.115L.317 4.677a1.023 1.023 0 0 1 .002-1.483 1.113 1.113 0 0 1 1.535.002l1.641 1.59L6.04 1.428z\"/></defs><use xlink:href=\"#nb-cbo\" transform=\"translate(0 -1)\" fill-rule=\"evenodd\"/></svg>',\n        'arrow-back': '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><g data-name=\"Layer 2\"><g data-name=\"arrow-back\"><rect width=\"24\" height=\"24\" transform=\"rotate(90 12 12)\" opacity=\"0\"/><path d=\"M19 11H7.14l3.63-4.36a1 1 0 1 0-1.54-1.28l-5 6a1.19 1.19 0 0 0-.09.15c0 .05 0 .08-.07.13A1 1 0 0 0 4 12a1 1 0 0 0 .07.36c0 .05 0 .08.07.13a1.19 1.19 0 0 0 .09.15l5 6A1 1 0 0 0 10 19a1 1 0 0 0 .64-.23 1 1 0 0 0 .13-1.41L7.14 13H19a1 1 0 0 0 0-2z\"/></g></g></svg>'\n      }); // tslint:enable:max-line-length\n    }\n\n  }\n\n  NbIconModule.ɵfac = function NbIconModule_Factory(t) {\n    return new (t || NbIconModule)(ɵngcc0.ɵɵinject(NbIconLibraries));\n  };\n\n  NbIconModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbIconModule\n  });\n  NbIconModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return NbIconModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbIconModule, {\n    declarations: function () {\n      return [NbIconComponent];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [NbIconComponent];\n    }\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Component intended to be used within the `<nb-card>` component.\n * It adds styles for a preset header section.\n *\n * @styles\n *\n * card-header-text-color:\n * card-header-text-font-family:\n * card-header-text-font-size:\n * card-header-text-font-weight:\n * card-header-text-line-height:\n * card-header-basic-background-color:\n * card-header-basic-text-color:\n * card-header-primary-background-color:\n * card-header-primary-text-color:\n * card-header-info-background-color:\n * card-header-info-text-color:\n * card-header-success-background-color:\n * card-header-success-text-color:\n * card-header-warning-background-color:\n * card-header-warning-text-color:\n * card-header-danger-background-color:\n * card-header-danger-text-color:\n * card-header-control-background-color:\n * card-header-control-text-color:\n */\n\n\nlet NbCardHeaderComponent = /*#__PURE__*/(() => {\n  class NbCardHeaderComponent {}\n\n  NbCardHeaderComponent.ɵfac = function NbCardHeaderComponent_Factory(t) {\n    return new (t || NbCardHeaderComponent)();\n  };\n\n  NbCardHeaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardHeaderComponent,\n    selectors: [[\"nb-card-header\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbCardHeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbCardHeaderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Component intended to be used within  the `<nb-card>` component.\n * Adds styles for a preset body section.\n */\n\n\nlet NbCardBodyComponent = /*#__PURE__*/(() => {\n  class NbCardBodyComponent {}\n\n  NbCardBodyComponent.ɵfac = function NbCardBodyComponent_Factory(t) {\n    return new (t || NbCardBodyComponent)();\n  };\n\n  NbCardBodyComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardBodyComponent,\n    selectors: [[\"nb-card-body\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbCardBodyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbCardBodyComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Component intended to be used within  the `<nb-card>` component.\n * Adds styles for a preset footer section.\n */\n\n\nlet NbCardFooterComponent = /*#__PURE__*/(() => {\n  class NbCardFooterComponent {}\n\n  NbCardFooterComponent.ɵfac = function NbCardFooterComponent_Factory(t) {\n    return new (t || NbCardFooterComponent)();\n  };\n\n  NbCardFooterComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardFooterComponent,\n    selectors: [[\"nb-card-footer\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbCardFooterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbCardFooterComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Basic content container component.\n *\n * Basic card example:\n * @stacked-example(Showcase, card/card-showcase.component)\n *\n * Basic card configuration:\n *\n * ```html\n * <nb-card>\n *   <nb-card-body>\n *     Card\n *   </nb-card-body>\n * </nb-card>\n * ```\n *\n * ### Installation\n *\n * Import `NbCardModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCardModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Card with header and footer:\n * @stacked-example(With Header & Footer, card/card-full.component)\n *\n * Most of the time main card content goes to `nb-card-body`,\n * so it is styled and aligned in accordance with the header and footer.\n * In case you need a higher level of control, you can pass contend directly to `nb-card`,\n * so `nb-card-body` styling will not be applied.\n *\n * Consider an example with `nb-list` component:\n * @stacked-example(Card with list, card/card-without-body.component)\n *\n * Colored cards could be simply configured by providing a `status` property:\n * @stacked-example(Colored Card, card/card-colors.component)\n *\n * It is also possible to assign an `accent` property for a slight card highlight\n * as well as combine it with `status`:\n * @stacked-example(Accent Card, card/card-accents.component)\n *\n * Cards of smaller sizes could be combined and put on the same row with a bigger card so they have the same heights.\n * @stacked-example(Card sizes combinations, card/card-sizes-combinations.component)\n *\n * @additional-example(Multiple Sizes, card/card-sizes.component)\n *\n * @styles\n *\n * card-background-color:\n * card-text-color:\n * card-text-font-family:\n * card-text-font-size:\n * card-text-font-weight:\n * card-text-line-height:\n * card-border-width:\n * card-border-style:\n * card-border-color:\n * card-border-radius:\n * card-padding:\n * card-shadow:\n * card-divider-color:\n * card-divider-style:\n * card-divider-width:\n * card-height-tiny:\n * card-height-small:\n * card-height-medium:\n * card-height-large:\n * card-height-giant:\n * card-margin-bottom:\n * card-scrollbar-color:\n * card-scrollbar-background-color:\n * card-scrollbar-width:\n */\n\n\nlet NbCardComponent = /*#__PURE__*/(() => {\n  class NbCardComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      this._size = '';\n      /**\n       * Card status:\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`\n       */\n\n      this.status = '';\n      /**\n       * Card accent (color of the top border):\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`\n       */\n\n      this.accent = '';\n    }\n    /**\n     * Card size, available sizes:\n     * tiny, small, medium, large, giant\n     */\n\n\n    get size() {\n      return this._size;\n    }\n\n    set size(value) {\n      this._size = value;\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get hasAccent() {\n      return this.accent;\n    }\n\n    get primaryAccent() {\n      return this.accent === 'primary';\n    }\n\n    get infoAccent() {\n      return this.accent === 'info';\n    }\n\n    get successAccent() {\n      return this.accent === 'success';\n    }\n\n    get warningAccent() {\n      return this.accent === 'warning';\n    }\n\n    get dangerAccent() {\n      return this.accent === 'danger';\n    }\n\n    get basicAccent() {\n      return this.accent === 'basic';\n    }\n\n    get controlAccent() {\n      return this.accent === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n  }\n\n  NbCardComponent.ɵfac = function NbCardComponent_Factory(t) {\n    return new (t || NbCardComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbCardComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardComponent,\n    selectors: [[\"nb-card\"]],\n    hostVars: 42,\n    hostBindings: function NbCardComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"accent\", ctx.hasAccent)(\"accent-primary\", ctx.primaryAccent)(\"accent-info\", ctx.infoAccent)(\"accent-success\", ctx.successAccent)(\"accent-warning\", ctx.warningAccent)(\"accent-danger\", ctx.dangerAccent)(\"accent-basic\", ctx.basicAccent)(\"accent-control\", ctx.controlAccent);\n      }\n    },\n    inputs: {\n      status: \"status\",\n      accent: \"accent\",\n      size: \"size\"\n    },\n    ngContentSelectors: _c2,\n    decls: 4,\n    vars: 0,\n    template: function NbCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c1);\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵprojection(1, 1);\n        ɵngcc0.ɵɵprojection(2, 2);\n        ɵngcc0.ɵɵprojection(3, 3);\n      }\n    },\n    styles: [_c8]\n  });\n  return NbCardComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n *\n * Reveal card example:\n * @stacked-example(My example, reveal-card/reveal-card-showcase.component)\n *\n * As a content Reveal card accepts two instances of `nb-card` - for front and back sides.\n *\n * Basic reveal card configuration:\n *\n * ```html\n * <nb-reveal-card>\n *   <nb-card-front>\n *     <nb-card>\n *       <nb-card-body>\n *         Front\n *       </nb-card-body>\n *     </nb-card>\n *   </nb-card-front>\n *   <nb-card-back>\n *     <nb-card>\n *       <nb-card-body>\n *         Back\n *       </nb-card-body>\n *     </nb-card>\n *   </nb-card-back>\n * </nb-reveal-card>\n * ```\n *\n * ### Installation\n *\n * Import `NbCardModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCardModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Reveal Card with header and footer:\n * @stacked-example(With Header & Footer, reveal-card/reveal-card-full.component)\n *\n * Colored reveal-cards could be simply configured by providing a `status` property:\n * @stacked-example(Colored Card, reveal-card/reveal-card-colors.component)\n *\n * It is also possible to assign an `accent` property for a slight card highlight\n * as well as combine it with `status`:\n * @stacked-example(Accent Card, reveal-card/reveal-card-accents.component)\n *\n * @additional-example(Multiple Sizes, reveal-card/reveal-card-sizes.component)\n */\n\n\nlet NbRevealCardComponent = /*#__PURE__*/(() => {\n  class NbRevealCardComponent {\n    constructor() {\n      /**\n       * Reveal state\n       * @type boolean\n       */\n      this.revealed = false;\n      /**\n       * Show/hide toggle button to be able to control toggle from your code\n       * @type {boolean}\n       */\n\n      this.showToggleButton = true;\n    }\n\n    toggle() {\n      this.revealed = !this.revealed;\n    }\n\n  }\n\n  NbRevealCardComponent.ɵfac = function NbRevealCardComponent_Factory(t) {\n    return new (t || NbRevealCardComponent)();\n  };\n\n  NbRevealCardComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRevealCardComponent,\n    selectors: [[\"nb-reveal-card\"]],\n    hostVars: 2,\n    hostBindings: function NbRevealCardComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"revealed\", ctx.revealed);\n      }\n    },\n    inputs: {\n      revealed: \"revealed\",\n      showToggleButton: \"showToggleButton\"\n    },\n    ngContentSelectors: _c4,\n    decls: 4,\n    vars: 1,\n    consts: [[1, \"second-card-container\"], [\"class\", \"reveal-button\", 3, \"click\", 4, \"ngIf\"], [1, \"reveal-button\", 3, \"click\"], [\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\"]],\n    template: function NbRevealCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c3);\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 0);\n        ɵngcc0.ɵɵprojection(2, 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbRevealCardComponent_a_3_Template, 2, 0, \"a\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showToggleButton);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:block;position:relative;overflow:hidden}[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]{position:absolute;top:100%;right:0;left:0;overflow:hidden;transition:top 0s 0.5s}[_nghost-%COMP%]     nb-card-front nb-card, [_nghost-%COMP%]     nb-card-back nb-card{box-shadow:none;margin:0}[_nghost-%COMP%]     nb-card-front{display:block;height:100%}[_nghost-%COMP%]     nb-card-back{position:absolute;left:0;top:100%;width:100%;transition:top 0.5s}[_nghost-%COMP%]   .reveal-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:0;bottom:0;transform:rotate(180deg);transition:transform 0.3s}.revealed[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]{top:0;transition:none}.revealed[_nghost-%COMP%]   .second-card-container[_ngcontent-%COMP%]     nb-card-back{top:0}.revealed[_nghost-%COMP%]   .reveal-button[_ngcontent-%COMP%]{transform:none}\"]\n  });\n  return NbRevealCardComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n *\n * Flip card example:\n * @stacked-example(Showcase, flip-card/flip-card-showcase.component)\n *\n * As a content Flip card accepts two instances of `nb-card` - for front and back sides.\n *\n * Basic flip card configuration:\n *\n * ```html\n * <nb-flip-card>\n *   <nb-card-front>\n *     <nb-card>\n *       <nb-card-body>\n *         Front\n *       </nb-card-body>\n *     </nb-card>\n *   </nb-card-front>\n *   <nb-card-back>\n *     <nb-card>\n *       <nb-card-body>\n *         Back\n *       </nb-card-body>\n *     </nb-card>\n *   </nb-card-back>\n * </nb-flip-card>\n * ```\n *\n * ### Installation\n *\n * Import `NbCardModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCardModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Flip Card with header and footer:\n * @stacked-example(With Header & Footer, flip-card/flip-card-full.component.ts)\n *\n * Colored flip-cards could be simply configured by providing a `status` property:\n * @stacked-example(Colored Card, flip-card/flip-card-colors.component)\n *\n * It is also possible to assign an `accent` property for a slight card highlight\n * as well as combine it with `status`:\n * @stacked-example(Accent Card, flip-card/flip-card-accents.component)\n *\n * @additional-example(Multiple Sizes, flip-card/flip-card-sizes.component)\n *\n */\n\n\nlet NbFlipCardComponent = /*#__PURE__*/(() => {\n  class NbFlipCardComponent {\n    constructor() {\n      /**\n       * Flip state\n       * @type boolean\n       */\n      this.flipped = false;\n      /**\n       * Show/hide toggle button to be able to control toggle from your code\n       * @type {boolean}\n       */\n\n      this.showToggleButton = true;\n    }\n\n    toggle() {\n      this.flipped = !this.flipped;\n    }\n\n  }\n\n  NbFlipCardComponent.ɵfac = function NbFlipCardComponent_Factory(t) {\n    return new (t || NbFlipCardComponent)();\n  };\n\n  NbFlipCardComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbFlipCardComponent,\n    selectors: [[\"nb-flip-card\"]],\n    hostVars: 2,\n    hostBindings: function NbFlipCardComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"flipped\", ctx.flipped);\n      }\n    },\n    inputs: {\n      flipped: \"flipped\",\n      showToggleButton: \"showToggleButton\"\n    },\n    ngContentSelectors: _c4,\n    decls: 7,\n    vars: 2,\n    consts: [[1, \"flipcard-body\"], [1, \"front-container\"], [\"class\", \"flip-button\", 3, \"click\", 4, \"ngIf\"], [1, \"back-container\"], [1, \"flip-button\", 3, \"click\"], [\"icon\", \"chevron-left-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\"]],\n    template: function NbFlipCardComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c3);\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵtemplate(3, NbFlipCardComponent_a_3_Template, 2, 0, \"a\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", 3);\n        ɵngcc0.ɵɵprojection(5, 1);\n        ɵngcc0.ɵɵtemplate(6, NbFlipCardComponent_a_6_Template, 2, 0, \"a\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showToggleButton);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showToggleButton);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:block;perspective:1200px;position:relative}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]{transform:rotateY(-180deg)}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]{opacity:0;transition:opacity 0s 0.25s;backface-visibility:hidden;-webkit-backface-visibility:hidden}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%]{opacity:0;z-index:-1}.flipped[_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%], .flipped   [_nghost-%COMP%]   .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{backface-visibility:visible;-webkit-backface-visibility:visible}.flipcard-body[_ngcontent-%COMP%]{display:flex;transition:transform 0.5s;transform-style:preserve-3d}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%], .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{flex:1}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%], .flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]   .flip-button[_ngcontent-%COMP%]{cursor:pointer;position:absolute;right:0;bottom:0;opacity:1;transition:opacity 0s 0.15s}.flipcard-body[_ngcontent-%COMP%]   .front-container[_ngcontent-%COMP%]{backface-visibility:visible;-webkit-backface-visibility:visible;transition:opacity 0s 0.2s}.flipcard-body[_ngcontent-%COMP%]   .back-container[_ngcontent-%COMP%]{backface-visibility:hidden;-webkit-backface-visibility:hidden;transform:rotateY(180deg)}\"]\n  });\n  return NbFlipCardComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Component intended to be used within the `<nb-flip-card>` and `<nb-reveal-card>` components.\n *\n * Use it as a container for the front card.\n */\n\n\nlet NbCardFrontComponent = /*#__PURE__*/(() => {\n  class NbCardFrontComponent {}\n\n  NbCardFrontComponent.ɵfac = function NbCardFrontComponent_Factory(t) {\n    return new (t || NbCardFrontComponent)();\n  };\n\n  NbCardFrontComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardFrontComponent,\n    selectors: [[\"nb-card-front\"]],\n    ngContentSelectors: _c6,\n    decls: 1,\n    vars: 0,\n    template: function NbCardFrontComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c5);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbCardFrontComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Component intended to be used within the `<nb-flip-card>` and `<nb-reveal-card>` components.\n *\n * Use it as a container for the back card.\n */\n\n\nlet NbCardBackComponent = /*#__PURE__*/(() => {\n  class NbCardBackComponent {}\n\n  NbCardBackComponent.ɵfac = function NbCardBackComponent_Factory(t) {\n    return new (t || NbCardBackComponent)();\n  };\n\n  NbCardBackComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCardBackComponent,\n    selectors: [[\"nb-card-back\"]],\n    ngContentSelectors: _c6,\n    decls: 1,\n    vars: 0,\n    template: function NbCardBackComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c5);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbCardBackComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_CARD_COMPONENTS = [NbCardComponent, NbCardBodyComponent, NbCardFooterComponent, NbCardHeaderComponent, NbRevealCardComponent, NbFlipCardComponent, NbCardFrontComponent, NbCardBackComponent];\nlet NbCardModule = /*#__PURE__*/(() => {\n  class NbCardModule {}\n\n  NbCardModule.ɵfac = function NbCardModule_Factory(t) {\n    return new (t || NbCardModule)();\n  };\n\n  NbCardModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCardModule\n  });\n  NbCardModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule]]\n  });\n  return NbCardModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCardModule, {\n    declarations: [NbCardComponent, NbCardBodyComponent, NbCardFooterComponent, NbCardHeaderComponent, NbRevealCardComponent, NbFlipCardComponent, NbCardFrontComponent, NbCardBackComponent],\n    imports: [NbSharedModule, NbIconModule],\n    exports: [NbCardComponent, NbCardBodyComponent, NbCardFooterComponent, NbCardHeaderComponent, NbRevealCardComponent, NbFlipCardComponent, NbCardFrontComponent, NbCardBackComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nvar NbCalendarViewMode = /*#__PURE__*/(() => {\n  (function (NbCalendarViewMode) {\n    NbCalendarViewMode[\"YEAR\"] = \"year\";\n    NbCalendarViewMode[\"MONTH\"] = \"month\";\n    NbCalendarViewMode[\"DATE\"] = \"date\";\n  })(NbCalendarViewMode || (NbCalendarViewMode = {}));\n\n  return NbCalendarViewMode;\n})();\nvar NbCalendarSize = /*#__PURE__*/(() => {\n  (function (NbCalendarSize) {\n    NbCalendarSize[\"MEDIUM\"] = \"medium\";\n    NbCalendarSize[\"LARGE\"] = \"large\";\n  })(NbCalendarSize || (NbCalendarSize = {}));\n\n  return NbCalendarSize;\n})();\n\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\nfunction convertToBoolProperty(val) {\n  if (typeof val === 'string') {\n    val = val.toLowerCase().trim();\n    return val === 'true' || val === '';\n  }\n\n  return !!val;\n}\n\nfunction firstChildNotComment(node) {\n  const children = Array.from(node.childNodes).filter(child => child.nodeType !== Node.COMMENT_NODE);\n  return children[0];\n}\n\nfunction lastChildNotComment(node) {\n  const children = Array.from(node.childNodes).filter(child => child.nodeType !== Node.COMMENT_NODE);\n  return children[children.length - 1];\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Calendar component provides a capability to choose a date.\n *\n * ```html\n * <nb-calendar [(date)]=\"date\"></nb-calendar>\n * <nb-calendar [date]=\"date\" (dateChange)=\"handleDateChange($event)\"></nb-calendar>\n * ```\n *\n * Basic usage example\n * @stacked-example(Showcase, calendar/calendar-showcase.component)\n *\n * ### Installation\n *\n * Import `NbCalendarModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCalendarModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * If you want to select ranges you can use `NbCalendarRangeComponent`.\n *\n * ```html\n * <nb-calendar-range [(range)]=\"range\"></nb-calendar-range>\n * <nb-calendar-range [range]=\"range\" (rangeChange)=\"handleRangeChange($event)\"></nb-calendar-range>\n * ```\n *\n * In order to use it, you have to import `NbCalendarRangeModule`.\n * @stacked-example(Range, calendar/calendar-range-showcase.component)\n *\n * The calendar component is supplied with a calendar navigation that contains navigate buttons.\n * If you do not want to use it you can hide calendar navigation using `showNavigation` property.\n * @stacked-example(Without navigation, calendar/calendar-without-navigation.component)\n *\n * As you can see in the basic usage example calendar contains previous and next month days\n * which can be disabled using `boundingMonth` property.\n * @stacked-example(Bounding months, calendar/calendar-bounding-month.component)\n *\n * You can define starting view of the calendar by setting `startView` property.\n * Available values: year, month and date.\n * @stacked-example(Start view, calendar/calendar-start-view.component)\n *\n * You can use a larger version of the calendar by defining size property.\n * Available values: medium(which is default) and large.\n * @stacked-example(Size, calendar/calendar-size.component)\n *\n * Calendar supports min and max dates which disables values out of min-max range.\n * @stacked-example(Borders, calendar/calendar-min-max.component)\n *\n * Also, you can define custom filter property that should be predicate which receives\n * date and returns false if this date has to be disabled. In this example, we provide the filter\n * which disables weekdays.\n * @stacked-example(Filter, calendar/calendar-filter.component)\n *\n * Week numbers column could be enabled via `showWeekNumber` binding:\n * @stacked-example(Week number, calendar/calendar-week-number.component)\n *\n * If you need create custom cells you can easily provide custom components for\n * calendar. For examples if you want to show any average price under each date you can\n * just provide custom `dayCellComponent`. Custom cells for month and year can be provided\n * the same way, check API reference.\n * @stacked-example(Custom day cell, calendar/calendar-custom-day-cell-showcase.component)\n *\n * @styles\n *\n * calendar-width:\n * calendar-background-color:\n * calendar-border-color:\n * calendar-border-style:\n * calendar-border-width:\n * calendar-border-radius:\n * calendar-text-color:\n * calendar-text-font-family:\n * calendar-text-font-size:\n * calendar-text-font-weight:\n * calendar-text-line-height:\n * calendar-picker-padding-top:\n * calendar-picker-padding-bottom:\n * calendar-picker-padding-start:\n * calendar-picker-padding-end:\n * calendar-navigation-text-color:\n * calendar-navigation-text-font-family:\n * calendar-navigation-title-text-font-size:\n * calendar-navigation-title-text-font-weight:\n * calendar-navigation-title-text-line-height:\n * calendar-navigation-padding:\n * calendar-cell-inactive-text-color:\n * calendar-cell-disabled-text-color:\n * calendar-cell-hover-background-color:\n * calendar-cell-hover-border-color:\n * calendar-cell-hover-text-color:\n * calendar-cell-hover-text-font-size:\n * calendar-cell-hover-text-font-weight:\n * calendar-cell-hover-text-line-height:\n * calendar-cell-active-background-color:\n * calendar-cell-active-border-color:\n * calendar-cell-active-text-color:\n * calendar-cell-active-text-font-size:\n * calendar-cell-active-text-font-weight:\n * calendar-cell-active-text-line-height:\n * calendar-cell-today-background-color:\n * calendar-cell-today-border-color:\n * calendar-cell-today-text-color:\n * calendar-cell-today-text-font-size:\n * calendar-cell-today-text-font-weight:\n * calendar-cell-today-text-line-height:\n * calendar-cell-today-hover-background-color:\n * calendar-cell-today-hover-border-color:\n * calendar-cell-today-active-background-color:\n * calendar-cell-today-active-border-color:\n * calendar-cell-today-disabled-border-color:\n * calendar-cell-today-selected-background-color:\n * calendar-cell-today-selected-border-color:\n * calendar-cell-today-selected-text-color:\n * calendar-cell-today-selected-hover-background-color:\n * calendar-cell-today-selected-hover-border-color:\n * calendar-cell-today-selected-active-background-color:\n * calendar-cell-today-selected-active-border-color:\n * calendar-cell-today-in-range-background-color:\n * calendar-cell-today-in-range-border-color:\n * calendar-cell-today-in-range-text-color:\n * calendar-cell-today-in-range-hover-background-color:\n * calendar-cell-today-in-range-hover-border-color:\n * calendar-cell-today-in-range-active-background-color:\n * calendar-cell-today-in-range-active-border-color:\n * calendar-cell-selected-background-color:\n * calendar-cell-selected-border-color:\n * calendar-cell-selected-text-color:\n * calendar-cell-selected-text-font-size:\n * calendar-cell-selected-text-font-weight:\n * calendar-cell-selected-text-line-height:\n * calendar-cell-selected-hover-background-color:\n * calendar-cell-selected-hover-border-color:\n * calendar-cell-selected-active-background-color:\n * calendar-cell-selected-active-border-color:\n * calendar-day-cell-width:\n * calendar-day-cell-height:\n * calendar-month-cell-width:\n * calendar-month-cell-height:\n * calendar-year-cell-width:\n * calendar-year-cell-height:\n * calendar-weekday-background:\n * calendar-weekday-divider-color:\n * calendar-weekday-divider-width:\n * calendar-weekday-text-color:\n * calendar-weekday-text-font-size:\n * calendar-weekday-text-font-weight:\n * calendar-weekday-text-line-height:\n * calendar-weekday-holiday-text-color:\n * calendar-weekday-height:\n * calendar-weekday-width:\n * calendar-weeknumber-background:\n * calendar-weeknumber-divider-color:\n * calendar-weeknumber-divider-width:\n * calendar-weeknumber-text-color:\n * calendar-weeknumber-text-font-size:\n * calendar-weeknumber-text-font-weight:\n * calendar-weeknumber-text-line-height:\n * calendar-weeknumber-height:\n * calendar-weeknumber-width:\n * calendar-large-width:\n * calendar-day-cell-large-width:\n * calendar-day-cell-large-height:\n * calendar-weekday-large-height:\n * calendar-weekday-large-width:\n * calendar-weeknumber-large-height:\n * calendar-weeknumber-large-width:\n * calendar-month-cell-large-width:\n * calendar-month-cell-large-height:\n * calendar-year-cell-large-width:\n * calendar-year-cell-large-height:\n * */\n\n\nlet NbCalendarComponent = /*#__PURE__*/(() => {\n  class NbCalendarComponent {\n    constructor() {\n      /**\n       * Defines if we should render previous and next months\n       * in the current month view.\n       * */\n      this.boundingMonth = true;\n      /**\n       * Defines starting view for calendar.\n       * */\n\n      this.startView = NbCalendarViewMode.DATE;\n      /**\n       * Size of the calendar and entire components.\n       * Can be 'medium' which is default or 'large'.\n       * */\n\n      this.size = NbCalendarSize.MEDIUM;\n      /**\n       * Determines should we show calendars navigation or not.\n       * */\n\n      this.showNavigation = true;\n      this._showWeekNumber = false;\n      /**\n       * Sets symbol used as a header for week numbers column\n       * */\n\n      this.weekNumberSymbol = '#';\n      /**\n       * Emits date when selected.\n       * */\n\n      this.dateChange = new EventEmitter();\n    }\n    /**\n     * Determines should we show week numbers column.\n     * False by default.\n     * */\n\n\n    get showWeekNumber() {\n      return this._showWeekNumber;\n    }\n\n    set showWeekNumber(value) {\n      this._showWeekNumber = convertToBoolProperty(value);\n    }\n\n  }\n\n  NbCalendarComponent.ɵfac = function NbCalendarComponent_Factory(t) {\n    return new (t || NbCalendarComponent)();\n  };\n\n  NbCalendarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarComponent,\n    selectors: [[\"nb-calendar\"]],\n    inputs: {\n      boundingMonth: \"boundingMonth\",\n      startView: \"startView\",\n      size: \"size\",\n      showNavigation: \"showNavigation\",\n      weekNumberSymbol: \"weekNumberSymbol\",\n      showWeekNumber: \"showWeekNumber\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      dayCellComponent: \"dayCellComponent\",\n      monthCellComponent: \"monthCellComponent\",\n      yearCellComponent: \"yearCellComponent\",\n      visibleDate: \"visibleDate\",\n      date: \"date\"\n    },\n    outputs: {\n      dateChange: \"dateChange\"\n    },\n    decls: 1,\n    vars: 14,\n    consts: [[3, \"boundingMonth\", \"startView\", \"date\", \"min\", \"max\", \"filter\", \"dayCellComponent\", \"monthCellComponent\", \"yearCellComponent\", \"size\", \"visibleDate\", \"showNavigation\", \"showWeekNumber\", \"weekNumberSymbol\", \"dateChange\"]],\n    template: function NbCalendarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-base-calendar\", 0);\n        ɵngcc0.ɵɵlistener(\"dateChange\", function NbCalendarComponent_Template_nb_base_calendar_dateChange_0_listener($event) {\n          return ctx.dateChange.emit($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"boundingMonth\", ctx.boundingMonth)(\"startView\", ctx.startView)(\"date\", ctx.date)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"dayCellComponent\", ctx.dayCellComponent)(\"monthCellComponent\", ctx.monthCellComponent)(\"yearCellComponent\", ctx.yearCellComponent)(\"size\", ctx.size)(\"visibleDate\", ctx.visibleDate)(\"showNavigation\", ctx.showNavigation)(\"showWeekNumber\", ctx.showWeekNumber)(\"weekNumberSymbol\", ctx.weekNumberSymbol);\n      }\n    },\n    directives: function () {\n      return [NbBaseCalendarComponent];\n    },\n    encapsulation: 2\n  });\n  return NbCalendarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})(); // tslint:disable-next-line:directive-class-suffix\n\n\nlet NbButton = /*#__PURE__*/(() => {\n  class NbButton {\n    constructor(renderer, hostElement, cd, zone, statusService) {\n      this.renderer = renderer;\n      this.hostElement = hostElement;\n      this.cd = cd;\n      this.zone = zone;\n      this.statusService = statusService;\n      /**\n       * Button size, available sizes:\n       * `tiny`, `small`, `medium`, `large`, `giant`\n       */\n\n      this.size = 'medium';\n      /**\n       * Button status (adds specific styles):\n       * `primary`, `info`, `success`, `warning`, `danger`\n       */\n\n      this.status = 'basic';\n      /**\n       * Button shapes: `rectangle`, `round`, `semi-round`\n       */\n\n      this.shape = 'rectangle';\n      /**\n       * Button appearance: `filled`, `outline`, `ghost`, `hero`\n       */\n\n      this.appearance = 'filled';\n      this._fullWidth = false;\n      this._disabled = false;\n    }\n    /**\n     * Sets `filled` appearance\n     */\n\n\n    get filled() {\n      return this.appearance === 'filled';\n    }\n\n    set filled(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'filled';\n      }\n    }\n    /**\n     * Sets `outline` appearance\n     */\n\n\n    get outline() {\n      return this.appearance === 'outline';\n    }\n\n    set outline(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'outline';\n      }\n    }\n    /**\n     * Sets `ghost` appearance\n     */\n\n\n    get ghost() {\n      return this.appearance === 'ghost';\n    }\n\n    set ghost(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'ghost';\n      }\n    }\n    /**\n     * If set element will fill its container\n     */\n\n\n    get fullWidth() {\n      return this._fullWidth;\n    }\n\n    set fullWidth(value) {\n      this._fullWidth = convertToBoolProperty(value);\n    }\n    /**\n     * Disables the button\n     */\n\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      if (this.disabled !== convertToBoolProperty(value)) {\n        this._disabled = !this.disabled;\n        this.renderer.setProperty(this.hostElement.nativeElement, 'disabled', this.disabled);\n      }\n    } // issue #794\n\n\n    get tabbable() {\n      if (this.disabled) {\n        return '-1';\n      }\n\n      if (this.tabIndex == null) {\n        return '0';\n      }\n\n      return this.tabIndex.toString();\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get rectangle() {\n      return this.shape === 'rectangle';\n    }\n\n    get round() {\n      return this.shape === 'round';\n    }\n\n    get semiRound() {\n      return this.shape === 'semi-round';\n    }\n\n    get iconLeft() {\n      const el = this.hostElement.nativeElement;\n      const icon = this.iconElement;\n      return !!(icon && firstChildNotComment(el) === icon);\n    }\n\n    get iconRight() {\n      const el = this.hostElement.nativeElement;\n      const icon = this.iconElement;\n      return !!(icon && lastChildNotComment(el) === icon);\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.hostElement.nativeElement, 'nb-transition');\n      }));\n    }\n    /**\n     * @docs-private\n     **/\n\n\n    updateProperties(config) {\n      let isPropertyChanged = false;\n\n      for (const key in config) {\n        if (config.hasOwnProperty(key) && this[key] !== config[key]) {\n          this[key] = config[key];\n          isPropertyChanged = true;\n        }\n      }\n\n      if (isPropertyChanged) {\n        this.cd.markForCheck();\n      }\n    }\n\n    get iconElement() {\n      const el = this.hostElement.nativeElement;\n      return el.querySelector('nb-icon');\n    }\n\n  }\n\n  NbButton.ɵfac = function NbButton_Factory(t) {\n    return new (t || NbButton)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbButton.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbButton,\n    hostVars: 34,\n    hostBindings: function NbButton_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-disabled\", ctx.disabled)(\"tabindex\", ctx.tabbable);\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"appearance-filled\", ctx.filled)(\"appearance-outline\", ctx.outline)(\"appearance-ghost\", ctx.ghost)(\"full-width\", ctx.fullWidth)(\"btn-disabled\", ctx.disabled)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"shape-rectangle\", ctx.rectangle)(\"shape-round\", ctx.round)(\"shape-semi-round\", ctx.semiRound)(\"icon-start\", ctx.iconLeft)(\"icon-end\", ctx.iconRight);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      status: \"status\",\n      shape: \"shape\",\n      appearance: \"appearance\",\n      filled: \"filled\",\n      outline: \"outline\",\n      ghost: \"ghost\",\n      fullWidth: \"fullWidth\",\n      disabled: \"disabled\",\n      tabIndex: \"tabIndex\"\n    }\n  });\n  return NbButton;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Basic button component.\n *\n * Default button size is `medium` and status color is `basic`:\n * @stacked-example(Button Showcase, button/button-showcase.component)\n *\n * ```html\n * <button nbButton></button>\n * ```\n * ### Installation\n *\n * Import `NbButtonModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbButtonModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Buttons are available in multiple colors using `status` property:\n * @stacked-example(Button Colors, button/button-colors.component.html)\n *\n * There are three button sizes:\n *\n * @stacked-example(Button Sizes, button/button-sizes.component.html)\n *\n * And two additional style types - `outline`:\n *\n * @stacked-example(Outline Buttons, button/button-outline.component.html)\n *\n * and `hero`:\n *\n * @stacked-example(Button Hero, button/button-hero.component.html)\n *\n * Buttons available in different shapes, which could be combined with the other properties:\n * @stacked-example(Button Shapes, button/button-shapes.component)\n *\n * `nbButton` could be applied to the following selectors - `button`, `input[type=\"button\"]`, `input[type=\"submit\"]`\n * and `a`:\n * @stacked-example(Button Elements, button/button-types.component.html)\n *\n * Button can be made `fullWidth`:\n * @stacked-example(Full Width Button, button/button-full-width.component.html)\n *\n * Icon can be placed inside of a button as a child element:\n * @stacked-example(Icon Button, button/button-icon.component.html)\n *\n * @additional-example(Interactive example, button/button-interactive.component)\n *\n * @styles\n *\n * button-cursor:\n * button-outline-width:\n * button-outline-color:\n * button-text-font-family:\n * button-text-font-weight:\n * button-disabled-cursor:\n * button-tiny-text-font-size:\n * button-tiny-text-line-height:\n * button-tiny-icon-size:\n * button-tiny-icon-vertical-margin:\n * button-tiny-icon-offset:\n * button-small-text-font-size:\n * button-small-text-line-height:\n * button-small-icon-size:\n * button-small-icon-vertical-margin:\n * button-small-icon-offset:\n * button-medium-text-font-size:\n * button-medium-text-line-height:\n * button-medium-icon-size:\n * button-medium-icon-vertical-margin:\n * button-medium-icon-offset:\n * button-large-text-font-size:\n * button-large-text-line-height:\n * button-large-icon-size:\n * button-large-icon-vertical-margin:\n * button-large-icon-offset:\n * button-giant-text-font-size:\n * button-giant-text-line-height:\n * button-giant-icon-size:\n * button-giant-icon-vertical-margin:\n * button-giant-icon-offset:\n * button-rectangle-border-radius:\n * button-semi-round-border-radius:\n * button-round-border-radius:\n * button-filled-border-style:\n * button-filled-border-width:\n * button-filled-text-transform:\n * button-filled-tiny-padding:\n * button-filled-small-padding:\n * button-filled-medium-padding:\n * button-filled-large-padding:\n * button-filled-giant-padding:\n * button-filled-basic-background-color:\n * button-filled-basic-border-color:\n * button-filled-basic-text-color:\n * button-filled-basic-focus-background-color:\n * button-filled-basic-focus-border-color:\n * button-filled-basic-hover-background-color:\n * button-filled-basic-hover-border-color:\n * button-filled-basic-active-background-color:\n * button-filled-basic-active-border-color:\n * button-filled-basic-disabled-background-color:\n * button-filled-basic-disabled-border-color:\n * button-filled-basic-disabled-text-color:\n * button-filled-primary-background-color:\n * button-filled-primary-border-color:\n * button-filled-primary-text-color:\n * button-filled-primary-focus-background-color:\n * button-filled-primary-focus-border-color:\n * button-filled-primary-hover-background-color:\n * button-filled-primary-hover-border-color:\n * button-filled-primary-active-background-color:\n * button-filled-primary-active-border-color:\n * button-filled-primary-disabled-background-color:\n * button-filled-primary-disabled-border-color:\n * button-filled-primary-disabled-text-color:\n * button-filled-success-background-color:\n * button-filled-success-border-color:\n * button-filled-success-text-color:\n * button-filled-success-focus-background-color:\n * button-filled-success-focus-border-color:\n * button-filled-success-hover-background-color:\n * button-filled-success-hover-border-color:\n * button-filled-success-active-background-color:\n * button-filled-success-active-border-color:\n * button-filled-success-disabled-background-color:\n * button-filled-success-disabled-border-color:\n * button-filled-success-disabled-text-color:\n * button-filled-info-background-color:\n * button-filled-info-border-color:\n * button-filled-info-text-color:\n * button-filled-info-focus-background-color:\n * button-filled-info-focus-border-color:\n * button-filled-info-hover-background-color:\n * button-filled-info-hover-border-color:\n * button-filled-info-active-background-color:\n * button-filled-info-active-border-color:\n * button-filled-info-disabled-background-color:\n * button-filled-info-disabled-border-color:\n * button-filled-info-disabled-text-color:\n * button-filled-warning-background-color:\n * button-filled-warning-border-color:\n * button-filled-warning-text-color:\n * button-filled-warning-focus-background-color:\n * button-filled-warning-focus-border-color:\n * button-filled-warning-hover-background-color:\n * button-filled-warning-hover-border-color:\n * button-filled-warning-active-background-color:\n * button-filled-warning-active-border-color:\n * button-filled-warning-disabled-background-color:\n * button-filled-warning-disabled-border-color:\n * button-filled-warning-disabled-text-color:\n * button-filled-danger-background-color:\n * button-filled-danger-border-color:\n * button-filled-danger-text-color:\n * button-filled-danger-focus-background-color:\n * button-filled-danger-focus-border-color:\n * button-filled-danger-hover-background-color:\n * button-filled-danger-hover-border-color:\n * button-filled-danger-active-background-color:\n * button-filled-danger-active-border-color:\n * button-filled-danger-disabled-background-color:\n * button-filled-danger-disabled-border-color:\n * button-filled-danger-disabled-text-color:\n * button-filled-control-background-color:\n * button-filled-control-border-color:\n * button-filled-control-text-color:\n * button-filled-control-focus-background-color:\n * button-filled-control-focus-border-color:\n * button-filled-control-hover-background-color:\n * button-filled-control-hover-border-color:\n * button-filled-control-active-background-color:\n * button-filled-control-active-border-color:\n * button-filled-control-disabled-background-color:\n * button-filled-control-disabled-border-color:\n * button-filled-control-disabled-text-color:\n * button-outline-border-style:\n * button-outline-border-width:\n * button-outline-text-transform:\n * button-outline-focus-inset-shadow-length:\n * button-outline-tiny-padding:\n * button-outline-small-padding:\n * button-outline-medium-padding:\n * button-outline-large-padding:\n * button-outline-giant-padding:\n * button-outline-basic-background-color:\n * button-outline-basic-border-color:\n * button-outline-basic-text-color:\n * button-outline-basic-focus-background-color:\n * button-outline-basic-focus-border-color:\n * button-outline-basic-focus-text-color:\n * button-outline-basic-hover-background-color:\n * button-outline-basic-hover-border-color:\n * button-outline-basic-hover-text-color:\n * button-outline-basic-active-background-color:\n * button-outline-basic-active-border-color:\n * button-outline-basic-active-text-color:\n * button-outline-basic-disabled-background-color:\n * button-outline-basic-disabled-border-color:\n * button-outline-basic-disabled-text-color:\n * button-outline-primary-background-color:\n * button-outline-primary-border-color:\n * button-outline-primary-text-color:\n * button-outline-primary-focus-background-color:\n * button-outline-primary-focus-border-color:\n * button-outline-primary-focus-text-color:\n * button-outline-primary-hover-background-color:\n * button-outline-primary-hover-border-color:\n * button-outline-primary-hover-text-color:\n * button-outline-primary-active-background-color:\n * button-outline-primary-active-border-color:\n * button-outline-primary-active-text-color:\n * button-outline-primary-disabled-background-color:\n * button-outline-primary-disabled-border-color:\n * button-outline-primary-disabled-text-color:\n * button-outline-success-background-color:\n * button-outline-success-border-color:\n * button-outline-success-text-color:\n * button-outline-success-focus-background-color:\n * button-outline-success-focus-border-color:\n * button-outline-success-focus-text-color:\n * button-outline-success-hover-background-color:\n * button-outline-success-hover-border-color:\n * button-outline-success-hover-text-color:\n * button-outline-success-active-background-color:\n * button-outline-success-active-border-color:\n * button-outline-success-active-text-color:\n * button-outline-success-disabled-background-color:\n * button-outline-success-disabled-border-color:\n * button-outline-success-disabled-text-color:\n * button-outline-info-background-color:\n * button-outline-info-border-color:\n * button-outline-info-text-color:\n * button-outline-info-focus-background-color:\n * button-outline-info-focus-border-color:\n * button-outline-info-focus-text-color:\n * button-outline-info-hover-background-color:\n * button-outline-info-hover-border-color:\n * button-outline-info-hover-text-color:\n * button-outline-info-active-background-color:\n * button-outline-info-active-border-color:\n * button-outline-info-active-text-color:\n * button-outline-info-disabled-background-color:\n * button-outline-info-disabled-border-color:\n * button-outline-info-disabled-text-color:\n * button-outline-warning-background-color:\n * button-outline-warning-border-color:\n * button-outline-warning-text-color:\n * button-outline-warning-focus-background-color:\n * button-outline-warning-focus-border-color:\n * button-outline-warning-focus-text-color:\n * button-outline-warning-hover-background-color:\n * button-outline-warning-hover-border-color:\n * button-outline-warning-hover-text-color:\n * button-outline-warning-active-background-color:\n * button-outline-warning-active-border-color:\n * button-outline-warning-active-text-color:\n * button-outline-warning-disabled-background-color:\n * button-outline-warning-disabled-border-color:\n * button-outline-warning-disabled-text-color:\n * button-outline-danger-background-color:\n * button-outline-danger-border-color:\n * button-outline-danger-text-color:\n * button-outline-danger-focus-background-color:\n * button-outline-danger-focus-border-color:\n * button-outline-danger-focus-text-color:\n * button-outline-danger-hover-background-color:\n * button-outline-danger-hover-border-color:\n * button-outline-danger-hover-text-color:\n * button-outline-danger-active-background-color:\n * button-outline-danger-active-border-color:\n * button-outline-danger-active-text-color:\n * button-outline-danger-disabled-background-color:\n * button-outline-danger-disabled-border-color:\n * button-outline-danger-disabled-text-color:\n * button-outline-control-background-color:\n * button-outline-control-border-color:\n * button-outline-control-text-color:\n * button-outline-control-focus-background-color:\n * button-outline-control-focus-border-color:\n * button-outline-control-focus-text-color:\n * button-outline-control-hover-background-color:\n * button-outline-control-hover-border-color:\n * button-outline-control-hover-text-color:\n * button-outline-control-active-background-color:\n * button-outline-control-active-border-color:\n * button-outline-control-active-text-color:\n * button-outline-control-disabled-background-color:\n * button-outline-control-disabled-border-color:\n * button-outline-control-disabled-text-color:\n * button-ghost-background-color:\n * button-ghost-border-color:\n * button-ghost-border-style:\n * button-ghost-border-width:\n * button-ghost-text-transform:\n * button-ghost-focus-inset-shadow-length:\n * button-ghost-tiny-padding:\n * button-ghost-small-padding:\n * button-ghost-medium-padding:\n * button-ghost-large-padding:\n * button-ghost-giant-padding:\n * button-ghost-basic-text-color:\n * button-ghost-basic-focus-background-color:\n * button-ghost-basic-focus-border-color:\n * button-ghost-basic-focus-text-color:\n * button-ghost-basic-hover-background-color:\n * button-ghost-basic-hover-border-color:\n * button-ghost-basic-hover-text-color:\n * button-ghost-basic-active-background-color:\n * button-ghost-basic-active-border-color:\n * button-ghost-basic-active-text-color:\n * button-ghost-basic-disabled-background-color:\n * button-ghost-basic-disabled-border-color:\n * button-ghost-basic-disabled-text-color:\n * button-ghost-primary-text-color:\n * button-ghost-primary-focus-background-color:\n * button-ghost-primary-focus-border-color:\n * button-ghost-primary-focus-text-color:\n * button-ghost-primary-hover-background-color:\n * button-ghost-primary-hover-border-color:\n * button-ghost-primary-hover-text-color:\n * button-ghost-primary-active-background-color:\n * button-ghost-primary-active-border-color:\n * button-ghost-primary-active-text-color:\n * button-ghost-primary-disabled-background-color:\n * button-ghost-primary-disabled-border-color:\n * button-ghost-primary-disabled-text-color:\n * button-ghost-success-text-color:\n * button-ghost-success-focus-background-color:\n * button-ghost-success-focus-border-color:\n * button-ghost-success-focus-text-color:\n * button-ghost-success-hover-background-color:\n * button-ghost-success-hover-border-color:\n * button-ghost-success-hover-text-color:\n * button-ghost-success-active-background-color:\n * button-ghost-success-active-border-color:\n * button-ghost-success-active-text-color:\n * button-ghost-success-disabled-background-color:\n * button-ghost-success-disabled-border-color:\n * button-ghost-success-disabled-text-color:\n * button-ghost-info-text-color:\n * button-ghost-info-focus-background-color:\n * button-ghost-info-focus-border-color:\n * button-ghost-info-focus-text-color:\n * button-ghost-info-hover-background-color:\n * button-ghost-info-hover-border-color:\n * button-ghost-info-hover-text-color:\n * button-ghost-info-active-background-color:\n * button-ghost-info-active-border-color:\n * button-ghost-info-active-text-color:\n * button-ghost-info-disabled-background-color:\n * button-ghost-info-disabled-border-color:\n * button-ghost-info-disabled-text-color:\n * button-ghost-warning-text-color:\n * button-ghost-warning-focus-background-color:\n * button-ghost-warning-focus-border-color:\n * button-ghost-warning-focus-text-color:\n * button-ghost-warning-hover-background-color:\n * button-ghost-warning-hover-border-color:\n * button-ghost-warning-hover-text-color:\n * button-ghost-warning-active-background-color:\n * button-ghost-warning-active-border-color:\n * button-ghost-warning-active-text-color:\n * button-ghost-warning-disabled-background-color:\n * button-ghost-warning-disabled-border-color:\n * button-ghost-warning-disabled-text-color:\n * button-ghost-danger-text-color:\n * button-ghost-danger-focus-background-color:\n * button-ghost-danger-focus-border-color:\n * button-ghost-danger-focus-text-color:\n * button-ghost-danger-hover-background-color:\n * button-ghost-danger-hover-border-color:\n * button-ghost-danger-hover-text-color:\n * button-ghost-danger-active-background-color:\n * button-ghost-danger-active-border-color:\n * button-ghost-danger-active-text-color:\n * button-ghost-danger-disabled-background-color:\n * button-ghost-danger-disabled-border-color:\n * button-ghost-danger-disabled-text-color:\n * button-ghost-control-text-color:\n * button-ghost-control-focus-background-color:\n * button-ghost-control-focus-border-color:\n * button-ghost-control-focus-text-color:\n * button-ghost-control-hover-background-color:\n * button-ghost-control-hover-border-color:\n * button-ghost-control-hover-text-color:\n * button-ghost-control-active-background-color:\n * button-ghost-control-active-border-color:\n * button-ghost-control-active-text-color:\n * button-ghost-control-disabled-background-color:\n * button-ghost-control-disabled-border-color:\n * button-ghost-control-disabled-text-color:\n * button-hero-border-color:\n * button-hero-border-style:\n * button-hero-border-width:\n * button-hero-text-transform:\n * button-hero-tiny-padding:\n * button-hero-small-padding:\n * button-hero-medium-padding:\n * button-hero-large-padding:\n * button-hero-giant-padding:\n * button-hero-shadow:\n * button-hero-text-shadow:\n * button-hero-bevel-size:\n * button-hero-glow-size:\n * button-hero-outline-color:\n * button-hero-outline-width:\n * button-hero-basic-text-color:\n * button-hero-basic-bevel-color:\n * button-hero-basic-glow-color:\n * button-hero-basic-left-background-color:\n * button-hero-basic-right-background-color:\n * button-hero-basic-focus-left-background-color:\n * button-hero-basic-focus-right-background-color:\n * button-hero-basic-hover-left-background-color:\n * button-hero-basic-hover-right-background-color:\n * button-hero-basic-active-left-background-color:\n * button-hero-basic-active-right-background-color:\n * button-hero-basic-disabled-background-color:\n * button-hero-basic-disabled-text-color:\n * button-hero-primary-text-color:\n * button-hero-primary-bevel-color:\n * button-hero-primary-glow-color:\n * button-hero-primary-left-background-color:\n * button-hero-primary-right-background-color:\n * button-hero-primary-focus-left-background-color:\n * button-hero-primary-focus-right-background-color:\n * button-hero-primary-hover-left-background-color:\n * button-hero-primary-hover-right-background-color:\n * button-hero-primary-active-left-background-color:\n * button-hero-primary-active-right-background-color:\n * button-hero-primary-disabled-background-color:\n * button-hero-primary-disabled-text-color:\n * button-hero-success-text-color:\n * button-hero-success-bevel-color:\n * button-hero-success-glow-color:\n * button-hero-success-left-background-color:\n * button-hero-success-right-background-color:\n * button-hero-success-focus-left-background-color:\n * button-hero-success-focus-right-background-color:\n * button-hero-success-hover-left-background-color:\n * button-hero-success-hover-right-background-color:\n * button-hero-success-active-left-background-color:\n * button-hero-success-active-right-background-color:\n * button-hero-success-disabled-background-color:\n * button-hero-success-disabled-text-color:\n * button-hero-info-text-color:\n * button-hero-info-bevel-color:\n * button-hero-info-glow-color:\n * button-hero-info-left-background-color:\n * button-hero-info-right-background-color:\n * button-hero-info-focus-left-background-color:\n * button-hero-info-focus-right-background-color:\n * button-hero-info-hover-left-background-color:\n * button-hero-info-hover-right-background-color:\n * button-hero-info-active-left-background-color:\n * button-hero-info-active-right-background-color:\n * button-hero-info-disabled-background-color:\n * button-hero-info-disabled-text-color:\n * button-hero-warning-text-color:\n * button-hero-warning-bevel-color:\n * button-hero-warning-glow-color:\n * button-hero-warning-left-background-color:\n * button-hero-warning-right-background-color:\n * button-hero-warning-focus-left-background-color:\n * button-hero-warning-focus-right-background-color:\n * button-hero-warning-hover-left-background-color:\n * button-hero-warning-hover-right-background-color:\n * button-hero-warning-active-left-background-color:\n * button-hero-warning-active-right-background-color:\n * button-hero-warning-disabled-background-color:\n * button-hero-warning-disabled-text-color:\n * button-hero-danger-text-color:\n * button-hero-danger-bevel-color:\n * button-hero-danger-glow-color:\n * button-hero-danger-left-background-color:\n * button-hero-danger-right-background-color:\n * button-hero-danger-focus-left-background-color:\n * button-hero-danger-focus-right-background-color:\n * button-hero-danger-hover-left-background-color:\n * button-hero-danger-hover-right-background-color:\n * button-hero-danger-active-left-background-color:\n * button-hero-danger-active-right-background-color:\n * button-hero-danger-disabled-background-color:\n * button-hero-danger-disabled-text-color:\n * button-hero-control-text-color:\n * button-hero-control-bevel-color:\n * button-hero-control-glow-color:\n * button-hero-control-left-background-color:\n * button-hero-control-right-background-color:\n * button-hero-control-focus-left-background-color:\n * button-hero-control-focus-right-background-color:\n * button-hero-control-hover-left-background-color:\n * button-hero-control-hover-right-background-color:\n * button-hero-control-active-left-background-color:\n * button-hero-control-active-right-background-color:\n * button-hero-control-disabled-background-color:\n * button-hero-control-disabled-text-color:\n */\n\n\nlet NbButtonComponent = /*#__PURE__*/(() => {\n  class NbButtonComponent extends NbButton {\n    constructor(renderer, hostElement, cd, zone, statusService) {\n      super(renderer, hostElement, cd, zone, statusService);\n      this.renderer = renderer;\n      this.hostElement = hostElement;\n      this.cd = cd;\n      this.zone = zone;\n      this.statusService = statusService;\n    }\n    /**\n     * Sets `hero` appearance\n     */\n\n\n    get hero() {\n      return this.appearance === 'hero';\n    }\n\n    set hero(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'hero';\n      }\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n    /**\n     * @private\n     * Keep this handler to partially support anchor disabling.\n     * Unlike button, anchor doesn't have 'disabled' DOM property,\n     * so handler will be called anyway. We preventing navigation and bubbling.\n     * Disabling is partial due to click handlers precedence. Consider example:\n     * <a nbButton [disabled]=\"true\" (click)=\"clickHandler()\">...</a>\n     * 'clickHandler' will be called before our host listener below. We can't prevent\n     * such handlers call.\n     */\n\n\n    onClick(event) {\n      if (this.disabled) {\n        event.preventDefault();\n        event.stopImmediatePropagation();\n      }\n    }\n\n  }\n\n  NbButtonComponent.ɵfac = function NbButtonComponent_Factory(t) {\n    return new (t || NbButtonComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbButtonComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbButtonComponent,\n    selectors: [[\"button\", \"nbButton\", \"\"], [\"a\", \"nbButton\", \"\"], [\"input\", \"type\", \"button\", \"nbButton\", \"\"], [\"input\", \"type\", \"submit\", \"nbButton\", \"\"]],\n    hostVars: 16,\n    hostBindings: function NbButtonComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbButtonComponent_click_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"appearance-hero\", ctx.hero)(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      hero: \"hero\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbButton,\n      useExisting: NbButtonComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    attrs: _c7,\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbButtonComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbButtonComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_BUTTON_COMPONENTS = [NbButtonComponent];\nlet NbButtonModule = /*#__PURE__*/(() => {\n  class NbButtonModule {}\n\n  NbButtonModule.ɵfac = function NbButtonModule_Factory(t) {\n    return new (t || NbButtonModule)();\n  };\n\n  NbButtonModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbButtonModule\n  });\n  NbButtonModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbButtonModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbButtonModule, {\n    declarations: [NbButtonComponent],\n    imports: [NbSharedModule],\n    exports: [NbButtonComponent]\n  });\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbDateService {\n  constructor() {\n    this.DAYS_IN_WEEK = 7;\n    /**\n     * Number of hours in AM/PM day periods.\n     **/\n\n    this.HOURS_IN_DAY_PERIOD = 12;\n  }\n\n  setLocale(locale) {\n    this.locale = locale;\n  }\n  /**\n   * Checks if the date is between the start date and the end date.\n   * */\n\n\n  isBetween(date, start, end) {\n    return this.compareDates(date, start) > 0 && this.compareDates(date, end) < 0;\n  }\n\n  /**\n   * Checks is two dates have the same day.\n   * */\n  isSameDaySafe(date1, date2) {\n    return date1 && date2 && this.isSameDay(date1, date2);\n  }\n\n  /**\n   * Checks is two dates have the same month.\n   * */\n  isSameMonthSafe(date1, date2) {\n    return date1 && date2 && this.isSameMonth(date1, date2);\n  }\n  /**\n   * Checks is two dates have the same year.\n   * */\n\n\n  isSameYearSafe(date1, date2) {\n    return date1 && date2 && this.isSameYear(date1, date2);\n  }\n\n  isSameHourAndMinute(date1, date2) {\n    return this.isSameHour(date1, date2) && this.isSameMinute(date1, date2);\n  }\n\n  isSameHour(date1, date2) {\n    return this.getHours(date1) === this.getHours(date2);\n  }\n\n  isSameMinute(date1, date2) {\n    return this.getMinutes(date1) === this.getMinutes(date2);\n  }\n\n  getTwentyFourHoursFormat() {\n    return 'HH:mm';\n  }\n\n  getTwentyFourHoursFormatWithSeconds() {\n    return 'HH:mm:ss';\n  }\n\n  getTwelveHoursFormatWithSeconds() {\n    return 'hh:mm:ss a';\n  }\n\n  getDayPeriod(date) {\n    const isFirstDayPeriod = this.getHours(date) < this.HOURS_IN_DAY_PERIOD;\n\n    if (isFirstDayPeriod) {\n      return \"AM\"\n      /* AM */\n      ;\n    } else {\n      return \"PM\"\n      /* PM */\n      ;\n    }\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst batch = (target, batchSize, offset = 0) => {\n  return target.reduce((res, item, index) => {\n    const chunkIndex = Math.floor((index + offset) / batchSize);\n\n    if (!res[chunkIndex]) {\n      res[chunkIndex] = [];\n    }\n\n    res[chunkIndex].push(item);\n    return res;\n  }, []);\n};\n/**\n * returns array with numbers from first argument to bound.\n * */\n\n\nconst rangeFromTo = (from$$1, to = 0, producer = i => i) => {\n  const arr = [];\n\n  for (let i = from$$1; i < to; i++) {\n    arr.push(producer(i));\n  }\n\n  return arr;\n};\n/**\n * returns array with numbers from zero to bound.\n * */\n\n\nconst range = (bound, producer = i => i) => {\n  return rangeFromTo(0, bound, producer);\n};\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarMonthModelService = /*#__PURE__*/(() => {\n  class NbCalendarMonthModelService {\n    constructor(dateService) {\n      this.dateService = dateService;\n    }\n\n    createDaysGrid(activeMonth, boundingMonth = true) {\n      const weeks = this.createDates(activeMonth);\n      return this.withBoundingMonths(weeks, activeMonth, boundingMonth);\n    }\n\n    createDates(activeMonth) {\n      const days = this.createDateRangeForMonth(activeMonth);\n      const startOfWeekDayDiff = this.getStartOfWeekDayDiff(activeMonth);\n      return batch(days, this.dateService.DAYS_IN_WEEK, startOfWeekDayDiff);\n    }\n\n    withBoundingMonths(weeks, activeMonth, boundingMonth) {\n      let withBoundingMonths = weeks;\n\n      if (this.isShouldAddPrevBoundingMonth(withBoundingMonths)) {\n        withBoundingMonths = this.addPrevBoundingMonth(withBoundingMonths, activeMonth, boundingMonth);\n      }\n\n      if (this.isShouldAddNextBoundingMonth(withBoundingMonths)) {\n        withBoundingMonths = this.addNextBoundingMonth(withBoundingMonths, activeMonth, boundingMonth);\n      }\n\n      return withBoundingMonths;\n    }\n\n    addPrevBoundingMonth(weeks, activeMonth, boundingMonth) {\n      const firstWeek = weeks.shift();\n      const requiredItems = this.dateService.DAYS_IN_WEEK - firstWeek.length;\n      firstWeek.unshift(...this.createPrevBoundingDays(activeMonth, boundingMonth, requiredItems));\n      return [firstWeek, ...weeks];\n    }\n\n    addNextBoundingMonth(weeks, activeMonth, boundingMonth) {\n      const lastWeek = weeks.pop();\n      const requiredItems = this.dateService.DAYS_IN_WEEK - lastWeek.length;\n      lastWeek.push(...this.createNextBoundingDays(activeMonth, boundingMonth, requiredItems));\n      return [...weeks, lastWeek];\n    }\n\n    createPrevBoundingDays(activeMonth, boundingMonth, requiredItems) {\n      const month = this.dateService.addMonth(activeMonth, -1);\n      const daysInMonth = this.dateService.getNumberOfDaysInMonth(month);\n      return this.createDateRangeForMonth(month).slice(daysInMonth - requiredItems).map(date => boundingMonth ? date : null);\n    }\n\n    createNextBoundingDays(activeMonth, boundingMonth, requiredItems) {\n      const month = this.dateService.addMonth(activeMonth, 1);\n      return this.createDateRangeForMonth(month).slice(0, requiredItems).map(date => boundingMonth ? date : null);\n    }\n\n    getStartOfWeekDayDiff(date) {\n      const startOfMonth = this.dateService.getMonthStart(date);\n      return this.getWeekStartDiff(startOfMonth);\n    }\n\n    getWeekStartDiff(date) {\n      return (7 - this.dateService.getFirstDayOfWeek() + this.dateService.getDayOfWeek(date)) % 7;\n    }\n\n    isShouldAddPrevBoundingMonth(weeks) {\n      return weeks[0].length < this.dateService.DAYS_IN_WEEK;\n    }\n\n    isShouldAddNextBoundingMonth(weeks) {\n      return weeks[weeks.length - 1].length < this.dateService.DAYS_IN_WEEK;\n    }\n\n    createDateRangeForMonth(date) {\n      const daysInMonth = this.dateService.getNumberOfDaysInMonth(date);\n      return range(daysInMonth, i => {\n        const year = this.dateService.getYear(date);\n        const month = this.dateService.getMonth(date);\n        return this.dateService.createDate(year, month, i + 1);\n      });\n    }\n\n  }\n\n  NbCalendarMonthModelService.ɵfac = function NbCalendarMonthModelService_Factory(t) {\n    return new (t || NbCalendarMonthModelService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbCalendarMonthModelService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbCalendarMonthModelService,\n    factory: NbCalendarMonthModelService.ɵfac\n  });\n  return NbCalendarMonthModelService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarDayCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarDayCellComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.dayCellClass = true;\n    }\n\n    get today() {\n      return this.dateService.isSameDaySafe(this.date, this.dateService.today());\n    }\n\n    get boundingMonth() {\n      return !this.dateService.isSameMonthSafe(this.date, this.visibleDate);\n    }\n\n    get selected() {\n      return this.dateService.isSameDaySafe(this.date, this.selectedValue);\n    }\n\n    get empty() {\n      return !this.date;\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax() || this.dontFitFilter();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    get day() {\n      return this.date && this.dateService.getDate(this.date);\n    }\n\n    onClick() {\n      if (this.disabled || this.empty) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.date, this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.date, this.max) > 0;\n    }\n\n    dontFitFilter() {\n      return this.date && this.filter && !this.filter(this.date);\n    }\n\n  }\n\n  NbCalendarDayCellComponent.ɵfac = function NbCalendarDayCellComponent_Factory(t) {\n    return new (t || NbCalendarDayCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarDayCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarDayCellComponent,\n    selectors: [[\"nb-calendar-day-cell\"]],\n    hostVars: 14,\n    hostBindings: function NbCalendarDayCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarDayCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"day-cell\", ctx.dayCellClass)(\"today\", ctx.today)(\"bounding-month\", ctx.boundingMonth)(\"selected\", ctx.selected)(\"empty\", ctx.empty)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      selectedValue: \"selectedValue\",\n      visibleDate: \"visibleDate\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarDayCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.day, \" \");\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarDayCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Provides capability pick days.\n * */\n\n\nlet NbCalendarDayPickerComponent = /*#__PURE__*/(() => {\n  class NbCalendarDayPickerComponent {\n    constructor(monthModel) {\n      this.monthModel = monthModel;\n      /**\n       * Defines if we should render previous and next months\n       * in the current month view.\n       * */\n\n      this.boundingMonths = true;\n      this.cellComponent = NbCalendarDayCellComponent;\n      /**\n       * Size of the component.\n       * Can be 'medium' which is default or 'large'.\n       * */\n\n      this.size = NbCalendarSize.MEDIUM;\n      this._showWeekNumber = false;\n      /**\n       * Fires newly selected date.\n       * */\n\n      this.dateChange = new EventEmitter();\n    }\n    /**\n     * Custom day cell component. Have to implement `NbCalendarCell` interface.\n     * */\n\n\n    set setCellComponent(cellComponent) {\n      if (cellComponent) {\n        this.cellComponent = cellComponent;\n      }\n    }\n    /**\n     * Determines should we show week numbers column.\n     * False by default.\n     * */\n\n\n    get showWeekNumber() {\n      return this._showWeekNumber;\n    }\n\n    set showWeekNumber(value) {\n      this._showWeekNumber = convertToBoolProperty(value);\n    }\n\n    get large() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    ngOnChanges({\n      visibleDate,\n      boundingMonths\n    }) {\n      if (visibleDate || boundingMonths) {\n        this.weeks = this.monthModel.createDaysGrid(this.visibleDate, this.boundingMonths);\n      }\n    }\n\n    onSelect(day) {\n      this.dateChange.emit(day);\n    }\n\n  }\n\n  NbCalendarDayPickerComponent.ɵfac = function NbCalendarDayPickerComponent_Factory(t) {\n    return new (t || NbCalendarDayPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbCalendarMonthModelService));\n  };\n\n  NbCalendarDayPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarDayPickerComponent,\n    selectors: [[\"nb-calendar-day-picker\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarDayPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.large);\n      }\n    },\n    inputs: {\n      boundingMonths: \"boundingMonths\",\n      size: \"size\",\n      setCellComponent: [\"cellComponent\", \"setCellComponent\"],\n      showWeekNumber: \"showWeekNumber\",\n      visibleDate: \"visibleDate\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      date: \"date\",\n      weekNumberSymbol: \"weekNumberSymbol\"\n    },\n    outputs: {\n      dateChange: \"dateChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 4,\n    vars: 10,\n    consts: [[3, \"weeks\", \"size\", \"weekNumberSymbol\", 4, \"ngIf\"], [1, \"days-container\"], [3, \"size\"], [3, \"data\", \"visibleDate\", \"selectedValue\", \"cellComponent\", \"min\", \"max\", \"filter\", \"size\", \"select\"], [3, \"weeks\", \"size\", \"weekNumberSymbol\"]],\n    template: function NbCalendarDayPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbCalendarDayPickerComponent_nb_calendar_week_numbers_0_Template, 1, 3, \"nb-calendar-week-numbers\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelement(2, \"nb-calendar-days-names\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"nb-calendar-picker\", 3);\n        ɵngcc0.ɵɵlistener(\"select\", function NbCalendarDayPickerComponent_Template_nb_calendar_picker_select_3_listener($event) {\n          return ctx.onSelect($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showWeekNumber);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"size\", ctx.size);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"data\", ctx.weeks)(\"visibleDate\", ctx.visibleDate)(\"selectedValue\", ctx.date)(\"cellComponent\", ctx.cellComponent)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"size\", ctx.size);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgIf, NbCalendarDaysNamesComponent, NbCalendarPickerComponent, NbCalendarWeekNumberComponent];\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex}.days-container[_ngcontent-%COMP%]{width:100%}\"],\n    changeDetection: 0\n  });\n  return NbCalendarDayPickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarDaysNamesComponent = /*#__PURE__*/(() => {\n  class NbCalendarDaysNamesComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    ngOnInit() {\n      const days = this.createDaysNames();\n      this.days = this.shiftStartOfWeek(days);\n    }\n\n    createDaysNames() {\n      return this.dateService.getDayOfWeekNames().map(this.markIfHoliday);\n    }\n\n    shiftStartOfWeek(days) {\n      for (let i = 0; i < this.dateService.getFirstDayOfWeek(); i++) {\n        days.push(days.shift());\n      }\n\n      return days;\n    }\n\n    markIfHoliday(name, i) {\n      return {\n        name,\n        isHoliday: i % 6 === 0\n      };\n    }\n\n  }\n\n  NbCalendarDaysNamesComponent.ɵfac = function NbCalendarDaysNamesComponent_Factory(t) {\n    return new (t || NbCalendarDaysNamesComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarDaysNamesComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarDaysNamesComponent,\n    selectors: [[\"nb-calendar-days-names\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarDaysNamesComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[\"class\", \"day\", 3, \"holiday\", 4, \"ngFor\", \"ngForOf\"], [1, \"day\"]],\n    template: function NbCalendarDaysNamesComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbCalendarDaysNamesComponent_div_0_Template, 2, 3, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.days);\n      }\n    },\n    directives: [ɵngcc2.NgForOf],\n    styles: [\"[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]   .day[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}\"],\n    changeDetection: 0\n  });\n  return NbCalendarDaysNamesComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarMonthCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarMonthCellComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.monthCellClass = true;\n    }\n\n    get selected() {\n      return this.dateService.isSameMonthSafe(this.date, this.selectedValue);\n    }\n\n    get today() {\n      return this.dateService.isSameMonthSafe(this.date, this.dateService.today());\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    get month() {\n      return this.dateService.getMonthName(this.date);\n    }\n\n    onClick() {\n      if (this.disabled) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.monthEnd(), this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.monthStart(), this.max) > 0;\n    }\n\n    monthStart() {\n      return this.dateService.getMonthStart(this.date);\n    }\n\n    monthEnd() {\n      return this.dateService.getMonthEnd(this.date);\n    }\n\n  }\n\n  NbCalendarMonthCellComponent.ɵfac = function NbCalendarMonthCellComponent_Factory(t) {\n    return new (t || NbCalendarMonthCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarMonthCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarMonthCellComponent,\n    selectors: [[\"nb-calendar-month-cell\"]],\n    hostVars: 10,\n    hostBindings: function NbCalendarMonthCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarMonthCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"month-cell\", ctx.monthCellClass)(\"selected\", ctx.selected)(\"today\", ctx.today)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      selectedValue: \"selectedValue\",\n      min: \"min\",\n      max: \"max\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarMonthCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.month, \" \");\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarMonthCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst MONTHS_IN_VIEW = 12;\nconst MONTHS_IN_COLUMN = 4;\nlet NbCalendarMonthPickerComponent = /*#__PURE__*/(() => {\n  class NbCalendarMonthPickerComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.monthChange = new EventEmitter();\n      this.cellComponent = NbCalendarMonthCellComponent;\n    }\n\n    set _cellComponent(cellComponent) {\n      if (cellComponent) {\n        this.cellComponent = cellComponent;\n      }\n    }\n\n    get large() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    ngOnChanges(changes) {\n      if (changes.month) {\n        this.initMonths();\n      }\n    }\n\n    initMonths() {\n      const date = this.dateService.getDate(this.month);\n      const year = this.dateService.getYear(this.month);\n      const firstMonth = this.dateService.createDate(year, 0, date);\n      const months = [firstMonth];\n\n      for (let monthIndex = 1; monthIndex < MONTHS_IN_VIEW; monthIndex++) {\n        months.push(this.dateService.addMonth(firstMonth, monthIndex));\n      }\n\n      this.months = batch(months, MONTHS_IN_COLUMN);\n    }\n\n    onSelect(month) {\n      this.monthChange.emit(month);\n    }\n\n  }\n\n  NbCalendarMonthPickerComponent.ɵfac = function NbCalendarMonthPickerComponent_Factory(t) {\n    return new (t || NbCalendarMonthPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarMonthPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarMonthPickerComponent,\n    selectors: [[\"nb-calendar-month-picker\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarMonthPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.large);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      _cellComponent: [\"cellComponent\", \"_cellComponent\"],\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      month: \"month\",\n      date: \"date\"\n    },\n    outputs: {\n      monthChange: \"monthChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 8,\n    consts: [[3, \"data\", \"min\", \"max\", \"filter\", \"selectedValue\", \"visibleDate\", \"cellComponent\", \"size\", \"select\"]],\n    template: function NbCalendarMonthPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-calendar-picker\", 0);\n        ɵngcc0.ɵɵlistener(\"select\", function NbCalendarMonthPickerComponent_Template_nb_calendar_picker_select_0_listener($event) {\n          return ctx.onSelect($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"data\", ctx.months)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"selectedValue\", ctx.date)(\"visibleDate\", ctx.month)(\"cellComponent\", ctx.cellComponent)(\"size\", ctx.size);\n      }\n    },\n    directives: function () {\n      return [NbCalendarPickerComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarMonthPickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarYearModelService = /*#__PURE__*/(() => {\n  class NbCalendarYearModelService {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.yearsInView = 12;\n      this.yearsInRow = 4;\n    }\n\n    getYearsInView() {\n      return this.yearsInView;\n    }\n\n    getYearsInRow() {\n      return this.yearsInRow;\n    }\n\n    getViewYears(viewYear) {\n      const year = this.dateService.getYear(viewYear);\n      let viewStartYear;\n\n      if (year >= 0) {\n        viewStartYear = year - year % this.yearsInView;\n      } else {\n        viewStartYear = year - (year % this.yearsInView + this.yearsInView);\n      }\n\n      const years = range(this.yearsInView).map(i => this.copyWithYear(viewStartYear + i, viewYear));\n      return batch(years, this.yearsInRow);\n    }\n\n    copyWithYear(year, date) {\n      return this.dateService.createDate(year, this.dateService.getMonth(date), this.dateService.getDate(date));\n    }\n\n  }\n\n  NbCalendarYearModelService.ɵfac = function NbCalendarYearModelService_Factory(t) {\n    return new (t || NbCalendarYearModelService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbCalendarYearModelService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbCalendarYearModelService,\n    factory: NbCalendarYearModelService.ɵfac\n  });\n  return NbCalendarYearModelService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarViewModeComponent = /*#__PURE__*/(() => {\n  class NbCalendarViewModeComponent {\n    constructor(dateService, yearModelService) {\n      this.dateService = dateService;\n      this.yearModelService = yearModelService;\n      this.viewMode = NbCalendarViewMode.DATE;\n      this.changeMode = new EventEmitter(true);\n    }\n\n    getText() {\n      if (!this.date) {\n        return '';\n      }\n\n      switch (this.viewMode) {\n        case NbCalendarViewMode.DATE:\n          {\n            const month = this.dateService.getMonthName(this.date, TranslationWidth.Wide);\n            const year = this.dateService.getYear(this.date);\n            return `${month} ${year}`;\n          }\n\n        case NbCalendarViewMode.MONTH:\n          return `${this.dateService.getYear(this.date)}`;\n\n        case NbCalendarViewMode.YEAR:\n          return `${this.getFirstYear()} - ${this.getLastYear()}`;\n      }\n    }\n\n    getIcon() {\n      if (this.viewMode === NbCalendarViewMode.DATE) {\n        return 'chevron-down-outline';\n      }\n\n      return 'chevron-up-outline';\n    }\n\n    getFirstYear() {\n      const years = this.yearModelService.getViewYears(this.date);\n      return this.dateService.getYear(years[0][0]).toString();\n    }\n\n    getLastYear() {\n      const years = this.yearModelService.getViewYears(this.date);\n      const lastRow = years[years.length - 1];\n      const lastYear = lastRow[lastRow.length - 1];\n      return this.dateService.getYear(lastYear).toString();\n    }\n\n  }\n\n  NbCalendarViewModeComponent.ɵfac = function NbCalendarViewModeComponent_Factory(t) {\n    return new (t || NbCalendarViewModeComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService));\n  };\n\n  NbCalendarViewModeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarViewModeComponent,\n    selectors: [[\"nb-calendar-view-mode\"]],\n    inputs: {\n      viewMode: \"viewMode\",\n      date: \"date\"\n    },\n    outputs: {\n      changeMode: \"changeMode\"\n    },\n    decls: 3,\n    vars: 2,\n    consts: [[\"nbButton\", \"\", \"ghost\", \"\", \"status\", \"basic\", 3, \"click\"], [\"pack\", \"nebular-essentials\", 3, \"icon\"]],\n    template: function NbCalendarViewModeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarViewModeComponent_Template_button_click_0_listener() {\n          return ctx.changeMode.emit();\n        });\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelement(2, \"nb-icon\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.getText(), \" \");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"icon\", ctx.getIcon());\n      }\n    },\n    directives: [NbButtonComponent, NbIconComponent],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarViewModeComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarPageableNavigationComponent = /*#__PURE__*/(() => {\n  class NbCalendarPageableNavigationComponent {\n    constructor(directionService) {\n      this.directionService = directionService;\n      this.next = new EventEmitter();\n      this.prev = new EventEmitter();\n    }\n\n    get isLtr() {\n      return this.directionService.isLtr();\n    }\n\n  }\n\n  NbCalendarPageableNavigationComponent.ɵfac = function NbCalendarPageableNavigationComponent_Factory(t) {\n    return new (t || NbCalendarPageableNavigationComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService));\n  };\n\n  NbCalendarPageableNavigationComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarPageableNavigationComponent,\n    selectors: [[\"nb-calendar-pageable-navigation\"]],\n    outputs: {\n      next: \"next\",\n      prev: \"prev\"\n    },\n    decls: 4,\n    vars: 2,\n    consts: [[\"nbButton\", \"\", \"ghost\", \"\", \"status\", \"basic\", 1, \"prev-month\", 3, \"click\"], [\"pack\", \"nebular-essentials\", 3, \"icon\"], [\"nbButton\", \"\", \"ghost\", \"\", \"status\", \"basic\", 1, \"next-month\", 3, \"click\"]],\n    template: function NbCalendarPageableNavigationComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarPageableNavigationComponent_Template_button_click_0_listener() {\n          return ctx.prev.emit();\n        });\n        ɵngcc0.ɵɵelement(1, \"nb-icon\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"button\", 2);\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarPageableNavigationComponent_Template_button_click_2_listener() {\n          return ctx.next.emit();\n        });\n        ɵngcc0.ɵɵelement(3, \"nb-icon\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"icon\", ctx.isLtr ? \"chevron-left-outline\" : \"chevron-right-outline\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"icon\", ctx.isLtr ? \"chevron-right-outline\" : \"chevron-left-outline\");\n      }\n    },\n    directives: [NbButtonComponent, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center;justify-content:flex-start}\"]\n  });\n  return NbCalendarPageableNavigationComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarPickerComponent = /*#__PURE__*/(() => {\n  class NbCalendarPickerComponent {\n    constructor() {\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n  }\n\n  NbCalendarPickerComponent.ɵfac = function NbCalendarPickerComponent_Factory(t) {\n    return new (t || NbCalendarPickerComponent)();\n  };\n\n  NbCalendarPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarPickerComponent,\n    selectors: [[\"nb-calendar-picker\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      data: \"data\",\n      visibleDate: \"visibleDate\",\n      selectedValue: \"selectedValue\",\n      cellComponent: \"cellComponent\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[3, \"row\", \"visibleDate\", \"selectedValue\", \"component\", \"min\", \"max\", \"filter\", \"size\", \"select\", 4, \"ngFor\", \"ngForOf\"], [3, \"row\", \"visibleDate\", \"selectedValue\", \"component\", \"min\", \"max\", \"filter\", \"size\", \"select\"]],\n    template: function NbCalendarPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbCalendarPickerComponent_nb_calendar_picker_row_0_Template, 1, 8, \"nb-calendar-picker-row\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.data);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgForOf, NbCalendarPickerRowComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarPickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarPickerRowComponent = /*#__PURE__*/(() => {\n  class NbCalendarPickerRowComponent {\n    constructor(cfr) {\n      this.cfr = cfr;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter();\n    }\n\n    ngOnChanges() {\n      const factory = this.cfr.resolveComponentFactory(this.component);\n      this.containerRef.clear();\n      this.row.forEach(date => {\n        const component = this.containerRef.createComponent(factory);\n        this.patchWithContext(component.instance, date);\n        component.changeDetectorRef.detectChanges();\n      });\n    }\n\n    patchWithContext(component, date) {\n      component.visibleDate = this.visibleDate;\n      component.selectedValue = this.selectedValue;\n      component.date = date;\n      component.min = this.min;\n      component.max = this.max;\n      component.filter = this.filter;\n      component.size = this.size;\n      component.select.subscribe(this.select.emit.bind(this.select));\n    }\n\n  }\n\n  NbCalendarPickerRowComponent.ɵfac = function NbCalendarPickerRowComponent_Factory(t) {\n    return new (t || NbCalendarPickerRowComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver));\n  };\n\n  NbCalendarPickerRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarPickerRowComponent,\n    selectors: [[\"nb-calendar-picker-row\"]],\n    viewQuery: function NbCalendarPickerRowComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(TemplateRef, 7, ViewContainerRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.containerRef = _t.first);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      row: \"row\",\n      selectedValue: \"selectedValue\",\n      visibleDate: \"visibleDate\",\n      component: \"component\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 0,\n    template: function NbCalendarPickerRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbCalendarPickerRowComponent_ng_template_0_Template, 0, 0, \"ng-template\");\n      }\n    },\n    styles: [\"[_nghost-%COMP%] {\\n      display: flex;\\n      justify-content: space-between;\\n    }\"],\n    changeDetection: 0\n  });\n  return NbCalendarPickerRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarYearCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarYearCellComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.yearCellClass = true;\n    }\n\n    get selected() {\n      return this.dateService.isSameYearSafe(this.date, this.selectedValue);\n    }\n\n    get today() {\n      return this.dateService.isSameYearSafe(this.date, this.dateService.today());\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    get year() {\n      return this.dateService.getYear(this.date);\n    }\n\n    onClick() {\n      if (this.disabled) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.yearEnd(), this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.yearStart(), this.max) > 0;\n    }\n\n    yearStart() {\n      return this.dateService.getYearStart(this.date);\n    }\n\n    yearEnd() {\n      return this.dateService.getYearEnd(this.date);\n    }\n\n  }\n\n  NbCalendarYearCellComponent.ɵfac = function NbCalendarYearCellComponent_Factory(t) {\n    return new (t || NbCalendarYearCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarYearCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarYearCellComponent,\n    selectors: [[\"nb-calendar-year-cell\"]],\n    hostVars: 10,\n    hostBindings: function NbCalendarYearCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarYearCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"year-cell\", ctx.yearCellClass)(\"selected\", ctx.selected)(\"today\", ctx.today)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      min: \"min\",\n      max: \"max\",\n      selectedValue: \"selectedValue\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarYearCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.year, \" \");\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarYearCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarYearPickerComponent = /*#__PURE__*/(() => {\n  class NbCalendarYearPickerComponent {\n    constructor(dateService, yearModelService) {\n      this.dateService = dateService;\n      this.yearModelService = yearModelService;\n      this.cellComponent = NbCalendarYearCellComponent;\n      this.size = NbCalendarSize.MEDIUM;\n      this.yearChange = new EventEmitter();\n    }\n\n    set _cellComponent(cellComponent) {\n      if (cellComponent) {\n        this.cellComponent = cellComponent;\n      }\n    }\n\n    get large() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    ngOnChanges() {\n      this.years = this.yearModelService.getViewYears(this.year);\n    }\n\n    onSelect(year) {\n      this.yearChange.emit(year);\n    }\n\n  }\n\n  NbCalendarYearPickerComponent.ɵfac = function NbCalendarYearPickerComponent_Factory(t) {\n    return new (t || NbCalendarYearPickerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService));\n  };\n\n  NbCalendarYearPickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarYearPickerComponent,\n    selectors: [[\"nb-calendar-year-picker\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarYearPickerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.large);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      _cellComponent: [\"cellComponent\", \"_cellComponent\"],\n      date: \"date\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      year: \"year\"\n    },\n    outputs: {\n      yearChange: \"yearChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 8,\n    consts: [[3, \"data\", \"min\", \"max\", \"filter\", \"selectedValue\", \"visibleDate\", \"cellComponent\", \"size\", \"select\"]],\n    template: function NbCalendarYearPickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-calendar-picker\", 0);\n        ɵngcc0.ɵɵlistener(\"select\", function NbCalendarYearPickerComponent_Template_nb_calendar_picker_select_0_listener($event) {\n          return ctx.onSelect($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"data\", ctx.years)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"selectedValue\", ctx.date)(\"visibleDate\", ctx.year)(\"cellComponent\", ctx.cellComponent)(\"size\", ctx.size);\n      }\n    },\n    directives: [NbCalendarPickerComponent],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarYearPickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarWeekNumberComponent = /*#__PURE__*/(() => {\n  class NbCalendarWeekNumberComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    ngOnChanges(changes) {\n      if (changes.weeks) {\n        this.weekNumbers = this.getWeeks();\n      }\n    }\n\n    getWeeks() {\n      return this.weeks.map(week => {\n        // Find last defined day as week could contain null days in case\n        // boundingMonth set to false\n        const lastDay = [...week].reverse().find(day => !!day); // Use last day of the week to determine week number.\n        // This way weeks which span between sibling years is marked first\n\n        return this.dateService.getWeekNumber(lastDay);\n      });\n    }\n\n  }\n\n  NbCalendarWeekNumberComponent.ɵfac = function NbCalendarWeekNumberComponent_Factory(t) {\n    return new (t || NbCalendarWeekNumberComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarWeekNumberComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarWeekNumberComponent,\n    selectors: [[\"nb-calendar-week-numbers\"]],\n    hostVars: 2,\n    hostBindings: function NbCalendarWeekNumberComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      weeks: \"weeks\",\n      size: \"size\",\n      weekNumberSymbol: \"weekNumberSymbol\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"sign-container\"], [1, \"sign\"], [\"class\", \"week-number\", 4, \"ngFor\", \"ngForOf\"], [1, \"week-number\"]],\n    template: function NbCalendarWeekNumberComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbCalendarWeekNumberComponent_div_3_Template, 2, 1, \"div\", 2);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.weekNumberSymbol);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.weekNumbers);\n      }\n    },\n    directives: [ɵngcc2.NgForOf],\n    styles: [_c8],\n    changeDetection: 0\n  });\n  return NbCalendarWeekNumberComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbNativeDateService` is basic implementation of `NbDateService` using\n * native js date objects and angular localization services.\n * */\n\n\nlet NbNativeDateService = /*#__PURE__*/(() => {\n  class NbNativeDateService extends NbDateService {\n    constructor(locale) {\n      super();\n      this.setLocale(locale);\n    }\n\n    setLocale(locale) {\n      super.setLocale(locale);\n      this.datePipe = new DatePipe(locale);\n    }\n\n    setHours(date, hour) {\n      const result = this.clone(date);\n      result.setHours(hour);\n      return result;\n    }\n\n    setMinutes(date, minute) {\n      const result = this.clone(date);\n      result.setMinutes(minute);\n      return result;\n    }\n\n    setSeconds(date, second) {\n      const result = this.clone(date);\n      result.setSeconds(second);\n      return result;\n    }\n\n    setMilliseconds(date, second) {\n      const result = this.clone(date);\n      result.setMilliseconds(second);\n      return result;\n    }\n\n    isValidDateString(date, format) {\n      return !isNaN(this.parse(date, format).getTime());\n    }\n\n    isValidTimeString(date, format) {\n      return this.isValidDateString(date, format);\n    }\n\n    today() {\n      return new Date();\n    }\n\n    getLocaleTimeFormat() {\n      return getLocaleTimeFormat(this.locale, FormatWidth.Short);\n    }\n\n    getDate(date) {\n      return date.getDate();\n    }\n\n    getMonth(date) {\n      return date.getMonth();\n    }\n\n    getYear(date) {\n      return date.getFullYear();\n    }\n\n    getDayOfWeek(date) {\n      return date.getDay();\n    }\n    /**\n     * returns first day of the week, it can be 1 if week starts from monday\n     * and 0 if from sunday and so on.\n     * */\n\n\n    getFirstDayOfWeek() {\n      return getLocaleFirstDayOfWeek(this.locale);\n    }\n\n    getMonthName(date, style$$1 = TranslationWidth.Abbreviated) {\n      const index = date.getMonth();\n      return this.getMonthNameByIndex(index, style$$1);\n    }\n\n    getMonthNameByIndex(index, style$$1 = TranslationWidth.Abbreviated) {\n      return getLocaleMonthNames(this.locale, FormStyle.Format, style$$1)[index];\n    }\n\n    getDayOfWeekNames() {\n      return [...getLocaleDayNames(this.locale, FormStyle.Format, TranslationWidth.Short)];\n    }\n\n    format(date, format) {\n      return this.datePipe.transform(date, format);\n    }\n    /**\n     * We haven't got capability to parse date using formatting without third party libraries.\n     * */\n\n\n    parse(date, format) {\n      return new Date(Date.parse(date));\n    }\n\n    addDay(date, num) {\n      return this.createDate(date.getFullYear(), date.getMonth(), date.getDate() + num);\n    }\n\n    addMonth(date, num) {\n      const month = this.createDate(date.getFullYear(), date.getMonth() + num, 1); // In case of date has more days than calculated month js Date will change that month to the next one\n      // because of the date overflow.\n\n      month.setDate(Math.min(date.getDate(), this.getMonthEnd(month).getDate()));\n      return month;\n    }\n\n    addMinutes(date, minute) {\n      const result = new Date(date);\n      result.setMinutes(date.getMinutes() + minute);\n      return result;\n    }\n\n    addHours(date, hour) {\n      const result = new Date(date);\n      result.setHours(date.getHours() + hour);\n      return result;\n    }\n\n    getHours(date) {\n      return date.getHours();\n    }\n\n    getMinutes(date) {\n      return date.getMinutes();\n    }\n\n    getSeconds(date) {\n      return date.getSeconds();\n    }\n\n    getMilliseconds(date) {\n      return date.getMilliseconds();\n    }\n\n    addYear(date, num) {\n      return this.createDate(date.getFullYear() + num, date.getMonth(), date.getDate());\n    }\n\n    clone(date) {\n      return new Date(date.getTime());\n    }\n\n    compareDates(date1, date2) {\n      return date1.getTime() - date2.getTime();\n    }\n\n    createDate(year, month, date) {\n      const result = new Date(year, month, date); // We need to correct for the fact that JS native Date treats years in range [0, 99] as\n      // abbreviations for 19xx.\n\n      if (year >= 0 && year < 100) {\n        result.setFullYear(result.getFullYear() - 1900);\n      }\n\n      return result;\n    }\n\n    getMonthEnd(date) {\n      return this.createDate(date.getFullYear(), date.getMonth() + 1, 0);\n    }\n\n    getMonthStart(date) {\n      return this.createDate(date.getFullYear(), date.getMonth(), 1);\n    }\n\n    getNumberOfDaysInMonth(date) {\n      return this.getMonthEnd(date).getDate();\n    }\n\n    getYearEnd(date) {\n      return this.createDate(date.getFullYear(), 11, 31);\n    }\n\n    getYearStart(date) {\n      return this.createDate(date.getFullYear(), 0, 1);\n    }\n\n    valueOf(date) {\n      return date.valueOf();\n    }\n\n    isSameDay(date1, date2) {\n      return this.isSameMonth(date1, date2) && date1.getDate() === date2.getDate();\n    }\n\n    isSameMonth(date1, date2) {\n      return this.isSameYear(date1, date2) && date1.getMonth() === date2.getMonth();\n    }\n\n    isSameYear(date1, date2) {\n      return date1.getFullYear() === date2.getFullYear();\n    }\n\n    getId() {\n      return 'native';\n    }\n\n    getWeekNumber(date) {\n      return parseInt(this.datePipe.transform(date, 'w'), 10);\n    }\n\n    getDateFormat() {\n      return 'yyyy-MM-dd';\n    }\n\n    getTwelveHoursFormat() {\n      return 'hh:mm a';\n    }\n\n  }\n\n  NbNativeDateService.ɵfac = function NbNativeDateService_Factory(t) {\n    return new (t || NbNativeDateService)(ɵngcc0.ɵɵinject(LOCALE_ID));\n  };\n\n  NbNativeDateService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbNativeDateService,\n    factory: NbNativeDateService.ɵfac\n  });\n  return NbNativeDateService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbCalendarTimeModelService = /*#__PURE__*/(() => {\n  class NbCalendarTimeModelService {\n    constructor(dateService) {\n      this.dateService = dateService;\n      this.MINUTES_AND_SECONDS = 60;\n    }\n\n    getHoursRange(step = this.MINUTES_AND_SECONDS) {\n      let date = this.getResetTime();\n      const endDate = this.dateService.addDay(date, 1);\n      const result = [];\n\n      while (this.dateService.compareDates(date, endDate) < 0) {\n        result.push(date);\n        date = this.dateService.addMinutes(date, step);\n      }\n\n      return result;\n    }\n\n    getResetTime() {\n      let today = this.dateService.today();\n      today = this.dateService.setHours(today, 0);\n      today = this.dateService.setMinutes(today, 0);\n      today = this.dateService.setSeconds(today, 0);\n      today = this.dateService.setMilliseconds(today, 0);\n      return today;\n    }\n\n    paddToTwoSymbols(n) {\n      if (n < 10) {\n        return '0' + n;\n      }\n\n      return n.toString();\n    }\n\n    buildDateFormat(twelveHoursFormat, withSeconds = false) {\n      if (twelveHoursFormat) {\n        return `${this.dateService.getDateFormat()} ${this.dateService.getTwelveHoursFormat()}`;\n      }\n\n      if (withSeconds) {\n        return `${this.dateService.getDateFormat()} ${this.dateService.getTwentyFourHoursFormatWithSeconds()}`;\n      }\n\n      return `${this.dateService.getDateFormat()} ${this.dateService.getTwentyFourHoursFormat()}`;\n    }\n\n  }\n\n  NbCalendarTimeModelService.ɵfac = function NbCalendarTimeModelService_Factory(t) {\n    return new (t || NbCalendarTimeModelService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbCalendarTimeModelService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbCalendarTimeModelService,\n    factory: NbCalendarTimeModelService.ɵfac\n  });\n  return NbCalendarTimeModelService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbCalendarActionsComponent = /*#__PURE__*/(() => {\n  class NbCalendarActionsComponent {\n    constructor() {\n      this._applyButtonText = 'ok';\n      this._currentTimeButtonText = 'now';\n      this.setCurrentTime = new EventEmitter();\n      this.saveValue = new EventEmitter();\n    }\n\n    set applyButtonText(value) {\n      if (value) {\n        this._applyButtonText = value;\n      }\n    }\n\n    get applyText() {\n      return this._applyButtonText;\n    }\n\n    set currentTimeButtonText(value) {\n      if (value) {\n        this._currentTimeButtonText = value;\n      }\n    }\n\n    get currentTimeText() {\n      return this._currentTimeButtonText;\n    }\n\n  }\n\n  NbCalendarActionsComponent.ɵfac = function NbCalendarActionsComponent_Factory(t) {\n    return new (t || NbCalendarActionsComponent)();\n  };\n\n  NbCalendarActionsComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarActionsComponent,\n    selectors: [[\"nb-calendar-actions\"]],\n    inputs: {\n      applyButtonText: \"applyButtonText\",\n      currentTimeButtonText: \"currentTimeButtonText\"\n    },\n    outputs: {\n      setCurrentTime: \"setCurrentTime\",\n      saveValue: \"saveValue\"\n    },\n    decls: 4,\n    vars: 2,\n    consts: [[\"nbButton\", \"\", \"ghost\", \"\", \"status\", \"primary\", \"size\", \"small\", 3, \"click\"], [\"nbButton\", \"\", \"status\", \"primary\", \"size\", \"small\", 3, \"click\"]],\n    template: function NbCalendarActionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarActionsComponent_Template_button_click_0_listener() {\n          return ctx.setCurrentTime.emit();\n        });\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarActionsComponent_Template_button_click_2_listener() {\n          return ctx.saveValue.emit();\n        });\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.currentTimeText, \"\");\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.applyText, \"\");\n      }\n    },\n    directives: [NbButtonComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex;justify-content:space-between}\"],\n    changeDetection: 0\n  });\n  return NbCalendarActionsComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst SERVICES = [{\n  provide: NbDateService,\n  useClass: NbNativeDateService\n}, DatePipe, NbCalendarMonthModelService, NbCalendarYearModelService, NbCalendarTimeModelService];\nconst COMPONENTS = [NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDaysNamesComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent, NbCalendarDayPickerComponent, NbCalendarDayCellComponent, NbCalendarActionsComponent, NbCalendarMonthCellComponent, NbCalendarYearCellComponent, NbCalendarPickerRowComponent, NbCalendarPickerComponent, NbCalendarWeekNumberComponent];\n/**\n * `NbCalendarKitModule` is a module that contains multiple useful components for building custom calendars.\n * So if you think our calendars is not enough powerful for you just use calendar-kit and build your own calendar!\n *\n * Available components:\n * - `NbCalendarDayPicker`\n * - `NbCalendarDayCell`\n * - `NbCalendarMonthPicker`\n * - `NbCalendarMonthCell`\n * - `NbCalendarYearPicker`\n * - `NbCalendarYearCell`\n * - `NbCalendarViewModeComponent`\n * - `NbCalendarPageableNavigation`\n *\n * For example you can easily build full calendar:\n * @stacked-example(Full calendar, calendar-kit/calendar-kit-full-calendar.component)\n * */\n\nlet NbCalendarKitModule = /*#__PURE__*/(() => {\n  class NbCalendarKitModule {}\n\n  NbCalendarKitModule.ɵfac = function NbCalendarKitModule_Factory(t) {\n    return new (t || NbCalendarKitModule)();\n  };\n\n  NbCalendarKitModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCalendarKitModule\n  });\n  NbCalendarKitModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [...SERVICES],\n    imports: [[NbSharedModule, NbButtonModule, NbIconModule]]\n  });\n  return NbCalendarKitModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarKitModule, {\n    declarations: [NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDaysNamesComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent, NbCalendarDayPickerComponent, NbCalendarDayCellComponent, NbCalendarActionsComponent, NbCalendarMonthCellComponent, NbCalendarYearCellComponent, NbCalendarPickerRowComponent, NbCalendarPickerComponent, NbCalendarWeekNumberComponent],\n    imports: [NbSharedModule, NbButtonModule, NbIconModule],\n    exports: [NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDaysNamesComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent, NbCalendarDayPickerComponent, NbCalendarDayCellComponent, NbCalendarActionsComponent, NbCalendarMonthCellComponent, NbCalendarYearCellComponent, NbCalendarPickerRowComponent, NbCalendarPickerComponent, NbCalendarWeekNumberComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The basis for calendar and range calendar components.\n * Encapsulates common behavior - store calendar state and perform navigation\n * between pickers.\n * */\n\n\nlet NbBaseCalendarComponent = /*#__PURE__*/(() => {\n  class NbBaseCalendarComponent {\n    constructor(dateService, yearModelService) {\n      this.dateService = dateService;\n      this.yearModelService = yearModelService;\n      /**\n       * Defines if we should render previous and next months\n       * in the current month view.\n       * */\n\n      this.boundingMonth = true;\n      /**\n       * Defines active view for calendar.\n       * */\n\n      this.activeViewMode = NbCalendarViewMode.DATE;\n      /**\n       * Size of the calendar and entire components.\n       * Can be 'medium' which is default or 'large'.\n       * */\n\n      this.size = NbCalendarSize.MEDIUM;\n      /**\n       * Determines whether we should show calendar navigation or not.\n       * */\n\n      this.showNavigation = true;\n      this._showWeekNumber = false;\n      /**\n       * Emits date when selected.\n       * */\n\n      this.dateChange = new EventEmitter();\n      this.ViewMode = NbCalendarViewMode;\n    }\n    /**\n     * Determines should we show week numbers column.\n     * False by default.\n     * */\n\n\n    get showWeekNumber() {\n      return this._showWeekNumber;\n    }\n\n    set showWeekNumber(value) {\n      this._showWeekNumber = convertToBoolProperty(value);\n    }\n\n    ngOnInit() {\n      if (!this.visibleDate) {\n        this.visibleDate = this.dateService.today();\n      }\n    }\n\n    get large() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    setViewMode(viewMode) {\n      this.activeViewMode = viewMode;\n    }\n\n    setVisibleDate(visibleDate) {\n      this.visibleDate = visibleDate;\n    }\n\n    prevMonth() {\n      this.changeVisibleMonth(-1);\n    }\n\n    nextMonth() {\n      this.changeVisibleMonth(1);\n    }\n\n    prevYear() {\n      this.changeVisibleYear(-1);\n    }\n\n    nextYear() {\n      this.changeVisibleYear(1);\n    }\n\n    prevYears() {\n      this.changeVisibleYears(-1);\n    }\n\n    nextYears() {\n      this.changeVisibleYears(1);\n    }\n\n    navigatePrev() {\n      switch (this.activeViewMode) {\n        case NbCalendarViewMode.DATE:\n          return this.prevMonth();\n\n        case NbCalendarViewMode.MONTH:\n          return this.prevYear();\n\n        case NbCalendarViewMode.YEAR:\n          return this.prevYears();\n      }\n    }\n\n    navigateNext() {\n      switch (this.activeViewMode) {\n        case NbCalendarViewMode.DATE:\n          return this.nextMonth();\n\n        case NbCalendarViewMode.MONTH:\n          return this.nextYear();\n\n        case NbCalendarViewMode.YEAR:\n          return this.nextYears();\n      }\n    }\n\n    onChangeViewMode() {\n      if (this.activeViewMode === NbCalendarViewMode.DATE) {\n        return this.setViewMode(NbCalendarViewMode.YEAR);\n      }\n\n      this.setViewMode(NbCalendarViewMode.DATE);\n    }\n\n    changeVisibleMonth(direction) {\n      this.visibleDate = this.dateService.addMonth(this.visibleDate, direction);\n    }\n\n    changeVisibleYear(direction) {\n      this.visibleDate = this.dateService.addYear(this.visibleDate, direction);\n    }\n\n    changeVisibleYears(direction) {\n      this.visibleDate = this.dateService.addYear(this.visibleDate, direction * this.yearModelService.getYearsInView());\n    }\n\n  }\n\n  NbBaseCalendarComponent.ɵfac = function NbBaseCalendarComponent_Factory(t) {\n    return new (t || NbBaseCalendarComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NbCalendarYearModelService));\n  };\n\n  NbBaseCalendarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbBaseCalendarComponent,\n    selectors: [[\"nb-base-calendar\"]],\n    hostVars: 6,\n    hostBindings: function NbBaseCalendarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"has-navigation\", ctx.showNavigation)(\"has-week-number\", ctx.showWeekNumber)(\"size-large\", ctx.large);\n      }\n    },\n    inputs: {\n      boundingMonth: \"boundingMonth\",\n      activeViewMode: [\"startView\", \"activeViewMode\"],\n      size: \"size\",\n      showNavigation: \"showNavigation\",\n      showWeekNumber: \"showWeekNumber\",\n      visibleDate: \"visibleDate\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      dayCellComponent: \"dayCellComponent\",\n      monthCellComponent: \"monthCellComponent\",\n      yearCellComponent: \"yearCellComponent\",\n      date: \"date\",\n      weekNumberSymbol: \"weekNumberSymbol\"\n    },\n    outputs: {\n      dateChange: \"dateChange\"\n    },\n    decls: 6,\n    vars: 5,\n    consts: [[\"class\", \"calendar-navigation\", 4, \"ngIf\"], [3, \"ngSwitch\"], [3, \"boundingMonths\", \"cellComponent\", \"min\", \"max\", \"filter\", \"visibleDate\", \"size\", \"date\", \"showWeekNumber\", \"weekNumberSymbol\", \"dateChange\", 4, \"ngSwitchCase\"], [3, \"cellComponent\", \"date\", \"min\", \"max\", \"filter\", \"size\", \"year\", \"yearChange\", 4, \"ngSwitchCase\"], [3, \"cellComponent\", \"min\", \"max\", \"filter\", \"size\", \"month\", \"date\", \"monthChange\", 4, \"ngSwitchCase\"], [1, \"calendar-navigation\"], [3, \"date\", \"viewMode\", \"changeMode\"], [3, \"prev\", \"next\"], [3, \"boundingMonths\", \"cellComponent\", \"min\", \"max\", \"filter\", \"visibleDate\", \"size\", \"date\", \"showWeekNumber\", \"weekNumberSymbol\", \"dateChange\"], [3, \"cellComponent\", \"date\", \"min\", \"max\", \"filter\", \"size\", \"year\", \"yearChange\"], [3, \"cellComponent\", \"min\", \"max\", \"filter\", \"size\", \"month\", \"date\", \"monthChange\"]],\n    template: function NbBaseCalendarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-card\");\n        ɵngcc0.ɵɵtemplate(1, NbBaseCalendarComponent_nb_card_header_1_Template, 3, 2, \"nb-card-header\", 0);\n        ɵngcc0.ɵɵelementStart(2, \"nb-card-body\", 1);\n        ɵngcc0.ɵɵtemplate(3, NbBaseCalendarComponent_nb_calendar_day_picker_3_Template, 1, 10, \"nb-calendar-day-picker\", 2);\n        ɵngcc0.ɵɵtemplate(4, NbBaseCalendarComponent_nb_calendar_year_picker_4_Template, 1, 7, \"nb-calendar-year-picker\", 3);\n        ɵngcc0.ɵɵtemplate(5, NbBaseCalendarComponent_nb_calendar_month_picker_5_Template, 1, 7, \"nb-calendar-month-picker\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showNavigation);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitch\", ctx.activeViewMode);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.ViewMode.DATE);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.ViewMode.YEAR);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngSwitchCase\", ctx.ViewMode.MONTH);\n      }\n    },\n    directives: [NbCardComponent, ɵngcc2.NgIf, NbCardBodyComponent, ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase, NbCardHeaderComponent, NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDayPickerComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent],\n    encapsulation: 2\n  });\n  return NbBaseCalendarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbBaseCalendarModule = /*#__PURE__*/(() => {\n  class NbBaseCalendarModule {}\n\n  NbBaseCalendarModule.ɵfac = function NbBaseCalendarModule_Factory(t) {\n    return new (t || NbBaseCalendarModule)();\n  };\n\n  NbBaseCalendarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbBaseCalendarModule\n  });\n  NbBaseCalendarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbCalendarKitModule, NbSharedModule, NbCardModule]]\n  });\n  return NbBaseCalendarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbBaseCalendarModule, {\n    declarations: [NbBaseCalendarComponent],\n    imports: [NbCalendarKitModule, NbSharedModule, NbCardModule],\n    exports: [NbBaseCalendarComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarModule = /*#__PURE__*/(() => {\n  class NbCalendarModule {}\n\n  NbCalendarModule.ɵfac = function NbCalendarModule_Factory(t) {\n    return new (t || NbCalendarModule)();\n  };\n\n  NbCalendarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCalendarModule\n  });\n  NbCalendarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbBaseCalendarModule]]\n  });\n  return NbCalendarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarModule, {\n    declarations: [NbCalendarComponent],\n    imports: [NbBaseCalendarModule],\n    exports: [NbCalendarComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbBaseCalendarRangeCell {\n  get hasRange() {\n    return !!(this.selectedValue && this.selectedValue.start && this.selectedValue.end);\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarRangeDayCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarRangeDayCellComponent extends NbBaseCalendarRangeCell {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.rangeCellClass = true;\n      this.dayCellClass = true;\n    }\n\n    get inRange() {\n      if (this.date && this.hasRange) {\n        return this.isInRange(this.date, this.selectedValue);\n      }\n\n      return false;\n    }\n\n    get start() {\n      return this.date && this.hasRange && this.dateService.isSameDay(this.date, this.selectedValue.start);\n    }\n\n    get end() {\n      return this.date && this.hasRange && this.dateService.isSameDay(this.date, this.selectedValue.end);\n    }\n\n    get today() {\n      return this.date && this.dateService.isSameDay(this.date, this.dateService.today());\n    }\n\n    get boundingMonth() {\n      return !this.dateService.isSameMonthSafe(this.date, this.visibleDate);\n    }\n\n    get selected() {\n      if (this.inRange) {\n        return true;\n      }\n\n      if (this.selectedValue) {\n        return this.dateService.isSameDaySafe(this.date, this.selectedValue.start);\n      }\n    }\n\n    get empty() {\n      return !this.date;\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax() || this.dontFitFilter();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    get day() {\n      return this.date && this.dateService.getDate(this.date);\n    }\n\n    onClick() {\n      if (this.disabled || this.empty) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.date, this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.date, this.max) > 0;\n    }\n\n    dontFitFilter() {\n      return this.date && this.filter && !this.filter(this.date);\n    }\n\n    isInRange(date, {\n      start,\n      end\n    }) {\n      const isGreaterThanStart = this.dateService.compareDates(this.date, start) >= 0;\n      const isLessThanEnd = this.dateService.compareDates(this.date, end) <= 0;\n      return isGreaterThanStart && isLessThanEnd;\n    }\n\n  }\n\n  NbCalendarRangeDayCellComponent.ɵfac = function NbCalendarRangeDayCellComponent_Factory(t) {\n    return new (t || NbCalendarRangeDayCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarRangeDayCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarRangeDayCellComponent,\n    selectors: [[\"nb-calendar-range-day-cell\"]],\n    hostVars: 22,\n    hostBindings: function NbCalendarRangeDayCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarRangeDayCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"range-cell\", ctx.rangeCellClass)(\"day-cell\", ctx.dayCellClass)(\"in-range\", ctx.inRange)(\"start\", ctx.start)(\"end\", ctx.end)(\"today\", ctx.today)(\"bounding-month\", ctx.boundingMonth)(\"selected\", ctx.selected)(\"empty\", ctx.empty)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      selectedValue: \"selectedValue\",\n      visibleDate: \"visibleDate\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarRangeDayCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.day);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarRangeDayCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarRangeYearCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarRangeYearCellComponent extends NbBaseCalendarRangeCell {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.yearCellClass = true;\n      this.rangeCellClass = true;\n    }\n\n    get inRange() {\n      return this.hasRange && this.isInRange(this.date, this.selectedValue);\n    }\n\n    get rangeStart() {\n      return this.hasRange && this.dateService.isSameYear(this.date, this.selectedValue.start);\n    }\n\n    get rangeEnd() {\n      return this.hasRange && this.dateService.isSameYear(this.date, this.selectedValue.end);\n    }\n\n    get selected() {\n      if (this.inRange) {\n        return true;\n      }\n\n      if (this.selectedValue) {\n        return this.dateService.isSameYearSafe(this.date, this.selectedValue.start);\n      }\n    }\n\n    get today() {\n      return this.dateService.isSameYear(this.date, this.dateService.today());\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    get year() {\n      return this.dateService.getYear(this.date);\n    }\n\n    onClick() {\n      if (this.disabled) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.yearEnd(), this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.yearStart(), this.max) > 0;\n    }\n\n    yearStart() {\n      return this.dateService.getYearStart(this.date);\n    }\n\n    yearEnd() {\n      return this.dateService.getYearEnd(this.date);\n    }\n\n    isInRange(date, {\n      start,\n      end\n    }) {\n      if (start && end) {\n        const cellYear = this.dateService.getYear(date);\n        const startYear = this.dateService.getYear(start);\n        const endYear = this.dateService.getYear(end);\n        return cellYear >= startYear && cellYear <= endYear;\n      }\n\n      return this.dateService.isSameYear(date, start);\n    }\n\n  }\n\n  NbCalendarRangeYearCellComponent.ɵfac = function NbCalendarRangeYearCellComponent_Factory(t) {\n    return new (t || NbCalendarRangeYearCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarRangeYearCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarRangeYearCellComponent,\n    selectors: [[\"nb-calendar-range-year-cell\"]],\n    hostVars: 18,\n    hostBindings: function NbCalendarRangeYearCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarRangeYearCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"year-cell\", ctx.yearCellClass)(\"range-cell\", ctx.rangeCellClass)(\"in-range\", ctx.inRange)(\"start\", ctx.rangeStart)(\"end\", ctx.rangeEnd)(\"selected\", ctx.selected)(\"today\", ctx.today)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      min: \"min\",\n      max: \"max\",\n      selectedValue: \"selectedValue\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarRangeYearCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.year, \" \");\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarRangeYearCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarRangeMonthCellComponent = /*#__PURE__*/(() => {\n  class NbCalendarRangeMonthCellComponent extends NbBaseCalendarRangeCell {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.size = NbCalendarSize.MEDIUM;\n      this.select = new EventEmitter(true);\n      this.monthCellClass = true;\n      this.rangeCellClass = true;\n    }\n\n    get month() {\n      return this.dateService.getMonthName(this.date);\n    }\n\n    get selected() {\n      if (this.inRange) {\n        return true;\n      }\n\n      if (this.selectedValue) {\n        return this.dateService.isSameMonthSafe(this.date, this.selectedValue.start);\n      }\n    }\n\n    get inRange() {\n      if (this.hasRange) {\n        return this.isInRage(this.date, this.selectedValue);\n      }\n    }\n\n    get rangeStart() {\n      if (this.hasRange) {\n        return this.dateService.isSameMonth(this.date, this.selectedValue.start);\n      }\n    }\n\n    get rangeEnd() {\n      if (this.hasRange) {\n        return this.dateService.isSameMonth(this.date, this.selectedValue.end);\n      }\n    }\n\n    get today() {\n      return this.dateService.isSameMonthSafe(this.date, this.dateService.today());\n    }\n\n    get disabled() {\n      return this.smallerThanMin() || this.greaterThanMax();\n    }\n\n    get isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n    onClick() {\n      if (this.disabled) {\n        return;\n      }\n\n      this.select.emit(this.date);\n    }\n\n    smallerThanMin() {\n      return this.date && this.min && this.dateService.compareDates(this.monthEnd(), this.min) < 0;\n    }\n\n    greaterThanMax() {\n      return this.date && this.max && this.dateService.compareDates(this.monthStart(), this.max) > 0;\n    }\n\n    monthStart() {\n      return this.dateService.getMonthStart(this.date);\n    }\n\n    monthEnd() {\n      return this.dateService.getMonthEnd(this.date);\n    }\n\n    isInRage(date, range) {\n      if (range.start && range.end) {\n        const cellDate = this.dateService.getMonthStart(date);\n        const start = this.dateService.getMonthStart(range.start);\n        const end = this.dateService.getMonthStart(range.end);\n        const isGreaterThanStart = this.dateService.compareDates(cellDate, start) >= 0;\n        const isLessThanEnd = this.dateService.compareDates(cellDate, end) <= 0;\n        return isGreaterThanStart && isLessThanEnd;\n      }\n\n      return this.dateService.isSameMonth(date, range.start);\n    }\n\n  }\n\n  NbCalendarRangeMonthCellComponent.ɵfac = function NbCalendarRangeMonthCellComponent_Factory(t) {\n    return new (t || NbCalendarRangeMonthCellComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarRangeMonthCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarRangeMonthCellComponent,\n    selectors: [[\"nb-calendar-range-month-cell\"]],\n    hostVars: 18,\n    hostBindings: function NbCalendarRangeMonthCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbCalendarRangeMonthCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"month-cell\", ctx.monthCellClass)(\"range-cell\", ctx.rangeCellClass)(\"selected\", ctx.selected)(\"in-range\", ctx.inRange)(\"start\", ctx.rangeStart)(\"end\", ctx.rangeEnd)(\"today\", ctx.today)(\"disabled\", ctx.disabled)(\"size-large\", ctx.isLarge);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      date: \"date\",\n      visibleDate: \"visibleDate\",\n      selectedValue: \"selectedValue\",\n      min: \"min\",\n      max: \"max\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"cell-content\"]],\n    template: function NbCalendarRangeMonthCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.month, \" \");\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbCalendarRangeMonthCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * CalendarRange component provides a capability to choose a date range.\n *\n * ```html\n * <nb-calendar [(date)]=\"date\"></nb-calendar>\n * <nb-calendar [date]=\"date\" (dateChange)=\"handleDateChange($event)\"></nb-calendar>\n * ```\n *\n * Basic usage example\n * @stacked-example(Range, calendar/calendar-range-showcase.component)\n *\n * ### Installation\n *\n * Import `NbCalendarRangeModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCalendarRangeModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * ### Usage\n *\n * CalendarRange component supports all of the Calendar component customization properties. More defails can be found\n * in the [Calendar component docs](docs/components/calendar).\n *\n * @styles\n *\n * calendar-width:\n * calendar-background-color:\n * calendar-border-color:\n * calendar-border-style:\n * calendar-border-width:\n * calendar-border-radius:\n * calendar-text-color:\n * calendar-text-font-family:\n * calendar-text-font-size:\n * calendar-text-font-weight:\n * calendar-text-line-height:\n * calendar-picker-padding-top:\n * calendar-picker-padding-bottom:\n * calendar-picker-padding-start:\n * calendar-picker-padding-end:\n * calendar-navigation-text-color:\n * calendar-navigation-text-font-family:\n * calendar-navigation-title-text-font-size:\n * calendar-navigation-title-text-font-weight:\n * calendar-navigation-title-text-line-height:\n * calendar-navigation-padding:\n * calendar-cell-inactive-text-color:\n * calendar-cell-disabled-text-color:\n * calendar-cell-hover-background-color:\n * calendar-cell-hover-border-color:\n * calendar-cell-hover-text-color:\n * calendar-cell-hover-text-font-size:\n * calendar-cell-hover-text-font-weight:\n * calendar-cell-hover-text-line-height:\n * calendar-cell-active-background-color:\n * calendar-cell-active-border-color:\n * calendar-cell-active-text-color:\n * calendar-cell-active-text-font-size:\n * calendar-cell-active-text-font-weight:\n * calendar-cell-active-text-line-height:\n * calendar-cell-today-background-color:\n * calendar-cell-today-border-color:\n * calendar-cell-today-text-color:\n * calendar-cell-today-text-font-size:\n * calendar-cell-today-text-font-weight:\n * calendar-cell-today-text-line-height:\n * calendar-cell-today-hover-background-color:\n * calendar-cell-today-hover-border-color:\n * calendar-cell-today-active-background-color:\n * calendar-cell-today-active-border-color:\n * calendar-cell-today-disabled-border-color:\n * calendar-cell-today-selected-background-color:\n * calendar-cell-today-selected-border-color:\n * calendar-cell-today-selected-text-color:\n * calendar-cell-today-selected-hover-background-color:\n * calendar-cell-today-selected-hover-border-color:\n * calendar-cell-today-selected-active-background-color:\n * calendar-cell-today-selected-active-border-color:\n * calendar-cell-today-in-range-background-color:\n * calendar-cell-today-in-range-border-color:\n * calendar-cell-today-in-range-text-color:\n * calendar-cell-today-in-range-hover-background-color:\n * calendar-cell-today-in-range-hover-border-color:\n * calendar-cell-today-in-range-active-background-color:\n * calendar-cell-today-in-range-active-border-color:\n * calendar-cell-selected-background-color:\n * calendar-cell-selected-border-color:\n * calendar-cell-selected-text-color:\n * calendar-cell-selected-text-font-size:\n * calendar-cell-selected-text-font-weight:\n * calendar-cell-selected-text-line-height:\n * calendar-cell-selected-hover-background-color:\n * calendar-cell-selected-hover-border-color:\n * calendar-cell-selected-active-background-color:\n * calendar-cell-selected-active-border-color:\n * calendar-day-cell-width:\n * calendar-day-cell-height:\n * calendar-month-cell-width:\n * calendar-month-cell-height:\n * calendar-year-cell-width:\n * calendar-year-cell-height:\n * calendar-weekday-background:\n * calendar-weekday-divider-color:\n * calendar-weekday-divider-width:\n * calendar-weekday-text-color:\n * calendar-weekday-text-font-size:\n * calendar-weekday-text-font-weight:\n * calendar-weekday-text-line-height:\n * calendar-weekday-holiday-text-color:\n * calendar-weekday-height:\n * calendar-weekday-width:\n * calendar-weeknumber-background:\n * calendar-weeknumber-divider-color:\n * calendar-weeknumber-divider-width:\n * calendar-weeknumber-text-color:\n * calendar-weeknumber-text-font-size:\n * calendar-weeknumber-text-font-weight:\n * calendar-weeknumber-text-line-height:\n * calendar-weeknumber-height:\n * calendar-weeknumber-width:\n * calendar-large-width:\n * calendar-day-cell-large-width:\n * calendar-day-cell-large-height:\n * calendar-weekday-large-height:\n * calendar-weekday-large-width:\n * calendar-weeknumber-large-height:\n * calendar-weeknumber-large-width:\n * calendar-month-cell-large-width:\n * calendar-month-cell-large-height:\n * calendar-year-cell-large-width:\n * calendar-year-cell-large-height:\n * */\n\n\nlet NbCalendarRangeComponent = /*#__PURE__*/(() => {\n  class NbCalendarRangeComponent {\n    constructor(dateService) {\n      this.dateService = dateService;\n      /**\n       * Defines if we should render previous and next months\n       * in the current month view.\n       * */\n\n      this.boundingMonth = true;\n      /**\n       * Defines starting view for the calendar.\n       * */\n\n      this.startView = NbCalendarViewMode.DATE;\n      this.dayCellComponent = NbCalendarRangeDayCellComponent;\n      this.monthCellComponent = NbCalendarRangeMonthCellComponent;\n      this.yearCellComponent = NbCalendarRangeYearCellComponent;\n      /**\n       * Size of the calendar and entire components.\n       * Can be 'medium' which is default or 'large'.\n       * */\n\n      this.size = NbCalendarSize.MEDIUM;\n      /**\n       * Determines should we show calendars navigation or not.\n       * */\n\n      this.showNavigation = true;\n      this._showWeekNumber = false;\n      /**\n       * Sets symbol used as a header for week numbers column\n       * */\n\n      this.weekNumberSymbol = '#';\n      /**\n       * Emits range when start selected and emits again when end selected.\n       * */\n\n      this.rangeChange = new EventEmitter();\n    }\n    /**\n     * Custom day cell component. Have to implement `NbCalendarCell` interface.\n     * */\n\n\n    set _cellComponent(cellComponent) {\n      if (cellComponent) {\n        this.dayCellComponent = cellComponent;\n      }\n    }\n    /**\n     * Custom month cell component. Have to implement `NbCalendarCell` interface.\n     * */\n\n\n    set _monthCellComponent(cellComponent) {\n      if (cellComponent) {\n        this.monthCellComponent = cellComponent;\n      }\n    }\n    /**\n     * Custom year cell component. Have to implement `NbCalendarCell` interface.\n     * */\n\n\n    set _yearCellComponent(cellComponent) {\n      if (cellComponent) {\n        this.yearCellComponent = cellComponent;\n      }\n    }\n    /**\n     * Determines should we show week numbers column.\n     * False by default.\n     * */\n\n\n    get showWeekNumber() {\n      return this._showWeekNumber;\n    }\n\n    set showWeekNumber(value) {\n      this._showWeekNumber = convertToBoolProperty(value);\n    }\n\n    onChange(date) {\n      this.initDateIfNull();\n      this.handleSelected(date);\n    }\n\n    initDateIfNull() {\n      if (!this.range) {\n        this.range = {\n          start: null,\n          end: null\n        };\n      }\n    }\n\n    handleSelected(date) {\n      if (this.selectionStarted()) {\n        this.selectEnd(date);\n      } else {\n        this.selectStart(date);\n      }\n    }\n\n    selectionStarted() {\n      const {\n        start,\n        end\n      } = this.range;\n      return start && !end;\n    }\n\n    selectStart(start) {\n      this.selectRange({\n        start\n      });\n    }\n\n    selectEnd(date) {\n      const {\n        start\n      } = this.range;\n\n      if (this.dateService.compareDates(date, start) > 0) {\n        this.selectRange({\n          start,\n          end: date\n        });\n      } else {\n        this.selectRange({\n          start: date,\n          end: start\n        });\n      }\n    }\n\n    selectRange(range) {\n      this.range = range;\n      this.rangeChange.emit(range);\n    }\n\n  }\n\n  NbCalendarRangeComponent.ɵfac = function NbCalendarRangeComponent_Factory(t) {\n    return new (t || NbCalendarRangeComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbCalendarRangeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarRangeComponent,\n    selectors: [[\"nb-calendar-range\"]],\n    inputs: {\n      boundingMonth: \"boundingMonth\",\n      startView: \"startView\",\n      monthCellComponent: \"monthCellComponent\",\n      size: \"size\",\n      showNavigation: \"showNavigation\",\n      weekNumberSymbol: \"weekNumberSymbol\",\n      _cellComponent: [\"dayCellComponent\", \"_cellComponent\"],\n      _monthCellComponent: [\"monthCellComponent\", \"_monthCellComponent\"],\n      _yearCellComponent: [\"yearCellComponent\", \"_yearCellComponent\"],\n      showWeekNumber: \"showWeekNumber\",\n      range: \"range\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      visibleDate: \"visibleDate\"\n    },\n    outputs: {\n      rangeChange: \"rangeChange\"\n    },\n    decls: 1,\n    vars: 14,\n    consts: [[3, \"date\", \"min\", \"max\", \"filter\", \"startView\", \"boundingMonth\", \"dayCellComponent\", \"monthCellComponent\", \"yearCellComponent\", \"visibleDate\", \"showNavigation\", \"size\", \"showWeekNumber\", \"weekNumberSymbol\", \"dateChange\"]],\n    template: function NbCalendarRangeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-base-calendar\", 0);\n        ɵngcc0.ɵɵlistener(\"dateChange\", function NbCalendarRangeComponent_Template_nb_base_calendar_dateChange_0_listener($event) {\n          return ctx.onChange($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"date\", ctx.range)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"startView\", ctx.startView)(\"boundingMonth\", ctx.boundingMonth)(\"dayCellComponent\", ctx.dayCellComponent)(\"monthCellComponent\", ctx.monthCellComponent)(\"yearCellComponent\", ctx.yearCellComponent)(\"visibleDate\", ctx.visibleDate)(\"showNavigation\", ctx.showNavigation)(\"size\", ctx.size)(\"showWeekNumber\", ctx.showWeekNumber)(\"weekNumberSymbol\", ctx.weekNumberSymbol);\n      }\n    },\n    directives: [NbBaseCalendarComponent],\n    encapsulation: 2\n  });\n  return NbCalendarRangeComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCalendarRangeModule = /*#__PURE__*/(() => {\n  class NbCalendarRangeModule {}\n\n  NbCalendarRangeModule.ɵfac = function NbCalendarRangeModule_Factory(t) {\n    return new (t || NbCalendarRangeModule)();\n  };\n\n  NbCalendarRangeModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCalendarRangeModule\n  });\n  NbCalendarRangeModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbBaseCalendarModule]]\n  });\n  return NbCalendarRangeModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCalendarRangeModule, {\n    declarations: [NbCalendarRangeComponent, NbCalendarRangeDayCellComponent, NbCalendarRangeYearCellComponent, NbCalendarRangeMonthCellComponent],\n    imports: [NbBaseCalendarModule],\n    exports: [NbCalendarRangeComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_TIME_PICKER_CONFIG = new InjectionToken('NB_TIME_PICKER_CONFIG');\nconst NB_DEFAULT_TIMEPICKER_LOCALIZATION_CONFIG = {\n  hoursText: 'Hr',\n  minutesText: 'Min',\n  secondsText: 'Sec',\n  ampmText: 'Am/Pm'\n};\n/**\n * The TimePicker components itself.\n * Provides a proxy to `TimePicker` options as well as custom picker options.\n */\n\nlet NbTimePickerComponent = /*#__PURE__*/(() => {\n  class NbTimePickerComponent {\n    constructor(config, platformService, locale, cd, calendarTimeModelService, dateService) {\n      this.config = config;\n      this.platformService = platformService;\n      this.cd = cd;\n      this.calendarTimeModelService = calendarTimeModelService;\n      this.dateService = dateService;\n      this.blur$ = new Subject();\n      this.dayPeriodColumnOptions = [\"AM\"\n      /* AM */\n      , \"PM\"\n      /* PM */\n      ];\n      this.isAM = true;\n      /**\n       * In timepicker value should be always true\n       * In calendar-with-time.component  should set to false\n       * @docs-private\n       */\n\n      this.showFooter = true;\n      /**\n       * Emits date when selected.\n       * */\n\n      this.onSelectTime = new EventEmitter();\n      this.initFromConfig(this.config);\n    }\n    /**\n     * Emits when timepicker looses focus.\n     */\n\n\n    get blur() {\n      return this.blur$.asObservable();\n    }\n    /**\n     * Defines time format string.\n     * */\n\n\n    get timeFormat() {\n      return this._timeFormat;\n    }\n\n    set timeFormat(timeFormat) {\n      this._timeFormat = timeFormat;\n    }\n    /**\n     * Defines 12 hours format .\n     * */\n\n\n    get twelveHoursFormat() {\n      return this._twelveHoursFormat;\n    }\n\n    set twelveHoursFormat(value) {\n      this._twelveHoursFormat = convertToBoolProperty(value);\n    }\n\n    /**\n     * Show seconds in timepicker.\n     * Ignored when singleColumn is true\n     * */\n    get withSeconds() {\n      return this._withSeconds;\n    }\n\n    set withSeconds(value) {\n      this._withSeconds = convertToBoolProperty(value);\n    }\n\n    /**\n     * Show timepicker values in one column with 60 minutes step by default.\n     * */\n    get singleColumn() {\n      return this._singleColumn;\n    }\n\n    set singleColumn(value) {\n      this._singleColumn = convertToBoolProperty(value);\n    }\n    /**\n     * Defines minutes offset for options, when timepicker is in single column mode.\n     * By default it’s 60 minutes: '12:00, 13:00: 14:00, 15:00...'\n     * */\n\n\n    set step(step) {\n      this._step = step;\n    }\n\n    get step() {\n      return this._step;\n    }\n    /**\n     * Date which will be rendered as selected.\n     * */\n\n\n    set date(date) {\n      this._date = date;\n      this.isAM = this.dateService.getDayPeriod(this.date) === \"AM\"\n      /* AM */\n      ;\n      this.buildColumnOptions();\n      this.cd.markForCheck();\n    }\n\n    get date() {\n      return this._date;\n    }\n\n    ngOnInit() {\n      this.timeFormat = this.setupTimeFormat();\n    }\n\n    ngOnChanges({\n      step,\n      twelveHoursFormat,\n      withSeconds,\n      singleColumn\n    }) {\n      this.timeFormat = this.setupTimeFormat();\n      const isConfigChanged = step || twelveHoursFormat || withSeconds || singleColumn;\n\n      if (isConfigChanged || !this.fullTimeOptions) {\n        this.buildColumnOptions();\n      }\n    }\n\n    setHost(hostRef) {\n      this.hostRef = hostRef;\n    }\n\n    attach(hostRef) {\n      this.hostRef = hostRef;\n    }\n\n    setCurrentTime() {\n      this.date = this.dateService.today();\n      this.onSelectTime.emit({\n        time: this.date,\n        save: true\n      });\n    }\n\n    setHour(value) {\n      this.updateValue(this.dateService.setHours(this.date, value));\n    }\n\n    setMinute(value) {\n      this.updateValue(this.dateService.setMinutes(this.date, value));\n    }\n\n    setSecond(value) {\n      this.updateValue(this.dateService.setSeconds(this.date, value));\n    }\n\n    selectFullTime(value) {\n      this.updateValue(value);\n    }\n\n    changeDayPeriod(dayPeriodToSet) {\n      if (this.dateService.getDayPeriod(this.date) === dayPeriodToSet) {\n        return;\n      } // Subtract hours when switching to AM (before midday, 0-11 in 24-hour) from PM (after midday, 12-24 in 24-hour),\n      // otherwise add hours because switching to PM from AM.\n\n\n      const direction = dayPeriodToSet === \"AM\"\n      /* AM */\n      ? -1 : 1;\n      const increment = direction * this.dateService.HOURS_IN_DAY_PERIOD;\n      this.updateValue(this.dateService.addHours(this.date, increment));\n    }\n\n    updateValue(date) {\n      this.onSelectTime.emit({\n        time: date\n      });\n    }\n\n    saveValue() {\n      this.onSelectTime.emit({\n        time: this.date,\n        save: true\n      });\n    }\n\n    trackByTimeValues(index, item) {\n      return item.value;\n    }\n\n    trackBySingleColumnValue(index, item) {\n      return this.dateService.valueOf(item);\n    }\n\n    trackByDayPeriod(index, item) {\n      return item;\n    }\n\n    showSeconds() {\n      return this.withSeconds && !this.singleColumn;\n    }\n\n    isSelectedHour(val) {\n      if (this.date) {\n        return this.dateService.getHours(this.date) === val;\n      }\n\n      return false;\n    }\n\n    isSelectedMinute(val) {\n      if (this.date) {\n        return this.dateService.getMinutes(this.date) === val;\n      }\n\n      return false;\n    }\n\n    isSelectedSecond(val) {\n      if (this.date) {\n        return this.dateService.getSeconds(this.date) === val;\n      }\n\n      return false;\n    }\n\n    isSelectedDayPeriod(dayPeriod) {\n      if (this.date) {\n        return dayPeriod === this.dateService.getDayPeriod(this.date);\n      }\n\n      return false;\n    }\n\n    getFullTimeString(item) {\n      return this.dateService.format(item, this.timeFormat).toUpperCase();\n    }\n\n    isSelectedFullTimeValue(value) {\n      if (this.date) {\n        return this.dateService.isSameHourAndMinute(value, this.date);\n      }\n\n      return false;\n    }\n\n    buildColumnOptions() {\n      this.timeFormat = this.setupTimeFormat();\n      this.fullTimeOptions = this.singleColumn ? this.calendarTimeModelService.getHoursRange(this.step) : [];\n      this.hoursColumnOptions = this.generateHours();\n      this.minutesColumnOptions = this.generateMinutesOrSeconds();\n      this.secondsColumnOptions = this.withSeconds ? this.generateMinutesOrSeconds() : [];\n    }\n    /**\n     * @docs-private\n     */\n\n\n    isFirefox() {\n      return this.platformService.FIREFOX;\n    }\n\n    generateHours() {\n      if (!this.twelveHoursFormat) {\n        return range(24, v => {\n          return {\n            value: v,\n            text: this.calendarTimeModelService.paddToTwoSymbols(v)\n          };\n        });\n      }\n\n      if (this.isAM) {\n        return range(12, v => {\n          const text = v === 0 ? 12 : v;\n          return {\n            value: v,\n            text: this.calendarTimeModelService.paddToTwoSymbols(text)\n          };\n        });\n      }\n\n      return rangeFromTo(12, 24, v => {\n        const text = v === 12 ? 12 : v - 12;\n        return {\n          value: v,\n          text: this.calendarTimeModelService.paddToTwoSymbols(text)\n        };\n      });\n    }\n\n    generateMinutesOrSeconds() {\n      return range(60, v => {\n        return {\n          value: v,\n          text: this.calendarTimeModelService.paddToTwoSymbols(v)\n        };\n      });\n    }\n\n    setupTimeFormat() {\n      if (!this.timeFormat) {\n        return this.config.format || this.buildTimeFormat();\n      }\n\n      return this.timeFormat;\n    }\n    /**\n     * @docs-private\n     */\n\n\n    buildTimeFormat() {\n      if (this.twelveHoursFormat) {\n        return `${this.withSeconds && !this.singleColumn ? this.dateService.getTwelveHoursFormatWithSeconds() : this.dateService.getTwelveHoursFormat()}`;\n      } else {\n        return `${this.withSeconds && !this.singleColumn ? this.dateService.getTwentyFourHoursFormatWithSeconds() : this.dateService.getTwentyFourHoursFormat()}`;\n      }\n    }\n\n    initFromConfig(config) {\n      var _a;\n\n      if (config) {\n        this.twelveHoursFormat = config.twelveHoursFormat;\n      } else {\n        this.twelveHoursFormat = this.dateService.getLocaleTimeFormat().includes('h');\n      }\n\n      const localeConfig = Object.assign(Object.assign({}, NB_DEFAULT_TIMEPICKER_LOCALIZATION_CONFIG), (_a = config === null || config === void 0 ? void 0 : config.localization) !== null && _a !== void 0 ? _a : {});\n      this.hoursText = localeConfig.hoursText;\n      this.minutesText = localeConfig.minutesText;\n      this.secondsText = localeConfig.secondsText;\n      this.ampmText = localeConfig.ampmText;\n    }\n\n  }\n\n  NbTimePickerComponent.ɵfac = function NbTimePickerComponent_Factory(t) {\n    return new (t || NbTimePickerComponent)(ɵngcc0.ɵɵdirectiveInject(NB_TIME_PICKER_CONFIG), ɵngcc0.ɵɵdirectiveInject(NbPlatform), ɵngcc0.ɵɵdirectiveInject(LOCALE_ID), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbCalendarTimeModelService), ɵngcc0.ɵɵdirectiveInject(NbDateService));\n  };\n\n  NbTimePickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTimePickerComponent,\n    selectors: [[\"nb-timepicker\"]],\n    viewQuery: function NbTimePickerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalDirective, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portal = _t.first);\n      }\n    },\n    inputs: {\n      showFooter: \"showFooter\",\n      timeFormat: \"timeFormat\",\n      twelveHoursFormat: \"twelveHoursFormat\",\n      withSeconds: \"withSeconds\",\n      singleColumn: \"singleColumn\",\n      step: \"step\",\n      date: \"date\",\n      hoursText: \"hoursText\",\n      minutesText: \"minutesText\",\n      secondsText: \"secondsText\",\n      ampmText: \"ampmText\",\n      applyButtonText: \"applyButtonText\",\n      currentTimeButtonText: \"currentTimeButtonText\"\n    },\n    outputs: {\n      onSelectTime: \"onSelectTime\"\n    },\n    exportAs: [\"nbTimepicker\"],\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 1,\n    vars: 0,\n    consts: [[\"class\", \"nb-timepicker-container\", 3, \"supports-scrollbar-theming\", 4, \"nbPortal\"], [1, \"nb-timepicker-container\"], [1, \"column-header\"], [4, \"ngIf\", \"ngIfElse\"], [\"fullTimeHeadersBlock\", \"\"], [1, \"picker-body\"], [\"fullTimeColumnBlock\", \"\"], [\"class\", \"actions-footer\", 4, \"ngIf\"], [1, \"header-cell\"], [\"class\", \"header-cell\", 4, \"ngIf\"], [1, \"values-list\"], [\"class\", \"list-item\", 3, \"selected\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"list-item\"], [3, \"value\", \"selected\", \"select\"], [\"class\", \"values-list\", 4, \"ngIf\"], [\"class\", \"list-item am-pm-item\", 3, \"selected\", 4, \"ngFor\", \"ngForOf\", \"ngForTrackBy\"], [1, \"list-item\", \"am-pm-item\"], [1, \"actions-footer\"], [3, \"applyButtonText\", \"currentTimeButtonText\", \"setCurrentTime\", \"saveValue\"]],\n    template: function NbTimePickerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbTimePickerComponent_nb_card_0_Template, 10, 7, \"nb-card\", 0);\n      }\n    },\n    directives: function () {\n      return [NbPortalDirective, NbCardComponent, NbCardHeaderComponent, ɵngcc2.NgIf, NbListComponent, ɵngcc2.NgForOf, NbListItemComponent, NbTimePickerCellComponent, NbCardFooterComponent, NbCalendarActionsComponent];\n    },\n    styles: [\".nb-timepicker-container[_ngcontent-%COMP%]{overflow:hidden;margin-bottom:0}.values-list[_ngcontent-%COMP%]{width:100%;overflow:hidden;scroll-snap-type:y proximity}.values-list[_ngcontent-%COMP%]:hover{overflow-y:auto}.list-item[_ngcontent-%COMP%]{border:0;padding:0;cursor:pointer}.picker-body[_ngcontent-%COMP%]{display:flex;width:100%;flex:1 0 0;overflow:hidden}.column-header[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;padding:0}.header-cell[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center}.actions-footer[_ngcontent-%COMP%]{width:100%}nb-card-header[_ngcontent-%COMP%], nb-card-footer[_ngcontent-%COMP%]{flex:0 0 auto}\"],\n    changeDetection: 0\n  });\n  return NbTimePickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbCalendarWithTimeComponent = /*#__PURE__*/(() => {\n  class NbCalendarWithTimeComponent extends NbCalendarComponent {\n    constructor(dateService, cd, calendarTimeModelService) {\n      super();\n      this.dateService = dateService;\n      this.cd = cd;\n      this.calendarTimeModelService = calendarTimeModelService;\n    }\n\n    ngOnInit() {\n      if (!this.date) {\n        this.date = this.calendarTimeModelService.getResetTime();\n      }\n    }\n\n    ngAfterViewInit() {\n      this.portalOutlet.attachTemplatePortal(this.timepicker.portal);\n    }\n\n    onDateValueChange(date) {\n      const hours = this.dateService.getHours(this.date);\n      const minutes = this.dateService.getMinutes(this.date);\n      const seconds = this.dateService.getSeconds(this.date);\n      const milliseconds = this.dateService.getMilliseconds(this.date);\n      let newDate = this.dateService.setHours(date, hours);\n      newDate = this.dateService.setMinutes(newDate, minutes);\n      newDate = this.dateService.setMinutes(newDate, minutes);\n      newDate = this.dateService.setSeconds(newDate, seconds);\n      newDate = this.dateService.setMilliseconds(newDate, milliseconds);\n      this.date = newDate;\n    }\n\n    onTimeChange(selectedTime) {\n      let newDate = this.dateService.clone(this.date);\n      newDate = this.dateService.setHours(newDate, this.dateService.getHours(selectedTime.time));\n      newDate = this.dateService.setMinutes(newDate, this.dateService.getMinutes(selectedTime.time));\n      newDate = this.dateService.setSeconds(newDate, this.dateService.getSeconds(selectedTime.time));\n      newDate = this.dateService.setMilliseconds(newDate, this.dateService.getMilliseconds(selectedTime.time));\n      this.date = newDate;\n    }\n\n    saveValue() {\n      this.dateChange.emit(this.date);\n    }\n\n    saveCurrentTime() {\n      this.dateChange.emit(this.dateService.today());\n    }\n    /**\n     * We don't show seconds with twelve hours format\n     * */\n\n\n    showSeconds() {\n      return this.withSeconds && !this.twelveHoursFormat;\n    }\n\n    isLarge() {\n      return this.size === NbCalendarSize.LARGE;\n    }\n\n  }\n\n  NbCalendarWithTimeComponent.ɵfac = function NbCalendarWithTimeComponent_Factory(t) {\n    return new (t || NbCalendarWithTimeComponent)(ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbCalendarTimeModelService));\n  };\n\n  NbCalendarWithTimeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCalendarWithTimeComponent,\n    selectors: [[\"nb-calendar-with-time\"]],\n    viewQuery: function NbCalendarWithTimeComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalOutletDirective, 5);\n        ɵngcc0.ɵɵviewQuery(NbTimePickerComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.timepicker = _t.first);\n      }\n    },\n    inputs: {\n      visibleDate: \"visibleDate\",\n      twelveHoursFormat: \"twelveHoursFormat\",\n      withSeconds: \"withSeconds\",\n      singleColumn: \"singleColumn\",\n      step: \"step\",\n      timeFormat: \"timeFormat\",\n      title: \"title\",\n      applyButtonText: \"applyButtonText\",\n      currentTimeButtonText: \"currentTimeButtonText\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 10,\n    vars: 29,\n    consts: [[1, \"calendar-with-time\"], [1, \"picker-body\"], [3, \"boundingMonth\", \"startView\", \"date\", \"min\", \"max\", \"filter\", \"dayCellComponent\", \"monthCellComponent\", \"yearCellComponent\", \"size\", \"visibleDate\", \"showNavigation\", \"showWeekNumber\", \"weekNumberSymbol\", \"dateChange\"], [1, \"timepicker-section\"], [1, \"picker-title\"], [3, \"date\", \"twelveHoursFormat\", \"withSeconds\", \"showFooter\", \"singleColumn\", \"step\", \"onSelectTime\"], [\"nbPortalOutlet\", \"\"], [1, \"picker-footer\"], [3, \"applyButtonText\", \"currentTimeButtonText\", \"setCurrentTime\", \"saveValue\"]],\n    template: function NbCalendarWithTimeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-card\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"nb-card-body\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"nb-base-calendar\", 2);\n        ɵngcc0.ɵɵlistener(\"dateChange\", function NbCalendarWithTimeComponent_Template_nb_base_calendar_dateChange_2_listener($event) {\n          return ctx.onDateValueChange($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"div\", 4);\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(6, \"nb-timepicker\", 5);\n        ɵngcc0.ɵɵlistener(\"onSelectTime\", function NbCalendarWithTimeComponent_Template_nb_timepicker_onSelectTime_6_listener($event) {\n          return ctx.onTimeChange($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementContainer(7, 6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"nb-card-footer\", 7);\n        ɵngcc0.ɵɵelementStart(9, \"nb-calendar-actions\", 8);\n        ɵngcc0.ɵɵlistener(\"setCurrentTime\", function NbCalendarWithTimeComponent_Template_nb_calendar_actions_setCurrentTime_9_listener() {\n          return ctx.saveCurrentTime();\n        })(\"saveValue\", function NbCalendarWithTimeComponent_Template_nb_calendar_actions_saveValue_9_listener() {\n          return ctx.saveValue();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"boundingMonth\", ctx.boundingMonth)(\"startView\", ctx.startView)(\"date\", ctx.date)(\"min\", ctx.min)(\"max\", ctx.max)(\"filter\", ctx.filter)(\"dayCellComponent\", ctx.dayCellComponent)(\"monthCellComponent\", ctx.monthCellComponent)(\"yearCellComponent\", ctx.yearCellComponent)(\"size\", ctx.size)(\"visibleDate\", ctx.visibleDate)(\"showNavigation\", ctx.showNavigation)(\"showWeekNumber\", ctx.showWeekNumber)(\"weekNumberSymbol\", ctx.weekNumberSymbol);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"size-large\", ctx.isLarge())(\"timepicker-single-column-width\", ctx.singleColumn)(\"timepicker-multiple-column-width\", !ctx.singleColumn);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"date\", ctx.date)(\"twelveHoursFormat\", ctx.twelveHoursFormat)(\"withSeconds\", ctx.showSeconds())(\"showFooter\", false)(\"singleColumn\", ctx.singleColumn)(\"step\", ctx.step);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"applyButtonText\", ctx.applyButtonText)(\"currentTimeButtonText\", ctx.currentTimeButtonText);\n      }\n    },\n    directives: [NbCardComponent, NbCardBodyComponent, NbBaseCalendarComponent, NbTimePickerComponent, NbPortalOutletDirective, NbCardFooterComponent, NbCalendarActionsComponent],\n    styles: [\"[_nghost-%COMP%]     nb-card.nb-timepicker-container{flex:1 0 0;border-radius:0;width:auto;border-right:0;border-bottom:0}[dir=ltr]   [_nghost-%COMP%]   .picker-footer[_ngcontent-%COMP%]{padding-left:.625rem}[dir=rtl]   [_nghost-%COMP%]   .picker-footer[_ngcontent-%COMP%]{padding-right:.625rem}.picker-body[_ngcontent-%COMP%]{align-items:stretch;display:flex;padding:0}.picker-body[_ngcontent-%COMP%]   nb-base-calendar[_ngcontent-%COMP%]     nb-card{border-radius:0}.calendar-with-time[_ngcontent-%COMP%]{overflow:hidden}.timepicker-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}\"],\n    changeDetection: 0\n  });\n  return NbCalendarWithTimeComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbDatepickerContainerComponent = /*#__PURE__*/(() => {\n  class NbDatepickerContainerComponent extends NbPositionedContainerComponent {\n    attach(portal) {\n      return this.overlayContainer.attachComponentPortal(portal);\n    }\n\n  }\n\n  NbDatepickerContainerComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbDatepickerContainerComponent_BaseFactory;\n    return function NbDatepickerContainerComponent_Factory(t) {\n      return (ɵNbDatepickerContainerComponent_BaseFactory || (ɵNbDatepickerContainerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDatepickerContainerComponent)))(t || NbDatepickerContainerComponent);\n    };\n  }();\n\n  NbDatepickerContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbDatepickerContainerComponent,\n    selectors: [[\"nb-datepicker-container\"]],\n    viewQuery: function NbDatepickerContainerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbOverlayContainerComponent, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);\n      }\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 0,\n    template: function NbDatepickerContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"nb-overlay-container\");\n      }\n    },\n    directives: [NbOverlayContainerComponent],\n    encapsulation: 2\n  });\n  return NbDatepickerContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbDatepickerAdapter` instances provide way how to parse, format and validate\n * different date types.\n * */\n\n\nclass NbDatepickerAdapter {}\n/**\n * Datepicker is an control that can pick any values anyway.\n * It has to be bound to the datepicker directive through nbDatepicker input.\n * */\n\n\nclass NbDatepicker {}\n\nconst NB_DATE_ADAPTER = new InjectionToken('Datepicker Adapter');\nconst NB_DATE_SERVICE_OPTIONS = new InjectionToken('Date service options');\n/**\n * The `NbDatepickerDirective` is form control that gives you ability to select dates and ranges. The datepicker\n * is shown when input receives a `focus` event.\n *\n * ```html\n * <input [nbDatepicker]=\"datepicker\">\n * <nb-datepicker #datepicker></nb-datepicker>\n * ```\n *\n * @stacked-example(Showcase, datepicker/datepicker-showcase.component)\n *\n * ### Installation\n *\n * Import `NbDatepickerModule.forRoot()` to your root module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbDatepickerModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n * And `NbDatepickerModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbDatepickerModule,\n *   ],\n * })\n *\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * If you want to use range selection, you have to use `NbRangepickerComponent` instead:\n *\n * ```html\n * <input [nbDatepicker]=\"rangepicker\">\n * <nb-rangepicker #rangepicker></nb-rangepicker>\n * ```\n *\n * Both range and date pickers support all parameters as calendar, so, check `NbCalendarComponent` for additional\n * info.\n *\n * @stacked-example(Range showcase, datepicker/rangepicker-showcase.component)\n *\n * Datepicker is the form control so it can be bound with angular forms through ngModel and form controls.\n *\n * @stacked-example(Forms, datepicker/datepicker-forms.component)\n *\n * `NbDatepickerDirective` may be validated using `min` and `max` dates passed to the datepicker.\n * And `filter` predicate that receives date object and has to return a boolean value.\n *\n * @stacked-example(Validation, datepicker/datepicker-validation.component)\n *\n * If you need to pick a time along with the date, you can use nb-date-timepicker\n *\n * ```html\n * <input nbInput placeholder=\"Pick Date\" [nbDatepicker]=\"dateTimePicker\">\n * <nb-date-timepicker withSeconds #dateTimePicker></nb-date-timepicker>\n * ```\n * @stacked-example(Date timepicker, datepicker/date-timepicker-showcase.component)\n *\n * A single column picker with options value as time and minute, so users won’t be able to pick\n * hours and minutes individually.\n *\n * @stacked-example(Date timepicker single column, datepicker/date-timepicker-single-column.component)\n\n * The `NbDatepickerComponent` supports date formatting:\n *\n * ```html\n * <input [nbDatepicker]=\"datepicker\">\n * <nb-datepicker #datepicker format=\"MM\\dd\\yyyy\"></nb-datepicker>\n * ```\n * <span id=\"formatting-issue\"></span>\n * ## Formatting Issue\n *\n * By default, datepicker uses angulars `LOCALE_ID` token for localization and `DatePipe` for dates formatting.\n * And native `Date.parse(...)` for dates parsing. But native `Date.parse` function doesn't support formats.\n * To provide custom formatting you have to use one of the following packages:\n *\n * - `@nebular/moment` - provides moment date adapter that uses moment for date objects. This means datepicker than\n * will operate only moment date objects. If you want to use it you have to install it: `npm i @nebular/moment`, and\n * import `NbMomentDateModule` from this package.\n *\n * - `@nebular/date-fns` - adapter for popular date-fns library. This way is preferred if you need only date formatting.\n * Because date-fns is treeshakable, tiny and operates native date objects. If you want to use it you have to\n * install it: `npm i @nebular/date-fns`, and import `NbDateFnsDateModule` from this package.\n *\n * ### NbDateFnsDateModule\n *\n * Format is required when using `NbDateFnsDateModule`. You can set it via `format` input on datepicker component:\n * ```html\n * <nb-datepicker format=\"dd.MM.yyyy\"></nb-datepicker>\n * ```\n * Also format can be set globally with `NbDateFnsDateModule.forRoot({ format: 'dd.MM.yyyy' })` and\n * `NbDateFnsDateModule.forChild({ format: 'dd.MM.yyyy' })` methods.\n *\n * Please note to use some of the formatting tokens you also need to pass\n * `{ useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true }` to date-fns parse and format functions.\n * You can configure options passed this functions by setting `formatOptions` and\n * `parseOptions` of options object passed to `NbDateFnsDateModule.forRoot` and `NbDateFnsDateModule.forChild` methods.\n * ```ts\n * NbDateFnsDateModule.forRoot({\n *   parseOptions: { useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true },\n *   formatOptions: { useAdditionalWeekYearTokens: true, useAdditionalDayOfYearTokens: true },\n * })\n * ```\n * Further info on `date-fns` formatting tokens could be found at\n * [date-fns docs](https://date-fns.org/v2.0.0-alpha.27/docs/Unicode-Tokens).\n *\n * You can also use `parseOptions` and `formatOptions` to provide locale.\n * ```ts\n * import { eo } from 'date-fns/locale';\n *\n * @NgModule({\n *   imports: [\n *     NbDateFnsDateModule.forRoot({\n *       parseOptions: { locale: eo },\n *       formatOptions: { locale: eo },\n *     }),\n *   ],\n * })\n * ```\n *\n * @styles\n *\n * datepicker-background-color:\n * datepicker-border-color:\n * datepicker-border-style:\n * datepicker-border-width:\n * datepicker-border-radius:\n * datepicker-shadow:\n * */\n\nlet NbDatepickerDirective = /*#__PURE__*/(() => {\n  class NbDatepickerDirective {\n    constructor(document, datepickerAdapters, hostRef, dateService, changeDetector) {\n      this.document = document;\n      this.datepickerAdapters = datepickerAdapters;\n      this.hostRef = hostRef;\n      this.dateService = dateService;\n      this.changeDetector = changeDetector;\n      this.destroy$ = new Subject();\n      this.isDatepickerReady = false;\n\n      this.onChange = () => {};\n\n      this.onTouched = () => {};\n      /**\n       * Form control validators will be called in validators context, so, we need to bind them.\n       * */\n\n\n      this.validator = Validators.compose([this.parseValidator, this.minValidator, this.maxValidator, this.filterValidator].map(fn => fn.bind(this)));\n      this.subscribeOnInputChange();\n    }\n    /**\n     * Provides datepicker component.\n     * */\n\n\n    set setPicker(picker) {\n      this.picker = picker;\n      this.setupPicker();\n    }\n    /**\n     * Returns html input element.\n     * */\n\n\n    get input() {\n      return this.hostRef.nativeElement;\n    }\n    /**\n     * Returns host input value.\n     * */\n\n\n    get inputValue() {\n      return this.input.value;\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    /**\n     * Writes value in picker and html input element.\n     * */\n\n\n    writeValue(value) {\n      if (this.isDatepickerReady) {\n        this.writePicker(value);\n        this.writeInput(value);\n      } else {\n        this.queue = value;\n      }\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    setDisabledState(isDisabled) {\n      this.input.disabled = isDisabled;\n    }\n    /**\n     * Form control validation based on picker validator config.\n     * */\n\n\n    validate() {\n      return this.validator(null);\n    }\n    /**\n     * Hides picker, focuses the input\n     */\n\n\n    hidePicker() {\n      this.input.focus();\n      this.picker.hide();\n    }\n    /**\n     * Validates that we can parse value correctly.\n     * */\n\n\n    parseValidator() {\n      /**\n       * Date services treat empty string as invalid date.\n       * That's why we're getting invalid formControl in case of empty input which is not required.\n       * */\n      if (this.inputValue === '') {\n        return null;\n      }\n\n      const isValid = this.datepickerAdapter.isValid(this.inputValue, this.picker.format);\n      return isValid ? null : {\n        nbDatepickerParse: {\n          value: this.inputValue\n        }\n      };\n    }\n    /**\n     * Validates passed value is greater than min.\n     * */\n\n\n    minValidator() {\n      const config = this.picker.getValidatorConfig();\n      const date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);\n      return !config.min || !date || this.dateService.compareDates(config.min, date) <= 0 ? null : {\n        nbDatepickerMin: {\n          min: config.min,\n          actual: date\n        }\n      };\n    }\n    /**\n     * Validates passed value is smaller than max.\n     * */\n\n\n    maxValidator() {\n      const config = this.picker.getValidatorConfig();\n      const date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);\n      return !config.max || !date || this.dateService.compareDates(config.max, date) >= 0 ? null : {\n        nbDatepickerMax: {\n          max: config.max,\n          actual: date\n        }\n      };\n    }\n    /**\n     * Validates passed value satisfy the filter.\n     * */\n\n\n    filterValidator() {\n      const config = this.picker.getValidatorConfig();\n      const date = this.datepickerAdapter.parse(this.inputValue, this.picker.format);\n      return !config.filter || !date || config.filter(date) ? null : {\n        nbDatepickerFilter: true\n      };\n    }\n    /**\n     * Chooses datepicker adapter based on passed picker component.\n     * */\n\n\n    chooseDatepickerAdapter() {\n      this.datepickerAdapter = this.datepickerAdapters.find(({\n        picker\n      }) => this.picker instanceof picker);\n\n      if (this.noDatepickerAdapterProvided()) {\n        throw new Error('No datepickerAdapter provided for picker');\n      }\n    }\n    /**\n     * Attaches picker to the host input element and subscribes on value changes.\n     * */\n\n\n    setupPicker() {\n      this.chooseDatepickerAdapter();\n      this.picker.attach(this.hostRef);\n\n      if (this.inputValue) {\n        this.picker.value = this.datepickerAdapter.parse(this.inputValue, this.picker.format);\n      } // In case datepicker component placed after the input with datepicker directive,\n      // we can't read `this.picker.format` on first change detection run,\n      // since it's not bound yet, so we have to wait for datepicker component initialization.\n\n\n      if (!this.isDatepickerReady) {\n        this.picker.init.pipe(take(1), tap(() => this.isDatepickerReady = true), filter(() => !!this.queue), takeUntil(this.destroy$)).subscribe(() => {\n          this.writeValue(this.queue);\n          this.onChange(this.queue);\n          this.changeDetector.detectChanges();\n          this.queue = undefined;\n        });\n      }\n\n      this.picker.valueChange.pipe(takeUntil(this.destroy$)).subscribe(value => {\n        this.writePicker(value);\n        this.writeInput(value);\n        this.onChange(value);\n\n        if (this.picker.shouldHide()) {\n          this.hidePicker();\n        }\n      });\n      merge(this.picker.blur, fromEvent(this.input, 'blur').pipe(filter(() => !this.picker.isShown && this.document.activeElement !== this.input))).pipe(takeUntil(this.destroy$)).subscribe(() => this.onTouched());\n    }\n\n    writePicker(value) {\n      this.picker.value = value;\n    }\n\n    writeInput(value) {\n      const stringRepresentation = this.datepickerAdapter.format(value, this.picker.format);\n      this.hostRef.nativeElement.value = stringRepresentation;\n    }\n    /**\n     * Validates if no datepicker adapter provided.\n     * */\n\n\n    noDatepickerAdapterProvided() {\n      return !this.datepickerAdapter || !(this.datepickerAdapter instanceof NbDatepickerAdapter);\n    }\n\n    subscribeOnInputChange() {\n      fromEvent(this.input, 'input').pipe(map(() => this.inputValue), takeUntil(this.destroy$)).subscribe(value => this.handleInputChange(value));\n    }\n    /**\n     * Parses input value and write if it isn't null.\n     * */\n\n\n    handleInputChange(value) {\n      const date = this.parseInputValue(value);\n      this.onChange(date);\n      this.writePicker(date);\n    }\n\n    parseInputValue(value) {\n      if (this.datepickerAdapter.isValid(value, this.picker.format)) {\n        return this.datepickerAdapter.parse(value, this.picker.format);\n      }\n\n      return null;\n    }\n\n  }\n\n  NbDatepickerDirective.ɵfac = function NbDatepickerDirective_Factory(t) {\n    return new (t || NbDatepickerDirective)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NB_DATE_ADAPTER), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbDatepickerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbDatepickerDirective,\n    selectors: [[\"input\", \"nbDatepicker\", \"\"]],\n    inputs: {\n      setPicker: [\"nbDatepicker\", \"setPicker\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbDatepickerDirective),\n      multi: true\n    }, {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => NbDatepickerDirective),\n      multi: true\n    }])]\n  });\n  return NbDatepickerDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbBasePicker` component concentrates overlay manipulation logic.\n * */\n\n\nclass NbBasePicker extends NbDatepicker {\n  constructor(overlay, positionBuilder, triggerStrategyBuilder, cfr, dateService, dateServiceOptions) {\n    super();\n    this.overlay = overlay;\n    this.positionBuilder = positionBuilder;\n    this.triggerStrategyBuilder = triggerStrategyBuilder;\n    this.cfr = cfr;\n    this.dateService = dateService;\n    this.dateServiceOptions = dateServiceOptions;\n    this.init$ = new ReplaySubject();\n    /**\n     * Stream of picker changes. Required to be the subject because picker hides and shows and picker\n     * change stream becomes recreated.\n     * */\n\n    this.onChange$ = new Subject();\n    this.overlayOffset = 8;\n    this.destroy$ = new Subject();\n    this.blur$ = new Subject();\n  }\n  /**\n   * Returns picker instance.\n   * */\n\n\n  get picker() {\n    return this.pickerRef && this.pickerRef.instance;\n  }\n  /**\n   * Stream of picker value changes.\n   * */\n\n\n  get valueChange() {\n    return this.onChange$.asObservable();\n  }\n\n  get isShown() {\n    return this.ref && this.ref.hasAttached();\n  }\n\n  get init() {\n    return this.init$.asObservable();\n  }\n  /**\n   * Emits when datepicker looses focus.\n   */\n\n\n  get blur() {\n    return this.blur$.asObservable();\n  }\n  /**\n   * Datepicker knows nothing about host html input element.\n   * So, attach method attaches datepicker to the host input element.\n   * */\n\n\n  attach(hostRef) {\n    this.hostRef = hostRef;\n    this.subscribeOnTriggers();\n  }\n\n  getValidatorConfig() {\n    return {\n      min: this.min,\n      max: this.max,\n      filter: this.filter\n    };\n  }\n\n  show() {\n    if (!this.ref) {\n      this.createOverlay();\n    }\n\n    this.openDatepicker();\n  }\n\n  shouldHide() {\n    return this.hideOnSelect && !!this.value;\n  }\n\n  hide() {\n    if (this.ref) {\n      this.ref.detach();\n    } // save current value if picker was rendered\n\n\n    if (this.picker) {\n      this.queue = this.value;\n      this.pickerRef.destroy();\n      this.pickerRef = null;\n      this.container = null;\n    }\n  }\n\n  createOverlay() {\n    this.positionStrategy = this.createPositionStrategy();\n    this.ref = this.overlay.create({\n      positionStrategy: this.positionStrategy,\n      scrollStrategy: this.overlay.scrollStrategies.reposition()\n    });\n    this.subscribeOnPositionChange();\n  }\n\n  openDatepicker() {\n    this.container = this.ref.attach(new NbComponentPortal(NbDatepickerContainerComponent, null, null, this.cfr));\n    this.instantiatePicker();\n    this.subscribeOnValueChange();\n    this.writeQueue();\n    this.patchWithInputs();\n    this.pickerRef.changeDetectorRef.markForCheck();\n  }\n\n  createPositionStrategy() {\n    return this.positionBuilder.connectedTo(this.hostRef).position(NbPosition.BOTTOM).offset(this.overlayOffset).adjustment(NbAdjustment.COUNTERCLOCKWISE);\n  }\n\n  subscribeOnPositionChange() {\n    this.positionStrategy.positionChange.pipe(takeUntil(this.destroy$)).subscribe(position => patch(this.container, {\n      position\n    }));\n  }\n\n  createTriggerStrategy() {\n    return this.triggerStrategyBuilder.trigger(NbTrigger.FOCUS).host(this.hostRef.nativeElement).container(() => this.container).build();\n  }\n\n  subscribeOnTriggers() {\n    this.triggerStrategy = this.createTriggerStrategy();\n    this.triggerStrategy.show$.subscribe(() => this.show());\n    this.triggerStrategy.hide$.subscribe(() => {\n      this.blur$.next();\n      this.hide();\n    });\n  }\n\n  instantiatePicker() {\n    this.pickerRef = this.container.instance.attach(new NbComponentPortal(this.pickerClass, null, null, this.cfr));\n  }\n  /**\n   * Subscribes on picker value changes and emit data through this.onChange$ subject.\n   * */\n\n\n  subscribeOnValueChange() {\n    this.pickerValueChange.subscribe(date => {\n      this.onChange$.next(date);\n    });\n  }\n\n  patchWithInputs() {\n    this.picker.boundingMonth = this.boundingMonth;\n    this.picker.startView = this.startView;\n    this.picker.min = this.min;\n    this.picker.max = this.max;\n    this.picker.filter = this.filter;\n    this.picker._cellComponent = this.dayCellComponent;\n    this.picker._monthCellComponent = this.monthCellComponent;\n    this.picker._yearCellComponent = this.yearCellComponent;\n    this.picker.size = this.size;\n    this.picker.showNavigation = this.showNavigation;\n    this.picker.visibleDate = this.visibleDate;\n    this.picker.showWeekNumber = this.showWeekNumber;\n    this.picker.weekNumberSymbol = this.weekNumberSymbol;\n  }\n\n  checkFormat() {\n    if (this.dateService.getId() === 'native' && this.format) {\n      throw new Error('Can\\'t format native date. To use custom formatting you have to install @nebular/moment or ' + '@nebular/date-fns package and import NbMomentDateModule or NbDateFnsDateModule accordingly.' + 'More information at \"Formatting issue\" ' + 'https://akveo.github.io/nebular/docs/components/datepicker/overview#nbdatepickercomponent');\n    }\n\n    const isFormatSet = this.format || this.dateServiceOptions && this.dateServiceOptions.format;\n\n    if (this.dateService.getId() === 'date-fns' && !isFormatSet) {\n      throw new Error('format is required when using NbDateFnsDateModule');\n    }\n  }\n\n}\n\nlet NbBasePickerComponent = /*#__PURE__*/(() => {\n  class NbBasePickerComponent extends NbBasePicker {\n    constructor(document, positionBuilder, triggerStrategyBuilder, overlay, cfr, dateService, dateServiceOptions) {\n      super(overlay, positionBuilder, triggerStrategyBuilder, cfr, dateService, dateServiceOptions);\n      /**\n       * Defines if we should render previous and next months\n       * in the current month view.\n       * */\n\n      this.boundingMonth = true;\n      /**\n       * Defines starting view for calendar.\n       * */\n\n      this.startView = NbCalendarViewMode.DATE;\n      /**\n       * Size of the calendar and entire components.\n       * Can be 'medium' which is default or 'large'.\n       * */\n\n      this.size = NbCalendarSize.MEDIUM;\n      /**\n       * Hide picker when a date or a range is selected, `true` by default\n       * @type {boolean}\n       */\n\n      this.hideOnSelect = true;\n      /**\n       * Determines should we show calendars navigation or not.\n       * @type {boolean}\n       */\n\n      this.showNavigation = true;\n      /**\n       * Sets symbol used as a header for week numbers column\n       * */\n\n      this.weekNumberSymbol = '#';\n      this._showWeekNumber = false;\n      /**\n       * Determines picker overlay offset (in pixels).\n       * */\n\n      this.overlayOffset = 8;\n    }\n    /**\n     * Determines should we show week numbers column.\n     * False by default.\n     * */\n\n\n    get showWeekNumber() {\n      return this._showWeekNumber;\n    }\n\n    set showWeekNumber(value) {\n      this._showWeekNumber = convertToBoolProperty(value);\n    }\n\n    ngOnInit() {\n      this.checkFormat();\n    }\n\n    ngOnChanges(changes) {\n      if (changes.format && !changes.format.isFirstChange()) {\n        this.checkFormat();\n      }\n    }\n\n    ngAfterViewInit() {\n      this.init$.next();\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      this.hide();\n      this.init$.complete();\n\n      if (this.ref) {\n        this.ref.dispose();\n      }\n\n      if (this.triggerStrategy) {\n        this.triggerStrategy.destroy();\n      }\n    }\n\n    get pickerValueChange() {\n      return;\n    }\n\n    get value() {\n      return undefined;\n    }\n\n    set value(value) {}\n\n    writeQueue() {}\n\n  }\n\n  NbBasePickerComponent.ɵfac = function NbBasePickerComponent_Factory(t) {\n    return new (t || NbBasePickerComponent)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NB_DATE_SERVICE_OPTIONS, 8));\n  };\n\n  NbBasePickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbBasePickerComponent,\n    selectors: [[\"ng-component\"]],\n    inputs: {\n      boundingMonth: \"boundingMonth\",\n      startView: \"startView\",\n      size: \"size\",\n      hideOnSelect: \"hideOnSelect\",\n      showNavigation: \"showNavigation\",\n      weekNumberSymbol: \"weekNumberSymbol\",\n      overlayOffset: \"overlayOffset\",\n      showWeekNumber: \"showWeekNumber\",\n      format: \"format\",\n      min: \"min\",\n      max: \"max\",\n      filter: \"filter\",\n      dayCellComponent: \"dayCellComponent\",\n      monthCellComponent: \"monthCellComponent\",\n      yearCellComponent: \"yearCellComponent\",\n      visibleDate: \"visibleDate\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbBasePickerComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n  return NbBasePickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * The DatePicker components itself.\n * Provides a proxy to `NbCalendar` options as well as custom picker options.\n */\n\n\nlet NbDatepickerComponent = /*#__PURE__*/(() => {\n  class NbDatepickerComponent extends NbBasePickerComponent {\n    constructor() {\n      super(...arguments);\n      this.pickerClass = NbCalendarComponent;\n    }\n    /**\n     * Date which will be rendered as selected.\n     * */\n\n\n    set date(date) {\n      this.value = date;\n    }\n    /**\n     * Emits date when selected.\n     * */\n\n\n    get dateChange() {\n      return this.valueChange;\n    }\n\n    get value() {\n      return this.picker ? this.picker.date : undefined;\n    }\n\n    set value(date) {\n      if (!this.picker) {\n        this.queue = date;\n        return;\n      }\n\n      if (date) {\n        this.visibleDate = date;\n        this.picker.visibleDate = date;\n        this.picker.date = date;\n      }\n    }\n\n    get pickerValueChange() {\n      return this.picker.dateChange;\n    }\n\n    writeQueue() {\n      if (this.queue) {\n        const date = this.queue;\n        this.queue = null;\n        this.value = date;\n      }\n    }\n\n  }\n\n  NbDatepickerComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbDatepickerComponent_BaseFactory;\n    return function NbDatepickerComponent_Factory(t) {\n      return (ɵNbDatepickerComponent_BaseFactory || (ɵNbDatepickerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDatepickerComponent)))(t || NbDatepickerComponent);\n    };\n  }();\n\n  NbDatepickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbDatepickerComponent,\n    selectors: [[\"nb-datepicker\"]],\n    inputs: {\n      date: \"date\"\n    },\n    outputs: {\n      dateChange: \"dateChange\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbDatepickerComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n  return NbDatepickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * The RangeDatePicker components itself.\n * Provides a proxy to `NbCalendarRange` options as well as custom picker options.\n */\n\n\nlet NbRangepickerComponent = /*#__PURE__*/(() => {\n  class NbRangepickerComponent extends NbBasePickerComponent {\n    constructor() {\n      super(...arguments);\n      this.pickerClass = NbCalendarRangeComponent;\n    }\n    /**\n     * Range which will be rendered as selected.\n     * */\n\n\n    set range(range) {\n      this.value = range;\n    }\n    /**\n     * Emits range when start selected and emits again when end selected.\n     * */\n\n\n    get rangeChange() {\n      return this.valueChange;\n    }\n\n    get value() {\n      return this.picker ? this.picker.range : undefined;\n    }\n\n    set value(range) {\n      if (!this.picker) {\n        this.queue = range;\n        return;\n      }\n\n      if (range) {\n        const visibleDate = range && range.start;\n        this.visibleDate = visibleDate;\n        this.picker.visibleDate = visibleDate;\n        this.picker.range = range;\n      }\n    }\n\n    get pickerValueChange() {\n      return this.picker.rangeChange;\n    }\n\n    shouldHide() {\n      return super.shouldHide() && !!(this.value && this.value.start && this.value.end);\n    }\n\n    writeQueue() {\n      if (this.queue) {\n        const range = this.queue;\n        this.queue = null;\n        this.value = range;\n      }\n    }\n\n  }\n\n  NbRangepickerComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbRangepickerComponent_BaseFactory;\n    return function NbRangepickerComponent_Factory(t) {\n      return (ɵNbRangepickerComponent_BaseFactory || (ɵNbRangepickerComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRangepickerComponent)))(t || NbRangepickerComponent);\n    };\n  }();\n\n  NbRangepickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRangepickerComponent,\n    selectors: [[\"nb-rangepicker\"]],\n    inputs: {\n      range: \"range\"\n    },\n    outputs: {\n      rangeChange: \"rangeChange\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbRangepickerComponent_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n  return NbRangepickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbDateTimePickerComponent = /*#__PURE__*/(() => {\n  class NbDateTimePickerComponent extends NbBasePickerComponent {\n    constructor(document, positionBuilder, triggerStrategyBuilder, overlay, cfr, dateService, dateServiceOptions, calendarWithTimeModelService) {\n      super(document, positionBuilder, triggerStrategyBuilder, overlay, cfr, dateService, dateServiceOptions);\n      this.calendarWithTimeModelService = calendarWithTimeModelService;\n      this.pickerClass = NbCalendarWithTimeComponent;\n    }\n\n    get value() {\n      return this.picker ? this.picker.date : undefined;\n    }\n\n    set value(date) {\n      if (!this.picker) {\n        this.queue = date;\n        return;\n      }\n\n      if (date) {\n        this.visibleDate = date;\n        this.picker.visibleDate = date;\n        this.picker.date = date;\n        this.picker.cd.markForCheck();\n      }\n    }\n\n    get twelveHoursFormat() {\n      return this._twelveHoursFormat;\n    }\n\n    set twelveHoursFormat(value) {\n      this._twelveHoursFormat = convertToBoolProperty(value);\n    }\n\n    get withSeconds() {\n      return this._withSeconds;\n    }\n\n    set withSeconds(value) {\n      this._withSeconds = convertToBoolProperty(value);\n    }\n\n    get singleColumn() {\n      return this._singleColumn;\n    }\n\n    set singleColumn(value) {\n      this._singleColumn = convertToBoolProperty(value);\n    }\n\n    ngOnInit() {\n      this.format = this.format || this.buildTimeFormat();\n    }\n\n    patchWithInputs() {\n      this.picker.singleColumn = this.singleColumn;\n      this.picker.twelveHoursFormat = this.twelveHoursFormat;\n      this.picker.withSeconds = this.withSeconds;\n      this.picker.step = this.step;\n      this.picker.title = this.title;\n      this.picker.applyButtonText = this.applyButtonText;\n      this.picker.currentTimeButtonText = this.currentTimeButtonText;\n\n      if (this.twelveHoursFormat) {\n        this.picker.timeFormat = this.dateService.getTwelveHoursFormat();\n      } else {\n        this.picker.timeFormat = this.withSeconds ? this.dateService.getTwentyFourHoursFormatWithSeconds() : this.dateService.getTwentyFourHoursFormat();\n      }\n\n      super.patchWithInputs();\n      this.picker.cd.markForCheck();\n    }\n\n    get pickerValueChange() {\n      return this.picker.dateChange;\n    }\n\n    writeQueue() {\n      if (this.queue) {\n        const date = this.queue;\n        this.queue = null;\n        this.value = date;\n      }\n    }\n\n    buildTimeFormat() {\n      if (this.singleColumn) {\n        return this.calendarWithTimeModelService.buildDateFormat(this.twelveHoursFormat);\n      } else {\n        return this.calendarWithTimeModelService.buildDateFormat(this.twelveHoursFormat, this.withSeconds);\n      }\n    }\n\n  }\n\n  NbDateTimePickerComponent.ɵfac = function NbDateTimePickerComponent_Factory(t) {\n    return new (t || NbDateTimePickerComponent)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(NB_DATE_SERVICE_OPTIONS, 8), ɵngcc0.ɵɵdirectiveInject(NbCalendarTimeModelService));\n  };\n\n  NbDateTimePickerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbDateTimePickerComponent,\n    selectors: [[\"nb-date-timepicker\"]],\n    inputs: {\n      twelveHoursFormat: \"twelveHoursFormat\",\n      withSeconds: \"withSeconds\",\n      singleColumn: \"singleColumn\",\n      step: \"step\",\n      title: \"title\",\n      applyButtonText: \"applyButtonText\",\n      currentTimeButtonText: \"currentTimeButtonText\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbDateTimePickerComponent_Template(rf, ctx) {},\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbDateTimePickerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nfunction isUrlPathEqual(path, link) {\n  const locationPath = getPathPartOfUrl(path);\n  return link === locationPath;\n}\n\nfunction isUrlPathContain(path, link) {\n  const locationPath = getPathPartOfUrl(path);\n  const endOfUrlSegmentRegExp = /\\/|^$/;\n  return locationPath.startsWith(link) && locationPath.slice(link.length).charAt(0).search(endOfUrlSegmentRegExp) !== -1;\n}\n\nfunction getPathPartOfUrl(url) {\n  return url.match(/.*?(?=[?;#]|$)/)[0];\n}\n\nfunction getFragmentPartOfUrl(url) {\n  const matched = url.match(/#(.+)/);\n  return matched ? matched[1] : '';\n}\n\nfunction isFragmentEqual(path, fragment) {\n  return getFragmentPartOfUrl(path) === fragment;\n}\n\nfunction isFragmentContain(path, fragment) {\n  return getFragmentPartOfUrl(path).includes(fragment);\n}\n/**\n * This service determines whether we should scroll the layout back to top.\n * This occurs when the page is changed, so when current url PATH is not equal to the previous one.\n *\n *  TODO: this is most likely a temporary solutions as recently Angular introduces ViewportScroll\n *  and scroll restoration process\n */\n\n\nlet NbRestoreScrollTopHelper = /*#__PURE__*/(() => {\n  class NbRestoreScrollTopHelper {\n    constructor(router) {\n      this.router = router;\n    }\n\n    shouldRestore() {\n      return this.router.events.pipe(startWith(null), filter(event => event === null || event instanceof NavigationEnd), pairwise(), map(([prev, current]) => this.pageChanged(prev, current)), filter(res => !!res));\n    }\n\n    pageChanged(prev, current) {\n      return !prev || getPathPartOfUrl(prev.url) !== getPathPartOfUrl(current.url);\n    }\n\n  }\n\n  NbRestoreScrollTopHelper.ɵfac = function NbRestoreScrollTopHelper_Factory(t) {\n    return new (t || NbRestoreScrollTopHelper)(ɵngcc0.ɵɵinject(ɵngcc5.Router));\n  };\n\n  NbRestoreScrollTopHelper.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbRestoreScrollTopHelper,\n    factory: NbRestoreScrollTopHelper.ɵfac\n  });\n  return NbRestoreScrollTopHelper;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Layout container component.\n * When using with Nebular Theme System it is required that all child components should be placed inside.\n *\n * Basic example of two column layout with header:\n *\n * @stacked-example(Showcase, layout/layout-showcase.component)\n *\n * Can contain the following components inside:\n *\n * ```html\n * <nb-layout>\n *  <nb-layout-header></nb-layout-header>\n *  <nb-layout-footer></nb-layout-footer>\n *  <nb-layout-column></nb-layout-column>\n *  <nb-sidebar></nb-sidebar>\n * </nb-layout>\n * ```\n * ### Installation\n *\n * Import `NbLayoutModule` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbLayoutModule,\n *   ],\n * })\n * export class AppModule { }\n * ```\n * ### Usage\n * By default the layout fills up the whole view-port.\n * The window scrollbars are disabled on the body and moved inside of the nb-layout, so that the scrollbars\n * won't mess with the fixed nb-header.\n *\n * The child components are projected into a flexible layout structure allowing to adjust the layout behavior\n * based on the settings provided.\n *\n * The layout content (columns) becomes centered when the window width is more than\n * the value specified in the theme variable `layout-content-width`.\n *\n * The layout also contains the area on the very top (the first child of the nb-layout), which could be used\n * to dynamically append some components like modals or spinners/loaders\n * so that they are located on top of the elements hierarchy.\n * More details are under the `ThemeService` section.\n *\n * The layout component is also responsible for changing application themes.\n * It listens to the `themeChange` event and change a theme CSS class appended to body.\n * Based on the class appended, specific CSS-theme is applied to the application.\n * More details of the Theme System could be found here [Enabling Theme System](#/docs/concepts/theme-system)\n *\n * A simple layout with footer:\n *\n * @stacked-example(Layout With Footer, layout/layout-w-footer.component)\n *\n * It is possible to ask the layout to center the columns (notice: we added a `center` attribute\n * to the layout:\n *\n * ```html\n * <nb-layout center>\n *   <nb-layout-header>Awesome Company</nb-layout-header>\n *\n *   <nb-layout-column>\n *     Hello World!\n *   </nb-layout-column>\n *\n *   <nb-layout-footer>Contact us</nb-layout-footer>\n * </nb-layout>\n * ```\n *\n * @styles\n *\n * layout-background-color:\n * layout-text-color:\n * layout-text-font-family:\n * layout-text-font-size:\n * layout-text-font-weight:\n * layout-text-line-height:\n * layout-min-height:\n * layout-content-width:\n * layout-window-mode-min-width:\n * layout-window-mode-max-width:\n * layout-window-mode-background-color:\n * layout-window-mode-padding-top:\n * layout-window-shadow:\n * layout-padding:\n * layout-medium-padding:\n * layout-small-padding:\n * layout-scrollbar-background-color:\n * layout-scrollbar-color:\n * layout-scrollbar-width:\n */\n\n\nlet NbLayoutComponent = /*#__PURE__*/(() => {\n  class NbLayoutComponent {\n    constructor(themeService, spinnerService, elementRef, renderer, window, document, platformId, layoutDirectionService, scrollService, rulerService, scrollTop, overlayContainer) {\n      this.themeService = themeService;\n      this.spinnerService = spinnerService;\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n      this.window = window;\n      this.document = document;\n      this.platformId = platformId;\n      this.layoutDirectionService = layoutDirectionService;\n      this.scrollService = scrollService;\n      this.rulerService = rulerService;\n      this.scrollTop = scrollTop;\n      this.overlayContainer = overlayContainer;\n      this.scrollBlockClass = 'nb-global-scrollblock';\n      this.isScrollBlocked = false;\n      this.centerValue = false;\n      this.restoreScrollTopValue = true;\n      this.windowModeValue = false;\n      this.withScrollValue = false;\n      this.withSubheader = false;\n      this.afterViewInit$ = new BehaviorSubject(null);\n      this.destroy$ = new Subject();\n      this.registerAsOverlayContainer();\n      this.themeService.onThemeChange().pipe(takeUntil(this.destroy$)).subscribe(theme => {\n        const body = this.document.getElementsByTagName('body')[0];\n\n        if (theme.previous) {\n          this.renderer.removeClass(body, `nb-theme-${theme.previous}`);\n        }\n\n        this.renderer.addClass(body, `nb-theme-${theme.name}`);\n      });\n      this.themeService.onAppendLayoutClass().pipe(takeUntil(this.destroy$)).subscribe(className => {\n        this.renderer.addClass(this.elementRef.nativeElement, className);\n      });\n      this.themeService.onRemoveLayoutClass().pipe(takeUntil(this.destroy$)).subscribe(className => {\n        this.renderer.removeClass(this.elementRef.nativeElement, className);\n      });\n      this.spinnerService.registerLoader(new Promise(resolve => {\n        this.afterViewInit$.pipe(takeUntil(this.destroy$)).subscribe(_ => resolve());\n      }));\n      this.spinnerService.load();\n      this.rulerService.onGetDimensions().pipe(takeUntil(this.destroy$)).subscribe(({\n        listener\n      }) => {\n        listener.next(this.getDimensions());\n        listener.complete();\n      });\n      this.scrollService.onScrollableChange().pipe(filter(() => this.withScrollValue)).subscribe(scrollable => {\n        /**\n         * In case when Nebular Layout custom scroll `withScroll` mode is enabled\n         * we need to disable default CDK scroll blocker (@link NbBlockScrollStrategyAdapter) on HTML element\n         * so that it won't add additional positioning.\n         */\n        if (scrollable) {\n          this.enableScroll();\n        } else {\n          this.blockScroll();\n        }\n      });\n\n      if (isPlatformBrowser(this.platformId)) {\n        // trigger first time so that after the change we have the initial value\n        this.themeService.changeWindowWidth(this.window.innerWidth);\n      }\n    }\n    /**\n     * Defines whether the layout columns will be centered after some width\n     * @param {boolean} val\n     */\n\n\n    set center(val) {\n      this.centerValue = convertToBoolProperty(val);\n    }\n    /**\n     * Defines whether the layout enters a 'window' mode, when the layout content (including sidebars and fixed header)\n     * becomes centered by width with a margin from the top of the screen, like a floating window.\n     * Automatically enables `withScroll` mode, as in the window mode scroll must be inside the layout and cannot be on\n     * window. (TODO: check this)\n     * @param {boolean} val\n     */\n\n\n    set windowMode(val) {\n      this.windowModeValue = convertToBoolProperty(val);\n      this.withScroll = this.windowModeValue;\n    }\n    /**\n     * Defines whether to move the scrollbars to layout or leave it at the body level.\n     * Automatically set to true when `windowMode` is enabled.\n     * @param {boolean} val\n     */\n\n\n    set withScroll(val) {\n      this.withScrollValue = convertToBoolProperty(val); // TODO: is this the best way of doing it? as we don't have access to body from theme styles\n      // TODO: add e2e test\n\n      const body = this.document.getElementsByTagName('body')[0];\n\n      if (this.withScrollValue) {\n        this.renderer.setStyle(body, 'overflow', 'hidden');\n      } else {\n        this.renderer.setStyle(body, 'overflow', 'initial');\n      }\n    }\n    /**\n     * Restores scroll to the top of the page after navigation\n     * @param {boolean} val\n     */\n\n\n    set restoreScrollTop(val) {\n      this.restoreScrollTopValue = convertToBoolProperty(val);\n    }\n\n    ngAfterViewInit() {\n      this.scrollService.onGetPosition().pipe(takeUntil(this.destroy$)).subscribe(({\n        listener\n      }) => {\n        listener.next(this.getScrollPosition());\n        listener.complete();\n      });\n      this.scrollTop.shouldRestore().pipe(filter(() => this.restoreScrollTopValue), takeUntil(this.destroy$)).subscribe(() => this.scroll(0, 0));\n      this.layoutDirectionService.onDirectionChange().pipe(takeUntil(this.destroy$)).subscribe(direction => this.document.dir = direction);\n      this.scrollService.onManualScroll().pipe(takeUntil(this.destroy$)).subscribe(({\n        x,\n        y\n      }) => this.scroll(x, y));\n      this.afterViewInit$.next(true);\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      this.unregisterAsOverlayContainer();\n    }\n\n    onScroll($event) {\n      this.scrollService.fireScrollChange($event);\n    }\n\n    onResize(event) {\n      this.themeService.changeWindowWidth(event.target.innerWidth);\n    }\n    /**\n     * Returns scroll and client height/width\n     *\n     * Depending on the current scroll mode (`withScroll=true`) returns sizes from the body element\n     * or from the `.scrollable-container`\n     * @returns {NbLayoutDimensions}\n     */\n\n\n    getDimensions() {\n      let clientWidth,\n          clientHeight,\n          scrollWidth,\n          scrollHeight = 0;\n\n      if (this.withScrollValue) {\n        const container = this.scrollableContainerRef.nativeElement;\n        clientWidth = container.clientWidth;\n        clientHeight = container.clientHeight;\n        scrollWidth = container.scrollWidth;\n        scrollHeight = container.scrollHeight;\n      } else {\n        const {\n          documentElement,\n          body\n        } = this.document;\n        clientWidth = documentElement.clientWidth || body.clientWidth;\n        clientHeight = documentElement.clientHeight || body.clientHeight;\n        scrollWidth = documentElement.scrollWidth || body.scrollWidth;\n        scrollHeight = documentElement.scrollHeight || body.scrollHeight;\n      }\n\n      return {\n        clientWidth,\n        clientHeight,\n        scrollWidth,\n        scrollHeight\n      };\n    }\n    /**\n     * Returns scroll position of current scroll container.\n     *\n     * If `withScroll` = true, returns scroll position of the `.scrollable-container` element,\n     * otherwise - of the scrollable element of the window (which may be different depending of a browser)\n     *\n     * @returns {NbScrollPosition}\n     */\n\n\n    getScrollPosition() {\n      if (!isPlatformBrowser(this.platformId)) {\n        return {\n          x: 0,\n          y: 0\n        };\n      }\n\n      if (this.withScrollValue) {\n        const container = this.scrollableContainerRef.nativeElement;\n        return {\n          x: container.scrollLeft,\n          y: container.scrollTop\n        };\n      }\n\n      const documentRect = this.document.documentElement.getBoundingClientRect();\n      const x = -documentRect.left || this.document.body.scrollLeft || this.window.scrollX || this.document.documentElement.scrollLeft || 0;\n      const y = -documentRect.top || this.document.body.scrollTop || this.window.scrollY || this.document.documentElement.scrollTop || 0;\n      return {\n        x,\n        y\n      };\n    }\n\n    registerAsOverlayContainer() {\n      if (this.overlayContainer.setContainer) {\n        this.overlayContainer.setContainer(this.elementRef.nativeElement);\n      }\n    }\n\n    unregisterAsOverlayContainer() {\n      if (this.overlayContainer.clearContainer) {\n        this.overlayContainer.clearContainer();\n      }\n    }\n\n    scroll(x = null, y = null) {\n      const {\n        x: currentX,\n        y: currentY\n      } = this.getScrollPosition();\n      x = x == null ? currentX : x;\n      y = y == null ? currentY : y;\n\n      if (!isPlatformBrowser(this.platformId)) {\n        return;\n      }\n\n      if (this.withScrollValue) {\n        const scrollable = this.scrollableContainerRef.nativeElement;\n\n        if (scrollable.scrollTo) {\n          scrollable.scrollTo(x, y);\n        } else {\n          scrollable.scrollLeft = x;\n          scrollable.scrollTop = y;\n        }\n      } else {\n        this.window.scrollTo(x, y);\n      }\n    } // TODO: Extract into block scroll strategy\n\n\n    blockScroll() {\n      if (this.isScrollBlocked) {\n        return;\n      }\n\n      this.isScrollBlocked = true;\n      this.renderer.addClass(this.document.documentElement, this.scrollBlockClass);\n      const scrollableContainerElement = this.scrollableContainerRef.nativeElement;\n      const layoutElement = this.layoutContainerRef.nativeElement;\n      const layoutWithScrollWidth = layoutElement.clientWidth;\n      this.scrollableContainerOverflowOldValue = scrollableContainerElement.style.overflow;\n      scrollableContainerElement.style.overflow = 'hidden';\n      const layoutWithoutScrollWidth = layoutElement.clientWidth;\n      const scrollWidth = layoutWithoutScrollWidth - layoutWithScrollWidth;\n\n      if (!scrollWidth) {\n        return;\n      }\n\n      this.layoutPaddingOldValue = {\n        left: layoutElement.style.paddingLeft,\n        right: layoutElement.style.paddingRight\n      };\n\n      if (this.layoutDirectionService.isLtr()) {\n        layoutElement.style.paddingRight = `${scrollWidth}px`;\n      } else {\n        layoutElement.style.paddingLeft = `${scrollWidth}px`;\n      }\n    }\n\n    enableScroll() {\n      if (this.isScrollBlocked) {\n        this.isScrollBlocked = false;\n        this.renderer.removeClass(this.document.documentElement, this.scrollBlockClass);\n        this.scrollableContainerRef.nativeElement.style.overflow = this.scrollableContainerOverflowOldValue;\n\n        if (this.layoutPaddingOldValue) {\n          const layoutElement = this.layoutContainerRef.nativeElement;\n          layoutElement.style.paddingLeft = this.layoutPaddingOldValue.left;\n          layoutElement.style.paddingRight = this.layoutPaddingOldValue.right;\n          this.layoutPaddingOldValue = null;\n        }\n      }\n    }\n\n  }\n\n  NbLayoutComponent.ɵfac = function NbLayoutComponent_Factory(t) {\n    return new (t || NbLayoutComponent)(ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(NbSpinnerService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbLayoutScrollService), ɵngcc0.ɵɵdirectiveInject(NbLayoutRulerService), ɵngcc0.ɵɵdirectiveInject(NbRestoreScrollTopHelper), ɵngcc0.ɵɵdirectiveInject(NbOverlayContainerAdapter));\n  };\n\n  NbLayoutComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbLayoutComponent,\n    selectors: [[\"nb-layout\"]],\n    viewQuery: function NbLayoutComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c9, 5, ViewContainerRef);\n        ɵngcc0.ɵɵviewQuery(_c10, 5, ElementRef);\n        ɵngcc0.ɵɵviewQuery(_c11, 5, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.veryTopRef = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollableContainerRef = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.layoutContainerRef = _t.first);\n      }\n    },\n    hostVars: 6,\n    hostBindings: function NbLayoutComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"scroll\", function NbLayoutComponent_scroll_HostBindingHandler($event) {\n          return ctx.onScroll($event);\n        }, false, ɵngcc0.ɵɵresolveWindow)(\"resize\", function NbLayoutComponent_resize_HostBindingHandler($event) {\n          return ctx.onResize($event);\n        }, false, ɵngcc0.ɵɵresolveWindow);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"window-mode\", ctx.windowModeValue)(\"with-scroll\", ctx.withScrollValue)(\"with-subheader\", ctx.withSubheader);\n      }\n    },\n    inputs: {\n      center: \"center\",\n      windowMode: \"windowMode\",\n      withScroll: \"withScroll\",\n      restoreScrollTop: \"restoreScrollTop\"\n    },\n    ngContentSelectors: _c13,\n    decls: 12,\n    vars: 2,\n    consts: [[1, \"scrollable-container\", 3, \"scroll\"], [\"scrollableContainer\", \"\"], [1, \"layout\"], [\"layoutContainer\", \"\"], [1, \"layout-container\"], [1, \"content\"], [1, \"columns\"]],\n    template: function NbLayoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c12);\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"scroll\", function NbLayoutComponent_Template_div_scroll_0_listener($event) {\n          return ctx.onScroll($event);\n        });\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2, 3);\n        ɵngcc0.ɵɵprojection(4);\n        ɵngcc0.ɵɵelementStart(5, \"div\", 4);\n        ɵngcc0.ɵɵprojection(6, 1);\n        ɵngcc0.ɵɵelementStart(7, \"div\", 5);\n        ɵngcc0.ɵɵprojection(8, 2);\n        ɵngcc0.ɵɵelementStart(9, \"div\", 6);\n        ɵngcc0.ɵɵprojection(10, 3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵprojection(11, 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(7);\n        ɵngcc0.ɵɵclassProp(\"center\", ctx.centerValue);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{-webkit-font-smoothing:antialiased}[dir=ltr]   [_nghost-%COMP%]{text-align:left}[dir=rtl]   [_nghost-%COMP%]{text-align:right}[_nghost-%COMP%]   .layout[_ngcontent-%COMP%]{display:flex;flex-direction:column}[_nghost-%COMP%]     nb-layout-header{display:block}[_nghost-%COMP%]     nb-layout-header nav{align-items:center;justify-content:flex-start;display:flex}[_nghost-%COMP%]     nb-layout-header.fixed{position:fixed;top:0;left:0;right:0;z-index:1040}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.left{order:2}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:2}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.right{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar.end{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]     nb-sidebar .fixed{position:fixed;width:100%;overflow-y:auto;height:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:column;min-width:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content.center[_ngcontent-%COMP%]{max-width:100%;position:relative;margin-left:auto;margin-right:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]{display:flex;flex:1;-ms-flex:1 1 auto;flex-direction:row;width:100%}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column{order:1;flex:1 0;min-width:0}[dir=ltr]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:0}[dir=rtl]   [_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.left{order:2}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .columns[_ngcontent-%COMP%]     nb-layout-column.start{order:0}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer{display:block;margin-top:auto}[_nghost-%COMP%]   .layout-container[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]     nb-layout-footer nav{justify-content:center;display:flex}\"]\n  });\n  return NbLayoutComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * A container component which determines a content position inside of the layout.\n * The layout could contain unlimited columns (not including the sidebars).\n *\n * By default the columns are ordered from the left to the right,\n * but it's also possible to overwrite this behavior by setting a `left` attribute to the column,\n * moving it to the very first position:\n *\n * @stacked-example(Column Left, layout/layout-column-left.component)\n */\n\n\nlet NbLayoutColumnComponent = /*#__PURE__*/(() => {\n  class NbLayoutColumnComponent {\n    /**\n     * Move the column to the very left position in the layout.\n     * @param {boolean} val\n     */\n    set left(val) {\n      this.leftValue = convertToBoolProperty(val);\n      this.startValue = false;\n    }\n    /**\n     * Make column first in the layout.\n     * @param {boolean} val\n     */\n\n\n    set start(val) {\n      this.startValue = convertToBoolProperty(val);\n      this.leftValue = false;\n    }\n\n  }\n\n  NbLayoutColumnComponent.ɵfac = function NbLayoutColumnComponent_Factory(t) {\n    return new (t || NbLayoutColumnComponent)();\n  };\n\n  NbLayoutColumnComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbLayoutColumnComponent,\n    selectors: [[\"nb-layout-column\"]],\n    hostVars: 4,\n    hostBindings: function NbLayoutColumnComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"left\", ctx.leftValue)(\"start\", ctx.startValue);\n      }\n    },\n    inputs: {\n      left: \"left\",\n      start: \"start\"\n    },\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbLayoutColumnComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbLayoutColumnComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Page header component.\n * Located on top of the page above the layout columns and sidebars.\n * Could be made `fixed` by setting the corresponding property. In the fixed mode the header becomes\n * sticky to the top of the nb-layout (to of the page). Here's an example:\n *\n * @stacked-example(Fixed Header, layout/layout-fixed-header.component)\n *\n * In a pair with sidebar it is possible to setup a configuration when header is placed on a side of the sidebar\n * and not on top of it. To achieve this simply put a `subheader` property to the header like this:\n * ```html\n * <nb-layout-header subheader></nb-layout-header>\n * ```\n * @stacked-example(Subheader, layout/layout-sidebar-subheader.component)\n * Note that in such configuration sidebar shadow is removed and header cannot be make `fixed`.\n *\n * Same way you can put both `fixed` and `clipped` headers adding creating a sub-header for your app:\n *\n * @stacked-example(Subheader, layout/layout-subheader.component)\n *\n * @styles\n *\n * header-background-color:\n * header-text-color:\n * header-text-font-family:\n * header-text-font-size:\n * header-text-font-weight:\n * header-text-line-height:\n * header-height:\n * header-padding:\n * header-shadow:\n */\n\n\nlet NbLayoutHeaderComponent = /*#__PURE__*/(() => {\n  class NbLayoutHeaderComponent {\n    constructor(layout) {\n      this.layout = layout;\n    }\n    /**\n     * Makes the header sticky to the top of the nb-layout.\n     * @param {boolean} val\n     */\n\n\n    set fixed(val) {\n      this.fixedValue = convertToBoolProperty(val);\n    }\n    /**\n     * Places header on a side of the sidebar, and not above.\n     * Disables fixed mode for this header and remove a shadow from the sidebar.\n     * @param {boolean} val\n     */\n\n\n    set subheader(val) {\n      this.subheaderValue = convertToBoolProperty(val);\n      this.fixedValue = false;\n      this.layout.withSubheader = this.subheaderValue;\n    }\n\n  }\n\n  NbLayoutHeaderComponent.ɵfac = function NbLayoutHeaderComponent_Factory(t) {\n    return new (t || NbLayoutHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutComponent));\n  };\n\n  NbLayoutHeaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbLayoutHeaderComponent,\n    selectors: [[\"nb-layout-header\"]],\n    hostVars: 4,\n    hostBindings: function NbLayoutHeaderComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"fixed\", ctx.fixedValue)(\"subheader\", ctx.subheaderValue);\n      }\n    },\n    inputs: {\n      fixed: \"fixed\",\n      subheader: \"subheader\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 2,\n    template: function NbLayoutHeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"nav\");\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"fixed\", ctx.fixedValue);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbLayoutHeaderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Page footer.\n * Located under the nb-layout content (specifically, under the columns).\n * Could be made `fixed`, becoming sticky to the bottom of the view port (window).\n *\n * @styles\n *\n * footer-background-color:\n * footer-text-color:\n * footer-text-font-family:\n * footer-text-font-size:\n * footer-text-font-weight:\n * footer-text-line-height:\n * footer-text-highlight-color:\n * footer-height:\n * footer-padding:\n * footer-divider-color:\n * footer-divider-style:\n * footer-divider-width:\n * footer-shadow:\n */\n\n\nlet NbLayoutFooterComponent = /*#__PURE__*/(() => {\n  class NbLayoutFooterComponent {\n    /**\n     * Makes the footer sticky to the bottom of the window.\n     * @param {boolean} val\n     */\n    set fixed(val) {\n      this.fixedValue = convertToBoolProperty(val);\n    }\n\n  }\n\n  NbLayoutFooterComponent.ɵfac = function NbLayoutFooterComponent_Factory(t) {\n    return new (t || NbLayoutFooterComponent)();\n  };\n\n  NbLayoutFooterComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbLayoutFooterComponent,\n    selectors: [[\"nb-layout-footer\"]],\n    hostVars: 2,\n    hostBindings: function NbLayoutFooterComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"fixed\", ctx.fixedValue);\n      }\n    },\n    inputs: {\n      fixed: \"fixed\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 2,\n    template: function NbLayoutFooterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"nav\");\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"fixed\", ctx.fixedValue);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbLayoutFooterComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_LAYOUT_COMPONENTS = [NbLayoutComponent, NbLayoutColumnComponent, NbLayoutFooterComponent, NbLayoutHeaderComponent];\nlet NbLayoutModule = /*#__PURE__*/(() => {\n  class NbLayoutModule {}\n\n  NbLayoutModule.ɵfac = function NbLayoutModule_Factory(t) {\n    return new (t || NbLayoutModule)();\n  };\n\n  NbLayoutModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbLayoutModule\n  });\n  NbLayoutModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [NbRestoreScrollTopHelper],\n    imports: [[NbSharedModule]]\n  });\n  return NbLayoutModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbLayoutModule, {\n    declarations: [NbLayoutComponent, NbLayoutColumnComponent, NbLayoutFooterComponent, NbLayoutHeaderComponent],\n    imports: [NbSharedModule],\n    exports: [NbLayoutComponent, NbLayoutColumnComponent, NbLayoutFooterComponent, NbLayoutHeaderComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst itemClick$ = new Subject();\nconst addItems$ = new ReplaySubject(1);\nconst navigateHome$ = new ReplaySubject(1);\nconst getSelectedItem$ = new ReplaySubject(1);\nconst itemSelect$ = new ReplaySubject(1);\nconst itemHover$ = new ReplaySubject(1);\nconst submenuToggle$ = new ReplaySubject(1);\nconst collapseAll$ = new ReplaySubject(1); // TODO: check if we need both URL and LINK\n\n/**\n *\n *\n * Menu Item options example\n * @stacked-example(Menu Link Parameters, menu/menu-link-params.component)\n *\n *\n */\n\nclass NbMenuItem {\n  constructor() {\n    /**\n     * Item is selected when partly or fully equal to the current url\n     * @type {string}\n     */\n    this.pathMatch = 'full';\n  }\n  /**\n   * @returns item parents in top-down order\n   */\n\n\n  static getParents(item) {\n    const parents = [];\n    let parent = item.parent;\n\n    while (parent) {\n      parents.unshift(parent);\n      parent = parent.parent;\n    }\n\n    return parents;\n  }\n\n  static isParent(item, possibleChild) {\n    return possibleChild.parent ? possibleChild.parent === item || this.isParent(item, possibleChild.parent) : false;\n  }\n\n} // TODO: map select events to router change events\n// TODO: review the interface\n\n/**\n *\n *\n * Menu Service. Allows you to listen to menu events, or to interact with a menu.\n * @stacked-example(Menu Service, menu/menu-service.component)\n *\n *\n */\n\n\nlet NbMenuService = /*#__PURE__*/(() => {\n  class NbMenuService {\n    /**\n     * Add items to the end of the menu items list\n     * @param {List<NbMenuItem>} items\n     * @param {string} tag\n     */\n    addItems(items, tag) {\n      addItems$.next({\n        tag,\n        items\n      });\n    }\n    /**\n     * Collapses all menu items\n     * @param {string} tag\n     */\n\n\n    collapseAll(tag) {\n      collapseAll$.next({\n        tag\n      });\n    }\n    /**\n     * Navigate to the home menu item\n     * @param {string} tag\n     */\n\n\n    navigateHome(tag) {\n      navigateHome$.next({\n        tag\n      });\n    }\n    /**\n     * Returns currently selected item. Won't subscribe to the future events.\n     * @param {string} tag\n     * @returns {Observable<{tag: string; item: NbMenuItem}>}\n     */\n\n\n    getSelectedItem(tag) {\n      const listener = new BehaviorSubject(null);\n      getSelectedItem$.next({\n        tag,\n        listener\n      });\n      return listener.asObservable();\n    }\n\n    onItemClick() {\n      return itemClick$.pipe(share());\n    }\n\n    onItemSelect() {\n      return itemSelect$.pipe(share());\n    }\n\n    onItemHover() {\n      return itemHover$.pipe(share());\n    }\n\n    onSubmenuToggle() {\n      return submenuToggle$.pipe(share());\n    }\n\n  }\n\n  NbMenuService.ɵfac = function NbMenuService_Factory(t) {\n    return new (t || NbMenuService)();\n  };\n\n  NbMenuService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbMenuService,\n    factory: NbMenuService.ɵfac\n  });\n  return NbMenuService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbMenuInternalService = /*#__PURE__*/(() => {\n  class NbMenuInternalService {\n    constructor(location) {\n      this.location = location;\n    }\n\n    prepareItems(items) {\n      const defaultItem = new NbMenuItem();\n      items.forEach(i => {\n        this.applyDefaults(i, defaultItem);\n        this.setParent(i);\n      });\n    }\n\n    selectFromUrl(items, tag, collapseOther = false) {\n      const selectedItem = this.findItemByUrl(items);\n\n      if (selectedItem) {\n        this.selectItem(selectedItem, items, collapseOther, tag);\n      }\n    }\n\n    selectItem(item, items, collapseOther = false, tag) {\n      const unselectedItems = this.resetSelection(items);\n      const collapsedItems = collapseOther ? this.collapseItems(items) : [];\n\n      for (const parent of NbMenuItem.getParents(item)) {\n        parent.selected = true; // emit event only for items that weren't selected before ('unselectedItems' contains items that were selected)\n\n        if (!unselectedItems.includes(parent)) {\n          this.itemSelect(parent, tag);\n        }\n\n        const wasNotExpanded = !parent.expanded;\n        parent.expanded = true;\n        const i = collapsedItems.indexOf(parent); // emit event only for items that weren't expanded before.\n        // 'collapsedItems' contains items that were expanded, so no need to emit event.\n        // in case 'collapseOther' is false, 'collapsedItems' will be empty,\n        // so also check if item isn't expanded already ('wasNotExpanded').\n\n        if (i === -1 && wasNotExpanded) {\n          this.submenuToggle(parent, tag);\n        } else {\n          collapsedItems.splice(i, 1);\n        }\n      }\n\n      item.selected = true; // emit event only for items that weren't selected before ('unselectedItems' contains items that were selected)\n\n      if (!unselectedItems.includes(item)) {\n        this.itemSelect(item, tag);\n      } // remaining items which wasn't expanded back after expanding all currently selected items\n\n\n      for (const collapsedItem of collapsedItems) {\n        this.submenuToggle(collapsedItem, tag);\n      }\n    }\n\n    collapseAll(items, tag, except) {\n      const collapsedItems = this.collapseItems(items, except);\n\n      for (const item of collapsedItems) {\n        this.submenuToggle(item, tag);\n      }\n    }\n\n    onAddItem() {\n      return addItems$.pipe(share());\n    }\n\n    onNavigateHome() {\n      return navigateHome$.pipe(share());\n    }\n\n    onCollapseAll() {\n      return collapseAll$.pipe(share());\n    }\n\n    onGetSelectedItem() {\n      return getSelectedItem$.pipe(share());\n    }\n\n    itemHover(item, tag) {\n      itemHover$.next({\n        tag,\n        item\n      });\n    }\n\n    submenuToggle(item, tag) {\n      submenuToggle$.next({\n        tag,\n        item\n      });\n    }\n\n    itemSelect(item, tag) {\n      itemSelect$.next({\n        tag,\n        item\n      });\n    }\n\n    itemClick(item, tag) {\n      itemClick$.next({\n        tag,\n        item\n      });\n    }\n    /**\n     * Unselect all given items deeply.\n     * @param items array of items to unselect.\n     * @returns items which selected value was changed.\n     */\n\n\n    resetSelection(items) {\n      const unselectedItems = [];\n\n      for (const item of items) {\n        if (item.selected) {\n          unselectedItems.push(item);\n        }\n\n        item.selected = false;\n\n        if (item.children) {\n          unselectedItems.push(...this.resetSelection(item.children));\n        }\n      }\n\n      return unselectedItems;\n    }\n    /**\n     * Collapse all given items deeply.\n     * @param items array of items to collapse.\n     * @param except menu item which shouldn't be collapsed, also disables collapsing for parents of this item.\n     * @returns items which expanded value was changed.\n     */\n\n\n    collapseItems(items, except) {\n      const collapsedItems = [];\n\n      for (const item of items) {\n        if (except && (item === except || NbMenuItem.isParent(item, except))) {\n          continue;\n        }\n\n        if (item.expanded) {\n          collapsedItems.push(item);\n        }\n\n        item.expanded = false;\n\n        if (item.children) {\n          collapsedItems.push(...this.collapseItems(item.children));\n        }\n      }\n\n      return collapsedItems;\n    }\n\n    applyDefaults(item, defaultItem) {\n      const menuItem = Object.assign({}, item);\n      Object.assign(item, defaultItem, menuItem);\n      item.children && item.children.forEach(child => {\n        this.applyDefaults(child, defaultItem);\n      });\n    }\n\n    setParent(item) {\n      item.children && item.children.forEach(child => {\n        child.parent = item;\n        this.setParent(child);\n      });\n    }\n    /**\n     * Find deepest item which link matches current URL path.\n     * @param items array of items to search in.\n     * @returns found item of undefined.\n     */\n\n\n    findItemByUrl(items) {\n      let selectedItem;\n      items.some(item => {\n        if (item.children) {\n          selectedItem = this.findItemByUrl(item.children);\n        }\n\n        if (!selectedItem && this.isSelectedInUrl(item)) {\n          selectedItem = item;\n        }\n\n        return selectedItem;\n      });\n      return selectedItem;\n    }\n\n    isSelectedInUrl(item) {\n      const exact = item.pathMatch === 'full';\n      const link = item.link;\n      const isSelectedInPath = exact ? isUrlPathEqual(this.location.path(), link) : isUrlPathContain(this.location.path(), link);\n\n      if (isSelectedInPath && item.fragment != null) {\n        return exact ? isFragmentEqual(this.location.path(true), item.fragment) : isFragmentContain(this.location.path(true), item.fragment);\n      }\n\n      return isSelectedInPath;\n    }\n\n  }\n\n  NbMenuInternalService.ɵfac = function NbMenuInternalService_Factory(t) {\n    return new (t || NbMenuInternalService)(ɵngcc0.ɵɵinject(ɵngcc2.Location));\n  };\n\n  NbMenuInternalService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbMenuInternalService,\n    factory: NbMenuInternalService.ɵfac\n  });\n  return NbMenuInternalService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nvar NbToggleStates = /*#__PURE__*/(() => {\n  (function (NbToggleStates) {\n    NbToggleStates[\"Expanded\"] = \"expanded\";\n    NbToggleStates[\"Collapsed\"] = \"collapsed\";\n  })(NbToggleStates || (NbToggleStates = {}));\n\n  return NbToggleStates;\n})();\nlet NbMenuItemComponent = /*#__PURE__*/(() => {\n  class NbMenuItemComponent {\n    constructor(menuService, directionService) {\n      this.menuService = menuService;\n      this.directionService = directionService;\n      this.menuItem = null;\n      this.hoverItem = new EventEmitter();\n      this.toggleSubMenu = new EventEmitter();\n      this.selectItem = new EventEmitter();\n      this.itemClick = new EventEmitter();\n      this.destroy$ = new Subject();\n    }\n\n    ngDoCheck() {\n      this.toggleState = this.menuItem.expanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed;\n    }\n\n    ngAfterViewInit() {\n      this.menuService.onSubmenuToggle().pipe(filter(({\n        item\n      }) => item === this.menuItem), map(({\n        item\n      }) => item.expanded), takeUntil(this.destroy$)).subscribe(isExpanded => this.toggleState = isExpanded ? NbToggleStates.Expanded : NbToggleStates.Collapsed);\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    onToggleSubMenu(item) {\n      this.toggleSubMenu.emit(item);\n    }\n\n    onHoverItem(item) {\n      this.hoverItem.emit(item);\n    }\n\n    onSelectItem(item) {\n      this.selectItem.emit(item);\n    }\n\n    onItemClick(item) {\n      this.itemClick.emit(item);\n    }\n\n    getExpandStateIcon() {\n      if (this.menuItem.expanded) {\n        return 'chevron-down-outline';\n      }\n\n      return this.directionService.isLtr() ? 'chevron-left-outline' : 'chevron-right-outline';\n    }\n\n  }\n\n  NbMenuItemComponent.ɵfac = function NbMenuItemComponent_Factory(t) {\n    return new (t || NbMenuItemComponent)(ɵngcc0.ɵɵdirectiveInject(NbMenuService), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService));\n  };\n\n  NbMenuItemComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbMenuItemComponent,\n    selectors: [[\"\", \"nbMenuItem\", \"\"]],\n    inputs: {\n      menuItem: \"menuItem\",\n      badge: \"badge\"\n    },\n    outputs: {\n      hoverItem: \"hoverItem\",\n      toggleSubMenu: \"toggleSubMenu\",\n      selectItem: \"selectItem\",\n      itemClick: \"itemClick\"\n    },\n    attrs: _c14,\n    decls: 8,\n    vars: 6,\n    consts: [[4, \"ngIf\"], [3, \"routerLink\", \"queryParams\", \"fragment\", \"queryParamsHandling\", \"preserveFragment\", \"skipLocationChange\", \"active\", \"mouseenter\", \"click\", 4, \"ngIf\"], [3, \"active\", \"mouseenter\", \"click\", 4, \"ngIf\"], [\"href\", \"#\", 3, \"active\", \"click\", \"mouseenter\", 4, \"ngIf\"], [\"class\", \"menu-items\", 3, \"collapsed\", \"expanded\", 4, \"ngIf\"], [\"badgeTemplate\", \"\"], [\"class\", \"menu-icon\", 3, \"config\", 4, \"ngIf\"], [1, \"menu-icon\", 3, \"config\"], [3, \"routerLink\", \"queryParams\", \"fragment\", \"queryParamsHandling\", \"preserveFragment\", \"skipLocationChange\", \"mouseenter\", \"click\"], [1, \"menu-title\"], [3, \"ngTemplateOutlet\", 4, \"ngIf\"], [3, \"ngTemplateOutlet\"], [3, \"mouseenter\", \"click\"], [\"href\", \"#\", 3, \"click\", \"mouseenter\"], [\"pack\", \"nebular-essentials\", 1, \"expand-state\", 3, \"icon\"], [1, \"menu-items\"], [4, \"ngFor\", \"ngForOf\"], [\"nbMenuItem\", \"\", \"class\", \"menu-item\", 3, \"menuItem\", \"badge\", \"menu-group\", \"hoverItem\", \"toggleSubMenu\", \"selectItem\", \"itemClick\", 4, \"ngIf\"], [\"nbMenuItem\", \"\", 1, \"menu-item\", 3, \"menuItem\", \"badge\", \"hoverItem\", \"toggleSubMenu\", \"selectItem\", \"itemClick\"], [3, \"text\", \"dotMode\", \"status\"]],\n    template: function NbMenuItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbMenuItemComponent_span_0_Template, 3, 2, \"span\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbMenuItemComponent_a_1_Template, 5, 13, \"a\", 1);\n        ɵngcc0.ɵɵtemplate(2, NbMenuItemComponent_a_2_Template, 5, 8, \"a\", 2);\n        ɵngcc0.ɵɵtemplate(3, NbMenuItemComponent_a_3_Template, 5, 7, \"a\", 2);\n        ɵngcc0.ɵɵtemplate(4, NbMenuItemComponent_a_4_Template, 6, 8, \"a\", 3);\n        ɵngcc0.ɵɵtemplate(5, NbMenuItemComponent_ul_5_Template, 2, 6, \"ul\", 4);\n        ɵngcc0.ɵɵtemplate(6, NbMenuItemComponent_ng_template_6_Template, 1, 3, \"ng-template\", null, 5, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.menuItem.group);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.menuItem.link && !ctx.menuItem.url && !ctx.menuItem.children && !ctx.menuItem.group);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.menuItem.url && !ctx.menuItem.children && !ctx.menuItem.link && !ctx.menuItem.group);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.menuItem.children && !ctx.menuItem.link && !ctx.menuItem.url && !ctx.menuItem.group);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.menuItem.children);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.menuItem.children);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgIf, NbIconComponent, ɵngcc5.RouterLinkWithHref, ɵngcc2.NgTemplateOutlet, ɵngcc2.NgForOf, NbMenuItemComponent, NbBadgeComponent];\n    },\n    encapsulation: 2,\n    data: {\n      animation: [trigger('toggle', [state(NbToggleStates.Collapsed, style({\n        height: '0',\n        margin: '0'\n      })), state(NbToggleStates.Expanded, style({\n        height: '*'\n      })), transition(`${NbToggleStates.Collapsed} <=> ${NbToggleStates.Expanded}`, animate(300))])]\n    }\n  });\n  return NbMenuItemComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Vertical menu component.\n *\n * Accepts a list of menu items and renders them accordingly. Supports multi-level menus.\n *\n * Basic example\n * @stacked-example(Showcase, menu/menu-showcase.component)\n *\n * ```ts\n * // ...\n * items: NbMenuItem[] = [\n *  {\n *    title: home,\n *    link: '/'\n *  },\n *  {\n *    title: dashboard,\n *    link: 'dashboard'\n *  }\n * ];\n * // ...\n * <nb-menu [items]=\"items\"></nb-menu>\n * ```\n * ### Installation\n *\n * Import `NbMenuModule.forRoot()` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbMenuModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n * and `NbMenuModule` to your feature module where the component should be shown:\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbMenuModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Two-level menu example\n * @stacked-example(Two Levels, menu/menu-children.component)\n *\n *\n * Autocollapse menu example\n * @stacked-example(Autocollapse Menu, menu/menu-autocollapse.component)\n *\n * Menu badge\n * @stacked-example(Menu item badge, menu/menu-badge.component)\n *\n * @styles\n *\n * menu-background-color:\n * menu-text-color:\n * menu-text-font-family:\n * menu-text-font-size:\n * menu-text-font-weight:\n * menu-text-line-height:\n * menu-group-text-color:\n * menu-item-border-radius:\n * menu-item-padding:\n * menu-item-hover-background-color:\n * menu-item-hover-cursor:\n * menu-item-hover-text-color:\n * menu-item-icon-hover-color:\n * menu-item-active-background-color:\n * menu-item-active-text-color:\n * menu-item-icon-active-color:\n * menu-item-icon-color:\n * menu-item-icon-margin:\n * menu-item-icon-width:\n * menu-item-divider-color:\n * menu-item-divider-style:\n * menu-item-divider-width:\n * menu-submenu-background-color:\n * menu-submenu-text-color:\n * menu-submenu-margin:\n * menu-submenu-padding:\n * menu-submenu-item-border-color:\n * menu-submenu-item-border-style:\n * menu-submenu-item-border-width:\n * menu-submenu-item-border-radius:\n * menu-submenu-item-padding:\n * menu-submenu-item-hover-background-color:\n * menu-submenu-item-hover-border-color:\n * menu-submenu-item-hover-text-color:\n * menu-submenu-item-icon-hover-color:\n * menu-submenu-item-active-background-color:\n * menu-submenu-item-active-border-color:\n * menu-submenu-item-active-text-color:\n * menu-submenu-item-icon-active-color:\n * menu-submenu-item-active-hover-background-color:\n * menu-submenu-item-active-hover-border-color:\n * menu-submenu-item-active-hover-text-color:\n * menu-submenu-item-icon-active-hover-color:\n */\n\n\nlet NbMenuComponent = /*#__PURE__*/(() => {\n  class NbMenuComponent {\n    constructor(window, platformId, menuInternalService, router) {\n      this.window = window;\n      this.platformId = platformId;\n      this.menuInternalService = menuInternalService;\n      this.router = router;\n      this._autoCollapse = false;\n      this.destroy$ = new Subject();\n    }\n    /**\n     * Collapse all opened submenus on the toggle event\n     * Default value is \"false\"\n     * @type boolean\n     */\n\n\n    get autoCollapse() {\n      return this._autoCollapse;\n    }\n\n    set autoCollapse(value) {\n      this._autoCollapse = convertToBoolProperty(value);\n    }\n\n    ngOnInit() {\n      this.menuInternalService.prepareItems(this.items);\n      this.menuInternalService.onAddItem().pipe(filter(data => this.compareTag(data.tag)), takeUntil(this.destroy$)).subscribe(data => this.onAddItem(data));\n      this.menuInternalService.onNavigateHome().pipe(filter(data => this.compareTag(data.tag)), takeUntil(this.destroy$)).subscribe(() => this.navigateHome());\n      this.menuInternalService.onGetSelectedItem().pipe(filter(data => this.compareTag(data.tag)), takeUntil(this.destroy$)).subscribe(data => {\n        data.listener.next({\n          tag: this.tag,\n          item: this.getSelectedItem(this.items)\n        });\n      });\n      this.menuInternalService.onCollapseAll().pipe(filter(data => this.compareTag(data.tag)), takeUntil(this.destroy$)).subscribe(() => this.collapseAll());\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd), takeUntil(this.destroy$)).subscribe(() => {\n        this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapse);\n      });\n    }\n\n    ngAfterViewInit() {\n      setTimeout(() => this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapse));\n    }\n\n    onAddItem(data) {\n      this.items.push(...data.items);\n      this.menuInternalService.prepareItems(this.items);\n      this.menuInternalService.selectFromUrl(this.items, this.tag, this.autoCollapse);\n    }\n\n    onHoverItem(item) {\n      this.menuInternalService.itemHover(item, this.tag);\n    }\n\n    onToggleSubMenu(item) {\n      if (this.autoCollapse) {\n        this.menuInternalService.collapseAll(this.items, this.tag, item);\n      }\n\n      item.expanded = !item.expanded;\n      this.menuInternalService.submenuToggle(item, this.tag);\n    } // TODO: is not fired on page reload\n\n\n    onSelectItem(item) {\n      this.menuInternalService.selectItem(item, this.items, this.autoCollapse, this.tag);\n    }\n\n    onItemClick(item) {\n      this.menuInternalService.itemClick(item, this.tag);\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    navigateHome() {\n      const homeItem = this.getHomeItem(this.items);\n\n      if (homeItem) {\n        if (homeItem.link) {\n          const extras = {\n            queryParams: homeItem.queryParams,\n            queryParamsHandling: homeItem.queryParamsHandling,\n            fragment: homeItem.fragment,\n            preserveFragment: homeItem.preserveFragment\n          };\n          this.router.navigate([homeItem.link], extras);\n        }\n\n        if (homeItem.url && isPlatformBrowser(this.platformId)) {\n          this.window.location.href = homeItem.url;\n        }\n      }\n    }\n\n    collapseAll() {\n      this.menuInternalService.collapseAll(this.items, this.tag);\n    }\n\n    getHomeItem(items) {\n      for (const item of items) {\n        if (item.home) {\n          return item;\n        }\n\n        const homeItem = item.children && this.getHomeItem(item.children);\n\n        if (homeItem) {\n          return homeItem;\n        }\n      }\n    }\n\n    compareTag(tag) {\n      return !tag || tag === this.tag;\n    }\n\n    getSelectedItem(items) {\n      let selected = null;\n      items.forEach(item => {\n        if (item.selected) {\n          selected = item;\n        }\n\n        if (item.selected && item.children && item.children.length > 0) {\n          selected = this.getSelectedItem(item.children);\n        }\n      });\n      return selected;\n    }\n\n  }\n\n  NbMenuComponent.ɵfac = function NbMenuComponent_Factory(t) {\n    return new (t || NbMenuComponent)(ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NbMenuInternalService), ɵngcc0.ɵɵdirectiveInject(ɵngcc5.Router));\n  };\n\n  NbMenuComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbMenuComponent,\n    selectors: [[\"nb-menu\"]],\n    inputs: {\n      autoCollapse: \"autoCollapse\",\n      tag: \"tag\",\n      items: \"items\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"menu-items\"], [4, \"ngFor\", \"ngForOf\"], [\"nbMenuItem\", \"\", \"class\", \"menu-item\", 3, \"menuItem\", \"badge\", \"menu-group\", \"hoverItem\", \"toggleSubMenu\", \"selectItem\", \"itemClick\", 4, \"ngIf\"], [\"nbMenuItem\", \"\", 1, \"menu-item\", 3, \"menuItem\", \"badge\", \"hoverItem\", \"toggleSubMenu\", \"selectItem\", \"itemClick\"]],\n    template: function NbMenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbMenuComponent_ng_container_1_Template, 2, 1, \"ng-container\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.items);\n      }\n    },\n    directives: [ɵngcc2.NgForOf, ɵngcc2.NgIf, NbMenuItemComponent],\n    styles: [\"[_nghost-%COMP%]    {display:block}[_nghost-%COMP%]     .menu-items, [_nghost-%COMP%]     .menu-item>.menu-items{list-style-type:none;overflow:hidden}[_nghost-%COMP%]     .menu-item a{display:flex;text-decoration:none;align-items:center}[_nghost-%COMP%]     .menu-item a .menu-title{flex:1 0 auto}[dir=rtl]   [_nghost-%COMP%]     .menu-item a .menu-title{text-align:right}[_nghost-%COMP%]     .menu-item nb-badge{position:static}[_nghost-%COMP%]     .menu-group span{display:flex}\"]\n  });\n  return NbMenuComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Badge is a simple labeling component.\n * It can be used to add additional information to any content or highlight unread items.\n *\n * Element is absolute positioned, so parent should be\n * [positioned element](https://developer.mozilla.org/en-US/docs/Web/CSS/position).\n * It means parent `position` should be set to anything except `static`, e.g. `relative`,\n * `absolute`, `fixed`, or `sticky`.\n *\n * ### Installation\n *\n * Import `NbBadgeModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbBadgeModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Badge with default position and status(color):\n *\n * ```html\n * <nb-badge text=\"badgeText\"></nb-badge>\n * ```\n *\n * For example, badge can be placed into nb-card header:\n * @stacked-example(Showcase, badge/badge-showcase.component)\n *\n * Badge located on the bottom right with warning status:\n *\n * ```html\n * <nb-badge text=\"badgeText\" status=\"warning\" position=\"bottom right\">\n * </nb-badge>\n * ```\n *\n * @styles\n *\n * badge-border-radius:\n * badge-text-font-family:\n * badge-text-font-size:\n * badge-text-font-weight:\n * badge-text-line-height:\n * badge-padding:\n * badge-basic-background-color:\n * badge-basic-text-color:\n * badge-primary-background-color:\n * badge-primary-text-color:\n * badge-success-background-color:\n * badge-success-text-color:\n * badge-info-background-color:\n * badge-info-text-color:\n * badge-warning-background-color:\n * badge-warning-text-color:\n * badge-danger-background-color:\n * badge-danger-text-color:\n * badge-control-background-color:\n * badge-control-text-color:\n */\n\n\nlet NbBadgeComponent = /*#__PURE__*/(() => {\n  class NbBadgeComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Text to display\n       * @type string\n       */\n\n      this.text = '';\n      this._defaultPosition = 'top right';\n      this._position = this._defaultPosition;\n      /**\n       * Badge status (adds specific styles):\n       * 'basic', 'primary', 'info', 'success', 'warning', 'danger', 'control'\n       */\n\n      this.status = 'basic';\n    }\n    /**\n     * Badge position\n     *\n     * Can be set to any class or to one of predefined positions:\n     * 'top left', 'top right', 'bottom left', 'bottom right',\n     * 'top start', 'top end', 'bottom start', 'bottom end'\n     * @type string\n     */\n\n\n    get position() {\n      return this._position;\n    }\n\n    set position(value) {\n      this._position = value || this._defaultPosition;\n    }\n    /**\n     * Shows badge as a dot. No text is shown.\n     * @type boolean\n     */\n\n\n    get dotMode() {\n      return this._dotMode;\n    }\n\n    set dotMode(value) {\n      this._dotMode = convertToBoolProperty(value);\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get top() {\n      return this.position.includes('top');\n    }\n\n    get right() {\n      return this.position.includes('right');\n    }\n\n    get bottom() {\n      return this.position.includes('bottom');\n    }\n\n    get left() {\n      return this.position.includes('left');\n    }\n\n    get start() {\n      return this.position.includes('start');\n    }\n\n    get end() {\n      return this.position.includes('end');\n    }\n\n    get center() {\n      return this.position.includes('center');\n    }\n\n  }\n\n  NbBadgeComponent.ɵfac = function NbBadgeComponent_Factory(t) {\n    return new (t || NbBadgeComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbBadgeComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbBadgeComponent,\n    selectors: [[\"nb-badge\"]],\n    hostVars: 32,\n    hostBindings: function NbBadgeComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"dot-mode\", ctx.dotMode)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"position-top\", ctx.top)(\"position-right\", ctx.right)(\"position-bottom\", ctx.bottom)(\"position-left\", ctx.left)(\"position-start\", ctx.start)(\"position-end\", ctx.end)(\"position-center\", ctx.center);\n      }\n    },\n    inputs: {\n      text: \"text\",\n      status: \"status\",\n      position: \"position\",\n      dotMode: \"dotMode\"\n    },\n    decls: 1,\n    vars: 1,\n    template: function NbBadgeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtext(0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵtextInterpolate(ctx.dotMode ? \"\" : ctx.text);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{position:absolute;text-align:center;white-space:nowrap;vertical-align:baseline}.position-top[_nghost-%COMP%]{top:0}.position-right[_nghost-%COMP%]{right:0}.position-bottom[_nghost-%COMP%]{bottom:0}.position-left[_nghost-%COMP%]{left:0}.position-center[_nghost-%COMP%]{top:50%;transform:translateY(-50%)}[dir=ltr]   .position-start[_nghost-%COMP%]{left:0}[dir=rtl]   .position-start[_nghost-%COMP%]{right:0}[dir=ltr]   .position-end[_nghost-%COMP%]{right:0}[dir=rtl]   .position-end[_nghost-%COMP%]{left:0}\"]\n  });\n  return NbBadgeComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbBadgeModule = /*#__PURE__*/(() => {\n  class NbBadgeModule {}\n\n  NbBadgeModule.ɵfac = function NbBadgeModule_Factory(t) {\n    return new (t || NbBadgeModule)();\n  };\n\n  NbBadgeModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbBadgeModule\n  });\n  NbBadgeModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return NbBadgeModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbBadgeModule, {\n    declarations: [NbBadgeComponent],\n    exports: [NbBadgeComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst nbMenuComponents = [NbMenuComponent, NbMenuItemComponent];\nconst NB_MENU_PROVIDERS = [NbMenuService, NbMenuInternalService];\nlet NbMenuModule = /*#__PURE__*/(() => {\n  class NbMenuModule {\n    static forRoot() {\n      return {\n        ngModule: NbMenuModule,\n        providers: [...NB_MENU_PROVIDERS]\n      };\n    }\n\n  }\n\n  NbMenuModule.ɵfac = function NbMenuModule_Factory(t) {\n    return new (t || NbMenuModule)();\n  };\n\n  NbMenuModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbMenuModule\n  });\n  NbMenuModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule, NbBadgeModule]]\n  });\n  return NbMenuModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbMenuModule, {\n    declarations: [NbMenuComponent, NbMenuItemComponent],\n    imports: [NbSharedModule, NbIconModule, NbBadgeModule],\n    exports: [NbMenuComponent, NbMenuItemComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Route tabset components.\n * Renders tabs inside of a router-outlet.\n *\n * ```ts\n *  tabs = [\n *  {\n *    title: 'Route tab #1',\n *    route: '/pages/description',\n *    icon: 'home',\n *    responsive: true, // hide title before `route-tabs-icon-only-max-width` value\n *  },\n *  {\n *    title: 'Route tab #2',\n *    route: '/pages/images',\n *    }\n *  ];\n *\n *  <nb-route-tabset [tabs]=\"tabs\"></nb-route-tabset>\n * ```\n * ### Installation\n *\n * Import `NbRouteTabsetModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbRouteTabsetModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * @stacked-example(Route Tabset, tabset/route-tabset-showcase.component)\n *\n * @styles\n *\n * route-tabset-background-color:\n * route-tabset-border-radius:\n * route-tabset-shadow:\n * route-tabset-tab-background-color:\n * route-tabset-tab-padding:\n * route-tabset-tab-text-color:\n * route-tabset-tab-text-font-family:\n * route-tabset-tab-text-font-size:\n * route-tabset-tab-text-font-weight:\n * route-tabset-tab-text-line-height:\n * route-tabset-tab-text-transform:\n * route-tabset-tab-underline-width:\n * route-tabset-tab-underline-color:\n * route-tabset-tab-active-background-color:\n * route-tabset-tab-active-text-color:\n * route-tabset-tab-active-underline-color:\n * route-tabset-tab-focus-background-color:\n * route-tabset-tab-focus-text-color:\n * route-tabset-tab-focus-underline-color:\n * route-tabset-tab-hover-background-color:\n * route-tabset-tab-hover-text-color:\n * route-tabset-tab-hover-underline-color:\n * route-tabset-tab-disabled-background-color:\n * route-tabset-tab-disabled-text-color:\n * route-tabset-tab-disabled-underline-color:\n * route-tabset-divider-color:\n * route-tabset-divider-style:\n * route-tabset-divider-width:\n * route-tabset-scrollbar-color:\n * route-tabset-scrollbar-background-color:\n * route-tabset-scrollbar-width:\n * route-tabset-tab-text-hide-breakpoint:\n */\n\n\nlet NbRouteTabsetComponent = /*#__PURE__*/(() => {\n  class NbRouteTabsetComponent {\n    constructor() {\n      this.fullWidthValue = false;\n      /**\n       * Options passed to `routerLinkActiveOptions` directive which set on tab links.\n       * `{ exact: true }` by default.\n       */\n\n      this.activeLinkOptions = {\n        exact: true\n      };\n      /**\n       * Emits when tab is selected\n       * @type {EventEmitter<any>}\n       */\n\n      this.changeTab = new EventEmitter();\n    }\n    /**\n     * Take full width of a parent\n     * @param {boolean} val\n     */\n\n\n    set fullWidth(val) {\n      this.fullWidthValue = convertToBoolProperty(val);\n    }\n\n    selectTab(tab) {\n      this.changeTab.emit(tab);\n    }\n\n  }\n\n  NbRouteTabsetComponent.ɵfac = function NbRouteTabsetComponent_Factory(t) {\n    return new (t || NbRouteTabsetComponent)();\n  };\n\n  NbRouteTabsetComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRouteTabsetComponent,\n    selectors: [[\"nb-route-tabset\"]],\n    hostVars: 2,\n    hostBindings: function NbRouteTabsetComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"full-width\", ctx.fullWidthValue);\n      }\n    },\n    inputs: {\n      activeLinkOptions: \"activeLinkOptions\",\n      fullWidth: \"fullWidth\",\n      tabs: \"tabs\"\n    },\n    outputs: {\n      changeTab: \"changeTab\"\n    },\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"route-tabset\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"route-tab disabled\", \"tabindex\", \"-1\", 3, \"responsive\", 4, \"ngIf\", \"ngIfElse\"], [\"enabled\", \"\"], [\"tabindex\", \"-1\", 1, \"route-tab\", \"disabled\"], [\"tabindex\", \"-1\", 1, \"tab-link\"], [3, \"config\", 4, \"ngIf\"], [\"class\", \"tab-text\", 4, \"ngIf\"], [3, \"config\"], [1, \"tab-text\"], [\"routerLinkActive\", \"active\", \"tabindex\", \"0\", 1, \"route-tab\", 3, \"routerLink\", \"routerLinkActiveOptions\", \"queryParams\", \"queryParamsHandling\", \"fragment\", \"preserveFragment\", \"skipLocationChange\", \"replaceUrl\", \"state\", \"click\"], [3, \"icon\", 4, \"ngIf\"], [3, \"icon\"]],\n    template: function NbRouteTabsetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbRouteTabsetComponent_ng_container_1_Template, 4, 2, \"ng-container\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(2, \"router-outlet\");\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n      }\n    },\n    directives: [ɵngcc2.NgForOf, ɵngcc5.RouterOutlet, ɵngcc2.NgIf, NbIconComponent, ɵngcc5.RouterLinkActive, ɵngcc5.RouterLink],\n    styles: [\".route-tabset[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]{margin-bottom:-1px;text-align:center;padding:0}.route-tabset[_ngcontent-%COMP%]   .route-tab.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{display:block}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;text-decoration:none;display:inline-block}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}.route-tabset[_ngcontent-%COMP%]   .route-tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[dir=ltr]   [_nghost-%COMP%]   .tab-link[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .tab-link[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:.5rem}.full-width[_nghost-%COMP%]   .route-tabset[_ngcontent-%COMP%]{justify-content:space-around}\"]\n  });\n  return NbRouteTabsetComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbRouteTabsetModule = /*#__PURE__*/(() => {\n  class NbRouteTabsetModule {}\n\n  NbRouteTabsetModule.ɵfac = function NbRouteTabsetModule_Factory(t) {\n    return new (t || NbRouteTabsetModule)();\n  };\n\n  NbRouteTabsetModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbRouteTabsetModule\n  });\n  NbRouteTabsetModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule]]\n  });\n  return NbRouteTabsetModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbRouteTabsetModule, {\n    declarations: [NbRouteTabsetComponent],\n    imports: [NbSharedModule, NbIconModule],\n    exports: [NbRouteTabsetComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst getSidebarState$ = new Subject();\nconst getSidebarResponsiveState$ = new Subject();\n/**\n * Sidebar service.\n *\n * Root module service to control the sidebar from any part of the app.\n *\n * Allows you to change sidebar state dynamically from any part of the app:\n * @stacked-example(Sidebar State, sidebar/sidebar-toggle.component)\n */\n\nlet NbSidebarService = /*#__PURE__*/(() => {\n  class NbSidebarService {\n    constructor() {\n      this.toggle$ = new Subject();\n      this.expand$ = new Subject();\n      this.collapse$ = new Subject();\n      this.compact$ = new Subject();\n    }\n    /**\n     * Subscribe to toggle events\n     *\n     * @returns Observable<{ compact: boolean, tag: string }>\n     */\n\n\n    onToggle() {\n      return this.toggle$.pipe(share());\n    }\n    /**\n     * Subscribe to expand events\n     * @returns Observable<{ tag: string }>\n     */\n\n\n    onExpand() {\n      return this.expand$.pipe(share());\n    }\n    /**\n     * Subscribe to collapse evens\n     * @returns Observable<{ tag: string }>\n     */\n\n\n    onCollapse() {\n      return this.collapse$.pipe(share());\n    }\n    /**\n     * Subscribe to compact evens\n     * @returns Observable<{ tag: string }>\n     */\n\n\n    onCompact() {\n      return this.compact$.pipe(share());\n    }\n    /**\n     * Toggle a sidebar\n     * @param {boolean} compact\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar you want to control\n     */\n\n\n    toggle(compact = false, tag) {\n      this.toggle$.next({\n        compact,\n        tag\n      });\n    }\n    /**\n     * Expands a sidebar\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar you want to control\n     */\n\n\n    expand(tag) {\n      this.expand$.next({\n        tag\n      });\n    }\n    /**\n     * Collapses a sidebar\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar you want to control\n     */\n\n\n    collapse(tag) {\n      this.collapse$.next({\n        tag\n      });\n    }\n    /**\n     * Makes sidebar compact\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar you want to control\n     */\n\n\n    compact(tag) {\n      this.compact$.next({\n        tag\n      });\n    }\n    /**\n     * Returns sidebar state observable which emits once\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar state you need\n     */\n\n\n    getSidebarState(tag) {\n      const observer = new ReplaySubject(1);\n      getSidebarState$.next({\n        observer,\n        tag\n      });\n      return observer.pipe(publish(), refCount());\n    }\n    /**\n     * Returns sidebar state observable which emits once\n     * @param {string} tag If you have multiple sidebars on the page, mark them with `tag` input property and pass it here\n     * to specify which sidebar responsive state you need\n     */\n\n\n    getSidebarResponsiveState(tag) {\n      const observer = new ReplaySubject();\n      getSidebarResponsiveState$.next({\n        observer,\n        tag\n      });\n      return observer.pipe(publish(), refCount());\n    }\n\n  }\n\n  NbSidebarService.ɵfac = function NbSidebarService_Factory(t) {\n    return new (t || NbSidebarService)();\n  };\n\n  NbSidebarService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbSidebarService,\n    factory: NbSidebarService.ɵfac\n  });\n  return NbSidebarService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Sidebar header container.\n *\n * Placeholder which contains a sidebar header content,\n * placed at the very top of the sidebar outside of the scroll area.\n */\n\n\nlet NbSidebarHeaderComponent = /*#__PURE__*/(() => {\n  class NbSidebarHeaderComponent {}\n\n  NbSidebarHeaderComponent.ɵfac = function NbSidebarHeaderComponent_Factory(t) {\n    return new (t || NbSidebarHeaderComponent)();\n  };\n\n  NbSidebarHeaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSidebarHeaderComponent,\n    selectors: [[\"nb-sidebar-header\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbSidebarHeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbSidebarHeaderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Sidebar footer container.\n *\n * Placeholder which contains a sidebar footer content,\n * placed at the very bottom of the sidebar outside of the scroll area.\n */\n\n\nlet NbSidebarFooterComponent = /*#__PURE__*/(() => {\n  class NbSidebarFooterComponent {}\n\n  NbSidebarFooterComponent.ɵfac = function NbSidebarFooterComponent_Factory(t) {\n    return new (t || NbSidebarFooterComponent)();\n  };\n\n  NbSidebarFooterComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSidebarFooterComponent,\n    selectors: [[\"nb-sidebar-footer\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbSidebarFooterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbSidebarFooterComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Layout sidebar component.\n *\n * @stacked-example(Showcase, sidebar/sidebar-showcase.component)\n *\n * ### Installation\n *\n * Import `NbSidebarModule.forRoot()` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSidebarModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n * and `NbSidebarModule` to your feature module where the component should be shown:\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSidebarModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Sidebar can be placed on the left or the right side of the layout,\n * or on start/end position of layout (depends on document direction, left to right or right to left)\n * It can be fixed (shown above the content) or can push the layout when opened.\n *\n * There are three states - `expanded`, `collapsed`, `compacted`.\n * By default sidebar content is fixed and saves its position while the page is being scrolled.\n *\n * Compacted sidebar example:\n * @stacked-example(Compacted Sidebar, sidebar/sidebar-compacted.component)\n *\n * Sidebar also supports a `responsive` behavior, listening to window size change and changing its size respectably.\n *\n * In a pair with header it is possible to setup a configuration when header is placed on a side of the sidebar\n * and not on top of it. To achieve this simply put a `subheader` property to the header like this:\n * ```html\n * <nb-layout-header subheader></nb-layout-header>\n * ```\n * @stacked-example(Subheader, layout/layout-sidebar-subheader.component)\n * Note that in such configuration sidebar shadow is removed and header cannot be make `fixed`.\n *\n * @additional-example(Right Sidebar, sidebar/sidebar-right.component)\n * @additional-example(Fixed Sidebar, sidebar/sidebar-fixed.component)\n *\n * @styles\n *\n * sidebar-background-color:\n * sidebar-text-color:\n * sidebar-text-font-family:\n * sidebar-text-font-size:\n * sidebar-text-font-weight:\n * sidebar-text-line-height:\n * sidebar-height:\n * sidebar-width:\n * sidebar-width-compact:\n * sidebar-padding:\n * sidebar-header-height:\n * sidebar-footer-height:\n * sidebar-shadow:\n * sidebar-menu-item-highlight-color:\n * sidebar-scrollbar-background-color:\n * sidebar-scrollbar-color:\n * sidebar-scrollbar-width:\n */\n\n\nlet NbSidebarComponent = /*#__PURE__*/(() => {\n  class NbSidebarComponent {\n    constructor(sidebarService, themeService, element, cd) {\n      this.sidebarService = sidebarService;\n      this.themeService = themeService;\n      this.element = element;\n      this.cd = cd;\n      this.responsiveValueChange$ = new Subject();\n      this.responsiveState = 'pc';\n      this.destroy$ = new Subject();\n      this.containerFixedValue = true;\n      this.fixedValue = false;\n      this.rightValue = false;\n      this.leftValue = true;\n      this.startValue = false;\n      this.endValue = false;\n      this._state = 'expanded';\n      this._responsive = false; // TODO: get width by the key and define only max width for the tablets and mobiles\n\n      /**\n       * Controls on which screen sizes sidebar should be switched to compacted state.\n       * Works only when responsive mode is on.\n       * Default values are `['xs', 'is', 'sm', 'md', 'lg']`.\n       *\n       * @type string[]\n       */\n\n      this.compactedBreakpoints = ['xs', 'is', 'sm', 'md', 'lg'];\n      /**\n       * Controls on which screen sizes sidebar should be switched to collapsed state.\n       * Works only when responsive mode is on.\n       * Default values are `['xs', 'is']`.\n       *\n       * @type string[]\n       */\n\n      this.collapsedBreakpoints = ['xs', 'is'];\n      /**\n       * Emits whenever sidebar state change.\n       */\n\n      this.stateChange = new EventEmitter();\n      /**\n       * Emits whenever sidebar responsive state change.\n       */\n\n      this.responsiveStateChange = new EventEmitter();\n    }\n\n    get expanded() {\n      return this.state === 'expanded';\n    }\n\n    get collapsed() {\n      return this.state === 'collapsed';\n    }\n\n    get compacted() {\n      return this.state === 'compacted';\n    }\n    /**\n     * Places sidebar on the right side\n     * @type {boolean}\n     */\n\n\n    set right(val) {\n      this.rightValue = convertToBoolProperty(val);\n      this.leftValue = !this.rightValue;\n      this.startValue = false;\n      this.endValue = false;\n    }\n    /**\n     * Places sidebar on the left side\n     * @type {boolean}\n     */\n\n\n    set left(val) {\n      this.leftValue = convertToBoolProperty(val);\n      this.rightValue = !this.leftValue;\n      this.startValue = false;\n      this.endValue = false;\n    }\n    /**\n     * Places sidebar on the start edge of layout\n     * @type {boolean}\n     */\n\n\n    set start(val) {\n      this.startValue = convertToBoolProperty(val);\n      this.endValue = !this.startValue;\n      this.leftValue = false;\n      this.rightValue = false;\n    }\n    /**\n     * Places sidebar on the end edge of layout\n     * @type {boolean}\n     */\n\n\n    set end(val) {\n      this.endValue = convertToBoolProperty(val);\n      this.startValue = !this.endValue;\n      this.leftValue = false;\n      this.rightValue = false;\n    }\n    /**\n     * Makes sidebar fixed (shown above the layout content)\n     * @type {boolean}\n     */\n\n\n    set fixed(val) {\n      this.fixedValue = convertToBoolProperty(val);\n    }\n    /**\n     * Makes sidebar container fixed\n     * @type {boolean}\n     */\n\n\n    set containerFixed(val) {\n      this.containerFixedValue = convertToBoolProperty(val);\n    }\n    /**\n     * Initial sidebar state, `expanded`|`collapsed`|`compacted`\n     * @type {string}\n     */\n\n\n    get state() {\n      return this._state;\n    }\n\n    set state(value) {\n      this._state = value;\n    }\n    /**\n     * Makes sidebar listen to media query events and change its behaviour\n     * @type {boolean}\n     */\n\n\n    get responsive() {\n      return this._responsive;\n    }\n\n    set responsive(value) {\n      if (this.responsive !== convertToBoolProperty(value)) {\n        this._responsive = !this.responsive;\n        this.responsiveValueChange$.next(this.responsive);\n      }\n    }\n\n    ngOnInit() {\n      this.sidebarService.onToggle().pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(({\n        compact\n      }) => this.toggle(compact));\n      this.sidebarService.onExpand().pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(() => this.expand());\n      this.sidebarService.onCollapse().pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(() => this.collapse());\n      this.sidebarService.onCompact().pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(() => this.compact());\n      getSidebarState$.pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(({\n        observer\n      }) => observer.next(this.state));\n      getSidebarResponsiveState$.pipe(filter(({\n        tag\n      }) => !this.tag || this.tag === tag), takeUntil(this.destroy$)).subscribe(({\n        observer\n      }) => observer.next(this.responsiveState));\n      this.responsiveValueChange$.pipe(filter(responsive => !responsive), takeUntil(this.destroy$)).subscribe(() => this.expand());\n      this.subscribeToMediaQueryChange();\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    } // TODO: this is more of a workaround, should be a better way to make components communicate to each other\n\n\n    onClick(event) {\n      const menu = this.element.nativeElement.querySelector('nb-menu');\n\n      if (menu && menu.contains(event.target)) {\n        const link = this.getMenuLink(event.target);\n\n        if (link && link.nextElementSibling && link.nextElementSibling.classList.contains('menu-items')) {\n          this.sidebarService.expand(this.tag);\n        }\n      }\n    }\n    /**\n     * Collapses the sidebar\n     */\n\n\n    collapse() {\n      this.updateState('collapsed');\n    }\n    /**\n     * Expands the sidebar\n     */\n\n\n    expand() {\n      this.updateState('expanded');\n    }\n    /**\n     * Compacts the sidebar (minimizes)\n     */\n\n\n    compact() {\n      this.updateState('compacted');\n    }\n    /**\n     * Toggles sidebar state (expanded|collapsed|compacted)\n     * @param {boolean} compact If true, then sidebar state will be changed between expanded & compacted,\n     * otherwise - between expanded & collapsed. False by default.\n     *\n     * Toggle sidebar state\n     *\n     * ```ts\n     * this.sidebar.toggle(true);\n     * ```\n     */\n\n\n    toggle(compact = false) {\n      if (this.responsive) {\n        if (this.responsiveState === 'mobile') {\n          compact = false;\n        }\n      }\n\n      if (this.state === 'compacted' || this.state === 'collapsed') {\n        this.updateState('expanded');\n      } else {\n        this.updateState(compact ? 'compacted' : 'collapsed');\n      }\n    }\n\n    subscribeToMediaQueryChange() {\n      combineLatest([this.responsiveValueChange$.pipe(startWith(this.responsive)), this.themeService.onMediaQueryChange()]).pipe(filter(([responsive]) => responsive), map(([, breakpoints]) => breakpoints), takeUntil(this.destroy$)).subscribe(([prev, current]) => {\n        const isCollapsed = this.collapsedBreakpoints.includes(current.name);\n        const isCompacted = this.compactedBreakpoints.includes(current.name);\n        let newResponsiveState;\n\n        if (isCompacted) {\n          this.fixed = this.containerFixedValue;\n          this.compact();\n          newResponsiveState = 'tablet';\n        }\n\n        if (isCollapsed) {\n          this.fixed = true;\n          this.collapse();\n          newResponsiveState = 'mobile';\n        }\n\n        if (!isCollapsed && !isCompacted && (!prev.width || prev.width < current.width)) {\n          this.expand();\n          this.fixed = false;\n          newResponsiveState = 'pc';\n        }\n\n        if (newResponsiveState && newResponsiveState !== this.responsiveState) {\n          this.responsiveState = newResponsiveState;\n          this.responsiveStateChange.emit(this.responsiveState);\n          this.cd.markForCheck();\n        }\n      });\n    }\n\n    getMenuLink(element) {\n      if (!element || element.tagName.toLowerCase() === 'nb-menu') {\n        return;\n      }\n\n      if (element.tagName.toLowerCase() === 'a') {\n        return element;\n      }\n\n      return this.getMenuLink(element.parentElement);\n    }\n\n    updateState(state$$1) {\n      if (this.state !== state$$1) {\n        this.state = state$$1;\n        this.stateChange.emit(this.state);\n        this.cd.markForCheck();\n      }\n    }\n    /**\n     * @deprecated Use `responsive` property instead\n     * @breaking-change Remove @8.0.0\n     */\n\n\n    toggleResponsive(enabled) {\n      this.responsive = enabled;\n    }\n\n  }\n\n  NbSidebarComponent.ɵfac = function NbSidebarComponent_Factory(t) {\n    return new (t || NbSidebarComponent)(ɵngcc0.ɵɵdirectiveInject(NbSidebarService), ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbSidebarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSidebarComponent,\n    selectors: [[\"nb-sidebar\"]],\n    hostVars: 16,\n    hostBindings: function NbSidebarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"fixed\", ctx.fixedValue)(\"right\", ctx.rightValue)(\"left\", ctx.leftValue)(\"start\", ctx.startValue)(\"end\", ctx.endValue)(\"expanded\", ctx.expanded)(\"collapsed\", ctx.collapsed)(\"compacted\", ctx.compacted);\n      }\n    },\n    inputs: {\n      compactedBreakpoints: \"compactedBreakpoints\",\n      collapsedBreakpoints: \"collapsedBreakpoints\",\n      right: \"right\",\n      left: \"left\",\n      start: \"start\",\n      end: \"end\",\n      fixed: \"fixed\",\n      containerFixed: \"containerFixed\",\n      state: \"state\",\n      responsive: \"responsive\",\n      tag: \"tag\"\n    },\n    outputs: {\n      stateChange: \"stateChange\",\n      responsiveStateChange: \"responsiveStateChange\"\n    },\n    ngContentSelectors: _c16,\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"main-container\"], [1, \"scrollable\", 3, \"click\"]],\n    template: function NbSidebarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c15);\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function NbSidebarComponent_Template_div_click_2_listener($event) {\n          return ctx.onClick($event);\n        });\n        ɵngcc0.ɵɵprojection(3, 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵprojection(4, 2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"main-container-fixed\", ctx.containerFixedValue);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;overflow:hidden;z-index:auto;order:0}[_nghost-%COMP%]   .scrollable[_ngcontent-%COMP%]{overflow-y:auto;overflow-x:hidden;flex:1}[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);display:flex;flex-direction:column}[_nghost-%COMP%]   .main-container-fixed[_ngcontent-%COMP%]{position:fixed}.right[_nghost-%COMP%]{margin-right:0;margin-left:auto}[dir=ltr]   .right[_nghost-%COMP%]{order:4}[dir=rtl]   .right[_nghost-%COMP%]{order:0}.end[_nghost-%COMP%]{order:4}[dir=ltr]   .end[_nghost-%COMP%]{margin-right:0;margin-left:auto}[dir=rtl]   .end[_nghost-%COMP%]{margin-left:0;margin-right:auto}.fixed[_nghost-%COMP%]{position:fixed;height:100%;z-index:999;top:0;bottom:0;left:0}.fixed.right[_nghost-%COMP%]{right:0}[dir=ltr]   .fixed.start[_nghost-%COMP%]{left:0}[dir=rtl]   .fixed.start[_nghost-%COMP%]{right:0}[dir=ltr]   .fixed.end[_nghost-%COMP%]{right:0}[dir=rtl]   .fixed.end[_nghost-%COMP%]{left:0}[_nghost-%COMP%]     nb-sidebar-footer{margin-top:auto;display:block}[_nghost-%COMP%]     nb-sidebar-header{display:block}\"],\n    changeDetection: 0\n  });\n  /**\n   * @deprecated Use NbSidebarState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.STATE_EXPANDED = 'expanded';\n  /**\n   * @deprecated Use NbSidebarState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.STATE_COLLAPSED = 'collapsed';\n  /**\n   * @deprecated Use NbSidebarState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.STATE_COMPACTED = 'compacted';\n  /**\n   * @deprecated Use NbSidebarResponsiveState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.RESPONSIVE_STATE_MOBILE = 'mobile';\n  /**\n   * @deprecated Use NbSidebarResponsiveState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.RESPONSIVE_STATE_TABLET = 'tablet';\n  /**\n   * @deprecated Use NbSidebarResponsiveState type instead\n   * @breaking-change Remove @8.0.0\n   */\n\n  NbSidebarComponent.RESPONSIVE_STATE_PC = 'pc';\n  return NbSidebarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_SIDEBAR_COMPONENTS = [NbSidebarComponent, NbSidebarFooterComponent, NbSidebarHeaderComponent];\nconst NB_SIDEBAR_PROVIDERS = [NbSidebarService];\nlet NbSidebarModule = /*#__PURE__*/(() => {\n  class NbSidebarModule {\n    static forRoot() {\n      return {\n        ngModule: NbSidebarModule,\n        providers: [...NB_SIDEBAR_PROVIDERS]\n      };\n    }\n\n  }\n\n  NbSidebarModule.ɵfac = function NbSidebarModule_Factory(t) {\n    return new (t || NbSidebarModule)();\n  };\n\n  NbSidebarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbSidebarModule\n  });\n  NbSidebarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbSidebarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSidebarModule, {\n    declarations: [NbSidebarComponent, NbSidebarFooterComponent, NbSidebarHeaderComponent],\n    imports: [NbSharedModule],\n    exports: [NbSidebarComponent, NbSidebarFooterComponent, NbSidebarHeaderComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Specific tab container.\n *\n * ```ts\n * <nb-tab tabTitle=\"Users\"\n *   badgeText=\"99+\"\n *   badgeStatus=\"danger\">\n *   <p>List of <strong>users</strong>.</p>\n * </nb-tab>\n ```\n */\n\n\nlet NbTabComponent = /*#__PURE__*/(() => {\n  class NbTabComponent {\n    constructor() {\n      this.activeValue = false;\n      this.responsiveValue = false;\n      this.disabledValue = false;\n      /**\n       * Badge status (adds specific styles):\n       * 'primary', 'info', 'success', 'warning', 'danger'\n       * @param {string} val\n       */\n\n      this.badgeStatus = 'basic';\n      this.init = false;\n    }\n    /**\n     * Use badge dot mode\n     * @type {boolean}\n     */\n\n\n    get badgeDot() {\n      return this._badgeDot;\n    }\n\n    set badgeDot(val) {\n      this._badgeDot = convertToBoolProperty(val);\n    }\n    /**\n     * Item is disabled and cannot be opened.\n     * @type {boolean}\n     */\n\n\n    get disabled() {\n      return this.disabledValue;\n    }\n\n    set disabled(val) {\n      this.disabledValue = convertToBoolProperty(val);\n    }\n    /**\n     * Show only icons when width is smaller than `tabs-icon-only-max-width`\n     * @type {boolean}\n     */\n\n\n    set responsive(val) {\n      this.responsiveValue = convertToBoolProperty(val);\n    }\n\n    get responsive() {\n      return this.responsiveValue;\n    }\n    /**\n     * Specifies active tab\n     * @returns {boolean}\n     */\n\n\n    get active() {\n      return this.activeValue;\n    }\n\n    set active(val) {\n      this.activeValue = convertToBoolProperty(val);\n\n      if (this.activeValue) {\n        this.init = true;\n      }\n    }\n    /**\n     * Lazy load content before tab selection\n     * TODO: rename, as lazy is by default, and this is more `instant load`\n     * @param {boolean} val\n     */\n\n\n    set lazyLoad(val) {\n      this.init = convertToBoolProperty(val);\n    }\n\n  }\n\n  NbTabComponent.ɵfac = function NbTabComponent_Factory(t) {\n    return new (t || NbTabComponent)();\n  };\n\n  NbTabComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTabComponent,\n    selectors: [[\"nb-tab\"]],\n    hostVars: 4,\n    hostBindings: function NbTabComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"content-active\", ctx.activeValue)(\"disabled\", ctx.disabled);\n      }\n    },\n    inputs: {\n      badgeStatus: \"badgeStatus\",\n      badgeDot: \"badgeDot\",\n      disabled: \"disabled\",\n      responsive: \"responsive\",\n      active: \"active\",\n      lazyLoad: \"lazyLoad\",\n      tabTitle: \"tabTitle\",\n      tabId: \"tabId\",\n      tabIcon: \"tabIcon\",\n      route: \"route\",\n      badgeText: \"badgeText\",\n      badgePosition: \"badgePosition\"\n    },\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"]],\n    template: function NbTabComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, NbTabComponent_ng_container_0_Template, 2, 0, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.init);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    encapsulation: 2\n  });\n  return NbTabComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})(); // TODO: Combine tabset with route-tabset, so that we can:\n// - have similar interface\n// - easy to migrate from one to another\n// - can mix them both (route/content tab)\n\n/**\n *\n * Dynamic tabset component.\n * @stacked-example(Showcase, tabset/tabset-showcase.component)\n *\n * Basic tabset example\n *\n * ```html\n * <nb-tabset>\n *  <nb-tab tabTitle=\"Simple Tab #1\">\n *    Tab content 1\n *  </nb-tab>\n *  <nb-tab tabTitle=\"Simple Tab #2\">\n *    Tab content 2\n *  </nb-tab>\n * </nb-tabset>\n * ```\n *\n * ### Installation\n *\n * Import `NbTabsetModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTabsetModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * It is also possible to set a badge to a particular tab:\n * @stacked-example(Tab With Badge, tabset/tabset-badge.component)\n *\n * and we can set it to full a width of a parent component\n * @stacked-example(Full Width, tabset/tabset-width.component)\n *\n * `tabIcon` should be used to add an icon to the tab. Icon can also be combined with title.\n * `responsive` tab property if set allows you to hide the title on smaller screens\n * (`tabs-icon-only-max-width` property) for better responsive behaviour. You can open the following example and make\n * your screen smaller - titles will be hidden in the last tabset in the list:\n *\n * @stacked-example(Icon, tabset/tabset-icon.component)\n *\n * It is also possible to disable a tab using `disabled` property:\n * @stacked-example(Disabled Tab, tabset/tabset-disabled.component)\n *\n * @styles\n *\n * tabset-background-color:\n * tabset-border-radius:\n * tabset-shadow:\n * tabset-tab-background-color:\n * tabset-tab-padding:\n * tabset-tab-text-color:\n * tabset-tab-text-font-family:\n * tabset-tab-text-font-size:\n * tabset-tab-text-font-weight:\n * tabset-tab-text-line-height:\n * tabset-tab-text-transform:\n * tabset-tab-underline-width:\n * tabset-tab-underline-color:\n * tabset-tab-active-background-color:\n * tabset-tab-active-text-color:\n * tabset-tab-active-underline-color:\n * tabset-tab-focus-background-color:\n * tabset-tab-focus-text-color:\n * tabset-tab-focus-underline-color:\n * tabset-tab-hover-background-color:\n * tabset-tab-hover-text-color:\n * tabset-tab-hover-underline-color:\n * tabset-tab-disabled-background-color:\n * tabset-tab-disabled-text-color:\n * tabset-tab-disabled-underline-color:\n * tabset-divider-color:\n * tabset-divider-style:\n * tabset-divider-width:\n * tabset-content-background-color:\n * tabset-content-padding:\n * tabset-content-text-color:\n * tabset-content-text-font-family:\n * tabset-content-text-font-size:\n * tabset-content-text-font-weight:\n * tabset-content-text-line-height:\n * tabset-scrollbar-color:\n * tabset-scrollbar-background-color:\n * tabset-scrollbar-width:\n * tabset-tab-text-hide-breakpoint:\n */\n\n\nlet NbTabsetComponent = /*#__PURE__*/(() => {\n  class NbTabsetComponent {\n    constructor(route, changeDetectorRef) {\n      this.route = route;\n      this.changeDetectorRef = changeDetectorRef;\n      this.fullWidthValue = false;\n      /**\n       * Emits when tab is selected\n       * @type EventEmitter<any>\n       */\n\n      this.changeTab = new EventEmitter();\n    }\n    /**\n     * Take full width of a parent\n     * @param {boolean} val\n     */\n\n\n    set fullWidth(val) {\n      this.fullWidthValue = convertToBoolProperty(val);\n    } // TODO: refactoring this component, avoid change detection loop\n\n\n    ngAfterContentInit() {\n      this.route.params.pipe(map(params => this.tabs.find(tab => this.routeParam ? tab.route === params[this.routeParam] : tab.active)), delay(0), map(tab => tab || this.tabs.first), filter(tab => !!tab)).subscribe(tabToSelect => {\n        this.selectTab(tabToSelect);\n        this.changeDetectorRef.markForCheck();\n      });\n    } // TODO: navigate to routeParam\n\n\n    selectTab(selectedTab) {\n      if (!selectedTab.disabled) {\n        this.tabs.forEach(tab => tab.active = tab === selectedTab);\n        this.changeTab.emit(selectedTab);\n      }\n    }\n\n  }\n\n  NbTabsetComponent.ɵfac = function NbTabsetComponent_Factory(t) {\n    return new (t || NbTabsetComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc5.ActivatedRoute), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbTabsetComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTabsetComponent,\n    selectors: [[\"nb-tabset\"]],\n    contentQueries: function NbTabsetComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbTabComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tabs = _t);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function NbTabsetComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"full-width\", ctx.fullWidthValue);\n      }\n    },\n    inputs: {\n      fullWidth: \"fullWidth\",\n      routeParam: \"routeParam\"\n    },\n    outputs: {\n      changeTab: \"changeTab\"\n    },\n    ngContentSelectors: _c18,\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"tabset\"], [\"class\", \"tab\", 3, \"responsive\", \"active\", \"disabled\", \"click\", \"keyup.space\", \"keyup.enter\", 4, \"ngFor\", \"ngForOf\"], [1, \"tab\", 3, \"click\", \"keyup.space\", \"keyup.enter\"], [\"href\", \"\", \"tabindex\", \"-1\", 1, \"tab-link\", 3, \"click\"], [3, \"config\", 4, \"ngIf\"], [\"class\", \"tab-text\", 4, \"ngIf\"], [3, \"text\", \"dotMode\", \"status\", \"position\", 4, \"ngIf\"], [3, \"config\"], [1, \"tab-text\"], [3, \"text\", \"dotMode\", \"status\", \"position\"]],\n    template: function NbTabsetComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c17);\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbTabsetComponent_li_1_Template, 5, 11, \"li\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵprojection(2);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n      }\n    },\n    directives: [ɵngcc2.NgForOf, ɵngcc2.NgIf, NbIconComponent, NbBadgeComponent],\n    styles: [\"[_nghost-%COMP%]{display:block}.full-width[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]{justify-content:space-around}[_nghost-%COMP%]     nb-tab{flex:1;-ms-flex:1 1 auto;overflow:auto;display:none}[_nghost-%COMP%]     nb-tab.content-active{display:block}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]{display:flex;flex-direction:row;list-style-type:none;margin:0;padding:0}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{margin-bottom:-1px;text-align:center;position:relative}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{display:block}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;position:relative;text-decoration:none}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]::before{position:absolute;content:'';width:100%;border-radius:3px;bottom:-2px;left:0}[_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{vertical-align:middle}[dir=ltr]   [_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .tabset[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:.5rem}\"]\n  });\n  return NbTabsetComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_TABSET_COMPONENTS = [NbTabsetComponent, NbTabComponent];\nlet NbTabsetModule = /*#__PURE__*/(() => {\n  class NbTabsetModule {}\n\n  NbTabsetModule.ɵfac = function NbTabsetModule_Factory(t) {\n    return new (t || NbTabsetModule)();\n  };\n\n  NbTabsetModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTabsetModule\n  });\n  NbTabsetModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbBadgeModule, NbIconModule]]\n  });\n  return NbTabsetModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTabsetModule, {\n    declarations: [NbTabsetComponent, NbTabComponent],\n    imports: [NbSharedModule, NbBadgeModule, NbIconModule],\n    exports: [NbTabsetComponent, NbTabComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Represents a component showing a user avatar (picture) with a user name on the right.\n * @stacked-example(Showcase, user/user-showcase.component)\n *\n * ```ts\n *   <nb-user name=\"John Doe\" title=\"Engineer\"></nb-user>\n * ```\n *\n * ### Installation\n *\n * Import `NbUserModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbUserModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Available in multiple sizes:\n * @stacked-example(Multiple Sizes, user/user-sizes.component)\n *\n *\n * You can hide unnecessary captions (name, title or both):\n * @stacked-example(Hide captions in user component, user/user-hide-captions.component)\n *\n *\n * You can set custom avatar background-color, user image (as link or BASE64 string) and disable user initials:\n * @stacked-example(Avatar image settings, user/user-avatar-settings.component)\n *\n * Component shape could be controlled with `shape` input.\n * @stacked-example(Shapes, user/user-shape.component)\n *\n * @styles\n *\n * user-picture-box-background-color:\n * user-picture-box-border-color:\n * user-picture-box-border-width:\n * user-initials-text-color:\n * user-initials-text-font-family:\n * user-initials-text-font-weight:\n * user-name-text-color:\n * user-name-text-font-family:\n * user-name-text-font-weight:\n * user-title-text-color:\n * user-title-text-font-family:\n * user-title-text-font-weight:\n * user-rectangle-border-radius:\n * user-semi-round-border-radius:\n * user-round-border-radius:\n * user-tiny-height:\n * user-tiny-width:\n * user-tiny-initials-text-font-size:\n * user-tiny-initials-text-line-height:\n * user-tiny-name-text-font-size:\n * user-tiny-name-text-line-height:\n * user-tiny-title-text-font-size:\n * user-tiny-title-text-line-height:\n * user-small-height:\n * user-small-width:\n * user-small-initials-text-font-size:\n * user-small-initials-text-line-height:\n * user-small-name-text-font-size:\n * user-small-name-text-line-height:\n * user-small-title-text-font-size:\n * user-small-title-text-line-height:\n * user-medium-height:\n * user-medium-width:\n * user-medium-initials-text-font-size:\n * user-medium-initials-text-line-height:\n * user-medium-name-text-font-size:\n * user-medium-name-text-line-height:\n * user-medium-title-text-font-size:\n * user-medium-title-text-line-height:\n * user-large-height:\n * user-large-width:\n * user-large-initials-text-font-size:\n * user-large-initials-text-line-height:\n * user-large-name-text-font-size:\n * user-large-name-text-line-height:\n * user-large-title-text-font-size:\n * user-large-title-text-line-height:\n * user-giant-height:\n * user-giant-width:\n * user-giant-initials-text-font-size:\n * user-giant-initials-text-line-height:\n * user-giant-name-text-font-size:\n * user-giant-name-text-line-height:\n * user-giant-title-text-font-size:\n * user-giant-title-text-line-height:\n */\n\n\nlet NbUserComponent = /*#__PURE__*/(() => {\n  class NbUserComponent {\n    constructor(domSanitizer) {\n      this.domSanitizer = domSanitizer;\n      /**\n       * Specifies a name to be shown on the right of a user picture\n       * @type string\n       */\n\n      this.name = 'Anonymous';\n      /**\n       * Size of the component.\n       * Possible values: `tiny`, `small`, `medium` (default), `large`, 'giant'.\n       */\n\n      this.size = 'medium';\n      /**\n       * Shape of the picture box.\n       * Possible values: `rectangle`, `semi-round`, `round`.\n       */\n\n      this.shape = 'round';\n      this._showName = true;\n      this._showTitle = true;\n      this._showInitials = true;\n      /**\n       * Badge status (adds specific styles):\n       * `primary`, `info`, `success`, `warning`, `danger`\n       * @param {string} val\n       */\n\n      this.badgeStatus = 'basic';\n    }\n    /**\n     * Absolute path to a user picture or base64 image.\n     * User name initials will be shown if no picture specified (JD for John Doe).\n     * @type string\n     */\n\n\n    set picture(value) {\n      this.imageBackgroundStyle = value ? this.domSanitizer.bypassSecurityTrustStyle(`url(${value})`) : null;\n    }\n    /**\n     * Whether to show a user name or not\n     */\n\n\n    get showName() {\n      return this._showName;\n    }\n\n    set showName(val) {\n      this._showName = convertToBoolProperty(val);\n    }\n    /**\n     * Whether to show a user title or not\n     * @type boolean\n     */\n\n\n    get showTitle() {\n      return this._showTitle;\n    }\n\n    set showTitle(val) {\n      this._showTitle = convertToBoolProperty(val);\n    }\n    /**\n     * Whether to show a user initials (if no picture specified) or not\n     * @type boolean\n     */\n\n\n    get showInitials() {\n      return this._showInitials;\n    }\n\n    set showInitials(val) {\n      this._showInitials = convertToBoolProperty(val);\n    }\n    /**\n     * Whether to show only a picture or also show the name and title\n     * @type boolean\n     */\n\n\n    get onlyPicture() {\n      return !this.showName && !this.showTitle;\n    }\n\n    set onlyPicture(val) {\n      this.showName = this.showTitle = !convertToBoolProperty(val);\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get rectangle() {\n      return this.shape === 'rectangle';\n    }\n\n    get semiRound() {\n      return this.shape === 'semi-round';\n    }\n\n    get round() {\n      return this.shape === 'round';\n    }\n\n    getInitials() {\n      if (this.name) {\n        const names = this.name.split(' ');\n        return names.map(n => n.charAt(0)).splice(0, 2).join('').toUpperCase();\n      }\n\n      return '';\n    }\n\n  }\n\n  NbUserComponent.ɵfac = function NbUserComponent_Factory(t) {\n    return new (t || NbUserComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer));\n  };\n\n  NbUserComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbUserComponent,\n    selectors: [[\"nb-user\"]],\n    hostVars: 16,\n    hostBindings: function NbUserComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"shape-rectangle\", ctx.rectangle)(\"shape-semi-round\", ctx.semiRound)(\"shape-round\", ctx.round);\n      }\n    },\n    inputs: {\n      name: \"name\",\n      size: \"size\",\n      shape: \"shape\",\n      badgeStatus: \"badgeStatus\",\n      picture: \"picture\",\n      showName: \"showName\",\n      showTitle: \"showTitle\",\n      showInitials: \"showInitials\",\n      onlyPicture: \"onlyPicture\",\n      title: \"title\",\n      color: \"color\",\n      badgeText: \"badgeText\",\n      badgePosition: \"badgePosition\"\n    },\n    decls: 6,\n    vars: 4,\n    consts: [[1, \"user-container\"], [\"class\", \"user-picture image\", 3, \"background-image\", 4, \"ngIf\"], [\"class\", \"user-picture initials\", 3, \"background-color\", 4, \"ngIf\"], [1, \"info-container\"], [\"class\", \"user-name\", 4, \"ngIf\"], [\"class\", \"user-title\", 4, \"ngIf\"], [1, \"user-picture\", \"image\"], [3, \"text\", \"status\", \"position\", 4, \"ngIf\"], [3, \"text\", \"status\", \"position\"], [1, \"user-picture\", \"initials\"], [4, \"ngIf\"], [1, \"user-name\"], [1, \"user-title\"]],\n    template: function NbUserComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbUserComponent_div_1_Template, 2, 3, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, NbUserComponent_div_2_Template, 3, 4, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n        ɵngcc0.ɵɵtemplate(4, NbUserComponent_div_4_Template, 2, 1, \"div\", 4);\n        ɵngcc0.ɵɵtemplate(5, NbUserComponent_div_5_Template, 2, 1, \"div\", 5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.imageBackgroundStyle);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.imageBackgroundStyle);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showName && ctx.name);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showTitle && ctx.title);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbBadgeComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .user-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}[_nghost-%COMP%]   .user-picture[_ngcontent-%COMP%]{position:relative;flex-shrink:0}[_nghost-%COMP%]   .user-picture.image[_ngcontent-%COMP%]{background-size:cover;background-repeat:no-repeat}[_nghost-%COMP%]   .user-picture.initials[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}[dir=rtl]   [_nghost-%COMP%]   .user-name[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .user-title[_ngcontent-%COMP%]{text-align:right}[dir=ltr]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]{margin-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .info-container[_ngcontent-%COMP%]{margin-right:.5rem}\"]\n  });\n  return NbUserComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_USER_COMPONENTS = [NbUserComponent];\nlet NbUserModule = /*#__PURE__*/(() => {\n  class NbUserModule {}\n\n  NbUserModule.ɵfac = function NbUserModule_Factory(t) {\n    return new (t || NbUserModule)();\n  };\n\n  NbUserModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbUserModule\n  });\n  NbUserModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbBadgeModule]]\n  });\n  return NbUserModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbUserModule, {\n    declarations: [NbUserComponent],\n    imports: [NbSharedModule, NbBadgeModule],\n    exports: [NbUserComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Action item, display a link with an icon, or any other content provided instead.\n */\n\n\nlet NbActionComponent = /*#__PURE__*/(() => {\n  class NbActionComponent {\n    constructor() {\n      /**\n       * Optional title for mouseover\n       * @type string\n       */\n      this.title = '';\n      this._disabled = false;\n      /**\n       * Badge status (adds specific styles):\n       * 'basic', 'primary', 'info', 'success', 'warning', 'danger', 'control'\n       * @param {string} val\n       */\n\n      this.badgeStatus = 'basic';\n    }\n    /**\n     * Visually disables the item\n     * @type boolean\n     */\n\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n    }\n    /**\n     * Use badge dot mode\n     * @type boolean\n     */\n\n\n    get badgeDot() {\n      return this._badgeDot;\n    }\n\n    set badgeDot(value) {\n      this._badgeDot = convertToBoolProperty(value);\n    }\n\n  }\n\n  NbActionComponent.ɵfac = function NbActionComponent_Factory(t) {\n    return new (t || NbActionComponent)();\n  };\n\n  NbActionComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbActionComponent,\n    selectors: [[\"nb-action\"]],\n    hostVars: 2,\n    hostBindings: function NbActionComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"disabled\", ctx.disabled);\n      }\n    },\n    inputs: {\n      title: \"title\",\n      badgeStatus: \"badgeStatus\",\n      disabled: \"disabled\",\n      badgeDot: \"badgeDot\",\n      link: \"link\",\n      href: \"href\",\n      icon: \"icon\",\n      badgeText: \"badgeText\",\n      badgePosition: \"badgePosition\"\n    },\n    ngContentSelectors: _c0,\n    decls: 5,\n    vars: 2,\n    consts: [[4, \"ngIf\", \"ngIfElse\"], [\"projectedContent\", \"\"], [\"badgeTemplate\", \"\"], [\"class\", \"icon-container\", 3, \"routerLink\", \"title\", 4, \"ngIf\"], [\"class\", \"icon-container\", 3, \"href\", \"title\", 4, \"ngIf\"], [\"class\", \"icon-container\", \"href\", \"#\", 3, \"title\", \"click\", 4, \"ngIf\"], [1, \"icon-container\", 3, \"routerLink\", \"title\"], [3, \"config\"], [3, \"ngTemplateOutlet\"], [1, \"icon-container\", 3, \"href\", \"title\"], [\"href\", \"#\", 1, \"icon-container\", 3, \"title\", \"click\"], [3, \"text\", \"dotMode\", \"status\", \"position\", 4, \"ngIf\"], [3, \"text\", \"dotMode\", \"status\", \"position\"]],\n    template: function NbActionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, NbActionComponent_ng_container_0_Template, 4, 3, \"ng-container\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbActionComponent_ng_template_1_Template, 2, 1, \"ng-template\", null, 1, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵtemplate(3, NbActionComponent_ng_template_3_Template, 1, 1, \"ng-template\", null, 2, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(2);\n\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.icon)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [ɵngcc2.NgIf, ɵngcc5.RouterLinkWithHref, NbIconComponent, ɵngcc2.NgTemplateOutlet, NbBadgeComponent],\n    styles: [\"[_nghost-%COMP%]{background:transparent;display:flex;align-items:center;position:relative}.disabled[_nghost-%COMP%]{cursor:not-allowed}.disabled[_nghost-%COMP%]   a[_ngcontent-%COMP%], .disabled[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{cursor:not-allowed}nb-actions.full-width[_nghost-%COMP%], nb-actions.full-width   [_nghost-%COMP%]{justify-content:center;width:100%}a.icon-container[_ngcontent-%COMP%]{position:relative}a.icon-container[_ngcontent-%COMP%]:hover, a.icon-container[_ngcontent-%COMP%]:focus{text-decoration:none}nb-icon[_ngcontent-%COMP%]:hover{cursor:pointer}\"]\n  });\n  return NbActionComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Shows a horizontal list of actions, available in multiple sizes.\n * Aligns items vertically.\n *\n * @stacked-example(Showcase, action/action-showcase.component)\n *\n * Basic actions setup:\n * ```html\n * <nb-actions size=\"small\">\n *   <nb-action icon=\"nb-search\"></nb-action>\n *   <nb-action icon=\"nb-power-circled\"></nb-action>\n *   <nb-action icon=\"nb-person\"></nb-action>\n * </nb-actions>\n * ```\n * ### Installation\n *\n * Import `NbActionsModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbActionsModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Multiple sizes example:\n * @stacked-example(Multiple Sizes, action/action-sizes.component)\n *\n * It is also possible to specify a `badge` value:\n *\n * @stacked-example(Action Badge, action/action-badge.component)\n *\n * and we can set it to full a width of a parent component\n * @stacked-example(Full Width, action/action-width.component)\n *\n * Action dot mode\n * @stacked-example(Action badge in dot mode, action/action-dot-mode.component)\n *\n * @styles\n *\n * actions-background-color:\n * actions-divider-color:\n * actions-divider-style:\n * actions-divider-width:\n * actions-icon-color:\n * actions-text-color:\n * actions-text-font-family:\n * actions-text-font-weight:\n * actions-text-line-height:\n * actions-disabled-icon-color:\n * actions-disabled-text-color:\n * actions-tiny-height:\n * actions-tiny-icon-height:\n * actions-tiny-padding:\n * actions-tiny-text-font-size:\n * actions-small-height:\n * actions-small-icon-height:\n * actions-small-padding:\n * actions-small-text-font-size:\n * actions-medium-height:\n * actions-medium-icon-height:\n * actions-medium-padding:\n * actions-medium-text-font-size:\n * actions-large-height:\n * actions-large-icon-height:\n * actions-large-padding:\n * actions-large-text-font-size:\n * actions-giant-height:\n * actions-giant-icon-height:\n * actions-giant-padding:\n * actions-giant-text-font-size:\n */\n\n\nlet NbActionsComponent = /*#__PURE__*/(() => {\n  class NbActionsComponent {\n    constructor() {\n      this._size = 'small';\n      this._fullWidth = false;\n    }\n    /**\n     * Size of the component: 'tiny', 'small' (default), 'medium', 'large', 'giant'\n     */\n\n\n    get size() {\n      return this._size;\n    }\n\n    set size(value) {\n      this._size = value;\n    }\n    /**\n     * Component will fill full width of the container\n     */\n\n\n    get fullWidth() {\n      return this._fullWidth;\n    }\n\n    set fullWidth(value) {\n      this._fullWidth = convertToBoolProperty(value);\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n  }\n\n  NbActionsComponent.ɵfac = function NbActionsComponent_Factory(t) {\n    return new (t || NbActionsComponent)();\n  };\n\n  NbActionsComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbActionsComponent,\n    selectors: [[\"nb-actions\"]],\n    hostVars: 12,\n    hostBindings: function NbActionsComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"full-width\", ctx.fullWidth)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      fullWidth: \"fullWidth\"\n    },\n    ngContentSelectors: _c20,\n    decls: 1,\n    vars: 0,\n    template: function NbActionsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c19);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center}\"]\n  });\n  return NbActionsComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_ACTIONS_COMPONENTS = [NbActionComponent, NbActionsComponent];\nlet NbActionsModule = /*#__PURE__*/(() => {\n  class NbActionsModule {}\n\n  NbActionsModule.ɵfac = function NbActionsModule_Factory(t) {\n    return new (t || NbActionsModule)();\n  };\n\n  NbActionsModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbActionsModule\n  });\n  NbActionsModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbBadgeModule, NbIconModule]]\n  });\n  return NbActionsModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbActionsModule, {\n    declarations: [NbActionComponent, NbActionsComponent],\n    imports: [NbSharedModule, NbBadgeModule, NbIconModule],\n    exports: [NbActionComponent, NbActionsComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Search component service, connects your code to a page-level search component.\n */\n\n\nlet NbSearchService = /*#__PURE__*/(() => {\n  class NbSearchService {\n    constructor() {\n      this.searchSubmittings$ = new Subject();\n      this.searchActivations$ = new Subject();\n      this.searchDeactivations$ = new Subject();\n      this.searchInput$ = new Subject();\n    }\n    /***\n     * Activate (open) search component\n     * @param {string} searchType\n     * @param {string} tag\n     */\n\n\n    activateSearch(searchType, tag) {\n      this.searchActivations$.next({\n        searchType,\n        tag\n      });\n    }\n    /**\n     * Deactibate (close) search component\n     * @param {string} searchType\n     * @param {string} tag\n     */\n\n\n    deactivateSearch(searchType, tag) {\n      this.searchDeactivations$.next({\n        searchType,\n        tag\n      });\n    }\n    /**\n     * Trigger search submit\n     * @param {string} term\n     * @param {string} tag\n     */\n\n\n    submitSearch(term, tag) {\n      this.searchSubmittings$.next({\n        term,\n        tag\n      });\n    }\n    /**\n     * Trigger search submit by input event\n     * @param {string} term\n     * @param {string} tag\n     */\n\n\n    searchInput(term, tag) {\n      this.searchInput$.next({\n        term,\n        tag\n      });\n    }\n    /**\n     * Subscribe to 'activate' event\n     * @returns Observable<{searchType: string; tag?: string}>\n     */\n\n\n    onSearchActivate() {\n      return this.searchActivations$.pipe(share());\n    }\n    /**\n     * Subscribe to 'deactivate' event\n     * @returns Observable<{searchType: string; tag?: string}>\n     */\n\n\n    onSearchDeactivate() {\n      return this.searchDeactivations$.pipe(share());\n    }\n    /**\n     * Subscribe to 'submit' event (when submit button clicked)\n     * @returns Observable<{term: string; tag?: string}>\n     */\n\n\n    onSearchSubmit() {\n      return this.searchSubmittings$.pipe(share());\n    }\n    /**\n     * Subscribe to input event\n     * @returns Observable<{term: string; tag?: string}>\n     */\n\n\n    onSearchInput() {\n      return this.searchInput$.pipe(share());\n    }\n\n  }\n\n  NbSearchService.ɵfac = function NbSearchService_Factory(t) {\n    return new (t || NbSearchService)();\n  };\n\n  NbSearchService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbSearchService,\n    factory: NbSearchService.ɵfac\n  });\n  return NbSearchService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * search-field-component is used under the hood by nb-search component\n * can't be used itself\n */\n\n\nlet NbSearchFieldComponent = /*#__PURE__*/(() => {\n  class NbSearchFieldComponent {\n    constructor() {\n      this.show = false;\n      this.close = new EventEmitter();\n      this.search = new EventEmitter();\n      this.searchInput = new EventEmitter();\n    }\n\n    get showClass() {\n      return this.show;\n    }\n\n    get modalZoomin() {\n      return this.type === NbSearchFieldComponent.TYPE_MODAL_ZOOMIN;\n    }\n\n    get rotateLayout() {\n      return this.type === NbSearchFieldComponent.TYPE_ROTATE_LAYOUT;\n    }\n\n    get modalMove() {\n      return this.type === NbSearchFieldComponent.TYPE_MODAL_MOVE;\n    }\n\n    get curtain() {\n      return this.type === NbSearchFieldComponent.TYPE_CURTAIN;\n    }\n\n    get columnCurtain() {\n      return this.type === NbSearchFieldComponent.TYPE_COLUMN_CURTAIN;\n    }\n\n    get modalDrop() {\n      return this.type === NbSearchFieldComponent.TYPE_MODAL_DROP;\n    }\n\n    get modalHalf() {\n      return this.type === NbSearchFieldComponent.TYPE_MODAL_HALF;\n    }\n\n    ngOnChanges({\n      show\n    }) {\n      const becameHidden = !show.isFirstChange() && show.currentValue === false;\n\n      if (becameHidden && this.inputElement) {\n        this.inputElement.nativeElement.value = '';\n      }\n\n      this.focusInput();\n    }\n\n    ngAfterViewInit() {\n      this.focusInput();\n    }\n\n    emitClose() {\n      this.close.emit();\n    }\n\n    submitSearch(term) {\n      if (term) {\n        this.search.emit(term);\n      }\n    }\n\n    emitSearchInput(term) {\n      this.searchInput.emit(term);\n    }\n\n    focusInput() {\n      if (this.show && this.inputElement) {\n        this.inputElement.nativeElement.focus();\n      }\n    }\n\n  }\n\n  NbSearchFieldComponent.ɵfac = function NbSearchFieldComponent_Factory(t) {\n    return new (t || NbSearchFieldComponent)();\n  };\n\n  NbSearchFieldComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSearchFieldComponent,\n    selectors: [[\"nb-search-field\"]],\n    viewQuery: function NbSearchFieldComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c21, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.inputElement = _t.first);\n      }\n    },\n    hostVars: 16,\n    hostBindings: function NbSearchFieldComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"show\", ctx.showClass)(\"modal-zoomin\", ctx.modalZoomin)(\"rotate-layout\", ctx.rotateLayout)(\"modal-move\", ctx.modalMove)(\"curtain\", ctx.curtain)(\"column-curtain\", ctx.columnCurtain)(\"modal-drop\", ctx.modalDrop)(\"modal-half\", ctx.modalHalf);\n      }\n    },\n    inputs: {\n      show: \"show\",\n      type: \"type\",\n      placeholder: \"placeholder\",\n      hint: \"hint\"\n    },\n    outputs: {\n      close: \"close\",\n      search: \"search\",\n      searchInput: \"searchInput\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    decls: 10,\n    vars: 2,\n    consts: [[1, \"search\", 3, \"keyup.esc\"], [\"nbButton\", \"\", \"ghost\", \"\", 1, \"close-button\", 3, \"click\"], [\"icon\", \"close-outline\", \"pack\", \"nebular-essentials\"], [1, \"form-wrapper\"], [1, \"form\", 3, \"keyup.enter\"], [1, \"form-content\"], [\"autocomplete\", \"off\", \"tabindex\", \"-1\", 1, \"search-input\", 3, \"input\", \"blur\"], [\"searchInput\", \"\"], [1, \"info\"]],\n    template: function NbSearchFieldComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r1 = ɵngcc0.ɵɵgetCurrentView();\n\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵlistener(\"keyup.esc\", function NbSearchFieldComponent_Template_div_keyup_esc_0_listener() {\n          return ctx.emitClose();\n        });\n        ɵngcc0.ɵɵelementStart(1, \"button\", 1);\n        ɵngcc0.ɵɵlistener(\"click\", function NbSearchFieldComponent_Template_button_click_1_listener() {\n          return ctx.emitClose();\n        });\n        ɵngcc0.ɵɵelement(2, \"nb-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 3);\n        ɵngcc0.ɵɵelementStart(4, \"form\", 4);\n        ɵngcc0.ɵɵlistener(\"keyup.enter\", function NbSearchFieldComponent_Template_form_keyup_enter_4_listener() {\n          ɵngcc0.ɵɵrestoreView(_r1);\n\n          const _r0 = ɵngcc0.ɵɵreference(7);\n\n          return ctx.submitSearch(_r0.value);\n        });\n        ɵngcc0.ɵɵelementStart(5, \"div\", 5);\n        ɵngcc0.ɵɵelementStart(6, \"input\", 6, 7);\n        ɵngcc0.ɵɵlistener(\"input\", function NbSearchFieldComponent_Template_input_input_6_listener() {\n          ɵngcc0.ɵɵrestoreView(_r1);\n\n          const _r0 = ɵngcc0.ɵɵreference(7);\n\n          return ctx.emitSearchInput(_r0.value);\n        })(\"blur\", function NbSearchFieldComponent_Template_input_blur_6_listener() {\n          return ctx.focusInput();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(8, \"span\", 8);\n        ɵngcc0.ɵɵtext(9);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(6);\n        ɵngcc0.ɵɵattribute(\"placeholder\", ctx.placeholder);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.hint);\n      }\n    },\n    directives: [NbButtonComponent, NbIconComponent, ɵngcc6.ɵNgNoValidate, ɵngcc6.NgControlStatusGroup, ɵngcc6.NgForm],\n    styles: [\"[_nghost-%COMP%]   button[_ngcontent-%COMP%]{margin:0;padding:0;cursor:pointer;border:none;background:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{border-top:0;border-right:0;border-left:0;background:transparent;border-radius:0;line-height:1;display:inline-block;box-sizing:border-box;padding:0.05rem 0;-webkit-appearance:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}[_nghost-%COMP%]   input[_ngcontent-%COMP%]::placeholder{opacity:0.3}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{font-size:90%;font-weight:bold;display:block;width:75%;margin:0 auto;padding:0.85rem 0;text-align:right}.modal-zoomin[_nghost-%COMP%]{display:block}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before, .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{content:'';position:absolute;width:calc(100% + 15px);height:calc(100% + 15px);pointer-events:none}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{top:0;left:0;border-right-width:0;border-bottom-width:0;transform:translate3d(-15px, -15px, 0)}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{right:0;bottom:0;border-top-width:0;border-left-width:0;transform:translate3d(15px, 15px, 0)}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem}[dir=ltr]   .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:10vw;width:75%}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-zoomin[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before, .modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{transform:translate3d(0, 0, 0);transition:transform 0.5s}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-zoomin.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40rem){.modal-zoomin[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0 1rem}.modal-zoomin[_nghost-%COMP%]   span[_ngcontent-%COMP%]{text-align:left}}\", \"nb-layout.rotate-layout{position:fixed;overflow:hidden;width:100%}  nb-layout.rotate-layout .scrollable-container{position:relative;z-index:10001;transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1)}  nb-layout.rotate-layout.with-search .scrollable-container{transition:transform 0.5s cubic-bezier(0.2, 1, 0.3, 1);transform-origin:50vw 50vh;transform:perspective(1000px) translate3d(0, 50vh, 0) rotate3d(1, 0, 0, 30deg);pointer-events:none}.rotate-layout[_nghost-%COMP%]{position:absolute;display:block;width:100vw;height:100vh;pointer-events:none;opacity:0;transition-property:opacity;transition-delay:0.4s}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:50vh;pointer-events:none;opacity:0;transition:opacity 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr]   .rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0;opacity:0;transform:scale3d(0.7, 0.7, 1);transition:opacity 0.5s, transform 0.5s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.rotate-layout[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:7vw;width:75%}.rotate-layout.show[_nghost-%COMP%]{opacity:1;transition-delay:0s}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.rotate-layout.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}\", \"nb-layout.modal-move .layout{transition:transform 0.5s}  nb-layout.modal-move.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;position:fixed;z-index:1050;top:0;left:0;width:100%;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.5s}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:3rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr]   .modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin:5rem 0;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.modal-move[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:10vw;width:75%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto;opacity:1}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-move.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{transform:scale3d(1, 1, 1);transition-duration:0.5s}@media screen and (max-width: 40rem){.modal-move[_nghost-%COMP%]   span[_ngcontent-%COMP%]{text-align:left}}\", \".curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{position:fixed;z-index:1050;top:0;left:100%;overflow:hidden;height:100vh;width:100%;padding:3rem;pointer-events:none;transition:transform 0.3s;transition-delay:0.4s;transition-timing-function:ease-out}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transition:transform 0.3s;transition-timing-function:ease-out}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;transition:opacity 0.1s;transition-delay:0.3s}[dir=ltr]   .curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:50%;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.5s, transform 0.5s}.curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;font-size:6vw}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{width:100%;pointer-events:auto;transform:translate3d(-100%, 0, 0);transition-delay:0s}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::after{transform:translate3d(100%, 0, 0);transition-delay:0.4s}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}@media screen and (max-width: 40em){.curtain[_nghost-%COMP%]   span[_ngcontent-%COMP%]{width:90%}.curtain[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:2em;width:90%}}  nb-layout.curtain .scrollable-container{position:relative;z-index:0}\", \"nb-layout.column-curtain.with-search .layout{pointer-events:none}.column-curtain[_nghost-%COMP%]{display:block;position:fixed;z-index:1050;top:0;left:50%;overflow:hidden;width:50%;height:100vh;pointer-events:none}.column-curtain[_nghost-%COMP%]::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;transform:scale3d(0, 1, 1);transform-origin:0 50%;transition:transform 0.3s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{position:relative;padding:2.5rem 1.5rem 0;background:transparent}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:2rem;font-size:2.5rem;opacity:0;transition:opacity 0.5s}[dir=ltr]   .column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:2rem}[dir=rtl]   .column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:2rem}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:85%;transform:translate3d(-150%, 0, 0);transition:transform 0.3s}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:2.5rem;width:100%}.column-curtain[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:85%}.column-curtain.show[_nghost-%COMP%]{pointer-events:auto}.column-curtain.show[_nghost-%COMP%]::before{transform:scale3d(1, 1, 1)}.column-curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);transition-delay:0.15s;transition-timing-function:cubic-bezier(0.86, 0, 0.07, 1)}.column-curtain.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;z-index:100}@media screen and (max-width: 40rem){.column-curtain[_nghost-%COMP%]   span[_ngcontent-%COMP%]{width:90%}.column-curtain[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:2rem;width:90%}}\", \"nb-layout.modal-drop .layout{position:relative;transition:transform 0.4s, opacity 0.4s;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1)}  nb-layout.modal-drop.with-search .layout{opacity:0;transform:scale3d(0.9, 0.9, 1);pointer-events:none}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;text-align:center;z-index:1050;position:fixed;top:0;left:0;width:100%;height:100vh;background:none;pointer-events:none}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{content:'';position:absolute;top:0;right:0;width:100%;height:100%;opacity:0;transition:opacity 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;display:block;opacity:0;transition:opacity 0.4s}[dir=ltr]   .modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{position:relative;margin:5rem 0 2rem}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:6vw;width:60%;padding:0.25rem;text-align:center;opacity:0;transition:opacity 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;z-index:9;display:block;width:60%;padding:0.85rem 0;opacity:0;transform:translate3d(0, -50px, 0);transition:opacity 0.4s, transform 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{position:relative;z-index:10;overflow:hidden;transform:translate3d(0, -50px, 0);transition:transform 0.4s}.modal-drop[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]::after{content:'';position:absolute;top:0;left:20%;width:60%;height:105%;opacity:0;transform-origin:50% 0}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{opacity:1}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0);transition:none}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-content[_ngcontent-%COMP%]::after{animation:scaleUpDown 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{opacity:1;transition:opacity 0s 0.4s}.modal-drop.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{opacity:1;transform:translate3d(0, 0, 0);transition-delay:0.4s;transition-timing-function:ease-out}@keyframes scaleUpDown{0%{opacity:1;transform:scale3d(1, 0, 1)}50%{transform:scale3d(1, 1, 1);transform-origin:50% 0;transition-timing-function:ease-out}50.1%{transform-origin:50% 100%;transition-timing-function:ease-out}100%{opacity:1;transform:scale3d(1, 0, 1);transform-origin:50% 100%;transition-timing-function:ease-out}}@media screen and (max-width: 40rem){.modal-drop[_nghost-%COMP%]   form[_ngcontent-%COMP%]{margin:2rem 0}.modal-drop[_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:100%;left:0}}\", \"nb-layout.modal-half .layout{transition:transform 0.6s, opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}  nb-layout.modal-half.with-search .layout{transform:scale3d(0.8, 0.8, 1);pointer-events:none}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{text-align:center;position:fixed;z-index:1050;top:0;left:0;overflow:hidden;width:100%;height:100vh;background:none;pointer-events:none}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{content:'';position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;transition:opacity 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:2.5rem;position:absolute;top:3rem;display:block;z-index:100;opacity:0;transform:scale3d(0.8, 0.8, 1);transition:opacity 0.6s, transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1)}[dir=ltr]   .modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{right:3rem}[dir=rtl]   .modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{left:3rem}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:center;width:100%;height:50%;transition:transform 0.6s;transition-timing-function:cubic-bezier(0.2, 1, 0.3, 1);transform:translate3d(0, -100%, 0)}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:75%;margin:0 auto}.modal-half[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:7vw;width:100%}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]{pointer-events:auto}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]::before{opacity:1}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:1;transform:scale3d(1, 1, 1)}.modal-half.show[_nghost-%COMP%]   .search[_ngcontent-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{transform:translate3d(0, 0, 0)}\"],\n    changeDetection: 0\n  });\n  NbSearchFieldComponent.TYPE_MODAL_ZOOMIN = 'modal-zoomin';\n  NbSearchFieldComponent.TYPE_ROTATE_LAYOUT = 'rotate-layout';\n  NbSearchFieldComponent.TYPE_MODAL_MOVE = 'modal-move';\n  NbSearchFieldComponent.TYPE_CURTAIN = 'curtain';\n  NbSearchFieldComponent.TYPE_COLUMN_CURTAIN = 'column-curtain';\n  NbSearchFieldComponent.TYPE_MODAL_DROP = 'modal-drop';\n  NbSearchFieldComponent.TYPE_MODAL_HALF = 'modal-half';\n  return NbSearchFieldComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Beautiful full-page search control.\n *\n * @stacked-example(Showcase, search/search-showcase.component)\n *\n * Basic setup:\n *\n * ```ts\n *  <nb-search type=\"rotate-layout\"></nb-search>\n * ```\n * ### Installation\n *\n * Import `NbSearchModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSearchModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Several animation types are available:\n * modal-zoomin, rotate-layout, modal-move, curtain, column-curtain, modal-drop, modal-half\n *\n * It is also possible to handle search event using `NbSearchService`:\n *\n * @stacked-example(Search Event, search/search-event.component)\n *\n * @styles\n *\n * search-background-color:\n * search-divider-color:\n * search-divider-style:\n * search-divider-width:\n * search-extra-background-color:\n * search-text-color:\n * search-text-font-family:\n * search-text-font-size:\n * search-text-font-weight:\n * search-text-line-height:\n * search-placeholder-text-color:\n * search-info-text-color:\n * search-info-text-font-family:\n * search-info-text-font-size:\n * search-info-text-font-weight:\n * search-info-text-line-height:\n */\n\n\nlet NbSearchComponent = /*#__PURE__*/(() => {\n  class NbSearchComponent {\n    constructor(searchService, themeService, router, overlayService, changeDetector) {\n      this.searchService = searchService;\n      this.themeService = themeService;\n      this.router = router;\n      this.overlayService = overlayService;\n      this.changeDetector = changeDetector;\n      this.destroy$ = new Subject();\n      this.showSearchField = false;\n      /**\n       * Search input placeholder\n       * @type {string}\n       */\n\n      this.placeholder = 'Search...';\n      /**\n       * Hint showing under the input field to improve user experience\n       *\n       * @type {string}\n       */\n\n      this.hint = 'Hit enter to search';\n    }\n\n    ngOnInit() {\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd), takeUntil(this.destroy$)).subscribe(() => this.hideSearch());\n      this.searchService.onSearchActivate().pipe(filter(data => !this.tag || data.tag === this.tag), takeUntil(this.destroy$)).subscribe(() => this.openSearch());\n      this.searchService.onSearchDeactivate().pipe(filter(data => !this.tag || data.tag === this.tag), takeUntil(this.destroy$)).subscribe(() => this.hideSearch());\n    }\n\n    ngOnDestroy() {\n      if (this.overlayRef && this.overlayRef.hasAttached()) {\n        this.removeLayoutClasses();\n        this.overlayRef.detach();\n      }\n\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    openSearch() {\n      if (!this.overlayRef) {\n        this.overlayRef = this.overlayService.create();\n        this.overlayRef.attach(this.searchFieldPortal);\n      }\n\n      this.themeService.appendLayoutClass(this.type);\n      of(null).pipe(delay(0)).subscribe(() => {\n        this.themeService.appendLayoutClass('with-search');\n        this.showSearchField = true;\n        this.changeDetector.detectChanges();\n      });\n    }\n\n    hideSearch() {\n      this.removeLayoutClasses();\n      this.showSearchField = false;\n      this.changeDetector.detectChanges();\n      this.searchButton.nativeElement.focus();\n    }\n\n    search(term) {\n      this.searchService.submitSearch(term, this.tag);\n      this.hideSearch();\n    }\n\n    emitInput(term) {\n      this.searchService.searchInput(term, this.tag);\n    }\n\n    emitActivate() {\n      this.searchService.activateSearch(this.type, this.tag);\n    }\n\n    emitDeactivate() {\n      this.searchService.deactivateSearch(this.type, this.tag);\n    }\n\n    removeLayoutClasses() {\n      this.themeService.removeLayoutClass('with-search');\n      of(null).pipe(delay(500)).subscribe(() => {\n        this.themeService.removeLayoutClass(this.type);\n      });\n    }\n\n  }\n\n  NbSearchComponent.ɵfac = function NbSearchComponent_Factory(t) {\n    return new (t || NbSearchComponent)(ɵngcc0.ɵɵdirectiveInject(NbSearchService), ɵngcc0.ɵɵdirectiveInject(NbThemeService), ɵngcc0.ɵɵdirectiveInject(ɵngcc5.Router), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbSearchComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSearchComponent,\n    selectors: [[\"nb-search\"]],\n    viewQuery: function NbSearchComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalDirective, 5);\n        ɵngcc0.ɵɵviewQuery(_c22, 5, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchFieldPortal = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.searchButton = _t.first);\n      }\n    },\n    inputs: {\n      placeholder: \"placeholder\",\n      hint: \"hint\",\n      tag: \"tag\",\n      type: \"type\"\n    },\n    decls: 4,\n    vars: 0,\n    consts: [[\"nbButton\", \"\", \"ghost\", \"\", 1, \"start-search\", 3, \"click\"], [\"searchButton\", \"\"], [\"icon\", \"search-outline\", \"pack\", \"nebular-essentials\"], [3, \"show\", \"type\", \"placeholder\", \"hint\", \"search\", \"searchInput\", \"close\", 4, \"nbPortal\"], [3, \"show\", \"type\", \"placeholder\", \"hint\", \"search\", \"searchInput\", \"close\"]],\n    template: function NbSearchComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"click\", function NbSearchComponent_Template_button_click_0_listener() {\n          return ctx.emitActivate();\n        });\n        ɵngcc0.ɵɵelement(2, \"nb-icon\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbSearchComponent_nb_search_field_3_Template, 1, 4, \"nb-search-field\", 3);\n      }\n    },\n    directives: [NbButtonComponent, NbIconComponent, NbPortalDirective, NbSearchFieldComponent],\n    styles: [\"[_nghost-%COMP%]   button[_ngcontent-%COMP%]{font-size:2rem;margin:0 auto;padding:0;cursor:pointer;border:none;background:none}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:focus{box-shadow:none;outline:none}  nb-layout.with-search .scrollable-container{position:relative;z-index:0}\"],\n    changeDetection: 0\n  });\n  return NbSearchComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbSearchModule = /*#__PURE__*/(() => {\n  class NbSearchModule {}\n\n  NbSearchModule.ɵfac = function NbSearchModule_Factory(t) {\n    return new (t || NbSearchModule)();\n  };\n\n  NbSearchModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbSearchModule\n  });\n  NbSearchModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [NbSearchService],\n    imports: [[NbSharedModule, NbOverlayModule, NbIconModule, NbButtonModule]]\n  });\n  return NbSearchModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSearchModule, {\n    declarations: [NbSearchComponent, NbSearchFieldComponent],\n    imports: [NbSharedModule, NbOverlayModule, NbIconModule, NbButtonModule],\n    exports: [NbSearchComponent, NbSearchFieldComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Styled checkbox component\n *\n * @stacked-example(Showcase, checkbox/checkbox-showcase.component)\n *\n * ### Installation\n *\n * Import `NbCheckboxComponent` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbCheckboxModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Checkbox is available in multiple colors using `status` property:\n * @stacked-example(Colored Checkboxes, checkbox/checkbox-status.component)\n *\n * Indeterminate state is also supported:\n * @stacked-example(Indeterminate Checkbox, checkbox/checkbox-indeterminate.component)\n *\n * Checkbox can be disabled via `disabled` attribute.\n * @stacked-example(Disabled Checkbox, checkbox/checkbox-disabled.component)\n *\n * @styles\n *\n * checkbox-height:\n * checkbox-width:\n * checkbox-border-style:\n * checkbox-border-width:\n * checkbox-border-radius:\n * checkbox-outline-width:\n * checkbox-outline-color:\n * checkbox-text-font-family:\n * checkbox-text-font-size:\n * checkbox-text-font-weight:\n * checkbox-text-line-height:\n * checkbox-text-space:\n * checkbox-padding:\n * checkbox-focus-inset-shadow-length:\n * checkbox-basic-text-color:\n * checkbox-basic-background-color:\n * checkbox-basic-border-color:\n * checkbox-basic-checked-background-color:\n * checkbox-basic-checked-border-color:\n * checkbox-basic-checked-checkmark-color:\n * checkbox-basic-indeterminate-background-color:\n * checkbox-basic-indeterminate-border-color:\n * checkbox-basic-indeterminate-checkmark-color:\n * checkbox-basic-focus-background-color:\n * checkbox-basic-focus-border-color:\n * checkbox-basic-focus-checked-background-color:\n * checkbox-basic-focus-checked-border-color:\n * checkbox-basic-hover-background-color:\n * checkbox-basic-hover-border-color:\n * checkbox-basic-hover-checked-background-color:\n * checkbox-basic-hover-checked-border-color:\n * checkbox-basic-active-background-color:\n * checkbox-basic-active-border-color:\n * checkbox-basic-active-checked-background-color:\n * checkbox-basic-active-checked-border-color:\n * checkbox-basic-disabled-background-color:\n * checkbox-basic-disabled-border-color:\n * checkbox-basic-disabled-checkmark-color:\n * checkbox-basic-disabled-text-color:\n * checkbox-basic-disabled-checked-background-color:\n * checkbox-primary-text-color:\n * checkbox-primary-background-color:\n * checkbox-primary-border-color:\n * checkbox-primary-checked-background-color:\n * checkbox-primary-checked-border-color:\n * checkbox-primary-checked-checkmark-color:\n * checkbox-primary-indeterminate-background-color:\n * checkbox-primary-indeterminate-border-color:\n * checkbox-primary-indeterminate-checkmark-color:\n * checkbox-primary-focus-background-color:\n * checkbox-primary-focus-border-color:\n * checkbox-primary-focus-checked-background-color:\n * checkbox-primary-focus-checked-border-color:\n * checkbox-primary-hover-background-color:\n * checkbox-primary-hover-border-color:\n * checkbox-primary-hover-checked-background-color:\n * checkbox-primary-hover-checked-border-color:\n * checkbox-primary-active-background-color:\n * checkbox-primary-active-border-color:\n * checkbox-primary-active-checked-background-color:\n * checkbox-primary-active-checked-border-color:\n * checkbox-primary-disabled-background-color:\n * checkbox-primary-disabled-border-color:\n * checkbox-primary-disabled-checkmark-color:\n * checkbox-primary-disabled-text-color:\n * checkbox-primary-disabled-checked-background-color:\n * checkbox-success-text-color:\n * checkbox-success-background-color:\n * checkbox-success-border-color:\n * checkbox-success-checked-background-color:\n * checkbox-success-checked-border-color:\n * checkbox-success-checked-checkmark-color:\n * checkbox-success-indeterminate-background-color:\n * checkbox-success-indeterminate-border-color:\n * checkbox-success-indeterminate-checkmark-color:\n * checkbox-success-focus-background-color:\n * checkbox-success-focus-border-color:\n * checkbox-success-focus-checked-background-color:\n * checkbox-success-focus-checked-border-color:\n * checkbox-success-hover-background-color:\n * checkbox-success-hover-border-color:\n * checkbox-success-hover-checked-background-color:\n * checkbox-success-hover-checked-border-color:\n * checkbox-success-active-background-color:\n * checkbox-success-active-border-color:\n * checkbox-success-active-checked-background-color:\n * checkbox-success-active-checked-border-color:\n * checkbox-success-disabled-background-color:\n * checkbox-success-disabled-border-color:\n * checkbox-success-disabled-checkmark-color:\n * checkbox-success-disabled-text-color:\n * checkbox-success-disabled-checked-background-color:\n * checkbox-info-text-color:\n * checkbox-info-background-color:\n * checkbox-info-border-color:\n * checkbox-info-checked-background-color:\n * checkbox-info-checked-border-color:\n * checkbox-info-checked-checkmark-color:\n * checkbox-info-indeterminate-background-color:\n * checkbox-info-indeterminate-border-color:\n * checkbox-info-indeterminate-checkmark-color:\n * checkbox-info-focus-background-color:\n * checkbox-info-focus-border-color:\n * checkbox-info-focus-checked-background-color:\n * checkbox-info-focus-checked-border-color:\n * checkbox-info-hover-background-color:\n * checkbox-info-hover-border-color:\n * checkbox-info-hover-checked-background-color:\n * checkbox-info-hover-checked-border-color:\n * checkbox-info-active-background-color:\n * checkbox-info-active-border-color:\n * checkbox-info-active-checked-background-color:\n * checkbox-info-active-checked-border-color:\n * checkbox-info-disabled-background-color:\n * checkbox-info-disabled-border-color:\n * checkbox-info-disabled-checkmark-color:\n * checkbox-info-disabled-text-color:\n * checkbox-info-disabled-checked-background-color:\n * checkbox-warning-text-color:\n * checkbox-warning-background-color:\n * checkbox-warning-border-color:\n * checkbox-warning-checked-background-color:\n * checkbox-warning-checked-border-color:\n * checkbox-warning-checked-checkmark-color:\n * checkbox-warning-indeterminate-background-color:\n * checkbox-warning-indeterminate-border-color:\n * checkbox-warning-indeterminate-checkmark-color:\n * checkbox-warning-focus-background-color:\n * checkbox-warning-focus-border-color:\n * checkbox-warning-focus-checked-background-color:\n * checkbox-warning-focus-checked-border-color:\n * checkbox-warning-hover-background-color:\n * checkbox-warning-hover-border-color:\n * checkbox-warning-hover-checked-background-color:\n * checkbox-warning-hover-checked-border-color:\n * checkbox-warning-active-background-color:\n * checkbox-warning-active-border-color:\n * checkbox-warning-active-checked-background-color:\n * checkbox-warning-active-checked-border-color:\n * checkbox-warning-disabled-background-color:\n * checkbox-warning-disabled-border-color:\n * checkbox-warning-disabled-checkmark-color:\n * checkbox-warning-disabled-text-color:\n * checkbox-warning-disabled-checked-background-color:\n * checkbox-danger-text-color:\n * checkbox-danger-background-color:\n * checkbox-danger-border-color:\n * checkbox-danger-checked-background-color:\n * checkbox-danger-checked-border-color:\n * checkbox-danger-checked-checkmark-color:\n * checkbox-danger-indeterminate-background-color:\n * checkbox-danger-indeterminate-border-color:\n * checkbox-danger-indeterminate-checkmark-color:\n * checkbox-danger-focus-background-color:\n * checkbox-danger-focus-border-color:\n * checkbox-danger-focus-checked-background-color:\n * checkbox-danger-focus-checked-border-color:\n * checkbox-danger-hover-background-color:\n * checkbox-danger-hover-border-color:\n * checkbox-danger-hover-checked-background-color:\n * checkbox-danger-hover-checked-border-color:\n * checkbox-danger-active-background-color:\n * checkbox-danger-active-border-color:\n * checkbox-danger-active-checked-background-color:\n * checkbox-danger-active-checked-border-color:\n * checkbox-danger-disabled-background-color:\n * checkbox-danger-disabled-border-color:\n * checkbox-danger-disabled-checkmark-color:\n * checkbox-danger-disabled-text-color:\n * checkbox-danger-disabled-checked-background-color:\n * checkbox-control-text-color:\n * checkbox-control-background-color:\n * checkbox-control-border-color:\n * checkbox-control-checked-background-color:\n * checkbox-control-checked-border-color:\n * checkbox-control-checked-checkmark-color:\n * checkbox-control-indeterminate-background-color:\n * checkbox-control-indeterminate-border-color:\n * checkbox-control-indeterminate-checkmark-color:\n * checkbox-control-focus-background-color:\n * checkbox-control-focus-border-color:\n * checkbox-control-focus-checked-background-color:\n * checkbox-control-focus-checked-border-color:\n * checkbox-control-hover-background-color:\n * checkbox-control-hover-border-color:\n * checkbox-control-hover-checked-background-color:\n * checkbox-control-hover-checked-border-color:\n * checkbox-control-active-background-color:\n * checkbox-control-active-border-color:\n * checkbox-control-active-checked-background-color:\n * checkbox-control-active-checked-border-color:\n * checkbox-control-disabled-background-color:\n * checkbox-control-disabled-border-color:\n * checkbox-control-disabled-checkmark-color:\n * checkbox-control-disabled-text-color:\n * checkbox-control-disabled-checked-background-color:\n */\n\n\nlet NbCheckboxComponent = /*#__PURE__*/(() => {\n  class NbCheckboxComponent {\n    constructor(changeDetector, renderer, hostElement, zone, statusService) {\n      this.changeDetector = changeDetector;\n      this.renderer = renderer;\n      this.hostElement = hostElement;\n      this.zone = zone;\n      this.statusService = statusService;\n\n      this.onChange = () => {};\n\n      this.onTouched = () => {};\n\n      this._checked = false;\n      this._disabled = false;\n      /**\n       * Checkbox status.\n       * Possible values are: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`.\n       */\n\n      this.status = 'basic';\n      this._indeterminate = false;\n      /**\n       * Output when checked state is changed by a user\n       * @type EventEmitter<boolean>\n       */\n\n      this.checkedChange = new EventEmitter();\n    }\n\n    get checked() {\n      return this._checked;\n    }\n\n    set checked(value) {\n      this._checked = convertToBoolProperty(value);\n    }\n    /**\n     * Controls input disabled state\n     */\n\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n    }\n    /**\n     * Controls checkbox indeterminate state\n     */\n\n\n    get indeterminate() {\n      return this._indeterminate;\n    }\n\n    set indeterminate(value) {\n      this._indeterminate = convertToBoolProperty(value);\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.hostElement.nativeElement, 'nb-transition');\n      }));\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    writeValue(val) {\n      this._checked = val;\n      this.changeDetector.markForCheck();\n    }\n\n    setDisabledState(val) {\n      this.disabled = convertToBoolProperty(val);\n      this.changeDetector.markForCheck();\n    }\n\n    setTouched() {\n      this.onTouched();\n    }\n\n    updateValueAndIndeterminate(event) {\n      const input = event.target;\n      this.checked = input.checked;\n      this.checkedChange.emit(this.checked);\n      this.onChange(this.checked);\n      this.indeterminate = input.indeterminate;\n    }\n\n  }\n\n  NbCheckboxComponent.ɵfac = function NbCheckboxComponent_Factory(t) {\n    return new (t || NbCheckboxComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbCheckboxComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbCheckboxComponent,\n    selectors: [[\"nb-checkbox\"]],\n    hostVars: 16,\n    hostBindings: function NbCheckboxComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-info\", ctx.info)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      status: \"status\",\n      checked: \"checked\",\n      disabled: \"disabled\",\n      indeterminate: \"indeterminate\"\n    },\n    outputs: {\n      checkedChange: \"checkedChange\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbCheckboxComponent),\n      multi: true\n    }])],\n    ngContentSelectors: _c0,\n    decls: 7,\n    vars: 9,\n    consts: [[1, \"label\"], [\"type\", \"checkbox\", 1, \"native-input\", \"visually-hidden\", 3, \"disabled\", \"checked\", \"indeterminate\", \"change\", \"blur\", \"click\"], [1, \"custom-checkbox\"], [\"icon\", \"minus-bold-outline\", \"pack\", \"nebular-essentials\", 4, \"ngIf\"], [\"icon\", \"checkmark-bold-outline\", \"pack\", \"nebular-essentials\", 4, \"ngIf\"], [1, \"text\"], [\"icon\", \"minus-bold-outline\", \"pack\", \"nebular-essentials\"], [\"icon\", \"checkmark-bold-outline\", \"pack\", \"nebular-essentials\"]],\n    template: function NbCheckboxComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"label\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"input\", 1);\n        ɵngcc0.ɵɵlistener(\"change\", function NbCheckboxComponent_Template_input_change_1_listener($event) {\n          return ctx.updateValueAndIndeterminate($event);\n        })(\"blur\", function NbCheckboxComponent_Template_input_blur_1_listener() {\n          return ctx.setTouched();\n        })(\"click\", function NbCheckboxComponent_Template_input_click_1_listener($event) {\n          return $event.stopPropagation();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"span\", 2);\n        ɵngcc0.ɵɵtemplate(3, NbCheckboxComponent_nb_icon_3_Template, 1, 0, \"nb-icon\", 3);\n        ɵngcc0.ɵɵtemplate(4, NbCheckboxComponent_nb_icon_4_Template, 1, 0, \"nb-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"span\", 5);\n        ɵngcc0.ɵɵprojection(6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"checked\", ctx.checked)(\"indeterminate\", ctx.indeterminate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"indeterminate\", ctx.indeterminate)(\"checked\", ctx.checked);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.indeterminate);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.checked && !ctx.indeterminate);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]   .label[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;margin:0;min-height:inherit}[_nghost-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{flex-shrink:0}.nb-transition[_nghost-%COMP%]   .custom-checkbox[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}.nb-transition[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:color;transition-timing-function:ease-in}\"],\n    changeDetection: 0\n  });\n  return NbCheckboxComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbCheckboxModule = /*#__PURE__*/(() => {\n  class NbCheckboxModule {}\n\n  NbCheckboxModule.ɵfac = function NbCheckboxModule_Factory(t) {\n    return new (t || NbCheckboxModule)();\n  };\n\n  NbCheckboxModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbCheckboxModule\n  });\n  NbCheckboxModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule]]\n  });\n  return NbCheckboxModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbCheckboxModule, {\n    declarations: [NbCheckboxComponent],\n    imports: [NbSharedModule, NbIconModule],\n    exports: [NbCheckboxComponent]\n  });\n})();\n\nlet NbDynamicOverlay = /*#__PURE__*/(() => {\n  class NbDynamicOverlay {\n    constructor(overlay, componentFactoryResolver, zone, overlayContainer) {\n      this.overlay = overlay;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.zone = zone;\n      this.overlayContainer = overlayContainer;\n      this.context = {};\n      this.overlayConfig = {};\n      this.positionStrategyChange$ = new Subject();\n      this.isShown$ = new BehaviorSubject(false);\n      this.destroy$ = new Subject();\n      this.overlayDestroy$ = new Subject();\n    }\n\n    get isAttached() {\n      return this.ref && this.ref.hasAttached();\n    }\n\n    get isShown() {\n      return this.isShown$.pipe(distinctUntilChanged());\n    }\n\n    create(componentType, content, context, positionStrategy, overlayConfig = {}) {\n      this.setContentAndContext(content, context);\n      this.setComponent(componentType);\n      this.setPositionStrategy(positionStrategy);\n      this.setOverlayConfig(overlayConfig);\n      return this;\n    }\n\n    setContent(content) {\n      this.content = content;\n\n      if (this.container) {\n        this.updateContext();\n      }\n\n      this.updatePosition();\n    }\n\n    setContext(context) {\n      this.context = context;\n\n      if (this.container) {\n        this.updateContext();\n      }\n\n      this.updatePosition();\n    }\n\n    setContentAndContext(content, context) {\n      this.content = content;\n      this.context = context;\n\n      if (this.container) {\n        this.updateContext();\n      }\n\n      this.updatePosition();\n    }\n\n    setComponent(componentType) {\n      this.componentType = componentType; // in case the component is shown we recreate it and show it back\n\n      const wasAttached = this.isAttached;\n      this.disposeOverlayRef();\n\n      if (wasAttached) {\n        this.show();\n      }\n    }\n\n    setPositionStrategy(positionStrategy) {\n      this.positionStrategyChange$.next();\n      this.positionStrategy = positionStrategy;\n      this.positionStrategy.positionChange.pipe(filter(() => !!this.container), takeUntil(merge(this.positionStrategyChange$, this.destroy$))).subscribe(position => {\n        this.lastAppliedPosition = position;\n        patch(this.container, {\n          position\n        });\n      });\n\n      if (this.ref) {\n        this.ref.updatePositionStrategy(this.positionStrategy);\n      }\n    }\n\n    setOverlayConfig(overlayConfig) {\n      this.overlayConfig = overlayConfig;\n      const wasAttached = this.isAttached;\n      this.disposeOverlayRef();\n\n      if (wasAttached) {\n        this.show();\n      }\n    }\n\n    show() {\n      if (!this.ref) {\n        this.createOverlay();\n      }\n\n      this.renderContainer();\n\n      if (!this.hasOverlayInContainer()) {\n        // Dispose overlay ref as it refers to the old overlay container and create new by calling `show`\n        this.disposeOverlayRef();\n        return this.show();\n      }\n\n      this.isShown$.next(true);\n    }\n\n    hide() {\n      if (!this.ref) {\n        return;\n      }\n\n      this.ref.detach();\n      this.container = null;\n      this.isShown$.next(false);\n    }\n\n    toggle() {\n      if (this.isAttached) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    }\n\n    dispose() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      this.hide();\n      this.disposeOverlayRef();\n      this.isShown$.complete();\n      this.positionStrategyChange$.complete();\n      this.overlayDestroy$.complete();\n    }\n\n    getContainer() {\n      return this.container;\n    }\n\n    createOverlay() {\n      this.ref = this.overlay.create(Object.assign({\n        positionStrategy: this.positionStrategy,\n        scrollStrategy: this.overlay.scrollStrategies.reposition()\n      }, this.overlayConfig));\n      this.updatePositionWhenStable(this.ref);\n    }\n\n    renderContainer() {\n      const containerContext = this.createContainerContext();\n\n      if (!this.container) {\n        this.container = createContainer(this.ref, this.componentType, containerContext, this.componentFactoryResolver);\n      }\n\n      this.container.instance.renderContent();\n    }\n\n    updateContext() {\n      const containerContext = this.createContainerContext();\n      Object.assign(this.container.instance, containerContext);\n      this.container.instance.renderContent();\n      this.container.changeDetectorRef.detectChanges();\n    }\n\n    createContainerContext() {\n      return {\n        content: this.content,\n        context: this.context,\n        cfr: this.componentFactoryResolver,\n        position: this.lastAppliedPosition\n      };\n    }\n    /**\n     * Dimensions of the container may change after content update. So we listen to zone.stable event to\n     * reposition the container.\n     */\n\n\n    updatePositionWhenStable(overlay) {\n      const overlayDestroy$ = this.overlayDestroy$.pipe(filter(destroyedOverlay => destroyedOverlay === overlay));\n      this.zone.onStable.pipe(takeUntil(merge(this.destroy$, overlayDestroy$))).subscribe(() => this.updatePosition());\n    }\n\n    updatePosition() {\n      if (this.ref) {\n        this.ref.updatePosition();\n      }\n    }\n\n    hasOverlayInContainer() {\n      return this.overlayContainer.getContainerElement().contains(this.ref.hostElement);\n    }\n\n    disposeOverlayRef() {\n      if (this.ref) {\n        this.ref.dispose();\n        this.overlayDestroy$.next(this.ref);\n        this.ref = null;\n        this.container = null;\n      }\n    }\n\n  }\n\n  NbDynamicOverlay.ɵfac = function NbDynamicOverlay_Factory(t) {\n    return new (t || NbDynamicOverlay)(ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(ɵngcc0.NgZone), ɵngcc0.ɵɵinject(NbOverlayContainer));\n  };\n\n  NbDynamicOverlay.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDynamicOverlay,\n    factory: NbDynamicOverlay.ɵfac\n  });\n  return NbDynamicOverlay;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbDynamicOverlayChange extends SimpleChange {\n  constructor(previousValue, currentValue, firstChange = false) {\n    super(previousValue, currentValue, firstChange);\n  }\n\n  isChanged() {\n    return this.currentValue !== this.previousValue;\n  }\n\n}\n\nlet NbDynamicOverlayHandler = /*#__PURE__*/(() => {\n  class NbDynamicOverlayHandler {\n    constructor(positionBuilder, triggerStrategyBuilder, dynamicOverlayService) {\n      this.positionBuilder = positionBuilder;\n      this.triggerStrategyBuilder = triggerStrategyBuilder;\n      this.dynamicOverlayService = dynamicOverlayService;\n      this._context = {};\n      this._trigger = NbTrigger.NOOP;\n      this._position = NbPosition.TOP;\n      this._adjustment = NbAdjustment.NOOP;\n      this._offset = 15;\n      this._overlayConfig = {};\n      this.changes = {};\n    }\n\n    host(host) {\n      this.changes.host = new NbDynamicOverlayChange(this._host, host);\n      this._host = host;\n      return this;\n    }\n\n    trigger(trigger$$1) {\n      this.changes.trigger = new NbDynamicOverlayChange(this._trigger, trigger$$1);\n      this._trigger = trigger$$1;\n      return this;\n    }\n\n    position(position) {\n      this.changes.position = new NbDynamicOverlayChange(this._position, position);\n      this._position = position;\n      return this;\n    }\n\n    adjustment(adjustment) {\n      this.changes.adjustment = new NbDynamicOverlayChange(this._adjustment, adjustment);\n      this._adjustment = adjustment;\n      return this;\n    }\n\n    componentType(componentType) {\n      this.changes.componentType = new NbDynamicOverlayChange(this._componentType, componentType);\n      this._componentType = componentType;\n      return this;\n    }\n\n    content(content) {\n      this.changes.content = new NbDynamicOverlayChange(this._content, content);\n      this._content = content;\n      return this;\n    }\n\n    context(context) {\n      this.changes.context = new NbDynamicOverlayChange(this._context, context);\n      this._context = context;\n      return this;\n    }\n\n    offset(offset) {\n      this.changes.offset = new NbDynamicOverlayChange(this._offset, offset);\n      this._offset = offset;\n      return this;\n    }\n\n    overlayConfig(overlayConfig) {\n      this.changes.overlayConfig = new NbDynamicOverlayChange(this._overlayConfig, overlayConfig);\n      this._overlayConfig = overlayConfig;\n      return this;\n    }\n\n    build() {\n      if (!this._componentType || !this._host) {\n        throw Error(`NbDynamicOverlayHandler: at least 'componentType' and 'host' should be\n      passed before building a dynamic overlay.`);\n      }\n\n      this.dynamicOverlay = this.dynamicOverlayService.create(this._componentType, this._content, this._context, this.createPositionStrategy(), this._overlayConfig);\n      this.connect();\n      this.clearChanges();\n      return this.dynamicOverlay;\n    }\n\n    rebuild() {\n      /**\n       * we should not throw here\n       * as we use rebuilt in lifecycle hooks\n       * which it could be called before the build\n       * so we just ignore this call\n       */\n      if (!this.dynamicOverlay) {\n        return;\n      }\n\n      if (this.isPositionStrategyUpdateRequired()) {\n        this.dynamicOverlay.setPositionStrategy(this.createPositionStrategy());\n      }\n\n      if (this.isTriggerStrategyUpdateRequired()) {\n        this.connect();\n      }\n\n      if (this.isContainerRerenderRequired()) {\n        this.dynamicOverlay.setContentAndContext(this._content, this._context);\n      }\n\n      if (this.isComponentTypeUpdateRequired()) {\n        this.dynamicOverlay.setComponent(this._componentType);\n      }\n\n      if (this.isOverlayConfigUpdateRequired()) {\n        this.dynamicOverlay.setOverlayConfig(this._overlayConfig);\n      }\n\n      this.clearChanges();\n      return this.dynamicOverlay;\n    }\n\n    connect() {\n      if (!this.dynamicOverlay) {\n        throw new Error(`NbDynamicOverlayHandler: cannot connect to DynamicOverlay\n      as it is not created yet. Call build() first`);\n      }\n\n      this.disconnect();\n      this.subscribeOnTriggers(this.dynamicOverlay);\n    }\n\n    disconnect() {\n      if (this.triggerStrategy) {\n        this.triggerStrategy.destroy();\n      }\n    }\n\n    destroy() {\n      this.disconnect();\n      this.clearChanges();\n\n      if (this.dynamicOverlay) {\n        this.dynamicOverlay.dispose();\n      }\n    }\n\n    createPositionStrategy() {\n      return this.positionBuilder.connectedTo(this._host).position(this._position).adjustment(this._adjustment).offset(this._offset);\n    }\n\n    subscribeOnTriggers(dynamicOverlay) {\n      this.triggerStrategy = this.triggerStrategyBuilder.trigger(this._trigger).host(this._host.nativeElement).container(() => dynamicOverlay.getContainer()).build();\n      this.triggerStrategy.show$.subscribe(() => dynamicOverlay.show());\n      this.triggerStrategy.hide$.subscribe(() => dynamicOverlay.hide());\n    }\n\n    isContainerRerenderRequired() {\n      return this.isContentUpdated() || this.isContextUpdated() || this.isPositionStrategyUpdateRequired();\n    }\n\n    isPositionStrategyUpdateRequired() {\n      return this.isAdjustmentUpdated() || this.isPositionUpdated() || this.isOffsetUpdated() || this.isHostUpdated();\n    }\n\n    isTriggerStrategyUpdateRequired() {\n      return this.isTriggerUpdated() || this.isHostUpdated();\n    }\n\n    isComponentTypeUpdateRequired() {\n      return this.isComponentTypeUpdated();\n    }\n\n    isOverlayConfigUpdateRequired() {\n      return this.isOverlayConfigUpdated();\n    }\n\n    isComponentTypeUpdated() {\n      return this.changes.componentType && this.changes.componentType.isChanged();\n    }\n\n    isContentUpdated() {\n      return this.changes.content && this.changes.content.isChanged();\n    }\n\n    isContextUpdated() {\n      return this.changes.context && this.changes.context.isChanged();\n    }\n\n    isAdjustmentUpdated() {\n      return this.changes.adjustment && this.changes.adjustment.isChanged();\n    }\n\n    isPositionUpdated() {\n      return this.changes.position && this.changes.position.isChanged();\n    }\n\n    isHostUpdated() {\n      return this.changes.host && this.changes.host.isChanged();\n    }\n\n    isTriggerUpdated() {\n      return this.changes.trigger && this.changes.trigger.isChanged();\n    }\n\n    isOffsetUpdated() {\n      return this.changes.offset && this.changes.offset.isChanged();\n    }\n\n    isOverlayConfigUpdated() {\n      return this.changes.overlayConfig && this.changes.overlayConfig.isChanged();\n    }\n\n    clearChanges() {\n      this.changes = {};\n    }\n\n  }\n\n  NbDynamicOverlayHandler.ɵfac = function NbDynamicOverlayHandler_Factory(t) {\n    return new (t || NbDynamicOverlayHandler)(ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵinject(NbDynamicOverlay));\n  };\n\n  NbDynamicOverlayHandler.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDynamicOverlayHandler,\n    factory: NbDynamicOverlayHandler.ɵfac\n  });\n  return NbDynamicOverlayHandler;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Overlay container.\n * Renders provided content inside.\n *\n * @styles\n *\n * popover-text-color:\n * popover-text-font-family:\n * popover-text-font-size:\n * popover-text-font-weight:\n * popover-text-line-height:\n * popover-background-color:\n * popover-border-width:\n * popover-border-color:\n * popover-border-radius:\n * popover-shadow:\n * popover-arrow-size:\n * popover-padding:\n * */\n\n\nlet NbPopoverComponent = /*#__PURE__*/(() => {\n  class NbPopoverComponent extends NbPositionedContainerComponent {\n    renderContent() {\n      this.detachContent();\n      this.attachContent();\n    }\n\n    detachContent() {\n      this.overlayContainer.detach();\n    }\n\n    attachContent() {\n      if (this.content instanceof TemplateRef) {\n        this.attachTemplate();\n      } else if (this.content instanceof Type) {\n        this.attachComponent();\n      } else {\n        this.attachString();\n      }\n    }\n\n    attachTemplate() {\n      this.overlayContainer.attachTemplatePortal(new NbTemplatePortal(this.content, null, {\n        $implicit: this.context\n      }));\n    }\n\n    attachComponent() {\n      const portal = new NbComponentPortal(this.content, null, null, this.cfr);\n      const ref = this.overlayContainer.attachComponentPortal(portal, this.context);\n      ref.changeDetectorRef.detectChanges();\n    }\n\n    attachString() {\n      this.overlayContainer.attachStringContent(this.content);\n    }\n\n  }\n\n  NbPopoverComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbPopoverComponent_BaseFactory;\n    return function NbPopoverComponent_Factory(t) {\n      return (ɵNbPopoverComponent_BaseFactory || (ɵNbPopoverComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbPopoverComponent)))(t || NbPopoverComponent);\n    };\n  }();\n\n  NbPopoverComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbPopoverComponent,\n    selectors: [[\"nb-popover\"]],\n    viewQuery: function NbPopoverComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbOverlayContainerComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);\n      }\n    },\n    inputs: {\n      content: \"content\",\n      context: \"context\",\n      cfr: \"cfr\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 2,\n    vars: 0,\n    consts: [[1, \"arrow\"]],\n    template: function NbPopoverComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"span\", 0);\n        ɵngcc0.ɵɵelement(1, \"nb-overlay-container\");\n      }\n    },\n    directives: [NbOverlayContainerComponent],\n    styles: [\"[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;width:0;height:0}\"]\n  });\n  return NbPopoverComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Powerful popover directive, which provides the best UX for your users.\n *\n * @stacked-example(Showcase, popover/popover-showcase.component)\n *\n * Popover can accept different content such as:\n * TemplateRef\n *\n * ```html\n * <button [nbPopover]=\"templateRef\"></button>\n * <ng-template #templateRef>\n *   <span>Hello, Popover!</span>\n * </ng-template>\n * ```\n * ### Installation\n *\n * Import `NbPopoverModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbPopoverModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Custom components\n *\n * ```html\n * <button [nbPopover]=\"MyPopoverComponent\"></button>\n * ```\n *\n * Both custom components and templateRef popovers can receive *contentContext* property\n * that will be passed to the content props.\n *\n * Primitive types\n *\n * ```html\n * <button nbPopover=\"Hello, Popover!\"></button>\n * ```\n *\n * Popover has different placements, such as: top, bottom, left, right, start and end\n * which can be used as following:\n *\n * @stacked-example(Placements, popover/popover-placements.component)\n *\n * By default popover will try to adjust itself to maximally fit viewport\n * and provide the best user experience. It will try to change position of the popover container.\n * If you want to disable this behaviour set it `noop`.\n *\n * ```html\n * <button nbPopover=\"Hello, Popover!\" nbPopoverAdjustment=\"noop\"></button>\n * ```\n *\n * Popover has a number of triggers which provides an ability to show and hide the component in different ways:\n *\n * - Click mode shows the component when a user clicks on the host element and hides when the user clicks\n * somewhere on the document outside the component.\n * - Hint provides capability to show the component when the user hovers over the host element\n * and hide when the user hovers out of the host.\n * - Hover works like hint mode with one exception - when the user moves mouse from host element to\n * the container element the component remains open, so that it is possible to interact with it content.\n * - Focus mode is applied when user focuses the element.\n * - Noop mode - the component won't react to the user interaction.\n *\n * @stacked-example(Available Triggers, popover/popover-modes.component.html)\n *\n * Noop mode is especially useful when you need to control Popover programmatically, for example show/hide\n * as a result of some third-party action, like HTTP request or validation check:\n *\n * @stacked-example(Manual Control, popover/popover-noop.component)\n *\n * Below are examples for manual popover settings control, both via template binding and code.\n * @stacked-example(Popover Settings, popover/popover-dynamic.component)\n *\n * Please note, while manipulating Popover setting via code, you need to call `rebuild()` method to apply the settings\n * changed.\n * @stacked-example(Popover Settings Code, popover/popover-dynamic-code.component)\n *\n * @additional-example(Template Ref, popover/popover-template-ref.component)\n * @additional-example(Custom Component, popover/popover-custom-component.component)\n * */\n\n\nlet NbPopoverDirective = /*#__PURE__*/(() => {\n  class NbPopoverDirective {\n    constructor(hostRef, dynamicOverlayHandler) {\n      this.hostRef = hostRef;\n      this.dynamicOverlayHandler = dynamicOverlayHandler;\n      this.popoverComponent = NbPopoverComponent;\n      this.destroy$ = new Subject();\n      /**\n       * Container content context. Will be applied to the rendered component.\n       * */\n\n      this.context = {};\n      /**\n       * Position will be calculated relatively host element based on the position.\n       * Can be top, right, bottom, left, start or end.\n       * */\n\n      this.position = NbPosition.TOP;\n      this._adjustment = NbAdjustment.CLOCKWISE;\n      /**\n       * Describes when the container will be shown.\n       * Available options: `click`, `hover`, `hint`, `focus` and `noop`\n       * */\n\n      this.trigger = NbTrigger.CLICK;\n      /**\n       * Sets popover offset\n       * */\n\n      this.offset = 15;\n      this._popoverClass = '';\n      this.nbPopoverShowStateChange = new EventEmitter();\n      this.overlayConfig = {\n        panelClass: this.popoverClass\n      };\n    }\n    /**\n     * Container position will be changes automatically based on this strategy if container can't fit view port.\n     * Set this property to `noop` value if you want to disable automatically adjustment.\n     * Available values: `clockwise` (default), `counterclockwise`, `vertical`, `horizontal`, `noop`.\n     * */\n\n\n    get adjustment() {\n      return this._adjustment;\n    }\n\n    set adjustment(value) {\n      this._adjustment = value;\n    }\n\n    get popoverClass() {\n      return this._popoverClass;\n    }\n\n    set popoverClass(value) {\n      if (value !== this.popoverClass) {\n        this._popoverClass = value;\n        this.overlayConfig = {\n          panelClass: this.popoverClass\n        };\n      }\n    }\n\n    get isShown() {\n      return !!(this.dynamicOverlay && this.dynamicOverlay.isAttached);\n    }\n\n    ngOnInit() {\n      this.dynamicOverlayHandler.host(this.hostRef).componentType(this.popoverComponent);\n    }\n\n    ngOnChanges() {\n      this.rebuild();\n    }\n\n    ngAfterViewInit() {\n      this.dynamicOverlay = this.configureDynamicOverlay().build();\n      this.dynamicOverlay.isShown.pipe(skip(1), takeUntil(this.destroy$)).subscribe(isShown => this.nbPopoverShowStateChange.emit({\n        isShown\n      }));\n    }\n\n    rebuild() {\n      this.dynamicOverlay = this.configureDynamicOverlay().rebuild();\n    }\n\n    show() {\n      this.dynamicOverlay.show();\n    }\n\n    hide() {\n      this.dynamicOverlay.hide();\n    }\n\n    toggle() {\n      this.dynamicOverlay.toggle();\n    }\n\n    ngOnDestroy() {\n      this.dynamicOverlayHandler.destroy();\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    configureDynamicOverlay() {\n      return this.dynamicOverlayHandler.position(this.position).trigger(this.trigger).offset(this.offset).adjustment(this.adjustment).content(this.content).context(this.context).overlayConfig(this.overlayConfig);\n    }\n\n  }\n\n  NbPopoverDirective.ɵfac = function NbPopoverDirective_Factory(t) {\n    return new (t || NbPopoverDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler));\n  };\n\n  NbPopoverDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbPopoverDirective,\n    selectors: [[\"\", \"nbPopover\", \"\"]],\n    inputs: {\n      context: [\"nbPopoverContext\", \"context\"],\n      position: [\"nbPopoverPlacement\", \"position\"],\n      trigger: [\"nbPopoverTrigger\", \"trigger\"],\n      offset: [\"nbPopoverOffset\", \"offset\"],\n      adjustment: [\"nbPopoverAdjustment\", \"adjustment\"],\n      popoverClass: [\"nbPopoverClass\", \"popoverClass\"],\n      content: [\"nbPopover\", \"content\"]\n    },\n    outputs: {\n      nbPopoverShowStateChange: \"nbPopoverShowStateChange\"\n    },\n    exportAs: [\"nbPopover\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbPopoverDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbPopoverModule = /*#__PURE__*/(() => {\n  class NbPopoverModule {}\n\n  NbPopoverModule.ɵfac = function NbPopoverModule_Factory(t) {\n    return new (t || NbPopoverModule)();\n  };\n\n  NbPopoverModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbPopoverModule\n  });\n  NbPopoverModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbOverlayModule]]\n  });\n  return NbPopoverModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbPopoverModule, {\n    declarations: [NbPopoverDirective, NbPopoverComponent],\n    imports: [NbOverlayModule],\n    exports: [NbPopoverDirective]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Context menu component used as content within NbContextMenuDirective.\n *\n * @styles\n *\n * context-menu-background-color:\n * context-menu-border-color:\n * context-menu-border-style:\n * context-menu-border-width:\n * context-menu-border-radius:\n * context-menu-text-align:\n * context-menu-min-width:\n * context-menu-max-width:\n * context-menu-shadow:\n * */\n\n\nlet NbContextMenuComponent = /*#__PURE__*/(() => {\n  class NbContextMenuComponent extends NbPositionedContainerComponent {\n    constructor() {\n      super(...arguments);\n      this.items = [];\n      this.context = {\n        items: []\n      };\n    }\n    /**\n     * The method is empty since we don't need to do anything additionally\n     * render is handled by change detection\n     */\n\n\n    renderContent() {}\n\n  }\n\n  NbContextMenuComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbContextMenuComponent_BaseFactory;\n    return function NbContextMenuComponent_Factory(t) {\n      return (ɵNbContextMenuComponent_BaseFactory || (ɵNbContextMenuComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbContextMenuComponent)))(t || NbContextMenuComponent);\n    };\n  }();\n\n  NbContextMenuComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbContextMenuComponent,\n    selectors: [[\"nb-context-menu\"]],\n    inputs: {\n      items: \"items\",\n      context: \"context\",\n      tag: \"tag\"\n    },\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 2,\n    consts: [[1, \"context-menu\", 3, \"items\", \"tag\"]],\n    template: function NbContextMenuComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"nb-menu\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"items\", ctx.context.items)(\"tag\", ctx.context.tag);\n      }\n    },\n    directives: [NbMenuComponent],\n    encapsulation: 2\n  });\n  return NbContextMenuComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Full featured context menu directive.\n *\n * @stacked-example(Showcase, context-menu/context-menu-showcase.component)\n *\n * Just pass menu items array:\n *\n * ```html\n * <button [nbContextMenu]=\"items\"></button>\n * ...\n * items = [{ title: 'Profile' }, { title: 'Log out' }];\n * ```\n * ### Installation\n *\n * Import `NbContextMenuModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbContextMenuModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * Also make sure `NbMenuModule` is imported to your `app.module`.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbMenuModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * ### Usage\n *\n * If you want to handle context menu clicks you have to pass `nbContextMenuTag`\n * param and register to events using NbMenuService.\n * `NbContextMenu` renders plain `NbMenu` inside, so\n * you have to work with it just like with `NbMenu` component:\n *\n * @stacked-example(Menu item click, context-menu/context-menu-click.component)\n *\n * Context menu has different placements, such as: top, bottom, left and right\n * which can be used as following:\n *\n * ```html\n * <button [nbContextMenu]=\"items\" nbContextMenuPlacement=\"right\"></button>\n * ```\n *\n * ```ts\n * items = [{ title: 'Profile' }, { title: 'Log out' }];\n * ```\n *\n * By default context menu will try to adjust itself to maximally fit viewport\n * and provide the best user experience. It will try to change position of the context menu.\n * If you wanna disable this behaviour just set it falsy value.\n *\n * ```html\n * <button [nbContextMenu]=\"items\" nbContextMenuAdjustment=\"counterclockwise\"></button>\n * ```\n *\n * ```ts\n * items = [{ title: 'Profile' }, { title: 'Log out' }];\n * ```\n * Context menu has a number of triggers which provides an ability to show and hide the component in different ways:\n *\n * - Click mode shows the component when a user clicks on the host element and hides when the user clicks\n * somewhere on the document outside the component.\n * - Hint provides capability to show the component when the user hovers over the host element\n * and hide when the user hovers out of the host.\n * - Hover works like hint mode with one exception - when the user moves mouse from host element to\n * the container element the component remains open, so that it is possible to interact with it content.\n * - Focus mode is applied when user focuses the element.\n * - Noop mode - the component won't react to the user interaction.\n *\n * @stacked-example(Available Triggers, context-menu/context-menu-modes.component.html)\n *\n * Noop mode is especially useful when you need to control Popover programmatically, for example show/hide\n * as a result of some third-party action, like HTTP request or validation check:\n *\n * @stacked-example(Manual Control, context-menu/context-menu-noop.component)\n *\n * @stacked-example(Manual Control, context-menu/context-menu-right-click.component)\n * */\n\n\nlet NbContextMenuDirective = /*#__PURE__*/(() => {\n  class NbContextMenuDirective {\n    constructor(hostRef, menuService, dynamicOverlayHandler) {\n      this.hostRef = hostRef;\n      this.menuService = menuService;\n      this.dynamicOverlayHandler = dynamicOverlayHandler;\n      this.contextMenuHost = true;\n      this._position = NbPosition.BOTTOM;\n      /**\n       * Container position will be changes automatically based on this strategy if container can't fit view port.\n       * Set this property to any falsy value if you want to disable automatically adjustment.\n       * Available values: clockwise, counterclockwise.\n       * */\n\n      this.adjustment = NbAdjustment.CLOCKWISE;\n      /**\n       * Describes when the container will be shown.\n       * Available options: `click`, `hover`, `hint`, `focus` and `noop`\n       * */\n\n      this.trigger = NbTrigger.CLICK;\n      this._contextMenuClass = '';\n      this.overlayConfig = {\n        panelClass: this.contextMenuClass\n      };\n      this.overlayContext = {\n        items: this.items,\n        tag: this.tag,\n        position: this.position\n      };\n      this.destroy$ = new Subject();\n      this._items = [];\n    }\n    /**\n     * Position will be calculated relatively host element based on the position.\n     * Can be top, right, bottom and left.\n     * */\n\n\n    get position() {\n      return this._position;\n    }\n\n    set position(value) {\n      if (value !== this.position) {\n        this._position = value;\n        this.updateOverlayContext();\n      }\n    }\n    /**\n     * Set NbMenu tag, which helps identify menu when working with NbMenuService.\n     * */\n\n\n    get tag() {\n      return this._tag;\n    }\n\n    set tag(value) {\n      if (value !== this.tag) {\n        this._tag = value;\n        this.updateOverlayContext();\n      }\n    }\n    /**\n     * Basic menu items, will be passed to the internal NbMenuComponent.\n     * */\n\n\n    get items() {\n      return this._items;\n    }\n\n    set items(items) {\n      this.validateItems(items);\n      this._items = items;\n      this.updateOverlayContext();\n    }\n\n    get contextMenuClass() {\n      return this._contextMenuClass;\n    }\n\n    set contextMenuClass(value) {\n      if (value !== this.contextMenuClass) {\n        this._contextMenuClass = value;\n        this.overlayConfig = {\n          panelClass: this.contextMenuClass\n        };\n      }\n    }\n\n    ngOnInit() {\n      this.dynamicOverlayHandler.host(this.hostRef).componentType(NbContextMenuComponent);\n    }\n\n    ngOnChanges() {\n      this.rebuild();\n    }\n\n    ngAfterViewInit() {\n      this.dynamicOverlay = this.configureDynamicOverlay().build();\n      this.subscribeOnItemClick();\n    }\n\n    rebuild() {\n      this.dynamicOverlay = this.configureDynamicOverlay().rebuild();\n    }\n\n    show() {\n      this.dynamicOverlay.show();\n    }\n\n    hide() {\n      this.dynamicOverlay.hide();\n    }\n\n    toggle() {\n      this.dynamicOverlay.toggle();\n    }\n\n    ngOnDestroy() {\n      this.dynamicOverlayHandler.destroy();\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    configureDynamicOverlay() {\n      return this.dynamicOverlayHandler.position(this.position).trigger(this.trigger).adjustment(this.adjustment).context(this.overlayContext).overlayConfig(this.overlayConfig);\n    }\n    /*\n     * NbMenuComponent will crash if don't pass menu items to it.\n     * So, we just validating them and throw custom obvious error.\n     * */\n\n\n    validateItems(items) {\n      if (!items || !items.length) {\n        throw Error(`List of menu items expected, but given: ${items}`);\n      }\n    }\n\n    subscribeOnItemClick() {\n      this.menuService.onItemClick().pipe(filter(({\n        tag\n      }) => tag === this.tag), takeUntil(this.destroy$)).subscribe(() => this.hide());\n    }\n\n    updateOverlayContext() {\n      this.overlayContext = {\n        items: this.items,\n        position: this.position,\n        tag: this.tag\n      };\n    }\n\n  }\n\n  NbContextMenuDirective.ɵfac = function NbContextMenuDirective_Factory(t) {\n    return new (t || NbContextMenuDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbMenuService), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler));\n  };\n\n  NbContextMenuDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbContextMenuDirective,\n    selectors: [[\"\", \"nbContextMenu\", \"\"]],\n    hostVars: 2,\n    hostBindings: function NbContextMenuDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"context-menu-host\", ctx.contextMenuHost);\n      }\n    },\n    inputs: {\n      adjustment: [\"nbContextMenuAdjustment\", \"adjustment\"],\n      trigger: [\"nbContextMenuTrigger\", \"trigger\"],\n      position: [\"nbContextMenuPlacement\", \"position\"],\n      tag: [\"nbContextMenuTag\", \"tag\"],\n      items: [\"nbContextMenu\", \"items\"],\n      contextMenuClass: [\"nbContextMenuClass\", \"contextMenuClass\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbContextMenuDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbContextMenuModule = /*#__PURE__*/(() => {\n  class NbContextMenuModule {}\n\n  NbContextMenuModule.ɵfac = function NbContextMenuModule_Factory(t) {\n    return new (t || NbContextMenuModule)();\n  };\n\n  NbContextMenuModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbContextMenuModule\n  });\n  NbContextMenuModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, NbOverlayModule, NbMenuModule]]\n  });\n  return NbContextMenuModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbContextMenuModule, {\n    declarations: function () {\n      return [NbContextMenuDirective, NbContextMenuComponent];\n    },\n    imports: function () {\n      return [CommonModule, NbOverlayModule, NbMenuModule];\n    },\n    exports: function () {\n      return [NbContextMenuDirective];\n    }\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Progress Bar is a component for indicating progress.\n *\n * Simple usage:\n *\n * ```html\n * <nb-progress-bar [value]=\"50\"></nb-progress-bar>\n * ```\n * ### Installation\n *\n * Import `NbProgressBarModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbProgressBarModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Progress bar accepts property `value` in range 0-100\n * @stacked-example(Progress bar, progress-bar/progress-bar-showcase.component)\n *\n * Progress bar background could be configured by providing a `status` property:\n * @stacked-example(Progress bar status, progress-bar/progress-bar-status.component)\n *\n * Progress bar size (height and font-size) could be configured by providing a `size` property:\n * @stacked-example(Progress bar size, progress-bar/progress-bar-size.component)\n *\n * `displayValue` property shows current value inside progress bar. It's also possible to add custom text inside:\n * @stacked-example(Progress bar value, progress-bar/progress-bar-value.component)\n *\n * Progress bar supports `width` and `background-color` transition:\n * @stacked-example(Progress bar interactive, progress-bar/progress-bar-interactive.component)\n *\n * @styles\n *\n * progress-bar-animation-duration:\n * progress-bar-border-radius:\n * progress-bar-text-font-family:\n * progress-bar-tiny-height:\n * progress-bar-tiny-text-font-size:\n * progress-bar-tiny-text-font-weight:\n * progress-bar-tiny-text-line-height:\n * progress-bar-small-height:\n * progress-bar-small-text-font-size:\n * progress-bar-small-text-font-weight:\n * progress-bar-small-text-line-height:\n * progress-bar-medium-height:\n * progress-bar-medium-text-font-size:\n * progress-bar-medium-text-font-weight:\n * progress-bar-medium-text-line-height:\n * progress-bar-large-height:\n * progress-bar-large-text-font-size:\n * progress-bar-large-text-font-weight:\n * progress-bar-large-text-line-height:\n * progress-bar-giant-height:\n * progress-bar-giant-text-font-size:\n * progress-bar-giant-text-font-weight:\n * progress-bar-giant-text-line-height:\n * progress-bar-basic-background-color:\n * progress-bar-basic-filled-background-color:\n * progress-bar-basic-text-color:\n * progress-bar-primary-background-color:\n * progress-bar-primary-filled-background-color:\n * progress-bar-primary-text-color:\n * progress-bar-success-background-color:\n * progress-bar-success-filled-background-color:\n * progress-bar-success-text-color:\n * progress-bar-info-background-color:\n * progress-bar-info-filled-background-color:\n * progress-bar-info-text-color:\n * progress-bar-warning-background-color:\n * progress-bar-warning-filled-background-color:\n * progress-bar-warning-text-color:\n * progress-bar-danger-background-color:\n * progress-bar-danger-filled-background-color:\n * progress-bar-danger-text-color:\n * progress-bar-control-background-color:\n * progress-bar-control-filled-background-color:\n * progress-bar-control-text-color:\n */\n\n\nlet NbProgressBarComponent = /*#__PURE__*/(() => {\n  class NbProgressBarComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Progress bar value in percent (0 - 100)\n       */\n\n      this.value = 0;\n      /**\n       * Progress bar background (`basic` (default), `primary`, `info`, `success`, `warning`, `danger`, `control`)\n       */\n\n      this.status = 'basic';\n      /**\n       * Progress bar size (`tiny`, `small`, `medium` (default), `large`, `giant`)\n       */\n\n      this.size = 'medium';\n      /**\n       * Displays value inside progress bar\n       */\n\n      this.displayValue = false;\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n  }\n\n  NbProgressBarComponent.ɵfac = function NbProgressBarComponent_Factory(t) {\n    return new (t || NbProgressBarComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbProgressBarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbProgressBarComponent,\n    selectors: [[\"nb-progress-bar\"]],\n    hostVars: 26,\n    hostBindings: function NbProgressBarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      status: \"status\",\n      size: \"size\",\n      displayValue: \"displayValue\"\n    },\n    ngContentSelectors: _c0,\n    decls: 4,\n    vars: 3,\n    consts: [[1, \"progress-container\"], [1, \"progress-value\"], [4, \"ngIf\"]],\n    template: function NbProgressBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, NbProgressBarComponent_span_2_Template, 2, 1, \"span\", 2);\n        ɵngcc0.ɵɵprojection(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.value, \"%\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.displayValue);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    styles: [\"[_nghost-%COMP%]{display:block}.progress-container[_ngcontent-%COMP%]{overflow:hidden}.progress-value[_ngcontent-%COMP%]{height:100%;text-align:center;overflow:hidden}\"]\n  });\n  return NbProgressBarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbProgressBarModule = /*#__PURE__*/(() => {\n  class NbProgressBarModule {}\n\n  NbProgressBarModule.ɵfac = function NbProgressBarModule_Factory(t) {\n    return new (t || NbProgressBarModule)();\n  };\n\n  NbProgressBarModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbProgressBarModule\n  });\n  NbProgressBarModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbProgressBarModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbProgressBarModule, {\n    declarations: [NbProgressBarComponent],\n    imports: [NbSharedModule],\n    exports: [NbProgressBarComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Alert component.\n *\n * Basic alert example:\n * @stacked-example(Showcase, alert/alert-showcase.component)\n *\n * Alert configuration:\n *\n * ```html\n * <nb-alert status=\"success\">\n *   You have been successfully authenticated!\n * </nb-alert>\n * ```\n * ### Installation\n *\n * Import `NbAlertModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbAlertModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Alert could additionally have a `close` button when `closable` property is set:\n * ```html\n * <nb-alert status=\"success\" closable (close)=\"onClose()\">\n *   You have been successfully authenticated!\n * </nb-alert>\n * ```\n *\n * Colored alerts could be simply configured by providing a `status` property:\n * @stacked-example(Alert status, alert/alert-colors.component)\n *\n * It is also possible to assign an `accent` property for a slight alert highlight\n * as well as combine it with `status`:\n * @stacked-example(Alert accent, alert/alert-accents.component)\n *\n * And `outline` property:\n * @stacked-example(Outline Alert, alert/alert-outline.component)\n *\n * @additional-example(Multiple Sizes, alert/alert-sizes.component)\n *\n * @styles\n *\n * alert-border-radius:\n * alert-bottom-margin:\n * alert-padding:\n * alert-scrollbar-color:\n * alert-scrollbar-background-color:\n * alert-scrollbar-width:\n * alert-shadow:\n * alert-text-font-family:\n * alert-text-font-size:\n * alert-text-font-weight:\n * alert-text-line-height:\n * alert-closable-start-padding:\n * alert-tiny-height:\n * alert-small-height:\n * alert-medium-height:\n * alert-medium-padding:\n * alert-large-height:\n * alert-giant-height:\n * alert-basic-background-color:\n * alert-basic-text-color:\n * alert-primary-background-color:\n * alert-primary-text-color:\n * alert-success-background-color:\n * alert-success-text-color:\n * alert-info-background-color:\n * alert-info-text-color:\n * alert-warning-background-color:\n * alert-warning-text-color:\n * alert-danger-background-color:\n * alert-danger-text-color:\n * alert-control-background-color:\n * alert-control-text-color:\n * alert-accent-basic-color:\n * alert-accent-primary-color:\n * alert-accent-info-color:\n * alert-accent-success-color:\n * alert-accent-warning-color:\n * alert-accent-danger-color:\n * alert-accent-control-color:\n * alert-outline-width:\n * alert-outline-basic-color:\n * alert-outline-primary-color:\n * alert-outline-info-color:\n * alert-outline-success-color:\n * alert-outline-warning-color:\n * alert-outline-danger-color:\n * alert-outline-control-color:\n */\n\n\nlet NbAlertComponent = /*#__PURE__*/(() => {\n  class NbAlertComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Alert size, available sizes:\n       * `tiny`, `small`, `medium`, `large`, `giant`\n       * Unset by default.\n       */\n\n      this.size = '';\n      /**\n       * Alert status (adds specific styles):\n       * `basic` (default), `primary`, `success`, `info`, `warning`, `danger`, `control`.\n       */\n\n      this.status = 'basic';\n      /**\n       * Alert accent (color of the top border):\n       * `basic`, `primary`, `success`, `info`, `warning`, `danger`, `control`.\n       * Unset by default.\n       */\n\n      this.accent = '';\n      /**\n       * Alert outline (color of the border):\n       * `basic`, `primary`, `success`, `info`, `warning`, `danger`, `control`.\n       * Unset by default.\n       */\n\n      this.outline = '';\n      this._closable = false;\n      /**\n       * Emits when chip is removed\n       * @type EventEmitter<any>\n       */\n\n      this.close = new EventEmitter();\n    }\n    /**\n     * Shows `close` icon\n     */\n\n\n    get closable() {\n      return this._closable;\n    }\n\n    set closable(value) {\n      this._closable = convertToBoolProperty(value);\n    }\n    /**\n     * Emits the removed chip event\n     */\n\n\n    onClose() {\n      this.close.emit();\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get primaryAccent() {\n      return this.accent === 'primary';\n    }\n\n    get successAccent() {\n      return this.accent === 'success';\n    }\n\n    get infoAccent() {\n      return this.accent === 'info';\n    }\n\n    get warningAccent() {\n      return this.accent === 'warning';\n    }\n\n    get dangerAccent() {\n      return this.accent === 'danger';\n    }\n\n    get basicAccent() {\n      return this.accent === 'basic';\n    }\n\n    get controlAccent() {\n      return this.accent === 'control';\n    }\n\n    get primaryOutline() {\n      return this.outline === 'primary';\n    }\n\n    get successOutline() {\n      return this.outline === 'success';\n    }\n\n    get infoOutline() {\n      return this.outline === 'info';\n    }\n\n    get warningOutline() {\n      return this.outline === 'warning';\n    }\n\n    get dangerOutline() {\n      return this.outline === 'danger';\n    }\n\n    get basicOutline() {\n      return this.outline === 'basic';\n    }\n\n    get controlOutline() {\n      return this.outline === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n  }\n\n  NbAlertComponent.ɵfac = function NbAlertComponent_Factory(t) {\n    return new (t || NbAlertComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbAlertComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAlertComponent,\n    selectors: [[\"nb-alert\"]],\n    hostVars: 56,\n    hostBindings: function NbAlertComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"closable\", ctx.closable)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"accent-primary\", ctx.primaryAccent)(\"accent-success\", ctx.successAccent)(\"accent-info\", ctx.infoAccent)(\"accent-warning\", ctx.warningAccent)(\"accent-danger\", ctx.dangerAccent)(\"accent-basic\", ctx.basicAccent)(\"accent-control\", ctx.controlAccent)(\"outline-primary\", ctx.primaryOutline)(\"outline-success\", ctx.successOutline)(\"outline-info\", ctx.infoOutline)(\"outline-warning\", ctx.warningOutline)(\"outline-danger\", ctx.dangerOutline)(\"outline-basic\", ctx.basicOutline)(\"outline-control\", ctx.controlOutline);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      status: \"status\",\n      accent: \"accent\",\n      outline: \"outline\",\n      closable: \"closable\"\n    },\n    outputs: {\n      close: \"close\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 1,\n    consts: [[\"type\", \"button\", \"class\", \"close\", \"aria-label\", \"Close\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", 3, \"click\"], [\"aria-hidden\", \"true\"]],\n    template: function NbAlertComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, NbAlertComponent_button_0_Template, 3, 0, \"button\", 0);\n        ɵngcc0.ɵɵprojection(1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.closable);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative}[dir=ltr]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{right:0}[dir=rtl]   [_nghost-%COMP%]   .close[_ngcontent-%COMP%]{left:0}.close[_ngcontent-%COMP%]{position:absolute;top:0;color:inherit;background-color:transparent;border:0;appearance:none}\"]\n  });\n  return NbAlertComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbAlertModule = /*#__PURE__*/(() => {\n  class NbAlertModule {}\n\n  NbAlertModule.ɵfac = function NbAlertModule_Factory(t) {\n    return new (t || NbAlertModule)();\n  };\n\n  NbAlertModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbAlertModule\n  });\n  NbAlertModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbAlertModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAlertModule, {\n    declarations: [NbAlertComponent],\n    imports: [NbSharedModule],\n    exports: [NbAlertComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat form component.\n *\n * Show a message form with a send message button.\n *\n * ```ts\n * <nb-chat-form showButton=\"true\" buttonIcon=\"nb-send\">\n * </nb-chat-form>\n * ```\n *\n * When `[dropFiles]=\"true\"` handles files drag&drop with a file preview.\n *\n * Drag & drop available for files and images:\n * @stacked-example(Drag & Drop Chat, chat/chat-drop.component)\n *\n * New message could be tracked outside by using `(send)` output.\n *\n * ```ts\n * <nb-chat-form (send)=\"onNewMessage($event)\">\n * </nb-chat-form>\n *\n * // ...\n *\n * onNewMessage({ message: string, files: any[] }) {\n *   this.service.sendToServer(message, files);\n * }\n * ```\n */\n\n\nlet NbChatFormComponent = /*#__PURE__*/(() => {\n  class NbChatFormComponent {\n    constructor(cd, domSanitizer) {\n      this.cd = cd;\n      this.domSanitizer = domSanitizer;\n      this.status = 'basic';\n      this.inputFocus = false;\n      this.inputHover = false;\n      this.droppedFiles = [];\n      this.imgDropTypes = ['image/png', 'image/jpeg', 'image/gif'];\n      /**\n       * Predefined message text\n       * @type {string}\n       */\n\n      this.message = '';\n      /**\n       * Message placeholder text\n       * @type {string}\n       */\n\n      this.messagePlaceholder = 'Type a message';\n      /**\n       * Send button title\n       * @type {string}\n       */\n\n      this.buttonTitle = '';\n      /**\n       * Send button icon, shown if `buttonTitle` is empty\n       * @type {string}\n       */\n\n      this.buttonIcon = 'paper-plane-outline';\n      /**\n       * Show send button\n       * @type {boolean}\n       */\n\n      this.showButton = true;\n      /**\n       * Show send button\n       * @type {boolean}\n       */\n\n      this.dropFiles = false;\n      /**\n       * File drop placeholder text\n       * @type {string}\n       */\n\n      this.dropFilePlaceholder = 'Drop file to send';\n      /**\n       *\n       * @type {EventEmitter<{ message: string, files: File[] }>}\n       */\n\n      this.send = new EventEmitter();\n      /**\n       * Emits when message input value has been changed\n       * @type {EventEmitter<string>}\n       */\n\n      this.onInputChange = new EventEmitter();\n      this.fileOver = false;\n    }\n\n    onDrop(event) {\n      if (this.dropFiles) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.fileOver = false;\n\n        if (event.dataTransfer && event.dataTransfer.files) {\n          for (const file of event.dataTransfer.files) {\n            const res = file;\n\n            if (this.imgDropTypes.includes(file.type)) {\n              const fr = new FileReader();\n\n              fr.onload = e => {\n                res.src = e.target.result;\n                res.urlStyle = this.domSanitizer.bypassSecurityTrustStyle(`url(${res.src})`);\n                this.cd.detectChanges();\n              };\n\n              fr.readAsDataURL(file);\n            }\n\n            this.droppedFiles.push(res);\n          }\n        }\n      }\n    }\n\n    removeFile(file) {\n      const index = this.droppedFiles.indexOf(file);\n\n      if (index >= 0) {\n        this.droppedFiles.splice(index, 1);\n      }\n    }\n\n    onDragOver() {\n      if (this.dropFiles) {\n        this.fileOver = true;\n      }\n    }\n\n    onDragLeave() {\n      if (this.dropFiles) {\n        this.fileOver = false;\n      }\n    }\n\n    sendMessage() {\n      if (this.droppedFiles.length || String(this.message).trim().length) {\n        this.send.emit({\n          message: this.message,\n          files: this.droppedFiles\n        });\n        this.message = '';\n        this.droppedFiles = [];\n      }\n    }\n\n    setStatus(status) {\n      if (this.status !== status) {\n        this.status = status;\n        this.cd.detectChanges();\n      }\n    }\n\n    getInputStatus() {\n      if (this.fileOver) {\n        return this.getHighlightStatus();\n      }\n\n      if (this.inputFocus || this.inputHover) {\n        return this.status;\n      }\n\n      return 'basic';\n    }\n\n    getButtonStatus() {\n      return this.getHighlightStatus();\n    }\n\n    getHighlightStatus() {\n      if (this.status === 'basic' || this.status === 'control') {\n        return 'primary';\n      }\n\n      return this.status;\n    }\n\n    onModelChange(value) {\n      this.onInputChange.emit(value);\n    }\n\n  }\n\n  NbChatFormComponent.ɵfac = function NbChatFormComponent_Factory(t) {\n    return new (t || NbChatFormComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer));\n  };\n\n  NbChatFormComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatFormComponent,\n    selectors: [[\"nb-chat-form\"]],\n    hostVars: 2,\n    hostBindings: function NbChatFormComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"drop\", function NbChatFormComponent_drop_HostBindingHandler($event) {\n          return ctx.onDrop($event);\n        })(\"dragover\", function NbChatFormComponent_dragover_HostBindingHandler() {\n          return ctx.onDragOver();\n        })(\"dragleave\", function NbChatFormComponent_dragleave_HostBindingHandler() {\n          return ctx.onDragLeave();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"file-over\", ctx.fileOver);\n      }\n    },\n    inputs: {\n      message: \"message\",\n      messagePlaceholder: \"messagePlaceholder\",\n      buttonTitle: \"buttonTitle\",\n      buttonIcon: \"buttonIcon\",\n      showButton: \"showButton\",\n      dropFiles: \"dropFiles\",\n      dropFilePlaceholder: \"dropFilePlaceholder\"\n    },\n    outputs: {\n      send: \"send\",\n      onInputChange: \"onInputChange\"\n    },\n    decls: 4,\n    vars: 7,\n    consts: [[\"class\", \"dropped-files\", 4, \"ngIf\"], [1, \"message-row\"], [\"nbInput\", \"\", \"fullWidth\", \"\", \"type\", \"text\", 3, \"status\", \"ngModel\", \"placeholder\", \"focus\", \"blur\", \"mouseenter\", \"mouseleave\", \"ngModelChange\", \"keyup.enter\"], [\"nbButton\", \"\", \"class\", \"send-button\", 3, \"status\", \"with-icon\", \"click\", 4, \"ngIf\"], [1, \"dropped-files\"], [4, \"ngFor\", \"ngForOf\"], [3, \"background-image\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"remove\", 3, \"click\"], [\"icon\", \"file-text-outline\", \"pack\", \"nebular-essentials\"], [\"nbButton\", \"\", 1, \"send-button\", 3, \"status\", \"click\"], [\"pack\", \"nebular-essentials\", 3, \"icon\", 4, \"ngIf\", \"ngIfElse\"], [\"title\", \"\"], [\"pack\", \"nebular-essentials\", 3, \"icon\"]],\n    template: function NbChatFormComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbChatFormComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"input\", 2);\n        ɵngcc0.ɵɵlistener(\"focus\", function NbChatFormComponent_Template_input_focus_2_listener() {\n          return ctx.inputFocus = true;\n        })(\"blur\", function NbChatFormComponent_Template_input_blur_2_listener() {\n          return ctx.inputFocus = false;\n        })(\"mouseenter\", function NbChatFormComponent_Template_input_mouseenter_2_listener() {\n          return ctx.inputHover = true;\n        })(\"mouseleave\", function NbChatFormComponent_Template_input_mouseleave_2_listener() {\n          return ctx.inputHover = false;\n        })(\"ngModelChange\", function NbChatFormComponent_Template_input_ngModelChange_2_listener($event) {\n          return ctx.message = $event;\n        })(\"ngModelChange\", function NbChatFormComponent_Template_input_ngModelChange_2_listener($event) {\n          return ctx.onModelChange($event);\n        })(\"keyup.enter\", function NbChatFormComponent_Template_input_keyup_enter_2_listener() {\n          return ctx.sendMessage();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbChatFormComponent_button_3_Template, 4, 5, \"button\", 3);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.droppedFiles == null ? null : ctx.droppedFiles.length);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵclassProp(\"with-button\", ctx.showButton);\n        ɵngcc0.ɵɵpropertyInterpolate(\"placeholder\", ctx.fileOver ? ctx.dropFilePlaceholder : ctx.messagePlaceholder);\n        ɵngcc0.ɵɵproperty(\"status\", ctx.getInputStatus())(\"ngModel\", ctx.message);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showButton);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgIf, NbInputDirective, ɵngcc6.DefaultValueAccessor, ɵngcc6.NgControlStatus, ɵngcc6.NgModel, ɵngcc2.NgForOf, NbIconComponent, NbButtonComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatFormComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * `NbCustomMessageService` is used to store instances of `NbChatCustomMessageDirective`s which\n * were provided in the chat component.\n */\n\n\nlet NbCustomMessageService = /*#__PURE__*/(() => {\n  class NbCustomMessageService {\n    constructor() {\n      this.customMessages = new Map();\n    }\n\n    register(type, instance) {\n      this.customMessages.set(type, instance);\n    }\n\n    unregister(type) {\n      return this.customMessages.delete(type);\n    }\n\n    getInstance(type) {\n      return this.customMessages.get(type);\n    }\n\n  }\n\n  NbCustomMessageService.ɵfac = function NbCustomMessageService_Factory(t) {\n    return new (t || NbCustomMessageService)();\n  };\n\n  NbCustomMessageService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbCustomMessageService,\n    factory: NbCustomMessageService.ɵfac\n  });\n  return NbCustomMessageService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat message component.\n *\n * Multiple message types are available through a `type` property, such as\n * - text - simple text message\n * - file - could be a file preview or a file icon\n * if multiple files are provided grouped files are shown\n * - quote - quotes a message with specific quote styles\n * - map - shows a google map picture by provided [latitude] and [longitude] properties\n *\n * @stacked-example(Available Types, chat/chat-message-types-showcase.component)\n *\n * Message with attached files:\n * ```html\n * <nb-chat-message\n *   type=\"file\"\n *   [files]=\"[ { url: '...' } ]\"\n *   message=\"Hello world!\">\n * </nb-chat-message>\n * ```\n *\n * Map message:\n * ```html\n * <nb-chat-message\n *   type=\"map\"\n *   [latitude]=\"53.914\"\n *   [longitude]=\"27.59\"\n *   message=\"Here I am\">\n * </nb-chat-message>\n * ```\n *\n * @styles\n *\n * chat-message-background:\n * chat-message-text-color:\n * chat-message-reply-background-color:\n * chat-message-reply-text-color:\n * chat-message-avatar-background-color:\n * chat-message-sender-text-color:\n * chat-message-quote-background-color:\n * chat-message-quote-text-color:\n * chat-message-file-text-color:\n * chat-message-file-background-color:\n */\n\n\nlet NbChatMessageComponent = /*#__PURE__*/(() => {\n  class NbChatMessageComponent {\n    constructor(domSanitizer, customMessageService) {\n      this.domSanitizer = domSanitizer;\n      this.customMessageService = customMessageService;\n      this.builtInMessageTypes = ['text', 'file', 'map', 'quote'];\n      this._reply = false;\n    }\n\n    get _addReplyClass() {\n      return this._areDefaultStylesEnabled() && this.reply;\n    }\n\n    get _addNotReplyClass() {\n      return this._areDefaultStylesEnabled() && this.notReply;\n    }\n\n    get _addNoSpaceClass() {\n      return this._areDefaultStylesEnabled() && !this.message;\n    }\n\n    get flyInOut() {\n      return true;\n    }\n\n    get notReply() {\n      return !this.reply;\n    }\n    /**\n     * Determines if a message is a reply\n     */\n\n\n    get reply() {\n      return this._reply;\n    }\n\n    set reply(value) {\n      this._reply = convertToBoolProperty(value);\n    }\n    /**\n     * Message send avatar\n     * @type {string}\n     */\n\n\n    set avatar(value) {\n      this.avatarStyle = value ? this.domSanitizer.bypassSecurityTrustStyle(`url(${value})`) : null;\n    }\n\n    getInitials() {\n      if (this.sender) {\n        const names = this.sender.split(' ');\n        return names.map(n => n.charAt(0)).splice(0, 2).join('').toUpperCase();\n      }\n\n      return '';\n    }\n\n    _isBuiltInMessageType() {\n      // Unset type defaults to \"text\" type\n      return this.type == null || this.builtInMessageTypes.includes(this.type);\n    }\n\n    _getTemplate() {\n      const customMessage = this.getCustomMessage(this.type);\n      return customMessage.templateRef;\n    }\n\n    _getTemplateContext() {\n      return {\n        $implicit: this.customMessageData,\n        isReply: this.reply\n      };\n    }\n\n    _areDefaultStylesEnabled() {\n      const customMessageDirective = this.getCustomMessage(this.type);\n      return !customMessageDirective.noStyles;\n    }\n\n    getCustomMessage(type) {\n      const customMessageDirective = this.customMessageService.getInstance(type);\n\n      if (!customMessageDirective) {\n        throw new Error(`nb-chat: Can't find template for custom type '${type}'. ` + `Make sure you provide it in the chat component with *nbCustomMessage='${type}'.`);\n      }\n\n      return customMessageDirective;\n    }\n\n  }\n\n  NbChatMessageComponent.ɵfac = function NbChatMessageComponent_Factory(t) {\n    return new (t || NbChatMessageComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(NbCustomMessageService));\n  };\n\n  NbChatMessageComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatMessageComponent,\n    selectors: [[\"nb-chat-message\"]],\n    hostVars: 5,\n    hostBindings: function NbChatMessageComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵsyntheticHostProperty(\"@flyInOut\", ctx.flyInOut);\n        ɵngcc0.ɵɵclassProp(\"not-reply\", ctx.notReply)(\"reply\", ctx.reply);\n      }\n    },\n    inputs: {\n      reply: \"reply\",\n      avatar: \"avatar\",\n      message: \"message\",\n      sender: \"sender\",\n      date: \"date\",\n      dateFormat: \"dateFormat\",\n      files: \"files\",\n      quote: \"quote\",\n      latitude: \"latitude\",\n      longitude: \"longitude\",\n      type: \"type\",\n      customMessageData: \"customMessageData\"\n    },\n    decls: 5,\n    vars: 3,\n    consts: [[3, \"initials\", \"avatarStyle\", 4, \"ngIf\"], [1, \"message\"], [3, \"ngSwitch\", 4, \"ngIf\", \"ngIfElse\"], [\"customTemplate\", \"\"], [3, \"initials\", \"avatarStyle\"], [3, \"ngSwitch\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\", \"files\", 4, \"ngSwitchCase\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\", \"quote\", 4, \"ngSwitchCase\"], [3, \"sender\", \"date\", \"message\", \"latitude\", \"longitude\", 4, \"ngSwitchCase\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\", 4, \"ngSwitchDefault\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\", \"files\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\", \"quote\"], [3, \"sender\", \"date\", \"message\", \"latitude\", \"longitude\"], [3, \"sender\", \"date\", \"dateFormat\", \"message\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"]],\n    template: function NbChatMessageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbChatMessageComponent_nb_chat_avatar_0_Template, 1, 2, \"nb-chat-avatar\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, NbChatMessageComponent_ng_container_2_Template, 5, 4, \"ng-container\", 2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbChatMessageComponent_ng_template_3_Template, 3, 16, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(4);\n\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.notReply);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx._isBuiltInMessageType())(\"ngIfElse\", _r2);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgIf, NbChatAvatarComponent, ɵngcc2.NgSwitch, ɵngcc2.NgSwitchCase, ɵngcc2.NgSwitchDefault, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageMapComponent, NbChatMessageTextComponent, ɵngcc2.NgTemplateOutlet];\n    },\n    encapsulation: 2,\n    data: {\n      animation: [trigger('flyInOut', [state('in', style({\n        transform: 'translateX(0)'\n      })), transition('void => *', [style({\n        transform: 'translateX(-100%)'\n      }), animate(80)]), transition('* => void', [animate(80, style({\n        transform: 'translateX(100%)'\n      }))])])]\n    },\n    changeDetection: 0\n  });\n  return NbChatMessageComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Conversational UI collection - a set of components for chat-like UI construction.\n *\n * Main features:\n * - different message types support (text, image, file, file group, map, etc)\n * - drag & drop for images and files with preview\n * - different UI styles\n * - custom action buttons (coming soon)\n *\n * Here's a complete example build in a bot-like app. Type `help` to be able to receive different message types.\n * Enjoy the conversation and the beautiful UI.\n * @stacked-example(Showcase, chat/chat-showcase.component)\n *\n * Basic chat configuration and usage:\n * ```ts\n * <nb-chat title=\"Nebular Conversational UI\">\n *       <nb-chat-message *ngFor=\"let msg of messages\"\n *                        [type]=\"msg.type\"\n *                        [message]=\"msg.text\"\n *                        [reply]=\"msg.reply\"\n *                        [sender]=\"msg.user.name\"\n *                        [date]=\"msg.date\"\n *                        [files]=\"msg.files\"\n *                        [quote]=\"msg.quote\"\n *                        [latitude]=\"msg.latitude\"\n *                        [longitude]=\"msg.longitude\"\n *                        [avatar]=\"msg.user.avatar\">\n *   </nb-chat-message>\n *\n *   <nb-chat-form (send)=\"sendMessage($event)\" [dropFiles]=\"true\">\n *   </nb-chat-form>\n * </nb-chat>\n * ```\n * ### Installation\n *\n * Import `NbChatModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbChatModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * If you need to provide an API key for a `map` message type (which is required by Google Maps)\n * you may use `NbChatModule.forRoot({ ... })` call if this is a global app configuration\n * or `NbChatModule.forChild({ ... })` for a feature module configuration:\n *\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbChatModule.forRoot({ messageGoogleMapKey: 'MAP_KEY' }),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * ### Usage\n *\n * There are three main components:\n * ```ts\n * <nb-chat>\n * </nb-chat> // chat container\n *\n * <nb-chat-form>\n * </nb-chat-form> // chat form with drag&drop files feature\n *\n * <nb-chat-message>\n * </nb-chat-message> // chat message, available multiple types\n * ```\n *\n * Two users conversation showcase:\n * @stacked-example(Conversation, chat/chat-conversation-showcase.component)\n *\n * Chat UI is also available in different colors by specifying a `[status]` input:\n *\n * @stacked-example(Colored Chat, chat/chat-colors.component)\n *\n * Also it is possible to configure sizes through `[size]` input:\n *\n * @stacked-example(Chat Sizes, chat/chat-sizes.component)\n *\n * # Custom message types\n *\n * Besides built-in message types, you could provide custom ones with their own template to render.\n * As an example, let's add the `link` message type.\n * <br>\n * First, you need to provide a template for the `link` message type:\n * ```html\n * <nb-chat>\n *   <a *nbCustomMessage=\"'link'\" href=\"https://example.com\">example.com</a>\n * </nb-chat>\n * ```\n * Then, add the `nb-chat-message` component with the `link` type:\n * ```html\n * <nb-chat>\n *   <a *nbCustomMessage=\"'link'\" href=\"https://example.com\">example.com</a>\n *   <nb-chat-message type=\"link\"></nb-chat-message>\n * </nb-chat>\n * ```\n *\n * <div class=\"note note-warning\">\n *   <div class=\"note-title\">Important!</div>\n *   <div class=\"note-body\">\n *     Custom chat messages must be defined before the `nb-chat-message`.\n *   </div>\n * </div>\n *\n * Custom message templates could have arbitrary data associated with them. Let's extract hardcoded link\n * href and text. To pass some data to the custom message template, use the `customMessageData` input\n * of the `nb-chat-message` component:\n * ```html\n * ...\n * <nb-chat-message type=\"link\" [customMessageData]=\"{ href: 'https://example.com', text: 'example.com' }\">\n * </nb-chat-message>\n * ...\n * ```\n * When `customMessageData` is set, this object would become a template context and you'll be able\n * to reference it via `let varName` syntax:\n * ```html\n * <a *nbCustomMessage=\"'link'; let data\" [href]=\"data.href\">{{ data.text }}</a>\n * ```\n *\n * That's it, full example will look like this:\n * ```html\n * <nb-chat title=\"Nebular Conversational UI\">\n *   <a *nbCustomMessage=\"'link'; let data\" [href]=\"data.href\">{{ data.text }}</a>\n *   <nb-chat-message type=\"link\" [customMessageData]=\"{ href: 'https://example.com', text: 'example.com' }\">\n *   </nb-chat-message>\n * </nb-chat>\n * ```\n *\n * If you want to style your custom template from the ground up you could turn off generic message styling\n * (such as round borders, color, background, etc.) via the `noStyles` input:\n * ```html\n *   <div *nbCustomMessage=\"'my-custom-type'; noStyles: true\">...</div>\n * ```\n * When you decide to use your own styles, the `isReply` property of the custom message template context\n * would come in handy. This property allows you to determine whether the message is a reply or not.\n * For example, to change link text color (as replies have a different background):\n * ```html\n * <a *nbCustomMessage=\"'link'; let data; let isReply=isReply\"\n *    [href]=\"data.href\"\n *    [class.link-control]=\"!isReply\">\n *   {{ data.label }}\n * </a>\n * ```\n *\n * Below, you could find a more complex example with multiple custom message types:\n * @stacked-example(Custom message, chat/chat-custom-message.component)\n *\n * @styles\n *\n * chat-background-color:\n * chat-border:\n * chat-border-radius:\n * chat-shadow:\n * chat-padding:\n * chat-scrollbar-color:\n * chat-scrollbar-background-color:\n * chat-scrollbar-width:\n * chat-text-color:\n * chat-text-font-family:\n * chat-text-font-size:\n * chat-text-font-weight:\n * chat-text-line-height:\n * chat-header-text-font-family:\n * chat-header-text-font-size:\n * chat-header-text-font-weight:\n * chat-header-text-line-height:\n * chat-tiny-height:\n * chat-small-height:\n * chat-medium-height:\n * chat-large-height:\n * chat-giant-height:\n * chat-basic-background-color:\n * chat-basic-text-color:\n * chat-primary-background-color:\n * chat-primary-text-color:\n * chat-success-background-color:\n * chat-success-text-color:\n * chat-info-background-color:\n * chat-info-text-color:\n * chat-warning-background-color:\n * chat-warning-text-color:\n * chat-danger-background-color:\n * chat-danger-text-color:\n * chat-control-background-color:\n * chat-control-text-color:\n * chat-divider-color:\n * chat-divider-style:\n * chat-divider-width:\n * chat-message-background:\n * chat-message-text-color:\n * chat-message-reply-background-color:\n * chat-message-reply-text-color:\n * chat-message-avatar-background-color:\n * chat-message-sender-text-color:\n * chat-message-quote-background-color:\n * chat-message-quote-text-color:\n * chat-message-file-text-color:\n * chat-message-file-background-color:\n */\n\n\nlet NbChatComponent = /*#__PURE__*/(() => {\n  class NbChatComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Chat status color (adds specific styles):\n       * `basic` (default), `primary`, `success`, `info`, `warning`, `danger`, `control`.\n       */\n\n      this.status = 'basic';\n      this.noMessagesPlaceholder = 'No messages yet.';\n      this._scrollBottom = true;\n    }\n    /**\n     * Scroll chat to the bottom of the list when a new message arrives\n     */\n\n\n    get scrollBottom() {\n      return this._scrollBottom;\n    }\n\n    set scrollBottom(value) {\n      this._scrollBottom = convertToBoolProperty(value);\n    }\n\n    ngOnChanges(changes) {\n      if ('status' in changes) {\n        this.updateFormStatus();\n      }\n    }\n\n    ngAfterContentInit() {\n      this.updateFormStatus();\n    }\n\n    ngAfterViewInit() {\n      this.messages.changes.subscribe(messages => {\n        this.messages = messages;\n        this.updateView();\n      });\n      this.updateView();\n    }\n\n    updateView() {\n      if (this.scrollBottom) {\n        this.scrollListBottom();\n      }\n    }\n\n    scrollListBottom() {\n      this.scrollable.nativeElement.scrollTop = this.scrollable.nativeElement.scrollHeight;\n    }\n\n    updateFormStatus() {\n      if (this.chatForm) {\n        this.chatForm.setStatus(this.status);\n      }\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n  }\n\n  NbChatComponent.ɵfac = function NbChatComponent_Factory(t) {\n    return new (t || NbChatComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbChatComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatComponent,\n    selectors: [[\"nb-chat\"]],\n    contentQueries: function NbChatComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbChatFormComponent, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbChatMessageComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.chatForm = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.messages = _t);\n      }\n    },\n    viewQuery: function NbChatComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c23, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.scrollable = _t.first);\n      }\n    },\n    hostVars: 26,\n    hostBindings: function NbChatComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      status: \"status\",\n      noMessagesPlaceholder: \"noMessagesPlaceholder\",\n      scrollBottom: \"scrollBottom\",\n      title: \"title\",\n      size: \"size\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([NbCustomMessageService]), ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c25,\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"header\"], [1, \"scrollable\"], [\"scrollable\", \"\"], [1, \"messages\"], [\"class\", \"no-messages\", 4, \"ngIf\"], [1, \"form\"], [1, \"no-messages\"]],\n    template: function NbChatComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c24);\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"div\", 1, 2);\n        ɵngcc0.ɵɵelementStart(4, \"div\", 3);\n        ɵngcc0.ɵɵprojection(5);\n        ɵngcc0.ɵɵtemplate(6, NbChatComponent_p_6_Template, 2, 1, \"p\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(7, \"div\", 5);\n        ɵngcc0.ɵɵprojection(8, 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n        ɵngcc0.ɵɵadvance(5);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !(ctx.messages == null ? null : ctx.messages.length));\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;position:relative;height:100%}\"]\n  });\n  return NbChatComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbChatOptions {}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat message component.\n */\n\n\nlet NbChatMessageMapComponent = /*#__PURE__*/(() => {\n  class NbChatMessageMapComponent {\n    constructor(options) {\n      /**\n       * Message send date format, default 'shortTime'\n       * @type {string}\n       */\n      this.dateFormat = 'shortTime';\n      this.mapKey = options.messageGoogleMapKey;\n    }\n\n    get file() {\n      return {\n        // tslint:disable-next-line:max-line-length\n        url: `https://maps.googleapis.com/maps/api/staticmap?center=${this.latitude},${this.longitude}&zoom=12&size=400x400&key=${this.mapKey}`,\n        type: 'image/png',\n        icon: 'location'\n      };\n    }\n\n  }\n\n  NbChatMessageMapComponent.ɵfac = function NbChatMessageMapComponent_Factory(t) {\n    return new (t || NbChatMessageMapComponent)(ɵngcc0.ɵɵdirectiveInject(NbChatOptions));\n  };\n\n  NbChatMessageMapComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatMessageMapComponent,\n    selectors: [[\"nb-chat-message-map\"]],\n    inputs: {\n      dateFormat: \"dateFormat\",\n      message: \"message\",\n      sender: \"sender\",\n      date: \"date\",\n      latitude: \"latitude\",\n      longitude: \"longitude\"\n    },\n    decls: 1,\n    vars: 7,\n    consts: [[3, \"files\", \"message\", \"sender\", \"date\", \"dateFormat\"]],\n    template: function NbChatMessageMapComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"nb-chat-message-file\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"files\", ɵngcc0.ɵɵpureFunction1(5, _c26, ctx.file))(\"message\", ctx.message)(\"sender\", ctx.sender)(\"date\", ctx.date)(\"dateFormat\", ctx.dateFormat);\n      }\n    },\n    directives: function () {\n      return [NbChatMessageFileComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatMessageMapComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat message component.\n */\n\n\nlet NbChatMessageFileComponent = /*#__PURE__*/(() => {\n  class NbChatMessageFileComponent {\n    constructor(cd, domSanitizer) {\n      this.cd = cd;\n      this.domSanitizer = domSanitizer;\n      /**\n       * Message send date format, default 'shortTime'\n       * @type {string}\n       */\n\n      this.dateFormat = 'shortTime';\n    }\n    /**\n     * Message file path\n     * @type {Date}\n     */\n\n\n    set files(files) {\n      this.readyFiles = (files || []).map(file => {\n        const isImage = this.isImage(file);\n        return Object.assign(Object.assign({}, file), {\n          urlStyle: isImage && this.domSanitizer.bypassSecurityTrustStyle(`url(${file.url})`),\n          isImage: isImage\n        });\n      });\n      this.cd.detectChanges();\n    }\n\n    isImage(file) {\n      const type = file.type;\n\n      if (type) {\n        return ['image/png', 'image/jpeg', 'image/gif'].includes(type);\n      }\n\n      return false;\n    }\n\n  }\n\n  NbChatMessageFileComponent.ɵfac = function NbChatMessageFileComponent_Factory(t) {\n    return new (t || NbChatMessageFileComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer));\n  };\n\n  NbChatMessageFileComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatMessageFileComponent,\n    selectors: [[\"nb-chat-message-file\"]],\n    inputs: {\n      dateFormat: \"dateFormat\",\n      files: \"files\",\n      message: \"message\",\n      sender: \"sender\",\n      date: \"date\"\n    },\n    decls: 4,\n    vars: 7,\n    consts: [[3, \"sender\", \"date\", \"dateFormat\", \"message\"], [4, \"ngIf\"], [1, \"message-content-group\"], [\"target\", \"_blank\", 3, \"href\", 4, \"ngFor\", \"ngForOf\"], [\"target\", \"_blank\", 3, \"href\"], [3, \"icon\", 4, \"ngIf\"], [3, \"background-image\", 4, \"ngIf\"], [3, \"icon\"]],\n    template: function NbChatMessageFileComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-chat-message-text\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, NbChatMessageFileComponent_ng_container_2_Template, 3, 1, \"ng-container\", 1);\n        ɵngcc0.ɵɵtemplate(3, NbChatMessageFileComponent_ng_container_3_Template, 4, 3, \"ng-container\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"sender\", ctx.sender)(\"date\", ctx.date)(\"dateFormat\", ctx.dateFormat)(\"message\", ctx.message);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.message, \" \");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", (ctx.readyFiles == null ? null : ctx.readyFiles.length) > 1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", (ctx.readyFiles == null ? null : ctx.readyFiles.length) === 1);\n      }\n    },\n    directives: function () {\n      return [NbChatMessageTextComponent, ɵngcc2.NgIf, ɵngcc2.NgForOf, NbIconComponent];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatMessageFileComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat message component.\n */\n\n\nlet NbChatMessageQuoteComponent = /*#__PURE__*/(() => {\n  class NbChatMessageQuoteComponent {\n    constructor() {\n      /**\n        * Message send date format, default 'shortTime'\n        * @type {string}\n        */\n      this.dateFormat = 'shortTime';\n    }\n\n  }\n\n  NbChatMessageQuoteComponent.ɵfac = function NbChatMessageQuoteComponent_Factory(t) {\n    return new (t || NbChatMessageQuoteComponent)();\n  };\n\n  NbChatMessageQuoteComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatMessageQuoteComponent,\n    selectors: [[\"nb-chat-message-quote\"]],\n    inputs: {\n      dateFormat: \"dateFormat\",\n      message: \"message\",\n      sender: \"sender\",\n      date: \"date\",\n      quote: \"quote\"\n    },\n    decls: 5,\n    vars: 4,\n    consts: [[\"class\", \"sender\", 4, \"ngIf\"], [1, \"quote\"], [3, \"message\"], [1, \"sender\"]],\n    template: function NbChatMessageQuoteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbChatMessageQuoteComponent_p_0_Template, 5, 5, \"p\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"p\", 1);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"nb-chat-message-text\", 2);\n        ɵngcc0.ɵɵtext(4);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.sender || ctx.date);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.quote, \" \");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"message\", ctx.message);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate1(\" \", ctx.message, \" \");\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgIf, NbChatMessageTextComponent];\n    },\n    pipes: function () {\n      return [ɵngcc2.DatePipe];\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatMessageQuoteComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Chat message component.\n */\n\n\nlet NbChatMessageTextComponent = /*#__PURE__*/(() => {\n  class NbChatMessageTextComponent {\n    constructor() {\n      /**\n       * Message send date format, default 'shortTime'\n       * @type {string}\n       */\n      this.dateFormat = 'shortTime';\n    }\n\n  }\n\n  NbChatMessageTextComponent.ɵfac = function NbChatMessageTextComponent_Factory(t) {\n    return new (t || NbChatMessageTextComponent)();\n  };\n\n  NbChatMessageTextComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatMessageTextComponent,\n    selectors: [[\"nb-chat-message-text\"]],\n    inputs: {\n      dateFormat: \"dateFormat\",\n      sender: \"sender\",\n      message: \"message\",\n      date: \"date\"\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[\"class\", \"sender\", 4, \"ngIf\"], [\"class\", \"text\", 4, \"ngIf\"], [1, \"sender\"], [1, \"text\"]],\n    template: function NbChatMessageTextComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbChatMessageTextComponent_p_0_Template, 5, 5, \"p\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbChatMessageTextComponent_p_1_Template, 2, 1, \"p\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.sender || ctx.date);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.message);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    pipes: [ɵngcc2.DatePipe],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatMessageTextComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/*\n * Class used as injection token to provide form element.\n **/\n\n\nlet NbFormFieldControl = /*#__PURE__*/(() => {\n  class NbFormFieldControl {}\n\n  NbFormFieldControl.ɵfac = function NbFormFieldControl_Factory(t) {\n    return new (t || NbFormFieldControl)();\n  };\n\n  NbFormFieldControl.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbFormFieldControl,\n    factory: NbFormFieldControl.ɵfac\n  });\n  return NbFormFieldControl;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * Optional config to be provided on NbFormFieldControl to alter default settings.\n **/\n\n\nlet NbFormFieldControlConfig = /*#__PURE__*/(() => {\n  class NbFormFieldControlConfig {\n    constructor() {\n      this.supportsPrefix = true;\n      this.supportsSuffix = true;\n    }\n\n  }\n\n  NbFormFieldControlConfig.ɵfac = function NbFormFieldControlConfig_Factory(t) {\n    return new (t || NbFormFieldControlConfig)();\n  };\n\n  NbFormFieldControlConfig.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbFormFieldControlConfig,\n    factory: NbFormFieldControlConfig.ɵfac\n  });\n  return NbFormFieldControlConfig;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Basic input directive.\n *\n * ```html\n * <input nbInput></input>\n * ```\n *\n * ### Installation\n *\n * Import `NbInputModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbInputModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Default input size is `medium`:\n * @stacked-example(Showcase, input/input-showcase.component)\n *\n * Inputs are available in multiple colors using `status` property:\n * @stacked-example(Input Colors, input/input-colors.component)\n *\n * There are three input sizes:\n *\n * @stacked-example(Input Sizes, input/input-sizes.component)\n *\n * Inputs available in different shapes, which could be combined with the other properties:\n * @stacked-example(Input Shapes, input/input-shapes.component)\n *\n * `nbInput` could be applied to the following selectors - `input`, `textarea`:\n * @stacked-example(Input Elements, input/input-types.component)\n *\n * You can add `fullWidth` attribute to make element fill container:\n * @stacked-example(Full width inputs, input/input-full-width.component)\n *\n * Or you can bind control with form controls or ngModel:\n * @stacked-example(Input form binding, input/input-form.component)\n *\n * Use `<nb-form-field>` to add custom content to the input field.\n * First import `NbFormFieldModule`. Then put the input field and custom content into\n * `<nb-form-field>` and add `nbPrefix` or `nbSuffix` directive to the custom content.\n * `nbPrefix` puts content before input and `nbSuffix` after.\n *\n * @stacked-example(Input with icon, form-field/form-field-input.component)\n * @stacked-example(Input with button, form-field/form-field-password.component)\n *\n * @styles\n *\n * input-border-style:\n * input-border-width:\n * input-outline-color:\n * input-outline-width:\n * input-placeholder-text-font-family:\n * input-text-font-family:\n * input-basic-text-color:\n * input-basic-placeholder-text-color:\n * input-basic-background-color:\n * input-basic-border-color:\n * input-basic-focus-background-color:\n * input-basic-focus-border-color:\n * input-basic-hover-background-color:\n * input-basic-hover-border-color:\n * input-basic-disabled-background-color:\n * input-basic-disabled-border-color:\n * input-basic-disabled-text-color:\n * input-basic-disabled-placeholder-text-color:\n * input-primary-text-color:\n * input-primary-placeholder-text-color:\n * input-primary-background-color:\n * input-primary-border-color:\n * input-primary-focus-background-color:\n * input-primary-focus-border-color:\n * input-primary-hover-background-color:\n * input-primary-hover-border-color:\n * input-primary-disabled-background-color:\n * input-primary-disabled-border-color:\n * input-primary-disabled-text-color:\n * input-primary-disabled-placeholder-text-color:\n * input-success-text-color:\n * input-success-placeholder-text-color:\n * input-success-background-color:\n * input-success-border-color:\n * input-success-focus-background-color:\n * input-success-focus-border-color:\n * input-success-hover-background-color:\n * input-success-hover-border-color:\n * input-success-disabled-background-color:\n * input-success-disabled-border-color:\n * input-success-disabled-text-color:\n * input-success-disabled-placeholder-text-color:\n * input-info-text-color:\n * input-info-placeholder-text-color:\n * input-info-background-color:\n * input-info-border-color:\n * input-info-focus-background-color:\n * input-info-focus-border-color:\n * input-info-hover-background-color:\n * input-info-hover-border-color:\n * input-info-disabled-background-color:\n * input-info-disabled-border-color:\n * input-info-disabled-text-color:\n * input-info-disabled-placeholder-text-color:\n * input-warning-text-color:\n * input-warning-placeholder-text-color:\n * input-warning-background-color:\n * input-warning-border-color:\n * input-warning-focus-background-color:\n * input-warning-focus-border-color:\n * input-warning-hover-background-color:\n * input-warning-hover-border-color:\n * input-warning-disabled-background-color:\n * input-warning-disabled-border-color:\n * input-warning-disabled-text-color:\n * input-warning-disabled-placeholder-text-color:\n * input-danger-text-color:\n * input-danger-placeholder-text-color:\n * input-danger-background-color:\n * input-danger-border-color:\n * input-danger-focus-background-color:\n * input-danger-focus-border-color:\n * input-danger-hover-background-color:\n * input-danger-hover-border-color:\n * input-danger-disabled-background-color:\n * input-danger-disabled-border-color:\n * input-danger-disabled-text-color:\n * input-danger-disabled-placeholder-text-color:\n * input-control-text-color:\n * input-control-placeholder-text-color:\n * input-control-background-color:\n * input-control-border-color:\n * input-control-focus-background-color:\n * input-control-focus-border-color:\n * input-control-hover-background-color:\n * input-control-hover-border-color:\n * input-control-disabled-background-color:\n * input-control-disabled-border-color:\n * input-control-disabled-text-color:\n * input-control-disabled-placeholder-text-color:\n * input-rectangle-border-radius:\n * input-semi-round-border-radius:\n * input-round-border-radius:\n * input-tiny-text-font-size:\n * input-tiny-text-font-weight:\n * input-tiny-text-line-height:\n * input-tiny-placeholder-text-font-size:\n * input-tiny-placeholder-text-font-weight:\n * input-tiny-placeholder-text-line-height:\n * input-tiny-padding:\n * input-tiny-max-width:\n * input-small-text-font-size:\n * input-small-text-font-weight:\n * input-small-text-line-height:\n * input-small-placeholder-text-font-size:\n * input-small-placeholder-text-font-weight:\n * input-small-placeholder-text-line-height:\n * input-small-padding:\n * input-small-max-width:\n * input-medium-text-font-size:\n * input-medium-text-font-weight:\n * input-medium-text-line-height:\n * input-medium-placeholder-text-font-size:\n * input-medium-placeholder-text-font-weight:\n * input-medium-placeholder-text-line-height:\n * input-medium-padding:\n * input-medium-max-width:\n * input-large-text-font-size:\n * input-large-text-font-weight:\n * input-large-text-line-height:\n * input-large-placeholder-text-font-size:\n * input-large-placeholder-text-font-weight:\n * input-large-placeholder-text-line-height:\n * input-large-padding:\n * input-large-max-width:\n * input-giant-text-font-size:\n * input-giant-text-font-weight:\n * input-giant-text-line-height:\n * input-giant-placeholder-text-font-size:\n * input-giant-placeholder-text-font-weight:\n * input-giant-placeholder-text-line-height:\n * input-giant-padding:\n * input-giant-max-width:\n */\n\n\nlet NbInputDirective = /*#__PURE__*/(() => {\n  class NbInputDirective {\n    constructor(elementRef, focusMonitor, renderer, zone, statusService) {\n      this.elementRef = elementRef;\n      this.focusMonitor = focusMonitor;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.statusService = statusService;\n      this.destroy$ = new Subject();\n      /**\n       * Field size modifications. Possible values: `small`, `medium` (default), `large`.\n       */\n\n      this.fieldSize = 'medium';\n      /**\n       * Field status (adds specific styles):\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`\n       */\n\n      this.status = 'basic';\n      /**\n       * Field shapes modifications. Possible values: `rectangle` (default), `round`, `semi-round`.\n       */\n\n      this.shape = 'rectangle';\n      this._fullWidth = false;\n      /*\n       * @docs-private\n       **/\n\n      this.status$ = new BehaviorSubject(this.status);\n      /*\n       * @docs-private\n       **/\n\n      this.size$ = new BehaviorSubject(this.fieldSize);\n      /*\n       * @docs-private\n       **/\n\n      this.focused$ = new BehaviorSubject(false);\n      /*\n       * @docs-private\n       **/\n\n      this.disabled$ = new BehaviorSubject(false);\n      /*\n       * @docs-private\n       **/\n\n      this.fullWidth$ = new BehaviorSubject(this.fullWidth);\n    }\n    /**\n     * If set element will fill container. `false` by default.\n     */\n\n\n    get fullWidth() {\n      return this._fullWidth;\n    }\n\n    set fullWidth(value) {\n      this._fullWidth = convertToBoolProperty(value);\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    ngDoCheck() {\n      const isDisabled = this.elementRef.nativeElement.disabled;\n\n      if (isDisabled !== this.disabled$.value) {\n        this.disabled$.next(isDisabled);\n      }\n    }\n\n    ngOnChanges({\n      status,\n      fieldSize,\n      fullWidth\n    }) {\n      if (status) {\n        this.status$.next(this.status);\n      }\n\n      if (fieldSize) {\n        this.size$.next(this.fieldSize);\n      }\n\n      if (fullWidth) {\n        this.fullWidth$.next(this.fullWidth);\n      }\n    }\n\n    ngOnInit() {\n      this.focusMonitor.monitor(this.elementRef).pipe(map(origin => !!origin), finalize(() => this.focusMonitor.stopMonitoring(this.elementRef)), takeUntil(this.destroy$)).subscribe(this.focused$);\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.elementRef.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n    }\n\n    get tiny() {\n      return this.fieldSize === 'tiny';\n    }\n\n    get small() {\n      return this.fieldSize === 'small';\n    }\n\n    get medium() {\n      return this.fieldSize === 'medium';\n    }\n\n    get large() {\n      return this.fieldSize === 'large';\n    }\n\n    get giant() {\n      return this.fieldSize === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get rectangle() {\n      return this.shape === 'rectangle';\n    }\n\n    get semiRound() {\n      return this.shape === 'semi-round';\n    }\n\n    get round() {\n      return this.shape === 'round';\n    }\n\n  }\n\n  NbInputDirective.ɵfac = function NbInputDirective_Factory(t) {\n    return new (t || NbInputDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbInputDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbInputDirective,\n    selectors: [[\"input\", \"nbInput\", \"\"], [\"textarea\", \"nbInput\", \"\"]],\n    hostVars: 34,\n    hostBindings: function NbInputDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"input-full-width\", ctx.fullWidth)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"shape-rectangle\", ctx.rectangle)(\"shape-semi-round\", ctx.semiRound)(\"shape-round\", ctx.round);\n      }\n    },\n    inputs: {\n      fieldSize: \"fieldSize\",\n      status: \"status\",\n      shape: \"shape\",\n      fullWidth: \"fullWidth\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbFormFieldControl,\n      useExisting: NbInputDirective\n    }]), ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbInputDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_INPUT_COMPONENTS = [NbInputDirective];\nlet NbInputModule = /*#__PURE__*/(() => {\n  class NbInputModule {}\n\n  NbInputModule.ɵfac = function NbInputModule_Factory(t) {\n    return new (t || NbInputModule)();\n  };\n\n  NbInputModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbInputModule\n  });\n  NbInputModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbInputModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbInputModule, {\n    declarations: [NbInputDirective],\n    imports: [NbSharedModule],\n    exports: [NbInputDirective]\n  });\n})();\n\nlet NbChatAvatarComponent = /*#__PURE__*/(() => {\n  class NbChatAvatarComponent {\n    constructor() {\n      this.avatarClass = true;\n    }\n\n  }\n\n  NbChatAvatarComponent.ɵfac = function NbChatAvatarComponent_Factory(t) {\n    return new (t || NbChatAvatarComponent)();\n  };\n\n  NbChatAvatarComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbChatAvatarComponent,\n    selectors: [[\"nb-chat-avatar\"]],\n    hostVars: 4,\n    hostBindings: function NbChatAvatarComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"background-image\", ctx.avatarStyle);\n        ɵngcc0.ɵɵclassProp(\"avatar\", ctx.avatarClass);\n      }\n    },\n    inputs: {\n      initials: \"initials\",\n      avatarStyle: \"avatarStyle\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"]],\n    template: function NbChatAvatarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbChatAvatarComponent_ng_container_0_Template, 2, 1, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.avatarStyle);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbChatAvatarComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nfunction throwCustomMessageTypeIsRequired() {\n  throw new Error('[nbCustomMessage]: custom message type is required.');\n}\n/**\n * `[nbCustomMessage]` directive should be used as a structural directive or should be applied to the `ng-template`:\n *\n * ```html\n * <div *nbCustomMessage=\"'my-custom-type'; let data\">\n *   <!-- custom message -->\n * </div>\n * ```\n * or\n * ```html\n * <ng-template nbCustomMessage='my-custom-type' let-data>\n *   <!-- custom message -->\n * </ng-template>\n * ```\n */\n\n\nlet NbChatCustomMessageDirective = /*#__PURE__*/(() => {\n  class NbChatCustomMessageDirective {\n    constructor(templateRef, customMessageService) {\n      this.templateRef = templateRef;\n      this.customMessageService = customMessageService;\n      this._noStyles = false;\n    }\n    /**\n     * Defines a message type which should rendered with the custom message template.\n     * @type {string}\n     */\n\n\n    get nbCustomMessage() {\n      return this._type;\n    }\n\n    set nbCustomMessage(value) {\n      this._type = value;\n    }\n\n    get type() {\n      return this._type;\n    }\n    /**\n     * Disables generic message styles, such as round corners, text color, background, etc.,\n     * so a custom message could be styled from the ground up.\n     *\n     * @type {boolean}\n     */\n\n\n    set nbCustomMessageNoStyles(value) {\n      this._noStyles = convertToBoolProperty(value);\n    }\n\n    get nbCustomMessageNoStyles() {\n      return this._noStyles;\n    }\n\n    get noStyles() {\n      return this.nbCustomMessageNoStyles;\n    }\n\n    ngOnInit() {\n      if (!this._type) {\n        throwCustomMessageTypeIsRequired();\n      }\n\n      this.customMessageService.register(this.type, this);\n    }\n\n    ngOnDestroy() {\n      this.customMessageService.unregister(this.type);\n    }\n\n  }\n\n  NbChatCustomMessageDirective.ɵfac = function NbChatCustomMessageDirective_Factory(t) {\n    return new (t || NbChatCustomMessageDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(NbCustomMessageService));\n  };\n\n  NbChatCustomMessageDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbChatCustomMessageDirective,\n    selectors: [[\"\", \"nbCustomMessage\", \"\"]],\n    inputs: {\n      nbCustomMessage: \"nbCustomMessage\",\n      nbCustomMessageNoStyles: \"nbCustomMessageNoStyles\"\n    }\n  });\n  return NbChatCustomMessageDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_CHAT_COMPONENTS = [NbChatComponent, NbChatMessageComponent, NbChatFormComponent, NbChatMessageTextComponent, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageMapComponent, NbChatAvatarComponent];\nconst NB_CHAT_DIRECTIVES = [NbChatCustomMessageDirective];\nlet NbChatModule = /*#__PURE__*/(() => {\n  class NbChatModule {\n    static forRoot(options) {\n      return {\n        ngModule: NbChatModule,\n        providers: [{\n          provide: NbChatOptions,\n          useValue: options || {}\n        }]\n      };\n    }\n\n    static forChild(options) {\n      return {\n        ngModule: NbChatModule,\n        providers: [{\n          provide: NbChatOptions,\n          useValue: options || {}\n        }]\n      };\n    }\n\n  }\n\n  NbChatModule.ɵfac = function NbChatModule_Factory(t) {\n    return new (t || NbChatModule)();\n  };\n\n  NbChatModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbChatModule\n  });\n  NbChatModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule, NbInputModule, NbButtonModule]]\n  });\n  return NbChatModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbChatModule, {\n    declarations: [NbChatComponent, NbChatMessageComponent, NbChatFormComponent, NbChatMessageTextComponent, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageMapComponent, NbChatAvatarComponent, NbChatCustomMessageDirective],\n    imports: [NbSharedModule, NbIconModule, NbInputModule, NbButtonModule],\n    exports: [NbChatComponent, NbChatMessageComponent, NbChatFormComponent, NbChatMessageTextComponent, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageMapComponent, NbChatAvatarComponent, NbChatCustomMessageDirective]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Styled spinner component\n *\n * @styles\n *\n * spinner-text-color:\n * spinner-text-font-family:\n * spinner-text-font-size:\n * spinner-text-font-weight:\n * spinner-text-line-height:\n * spinner-basic-background-color:\n * spinner-basic-circle-filled-color:\n * spinner-basic-circle-empty-color:\n * spinner-primary-background-color:\n * spinner-primary-circle-filled-color:\n * spinner-primary-circle-empty-color:\n * spinner-info-background-color:\n * spinner-info-circle-filled-color:\n * spinner-info-circle-empty-color:\n * spinner-success-background-color:\n * spinner-success-circle-filled-color:\n * spinner-success-circle-empty-color:\n * spinner-warning-background-color:\n * spinner-warning-circle-filled-color:\n * spinner-warning-circle-empty-color:\n * spinner-danger-background-color:\n * spinner-danger-circle-filled-color:\n * spinner-danger-circle-empty-color:\n * spinner-control-background-color:\n * spinner-control-circle-filled-color:\n * spinner-control-circle-empty-color:\n * spinner-height-tiny:\n * spinner-height-small:\n * spinner-height-medium:\n * spinner-height-large:\n * spinner-height-giant:\n */\n\n\nlet NbSpinnerComponent = /*#__PURE__*/(() => {\n  class NbSpinnerComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Loading text that is shown near the icon\n       * @type string\n       */\n\n      this.message = 'Loading...';\n      /**\n       * Spinner size, available sizes:\n       * tiny, small, medium, large, giant\n       * @param {string} value\n       */\n\n      this.size = 'medium';\n      /**\n       * Spinner status (adds specific styles):\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.\n       */\n\n      this.status = 'basic';\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n  }\n\n  NbSpinnerComponent.ɵfac = function NbSpinnerComponent_Factory(t) {\n    return new (t || NbSpinnerComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbSpinnerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSpinnerComponent,\n    selectors: [[\"nb-spinner\"]],\n    hostVars: 26,\n    hostBindings: function NbSpinnerComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      message: \"message\",\n      size: \"size\",\n      status: \"status\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"spin-circle\"], [\"class\", \"message\", 4, \"ngIf\"], [1, \"message\"]],\n    template: function NbSpinnerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"span\", 0);\n        ɵngcc0.ɵɵtemplate(1, NbSpinnerComponent_span_1_Template, 2, 1, \"span\", 1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.message);\n      }\n    },\n    directives: [ɵngcc2.NgIf],\n    styles: [\"[_nghost-%COMP%]{opacity:1;position:absolute;border-radius:inherit;top:0;right:0;left:0;bottom:0;overflow:hidden;z-index:9999;display:flex;justify-content:center;align-items:center;visibility:visible}[_nghost-%COMP%]   .spin-circle[_ngcontent-%COMP%]{animation:spin 0.8s infinite linear;border-radius:50%;border-style:solid;border-width:0.125em;width:1em;height:1em}[_nghost-%COMP%]   .message[_ngcontent-%COMP%]{margin-left:0.5rem}\"]\n  });\n  return NbSpinnerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Styled spinner directive\n *\n * @stacked-example(Spinner Showcase, spinner/spinner-card.component)\n *\n *\n * ```ts\n * <nb-card [nbSpinner]=\"loading\" nbSpinnerStatus=\"danger\">\n *   <nb-card-body>Card Content</nb-card-body>\n * </nb-card>\n * ```\n *\n * ### Installation\n *\n * Import `NbSpinnerModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSpinnerModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Could be colored using `status` property\n *\n * @stacked-example(Spinner Colors, spinner/spinner-colors.component)\n *\n * Available in different sizes with `size` property:\n *\n * @stacked-example(Spinner Sizes, spinner/spinner-sizes.component)\n *\n * It is also possible to place it into the button:\n * @stacked-example(Buttons with spinner, spinner/spinner-button.component)\n *\n * Or tabs:\n * @stacked-example(Spinner in tabs, spinner/spinner-tabs.component)\n */\n\n\nlet NbSpinnerDirective = /*#__PURE__*/(() => {\n  class NbSpinnerDirective {\n    constructor(directiveView, componentFactoryResolver, renderer, directiveElement) {\n      this.directiveView = directiveView;\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.renderer = renderer;\n      this.directiveElement = directiveElement;\n      this.shouldShow = false;\n      /**\n       * Spinner status color\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.\n       */\n\n      this.spinnerStatus = 'basic';\n      /**\n       * Spinner size. Possible values: `tiny`, `small`, `medium` (default), `large`, `giant`\n       */\n\n      this.spinnerSize = 'medium';\n      this.isSpinnerExist = false;\n    }\n    /**\n     * Directive value - show or hide spinner\n     * @param {boolean} val\n     */\n\n\n    set nbSpinner(val) {\n      if (this.componentFactory) {\n        if (val) {\n          this.show();\n        } else {\n          this.hide();\n        }\n      } else {\n        this.shouldShow = val;\n      }\n    }\n\n    ngOnInit() {\n      this.componentFactory = this.componentFactoryResolver.resolveComponentFactory(NbSpinnerComponent);\n\n      if (this.shouldShow) {\n        this.show();\n      }\n    }\n\n    hide() {\n      if (this.isSpinnerExist) {\n        this.directiveView.remove();\n        this.isSpinnerExist = false;\n      }\n    }\n\n    show() {\n      if (!this.isSpinnerExist) {\n        this.spinner = this.directiveView.createComponent(this.componentFactory);\n        this.setInstanceInputs(this.spinner.instance);\n        this.spinner.changeDetectorRef.detectChanges();\n        this.renderer.appendChild(this.directiveElement.nativeElement, this.spinner.location.nativeElement);\n        this.isSpinnerExist = true;\n      }\n    }\n\n    setInstanceInputs(instance) {\n      instance.message = this.spinnerMessage;\n      typeof this.spinnerStatus !== 'undefined' && (instance.status = this.spinnerStatus);\n      typeof this.spinnerSize !== 'undefined' && (instance.size = this.spinnerSize);\n    }\n\n  }\n\n  NbSpinnerDirective.ɵfac = function NbSpinnerDirective_Factory(t) {\n    return new (t || NbSpinnerDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ViewContainerRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  NbSpinnerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbSpinnerDirective,\n    selectors: [[\"\", \"nbSpinner\", \"\"]],\n    hostVars: 2,\n    hostBindings: function NbSpinnerDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"nb-spinner-container\", ctx.isSpinnerExist);\n      }\n    },\n    inputs: {\n      spinnerStatus: [\"nbSpinnerStatus\", \"spinnerStatus\"],\n      spinnerSize: [\"nbSpinnerSize\", \"spinnerSize\"],\n      nbSpinner: \"nbSpinner\",\n      spinnerMessage: [\"nbSpinnerMessage\", \"spinnerMessage\"]\n    }\n  });\n  return NbSpinnerDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbSpinnerModule = /*#__PURE__*/(() => {\n  class NbSpinnerModule {}\n\n  NbSpinnerModule.ɵfac = function NbSpinnerModule_Factory(t) {\n    return new (t || NbSpinnerModule)();\n  };\n\n  NbSpinnerModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbSpinnerModule\n  });\n  NbSpinnerModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule]]\n  });\n  return NbSpinnerModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSpinnerModule, {\n    declarations: [NbSpinnerComponent, NbSpinnerDirective],\n    imports: [NbSharedModule],\n    exports: [NbSpinnerComponent, NbSpinnerDirective]\n  });\n})();\n\nconst NB_STEPPER = new InjectionToken('Nebular Stepper Component');\n/**\n * Component intended to be used within  the `<nb-stepper>` component.\n * Container for a step\n */\n\nlet NbStepComponent = /*#__PURE__*/(() => {\n  class NbStepComponent {\n    constructor(stepper) {\n      this._hidden = false;\n      this._completed = false;\n      this.interacted = false;\n      this.stepper = stepper;\n    }\n    /**\n     * Whether step will be displayed in wizard\n     *\n     * @type {boolean}\n     */\n\n\n    get hidden() {\n      return this._hidden;\n    }\n\n    set hidden(value) {\n      this._hidden = convertToBoolProperty(value);\n    }\n    /**\n     * Check that label is a TemplateRef.\n     *\n     * @return boolean\n     * */\n\n\n    get isLabelTemplate() {\n      return this.label instanceof TemplateRef;\n    }\n    /**\n     * Whether step is marked as completed.\n     *\n     * @type {boolean}\n     */\n\n\n    get completed() {\n      return this._completed || this.isCompleted;\n    }\n\n    set completed(value) {\n      this._completed = convertToBoolProperty(value);\n    }\n\n    get isCompleted() {\n      return this.stepControl ? this.stepControl.valid && this.interacted : this.interacted;\n    }\n    /**\n     * Mark step as selected\n     * */\n\n\n    select() {\n      this.stepper.selected = this;\n    }\n    /**\n     * Reset step and stepControl state\n     * */\n\n\n    reset() {\n      this.interacted = false;\n\n      if (this.stepControl) {\n        this.stepControl.reset();\n      }\n    }\n\n  }\n\n  NbStepComponent.ɵfac = function NbStepComponent_Factory(t) {\n    return new (t || NbStepComponent)(ɵngcc0.ɵɵdirectiveInject(NB_STEPPER));\n  };\n\n  NbStepComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbStepComponent,\n    selectors: [[\"nb-step\"]],\n    viewQuery: function NbStepComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(TemplateRef, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.content = _t.first);\n      }\n    },\n    inputs: {\n      hidden: \"hidden\",\n      completed: \"completed\",\n      stepControl: \"stepControl\",\n      label: \"label\"\n    },\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbStepComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, NbStepComponent_ng_template_0_Template, 1, 0, \"ng-template\");\n      }\n    },\n    encapsulation: 2\n  });\n  return NbStepComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Stepper component\n *\n * @stacked-example(Showcase, stepper/stepper-showcase.component)\n *\n * ### Installation\n *\n * Import `NbStepperModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbStepperModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * If step label is string you can pass it as `label` attribute. Otherwise ng-template should be used:\n * ```html\n * // ...\n * <nb-stepper orientation=\"horizontal\">\n *   <nb-step label=\"step number one\">\n *       // ... step content here\n *   </nb-step>\n *   <nb-step label=\"stepLabel\">\n *       <ng-template #stepLabel>\n *           <div>\n *               step number two\n *           </div>\n *       </ng-template>\n *       // ... step content here\n *   </nb-step>\n * </nb-stepper>\n * ```\n *\n * When linear mode enabled user can't move forward unless current step is complete.\n * @stacked-example(Linear, stepper/stepper-linear.component)\n *\n * Specify `[stepControl]=\"form\"` and stepper allow go to the next step only if form is valid.\n * You can disable it via `linear` mode setting.\n * ```html\n * // ...\n * <nb-stepper  orientation=\"horizontal\">\n *   <nb-step label=\"step number one\" [stepControl]=\"form\">\n *     <form [formGroup]=\"form\">\n *       // ...\n *     </form>\n *   </nb-step>\n *    // ...\n * </nb-stepper>\n * ```\n *\n * @stacked-example(Validation, stepper/stepper-validation.component)\n *\n * Stepper component has two layout options - `vertical` & `horizontal`\n * @stacked-example(Vertical, stepper/stepper-vertical.component)\n *\n * `disableStepNavigation` disables navigation by clicking on steps, so user can navigate only using\n * 'nbStepperPrevious' and 'nbStepperNext' buttons.\n * @stacked-example(Disabled steps navigation, stepper/stepper-disabled-step-nav.component)\n *\n * @styles\n *\n * stepper-step-text-color:\n * stepper-step-text-font-family:\n * stepper-step-text-font-size:\n * stepper-step-text-font-weight:\n * stepper-step-text-line-height:\n * stepper-step-active-text-color:\n * stepper-step-completed-text-color:\n * stepper-step-index-border-color:\n * stepper-step-index-border-style:\n * stepper-step-index-border-width:\n * stepper-step-index-border-radius:\n * stepper-step-index-width:\n * stepper-step-index-active-border-color:\n * stepper-step-index-completed-background-color:\n * stepper-step-index-completed-border-color:\n * stepper-step-index-completed-text-color:\n * stepper-connector-background-color:\n * stepper-connector-completed-background-color:\n * stepper-horizontal-connector-margin:\n * stepper-vertical-connector-margin:\n * stepper-step-content-padding:\n */\n\n\nlet NbStepperComponent = /*#__PURE__*/(() => {\n  class NbStepperComponent {\n    constructor() {\n      this._selectedIndex = 0;\n      this._disableStepNavigation = false;\n      /**\n       * Stepper orientation - `horizontal`|`vertical`\n       */\n\n      this.orientation = 'horizontal';\n      this._linear = true;\n    }\n    /**\n     * Selected step index\n     */\n\n\n    get selectedIndex() {\n      return this._selectedIndex;\n    }\n\n    set selectedIndex(index) {\n      if (!this.steps) {\n        this._selectedIndex = index;\n        return;\n      }\n\n      this.markCurrentStepInteracted();\n\n      if (this.canBeSelected(index)) {\n        this._selectedIndex = index;\n      }\n    }\n    /**\n     * Disables navigation by clicking on steps. False by default\n     * @param {boolean} value\n     */\n\n\n    set disableStepNavigation(value) {\n      this._disableStepNavigation = convertToBoolProperty(value);\n    }\n\n    get disableStepNavigation() {\n      return this._disableStepNavigation;\n    }\n    /**\n     * Selected step component\n     */\n\n\n    get selected() {\n      return this.steps ? this.steps.toArray()[this.selectedIndex] : undefined;\n    }\n\n    set selected(step) {\n      if (!this.steps) {\n        return;\n      }\n\n      this.selectedIndex = this.steps.toArray().indexOf(step);\n    }\n    /**\n     * Allow moving forward only if the current step is complete\n     * @default true\n     */\n\n\n    set linear(value) {\n      this._linear = convertToBoolProperty(value);\n    }\n\n    get linear() {\n      return this._linear;\n    }\n\n    get vertical() {\n      return this.orientation === 'vertical';\n    }\n\n    get horizontal() {\n      return this.orientation === 'horizontal';\n    }\n    /**\n     * Navigate to next step\n     * */\n\n\n    next() {\n      this.selectedIndex = Math.min(this.selectedIndex + 1, this.steps.length - 1);\n    }\n    /**\n     * Navigate to previous step\n     * */\n\n\n    previous() {\n      this.selectedIndex = Math.max(this.selectedIndex - 1, 0);\n    }\n    /**\n     * Reset stepper and stepControls to initial state\n     * */\n\n\n    reset() {\n      this._selectedIndex = 0;\n      this.steps.forEach(step => step.reset());\n    }\n\n    isStepSelected(step) {\n      return this.selected === step;\n    }\n    /*\n     * @docs-private\n     **/\n\n\n    getStepTemplate(step) {\n      if (step.isLabelTemplate) {\n        return step.label;\n      }\n\n      return null;\n    }\n\n    isStepValid(index) {\n      return this.steps.toArray()[index].completed;\n    }\n\n    canBeSelected(indexToCheck) {\n      const noSteps = !this.steps || this.steps.length === 0;\n\n      if (noSteps || indexToCheck < 0 || indexToCheck >= this.steps.length) {\n        return false;\n      }\n\n      if (indexToCheck <= this.selectedIndex || !this.linear) {\n        return true;\n      }\n\n      let isAllStepsValid = true;\n\n      for (let i = this.selectedIndex; i < indexToCheck; i++) {\n        if (!this.isStepValid(i)) {\n          isAllStepsValid = false;\n          break;\n        }\n      }\n\n      return isAllStepsValid;\n    }\n\n    markCurrentStepInteracted() {\n      if (this.selected) {\n        this.selected.interacted = true;\n      }\n    }\n\n  }\n\n  NbStepperComponent.ɵfac = function NbStepperComponent_Factory(t) {\n    return new (t || NbStepperComponent)();\n  };\n\n  NbStepperComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbStepperComponent,\n    selectors: [[\"nb-stepper\"]],\n    contentQueries: function NbStepperComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbStepComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.steps = _t);\n      }\n    },\n    hostVars: 4,\n    hostBindings: function NbStepperComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"vertical\", ctx.vertical)(\"horizontal\", ctx.horizontal);\n      }\n    },\n    inputs: {\n      orientation: \"orientation\",\n      selectedIndex: \"selectedIndex\",\n      disableStepNavigation: \"disableStepNavigation\",\n      selected: \"selected\",\n      linear: \"linear\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NB_STEPPER,\n      useExisting: NbStepperComponent\n    }])],\n    ngContentSelectors: _c28,\n    decls: 5,\n    vars: 2,\n    consts: [[1, \"header\"], [4, \"ngFor\", \"ngForOf\"], [1, \"step-content\"], [3, \"ngTemplateOutlet\"], [\"class\", \"connector\", 3, \"connector-past\", 4, \"ngIf\"], [\"class\", \"step\", 3, \"selected\", \"completed\", \"noninteractive\", \"click\", 4, \"ngIf\"], [1, \"connector\"], [1, \"step\", 3, \"click\"], [1, \"label-index\"], [4, \"ngIf\"], [\"icon\", \"checkmark-outline\", \"pack\", \"nebular-essentials\", 4, \"ngIf\"], [1, \"label\"], [\"icon\", \"checkmark-outline\", \"pack\", \"nebular-essentials\"], [4, \"ngTemplateOutlet\"]],\n    template: function NbStepperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c27);\n        ɵngcc0.ɵɵtemplate(0, NbStepperComponent_ng_template_0_Template, 1, 0, \"ng-template\");\n        ɵngcc0.ɵɵelementStart(1, \"div\", 0);\n        ɵngcc0.ɵɵtemplate(2, NbStepperComponent_ng_container_2_Template, 3, 2, \"ng-container\", 1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(3, \"div\", 2);\n        ɵngcc0.ɵɵelementContainer(4, 3);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.steps);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.selected == null ? null : ctx.selected.content);\n      }\n    },\n    directives: [ɵngcc2.NgForOf, ɵngcc2.NgTemplateOutlet, ɵngcc2.NgIf, NbIconComponent],\n    styles: [\".horizontal[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{flex-direction:column}.horizontal[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{height:2px}.horizontal[_nghost-%COMP%]   .label-index[_ngcontent-%COMP%]{margin-bottom:10px}.vertical[_nghost-%COMP%]{display:flex;height:100%}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{flex-direction:column}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0 10px}.vertical[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{width:2px}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:10px}.header[_ngcontent-%COMP%]   .connector[_ngcontent-%COMP%]{flex:auto}.header[_ngcontent-%COMP%]   .step[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.header[_ngcontent-%COMP%]   .step.noninteractive[_ngcontent-%COMP%]{cursor:default}.header[_ngcontent-%COMP%]   .label-index[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.header[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{width:max-content}\"]\n  });\n  return NbStepperComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbStepperNextDirective = /*#__PURE__*/(() => {\n  class NbStepperNextDirective {\n    constructor(stepper) {\n      this.stepper = stepper;\n      this.type = 'submit';\n    }\n\n    onClick() {\n      this.stepper.next();\n    }\n\n  }\n\n  NbStepperNextDirective.ɵfac = function NbStepperNextDirective_Factory(t) {\n    return new (t || NbStepperNextDirective)(ɵngcc0.ɵɵdirectiveInject(NbStepperComponent));\n  };\n\n  NbStepperNextDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbStepperNextDirective,\n    selectors: [[\"button\", \"nbStepperNext\", \"\"]],\n    hostVars: 1,\n    hostBindings: function NbStepperNextDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbStepperNextDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.type);\n      }\n    },\n    inputs: {\n      type: \"type\"\n    }\n  });\n  return NbStepperNextDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbStepperPreviousDirective = /*#__PURE__*/(() => {\n  class NbStepperPreviousDirective {\n    constructor(stepper) {\n      this.stepper = stepper;\n      this.type = 'button';\n    }\n\n    onClick() {\n      this.stepper.previous();\n    }\n\n  }\n\n  NbStepperPreviousDirective.ɵfac = function NbStepperPreviousDirective_Factory(t) {\n    return new (t || NbStepperPreviousDirective)(ɵngcc0.ɵɵdirectiveInject(NbStepperComponent));\n  };\n\n  NbStepperPreviousDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbStepperPreviousDirective,\n    selectors: [[\"button\", \"nbStepperPrevious\", \"\"]],\n    hostVars: 1,\n    hostBindings: function NbStepperPreviousDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbStepperPreviousDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"type\", ctx.type);\n      }\n    },\n    inputs: {\n      type: \"type\"\n    }\n  });\n  return NbStepperPreviousDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbStepperModule = /*#__PURE__*/(() => {\n  class NbStepperModule {}\n\n  NbStepperModule.ɵfac = function NbStepperModule_Factory(t) {\n    return new (t || NbStepperModule)();\n  };\n\n  NbStepperModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbStepperModule\n  });\n  NbStepperModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbIconModule]]\n  });\n  return NbStepperModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbStepperModule, {\n    declarations: [NbStepperComponent, NbStepComponent, NbStepperNextDirective, NbStepperPreviousDirective],\n    imports: [NbSharedModule, NbIconModule],\n    exports: [NbStepperComponent, NbStepComponent, NbStepperNextDirective, NbStepperPreviousDirective]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * An accordion allows to toggle the display of sections of content\n *\n * Basic example\n * @stacked-example(Showcase, accordion/accordion-showcase.component)\n *\n * ```ts\n * <nb-accordion>\n *  <nb-accordion-item>\n *   <nb-accordion-item-header>Product Details</nb-accordion-item-header>\n *   <nb-accordion-item-body>\n *     Item Content\n *   </nb-accordion-item-body>\n *  </nb-accordion-item>\n * </nb-accordion>\n * ```\n * ### Installation\n *\n * Import `NbAccordionModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbAccordionModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * With `multi` mode accordion can have multiple items expanded:\n * @stacked-example(Multiple expanded items, accordion/accordion-multi.component)\n *\n * `NbAccordionItemComponent` has several methods, for example it is possible to trigger item click/toggle:\n * @stacked-example(Expand API, accordion/accordion-toggle.component)\n *\n * @styles\n *\n * accordion-border-radius:\n * accordion-padding:\n * accordion-shadow:\n * accordion-header-text-color:\n * accordion-header-text-font-family:\n * accordion-header-text-font-size:\n * accordion-header-text-font-weight:\n * accordion-header-text-line-height:\n * accordion-header-disabled-text-color:\n * accordion-header-border-color:\n * accordion-header-border-style:\n * accordion-header-border-width:\n * accordion-item-background-color:\n * accordion-item-text-color:\n * accordion-item-text-font-family:\n * accordion-item-text-font-size:\n * accordion-item-text-font-weight:\n * accordion-item-text-line-height:\n */\n\n\nlet NbAccordionComponent = /*#__PURE__*/(() => {\n  class NbAccordionComponent {\n    constructor() {\n      this.openCloseItems = new Subject();\n      this.multiValue = false;\n    }\n    /**\n     *  Allow multiple items to be expanded at the same time.\n     * @type {boolean}\n     */\n\n\n    get multi() {\n      return this.multiValue;\n    }\n\n    set multi(val) {\n      this.multiValue = convertToBoolProperty(val);\n    }\n    /**\n     * Opens all enabled accordion items.\n     */\n\n\n    openAll() {\n      if (this.multi) {\n        this.openCloseItems.next(false);\n      }\n    }\n    /**\n     * Closes all enabled accordion items.\n     */\n\n\n    closeAll() {\n      this.openCloseItems.next(true);\n    }\n\n  }\n\n  NbAccordionComponent.ɵfac = function NbAccordionComponent_Factory(t) {\n    return new (t || NbAccordionComponent)();\n  };\n\n  NbAccordionComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAccordionComponent,\n    selectors: [[\"nb-accordion\"]],\n    inputs: {\n      multi: \"multi\"\n    },\n    ngContentSelectors: _c30,\n    decls: 1,\n    vars: 0,\n    template: function NbAccordionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c29);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbAccordionComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Component intended to be used within `<nb-accordion>` component\n */\n\n\nlet NbAccordionItemComponent = /*#__PURE__*/(() => {\n  class NbAccordionItemComponent {\n    constructor(accordion, cd) {\n      this.accordion = accordion;\n      this.cd = cd;\n      /**\n       * Emits whenever the expanded state of the accordion changes.\n       * Primarily used to facilitate two-way binding.\n       */\n\n      this.collapsedChange = new EventEmitter();\n      this.accordionItemInvalidate = new Subject();\n      this.collapsedValue = true;\n      this.disabledValue = false;\n      this.destroy$ = new Subject();\n    }\n    /**\n     * Item is collapse (`true` by default)\n     * @type {boolean}\n     */\n\n\n    get collapsed() {\n      return this.collapsedValue;\n    }\n\n    set collapsed(val) {\n      this.collapsedValue = convertToBoolProperty(val);\n      this.collapsedChange.emit(this.collapsedValue);\n      this.invalidate();\n    }\n    /**\n     * Item is expanded (`false` by default)\n     * @type {boolean}\n     */\n\n\n    get expanded() {\n      return !this.collapsed;\n    }\n\n    set expanded(val) {\n      this.collapsedValue = !convertToBoolProperty(val);\n    }\n    /**\n     * Item is disabled and cannot be opened.\n     * @type {boolean}\n     */\n\n\n    get disabled() {\n      return this.disabledValue;\n    }\n\n    set disabled(val) {\n      this.disabledValue = convertToBoolProperty(val);\n      this.invalidate();\n    }\n    /**\n     * Open/close the item\n     */\n\n\n    toggle() {\n      if (!this.disabled) {\n        // we need this temporary variable as `openCloseItems.next` will change current value we need to save\n        const willSet = !this.collapsed;\n\n        if (!this.accordion.multi) {\n          this.accordion.openCloseItems.next(true);\n        }\n\n        this.collapsed = willSet;\n      }\n    }\n    /**\n     * Open the item.\n     */\n\n\n    open() {\n      !this.disabled && (this.collapsed = false);\n    }\n    /**\n     * Collapse the item.\n     */\n\n\n    close() {\n      !this.disabled && (this.collapsed = true);\n    }\n\n    ngOnInit() {\n      this.accordion.openCloseItems.pipe(takeUntil(this.destroy$)).subscribe(collapsed => {\n        !this.disabled && (this.collapsed = collapsed);\n      });\n    }\n\n    ngOnChanges(changes) {\n      this.accordionItemInvalidate.next(true);\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      this.accordionItemInvalidate.complete();\n    }\n\n    invalidate() {\n      this.accordionItemInvalidate.next(true);\n      this.cd.markForCheck();\n    }\n\n  }\n\n  NbAccordionItemComponent.ɵfac = function NbAccordionItemComponent_Factory(t) {\n    return new (t || NbAccordionItemComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbAccordionItemComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAccordionItemComponent,\n    selectors: [[\"nb-accordion-item\"]],\n    hostVars: 6,\n    hostBindings: function NbAccordionItemComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"collapsed\", ctx.collapsed)(\"expanded\", ctx.expanded)(\"disabled\", ctx.disabled);\n      }\n    },\n    inputs: {\n      collapsed: \"collapsed\",\n      expanded: \"expanded\",\n      disabled: \"disabled\"\n    },\n    outputs: {\n      collapsedChange: \"collapsedChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c32,\n    decls: 2,\n    vars: 0,\n    template: function NbAccordionItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c31);\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵprojection(1, 1);\n      }\n    },\n    styles: [_c8],\n    changeDetection: 0\n  });\n  return NbAccordionItemComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst accordionItemBodyTrigger = trigger('accordionItemBody', [state('collapsed', style({\n  overflow: 'hidden',\n  visibility: 'hidden',\n  height: 0\n})), state('expanded', style({\n  overflow: 'hidden',\n  visibility: 'visible'\n})), transition('collapsed => expanded', animate('100ms ease-in')), transition('expanded => collapsed', animate('100ms ease-out'))]);\n/**\n * Component intended to be used within `<nb-accordion-item>` component\n */\n\nlet NbAccordionItemBodyComponent = /*#__PURE__*/(() => {\n  class NbAccordionItemBodyComponent {\n    constructor(accordionItem, cd) {\n      this.accordionItem = accordionItem;\n      this.cd = cd;\n      this.destroy$ = new Subject();\n    }\n\n    get state() {\n      return this.accordionItem.collapsed ? 'collapsed' : 'expanded';\n    }\n\n    ngOnInit() {\n      this.accordionItem.accordionItemInvalidate.pipe(takeUntil(this.destroy$)).subscribe(() => this.cd.markForCheck());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n  }\n\n  NbAccordionItemBodyComponent.ɵfac = function NbAccordionItemBodyComponent_Factory(t) {\n    return new (t || NbAccordionItemBodyComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionItemComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbAccordionItemBodyComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAccordionItemBodyComponent,\n    selectors: [[\"nb-accordion-item-body\"]],\n    ngContentSelectors: _c0,\n    decls: 3,\n    vars: 3,\n    consts: [[1, \"item-body\"]],\n    template: function NbAccordionItemBodyComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"div\");\n        ɵngcc0.ɵɵelementStart(1, \"div\", 0);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"@accordionItemBody\", ɵngcc0.ɵɵpureFunction1(1, _c33, ctx.state));\n      }\n    },\n    encapsulation: 2,\n    data: {\n      animation: [accordionItemBodyTrigger]\n    },\n    changeDetection: 0\n  });\n  return NbAccordionItemBodyComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Component intended to be used within `<nb-accordion-item>` component\n */\n\n\nlet NbAccordionItemHeaderComponent = /*#__PURE__*/(() => {\n  class NbAccordionItemHeaderComponent {\n    constructor(accordionItem, cd) {\n      this.accordionItem = accordionItem;\n      this.cd = cd;\n      this.destroy$ = new Subject();\n    }\n\n    get isCollapsed() {\n      return this.accordionItem.collapsed;\n    }\n\n    get expanded() {\n      return !this.accordionItem.collapsed;\n    } // issue #794\n\n\n    get tabbable() {\n      return this.accordionItem.disabled ? '-1' : '0';\n    }\n\n    get disabled() {\n      return this.accordionItem.disabled;\n    }\n\n    toggle() {\n      this.accordionItem.toggle();\n    }\n\n    get state() {\n      if (this.isCollapsed) {\n        return 'collapsed';\n      }\n\n      if (this.expanded) {\n        return 'expanded';\n      }\n    }\n\n    ngOnInit() {\n      this.accordionItem.accordionItemInvalidate.pipe(takeUntil(this.destroy$)).subscribe(() => this.cd.markForCheck());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n  }\n\n  NbAccordionItemHeaderComponent.ɵfac = function NbAccordionItemHeaderComponent_Factory(t) {\n    return new (t || NbAccordionItemHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbAccordionItemComponent, 1), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbAccordionItemHeaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAccordionItemHeaderComponent,\n    selectors: [[\"nb-accordion-item-header\"]],\n    hostVars: 7,\n    hostBindings: function NbAccordionItemHeaderComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbAccordionItemHeaderComponent_click_HostBindingHandler() {\n          return ctx.toggle();\n        })(\"keydown.space\", function NbAccordionItemHeaderComponent_keydown_space_HostBindingHandler() {\n          return ctx.toggle();\n        })(\"keydown.enter\", function NbAccordionItemHeaderComponent_keydown_enter_HostBindingHandler() {\n          return ctx.toggle();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-expanded\", ctx.expanded)(\"tabindex\", ctx.tabbable)(\"aria-disabled\", ctx.disabled);\n        ɵngcc0.ɵɵclassProp(\"accordion-item-header-collapsed\", ctx.isCollapsed)(\"accordion-item-header-expanded\", ctx.expanded);\n      }\n    },\n    ngContentSelectors: _c35,\n    decls: 4,\n    vars: 1,\n    consts: [[\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", \"class\", \"expansion-indicator\", 4, \"ngIf\"], [\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", 1, \"expansion-indicator\"]],\n    template: function NbAccordionItemHeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c34);\n        ɵngcc0.ɵɵprojection(0);\n        ɵngcc0.ɵɵprojection(1, 1);\n        ɵngcc0.ɵɵprojection(2, 2);\n        ɵngcc0.ɵɵtemplate(3, NbAccordionItemHeaderComponent_nb_icon_3_Template, 1, 1, \"nb-icon\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.disabled);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center;cursor:pointer}[_nghost-%COMP%]:focus{outline:0}\"],\n    data: {\n      animation: [trigger('expansionIndicator', [state('expanded', style({\n        transform: 'rotate(180deg)'\n      })), transition('collapsed => expanded', animate('100ms ease-in')), transition('expanded => collapsed', animate('100ms ease-out'))])]\n    },\n    changeDetection: 0\n  });\n  return NbAccordionItemHeaderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_ACCORDION_COMPONENTS = [NbAccordionComponent, NbAccordionItemComponent, NbAccordionItemHeaderComponent, NbAccordionItemBodyComponent];\nlet NbAccordionModule = /*#__PURE__*/(() => {\n  class NbAccordionModule {}\n\n  NbAccordionModule.ɵfac = function NbAccordionModule_Factory(t) {\n    return new (t || NbAccordionModule)();\n  };\n\n  NbAccordionModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbAccordionModule\n  });\n  NbAccordionModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [],\n    imports: [[CommonModule, NbIconModule]]\n  });\n  return NbAccordionModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAccordionModule, {\n    declarations: function () {\n      return [NbAccordionComponent, NbAccordionItemComponent, NbAccordionItemHeaderComponent, NbAccordionItemBodyComponent];\n    },\n    imports: function () {\n      return [CommonModule, NbIconModule];\n    },\n    exports: function () {\n      return [NbAccordionComponent, NbAccordionItemComponent, NbAccordionItemHeaderComponent, NbAccordionItemBodyComponent];\n    }\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * `[nbButtonToggle]` is a directive to add a `pressed` state to a button.\n */\n\n\nlet NbButtonToggleDirective = /*#__PURE__*/(() => {\n  class NbButtonToggleDirective extends NbButton {\n    constructor(renderer, hostElement, cd, zone, statusService) {\n      super(renderer, hostElement, cd, zone, statusService);\n      this.renderer = renderer;\n      this.hostElement = hostElement;\n      this.cd = cd;\n      this.zone = zone;\n      this.statusService = statusService;\n      this._pressedChange$ = new Subject();\n      this.appearance = 'filled';\n      this._pressed = false;\n      /**\n       * Emits whenever button pressed state change\n       **/\n\n      this.pressedChange = new EventEmitter();\n    }\n\n    get pressedChange$() {\n      return this._pressedChange$.asObservable();\n    }\n    /**\n     * Controls button pressed state\n     **/\n\n\n    get pressed() {\n      return this._pressed;\n    }\n\n    set pressed(value) {\n      if (this.pressed !== convertToBoolProperty(value)) {\n        this._pressed = !this.pressed;\n        this.pressedChange.emit(this.pressed);\n\n        this._pressedChange$.next({\n          source: this,\n          pressed: this.pressed\n        });\n      }\n    }\n\n    get basic() {\n      // By design, all toggle buttons should have a `basic` status when not pressed.\n      return !this.pressed;\n    }\n\n    get primary() {\n      return this.pressed && (this.status === 'basic' || this.status === 'primary');\n    }\n\n    get success() {\n      return this.pressed && this.status === 'success';\n    }\n\n    get info() {\n      return this.pressed && this.status === 'info';\n    }\n\n    get warning() {\n      return this.pressed && this.status === 'warning';\n    }\n\n    get danger() {\n      return this.pressed && this.status === 'danger';\n    }\n\n    get control() {\n      return this.pressed && this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    onClick() {\n      this.pressed = !this.pressed;\n    }\n    /**\n     * @docs-private\n     */\n\n\n    _updatePressed(value) {\n      this.pressed = value;\n      this.cd.markForCheck();\n    }\n\n  }\n\n  NbButtonToggleDirective.ɵfac = function NbButtonToggleDirective_Factory(t) {\n    return new (t || NbButtonToggleDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbButtonToggleDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbButtonToggleDirective,\n    selectors: [[\"button\", \"nbButtonToggle\", \"\"]],\n    hostVars: 17,\n    hostBindings: function NbButtonToggleDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbButtonToggleDirective_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-pressed\", ctx.pressed);\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-basic\", ctx.basic)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-control\", ctx.control);\n      }\n    },\n    inputs: {\n      appearance: \"appearance\",\n      pressed: \"pressed\",\n      value: \"value\"\n    },\n    outputs: {\n      pressedChange: \"pressedChange\"\n    },\n    exportAs: [\"nbButtonToggle\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbButton,\n      useExisting: NbButtonToggleDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbButtonToggleDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * `<nb-button-group>` visually groups buttons together and allow to control buttons properties and the state as a\n * group.\n * @stacked-example(Button Group Showcase, button-group/button-group-showcase.component)\n *\n * ### Installation\n *\n * Import `NbButtonGroupModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbButtonGroupModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * ### Usage\n *\n * You can use `<nb-button-group>` to group a series of `[nbButton]` or `[nbButtonToggle]` components.\n * @stacked-example(Button and Button Toggle Groups, button-group/button-and-button-toggle-groups.component)\n *\n * For a group of multiple `[nbButtonToggle]` you also can control multi-selection behavior. By default, the group\n * component allows only one pressed button toggle at a time (similar to the radio group). To be able to keep multiple\n * toggles pressed, you need to add `multiple` attributes to the `<nb-button-toggle>`.\n * @stacked-example(Button Group Multiple, button-group/button-group-multiple.component)\n *\n * To know which buttons are currently pressed listen to `(valueChange)` on the `nb-button-group`. Event\n * contains an array of values of currently pressed button toggles. You can assign a value to the\n * `[nbButtonToggle]` via the `value` input.\n * @stacked-example(Button Group Value Change, button-group/button-group-value-change.component)\n *\n * To disable a group of buttons, add a `disabled` attribute to the `<nb-button-group>`.\n * @stacked-example(Button Group Disabled, button-group/button-group-disabled.component)\n *\n * The group component controls all visual attributes of buttons such as `appearance`, `status`, `size`, `shape`.\n * You can change it via the appropriate attributes.\n *\n * Button group appearances:\n * @stacked-example(Button Group Appearances, button-group/button-group-appearances.component)\n *\n * Button group statuses:\n * @stacked-example(Button Group Statuses, button-group/button-group-statuses.component)\n *\n * Button group sizes:\n * @stacked-example(Button Group Sizes, button-group/button-group-sizes.component)\n *\n * Buttons group shapes:\n * @additional-example(Button Group Shapes, button-group/button-group-shapes.component)\n *\n * @styles\n *\n * button-group-filled-button-basic-text-color:\n * button-group-filled-button-primary-text-color:\n * button-group-filled-button-success-text-color:\n * button-group-filled-button-info-text-color:\n * button-group-filled-button-warning-text-color:\n * button-group-filled-button-danger-text-color:\n * button-group-filled-button-control-text-color:\n * button-group-filled-basic-divider-color:\n * button-group-filled-primary-divider-color:\n * button-group-filled-success-divider-color:\n * button-group-filled-info-divider-color:\n * button-group-filled-warning-divider-color:\n * button-group-filled-danger-divider-color:\n * button-group-filled-control-divider-color:\n * button-group-ghost-divider-color:\n **/\n\n\nlet NbButtonGroupComponent = /*#__PURE__*/(() => {\n  class NbButtonGroupComponent {\n    constructor(cd, statusService) {\n      this.cd = cd;\n      this.statusService = statusService;\n      this.lastEmittedValue = [];\n      this.destroy$ = new Subject();\n      this.buttonsChange$ = new Subject();\n      /**\n       * Button group size, available sizes:\n       * `tiny`, `small`, `medium`, `large`, `giant`\n       */\n\n      this.size = 'medium';\n      /**\n       * Button group status (adds specific styles):\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`\n       */\n\n      this.status = 'basic';\n      /**\n       * Button group shapes: `rectangle`, `round`, `semi-round`\n       */\n\n      this.shape = 'rectangle';\n      /**\n       * Button group appearance: `filled`, `outline`, `ghost`\n       */\n\n      this.appearance = 'filled';\n      this._disabled = false;\n      this._multiple = false;\n      /**\n       * Emits when `nbButtonToggle` pressed state change. `$event` contains an array of the currently pressed button\n       * toggles.\n       */\n\n      this.valueChange = new EventEmitter();\n      this.role = 'group';\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      if (this.disabled !== convertToBoolProperty(value)) {\n        this._disabled = !this.disabled;\n      }\n    }\n    /**\n     * Allows to keep multiple button toggles pressed. Off by default.\n     */\n\n\n    get multiple() {\n      return this._multiple;\n    }\n\n    set multiple(value) {\n      this._multiple = convertToBoolProperty(value);\n    }\n    /**\n     * Sets `filled` appearance\n     */\n\n\n    get filled() {\n      return this.appearance === 'filled';\n    }\n\n    set filled(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'filled';\n      }\n    }\n    /**\n     * Sets `outline` appearance\n     */\n\n\n    get outline() {\n      return this.appearance === 'outline';\n    }\n\n    set outline(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'outline';\n      }\n    }\n    /**\n     * Sets `ghost` appearance\n     */\n\n\n    get ghost() {\n      return this.appearance === 'ghost';\n    }\n\n    set ghost(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'ghost';\n      }\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    ngOnChanges({\n      size,\n      status,\n      shape,\n      multiple,\n      filled,\n      outline,\n      ghost,\n      disabled\n    }) {\n      var _a;\n\n      if (size || status || shape || multiple || filled || outline || ghost || disabled) {\n        this.syncButtonsProperties(((_a = this.buttons) === null || _a === void 0 ? void 0 : _a.toArray()) || []);\n      }\n    }\n\n    ngAfterContentInit() {\n      this.buttonsChange$.pipe(takeUntil(this.destroy$)).subscribe(buttons => {\n        this.listenButtonPressedState(buttons);\n        this.syncButtonsProperties(buttons);\n      });\n      this.buttons.changes.pipe( // `buttons.changes` emit during change detection run after projected content already was initialized.\n      // So at this time, it's too late to update projected buttons properties as updating bindings after\n      // initialization doesn't make sense. Changes won't be picked up and should cause an \"expression changed\" error.\n      // Instead, we wrap the new buttons list into a promise to defer update to the following microtask and also to\n      // trigger change detection one more time.\n      switchMap(buttons => from(Promise.resolve(buttons.toArray()))), takeUntil(this.destroy$)).subscribe(this.buttonsChange$);\n      this.buttonsChange$.next(this.buttons.toArray());\n    }\n\n    listenButtonPressedState(buttons) {\n      const toggleButtons = buttons.filter(button => {\n        return button instanceof NbButtonToggleDirective;\n      });\n\n      if (!toggleButtons.length) {\n        return;\n      }\n\n      const buttonsPressedChange$ = toggleButtons.map(button => button.pressedChange$);\n      merge(...buttonsPressedChange$).pipe(filter(({\n        pressed\n      }) => !this.multiple && pressed), takeUntil(merge(this.buttonsChange$, this.destroy$))).subscribe(({\n        source\n      }) => {\n        toggleButtons.filter(button => button !== source).forEach(button => button._updatePressed(false));\n      });\n      merge(...buttonsPressedChange$).pipe( // Use startWith to emit if some buttons are initially pressed.\n      startWith(''), // Use debounce to emit change once when pressed state change in multiple button toggles.\n      debounceTime(0), takeUntil(merge(this.buttonsChange$, this.destroy$))).subscribe(() => this.emitCurrentValue(toggleButtons));\n    }\n\n    syncButtonsProperties(buttons) {\n      buttons.forEach(button => {\n        button.updateProperties({\n          appearance: this.appearance,\n          size: this.size,\n          status: this.status,\n          shape: this.shape,\n          disabled: this.disabled\n        });\n      });\n    }\n\n    emitCurrentValue(toggleButtons) {\n      const pressedToggleValues = toggleButtons.filter(b => b.pressed && typeof b.value !== 'undefined').map(b => b.value); // Prevent multiple emissions of empty value.\n\n      if (pressedToggleValues.length === 0 && this.lastEmittedValue.length === 0) {\n        return;\n      }\n\n      this.valueChange.emit(pressedToggleValues);\n      this.lastEmittedValue = pressedToggleValues;\n    }\n\n  }\n\n  NbButtonGroupComponent.ɵfac = function NbButtonGroupComponent_Factory(t) {\n    return new (t || NbButtonGroupComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbButtonGroupComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbButtonGroupComponent,\n    selectors: [[\"nb-button-group\"]],\n    contentQueries: function NbButtonGroupComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbButton, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.buttons = _t);\n      }\n    },\n    hostVars: 3,\n    hostBindings: function NbButtonGroupComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role);\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      status: \"status\",\n      shape: \"shape\",\n      appearance: \"appearance\",\n      disabled: \"disabled\",\n      multiple: \"multiple\",\n      filled: \"filled\",\n      outline: \"outline\",\n      ghost: \"ghost\"\n    },\n    outputs: {\n      valueChange: \"valueChange\"\n    },\n    features: [ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbButtonGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbButtonGroupComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbButtonGroupModule = /*#__PURE__*/(() => {\n  class NbButtonGroupModule {}\n\n  NbButtonGroupModule.ɵfac = function NbButtonGroupModule_Factory(t) {\n    return new (t || NbButtonGroupModule)();\n  };\n\n  NbButtonGroupModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbButtonGroupModule\n  });\n  NbButtonGroupModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return NbButtonGroupModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbButtonGroupModule, {\n    declarations: [NbButtonGroupComponent, NbButtonToggleDirective],\n    exports: [NbButtonGroupComponent, NbButtonToggleDirective]\n  });\n})();\n/**\n * List is a container component that wraps `nb-list-item` component.\n *\n * Basic example:\n * @stacked-example(Simple list, list/simple-list-showcase.component)\n *\n * `nb-list-item` accepts arbitrary content, so you can create a list of any components.\n *\n * ### Installation\n *\n * Import `NbListModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbListModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * List of users:\n * @stacked-example(Users list, list/users-list-showcase.component)\n *\n * @styles\n *\n * list-item-divider-color:\n * list-item-divider-style:\n * list-item-divider-width:\n * list-item-padding:\n * list-item-text-color:\n * list-item-font-family:\n * list-item-font-size:\n * list-item-font-weight:\n * list-item-line-height:\n */\n\n\nlet NbListComponent = /*#__PURE__*/(() => {\n  class NbListComponent {\n    constructor() {\n      /**\n       * Role attribute value\n       *\n       * @type {string}\n       */\n      this.role = 'list';\n    }\n\n  }\n\n  NbListComponent.ɵfac = function NbListComponent_Factory(t) {\n    return new (t || NbListComponent)();\n  };\n\n  NbListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbListComponent,\n    selectors: [[\"nb-list\"]],\n    hostVars: 1,\n    hostBindings: function NbListComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role);\n      }\n    },\n    inputs: {\n      role: \"role\"\n    },\n    ngContentSelectors: _c37,\n    decls: 1,\n    vars: 0,\n    template: function NbListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c36);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;flex-direction:column;flex:1 1 auto;overflow:auto}\"]\n  });\n  return NbListComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * List item component is a grouping component that accepts arbitrary content.\n * It should be direct child of `nb-list` componet.\n */\n\n\nlet NbListItemComponent = /*#__PURE__*/(() => {\n  class NbListItemComponent {\n    constructor() {\n      /**\n       * Role attribute value\n       *\n       * @type {string}\n       */\n      this.role = 'listitem';\n    }\n\n  }\n\n  NbListItemComponent.ɵfac = function NbListItemComponent_Factory(t) {\n    return new (t || NbListItemComponent)();\n  };\n\n  NbListItemComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbListItemComponent,\n    selectors: [[\"nb-list-item\"]],\n    hostVars: 1,\n    hostBindings: function NbListItemComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role);\n      }\n    },\n    inputs: {\n      role: \"role\"\n    },\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbListItemComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center;flex-shrink:0}\"]\n  });\n  return NbListItemComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * List pager directive\n *\n * Directive allows you to determine page of currently viewing items.\n *\n */\n\n\nlet NbListPageTrackerDirective = /*#__PURE__*/(() => {\n  class NbListPageTrackerDirective {\n    constructor() {\n      this.destroy$ = new Subject();\n      /**\n       * Page to start counting with.\n       */\n\n      this.startPage = 1;\n      /**\n       * Emits when another page become visible.\n       */\n\n      this.pageChange = new EventEmitter();\n      this.observer = new IntersectionObserver(entries => this.checkForPageChange(entries), {\n        threshold: 0.5\n      });\n    }\n\n    ngAfterViewInit() {\n      if (this.listItems && this.listItems.length) {\n        this.observeItems();\n      }\n\n      this.listItems.changes.pipe(takeUntil(this.destroy$)).subscribe(() => this.observeItems());\n    }\n\n    ngOnDestroy() {\n      this.observer.disconnect && this.observer.disconnect();\n    }\n\n    observeItems() {\n      this.listItems.forEach(i => this.observer.observe(i.nativeElement));\n    }\n\n    checkForPageChange(entries) {\n      const mostVisiblePage = this.findMostVisiblePage(entries);\n\n      if (mostVisiblePage && this.currentPage !== mostVisiblePage) {\n        this.currentPage = mostVisiblePage;\n        this.pageChange.emit(this.currentPage);\n      }\n    }\n\n    findMostVisiblePage(entries) {\n      const intersectionRatioByPage = new Map();\n\n      for (const entry of entries) {\n        if (entry.intersectionRatio < 0.5) {\n          continue;\n        }\n\n        const elementIndex = this.elementIndex(entry.target);\n\n        if (elementIndex === -1) {\n          continue;\n        }\n\n        const page = this.startPage + Math.floor(elementIndex / this.pageSize);\n        let ratio = entry.intersectionRatio;\n\n        if (intersectionRatioByPage.has(page)) {\n          ratio += intersectionRatioByPage.get(page);\n        }\n\n        intersectionRatioByPage.set(page, ratio);\n      }\n\n      let maxRatio = 0;\n      let mostVisiblePage;\n      intersectionRatioByPage.forEach((ratio, page) => {\n        if (ratio > maxRatio) {\n          maxRatio = ratio;\n          mostVisiblePage = page;\n        }\n      });\n      return mostVisiblePage;\n    }\n\n    elementIndex(element) {\n      return element.parentElement && element.parentElement.children ? Array.from(element.parentElement.children).indexOf(element) : -1;\n    }\n\n  }\n\n  NbListPageTrackerDirective.ɵfac = function NbListPageTrackerDirective_Factory(t) {\n    return new (t || NbListPageTrackerDirective)();\n  };\n\n  NbListPageTrackerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbListPageTrackerDirective,\n    selectors: [[\"\", \"nbListPageTracker\", \"\"]],\n    contentQueries: function NbListPageTrackerDirective_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbListItemComponent, 4, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listItems = _t);\n      }\n    },\n    inputs: {\n      startPage: \"startPage\",\n      pageSize: \"pageSize\"\n    },\n    outputs: {\n      pageChange: \"pageChange\"\n    }\n  });\n  return NbListPageTrackerDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbScrollableContainerDimentions {}\n/**\n * Infinite List Directive\n *\n * ```html\n *  <nb-list nbInfiniteList [threshold]=\"500\" (bottomThreshold)=\"loadNext()\">\n *    <nb-list-item *ngFor=\"let item of items\"></nb-list-item>\n *  </nb-list>\n * ```\n *\n * @stacked-example(Simple infinite list, infinite-list/infinite-list-showcase.component)\n *\n * Directive will notify when list scrolled up or down to a given threshold.\n * By default it listen to scroll of list on which applied, but also can be set to listen to window scroll.\n *\n * @stacked-example(Scroll modes, infinite-list/infinite-list-scroll-modes.component)\n *\n * To improve UX of infinite lists, it's better to keep current page in url,\n * so user able to return to the last viewed page or to share a link to this page.\n * `nbListPageTracker` directive will help you to know, what page user currently viewing.\n * Just put it on a list, set page size and it will calculate page that currently in viewport.\n * You can [open the example](example/infinite-list/infinite-news-list.component)\n * in a new tab to check out this feature.\n *\n * @stacked-example(Infinite list with pager, infinite-list/infinite-news-list.component)\n *\n * @stacked-example(Infinite list with placeholders at the top, infinite-list/infinite-list-placeholders.component)\n *\n */\n\n\nlet NbInfiniteListDirective = /*#__PURE__*/(() => {\n  class NbInfiniteListDirective {\n    constructor(elementRef, scrollService, dimensionsService) {\n      this.elementRef = elementRef;\n      this.scrollService = scrollService;\n      this.dimensionsService = dimensionsService;\n      this.destroy$ = new Subject();\n      this.windowScroll = false;\n      /**\n       * Emits when distance between list bottom and current scroll position is less than threshold.\n       */\n\n      this.bottomThreshold = new EventEmitter(true);\n      /**\n       * Emits when distance between list top and current scroll position is less than threshold.\n       */\n\n      this.topThreshold = new EventEmitter(true);\n    }\n\n    get elementScroll() {\n      return !this.windowScroll;\n    }\n    /**\n     * By default component observes list scroll position.\n     * If set to `true`, component will observe position of page scroll instead.\n     */\n\n\n    set listenWindowScroll(value) {\n      this.windowScroll = convertToBoolProperty(value);\n    }\n\n    onElementScroll() {\n      if (this.elementScroll) {\n        this.checkPosition(this.elementRef.nativeElement);\n      }\n    }\n\n    ngAfterViewInit() {\n      this.scrollService.onScroll().pipe(filter(() => this.windowScroll), switchMap(() => this.getContainerDimensions()), takeUntil(this.destroy$)).subscribe(dimentions => this.checkPosition(dimentions));\n      this.listItems.changes.pipe( // For some reason, changes are emitted before list item removed from dom,\n      // so dimensions will be incorrect.\n      // Check every 50ms for a second if dom and query are in sync.\n      // Once they synchronized, we can get proper dimensions.\n      switchMap(() => interval(50).pipe(filter(() => this.inSyncWithDom()), take(1), takeUntil(timer(1000)))), switchMap(() => this.getContainerDimensions()), takeUntil(this.destroy$)).subscribe(dimentions => this.checkPosition(dimentions));\n      this.getContainerDimensions().subscribe(dimentions => this.checkPosition(dimentions));\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    checkPosition({\n      scrollHeight,\n      scrollTop,\n      clientHeight\n    }) {\n      const initialCheck = this.lastScrollPosition == null;\n      const manualCheck = this.lastScrollPosition === scrollTop;\n      const scrollUp = scrollTop < this.lastScrollPosition;\n      const scrollDown = scrollTop > this.lastScrollPosition;\n      const distanceToBottom = scrollHeight - scrollTop - clientHeight;\n\n      if ((initialCheck || manualCheck || scrollDown) && distanceToBottom <= this.threshold) {\n        this.bottomThreshold.emit();\n      }\n\n      if ((initialCheck || scrollUp) && scrollTop <= this.threshold) {\n        this.topThreshold.emit();\n      }\n\n      this.lastScrollPosition = scrollTop;\n    }\n\n    getContainerDimensions() {\n      if (this.elementScroll) {\n        const {\n          scrollTop,\n          scrollHeight,\n          clientHeight\n        } = this.elementRef.nativeElement;\n        return of({\n          scrollTop,\n          scrollHeight,\n          clientHeight\n        });\n      }\n\n      return forkJoin([this.scrollService.getPosition(), this.dimensionsService.getDimensions()]).pipe(map(([scrollPosition, dimensions]) => ({\n        scrollTop: scrollPosition.y,\n        scrollHeight: dimensions.scrollHeight,\n        clientHeight: dimensions.clientHeight\n      })));\n    }\n\n    inSyncWithDom() {\n      return this.elementRef.nativeElement.children.length === this.listItems.length;\n    }\n\n  }\n\n  NbInfiniteListDirective.ɵfac = function NbInfiniteListDirective_Factory(t) {\n    return new (t || NbInfiniteListDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbLayoutScrollService), ɵngcc0.ɵɵdirectiveInject(NbLayoutRulerService));\n  };\n\n  NbInfiniteListDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbInfiniteListDirective,\n    selectors: [[\"\", \"nbInfiniteList\", \"\"]],\n    contentQueries: function NbInfiniteListDirective_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbListItemComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.listItems = _t);\n      }\n    },\n    hostBindings: function NbInfiniteListDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"scroll\", function NbInfiniteListDirective_scroll_HostBindingHandler() {\n          return ctx.onElementScroll();\n        });\n      }\n    },\n    inputs: {\n      listenWindowScroll: \"listenWindowScroll\",\n      threshold: \"threshold\"\n    },\n    outputs: {\n      bottomThreshold: \"bottomThreshold\",\n      topThreshold: \"topThreshold\"\n    }\n  });\n  return NbInfiniteListDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst components = [NbListComponent, NbListItemComponent, NbListPageTrackerDirective, NbInfiniteListDirective];\nlet NbListModule = /*#__PURE__*/(() => {\n  class NbListModule {}\n\n  NbListModule.ɵfac = function NbListModule_Factory(t) {\n    return new (t || NbListModule)();\n  };\n\n  NbListModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbListModule\n  });\n  NbListModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return NbListModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbListModule, {\n    declarations: [NbListComponent, NbListItemComponent, NbListPageTrackerDirective, NbInfiniteListDirective],\n    exports: [NbListComponent, NbListItemComponent, NbListPageTrackerDirective, NbInfiniteListDirective]\n  });\n})();\n\nlet NbDirectionality = /*#__PURE__*/(() => {\n  class NbDirectionality extends Directionality {}\n\n  NbDirectionality.ɵfac = /*@__PURE__*/function () {\n    let ɵNbDirectionality_BaseFactory;\n    return function NbDirectionality_Factory(t) {\n      return (ɵNbDirectionality_BaseFactory || (ɵNbDirectionality_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDirectionality)))(t || NbDirectionality);\n    };\n  }();\n\n  NbDirectionality.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDirectionality,\n    factory: NbDirectionality.ɵfac\n  });\n  return NbDirectionality;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbBidiModule = /*#__PURE__*/(() => {\n  class NbBidiModule extends BidiModule {}\n\n  NbBidiModule.ɵfac = /*@__PURE__*/function () {\n    let ɵNbBidiModule_BaseFactory;\n    return function NbBidiModule_Factory(t) {\n      return (ɵNbBidiModule_BaseFactory || (ɵNbBidiModule_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbBidiModule)))(t || NbBidiModule);\n    };\n  }();\n\n  NbBidiModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbBidiModule\n  });\n  NbBidiModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [{\n      provide: NbDirectionality,\n      useExisting: Directionality\n    }]\n  });\n  return NbBidiModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license infornbion.\n */\n\n/**\n * Cell definition for the nb-table.\n * Captures the template of a column's data row cell as well as cell-specific properties.\n */\n\n\nlet NbCellDefDirective = /*#__PURE__*/(() => {\n  class NbCellDefDirective extends CdkCellDef {}\n\n  NbCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbCellDefDirective_BaseFactory;\n    return function NbCellDefDirective_Factory(t) {\n      return (ɵNbCellDefDirective_BaseFactory || (ɵNbCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbCellDefDirective)))(t || NbCellDefDirective);\n    };\n  }();\n\n  NbCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbCellDefDirective,\n    selectors: [[\"\", \"nbCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkCellDef,\n      useExisting: NbCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Header cell definition for the nb-table.\n * Captures the template of a column's header cell and as well as cell-specific properties.\n */\n\n\nlet NbHeaderCellDefDirective = /*#__PURE__*/(() => {\n  class NbHeaderCellDefDirective extends CdkHeaderCellDef {}\n\n  NbHeaderCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbHeaderCellDefDirective_BaseFactory;\n    return function NbHeaderCellDefDirective_Factory(t) {\n      return (ɵNbHeaderCellDefDirective_BaseFactory || (ɵNbHeaderCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderCellDefDirective)))(t || NbHeaderCellDefDirective);\n    };\n  }();\n\n  NbHeaderCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbHeaderCellDefDirective,\n    selectors: [[\"\", \"nbHeaderCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkHeaderCellDef,\n      useExisting: NbHeaderCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbHeaderCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Footer cell definition for the nb-table.\n * Captures the template of a column's footer cell and as well as cell-specific properties.\n */\n\n\nlet NbFooterCellDefDirective = /*#__PURE__*/(() => {\n  class NbFooterCellDefDirective extends CdkFooterCellDef {}\n\n  NbFooterCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFooterCellDefDirective_BaseFactory;\n    return function NbFooterCellDefDirective_Factory(t) {\n      return (ɵNbFooterCellDefDirective_BaseFactory || (ɵNbFooterCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterCellDefDirective)))(t || NbFooterCellDefDirective);\n    };\n  }();\n\n  NbFooterCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFooterCellDefDirective,\n    selectors: [[\"\", \"nbFooterCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkFooterCellDef,\n      useExisting: NbFooterCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbFooterCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst NB_SORT_HEADER_COLUMN_DEF = new InjectionToken('NB_SORT_HEADER_COLUMN_DEF');\n/**\n * Column definition for the nb-table.\n * Defines a set of cells available for a table column.\n */\n\nlet NbColumnDefDirective = /*#__PURE__*/(() => {\n  class NbColumnDefDirective extends CdkColumnDef {\n    /** Unique name for this column. */\n    get name() {\n      return this._name;\n    }\n\n    set name(value) {\n      this._setNameInput(value);\n    }\n    /** Whether this column should be sticky positioned on the end of the row */\n\n\n    get stickyEnd() {\n      return this._stickyEnd;\n    }\n\n    set stickyEnd(value) {\n      const prevValue = this._stickyEnd;\n      this._stickyEnd = coerceBooleanProperty(value);\n      this._hasStickyChanged = prevValue !== this._stickyEnd;\n    }\n\n  }\n\n  NbColumnDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbColumnDefDirective_BaseFactory;\n    return function NbColumnDefDirective_Factory(t) {\n      return (ɵNbColumnDefDirective_BaseFactory || (ɵNbColumnDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbColumnDefDirective)))(t || NbColumnDefDirective);\n    };\n  }();\n\n  NbColumnDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbColumnDefDirective,\n    selectors: [[\"\", \"nbColumnDef\", \"\"]],\n    inputs: {\n      name: [\"nbColumnDef\", \"name\"],\n      stickyEnd: \"stickyEnd\",\n      sticky: \"sticky\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkColumnDef,\n      useExisting: NbColumnDefDirective\n    }, {\n      provide: NB_SORT_HEADER_COLUMN_DEF,\n      useExisting: NbColumnDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbColumnDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Header cell template container that adds the right classes and role. */\n\n\nlet NbHeaderCellDirective = /*#__PURE__*/(() => {\n  class NbHeaderCellDirective extends CdkHeaderCell {\n    constructor(columnDef, elementRef) {\n      super(columnDef, elementRef);\n      elementRef.nativeElement.classList.add(`nb-column-${columnDef.cssClassFriendlyName}`);\n    }\n\n  }\n\n  NbHeaderCellDirective.ɵfac = function NbHeaderCellDirective_Factory(t) {\n    return new (t || NbHeaderCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  NbHeaderCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbHeaderCellDirective,\n    selectors: [[\"nb-header-cell\"], [\"th\", \"nbHeaderCell\", \"\"]],\n    hostAttrs: [\"role\", \"columnheader\", 1, \"nb-header-cell\"],\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbHeaderCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Footer cell template container that adds the right classes and role. */\n\n\nlet NbFooterCellDirective = /*#__PURE__*/(() => {\n  class NbFooterCellDirective extends CdkFooterCell {\n    constructor(columnDef, elementRef) {\n      super(columnDef, elementRef);\n      elementRef.nativeElement.classList.add(`nb-column-${columnDef.cssClassFriendlyName}`);\n    }\n\n  }\n\n  NbFooterCellDirective.ɵfac = function NbFooterCellDirective_Factory(t) {\n    return new (t || NbFooterCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  NbFooterCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFooterCellDirective,\n    selectors: [[\"nb-footer-cell\"], [\"td\", \"nbFooterCell\", \"\"]],\n    hostAttrs: [\"role\", \"gridcell\", 1, \"nb-footer-cell\"],\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbFooterCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Cell template container that adds the right classes and role. */\n\n\nlet NbCellDirective = /*#__PURE__*/(() => {\n  class NbCellDirective extends CdkCell {\n    constructor(columnDef, elementRef) {\n      super(columnDef, elementRef);\n      elementRef.nativeElement.classList.add(`nb-column-${columnDef.cssClassFriendlyName}`);\n    }\n\n  }\n\n  NbCellDirective.ɵfac = function NbCellDirective_Factory(t) {\n    return new (t || NbCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  NbCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbCellDirective,\n    selectors: [[\"nb-cell\"], [\"td\", \"nbCell\", \"\"]],\n    hostAttrs: [\"role\", \"gridcell\", 1, \"nb-cell\"],\n    features: [ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nclass NbDataSource extends DataSource {}\n\nlet NbDataRowOutletDirective = /*#__PURE__*/(() => {\n  class NbDataRowOutletDirective extends DataRowOutlet {}\n\n  NbDataRowOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbDataRowOutletDirective_BaseFactory;\n    return function NbDataRowOutletDirective_Factory(t) {\n      return (ɵNbDataRowOutletDirective_BaseFactory || (ɵNbDataRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbDataRowOutletDirective)))(t || NbDataRowOutletDirective);\n    };\n  }();\n\n  NbDataRowOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbDataRowOutletDirective,\n    selectors: [[\"\", \"nbRowOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: DataRowOutlet,\n      useExisting: NbDataRowOutletDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbDataRowOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbHeaderRowOutletDirective = /*#__PURE__*/(() => {\n  class NbHeaderRowOutletDirective extends HeaderRowOutlet {}\n\n  NbHeaderRowOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbHeaderRowOutletDirective_BaseFactory;\n    return function NbHeaderRowOutletDirective_Factory(t) {\n      return (ɵNbHeaderRowOutletDirective_BaseFactory || (ɵNbHeaderRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowOutletDirective)))(t || NbHeaderRowOutletDirective);\n    };\n  }();\n\n  NbHeaderRowOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbHeaderRowOutletDirective,\n    selectors: [[\"\", \"nbHeaderRowOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: HeaderRowOutlet,\n      useExisting: NbHeaderRowOutletDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbHeaderRowOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbFooterRowOutletDirective = /*#__PURE__*/(() => {\n  class NbFooterRowOutletDirective extends FooterRowOutlet {}\n\n  NbFooterRowOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFooterRowOutletDirective_BaseFactory;\n    return function NbFooterRowOutletDirective_Factory(t) {\n      return (ɵNbFooterRowOutletDirective_BaseFactory || (ɵNbFooterRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowOutletDirective)))(t || NbFooterRowOutletDirective);\n    };\n  }();\n\n  NbFooterRowOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFooterRowOutletDirective,\n    selectors: [[\"\", \"nbFooterRowOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: FooterRowOutlet,\n      useExisting: NbFooterRowOutletDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbFooterRowOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbNoDataRowOutletDirective = /*#__PURE__*/(() => {\n  class NbNoDataRowOutletDirective extends NoDataRowOutlet {}\n\n  NbNoDataRowOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbNoDataRowOutletDirective_BaseFactory;\n    return function NbNoDataRowOutletDirective_Factory(t) {\n      return (ɵNbNoDataRowOutletDirective_BaseFactory || (ɵNbNoDataRowOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbNoDataRowOutletDirective)))(t || NbNoDataRowOutletDirective);\n    };\n  }();\n\n  NbNoDataRowOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbNoDataRowOutletDirective,\n    selectors: [[\"\", \"nbNoDataRowOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NoDataRowOutlet,\n      useExisting: NbNoDataRowOutletDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbNoDataRowOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbCellOutletDirective = /*#__PURE__*/(() => {\n  class NbCellOutletDirective extends CdkCellOutlet {}\n\n  NbCellOutletDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbCellOutletDirective_BaseFactory;\n    return function NbCellOutletDirective_Factory(t) {\n      return (ɵNbCellOutletDirective_BaseFactory || (ɵNbCellOutletDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbCellOutletDirective)))(t || NbCellOutletDirective);\n    };\n  }();\n\n  NbCellOutletDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbCellOutletDirective,\n    selectors: [[\"\", \"nbCellOutlet\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkCellOutlet,\n      useExisting: NbCellOutletDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbCellOutletDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Header row definition for the nb-table.\n * Captures the header row's template and other header properties such as the columns to display.\n */\n\n\nlet NbHeaderRowDefDirective = /*#__PURE__*/(() => {\n  class NbHeaderRowDefDirective extends CdkHeaderRowDef {}\n\n  NbHeaderRowDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbHeaderRowDefDirective_BaseFactory;\n    return function NbHeaderRowDefDirective_Factory(t) {\n      return (ɵNbHeaderRowDefDirective_BaseFactory || (ɵNbHeaderRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowDefDirective)))(t || NbHeaderRowDefDirective);\n    };\n  }();\n\n  NbHeaderRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbHeaderRowDefDirective,\n    selectors: [[\"\", \"nbHeaderRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbHeaderRowDef\", \"columns\"],\n      sticky: [\"nbHeaderRowDefSticky\", \"sticky\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkHeaderRowDef,\n      useExisting: NbHeaderRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbHeaderRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Footer row definition for the nb-table.\n * Captures the footer row's template and other footer properties such as the columns to display.\n */\n\n\nlet NbFooterRowDefDirective = /*#__PURE__*/(() => {\n  class NbFooterRowDefDirective extends CdkFooterRowDef {}\n\n  NbFooterRowDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFooterRowDefDirective_BaseFactory;\n    return function NbFooterRowDefDirective_Factory(t) {\n      return (ɵNbFooterRowDefDirective_BaseFactory || (ɵNbFooterRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowDefDirective)))(t || NbFooterRowDefDirective);\n    };\n  }();\n\n  NbFooterRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFooterRowDefDirective,\n    selectors: [[\"\", \"nbFooterRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbFooterRowDef\", \"columns\"],\n      sticky: [\"nbFooterRowDefSticky\", \"sticky\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkFooterRowDef,\n      useExisting: NbFooterRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbFooterRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Data row definition for the nb-table.\n * Captures the data row's template and other properties such as the columns to display and\n * a when predicate that describes when this row should be used.\n */\n\n\nlet NbRowDefDirective = /*#__PURE__*/(() => {\n  class NbRowDefDirective extends CdkRowDef {}\n\n  NbRowDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbRowDefDirective_BaseFactory;\n    return function NbRowDefDirective_Factory(t) {\n      return (ɵNbRowDefDirective_BaseFactory || (ɵNbRowDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRowDefDirective)))(t || NbRowDefDirective);\n    };\n  }();\n\n  NbRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbRowDefDirective,\n    selectors: [[\"\", \"nbRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbRowDefColumns\", \"columns\"],\n      when: [\"nbRowDefWhen\", \"when\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkRowDef,\n      useExisting: NbRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Footer template container that contains the cell outlet. Adds the right class and role. */\n\n\nlet NbHeaderRowComponent = /*#__PURE__*/(() => {\n  class NbHeaderRowComponent extends CdkHeaderRow {}\n\n  NbHeaderRowComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbHeaderRowComponent_BaseFactory;\n    return function NbHeaderRowComponent_Factory(t) {\n      return (ɵNbHeaderRowComponent_BaseFactory || (ɵNbHeaderRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbHeaderRowComponent)))(t || NbHeaderRowComponent);\n    };\n  }();\n\n  NbHeaderRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbHeaderRowComponent,\n    selectors: [[\"nb-header-row\"], [\"tr\", \"nbHeaderRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-header-row\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkHeaderRow,\n      useExisting: NbHeaderRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbHeaderRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbHeaderRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Footer template container that contains the cell outlet. Adds the right class and role. */\n\n\nlet NbFooterRowComponent = /*#__PURE__*/(() => {\n  class NbFooterRowComponent extends CdkFooterRow {}\n\n  NbFooterRowComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFooterRowComponent_BaseFactory;\n    return function NbFooterRowComponent_Factory(t) {\n      return (ɵNbFooterRowComponent_BaseFactory || (ɵNbFooterRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFooterRowComponent)))(t || NbFooterRowComponent);\n    };\n  }();\n\n  NbFooterRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbFooterRowComponent,\n    selectors: [[\"nb-footer-row\"], [\"tr\", \"nbFooterRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-footer-row\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkFooterRow,\n      useExisting: NbFooterRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbFooterRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbFooterRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/** Data row template container that contains the cell outlet. Adds the right class and role. */\n\n\nlet NbRowComponent = /*#__PURE__*/(() => {\n  class NbRowComponent extends CdkRow {}\n\n  NbRowComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbRowComponent_BaseFactory;\n    return function NbRowComponent_Factory(t) {\n      return (ɵNbRowComponent_BaseFactory || (ɵNbRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbRowComponent)))(t || NbRowComponent);\n    };\n  }();\n\n  NbRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRowComponent,\n    selectors: [[\"nb-row\"], [\"tr\", \"nbRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-row\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: CdkRow,\n      useExisting: NbRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst NbCdkRowDef = CdkRowDef;\nconst NbCdkRow = CdkRow;\nconst NbCdkCellDef = CdkCellDef;\nconst NbCdkHeaderRowDef = CdkHeaderRowDef;\nconst NbCdkHeaderRow = CdkHeaderRow;\nconst NbCdkHeaderCellDef = CdkHeaderCellDef;\nconst NbCdkFooterRowDef = CdkFooterRowDef;\nconst NbCdkFooterRow = CdkFooterRow;\nconst NbCdkFooterCellDef = CdkFooterCellDef;\nconst NbCdkColumnDef = CdkColumnDef;\nconst NbCdkCell = CdkCell;\nconst NbCdkHeaderCell = CdkHeaderCell;\nconst NbCdkFooterCell = CdkFooterCell;\nconst NB_STICKY_POSITIONING_LISTENER = STICKY_POSITIONING_LISTENER;\nconst NB_TABLE_TEMPLATE = `\n  <ng-container nbHeaderRowOutlet></ng-container>\n  <ng-container nbRowOutlet></ng-container>\n  <ng-container nbNoDataRowOutlet></ng-container>\n  <ng-container nbFooterRowOutlet></ng-container>\n`;\nconst NB_VIEW_REPEATER_STRATEGY = _VIEW_REPEATER_STRATEGY;\nconst NB_COALESCED_STYLE_SCHEDULER = _COALESCED_STYLE_SCHEDULER;\nconst NB_TABLE_PROVIDERS = [{\n  provide: NB_VIEW_REPEATER_STRATEGY,\n  useClass: _DisposeViewRepeaterStrategy\n}, {\n  provide: NB_COALESCED_STYLE_SCHEDULER,\n  useClass: _CoalescedStyleScheduler\n}]; // tslint:disable-next-line:component-class-suffix\n\nlet NbTable = /*#__PURE__*/(() => {\n  class NbTable extends CdkTable {\n    constructor(differs, changeDetectorRef, elementRef, role, dir, document, platform, _viewRepeater, _coalescedStyleScheduler, _viewportRuler, _stickyPositioningListener) {\n      super(differs, changeDetectorRef, elementRef, role, dir, document, platform, _viewRepeater, _coalescedStyleScheduler, _viewportRuler, _stickyPositioningListener);\n      this._viewRepeater = _viewRepeater;\n      this._coalescedStyleScheduler = _coalescedStyleScheduler;\n      this._stickyPositioningListener = _stickyPositioningListener;\n    }\n\n  }\n\n  NbTable.ɵfac = function NbTable_Factory(t) {\n    return new (t || NbTable)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinjectAttribute('role'), ɵngcc0.ɵɵdirectiveInject(NbDirectionality), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPlatform), ɵngcc0.ɵɵdirectiveInject(_VIEW_REPEATER_STRATEGY), ɵngcc0.ɵɵdirectiveInject(_COALESCED_STYLE_SCHEDULER), ɵngcc0.ɵɵdirectiveInject(NbViewportRulerAdapter), ɵngcc0.ɵɵdirectiveInject(NB_STICKY_POSITIONING_LISTENER, 12));\n  };\n\n  NbTable.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTable,\n    selectors: [[\"nb-table-not-implemented\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature(NB_TABLE_PROVIDERS), ɵngcc0.ɵɵInheritDefinitionFeature],\n    decls: 0,\n    vars: 0,\n    template: function NbTable_Template(rf, ctx) {},\n    encapsulation: 2\n  });\n  return NbTable;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst COMPONENTS$1 = [NbTable, // Template defs\nNbHeaderCellDefDirective, NbHeaderRowDefDirective, NbColumnDefDirective, NbCellDefDirective, NbRowDefDirective, NbFooterCellDefDirective, NbFooterRowDefDirective, // Outlets\nNbDataRowOutletDirective, NbHeaderRowOutletDirective, NbFooterRowOutletDirective, NbNoDataRowOutletDirective, NbCellOutletDirective, // Cell directives\nNbHeaderCellDirective, NbCellDirective, NbFooterCellDirective, // Row directives\nNbHeaderRowComponent, NbRowComponent, NbFooterRowComponent];\nlet NbTableModule = /*#__PURE__*/(() => {\n  class NbTableModule extends CdkTableModule {}\n\n  NbTableModule.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTableModule_BaseFactory;\n    return function NbTableModule_Factory(t) {\n      return (ɵNbTableModule_BaseFactory || (ɵNbTableModule_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTableModule)))(t || NbTableModule);\n    };\n  }();\n\n  NbTableModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTableModule\n  });\n  NbTableModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbBidiModule]]\n  });\n  return NbTableModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTableModule, {\n    declarations: [NbTable, NbHeaderCellDefDirective, NbHeaderRowDefDirective, NbColumnDefDirective, NbCellDefDirective, NbRowDefDirective, NbFooterCellDefDirective, NbFooterRowDefDirective, NbDataRowOutletDirective, NbHeaderRowOutletDirective, NbFooterRowOutletDirective, NbNoDataRowOutletDirective, NbCellOutletDirective, NbHeaderCellDirective, NbCellDirective, NbFooterCellDirective, NbHeaderRowComponent, NbRowComponent, NbFooterRowComponent],\n    imports: [NbBidiModule],\n    exports: [NbTable, NbHeaderCellDefDirective, NbHeaderRowDefDirective, NbColumnDefDirective, NbCellDefDirective, NbRowDefDirective, NbFooterCellDefDirective, NbFooterRowDefDirective, NbDataRowOutletDirective, NbHeaderRowOutletDirective, NbFooterRowOutletDirective, NbNoDataRowOutletDirective, NbCellOutletDirective, NbHeaderCellDirective, NbCellDirective, NbFooterCellDirective, NbHeaderRowComponent, NbRowComponent, NbFooterRowComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_DIALOG_CONFIG = new InjectionToken('Default dialog options');\n/**\n * Describes all available options that may be passed to the NbDialogService.\n * */\n\nclass NbDialogConfig {\n  constructor(config) {\n    /**\n     * If true than overlay will render backdrop under a dialog.\n     * */\n    this.hasBackdrop = true;\n    /**\n     * Class that'll be assigned to the backdrop element.\n     * */\n\n    this.backdropClass = 'overlay-backdrop';\n    /**\n     * Class that'll be assigned to the dialog overlay.\n     * */\n\n    this.dialogClass = '';\n    /**\n     * If true then mouse clicks by backdrop will close a dialog.\n     * */\n\n    this.closeOnBackdropClick = true;\n    /**\n     * If true then escape press will close a dialog.\n     * */\n\n    this.closeOnEsc = true;\n    /**\n     * Disables scroll on content under dialog if true and does nothing otherwise.\n     * */\n\n    this.hasScroll = false;\n    /**\n     * Focuses dialog automatically after open if true.\n     * */\n\n    this.autoFocus = true;\n    Object.assign(this, config);\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbDialogRef` helps to manipulate dialog after it was created.\n * The dialog can be dismissed by using `close` method of the dialogRef.\n * You can access rendered component as `content` property of the dialogRef.\n * `onBackdropClick` streams click events on the backdrop of the dialog.\n * */\n\n\nclass NbDialogRef {\n  constructor(overlayRef) {\n    this.overlayRef = overlayRef;\n    this.onClose$ = new Subject();\n    this.onClose = this.onClose$.asObservable();\n    this.onBackdropClick = this.overlayRef.backdropClick();\n  }\n  /**\n   * Hides dialog.\n   * */\n\n\n  close(res) {\n    this.overlayRef.detach();\n    this.overlayRef.dispose();\n    this.onClose$.next(res);\n    this.onClose$.complete();\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Container component for each dialog.\n * All the dialogs will be attached to it.\n * // TODO add animations\n * */\n\n\nlet NbDialogContainerComponent = /*#__PURE__*/(() => {\n  class NbDialogContainerComponent {\n    constructor(config, elementRef, focusTrapFactory) {\n      this.config = config;\n      this.elementRef = elementRef;\n      this.focusTrapFactory = focusTrapFactory;\n    }\n\n    ngOnInit() {\n      if (this.config.autoFocus) {\n        this.focusTrap = this.focusTrapFactory.create(this.elementRef.nativeElement);\n        this.focusTrap.blurPreviouslyFocusedElement();\n        this.focusTrap.focusInitialElement();\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.config.autoFocus && this.focusTrap) {\n        this.focusTrap.restoreFocus();\n      }\n    }\n\n    attachComponentPortal(portal) {\n      return this.portalOutlet.attachComponentPortal(portal);\n    }\n\n    attachTemplatePortal(portal) {\n      return this.portalOutlet.attachTemplatePortal(portal);\n    }\n\n  }\n\n  NbDialogContainerComponent.ɵfac = function NbDialogContainerComponent_Factory(t) {\n    return new (t || NbDialogContainerComponent)(ɵngcc0.ɵɵdirectiveInject(NbDialogConfig), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbFocusTrapFactoryService));\n  };\n\n  NbDialogContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbDialogContainerComponent,\n    selectors: [[\"nb-dialog-container\"]],\n    viewQuery: function NbDialogContainerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalOutletDirective, 7);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portalOutlet = _t.first);\n      }\n    },\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbPortalOutlet\", \"\"]],\n    template: function NbDialogContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbDialogContainerComponent_ng_template_0_Template, 0, 0, \"ng-template\", 0);\n      }\n    },\n    directives: [NbPortalOutletDirective],\n    encapsulation: 2\n  });\n  return NbDialogContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbDialogService` helps to open dialogs.\n *\n * @stacked-example(Showcase, dialog/dialog-showcase.component)\n *\n * A new dialog is opened by calling the `open` method with a component to be loaded and an optional configuration.\n * `open` method will return `NbDialogRef` that can be used for the further manipulations.\n *\n * ### Installation\n *\n * Import `NbDialogModule.forRoot()` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbDialogModule.forRoot(config),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * If you are using it in a lazy loaded module than you have to install it with `NbDialogModule.forChild()`:\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbDialogModule.forChild(config),\n *   ],\n * })\n * export class LazyLoadedModule { }\n * ```\n *\n * ### Usage\n *\n * ```ts\n * const dialogRef = this.dialogService.open(MyDialogComponent, { ... });\n * ```\n *\n * `NbDialogRef` gives capability access reference to the rendered dialog component,\n * destroy dialog and some other options described below.\n *\n * Also, you can inject `NbDialogRef` in dialog component.\n *\n * ```ts\n * this.dialogService.open(MyDialogComponent, { ... });\n *\n * // my-dialog.component.ts\n * constructor(protected dialogRef: NbDialogRef) {\n * }\n *\n * close() {\n *   this.dialogRef.close();\n * }\n * ```\n *\n * Instead of component you can create dialog from TemplateRef:\n *\n * @stacked-example(Template ref, dialog/dialog-template.component)\n *\n * The dialog may return result through `NbDialogRef`. Calling component can receive this result with `onClose`\n * stream of `NbDialogRef`.\n *\n * @stacked-example(Result, dialog/dialog-result.component)\n *\n * ### Configuration\n *\n * As we mentioned above, `open` method of the `NbDialogService` may receive optional configuration options.\n * Also, you can provide global dialogs configuration through `NbDialogModule.forRoot({ ... })`.\n *\n * This config may contain the following:\n *\n * `context` - both, template and component may receive data through `config.context` property.\n * For components, this data will be assigned through inputs.\n * For templates, you can access it inside template as $implicit.\n *\n * ```ts\n * this.dialogService.open(template, { context: 'pass data in template' });\n * ```\n *\n * ```html\n * <ng-template let-some-additional-data>\n *   {{ some-additional-data }}\n * <ng-template/>\n * ```\n *\n * `hasBackdrop` - determines is service have to render backdrop under the dialog.\n * Default is true.\n * @stacked-example(Backdrop, dialog/dialog-has-backdrop.component)\n *\n * `closeOnBackdropClick` - close dialog on backdrop click if true.\n * Default is true.\n * @stacked-example(Backdrop click, dialog/dialog-backdrop-click.component)\n *\n * `closeOnEsc` - close dialog on escape button on the keyboard.\n * Default is true.\n * @stacked-example(Escape hit, dialog/dialog-esc.component)\n *\n * `hasScroll` - Disables scroll on content under dialog if true and does nothing otherwise.\n * Default is false.\n * Please, open dialogs in the separate window and try to scroll.\n * @stacked-example(Scroll, dialog/dialog-scroll.component)\n *\n * `autoFocus` - Focuses dialog automatically after open if true. It's useful to prevent misclicks on\n * trigger elements and opening multiple dialogs.\n * Default is true.\n *\n * As you can see, if you open dialog with auto focus dialog will focus first focusable element\n * or just blur previously focused automatically.\n * Otherwise, without auto focus, the focus will stay on the previously focused element.\n * Please, open dialogs in the separate window and try to click on the button without focus\n * and then hit space any times. Multiple same dialogs will be opened.\n * @stacked-example(Auto focus, dialog/dialog-auto-focus.component)\n * */\n\n\nlet NbDialogService = /*#__PURE__*/(() => {\n  class NbDialogService {\n    constructor(document, globalConfig, positionBuilder, overlay, injector, cfr) {\n      this.document = document;\n      this.globalConfig = globalConfig;\n      this.positionBuilder = positionBuilder;\n      this.overlay = overlay;\n      this.injector = injector;\n      this.cfr = cfr;\n    }\n    /**\n     * Opens new instance of the dialog, may receive optional config.\n     * */\n\n\n    open(content, userConfig = {}) {\n      const config = new NbDialogConfig(Object.assign(Object.assign({}, this.globalConfig), userConfig));\n      const overlayRef = this.createOverlay(config);\n      const dialogRef = new NbDialogRef(overlayRef);\n      const container = this.createContainer(config, overlayRef);\n      this.createContent(config, content, container, dialogRef);\n      this.registerCloseListeners(config, overlayRef, dialogRef);\n      return dialogRef;\n    }\n\n    createOverlay(config) {\n      const positionStrategy = this.createPositionStrategy();\n      const scrollStrategy = this.createScrollStrategy(config.hasScroll);\n      return this.overlay.create({\n        positionStrategy,\n        scrollStrategy,\n        hasBackdrop: config.hasBackdrop,\n        backdropClass: config.backdropClass,\n        panelClass: config.dialogClass\n      });\n    }\n\n    createPositionStrategy() {\n      return this.positionBuilder.global().centerVertically().centerHorizontally();\n    }\n\n    createScrollStrategy(hasScroll) {\n      if (hasScroll) {\n        return this.overlay.scrollStrategies.noop();\n      } else {\n        return this.overlay.scrollStrategies.block();\n      }\n    }\n\n    createContainer(config, overlayRef) {\n      const injector = new NbPortalInjector(this.createInjector(config), new WeakMap([[NbDialogConfig, config]]));\n      const containerPortal = new NbComponentPortal(NbDialogContainerComponent, null, injector, this.cfr);\n      const containerRef = overlayRef.attach(containerPortal);\n      return containerRef.instance;\n    }\n\n    createContent(config, content, container, dialogRef) {\n      if (content instanceof TemplateRef) {\n        const portal = this.createTemplatePortal(config, content, dialogRef);\n        container.attachTemplatePortal(portal);\n      } else {\n        const portal = this.createComponentPortal(config, content, dialogRef);\n        dialogRef.componentRef = container.attachComponentPortal(portal);\n\n        if (config.context) {\n          Object.assign(dialogRef.componentRef.instance, Object.assign({}, config.context));\n        }\n      }\n    }\n\n    createTemplatePortal(config, content, dialogRef) {\n      return new NbTemplatePortal(content, null, {\n        $implicit: config.context,\n        dialogRef\n      });\n    }\n    /**\n     * We're creating portal with custom injector provided through config or using global injector.\n     * This approach provides us capability inject `NbDialogRef` in dialog component.\n     * */\n\n\n    createComponentPortal(config, content, dialogRef) {\n      const injector = this.createInjector(config);\n      const portalInjector = new NbPortalInjector(injector, new WeakMap([[NbDialogRef, dialogRef]]));\n      return new NbComponentPortal(content, config.viewContainerRef, portalInjector);\n    }\n\n    createInjector(config) {\n      return config.viewContainerRef && config.viewContainerRef.injector || this.injector;\n    }\n\n    registerCloseListeners(config, overlayRef, dialogRef) {\n      if (config.closeOnBackdropClick) {\n        overlayRef.backdropClick().subscribe(() => dialogRef.close());\n      }\n\n      if (config.closeOnEsc) {\n        fromEvent(this.document, 'keyup').pipe(filter(event => event.keyCode === 27), takeUntil(dialogRef.onClose)).subscribe(() => dialogRef.close());\n      }\n    }\n\n  }\n\n  NbDialogService.ɵfac = function NbDialogService_Factory(t) {\n    return new (t || NbDialogService)(ɵngcc0.ɵɵinject(NB_DOCUMENT), ɵngcc0.ɵɵinject(NB_DIALOG_CONFIG), ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(ɵngcc0.Injector), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver));\n  };\n\n  NbDialogService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDialogService,\n    factory: NbDialogService.ɵfac\n  });\n  return NbDialogService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbDialogModule = /*#__PURE__*/(() => {\n  class NbDialogModule {\n    static forRoot(dialogConfig = {}) {\n      return {\n        ngModule: NbDialogModule,\n        providers: [NbDialogService, {\n          provide: NB_DIALOG_CONFIG,\n          useValue: dialogConfig\n        }]\n      };\n    }\n\n    static forChild(dialogConfig = {}) {\n      return {\n        ngModule: NbDialogModule,\n        providers: [NbDialogService, {\n          provide: NB_DIALOG_CONFIG,\n          useValue: dialogConfig\n        }]\n      };\n    }\n\n  }\n\n  NbDialogModule.ɵfac = function NbDialogModule_Factory(t) {\n    return new (t || NbDialogModule)();\n  };\n\n  NbDialogModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbDialogModule\n  });\n  NbDialogModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbOverlayModule]]\n  });\n  return NbDialogModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbDialogModule, {\n    declarations: [NbDialogContainerComponent],\n    imports: [NbSharedModule, NbOverlayModule]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbToastComponent` is responsible for rendering each toast with appropriate styles.\n *\n * @styles\n *\n * toastr-border-style:\n * toastr-border-width:\n * toastr-border-radius:\n * toastr-padding:\n * toastr-shadow:\n * toastr-text-font-family:\n * toastr-text-font-size:\n * toastr-text-font-weight:\n * toastr-text-line-height:\n * toastr-title-text-font-family:\n * toastr-title-text-font-size:\n * toastr-title-text-font-weight:\n * toastr-title-text-line-height:\n * toastr-basic-background-color:\n * toastr-basic-border-color:\n * toastr-basic-text-color:\n * toastr-icon-basic-background-color:\n * toastr-icon-basic-color:\n * toastr-destroyable-basic-hover-background-color:\n * toastr-destroyable-basic-hover-border-color:\n * toastr-primary-background-color:\n * toastr-primary-border-color:\n * toastr-primary-text-color:\n * toastr-icon-primary-background-color:\n * toastr-icon-primary-color:\n * toastr-destroyable-primary-hover-background-color:\n * toastr-destroyable-primary-hover-border-color:\n * toastr-success-background-color:\n * toastr-success-border-color:\n * toastr-success-text-color:\n * toastr-icon-success-background-color:\n * toastr-icon-success-color:\n * toastr-destroyable-success-hover-background-color:\n * toastr-destroyable-success-hover-border-color:\n * toastr-info-background-color:\n * toastr-info-border-color:\n * toastr-info-text-color:\n * toastr-icon-info-background-color:\n * toastr-icon-info-color:\n * toastr-destroyable-info-hover-background-color:\n * toastr-destroyable-info-hover-border-color:\n * toastr-warning-background-color:\n * toastr-warning-border-color:\n * toastr-warning-text-color:\n * toastr-icon-warning-background-color:\n * toastr-icon-warning-color:\n * toastr-destroyable-warning-hover-background-color:\n * toastr-destroyable-warning-hover-border-color:\n * toastr-danger-background-color:\n * toastr-danger-border-color:\n * toastr-danger-text-color:\n * toastr-icon-danger-background-color:\n * toastr-icon-danger-color:\n * toastr-destroyable-danger-hover-background-color:\n * toastr-destroyable-danger-hover-border-color:\n * toastr-control-background-color:\n * toastr-control-border-color:\n * toastr-control-text-color:\n * toastr-icon-control-background-color:\n * toastr-icon-control-color:\n * toastr-destroyable-control-hover-background-color:\n * toastr-destroyable-control-hover-border-color:\n * */\n\n\nlet NbToastComponent = /*#__PURE__*/(() => {\n  class NbToastComponent {\n    constructor(renderer, elementRef, statusService) {\n      this.renderer = renderer;\n      this.elementRef = elementRef;\n      this.statusService = statusService;\n      this.destroy = new EventEmitter();\n    }\n\n    get success() {\n      return this.toast.config.status === 'success';\n    }\n\n    get info() {\n      return this.toast.config.status === 'info';\n    }\n\n    get warning() {\n      return this.toast.config.status === 'warning';\n    }\n\n    get primary() {\n      return this.toast.config.status === 'primary';\n    }\n\n    get danger() {\n      return this.toast.config.status === 'danger';\n    }\n\n    get basic() {\n      return this.toast.config.status === 'basic';\n    }\n\n    get control() {\n      return this.toast.config.status === 'control';\n    }\n\n    get destroyByClick() {\n      return this.toast.config.destroyByClick;\n    }\n\n    get hasIcon() {\n      const {\n        icon\n      } = this.toast.config;\n\n      if (typeof icon === 'string') {\n        return true;\n      }\n\n      return !!(icon && icon.icon);\n    }\n\n    get customIcon() {\n      return !!this.icon;\n    }\n\n    get icon() {\n      return this.toast.config.icon;\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.toast.config.status)) {\n        return [this.statusService.getStatusClass(this.toast.config.status)];\n      }\n\n      return [];\n    }\n\n    onClick() {\n      this.destroy.emit();\n    }\n\n    ngOnInit() {\n      if (this.toast.config.toastClass) {\n        this.renderer.addClass(this.elementRef.nativeElement, this.toast.config.toastClass);\n      }\n    }\n\n  }\n\n  NbToastComponent.ɵfac = function NbToastComponent_Factory(t) {\n    return new (t || NbToastComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbToastComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbToastComponent,\n    selectors: [[\"nb-toast\"]],\n    hostVars: 22,\n    hostBindings: function NbToastComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbToastComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-primary\", ctx.primary)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"destroy-by-click\", ctx.destroyByClick)(\"has-icon\", ctx.hasIcon)(\"custom-icon\", ctx.customIcon);\n      }\n    },\n    inputs: {\n      toast: \"toast\"\n    },\n    outputs: {\n      destroy: \"destroy\"\n    },\n    decls: 6,\n    vars: 3,\n    consts: [[\"class\", \"icon-container\", 4, \"ngIf\"], [1, \"content-container\"], [1, \"title\", \"subtitle\"], [1, \"message\"], [1, \"icon-container\"], [3, \"config\"]],\n    template: function NbToastComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbToastComponent_div_0_Template, 2, 1, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵelementStart(2, \"span\", 2);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", 3);\n        ɵngcc0.ɵɵtext(5);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.hasIcon && ctx.icon);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.toast.title);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.toast.message);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center;width:25rem;margin:0.5rem}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:0.25rem}.default[_nghost-%COMP%]   .content-container[_ngcontent-%COMP%], [_nghost-%COMP%]:not(.has-icon)   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:row}.destroy-by-click[_nghost-%COMP%]{cursor:pointer}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{font-size:2.5rem}[_nghost-%COMP%]   svg[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem}\"]\n  });\n  return NbToastComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst voidState = style({\n  transform: 'translateX({{ direction }}110%)',\n  height: 0,\n  marginLeft: '0',\n  marginRight: '0',\n  marginTop: '0',\n  marginBottom: '0'\n});\nconst defaultOptions = {\n  params: {\n    direction: ''\n  }\n};\nlet NbToastrContainerComponent = /*#__PURE__*/(() => {\n  class NbToastrContainerComponent {\n    constructor(layoutDirection, positionHelper) {\n      this.layoutDirection = layoutDirection;\n      this.positionHelper = positionHelper;\n      this.destroy$ = new Subject();\n      this.content = [];\n    }\n\n    ngOnInit() {\n      this.layoutDirection.onDirectionChange().pipe(takeUntil(this.destroy$)).subscribe(() => this.onDirectionChange());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    onDirectionChange() {\n      const direction = this.positionHelper.isRightPosition(this.position) ? '' : '-';\n      this.fadeIn = {\n        value: '',\n        params: {\n          direction\n        }\n      };\n    }\n\n  }\n\n  NbToastrContainerComponent.ɵfac = function NbToastrContainerComponent_Factory(t) {\n    return new (t || NbToastrContainerComponent)(ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbPositionHelper));\n  };\n\n  NbToastrContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbToastrContainerComponent,\n    selectors: [[\"nb-toastr-container\"]],\n    viewQuery: function NbToastrContainerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbToastComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.toasts = _t);\n      }\n    },\n    inputs: {\n      content: \"content\",\n      context: \"context\",\n      position: \"position\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[3, \"toast\", 4, \"ngFor\", \"ngForOf\"], [3, \"toast\"]],\n    template: function NbToastrContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbToastrContainerComponent_nb_toast_0_Template, 1, 2, \"nb-toast\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngForOf\", ctx.content);\n      }\n    },\n    directives: [ɵngcc2.NgForOf, NbToastComponent],\n    encapsulation: 2,\n    data: {\n      animation: [trigger('fadeIn', [transition(':enter', [voidState, animate(100)], defaultOptions), transition(':leave', [animate(100, voidState)], defaultOptions)])]\n    }\n  });\n  return NbToastrContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_TOASTR_CONFIG = new InjectionToken('Default toastr options');\n/**\n * The `NbToastrConfig` class describes configuration of the `NbToastrService.show` and global toastr configuration.\n * */\n\nclass NbToastrConfig {\n  constructor(config) {\n    /**\n     * Determines where on the screen toast have to be rendered.\n     * */\n    this.position = NbGlobalLogicalPosition.TOP_END;\n    /**\n     * Status chooses color scheme for the toast.\n     * */\n\n    this.status = 'basic';\n    /**\n     * Duration is timeout between toast appears and disappears.\n     * */\n\n    this.duration = 3000;\n    /**\n     * Destroy by click means you can hide the toast by clicking it.\n     * */\n\n    this.destroyByClick = true;\n    /**\n     * If preventDuplicates is true then the toast with the same title, message and status will not be rendered.\n     * Find duplicates behaviour determined by `preventDuplicates`.\n     * The default `previous` duplicate behaviour is used.\n     * */\n\n    this.preventDuplicates = false;\n    /**\n     * Determines the how to treat duplicates.\n     * */\n\n    this.duplicatesBehaviour = 'previous';\n    /*\n    * The number of visible toasts. If the limit exceeded the oldest toast will be removed.\n    * */\n\n    this.limit = null;\n    /**\n     * Class to be applied to the toast.\n     */\n\n    this.toastClass = '';\n    /**\n     * Determines render icon or not.\n     * */\n\n    this.hasIcon = true;\n    /**\n     * Icon name or icon config object that can be provided to render custom icon.\n     * */\n\n    this.icon = 'email';\n    /**\n     * Toast status icon-class mapping.\n     * */\n\n    this.icons = {\n      danger: 'flash-outline',\n      success: 'checkmark-outline',\n      info: 'question-mark-outline',\n      warning: 'alert-triangle-outline',\n      primary: 'email-outline',\n      control: 'email-outline',\n      basic: 'email-outline'\n    };\n    this.patchIcon(config);\n    Object.assign(this, config);\n  }\n\n  patchIcon(config) {\n    if (!('icon' in config)) {\n      config.icon = {\n        icon: this.icons[config.status] || this.icons.basic,\n        pack: 'nebular-essentials'\n      };\n    }\n  }\n\n}\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbToastRef {\n  constructor(toastContainer, toast) {\n    this.toastContainer = toastContainer;\n    this.toast = toast;\n  }\n\n  close() {\n    this.toastContainer.destroy(this.toast);\n  }\n\n}\n\nclass NbToastContainer {\n  constructor(position, containerRef, positionHelper) {\n    this.position = position;\n    this.containerRef = containerRef;\n    this.positionHelper = positionHelper;\n    this.toasts = [];\n\n    this.toastDuplicateCompareFunc = (t1, t2) => {\n      return t1.message === t2.message && t1.title === t2.title && t1.config.status === t2.config.status;\n    };\n  }\n\n  get nativeElement() {\n    return this.containerRef.location.nativeElement;\n  }\n\n  attach(toast) {\n    if (toast.config.preventDuplicates && this.isDuplicate(toast)) {\n      return;\n    }\n\n    this.removeToastIfLimitReached(toast);\n    const toastComponent = this.attachToast(toast);\n\n    if (toast.config.destroyByClick) {\n      this.subscribeOnClick(toastComponent, toast);\n    }\n\n    if (toast.config.duration) {\n      this.setDestroyTimeout(toast);\n    }\n\n    this.prevToast = toast;\n    return new NbToastRef(this, toast);\n  }\n\n  destroy(toast) {\n    if (this.prevToast === toast) {\n      this.prevToast = null;\n    }\n\n    this.toasts = this.toasts.filter(t => t !== toast);\n    this.updateContainer();\n  }\n\n  isDuplicate(toast) {\n    return toast.config.duplicatesBehaviour === 'previous' ? this.isDuplicatePrevious(toast) : this.isDuplicateAmongAll(toast);\n  }\n\n  isDuplicatePrevious(toast) {\n    return this.prevToast && this.toastDuplicateCompareFunc(this.prevToast, toast);\n  }\n\n  isDuplicateAmongAll(toast) {\n    return this.toasts.some(t => this.toastDuplicateCompareFunc(t, toast));\n  }\n\n  removeToastIfLimitReached(toast) {\n    if (!toast.config.limit || this.toasts.length < toast.config.limit) {\n      return;\n    }\n\n    if (this.positionHelper.isTopPosition(toast.config.position)) {\n      this.toasts.pop();\n    } else {\n      this.toasts.shift();\n    }\n  }\n\n  attachToast(toast) {\n    if (this.positionHelper.isTopPosition(toast.config.position)) {\n      return this.attachToTop(toast);\n    } else {\n      return this.attachToBottom(toast);\n    }\n  }\n\n  attachToTop(toast) {\n    this.toasts.unshift(toast);\n    this.updateContainer();\n    return this.containerRef.instance.toasts.first;\n  }\n\n  attachToBottom(toast) {\n    this.toasts.push(toast);\n    this.updateContainer();\n    return this.containerRef.instance.toasts.last;\n  }\n\n  setDestroyTimeout(toast) {\n    setTimeout(() => this.destroy(toast), toast.config.duration);\n  }\n\n  subscribeOnClick(toastComponent, toast) {\n    toastComponent.destroy.subscribe(() => this.destroy(toast));\n  }\n\n  updateContainer() {\n    patch(this.containerRef, {\n      content: this.toasts,\n      position: this.position\n    });\n  }\n\n}\n\nlet NbToastrContainerRegistry = /*#__PURE__*/(() => {\n  class NbToastrContainerRegistry {\n    constructor(overlay, positionBuilder, positionHelper, cfr, document) {\n      this.overlay = overlay;\n      this.positionBuilder = positionBuilder;\n      this.positionHelper = positionHelper;\n      this.cfr = cfr;\n      this.document = document;\n      this.overlays = new Map();\n    }\n\n    get(position) {\n      const logicalPosition = this.positionHelper.toLogicalPosition(position);\n      const overlayWithContainer = this.overlays.get(logicalPosition);\n\n      if (!overlayWithContainer || !this.existsInDom(overlayWithContainer.toastrContainer)) {\n        if (overlayWithContainer) {\n          overlayWithContainer.overlayRef.dispose();\n        }\n\n        this.instantiateContainer(logicalPosition);\n      }\n\n      return this.overlays.get(logicalPosition).toastrContainer;\n    }\n\n    instantiateContainer(position) {\n      const toastrOverlayWithContainer = this.createContainer(position);\n      this.overlays.set(position, toastrOverlayWithContainer);\n    }\n\n    createContainer(position) {\n      const positionStrategy = this.positionBuilder.global().position(position);\n      const ref = this.overlay.create({\n        positionStrategy\n      });\n      this.addClassToOverlayHost(ref);\n      const containerRef = ref.attach(new NbComponentPortal(NbToastrContainerComponent, null, null, this.cfr));\n      return {\n        overlayRef: ref,\n        toastrContainer: new NbToastContainer(position, containerRef, this.positionHelper)\n      };\n    }\n\n    addClassToOverlayHost(overlayRef) {\n      overlayRef.hostElement.classList.add('toastr-overlay-container');\n    }\n\n    existsInDom(toastContainer) {\n      return this.document.body.contains(toastContainer.nativeElement);\n    }\n\n  }\n\n  NbToastrContainerRegistry.ɵfac = function NbToastrContainerRegistry_Factory(t) {\n    return new (t || NbToastrContainerRegistry)(ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(NbPositionBuilderService), ɵngcc0.ɵɵinject(NbPositionHelper), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbToastrContainerRegistry.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbToastrContainerRegistry,\n    factory: NbToastrContainerRegistry.ɵfac\n  });\n  return NbToastrContainerRegistry;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * The `NbToastrService` provides a capability to build toast notifications.\n *\n * @stacked-example(Showcase, toastr/toastr-showcase.component)\n *\n * `NbToastrService.show(message, title, config)` accepts three params, title and config are optional.\n *\n * ### Installation\n *\n * Import `NbToastrModule.forRoot()` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbToastrModule.forRoot(config),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * ### Usage\n *\n * Calling `NbToastrService.show(...)` will render new toast and return `NbToastrRef` with\n * help of which you may close newly created toast by calling `close` method.\n *\n * ```ts\n * const toastRef: NbToastRef = this.toastrService.show(...);\n * toastRef.close();\n * ```\n *\n * Config accepts following options:\n *\n * `position` - determines where on the screen toast will be rendered.\n * Default is `top-end`.\n *\n * @stacked-example(Position, toastr/toastr-positions.component)\n *\n * `status` - coloring and icon of the toast.\n * Default is `basic`.\n *\n * @stacked-example(Status, toastr/toastr-statuses.component)\n *\n * `duration` - the time after which the toast will be destroyed.\n * `0` means endless toast, that may be destroyed by click only.\n * Default is 3000 ms.\n *\n * @stacked-example(Duration, toastr/toastr-duration.component)\n *\n * `destroyByClick` - provides a capability to destroy toast by click.\n * Default is true.\n *\n * @stacked-example(Destroy by click, toastr/toastr-destroy-by-click.component)\n *\n * `preventDuplicates` - don't create new toast if it has the same title, message and status.\n * Default is false.\n *\n * @stacked-example(Prevent duplicates, toastr/toastr-prevent-duplicates.component)\n *\n * `duplicatesBehaviour` - determines how to treat the toasts duplication.\n * Compare with the previous message `previous`\n * or with all visible messages `all`.\n *\n * @stacked-example(Prevent duplicates behaviour , toastr/toastr-prevent-duplicates-behaviour.component)\n *\n * `limit` - the number of visible toasts in the toast container. The number of toasts is unlimited by default.\n *\n * @stacked-example(Prevent duplicates behaviour , toastr/toastr-limit.component)\n *\n * `hasIcon` - if true then render toast icon.\n * `icon` - you can pass icon class that will be applied into the toast.\n *\n * @stacked-example(Has icon, toastr/toastr-icon.component)\n * */\n\n\nlet NbToastrService = /*#__PURE__*/(() => {\n  class NbToastrService {\n    constructor(globalConfig, containerRegistry) {\n      this.globalConfig = globalConfig;\n      this.containerRegistry = containerRegistry;\n    }\n    /**\n     * Shows toast with message, title and user config.\n     * */\n\n\n    show(message, title, userConfig) {\n      const config = new NbToastrConfig(Object.assign(Object.assign({}, this.globalConfig), userConfig));\n      const container = this.containerRegistry.get(config.position);\n      const toast = {\n        message,\n        title,\n        config\n      };\n      return container.attach(toast);\n    }\n    /**\n     * Shows success toast with message, title and user config.\n     * */\n\n\n    success(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'success'\n      }));\n    }\n    /**\n     * Shows info toast with message, title and user config.\n     * */\n\n\n    info(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'info'\n      }));\n    }\n    /**\n     * Shows warning toast with message, title and user config.\n     * */\n\n\n    warning(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'warning'\n      }));\n    }\n    /**\n     * Shows primary toast with message, title and user config.\n     * */\n\n\n    primary(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'primary'\n      }));\n    }\n    /**\n     * Shows danger toast with message, title and user config.\n     * */\n\n\n    danger(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'danger'\n      }));\n    }\n    /**\n     * Shows default toast with message, title and user config.\n     * */\n\n\n    default(message, title, config) {\n      return this.show(message, title, Object.assign(Object.assign({}, config), {\n        status: 'basic'\n      }));\n    }\n    /**\n     * Shows control toast with message, title and user config.\n     * */\n\n\n    control(message, title, config) {\n      return this.default(message, title, Object.assign(Object.assign({}, config), {\n        status: 'control'\n      }));\n    }\n\n  }\n\n  NbToastrService.ɵfac = function NbToastrService_Factory(t) {\n    return new (t || NbToastrService)(ɵngcc0.ɵɵinject(NB_TOASTR_CONFIG), ɵngcc0.ɵɵinject(NbToastrContainerRegistry));\n  };\n\n  NbToastrService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbToastrService,\n    factory: NbToastrService.ɵfac\n  });\n  return NbToastrService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbToastrModule = /*#__PURE__*/(() => {\n  class NbToastrModule {\n    static forRoot(toastrConfig = {}) {\n      return {\n        ngModule: NbToastrModule,\n        providers: [NbToastrService, NbToastrContainerRegistry, {\n          provide: NB_TOASTR_CONFIG,\n          useValue: toastrConfig\n        }]\n      };\n    }\n\n  }\n\n  NbToastrModule.ɵfac = function NbToastrModule_Factory(t) {\n    return new (t || NbToastrModule)();\n  };\n\n  NbToastrModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbToastrModule\n  });\n  NbToastrModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbOverlayModule, NbIconModule]]\n  });\n  return NbToastrModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbToastrModule, {\n    declarations: [NbToastrContainerComponent, NbToastComponent],\n    imports: [NbSharedModule, NbOverlayModule, NbIconModule]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbToast {}\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Tooltip container.\n * Renders provided tooltip inside.\n *\n * @styles\n *\n * tooltip-background-color:\n * tooltip-border-color:\n * tooltip-border-style:\n * tooltip-border-width:\n * tooltip-border-radius:\n * tooltip-padding:\n * tooltip-text-color:\n * tooltip-text-font-family:\n * tooltip-text-font-size:\n * tooltip-text-font-weight:\n * tooltip-text-line-height:\n * tooltip-icon-height:\n * tooltip-icon-width:\n * tooltip-max-width:\n * tooltip-basic-background-color:\n * tooltip-basic-border-color:\n * tooltip-basic-text-color:\n * tooltip-primary-background-color:\n * tooltip-primary-border-color:\n * tooltip-primary-text-color:\n * tooltip-info-background-color:\n * tooltip-info-border-color:\n * tooltip-info-text-color:\n * tooltip-success-background-color:\n * tooltip-success-border-color:\n * tooltip-success-text-color:\n * tooltip-warning-background-color:\n * tooltip-warning-border-color:\n * tooltip-warning-text-color:\n * tooltip-danger-background-color:\n * tooltip-danger-border-color:\n * tooltip-danger-text-color:\n * tooltip-control-background-color:\n * tooltip-control-border-color:\n * tooltip-control-text-color:\n * tooltip-shadow:\n */\n\n\nlet NbTooltipComponent = /*#__PURE__*/(() => {\n  class NbTooltipComponent {\n    constructor(statusService) {\n      this.statusService = statusService;\n      /**\n       * Popover position relatively host element.\n       * */\n\n      this.position = NbPosition.TOP;\n      this.context = {};\n    }\n\n    get binding() {\n      return `${this.position} ${this.statusClass}`;\n    }\n\n    get show() {\n      return true;\n    }\n\n    get statusClass() {\n      if (this.context.status) {\n        return this.statusService.getStatusClass(this.context.status);\n      }\n\n      return '';\n    }\n    /**\n     * The method is empty since we don't need to do anything additionally\n     * render is handled by change detection\n     */\n\n\n    renderContent() {}\n\n  }\n\n  NbTooltipComponent.ɵfac = function NbTooltipComponent_Factory(t) {\n    return new (t || NbTooltipComponent)(ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbTooltipComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTooltipComponent,\n    selectors: [[\"nb-tooltip\"]],\n    hostVars: 3,\n    hostBindings: function NbTooltipComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵsyntheticHostProperty(\"@showTooltip\", ctx.show);\n        ɵngcc0.ɵɵclassMap(ctx.binding);\n      }\n    },\n    inputs: {\n      position: \"position\",\n      context: \"context\",\n      content: \"content\"\n    },\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"arrow\"], [1, \"content\"], [3, \"config\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"config\"]],\n    template: function NbTooltipComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"span\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(2, NbTooltipComponent_nb_icon_2_Template, 1, 1, \"nb-icon\", 2);\n        ɵngcc0.ɵɵtemplate(3, NbTooltipComponent_span_3_Template, 2, 1, \"span\", 3);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.context == null ? null : ctx.context.icon);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.content);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{z-index:10000}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:flex;align-items:center}.right[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{flex-direction:row-reverse}[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{position:absolute;width:0;height:0}[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-left:0.5rem}.right[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{margin-right:0.5rem}[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{border-left:6px solid transparent;border-right:6px solid transparent}.bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px;left:calc(50% - 6px)}.bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px}[dir=ltr]   .bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}[dir=rtl]   .bottom-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}.bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:-6px}[dir=ltr]   .bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}[dir=rtl]   .bottom-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}.left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - 2.4px)}[dir=ltr]   .left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=ltr]   .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;transform:rotate(90deg)}[dir=rtl]   .left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=rtl]   .start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:-8px;transform:rotate(270deg)}.start-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;bottom:6px;transform:rotate(90deg)}.start-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;top:6px;transform:rotate(90deg)}.top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:-6px;left:calc(50% - 6px);transform:rotate(180deg)}.top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:calc(-1 * 6px + 1px);transform:rotate(180deg)}[dir=ltr]   .top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}[dir=rtl]   .top-start[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}.top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{bottom:calc(-6px + 1px);transform:rotate(180deg)}[dir=ltr]   .top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:6px}[dir=rtl]   .top-end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:6px}.right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{top:calc(50% - 2.4px)}[dir=ltr]   .right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=ltr]   .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:-8px;transform:rotate(270deg)}[dir=rtl]   .right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], [dir=rtl]   .end[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{right:-8px;transform:rotate(90deg)}.end-top[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(-6px - 6px / 2.5);bottom:6px;transform:rotate(270deg)}.end-bottom[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%]{left:calc(-6px - 6px / 2.5);top:6px;transform:rotate(270deg)}\"],\n    data: {\n      animation: [trigger('showTooltip', [state('in', style({\n        opacity: 1\n      })), transition('void => *', [style({\n        opacity: 0\n      }), animate(100)]), transition('* => void', [animate(100, style({\n        opacity: 0\n      }))])])]\n    }\n  });\n  return NbTooltipComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n *\n * Tooltip directive for small text/icon hints.\n *\n * ### Installation\n *\n * Import `NbTooltipModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTooltipModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * @stacked-example(Showcase, tooltip/tooltip-showcase.component)\n *\n * Tooltip can accept a hint text and/or an icon:\n * @stacked-example(With Icon, tooltip/tooltip-with-icon.component)\n *\n * Same way as Popover, tooltip can accept placement position with `nbTooltipPlacement` property:\n * @stacked-example(Placements, tooltip/tooltip-placements.component)\n *\n * It is also possible to specify tooltip color using `nbTooltipStatus` property:\n * @stacked-example(Colored Tooltips, tooltip/tooltip-colors.component)\n *\n * Tooltip has a number of triggers which provides an ability to show and hide the component in different ways:\n *\n * - Click mode shows the component when a user clicks on the host element and hides when the user clicks\n * somewhere on the document outside the component.\n * - Hint provides capability to show the component when the user hovers over the host element\n * and hide when the user hovers out of the host.\n * - Hover works like hint mode with one exception - when the user moves mouse from host element to\n * the container element the component remains open, so that it is possible to interact with it content.\n * - Focus mode is applied when user focuses the element.\n * - Noop mode - the component won't react to the user interaction.\n */\n\n\nlet NbTooltipDirective = /*#__PURE__*/(() => {\n  class NbTooltipDirective {\n    constructor(hostRef, dynamicOverlayHandler) {\n      this.hostRef = hostRef;\n      this.dynamicOverlayHandler = dynamicOverlayHandler;\n      this.destroy$ = new Subject();\n      this.tooltipComponent = NbTooltipComponent;\n      this.context = {};\n      /**\n       * Position will be calculated relatively host element based on the position.\n       * Can be top, right, bottom, left, start or end.\n       */\n\n      this.position = NbPosition.TOP;\n      this._adjustment = NbAdjustment.CLOCKWISE;\n      this._tooltipClass = '';\n      /**\n       * Describes when the container will be shown.\n       * Available options: `click`, `hover`, `hint`, `focus` and `noop`\n       * */\n\n      this.trigger = NbTrigger.HINT;\n      /**\n       * Determines tooltip overlay offset (in pixels).\n       **/\n\n      this.offset = 8;\n      this.nbTooltipShowStateChange = new EventEmitter();\n      this.overlayConfig = {\n        panelClass: this.tooltipClass\n      };\n    }\n    /**\n     * Container position will change automatically based on this strategy if container can't fit view port.\n     * Set this property to `noop` value if you want to disable automatic adjustment.\n     * Available values: `clockwise` (default), `counterclockwise`, `vertical`, `horizontal`, `noop`.\n     */\n\n\n    get adjustment() {\n      return this._adjustment;\n    }\n\n    set adjustment(value) {\n      this._adjustment = value;\n    }\n\n    get tooltipClass() {\n      return this._tooltipClass;\n    }\n\n    set tooltipClass(value) {\n      if (value !== this.tooltipClass) {\n        this._tooltipClass = value;\n        this.overlayConfig = {\n          panelClass: this.tooltipClass\n        };\n      }\n    }\n    /**\n     * Accepts icon name or icon config object\n     * @param {string | NbIconConfig} icon name or config object\n     */\n\n\n    set icon(icon) {\n      this.context = Object.assign(this.context, {\n        icon\n      });\n    }\n    /**\n     *\n     * @param {string} status\n     */\n\n\n    set status(status) {\n      this.context = Object.assign(this.context, {\n        status\n      });\n    }\n\n    get isShown() {\n      return !!(this.dynamicOverlay && this.dynamicOverlay.isAttached);\n    }\n\n    ngOnInit() {\n      this.dynamicOverlayHandler.host(this.hostRef).componentType(this.tooltipComponent).offset(this.offset);\n    }\n\n    ngOnChanges() {\n      this.rebuild();\n    }\n\n    ngAfterViewInit() {\n      this.dynamicOverlay = this.configureDynamicOverlay().build();\n      this.dynamicOverlay.isShown.pipe(skip(1), takeUntil(this.destroy$)).subscribe(isShown => this.nbTooltipShowStateChange.emit({\n        isShown\n      }));\n    }\n\n    rebuild() {\n      this.dynamicOverlay = this.configureDynamicOverlay().rebuild();\n    }\n\n    show() {\n      this.dynamicOverlay.show();\n    }\n\n    hide() {\n      this.dynamicOverlay.hide();\n    }\n\n    toggle() {\n      this.dynamicOverlay.toggle();\n    }\n\n    ngOnDestroy() {\n      this.dynamicOverlayHandler.destroy();\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    configureDynamicOverlay() {\n      return this.dynamicOverlayHandler.position(this.position).trigger(this.trigger).adjustment(this.adjustment).content(this.content).context(this.context).overlayConfig(this.overlayConfig);\n    }\n\n  }\n\n  NbTooltipDirective.ɵfac = function NbTooltipDirective_Factory(t) {\n    return new (t || NbTooltipDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbDynamicOverlayHandler));\n  };\n\n  NbTooltipDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTooltipDirective,\n    selectors: [[\"\", \"nbTooltip\", \"\"]],\n    inputs: {\n      position: [\"nbTooltipPlacement\", \"position\"],\n      trigger: [\"nbTooltipTrigger\", \"trigger\"],\n      offset: [\"nbTooltipOffset\", \"offset\"],\n      adjustment: [\"nbTooltipAdjustment\", \"adjustment\"],\n      tooltipClass: [\"nbTooltipClass\", \"tooltipClass\"],\n      icon: [\"nbTooltipIcon\", \"icon\"],\n      status: [\"nbTooltipStatus\", \"status\"],\n      content: [\"nbTooltip\", \"content\"]\n    },\n    outputs: {\n      nbTooltipShowStateChange: \"nbTooltipShowStateChange\"\n    },\n    exportAs: [\"nbTooltip\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([NbDynamicOverlayHandler, NbDynamicOverlay]), ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbTooltipDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTooltipModule = /*#__PURE__*/(() => {\n  class NbTooltipModule {}\n\n  NbTooltipModule.ɵfac = function NbTooltipModule_Factory(t) {\n    return new (t || NbTooltipModule)();\n  };\n\n  NbTooltipModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTooltipModule\n  });\n  NbTooltipModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbOverlayModule, NbIconModule]]\n  });\n  return NbTooltipModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTooltipModule, {\n    declarations: [NbTooltipComponent, NbTooltipDirective],\n    imports: [NbSharedModule, NbOverlayModule, NbIconModule],\n    exports: [NbTooltipDirective]\n  });\n})();\n\nconst NB_SELECT_INJECTION_TOKEN = new InjectionToken('NB_SELECT_INJECTION_TOKEN');\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n// Component class scoped counter for aria attributes.\n\nlet lastOptionId = 0;\n/**\n * NbOptionComponent\n *\n * @styles\n *\n * option-background-color:\n * option-text-color:\n * option-text-font-family:\n * option-hover-background-color:\n * option-hover-text-color:\n * option-active-background-color:\n * option-active-text-color:\n * option-focus-background-color:\n * option-focus-text-color:\n * option-selected-background-color:\n * option-selected-text-color:\n * option-selected-hover-background-color:\n * option-selected-hover-text-color:\n * option-selected-active-background-color:\n * option-selected-active-text-color:\n * option-selected-focus-background-color:\n * option-selected-focus-text-color:\n * option-disabled-background-color:\n * option-disabled-text-color:\n * option-tiny-text-font-size:\n * option-tiny-text-font-weight:\n * option-tiny-text-line-height:\n * option-tiny-padding:\n * option-small-text-font-size:\n * option-small-text-font-weight:\n * option-small-text-line-height:\n * option-small-padding:\n * option-medium-text-font-size:\n * option-medium-text-font-weight:\n * option-medium-text-line-height:\n * option-medium-padding:\n * option-large-text-font-size:\n * option-large-text-font-weight:\n * option-large-text-line-height:\n * option-large-padding:\n * option-giant-text-font-size:\n * option-giant-text-font-weight:\n * option-giant-text-line-height:\n * option-giant-padding:\n **/\n\nlet NbOptionComponent = /*#__PURE__*/(() => {\n  class NbOptionComponent {\n    constructor(parent, elementRef, cd, zone, renderer) {\n      this.elementRef = elementRef;\n      this.cd = cd;\n      this.zone = zone;\n      this.renderer = renderer;\n      this.disabledByGroup = false;\n      this._disabled = false;\n      /**\n       * Fires value when option selection change.\n       * */\n\n      this.selectionChange = new EventEmitter();\n      /**\n       * Fires when option clicked\n       */\n\n      this.click$ = new Subject();\n      this.selected = false;\n      this.alive = true;\n      /**\n       * Component scoped id for aria attributes.\n       * */\n\n      this.id = `nb-option-${lastOptionId++}`;\n      this._active = false;\n      this.parent = parent;\n    }\n\n    get disabled() {\n      return this._disabled || this.disabledByGroup;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n    }\n\n    get click() {\n      return this.click$.asObservable();\n    }\n\n    ngOnDestroy() {\n      this.alive = false;\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.elementRef.nativeElement, 'nb-transition');\n      }));\n    }\n    /**\n     * Determines should we render checkbox.\n     * */\n\n\n    get withCheckbox() {\n      return this.multiple && this.value != null;\n    }\n\n    get content() {\n      return this.elementRef.nativeElement.textContent;\n    } // TODO: replace with isShowCheckbox property to control this behaviour outside, issues/1965\n\n\n    get multiple() {\n      // We check parent existing because parent can be NbSelectComponent or\n      // NbAutocomplete and `miltiple` property exists only in NbSelectComponent\n      return this.parent ? this.parent.multiple : false;\n    }\n\n    get selectedClass() {\n      return this.selected;\n    }\n\n    get disabledAttribute() {\n      return this.disabled ? '' : null;\n    }\n\n    get tabindex() {\n      return '-1';\n    }\n\n    get activeClass() {\n      return this._active;\n    }\n\n    onClick(event) {\n      this.click$.next(this); // Prevent scroll on space click, etc.\n\n      event.preventDefault();\n    }\n\n    select() {\n      this.setSelection(true);\n    }\n\n    deselect() {\n      this.setSelection(false);\n    }\n    /**\n     * Sets disabled by group state and marks component for check.\n     */\n\n\n    setDisabledByGroupState(disabled) {\n      // Check if the component still alive as the option group defer method call so the component may become destroyed.\n      if (this.disabledByGroup !== disabled && this.alive) {\n        this.disabledByGroup = disabled;\n        this.cd.markForCheck();\n      }\n    }\n\n    setSelection(selected) {\n      /**\n       * In case of changing options in runtime the reference to the selected option will be kept in select component.\n       * This may lead to exceptions with detecting changes in destroyed component.\n       *\n       * Also Angular can call writeValue on destroyed view (select implements ControlValueAccessor).\n       * angular/angular#27803\n       * */\n      if (this.alive && this.selected !== selected) {\n        this.selected = selected;\n        this.selectionChange.emit(this);\n        this.cd.markForCheck();\n      }\n    }\n\n    focus() {\n      this.elementRef.nativeElement.focus();\n    }\n\n    getLabel() {\n      return this.content;\n    }\n\n    setActiveStyles() {\n      this._active = true;\n      this.cd.markForCheck();\n    }\n\n    setInactiveStyles() {\n      this._active = false;\n      this.cd.markForCheck();\n    }\n\n  }\n\n  NbOptionComponent.ɵfac = function NbOptionComponent_Factory(t) {\n    return new (t || NbOptionComponent)(ɵngcc0.ɵɵdirectiveInject(NB_SELECT_INJECTION_TOKEN, 8), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  NbOptionComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbOptionComponent,\n    selectors: [[\"nb-option\"]],\n    hostVars: 9,\n    hostBindings: function NbOptionComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbOptionComponent_click_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        })(\"keydown.space\", function NbOptionComponent_keydown_space_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        })(\"keydown.enter\", function NbOptionComponent_keydown_enter_HostBindingHandler($event) {\n          return ctx.onClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵhostProperty(\"tabIndex\", ctx.tabindex);\n        ɵngcc0.ɵɵattribute(\"id\", ctx.id)(\"disabled\", ctx.disabledAttribute);\n        ɵngcc0.ɵɵclassProp(\"multiple\", ctx.multiple)(\"selected\", ctx.selectedClass)(\"active\", ctx.activeClass);\n      }\n    },\n    inputs: {\n      disabled: \"disabled\",\n      value: \"value\"\n    },\n    outputs: {\n      selectionChange: \"selectionChange\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 1,\n    consts: [[\"aria-hidden\", \"true\", 3, \"checked\", \"disabled\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", 3, \"checked\", \"disabled\"]],\n    template: function NbOptionComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵtemplate(0, NbOptionComponent_nb_checkbox_0_Template, 1, 2, \"nb-checkbox\", 0);\n        ɵngcc0.ɵɵprojection(1);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.withCheckbox);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbCheckboxComponent],\n    styles: [\"[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{display:flex;pointer-events:none}[dir=ltr]   [_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   [_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   nb-checkbox[_ngcontent-%COMP%]     .label{padding:0}[disabled][_nghost-%COMP%]{pointer-events:none}.nb-transition[_nghost-%COMP%]{transition-duration:0.15s;transition-property:background-color,color;transition-timing-function:ease-in}\"],\n    changeDetection: 0\n  });\n  return NbOptionComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbSelectLabelComponent = /*#__PURE__*/(() => {\n  class NbSelectLabelComponent {}\n\n  NbSelectLabelComponent.ɵfac = function NbSelectLabelComponent_Factory(t) {\n    return new (t || NbSelectLabelComponent)();\n  };\n\n  NbSelectLabelComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSelectLabelComponent,\n    selectors: [[\"nb-select-label\"]],\n    ngContentSelectors: _c0,\n    decls: 1,\n    vars: 0,\n    template: function NbSelectLabelComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2\n  });\n  return NbSelectLabelComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nfunction nbSelectFormFieldControlConfigFactory() {\n  const config = new NbFormFieldControlConfig();\n  config.supportsSuffix = false;\n  return config;\n}\n/**\n * The `NbSelectComponent` provides a capability to select one of the passed items.\n *\n * @stacked-example(Showcase, select/select-showcase.component)\n *\n * ### Installation\n *\n * Import `NbSelectModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbSelectModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * If you want to use it as the multi-select control you have to mark it as `multiple`.\n * In this case, `nb-select` will work only with arrays - accept arrays and propagate arrays.\n *\n * @stacked-example(Multiple, select/select-multiple.component)\n *\n * Items without values will clean the selection. Both `null` and `undefined` values will also clean the selection.\n *\n * @stacked-example(Clean selection, select/select-clean.component)\n *\n * Select may be bounded using `selected` input:\n *\n * ```html\n * <nb-select [(selected)]=\"selected\"></nb-selected>\n * ```\n *\n * Or you can bind control with form controls or ngModel:\n *\n * @stacked-example(Select form binding, select/select-form.component)\n *\n * Options in the select may be grouped using `nb-option-group` component.\n *\n * @stacked-example(Grouping, select/select-groups.component)\n *\n * Select may have a placeholder that will be shown when nothing selected:\n *\n * @stacked-example(Placeholder, select/select-placeholder.component)\n *\n * You can disable select, options and whole groups.\n *\n * @stacked-example(Disabled select, select/select-disabled.component)\n *\n * Also, the custom label may be provided in select.\n * This custom label will be used for instead placeholder when something selected.\n *\n * @stacked-example(Custom label, select/select-label.component)\n *\n * Default `nb-select` size is `medium` and status is `basic`.\n * Select is available in multiple colors using `status` property:\n *\n * @stacked-example(Select statuses, select/select-status.component)\n *\n * There are five select sizes:\n *\n * @stacked-example(Select sizes, select/select-sizes.component)\n *\n * And two additional style types - `filled`:\n *\n * @stacked-example(Filled select, select/select-filled.component)\n *\n * and `hero`:\n *\n * @stacked-example(Select colors, select/select-hero.component)\n *\n * Select is available in different shapes, that could be combined with the other properties:\n *\n * @stacked-example(Select shapes, select/select-shapes.component)\n *\n * By default, the component selects options whose values are strictly equal (`===`) with the select value.\n * To change such behavior, pass a custom comparator function to the `compareWith` attribute.\n *\n * @stacked-example(Select custom comparator, select/select-compare-with.component)\n *\n * You can add an additional icon to the select via the `nb-form-field` component:\n * @stacked-example(Select with icon, select/select-icon.component)\n *\n * @additional-example(Interactive, select/select-interactive.component)\n *\n * @styles\n *\n * select-cursor:\n * select-disabled-cursor:\n * select-min-width:\n * select-outline-width:\n * select-outline-color:\n * select-icon-offset:\n * select-text-font-family:\n * select-placeholder-text-font-family:\n * select-tiny-text-font-size:\n * select-tiny-text-font-weight:\n * select-tiny-text-line-height:\n * select-tiny-placeholder-text-font-size:\n * select-tiny-placeholder-text-font-weight:\n * select-tiny-max-width:\n * select-small-text-font-size:\n * select-small-text-font-weight:\n * select-small-text-line-height:\n * select-small-placeholder-text-font-size:\n * select-small-placeholder-text-font-weight:\n * select-small-max-width:\n * select-medium-text-font-size:\n * select-medium-text-font-weight:\n * select-medium-text-line-height:\n * select-medium-placeholder-text-font-size:\n * select-medium-placeholder-text-font-weight:\n * select-medium-max-width:\n * select-large-text-font-size:\n * select-large-text-font-weight:\n * select-large-text-line-height:\n * select-large-placeholder-text-font-size:\n * select-large-placeholder-text-font-weight:\n * select-large-max-width:\n * select-giant-text-font-size:\n * select-giant-text-font-weight:\n * select-giant-text-line-height:\n * select-giant-placeholder-text-font-size:\n * select-giant-placeholder-text-font-weight:\n * select-giant-max-width:\n * select-rectangle-border-radius:\n * select-semi-round-border-radius:\n * select-round-border-radius:\n * select-outline-border-style:\n * select-outline-border-width:\n * select-outline-tiny-padding:\n * select-outline-small-padding:\n * select-outline-medium-padding:\n * select-outline-large-padding:\n * select-outline-giant-padding:\n * select-outline-basic-icon-color:\n * select-outline-basic-text-color:\n * select-outline-basic-placeholder-text-color:\n * select-outline-basic-background-color:\n * select-outline-basic-border-color:\n * select-outline-basic-focus-background-color:\n * select-outline-basic-focus-border-color:\n * select-outline-basic-hover-background-color:\n * select-outline-basic-hover-border-color:\n * select-outline-basic-disabled-background-color:\n * select-outline-basic-disabled-border-color:\n * select-outline-basic-disabled-icon-color:\n * select-outline-basic-disabled-text-color:\n * select-outline-primary-icon-color:\n * select-outline-primary-text-color:\n * select-outline-primary-placeholder-text-color:\n * select-outline-primary-background-color:\n * select-outline-primary-border-color:\n * select-outline-primary-focus-background-color:\n * select-outline-primary-focus-border-color:\n * select-outline-primary-hover-background-color:\n * select-outline-primary-hover-border-color:\n * select-outline-primary-disabled-background-color:\n * select-outline-primary-disabled-border-color:\n * select-outline-primary-disabled-icon-color:\n * select-outline-primary-disabled-text-color:\n * select-outline-success-icon-color:\n * select-outline-success-text-color:\n * select-outline-success-placeholder-text-color:\n * select-outline-success-background-color:\n * select-outline-success-border-color:\n * select-outline-success-focus-background-color:\n * select-outline-success-focus-border-color:\n * select-outline-success-hover-background-color:\n * select-outline-success-hover-border-color:\n * select-outline-success-disabled-background-color:\n * select-outline-success-disabled-border-color:\n * select-outline-success-disabled-icon-color:\n * select-outline-success-disabled-text-color:\n * select-outline-info-icon-color:\n * select-outline-info-text-color:\n * select-outline-info-placeholder-text-color:\n * select-outline-info-background-color:\n * select-outline-info-border-color:\n * select-outline-info-focus-background-color:\n * select-outline-info-focus-border-color:\n * select-outline-info-hover-background-color:\n * select-outline-info-hover-border-color:\n * select-outline-info-disabled-background-color:\n * select-outline-info-disabled-border-color:\n * select-outline-info-disabled-icon-color:\n * select-outline-info-disabled-text-color:\n * select-outline-warning-icon-color:\n * select-outline-warning-text-color:\n * select-outline-warning-placeholder-text-color:\n * select-outline-warning-background-color:\n * select-outline-warning-border-color:\n * select-outline-warning-focus-background-color:\n * select-outline-warning-focus-border-color:\n * select-outline-warning-hover-background-color:\n * select-outline-warning-hover-border-color:\n * select-outline-warning-disabled-background-color:\n * select-outline-warning-disabled-border-color:\n * select-outline-warning-disabled-icon-color:\n * select-outline-warning-disabled-text-color:\n * select-outline-danger-icon-color:\n * select-outline-danger-text-color:\n * select-outline-danger-placeholder-text-color:\n * select-outline-danger-background-color:\n * select-outline-danger-border-color:\n * select-outline-danger-focus-background-color:\n * select-outline-danger-focus-border-color:\n * select-outline-danger-hover-background-color:\n * select-outline-danger-hover-border-color:\n * select-outline-danger-disabled-background-color:\n * select-outline-danger-disabled-border-color:\n * select-outline-danger-disabled-icon-color:\n * select-outline-danger-disabled-text-color:\n * select-outline-control-icon-color:\n * select-outline-control-text-color:\n * select-outline-control-placeholder-text-color:\n * select-outline-control-background-color:\n * select-outline-control-border-color:\n * select-outline-control-focus-background-color:\n * select-outline-control-focus-border-color:\n * select-outline-control-hover-background-color:\n * select-outline-control-hover-border-color:\n * select-outline-control-disabled-background-color:\n * select-outline-control-disabled-border-color:\n * select-outline-control-disabled-icon-color:\n * select-outline-control-disabled-text-color:\n * select-outline-adjacent-border-style:\n * select-outline-adjacent-border-width:\n * select-outline-basic-open-border-color:\n * select-outline-basic-adjacent-border-color:\n * select-outline-primary-open-border-color:\n * select-outline-primary-adjacent-border-color:\n * select-outline-success-open-border-color:\n * select-outline-success-adjacent-border-color:\n * select-outline-info-open-border-color:\n * select-outline-info-adjacent-border-color:\n * select-outline-warning-open-border-color:\n * select-outline-warning-adjacent-border-color:\n * select-outline-danger-open-border-color:\n * select-outline-danger-adjacent-border-color:\n * select-outline-control-open-border-color:\n * select-outline-control-adjacent-border-color:\n * select-filled-border-style:\n * select-filled-border-width:\n * select-filled-tiny-padding:\n * select-filled-small-padding:\n * select-filled-medium-padding:\n * select-filled-large-padding:\n * select-filled-giant-padding:\n * select-filled-basic-background-color:\n * select-filled-basic-border-color:\n * select-filled-basic-icon-color:\n * select-filled-basic-text-color:\n * select-filled-basic-placeholder-text-color:\n * select-filled-basic-focus-background-color:\n * select-filled-basic-focus-border-color:\n * select-filled-basic-hover-background-color:\n * select-filled-basic-hover-border-color:\n * select-filled-basic-disabled-background-color:\n * select-filled-basic-disabled-border-color:\n * select-filled-basic-disabled-icon-color:\n * select-filled-basic-disabled-text-color:\n * select-filled-primary-background-color:\n * select-filled-primary-border-color:\n * select-filled-primary-icon-color:\n * select-filled-primary-text-color:\n * select-filled-primary-placeholder-text-color:\n * select-filled-primary-focus-background-color:\n * select-filled-primary-focus-border-color:\n * select-filled-primary-hover-background-color:\n * select-filled-primary-hover-border-color:\n * select-filled-primary-disabled-background-color:\n * select-filled-primary-disabled-border-color:\n * select-filled-primary-disabled-icon-color:\n * select-filled-primary-disabled-text-color:\n * select-filled-success-background-color:\n * select-filled-success-border-color:\n * select-filled-success-icon-color:\n * select-filled-success-text-color:\n * select-filled-success-placeholder-text-color:\n * select-filled-success-focus-background-color:\n * select-filled-success-focus-border-color:\n * select-filled-success-hover-background-color:\n * select-filled-success-hover-border-color:\n * select-filled-success-disabled-background-color:\n * select-filled-success-disabled-border-color:\n * select-filled-success-disabled-icon-color:\n * select-filled-success-disabled-text-color:\n * select-filled-info-background-color:\n * select-filled-info-border-color:\n * select-filled-info-icon-color:\n * select-filled-info-text-color:\n * select-filled-info-placeholder-text-color:\n * select-filled-info-focus-background-color:\n * select-filled-info-focus-border-color:\n * select-filled-info-hover-background-color:\n * select-filled-info-hover-border-color:\n * select-filled-info-disabled-background-color:\n * select-filled-info-disabled-border-color:\n * select-filled-info-disabled-icon-color:\n * select-filled-info-disabled-text-color:\n * select-filled-warning-background-color:\n * select-filled-warning-border-color:\n * select-filled-warning-icon-color:\n * select-filled-warning-text-color:\n * select-filled-warning-placeholder-text-color:\n * select-filled-warning-focus-background-color:\n * select-filled-warning-focus-border-color:\n * select-filled-warning-hover-background-color:\n * select-filled-warning-hover-border-color:\n * select-filled-warning-disabled-background-color:\n * select-filled-warning-disabled-border-color:\n * select-filled-warning-disabled-icon-color:\n * select-filled-warning-disabled-text-color:\n * select-filled-danger-background-color:\n * select-filled-danger-border-color:\n * select-filled-danger-icon-color:\n * select-filled-danger-text-color:\n * select-filled-danger-placeholder-text-color:\n * select-filled-danger-focus-background-color:\n * select-filled-danger-focus-border-color:\n * select-filled-danger-hover-background-color:\n * select-filled-danger-hover-border-color:\n * select-filled-danger-disabled-background-color:\n * select-filled-danger-disabled-border-color:\n * select-filled-danger-disabled-icon-color:\n * select-filled-danger-disabled-text-color:\n * select-filled-control-background-color:\n * select-filled-control-border-color:\n * select-filled-control-icon-color:\n * select-filled-control-text-color:\n * select-filled-control-placeholder-text-color:\n * select-filled-control-focus-background-color:\n * select-filled-control-focus-border-color:\n * select-filled-control-hover-background-color:\n * select-filled-control-hover-border-color:\n * select-filled-control-disabled-background-color:\n * select-filled-control-disabled-border-color:\n * select-filled-control-disabled-icon-color:\n * select-filled-control-disabled-text-color:\n * select-hero-tiny-padding:\n * select-hero-small-padding:\n * select-hero-medium-padding:\n * select-hero-large-padding:\n * select-hero-giant-padding:\n * select-hero-basic-left-background-color:\n * select-hero-basic-right-background-color:\n * select-hero-basic-icon-color:\n * select-hero-basic-text-color:\n * select-hero-basic-placeholder-text-color:\n * select-hero-basic-focus-left-background-color:\n * select-hero-basic-focus-right-background-color:\n * select-hero-basic-hover-left-background-color:\n * select-hero-basic-hover-right-background-color:\n * select-hero-basic-disabled-background-color:\n * select-hero-basic-disabled-icon-color:\n * select-hero-basic-disabled-text-color:\n * select-hero-primary-left-background-color:\n * select-hero-primary-right-background-color:\n * select-hero-primary-icon-color:\n * select-hero-primary-text-color:\n * select-hero-primary-placeholder-text-color:\n * select-hero-primary-focus-left-background-color:\n * select-hero-primary-focus-right-background-color:\n * select-hero-primary-hover-left-background-color:\n * select-hero-primary-hover-right-background-color:\n * select-hero-primary-disabled-background-color:\n * select-hero-primary-disabled-icon-color:\n * select-hero-primary-disabled-text-color:\n * select-hero-success-left-background-color:\n * select-hero-success-right-background-color:\n * select-hero-success-icon-color:\n * select-hero-success-text-color:\n * select-hero-success-placeholder-text-color:\n * select-hero-success-focus-left-background-color:\n * select-hero-success-focus-right-background-color:\n * select-hero-success-hover-left-background-color:\n * select-hero-success-hover-right-background-color:\n * select-hero-success-disabled-background-color:\n * select-hero-success-disabled-icon-color:\n * select-hero-success-disabled-text-color:\n * select-hero-info-left-background-color:\n * select-hero-info-right-background-color:\n * select-hero-info-icon-color:\n * select-hero-info-text-color:\n * select-hero-info-placeholder-text-color:\n * select-hero-info-focus-left-background-color:\n * select-hero-info-focus-right-background-color:\n * select-hero-info-hover-left-background-color:\n * select-hero-info-hover-right-background-color:\n * select-hero-info-disabled-background-color:\n * select-hero-info-disabled-icon-color:\n * select-hero-info-disabled-text-color:\n * select-hero-warning-left-background-color:\n * select-hero-warning-right-background-color:\n * select-hero-warning-icon-color:\n * select-hero-warning-text-color:\n * select-hero-warning-placeholder-text-color:\n * select-hero-warning-focus-left-background-color:\n * select-hero-warning-focus-right-background-color:\n * select-hero-warning-hover-left-background-color:\n * select-hero-warning-hover-right-background-color:\n * select-hero-warning-disabled-background-color:\n * select-hero-warning-disabled-icon-color:\n * select-hero-warning-disabled-text-color:\n * select-hero-danger-left-background-color:\n * select-hero-danger-right-background-color:\n * select-hero-danger-icon-color:\n * select-hero-danger-text-color:\n * select-hero-danger-placeholder-text-color:\n * select-hero-danger-focus-left-background-color:\n * select-hero-danger-focus-right-background-color:\n * select-hero-danger-hover-left-background-color:\n * select-hero-danger-hover-right-background-color:\n * select-hero-danger-disabled-background-color:\n * select-hero-danger-disabled-icon-color:\n * select-hero-danger-disabled-text-color:\n * select-hero-control-left-background-color:\n * select-hero-control-right-background-color:\n * select-hero-control-icon-color:\n * select-hero-control-text-color:\n * select-hero-control-placeholder-text-color:\n * select-hero-control-focus-left-background-color:\n * select-hero-control-focus-right-background-color:\n * select-hero-control-hover-left-background-color:\n * select-hero-control-hover-right-background-color:\n * select-hero-control-disabled-background-color:\n * select-hero-control-disabled-icon-color:\n * select-hero-control-disabled-text-color:\n * */\n\n\nlet NbSelectComponent = /*#__PURE__*/(() => {\n  class NbSelectComponent {\n    constructor(document, overlay, hostRef, positionBuilder, triggerStrategyBuilder, cd, focusKeyManagerFactoryService, focusMonitor, renderer, zone, statusService) {\n      this.document = document;\n      this.overlay = overlay;\n      this.hostRef = hostRef;\n      this.positionBuilder = positionBuilder;\n      this.triggerStrategyBuilder = triggerStrategyBuilder;\n      this.cd = cd;\n      this.focusKeyManagerFactoryService = focusKeyManagerFactoryService;\n      this.focusMonitor = focusMonitor;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.statusService = statusService;\n      /**\n       * Select size, available sizes:\n       * `tiny`, `small`, `medium` (default), `large`, `giant`\n       */\n\n      this.size = 'medium';\n      /**\n       * Select status (adds specific styles):\n       * `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`\n       */\n\n      this.status = 'basic';\n      /**\n       * Select shapes: `rectangle` (default), `round`, `semi-round`\n       */\n\n      this.shape = 'rectangle';\n      /**\n       * Select appearances: `outline` (default), `filled`, `hero`\n       */\n\n      this.appearance = 'outline';\n      this._fullWidth = false;\n      /**\n       * Renders select placeholder if nothing selected.\n       * */\n\n      this.placeholder = '';\n\n      this._compareWith = (v1, v2) => v1 === v2;\n\n      this._multiple = false;\n      /**\n       * Determines options overlay offset (in pixels).\n       **/\n\n      this.optionsOverlayOffset = 8;\n      /**\n       * Determines options overlay scroll strategy.\n       **/\n\n      this.scrollStrategy = 'block';\n      /**\n       * Will be emitted when selected value changes.\n       * */\n\n      this.selectedChange = new EventEmitter();\n      /**\n       * List of selected options.\n       * */\n\n      this.selectionModel = [];\n      /**\n       * Current overlay position because of we have to toggle overlayPosition\n       * in [ngClass] direction and this directive can use only string.\n       */\n\n      this.overlayPosition = '';\n      this.alive = true;\n      this.destroy$ = new Subject();\n      /**\n       * Function passed through control value accessor to propagate changes.\n       * */\n\n      this.onChange = () => {};\n\n      this.onTouched = () => {};\n      /*\n       * @docs-private\n       **/\n\n\n      this.status$ = new BehaviorSubject(this.status);\n      /*\n       * @docs-private\n       **/\n\n      this.size$ = new BehaviorSubject(this.size);\n      /*\n       * @docs-private\n       **/\n\n      this.focused$ = new BehaviorSubject(false);\n      /*\n       * @docs-private\n       **/\n\n      this.disabled$ = new BehaviorSubject(this.disabled);\n      /*\n       * @docs-private\n       **/\n\n      this.fullWidth$ = new BehaviorSubject(this.fullWidth);\n    }\n    /**\n     * Adds `outline` styles\n     */\n\n\n    get outline() {\n      return this.appearance === 'outline';\n    }\n\n    set outline(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'outline';\n      }\n    }\n    /**\n     * Adds `filled` styles\n     */\n\n\n    get filled() {\n      return this.appearance === 'filled';\n    }\n\n    set filled(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'filled';\n      }\n    }\n    /**\n     * Adds `hero` styles\n     */\n\n\n    get hero() {\n      return this.appearance === 'hero';\n    }\n\n    set hero(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'hero';\n      }\n    }\n    /**\n     * Disables the select\n     */\n\n\n    get disabled() {\n      return !!this._disabled;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n    }\n    /**\n     * If set element will fill its container\n     */\n\n\n    get fullWidth() {\n      return this._fullWidth;\n    }\n\n    set fullWidth(value) {\n      this._fullWidth = convertToBoolProperty(value);\n    }\n    /**\n     * A function to compare option value with selected value.\n     * By default, values are compared with strict equality (`===`).\n     */\n\n\n    get compareWith() {\n      return this._compareWith;\n    }\n\n    set compareWith(fn) {\n      if (typeof fn !== 'function') {\n        return;\n      }\n\n      this._compareWith = fn;\n\n      if (this.selectionModel.length && this.canSelectValue()) {\n        this.setSelection(this.selected);\n      }\n    }\n    /**\n     * Accepts selected item or array of selected items.\n     * */\n\n\n    set selected(value) {\n      this.writeValue(value);\n    }\n\n    get selected() {\n      return this.multiple ? this.selectionModel.map(o => o.value) : this.selectionModel[0].value;\n    }\n    /**\n     * Gives capability just write `multiple` over the element.\n     * */\n\n\n    get multiple() {\n      return this._multiple;\n    }\n\n    set multiple(value) {\n      this._multiple = convertToBoolProperty(value);\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n    /**\n     * Determines is select opened.\n     * */\n\n\n    get isOpen() {\n      return this.ref && this.ref.hasAttached();\n    }\n    /**\n     * Determines is select hidden.\n     * */\n\n\n    get isHidden() {\n      return !this.isOpen;\n    }\n    /**\n     * Returns width of the select button.\n     * */\n\n\n    get hostWidth() {\n      return this.button.nativeElement.getBoundingClientRect().width;\n    }\n\n    get selectButtonClasses() {\n      const classes = [];\n\n      if (!this.selectionModel.length) {\n        classes.push('placeholder');\n      }\n\n      if (!this.selectionModel.length && !this.placeholder) {\n        classes.push('empty');\n      }\n\n      if (this.isOpen) {\n        classes.push(this.overlayPosition);\n      }\n\n      return classes;\n    }\n    /**\n     * Content rendered in the label.\n     * */\n\n\n    get selectionView() {\n      if (this.selectionModel.length > 1) {\n        return this.selectionModel.map(option => option.content).join(', ');\n      }\n\n      return this.selectionModel[0].content;\n    }\n\n    ngOnChanges({\n      disabled,\n      status,\n      size,\n      fullWidth\n    }) {\n      if (disabled) {\n        this.disabled$.next(disabled.currentValue);\n      }\n\n      if (status) {\n        this.status$.next(status.currentValue);\n      }\n\n      if (size) {\n        this.size$.next(size.currentValue);\n      }\n\n      if (fullWidth) {\n        this.fullWidth$.next(this.fullWidth);\n      }\n    }\n\n    ngAfterContentInit() {\n      this.options.changes.pipe(startWith(this.options), filter(() => this.queue != null && this.canSelectValue()), // Call 'writeValue' when current change detection run is finished.\n      // When writing is finished, change detection starts again, since\n      // microtasks queue is empty.\n      // Prevents ExpressionChangedAfterItHasBeenCheckedError.\n      switchMap(options => from(Promise.resolve(options))), takeUntil(this.destroy$)).subscribe(() => this.writeValue(this.queue));\n    }\n\n    ngAfterViewInit() {\n      this.triggerStrategy = this.createTriggerStrategy();\n      this.subscribeOnButtonFocus();\n      this.subscribeOnTriggers();\n      this.subscribeOnOptionClick(); // TODO: #2254\n\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.hostRef.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.alive = false;\n      this.destroy$.next();\n      this.destroy$.complete();\n\n      if (this.ref) {\n        this.ref.dispose();\n      }\n\n      if (this.triggerStrategy) {\n        this.triggerStrategy.destroy();\n      }\n    }\n\n    show() {\n      if (this.isHidden) {\n        this.attachToOverlay();\n        this.setActiveOption();\n        this.cd.markForCheck();\n      }\n    }\n\n    hide() {\n      if (this.isOpen) {\n        this.ref.detach();\n        this.cd.markForCheck();\n      }\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    setDisabledState(isDisabled) {\n      this.disabled = isDisabled;\n      this.cd.markForCheck();\n    }\n\n    writeValue(value) {\n      if (!this.alive) {\n        return;\n      }\n\n      if (this.canSelectValue()) {\n        this.setSelection(value);\n\n        if (this.selectionModel.length) {\n          this.queue = null;\n        }\n      } else {\n        this.queue = value;\n      }\n    }\n    /**\n     * Selects option or clear all selected options if value is null.\n     * */\n\n\n    handleOptionClick(option) {\n      this.queue = null;\n\n      if (option.value == null) {\n        this.reset();\n      } else {\n        this.selectOption(option);\n      }\n\n      this.cd.markForCheck();\n    }\n    /**\n     * Deselect all selected options.\n     * */\n\n\n    reset() {\n      this.selectionModel.forEach(option => option.deselect());\n      this.selectionModel = [];\n      this.hide();\n      this.button.nativeElement.focus();\n      this.emitSelected(this.multiple ? [] : null);\n    }\n    /**\n     * Determines how to select option as multiple or single.\n     * */\n\n\n    selectOption(option) {\n      if (this.multiple) {\n        this.handleMultipleSelect(option);\n      } else {\n        this.handleSingleSelect(option);\n      }\n    }\n    /**\n     * Select single option.\n     * */\n\n\n    handleSingleSelect(option) {\n      const selected = this.selectionModel.pop();\n\n      if (selected && !this._compareWith(selected.value, option.value)) {\n        selected.deselect();\n      }\n\n      this.selectionModel = [option];\n      option.select();\n      this.hide();\n      this.button.nativeElement.focus();\n      this.emitSelected(option.value);\n    }\n    /**\n     * Select for multiple options.\n     * */\n\n\n    handleMultipleSelect(option) {\n      if (option.selected) {\n        this.selectionModel = this.selectionModel.filter(s => !this._compareWith(s.value, option.value));\n        option.deselect();\n      } else {\n        this.selectionModel.push(option);\n        option.select();\n      }\n\n      this.emitSelected(this.selectionModel.map(opt => opt.value));\n    }\n\n    attachToOverlay() {\n      if (!this.ref) {\n        this.createOverlay();\n        this.subscribeOnPositionChange();\n        this.createKeyManager();\n        this.subscribeOnOverlayKeys();\n      }\n\n      this.ref.attach(this.portal);\n    }\n\n    setActiveOption() {\n      if (this.selectionModel.length) {\n        this.keyManager.setActiveItem(this.selectionModel[0]);\n      } else {\n        this.keyManager.setFirstItemActive();\n      }\n    }\n\n    createOverlay() {\n      const scrollStrategy = this.createScrollStrategy();\n      this.positionStrategy = this.createPositionStrategy();\n      this.ref = this.overlay.create({\n        positionStrategy: this.positionStrategy,\n        scrollStrategy,\n        panelClass: this.optionsPanelClass\n      });\n    }\n\n    createKeyManager() {\n      this.keyManager = this.focusKeyManagerFactoryService.create(this.options).withTypeAhead(200);\n    }\n\n    createPositionStrategy() {\n      return this.positionBuilder.connectedTo(this.button).position(NbPosition.BOTTOM).offset(this.optionsOverlayOffset).adjustment(NbAdjustment.VERTICAL);\n    }\n\n    createScrollStrategy() {\n      return this.overlay.scrollStrategies[this.scrollStrategy]();\n    }\n\n    createTriggerStrategy() {\n      return this.triggerStrategyBuilder.trigger(NbTrigger.CLICK).host(this.hostRef.nativeElement).container(() => this.getContainer()).build();\n    }\n\n    subscribeOnTriggers() {\n      this.triggerStrategy.show$.subscribe(() => this.show());\n      this.triggerStrategy.hide$.pipe(filter(() => this.isOpen)).subscribe($event => {\n        this.hide();\n\n        if (!this.isClickedWithinComponent($event)) {\n          this.onTouched();\n        }\n      });\n    }\n\n    subscribeOnPositionChange() {\n      this.positionStrategy.positionChange.pipe(takeUntil(this.destroy$)).subscribe(position => {\n        this.overlayPosition = position;\n        this.cd.detectChanges();\n      });\n    }\n\n    subscribeOnOptionClick() {\n      /**\n       * If the user changes provided options list in the runtime we have to handle this\n       * and resubscribe on options selection changes event.\n       * Otherwise, the user will not be able to select new options.\n       * */\n      this.options.changes.pipe(startWith(this.options), switchMap(options => {\n        return merge(...options.map(option => option.click));\n      }), takeUntil(this.destroy$)).subscribe(clickedOption => this.handleOptionClick(clickedOption));\n    }\n\n    subscribeOnOverlayKeys() {\n      this.ref.keydownEvents().pipe(filter(() => this.isOpen), takeUntil(this.destroy$)).subscribe(event => {\n        if (event.keyCode === ESCAPE) {\n          this.button.nativeElement.focus();\n          this.hide();\n        } else {\n          this.keyManager.onKeydown(event);\n        }\n      });\n      this.keyManager.tabOut.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.hide();\n        this.onTouched();\n      });\n    }\n\n    subscribeOnButtonFocus() {\n      this.focusMonitor.monitor(this.button).pipe(map(origin => !!origin), finalize(() => this.focusMonitor.stopMonitoring(this.button)), takeUntil(this.destroy$)).subscribe(this.focused$);\n    }\n\n    getContainer() {\n      return this.ref && this.ref.hasAttached() && {\n        location: {\n          nativeElement: this.ref.overlayElement\n        }\n      };\n    }\n    /**\n     * Propagate selected value.\n     * */\n\n\n    emitSelected(selected) {\n      this.onChange(selected);\n      this.selectedChange.emit(selected);\n    }\n    /**\n     * Set selected value in model.\n     * */\n\n\n    setSelection(value) {\n      const isArray = Array.isArray(value);\n\n      if (this.multiple && !isArray) {\n        throw new Error('Can\\'t assign single value if select is marked as multiple');\n      }\n\n      if (!this.multiple && isArray) {\n        throw new Error('Can\\'t assign array if select is not marked as multiple');\n      }\n\n      const previouslySelectedOptions = this.selectionModel;\n      this.selectionModel = [];\n\n      if (isArray) {\n        value.forEach(option => this.selectValue(option));\n      } else {\n        this.selectValue(value);\n      } // find options which were selected before and trigger deselect\n\n\n      previouslySelectedOptions.filter(option => !this.selectionModel.includes(option)).forEach(option => option.deselect());\n      this.cd.markForCheck();\n    }\n    /**\n     * Selects value.\n     * */\n\n\n    selectValue(value) {\n      const corresponding = this.options.find(option => this._compareWith(option.value, value));\n\n      if (corresponding) {\n        corresponding.select();\n        this.selectionModel.push(corresponding);\n      }\n    }\n    /**\n     * Sets touched if focus moved outside of button and overlay,\n     * ignoring the case when focus moved to options overlay.\n     */\n\n\n    trySetTouched() {\n      if (this.isHidden) {\n        this.onTouched();\n      }\n    }\n\n    isClickedWithinComponent($event) {\n      return this.hostRef.nativeElement === $event.target || this.hostRef.nativeElement.contains($event.target);\n    }\n\n    canSelectValue() {\n      return !!(this.options && this.options.length);\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get rectangle() {\n      return this.shape === 'rectangle';\n    }\n\n    get round() {\n      return this.shape === 'round';\n    }\n\n    get semiRound() {\n      return this.shape === 'semi-round';\n    }\n\n  }\n\n  NbSelectComponent.ɵfac = function NbSelectComponent_Factory(t) {\n    return new (t || NbSelectComponent)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbFocusKeyManagerFactoryService), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbSelectComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSelectComponent,\n    selectors: [[\"nb-select\"]],\n    contentQueries: function NbSelectComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSelectLabelComponent, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.customLabel = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);\n      }\n    },\n    viewQuery: function NbSelectComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalDirective, 5);\n        ɵngcc0.ɵɵviewQuery(_c38, 5, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portal = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.button = _t.first);\n      }\n    },\n    hostVars: 42,\n    hostBindings: function NbSelectComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"appearance-outline\", ctx.outline)(\"appearance-filled\", ctx.filled)(\"appearance-hero\", ctx.hero)(\"full-width\", ctx.fullWidth)(\"open\", ctx.isOpen)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant)(\"status-primary\", ctx.primary)(\"status-info\", ctx.info)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"shape-rectangle\", ctx.rectangle)(\"shape-round\", ctx.round)(\"shape-semi-round\", ctx.semiRound);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      status: \"status\",\n      shape: \"shape\",\n      appearance: \"appearance\",\n      placeholder: \"placeholder\",\n      optionsOverlayOffset: \"optionsOverlayOffset\",\n      scrollStrategy: \"scrollStrategy\",\n      outline: \"outline\",\n      filled: \"filled\",\n      hero: \"hero\",\n      disabled: \"disabled\",\n      fullWidth: \"fullWidth\",\n      compareWith: \"compareWith\",\n      selected: \"selected\",\n      multiple: \"multiple\",\n      optionsListClass: \"optionsListClass\",\n      optionsPanelClass: \"optionsPanelClass\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbSelectComponent),\n      multi: true\n    }, {\n      provide: NB_SELECT_INJECTION_TOKEN,\n      useExisting: NbSelectComponent\n    }, {\n      provide: NbFormFieldControl,\n      useExisting: NbSelectComponent\n    }, {\n      provide: NbFormFieldControlConfig,\n      useFactory: nbSelectFormFieldControlConfigFactory\n    }]), ɵngcc0.ɵɵNgOnChangesFeature],\n    ngContentSelectors: _c40,\n    decls: 7,\n    vars: 4,\n    consts: [[\"type\", \"button\", 1, \"select-button\", 3, \"disabled\", \"ngClass\", \"blur\", \"keydown.arrowDown\", \"keydown.arrowUp\"], [\"selectButton\", \"\"], [4, \"ngIf\", \"ngIfElse\"], [\"placeholderTemplate\", \"\"], [\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 3, \"click\"], [3, \"size\", \"position\", \"width\", \"ngClass\", 4, \"nbPortal\"], [\"defaultSelectionTemplate\", \"\"], [3, \"size\", \"position\", \"ngClass\"]],\n    template: function NbSelectComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c39);\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"blur\", function NbSelectComponent_Template_button_blur_0_listener() {\n          return ctx.trySetTouched();\n        })(\"keydown.arrowDown\", function NbSelectComponent_Template_button_keydown_arrowDown_0_listener() {\n          return ctx.show();\n        })(\"keydown.arrowUp\", function NbSelectComponent_Template_button_keydown_arrowUp_0_listener() {\n          return ctx.show();\n        });\n        ɵngcc0.ɵɵtemplate(2, NbSelectComponent_ng_container_2_Template, 4, 2, \"ng-container\", 2);\n        ɵngcc0.ɵɵtemplate(3, NbSelectComponent_ng_template_3_Template, 1, 1, \"ng-template\", null, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n        ɵngcc0.ɵɵelementStart(5, \"nb-icon\", 4);\n        ɵngcc0.ɵɵlistener(\"click\", function NbSelectComponent_Template_nb_icon_click_5_listener($event) {\n          return ctx.disabled && $event.stopPropagation();\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(6, NbSelectComponent_nb_option_list_6_Template, 2, 5, \"nb-option-list\", 5);\n      }\n\n      if (rf & 2) {\n        const _r2 = ɵngcc0.ɵɵreference(4);\n\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"ngClass\", ctx.selectButtonClasses);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.selectionModel.length)(\"ngIfElse\", _r2);\n      }\n    },\n    directives: function () {\n      return [ɵngcc2.NgClass, ɵngcc2.NgIf, NbIconComponent, NbPortalDirective, NbOptionListComponent];\n    },\n    styles: [\"[_nghost-%COMP%]{display:inline-block;max-width:100%}[dir=ltr]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{text-align:left}[dir=ltr]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{right:0.2em}[dir=rtl]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{text-align:right}[dir=rtl]   [_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{left:0.2em}.full-width[_nghost-%COMP%]{width:100%}.nb-transition[_nghost-%COMP%]   .select-button[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border-color,border-radius,box-shadow,color;transition-timing-function:ease-in}.select-button[_ngcontent-%COMP%]{position:relative;width:100%;overflow:hidden;text-overflow:ellipsis;text-transform:none;white-space:nowrap}nb-icon[_ngcontent-%COMP%]{font-size:1.5em;position:absolute;top:50%;transform:translateY(-50%);transition-duration:0.15s;transition-property:transform;transition-timing-function:ease-in}[dir=ltr][_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{right:.5rem}[dir=rtl][_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{left:.5rem}.open[_nghost-%COMP%]   nb-icon[_ngcontent-%COMP%]{transform:translateY(-50%) rotate(180deg)}\"],\n    changeDetection: 0\n  });\n  return NbSelectComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * NbOptionGroupComponent\n *\n * @styles\n *\n * option-group-text-color:\n * option-group-tiny-start-padding:\n * option-group-small-start-padding:\n * option-group-medium-start-padding:\n * option-group-large-start-padding:\n * option-group-giant-start-padding:\n **/\n\n\nlet NbOptionGroupComponent = /*#__PURE__*/(() => {\n  class NbOptionGroupComponent {\n    constructor() {\n      this.destroy$ = new Subject();\n      this._disabled = false;\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n\n      if (this.options) {\n        this.updateOptionsDisabledState();\n      }\n    }\n\n    get disabledAttribute() {\n      return this.disabled ? '' : null;\n    }\n\n    ngAfterContentInit() {\n      if (this.options.length) {\n        this.asyncUpdateOptionsDisabledState();\n      }\n\n      this.options.changes.pipe(takeUntil(this.destroy$)).subscribe(() => this.asyncUpdateOptionsDisabledState());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    /**\n     * Sets disabled state for each option to current group disabled state.\n     */\n\n\n    updateOptionsDisabledState() {\n      this.options.forEach(option => option.setDisabledByGroupState(this.disabled));\n    }\n    /**\n     * Updates options disabled state after promise resolution.\n     * This way change detection will be triggered after options state updated.\n     * Use this method when updating options during change detection run (e.g. QueryList.changes, lifecycle hooks).\n     */\n\n\n    asyncUpdateOptionsDisabledState() {\n      // Wrap Promise into Observable with `takeUntil(this.destroy$)` to prevent update if component destroyed.\n      from(Promise.resolve()).pipe(takeUntil(this.destroy$)).subscribe(() => this.updateOptionsDisabledState());\n    }\n\n  }\n\n  NbOptionGroupComponent.ɵfac = function NbOptionGroupComponent_Factory(t) {\n    return new (t || NbOptionGroupComponent)();\n  };\n\n  NbOptionGroupComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbOptionGroupComponent,\n    selectors: [[\"nb-option-group\"]],\n    contentQueries: function NbOptionGroupComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);\n      }\n    },\n    hostVars: 1,\n    hostBindings: function NbOptionGroupComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"disabled\", ctx.disabledAttribute);\n      }\n    },\n    inputs: {\n      disabled: \"disabled\",\n      title: \"title\"\n    },\n    ngContentSelectors: _c42,\n    decls: 3,\n    vars: 1,\n    consts: [[1, \"option-group-title\"]],\n    template: function NbOptionGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c41);\n        ɵngcc0.ɵɵelementStart(0, \"span\", 0);\n        ɵngcc0.ɵɵtext(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵprojection(2);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵtextInterpolate(ctx.title);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:block}.option-group-title[_ngcontent-%COMP%]{display:block}\"],\n    changeDetection: 0\n  });\n  return NbOptionGroupComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * The `NbOptionListComponent` is container component for `NbOptionGroupComponent` and`NbOptionComponent` list.\n *\n * @styles\n *\n * option-list-max-height:\n * option-list-shadow:\n * option-list-background-color:\n * option-list-border-style:\n * option-list-border-width:\n * option-list-border-color:\n * option-list-border-radius:\n * option-list-adjacent-border-color:\n * option-list-adjacent-border-style:\n * option-list-adjacent-border-width:\n * */\n\n\nlet NbOptionListComponent = /*#__PURE__*/(() => {\n  class NbOptionListComponent {\n    constructor() {\n      this.size = 'medium';\n    }\n\n    get positionTop() {\n      return this.position === NbPosition.TOP;\n    }\n\n    get positionBottom() {\n      return this.position === NbPosition.BOTTOM;\n    }\n\n    get sizeTiny() {\n      return this.size === 'tiny';\n    }\n\n    get sizeSmall() {\n      return this.size === 'small';\n    }\n\n    get sizeMedium() {\n      return this.size === 'medium';\n    }\n\n    get sizeLarge() {\n      return this.size === 'large';\n    }\n\n    get sizeGiant() {\n      return this.size === 'giant';\n    }\n\n  }\n\n  NbOptionListComponent.ɵfac = function NbOptionListComponent_Factory(t) {\n    return new (t || NbOptionListComponent)();\n  };\n\n  NbOptionListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbOptionListComponent,\n    selectors: [[\"nb-option-list\"]],\n    hostVars: 14,\n    hostBindings: function NbOptionListComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"position-top\", ctx.positionTop)(\"position-bottom\", ctx.positionBottom)(\"size-tiny\", ctx.sizeTiny)(\"size-small\", ctx.sizeSmall)(\"size-medium\", ctx.sizeMedium)(\"size-large\", ctx.sizeLarge)(\"size-giant\", ctx.sizeGiant);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      position: \"position\"\n    },\n    ngContentSelectors: _c0,\n    decls: 2,\n    vars: 0,\n    consts: [[1, \"option-list\"]],\n    template: function NbOptionListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"ul\", 0);\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbOptionListComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst NB_OPTION_LIST_COMPONENTS = [NbOptionListComponent, NbOptionComponent, NbOptionGroupComponent];\nlet NbOptionModule = /*#__PURE__*/(() => {\n  class NbOptionModule {}\n\n  NbOptionModule.ɵfac = function NbOptionModule_Factory(t) {\n    return new (t || NbOptionModule)();\n  };\n\n  NbOptionModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbOptionModule\n  });\n  NbOptionModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, NbCheckboxModule]]\n  });\n  return NbOptionModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbOptionModule, {\n    declarations: function () {\n      return [NbOptionListComponent, NbOptionComponent, NbOptionGroupComponent];\n    },\n    imports: function () {\n      return [CommonModule, NbCheckboxModule];\n    },\n    exports: function () {\n      return [NbOptionListComponent, NbOptionComponent, NbOptionGroupComponent];\n    }\n  });\n})();\n\nconst NB_SELECT_COMPONENTS = [NbSelectComponent, NbSelectLabelComponent];\nlet NbSelectModule = /*#__PURE__*/(() => {\n  class NbSelectModule {}\n\n  NbSelectModule.ɵfac = function NbSelectModule_Factory(t) {\n    return new (t || NbSelectModule)();\n  };\n\n  NbSelectModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbSelectModule\n  });\n  NbSelectModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbSharedModule, NbOverlayModule, NbButtonModule, NbInputModule, NbCardModule, NbIconModule, NbOptionModule], NbOptionModule]\n  });\n  return NbSelectModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbSelectModule, {\n    declarations: [NbSelectComponent, NbSelectLabelComponent],\n    imports: [NbSharedModule, NbOverlayModule, NbButtonModule, NbInputModule, NbCardModule, NbIconModule, NbOptionModule],\n    exports: [NbSelectComponent, NbSelectLabelComponent, NbOptionModule]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n// Component class scoped counter for aria attributes.\n\n\nlet lastAutocompleteId = 0;\n/**\n * The `NbAutocompleteComponent` overlay component.\n * Provides an `NbOptionList` overlay component.\n * */\n\nlet NbAutocompleteComponent = /*#__PURE__*/(() => {\n  class NbAutocompleteComponent {\n    constructor(cd) {\n      this.cd = cd;\n      this.destroy$ = new Subject();\n      /**\n       * Component scoped id for aria attributes.\n       * */\n\n      this.id = `nb-autocomplete-${lastAutocompleteId++}`;\n      /**\n       * @docs-private\n       * Current overlay position because of we have to toggle overlayPosition\n       * in [ngClass] direction.\n       */\n\n      this._overlayPosition = '';\n      /**\n       * Autocomplete size, available sizes:\n       * `tiny`, `small`, `medium` (default), `large`, `giant`\n       */\n\n      this.size = 'medium';\n      /**\n       * Flag passed as input to always make first option active.\n       * */\n\n      this.activeFirst = false;\n      /**\n       * Will be emitted when selected value changes.\n       * */\n\n      this.selectedChange = new EventEmitter();\n    }\n\n    get overlayPosition() {\n      return this._overlayPosition;\n    }\n\n    set overlayPosition(value) {\n      this._overlayPosition = value; // Need run change detection after first set from NbAutocompleteDirective\n\n      this.cd.detectChanges();\n    }\n    /**\n     * Returns width of the input.\n     * */\n\n\n    get hostWidth() {\n      return this.hostRef.nativeElement.getBoundingClientRect().width;\n    }\n\n    ngAfterContentInit() {\n      this.options.changes.pipe(takeUntil(this.destroy$)).subscribe(() => this.cd.detectChanges());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n    /**\n     * Autocomplete knows nothing about host html input element.\n     * So, attach method set input hostRef for styling.\n     * */\n\n\n    setHost(hostRef) {\n      this.hostRef = hostRef;\n    }\n    /**\n     * Propagate selected value.\n     * */\n\n\n    emitSelected(selected) {\n      this.selectedChange.emit(selected);\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n  }\n\n  NbAutocompleteComponent.ɵfac = function NbAutocompleteComponent_Factory(t) {\n    return new (t || NbAutocompleteComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbAutocompleteComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbAutocompleteComponent,\n    selectors: [[\"nb-autocomplete\"]],\n    contentQueries: function NbAutocompleteComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbOptionComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.options = _t);\n      }\n    },\n    viewQuery: function NbAutocompleteComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbPortalDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.portal = _t.first);\n      }\n    },\n    hostVars: 10,\n    hostBindings: function NbAutocompleteComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      activeFirst: \"activeFirst\",\n      handleDisplayFn: \"handleDisplayFn\",\n      optionsListClass: \"optionsListClass\",\n      optionsPanelClass: \"optionsPanelClass\"\n    },\n    outputs: {\n      selectedChange: \"selectedChange\"\n    },\n    ngContentSelectors: _c44,\n    decls: 1,\n    vars: 0,\n    consts: [[\"role\", \"listbox\", 3, \"size\", \"position\", \"width\", \"id\", \"empty\", \"ngClass\", 4, \"nbPortal\"], [\"role\", \"listbox\", 3, \"size\", \"position\", \"id\", \"ngClass\"]],\n    template: function NbAutocompleteComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c43);\n        ɵngcc0.ɵɵtemplate(0, NbAutocompleteComponent_nb_option_list_0_Template, 2, 8, \"nb-option-list\", 0);\n      }\n    },\n    directives: [NbPortalDirective, NbOptionListComponent, ɵngcc2.NgClass],\n    styles: [\"[_nghost-%COMP%]:hover{cursor:pointer}nb-option-list.empty[_ngcontent-%COMP%]{border:none}\"],\n    changeDetection: 0\n  });\n  return NbAutocompleteComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbAutocompleteDirective` provides a capability to expand input with\n * `NbAutocompleteComponent` overlay containing options to select and fill input with.\n *\n * @stacked-example(Showcase, autocomplete/autocomplete-showcase.component)\n *\n * ### Installation\n *\n * Import `NbAutocompleteModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbAutocompleteModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * You can bind control with form controls or ngModel.\n *\n * @stacked-example(Autocomplete form binding, autocomplete/autocomplete-form.component)\n *\n * Options in the autocomplete may be grouped using `nb-option-group` component.\n *\n * @stacked-example(Grouping, autocomplete/autocomplete-group.component)\n *\n * Autocomplete may change selected option value via provided function.\n *\n * @stacked-example(Custom display, autocomplete/autocomplete-custom-display.component)\n *\n * Also, autocomplete may make first option in option list active automatically.\n *\n * @stacked-example(Active first, autocomplete/autocomplete-active-first.component)\n *\n * */\n\n\nlet NbAutocompleteDirective = /*#__PURE__*/(() => {\n  class NbAutocompleteDirective {\n    constructor(hostRef, overlay, cd, triggerStrategyBuilder, positionBuilder, activeDescendantKeyManagerFactory, renderer) {\n      this.hostRef = hostRef;\n      this.overlay = overlay;\n      this.cd = cd;\n      this.triggerStrategyBuilder = triggerStrategyBuilder;\n      this.positionBuilder = positionBuilder;\n      this.activeDescendantKeyManagerFactory = activeDescendantKeyManagerFactory;\n      this.renderer = renderer;\n      this.destroy$ = new Subject();\n\n      this._onChange = () => {};\n\n      this._onTouched = () => {};\n      /**\n       * Determines options overlay offset (in pixels).\n       **/\n\n\n      this.overlayOffset = 8;\n      this._focusInputOnValueChange = true;\n      /**\n       * Determines options overlay scroll strategy.\n       **/\n\n      this.scrollStrategy = 'block';\n      this.role = 'combobox';\n      this.ariaAutocomplete = 'list';\n      this.hasPopup = 'true';\n    }\n    /**\n     * Determines is autocomplete overlay opened.\n     * */\n\n\n    get isOpen() {\n      return this.overlayRef && this.overlayRef.hasAttached();\n    }\n    /**\n     * Determines is autocomplete overlay closed.\n     * */\n\n\n    get isClosed() {\n      return !this.isOpen;\n    }\n    /**\n     * Provides autocomplete component.\n     * */\n\n\n    get autocomplete() {\n      return this._autocomplete;\n    }\n\n    set autocomplete(autocomplete) {\n      this._autocomplete = autocomplete;\n    }\n    /**\n     * Determines if the input will be focused when the control value is changed\n     * */\n\n\n    get focusInputOnValueChange() {\n      return this._focusInputOnValueChange;\n    }\n\n    set focusInputOnValueChange(value) {\n      this._focusInputOnValueChange = convertToBoolProperty(value);\n    }\n\n    get top() {\n      return this.isOpen && this.autocomplete.options.length && this.autocomplete.overlayPosition === NbPosition.TOP;\n    }\n\n    get bottom() {\n      return this.isOpen && this.autocomplete.options.length && this.autocomplete.overlayPosition === NbPosition.BOTTOM;\n    }\n\n    get ariaExpanded() {\n      return this.isOpen && this.isOpen.toString();\n    }\n\n    get ariaOwns() {\n      return this.isOpen ? this.autocomplete.id : null;\n    }\n\n    get ariaActiveDescendant() {\n      return this.isOpen && this.keyManager.activeItem ? this.keyManager.activeItem.id : null;\n    }\n\n    ngAfterViewInit() {\n      this.triggerStrategy = this.createTriggerStrategy();\n      this.subscribeOnTriggers();\n    }\n\n    ngOnDestroy() {\n      if (this.triggerStrategy) {\n        this.triggerStrategy.destroy();\n      }\n\n      if (this.positionStrategy) {\n        this.positionStrategy.dispose();\n      }\n\n      if (this.overlayRef) {\n        this.overlayRef.dispose();\n      }\n\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    handleInput() {\n      const currentValue = this.hostRef.nativeElement.value;\n\n      this._onChange(currentValue);\n\n      this.setHostInputValue(this.getDisplayValue(currentValue));\n      this.show();\n    }\n\n    handleKeydown() {\n      this.show();\n    }\n\n    handleBlur() {\n      this._onTouched();\n    }\n\n    show() {\n      if (this.isClosed) {\n        this.attachToOverlay();\n        this.setActiveItem();\n      }\n    }\n\n    hide() {\n      if (this.isOpen) {\n        this.overlayRef.detach(); // Need to update class via @HostBinding\n\n        this.cd.markForCheck();\n      }\n    }\n\n    writeValue(value) {\n      this.handleInputValueUpdate(value);\n    }\n\n    registerOnChange(fn) {\n      this._onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this._onTouched = fn;\n    }\n\n    setDisabledState(disabled) {\n      this.renderer.setProperty(this.hostRef.nativeElement, 'disabled', disabled);\n    }\n\n    subscribeOnOptionClick() {\n      /**\n       * If the user changes provided options list in the runtime we have to handle this\n       * and resubscribe on options selection changes event.\n       * Otherwise, the user will not be able to select new options.\n       * */\n      this.autocomplete.options.changes.pipe(tap(() => this.setActiveItem()), startWith(this.autocomplete.options), switchMap(options => {\n        return merge(...options.map(option => option.click));\n      }), takeUntil(this.destroy$)).subscribe(clickedOption => this.handleInputValueUpdate(clickedOption.value));\n    }\n\n    subscribeOnPositionChange() {\n      this.positionStrategy.positionChange.pipe(takeUntil(this.destroy$)).subscribe(position => {\n        this.autocomplete.overlayPosition = position;\n        this.cd.detectChanges();\n      });\n    }\n\n    getActiveItem() {\n      return this.keyManager.activeItem;\n    }\n\n    setupAutocomplete() {\n      this.autocomplete.setHost(this.customOverlayHost || this.hostRef);\n    }\n\n    getDisplayValue(value) {\n      const displayFn = this.autocomplete.handleDisplayFn;\n      return displayFn ? displayFn(value) : value;\n    }\n\n    getContainer() {\n      return this.overlayRef && this.isOpen && {\n        location: {\n          nativeElement: this.overlayRef.overlayElement\n        }\n      };\n    }\n\n    handleInputValueUpdate(value) {\n      if (value === undefined || value === null) {\n        return;\n      }\n\n      this.setHostInputValue(value);\n\n      this._onChange(value);\n\n      if (this.focusInputOnValueChange) {\n        this.hostRef.nativeElement.focus();\n      }\n\n      this.autocomplete.emitSelected(value);\n      this.hide();\n    }\n\n    subscribeOnTriggers() {\n      this.triggerStrategy.show$.pipe(filter(() => this.isClosed)).subscribe(() => this.show());\n      this.triggerStrategy.hide$.pipe(filter(() => this.isOpen)).subscribe(() => this.hide());\n    }\n\n    createTriggerStrategy() {\n      return this.triggerStrategyBuilder.trigger(NbTrigger.FOCUS).host(this.hostRef.nativeElement).container(() => this.getContainer()).build();\n    }\n\n    createKeyManager() {\n      this.keyManager = this.activeDescendantKeyManagerFactory.create(this.autocomplete.options);\n    }\n\n    setHostInputValue(value) {\n      this.hostRef.nativeElement.value = this.getDisplayValue(value);\n    }\n\n    createPositionStrategy() {\n      return this.positionBuilder.connectedTo(this.customOverlayHost || this.hostRef).position(NbPosition.BOTTOM).offset(this.overlayOffset).adjustment(NbAdjustment.VERTICAL);\n    }\n\n    subscribeOnOverlayKeys() {\n      this.overlayRef.keydownEvents().pipe(takeUntil(this.destroy$)).subscribe(event => {\n        if (event.keyCode === ESCAPE && this.isOpen) {\n          event.preventDefault();\n          this.hostRef.nativeElement.focus();\n          this.hide();\n        } else if (event.keyCode === ENTER) {\n          event.preventDefault();\n          const activeItem = this.getActiveItem();\n\n          if (!activeItem) {\n            return;\n          }\n\n          this.handleInputValueUpdate(activeItem.value);\n        } else {\n          this.keyManager.onKeydown(event);\n        }\n      });\n    }\n\n    setActiveItem() {\n      // If autocomplete has activeFirst input set to true,\n      // keyManager set first option active, otherwise - reset active option.\n      const mode = this.autocomplete.activeFirst ? NbKeyManagerActiveItemMode.FIRST_ACTIVE : NbKeyManagerActiveItemMode.RESET_ACTIVE;\n      this.keyManager.setActiveItem(mode);\n      this.cd.detectChanges();\n    }\n\n    attachToOverlay() {\n      if (!this.overlayRef) {\n        this.setupAutocomplete();\n        this.initOverlay();\n      }\n\n      this.overlayRef.attach(this.autocomplete.portal);\n    }\n\n    createOverlay() {\n      const scrollStrategy = this.createScrollStrategy();\n      this.overlayRef = this.overlay.create({\n        positionStrategy: this.positionStrategy,\n        scrollStrategy,\n        panelClass: this.autocomplete.optionsPanelClass\n      });\n    }\n\n    initOverlay() {\n      this.positionStrategy = this.createPositionStrategy();\n      this.createKeyManager();\n      this.subscribeOnPositionChange();\n      this.subscribeOnOptionClick();\n      this.checkOverlayVisibility();\n      this.createOverlay();\n      this.subscribeOnOverlayKeys();\n    }\n\n    checkOverlayVisibility() {\n      this.autocomplete.options.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        if (!this.autocomplete.options.length) {\n          this.hide();\n        }\n      });\n    }\n\n    createScrollStrategy() {\n      return this.overlay.scrollStrategies[this.scrollStrategy]();\n    }\n\n  }\n\n  NbAutocompleteDirective.ɵfac = function NbAutocompleteDirective_Factory(t) {\n    return new (t || NbAutocompleteDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(NbActiveDescendantKeyManagerFactoryService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  NbAutocompleteDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbAutocompleteDirective,\n    selectors: [[\"input\", \"nbAutocomplete\", \"\"]],\n    hostVars: 10,\n    hostBindings: function NbAutocompleteDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"input\", function NbAutocompleteDirective_input_HostBindingHandler() {\n          return ctx.handleInput();\n        })(\"keydown.arrowDown\", function NbAutocompleteDirective_keydown_arrowDown_HostBindingHandler() {\n          return ctx.handleKeydown();\n        })(\"keydown.arrowUp\", function NbAutocompleteDirective_keydown_arrowUp_HostBindingHandler() {\n          return ctx.handleKeydown();\n        })(\"blur\", function NbAutocompleteDirective_blur_HostBindingHandler() {\n          return ctx.handleBlur();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role)(\"aria-autocomplete\", ctx.ariaAutocomplete)(\"haspopup\", ctx.hasPopup)(\"aria-expanded\", ctx.ariaExpanded)(\"aria-owns\", ctx.ariaOwns)(\"aria-activedescendant\", ctx.ariaActiveDescendant);\n        ɵngcc0.ɵɵclassProp(\"nb-autocomplete-position-top\", ctx.top)(\"nb-autocomplete-position-bottom\", ctx.bottom);\n      }\n    },\n    inputs: {\n      overlayOffset: \"overlayOffset\",\n      scrollStrategy: \"scrollStrategy\",\n      autocomplete: [\"nbAutocomplete\", \"autocomplete\"],\n      focusInputOnValueChange: \"focusInputOnValueChange\",\n      customOverlayHost: \"customOverlayHost\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbAutocompleteDirective),\n      multi: true\n    }])]\n  });\n  return NbAutocompleteDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_AUTOCOMPLETE_COMPONENTS = [NbAutocompleteComponent, NbAutocompleteDirective];\nlet NbAutocompleteModule = /*#__PURE__*/(() => {\n  class NbAutocompleteModule {}\n\n  NbAutocompleteModule.ɵfac = function NbAutocompleteModule_Factory(t) {\n    return new (t || NbAutocompleteModule)();\n  };\n\n  NbAutocompleteModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbAutocompleteModule\n  });\n  NbAutocompleteModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, FormsModule, NbOverlayModule, NbCardModule, NbOptionModule], NbOptionModule]\n  });\n  return NbAutocompleteModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbAutocompleteModule, {\n    declarations: function () {\n      return [NbAutocompleteComponent, NbAutocompleteDirective];\n    },\n    imports: function () {\n      return [CommonModule, FormsModule, NbOverlayModule, NbCardModule, NbOptionModule];\n    },\n    exports: function () {\n      return [NbAutocompleteComponent, NbAutocompleteDirective, NbOptionModule];\n    }\n  });\n})();\n\nvar NbWindowState = /*#__PURE__*/(() => {\n  (function (NbWindowState) {\n    NbWindowState[\"MINIMIZED\"] = \"minimized\";\n    NbWindowState[\"MAXIMIZED\"] = \"maximized\";\n    NbWindowState[\"FULL_SCREEN\"] = \"full-screen\";\n  })(NbWindowState || (NbWindowState = {}));\n\n  return NbWindowState;\n})();\nconst NB_WINDOW_DEFAULT_BUTTONS_CONFIG = {\n  minimize: true,\n  maximize: true,\n  fullScreen: true\n};\n/**\n * Window configuration options.\n */\n\nclass NbWindowConfig {\n  constructor(...configs) {\n    /**\n     * Window title.\n     */\n    this.title = '';\n    /**\n     * Initial window state. Full screen by default.\n     */\n\n    this.initialState = NbWindowState.FULL_SCREEN;\n    /**\n     * If true than backdrop will be rendered behind window.\n     * By default set to true.\n     */\n\n    this.hasBackdrop = true;\n    /**\n     * If set to true mouse clicks on backdrop will close a window.\n     * Default is true.\n     */\n\n    this.closeOnBackdropClick = true;\n    /**\n     * If true then escape press will close a window.\n     * Default is true.\n     */\n\n    this.closeOnEsc = true;\n    /**\n     * Class to be applied to the window.\n     */\n\n    this.windowClass = '';\n    /**\n     * Both, template and component may receive data through `config.context` property.\n     * For components, this data will be set as component properties.\n     * For templates, you can access it inside template as $implicit.\n     */\n\n    this.context = {};\n    /**\n     * Where the attached component should live in Angular's *logical* component tree.\n     * This affects what is available for injection and the change detection order for the\n     * component instantiated inside of the window. This does not affect where the window\n     * content will be rendered.\n     */\n\n    this.viewContainerRef = null;\n    /**\n     * Windows control buttons can be hidden by setting according property to false.\n     */\n\n    this.buttons = {};\n    Object.assign(this, ...configs);\n    this.applyDefaultButtonConfig();\n  }\n\n  applyDefaultButtonConfig() {\n    Object.assign(this, {\n      buttons: Object.assign(Object.assign({}, NB_WINDOW_DEFAULT_BUTTONS_CONFIG), this.buttons)\n    });\n  }\n\n}\n\nconst NB_WINDOW_CONTENT = new InjectionToken('Nebular Window Content');\nconst NB_WINDOW_CONFIG = new InjectionToken('Nebular Window Config');\nconst NB_WINDOW_CONTEXT = new InjectionToken('Nebular Window Context');\n/**\n * The `NbWindowRef` helps to manipulate window after it was created.\n * The window can be dismissed by using `close` method of the windowRef.\n * You can access rendered component as `componentRef` property of the windowRef.\n */\n\nclass NbWindowRef {\n  constructor(config) {\n    this.config = config;\n    this.stateChange$ = new ReplaySubject(1);\n    this._closed = false;\n    this.closed$ = new Subject();\n    this.state = config.initialState;\n  }\n  /**\n   * Current window state.\n   */\n\n\n  get state() {\n    return this.stateValue;\n  }\n\n  set state(newState) {\n    if (newState && this.stateValue !== newState) {\n      this.prevStateValue = this.state;\n      this.stateValue = newState;\n      this.stateChange$.next({\n        oldState: this.prevStateValue,\n        newState\n      });\n    }\n  }\n  /**\n   * Emits when window state change.\n   */\n\n\n  get stateChange() {\n    return this.stateChange$.asObservable();\n  }\n  /**\n   * Emits when window was closed.\n   */\n\n\n  get onClose() {\n    return this.closed$.asObservable();\n  }\n  /**\n   * Minimize window.\n   */\n\n\n  minimize() {\n    this.state = NbWindowState.MINIMIZED;\n  }\n  /**\n   * Maximize window.\n   */\n\n\n  maximize() {\n    this.state = NbWindowState.MAXIMIZED;\n  }\n  /**\n   * Set window on top.\n   */\n\n\n  fullScreen() {\n    this.state = NbWindowState.FULL_SCREEN;\n  }\n\n  toPreviousState() {\n    this.state = this.prevStateValue;\n  }\n  /**\n   * Closes window.\n   * */\n\n\n  close() {\n    if (this._closed) {\n      return;\n    }\n\n    this._closed = true;\n    this.componentRef.destroy();\n    this.stateChange$.complete();\n    this.closed$.next();\n    this.closed$.complete();\n  }\n\n}\n\nlet NbWindowsContainerComponent = /*#__PURE__*/(() => {\n  class NbWindowsContainerComponent {}\n\n  NbWindowsContainerComponent.ɵfac = function NbWindowsContainerComponent_Factory(t) {\n    return new (t || NbWindowsContainerComponent)();\n  };\n\n  NbWindowsContainerComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbWindowsContainerComponent,\n    selectors: [[\"nb-windows-container\"]],\n    viewQuery: function NbWindowsContainerComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c45, 7, ViewContainerRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.viewContainerRef = _t.first);\n      }\n    },\n    decls: 2,\n    vars: 0,\n    consts: [[\"viewContainerRef\", \"\"]],\n    template: function NbWindowsContainerComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, null, 0);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:flex-end;overflow-x:auto}[_nghost-%COMP%]     nb-window:not(.full-screen){margin:0 2rem}\"]\n  });\n  return NbWindowsContainerComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbWindowComponent = /*#__PURE__*/(() => {\n  class NbWindowComponent {\n    constructor(content, context, windowRef, config, focusTrapFactory, elementRef, renderer) {\n      this.content = content;\n      this.context = context;\n      this.windowRef = windowRef;\n      this.config = config;\n      this.focusTrapFactory = focusTrapFactory;\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n    }\n\n    get isFullScreen() {\n      return this.windowRef.state === NbWindowState.FULL_SCREEN;\n    }\n\n    get maximized() {\n      return this.windowRef.state === NbWindowState.MAXIMIZED;\n    }\n\n    get minimized() {\n      return this.windowRef.state === NbWindowState.MINIMIZED;\n    }\n\n    get showMinimize() {\n      return this.config.buttons.minimize;\n    }\n\n    get showMaximize() {\n      return this.config.buttons.maximize;\n    }\n\n    get showFullScreen() {\n      return this.config.buttons.fullScreen;\n    }\n\n    ngOnInit() {\n      this.focusTrap = this.focusTrapFactory.create(this.elementRef.nativeElement);\n      this.focusTrap.blurPreviouslyFocusedElement();\n      this.focusTrap.focusInitialElement();\n\n      if (this.config.windowClass) {\n        this.renderer.addClass(this.elementRef.nativeElement, this.config.windowClass);\n      }\n    }\n\n    ngAfterViewChecked() {\n      if (!this.overlayContainer || this.overlayContainer.isAttached) {\n        return;\n      }\n\n      if (this.content instanceof TemplateRef) {\n        this.attachTemplate();\n      } else {\n        this.attachComponent();\n      }\n    }\n\n    ngOnDestroy() {\n      if (this.focusTrap) {\n        this.focusTrap.restoreFocus();\n      }\n\n      this.close();\n    }\n\n    minimize() {\n      if (this.windowRef.state === NbWindowState.MINIMIZED) {\n        this.windowRef.toPreviousState();\n      } else {\n        this.windowRef.minimize();\n      }\n    }\n\n    maximize() {\n      this.windowRef.maximize();\n    }\n\n    fullScreen() {\n      this.windowRef.fullScreen();\n    }\n\n    maximizeOrFullScreen() {\n      if (this.windowRef.state === NbWindowState.MINIMIZED && this.showMaximize) {\n        this.maximize();\n      } else {\n        this.fullScreen();\n      }\n    }\n\n    close() {\n      this.windowRef.close();\n    }\n\n    attachTemplate() {\n      this.overlayContainer.attachTemplatePortal(new NbTemplatePortal(this.content, null, this.context));\n    }\n\n    attachComponent() {\n      const portal = new NbComponentPortal(this.content, null, null, this.cfr);\n      const ref = this.overlayContainer.attachComponentPortal(portal, this.context);\n      ref.changeDetectorRef.detectChanges();\n    }\n\n  }\n\n  NbWindowComponent.ɵfac = function NbWindowComponent_Factory(t) {\n    return new (t || NbWindowComponent)(ɵngcc0.ɵɵdirectiveInject(NB_WINDOW_CONTENT), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW_CONTEXT), ɵngcc0.ɵɵdirectiveInject(NbWindowRef), ɵngcc0.ɵɵdirectiveInject(NbWindowConfig), ɵngcc0.ɵɵdirectiveInject(NbFocusTrapFactoryService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  NbWindowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbWindowComponent,\n    selectors: [[\"nb-window\"]],\n    viewQuery: function NbWindowComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(NbOverlayContainerComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.overlayContainer = _t.first);\n      }\n    },\n    hostVars: 6,\n    hostBindings: function NbWindowComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"full-screen\", ctx.isFullScreen)(\"maximized\", ctx.maximized)(\"minimized\", ctx.minimized);\n      }\n    },\n    inputs: {\n      cfr: \"cfr\"\n    },\n    decls: 11,\n    vars: 5,\n    consts: [[\"cdkFocusInitial\", \"\", \"tabindex\", \"-1\", 1, \"title\"], [1, \"buttons\"], [4, \"ngIf\"], [\"nbButton\", \"\", \"ghost\", \"\", 3, \"click\"], [\"icon\", \"close-outline\", \"pack\", \"nebular-essentials\"], [\"icon\", \"minus-outline\", \"pack\", \"nebular-essentials\"], [\"nbButton\", \"\", \"ghost\", \"\", 3, \"click\", 4, \"ngIf\"], [\"icon\", \"collapse-outline\", \"pack\", \"nebular-essentials\"], [\"icon\", \"expand-outline\", \"pack\", \"nebular-essentials\"]],\n    template: function NbWindowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"nb-card\");\n        ɵngcc0.ɵɵelementStart(1, \"nb-card-header\");\n        ɵngcc0.ɵɵelementStart(2, \"div\", 0);\n        ɵngcc0.ɵɵtext(3);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(4, \"div\", 1);\n        ɵngcc0.ɵɵtemplate(5, NbWindowComponent_ng_container_5_Template, 3, 0, \"ng-container\", 2);\n        ɵngcc0.ɵɵtemplate(6, NbWindowComponent_ng_container_6_Template, 2, 1, \"ng-container\", 2);\n        ɵngcc0.ɵɵtemplate(7, NbWindowComponent_ng_container_7_Template, 2, 1, \"ng-container\", 2);\n        ɵngcc0.ɵɵelementStart(8, \"button\", 3);\n        ɵngcc0.ɵɵlistener(\"click\", function NbWindowComponent_Template_button_click_8_listener() {\n          return ctx.close();\n        });\n        ɵngcc0.ɵɵelement(9, \"nb-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(10, NbWindowComponent_nb_card_body_10_Template, 2, 0, \"nb-card-body\", 2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵtextInterpolate(ctx.config.title);\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showMinimize);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showMaximize);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.showFullScreen);\n        ɵngcc0.ɵɵadvance(3);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.maximized || ctx.isFullScreen);\n      }\n    },\n    directives: [NbCardComponent, NbCardHeaderComponent, ɵngcc2.NgIf, NbButtonComponent, NbIconComponent, NbCardBodyComponent, NbOverlayContainerComponent],\n    styles: [\"[_nghost-%COMP%]{flex:1 0 auto;min-width:20rem}[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{margin:0}[_nghost-%COMP%]   nb-card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;overflow:hidden}[_nghost-%COMP%]   .title[_ngcontent-%COMP%]{flex:1 0 auto;margin-right:3rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]{width:9.5rem;display:flex;justify-content:flex-end}[_nghost-%COMP%]   .buttons[_ngcontent-%COMP%]   [nbButton][_ngcontent-%COMP%]{flex:0 0 3rem}.full-screen[_nghost-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%, -50%)}.maximized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;height:auto}.minimized[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]   nb-card-header[_ngcontent-%COMP%]{border-bottom:none}\"]\n  });\n  return NbWindowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * The `NbWindowService` can be used to open windows.\n *\n * @stacked-example(Showcase, window/window-showcase.component)\n *\n * ### Installation\n *\n * Import `NbWindowModule` to your app module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbWindowModule.forRoot(config),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * If you are using it in a lazy loaded module than you have to install `NbWindowModule.forChild`:\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbWindowModule.forChild(config),\n *   ],\n * })\n * export class LazyLoadedModule { }\n * ```\n *\n * ### Usage\n *\n * A new window can be opened by calling the `open` method with a component or template to be loaded\n * and an optional configuration.\n * `open` method will return `NbWindowRef` that can be used for the further manipulations.\n *\n * ```ts\n * const windowRef = this.windowService.open(MyComponent, { ... });\n * ```\n *\n * `NbWindowRef` gives you ability manipulate opened window.\n * Also, you can inject `NbWindowRef` inside provided component which rendered in window.\n *\n * ```ts\n * this.windowService.open(MyWindowComponent, { ... });\n *\n * // my.component.ts\n * constructor(protected windowRef: NbWindowRef) {\n * }\n *\n * minimize() {\n *   this.windowRef.minimize();\n * }\n *\n * close() {\n *   this.windowRef.close();\n * }\n * ```\n *\n * Instead of component you can create window from TemplateRef. As usual you can access context provided via config\n * via `let-` variables. Also you can get reference to the `NbWindowRef` in context's `windowRef` property.\n *\n * @stacked-example(Window content from TemplateRef, window/template-window.component)\n *\n * ### Configuration\n *\n * As mentioned above, `open` method of the `NbWindowService` may receive optional configuration options.\n * Also, you can modify default windows configuration through `NbWindowModule.forRoot({ ... })`.\n * You can read about all available options on [API tab](docs/components/window/api#nbwindowconfig).\n *\n * @stacked-example(Configuration, window/windows-backdrop.component)\n *\n * You can configure which buttons are available in a window via the `buttons` property of the window config.\n * @stacked-example(Control buttons, window/window-controls.component)\n *\n */\n\n\nlet NbWindowService = /*#__PURE__*/(() => {\n  class NbWindowService {\n    constructor(componentFactoryResolver, overlayService, overlayPositionBuilder, blockScrollStrategy, defaultWindowsConfig, cfr, document) {\n      this.componentFactoryResolver = componentFactoryResolver;\n      this.overlayService = overlayService;\n      this.overlayPositionBuilder = overlayPositionBuilder;\n      this.blockScrollStrategy = blockScrollStrategy;\n      this.defaultWindowsConfig = defaultWindowsConfig;\n      this.cfr = cfr;\n      this.openWindows = [];\n      this.document = document;\n    }\n    /**\n     * Opens new window.\n     * @param windowContent\n     * @param windowConfig\n     * */\n\n\n    open(windowContent, windowConfig = {}) {\n      if (this.shouldCreateWindowsContainer()) {\n        this.createWindowsContainer();\n      }\n\n      const config = new NbWindowConfig(this.defaultWindowsConfig, windowConfig);\n      const windowRef = new NbWindowRef(config);\n      windowRef.componentRef = this.appendWindow(windowContent, config, windowRef);\n      this.openWindows.push(windowRef);\n      this.subscribeToEvents(windowRef);\n      return windowRef;\n    }\n\n    shouldCreateWindowsContainer() {\n      if (this.windowsContainerViewRef) {\n        const containerEl = this.windowsContainerViewRef.element.nativeElement;\n        return !this.document.body.contains(containerEl);\n      }\n\n      return true;\n    }\n\n    createWindowsContainer() {\n      if (this.overlayRef) {\n        this.overlayRef.dispose();\n      }\n\n      this.overlayRef = this.overlayService.create({\n        scrollStrategy: this.overlayService.scrollStrategies.noop(),\n        positionStrategy: this.overlayPositionBuilder.global().bottom().right(),\n        hasBackdrop: true\n      });\n      const windowsContainerPortal = new NbComponentPortal(NbWindowsContainerComponent, null, null, this.cfr);\n      const overlayRef = this.overlayRef.attach(windowsContainerPortal);\n      this.windowsContainerViewRef = overlayRef.instance.viewContainerRef;\n    }\n\n    appendWindow(content, config, windowRef) {\n      const context = content instanceof TemplateRef ? {\n        $implicit: config.context,\n        windowRef\n      } : config.context;\n      const providers = [{\n        provide: NB_WINDOW_CONTENT,\n        useValue: content\n      }, {\n        provide: NB_WINDOW_CONTEXT,\n        useValue: context\n      }, {\n        provide: NbWindowConfig,\n        useValue: config\n      }, {\n        provide: NbWindowRef,\n        useValue: windowRef\n      }];\n      const parentInjector = config.viewContainerRef ? config.viewContainerRef.injector : this.windowsContainerViewRef.injector;\n      const injector = Injector.create({\n        parent: parentInjector,\n        providers\n      });\n      const windowFactory = this.componentFactoryResolver.resolveComponentFactory(NbWindowComponent);\n      const ref = this.windowsContainerViewRef.createComponent(windowFactory, null, injector);\n      ref.instance.cfr = this.cfr;\n      ref.changeDetectorRef.detectChanges();\n      return ref;\n    }\n\n    subscribeToEvents(windowRef) {\n      if (windowRef.config.closeOnBackdropClick) {\n        this.overlayRef.backdropClick().subscribe(() => windowRef.close());\n      }\n\n      if (windowRef.config.closeOnEsc) {\n        this.overlayRef.keydownEvents().pipe(filter(event => event.keyCode === 27)).subscribe(() => windowRef.close());\n      }\n\n      windowRef.stateChange.subscribe(() => this.checkAndUpdateOverlay());\n      windowRef.onClose.subscribe(() => {\n        this.openWindows.splice(this.openWindows.indexOf(windowRef), 1);\n        this.checkAndUpdateOverlay();\n      });\n    }\n\n    checkAndUpdateOverlay() {\n      const fullScreenWindows = this.openWindows.filter(w => w.state === NbWindowState.FULL_SCREEN);\n\n      if (fullScreenWindows.length > 0) {\n        this.blockScrollStrategy.enable();\n      } else {\n        this.blockScrollStrategy.disable();\n      }\n\n      if (fullScreenWindows.some(w => w.config.hasBackdrop)) {\n        this.overlayRef.backdropElement.removeAttribute('hidden');\n      } else {\n        this.overlayRef.backdropElement.setAttribute('hidden', '');\n      }\n    }\n\n  }\n\n  NbWindowService.ɵfac = function NbWindowService_Factory(t) {\n    return new (t || NbWindowService)(ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NbOverlayService), ɵngcc0.ɵɵinject(NbOverlayPositionBuilder), ɵngcc0.ɵɵinject(NbBlockScrollStrategyAdapter), ɵngcc0.ɵɵinject(NB_WINDOW_CONFIG), ɵngcc0.ɵɵinject(ɵngcc0.ComponentFactoryResolver), ɵngcc0.ɵɵinject(NB_DOCUMENT));\n  };\n\n  NbWindowService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbWindowService,\n    factory: NbWindowService.ɵfac\n  });\n  return NbWindowService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbWindowModule = /*#__PURE__*/(() => {\n  class NbWindowModule {\n    static forRoot(defaultConfig) {\n      return {\n        ngModule: NbWindowModule,\n        providers: [NbWindowService, {\n          provide: NB_WINDOW_CONFIG,\n          useValue: defaultConfig\n        }]\n      };\n    }\n\n    static forChild(defaultConfig) {\n      return {\n        ngModule: NbWindowModule,\n        providers: [NbWindowService, {\n          provide: NB_WINDOW_CONFIG,\n          useValue: defaultConfig\n        }]\n      };\n    }\n\n  }\n\n  NbWindowModule.ɵfac = function NbWindowModule_Factory(t) {\n    return new (t || NbWindowModule)();\n  };\n\n  NbWindowModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbWindowModule\n  });\n  NbWindowModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, NbOverlayModule, NbCardModule, NbIconModule, NbButtonModule]]\n  });\n  return NbWindowModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbWindowModule, {\n    declarations: function () {\n      return [NbWindowsContainerComponent, NbWindowComponent];\n    },\n    imports: function () {\n      return [CommonModule, NbOverlayModule, NbCardModule, NbIconModule, NbButtonModule];\n    }\n  });\n})();\n/**\n * The `NbTimePickerDirective` is form control that gives you ability to select a time. The timepicker\n * is shown when input receives a `focus` event.\n * ```html\n * <input [nbTimepicker]=\"timepicker\">\n * <nb-timepicker #timepicker></nb-timepicker>\n * ```\n *\n * @stacked-example(Showcase, timepicker/timepicker-showcase.component)\n *\n * ### Installation\n *\n * Import `NbTimepickerModule.forRoot()` to your root module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTimepickerModule.forRoot(),\n *   ],\n * })\n * export class AppModule { }\n * ```\n * And `NbTimepickerModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTimepickerModule,\n *   ],\n * })\n * export class PageModule { }\n *\n * ```\n * <div id=\"native-parse-issue\" class=\"note note-warning\">\n * <div class=\"note-title\">Note</div>\n * <div class=\"note-body\">\n * Timepicker uses native Date object by default, which doesn't support parsing by custom format.\n * According to the ECMAScript specification, the only supported format is a format described by ISO 8061 standard.\n * This standard requires date part to be included in the date string,\n * meaning you have to type a date+time in the input.\n * We highly recommend you to use NbDateFnsDateModule or NbMomentDateModule to be able to support time only strings in\n * the timepicker inputs. These modules use date-fns and moment date libraries, which provide capabilities\n * to parse time only strings.\n * See \"Formatting Issue\" at\n * <a href=\"https://akveo.github.io/nebular/docs/components/datepicker/overview#formatting-issue\">Date picker docs</a>\n * for installation instructions.\n * </div>\n * </div>\n * <hr>\n *\n * ### Usage\n *\n * To show seconds column along with hours and minutes use `withSeconds` input\n *\n * ```html\n * <input [nbTimepicker]=\"timepicker\">\n * <nb-timepicker #timepicker withSeconds></nb-timepicker>\n * ```\n * @stacked-example(Time picker with seconds, timepicker/timepicker-with-seconds.component)\n *\n * To force timepicker work in 12 hours format, use `twelveHoursFormat` input.\n * By default, timepicker choose 12 or 24 formats based on application locale standards\n *\n * ```html\n * <input [nbTimepicker]=\"timepicker\" twelveHoursFormat>\n * <nb-timepicker #timepicker></nb-timepicker>\n * ```\n *\n * @stacked-example(Twelve hours format showcase, timepicker/timepicker-twelve-hours-format.component)\n *\n * A single column picker with options value as time and minute, so users won’t be able to pick\n * hours and minutes individually.\n * You can control options minutes offset via `step` input, e.g.: 11:00, 11:20, 11:40...'\n *\n * @stacked-example(Single column, timepicker/timepicker-single-column.component)\n *\n * Timepicker support forms and reactive forms API so you can provide value using `formControl` and `ngModel` directives\n * @stacked-example(Form control, timepicker/timepicker-form-control.component)\n *\n * <input [nbTimepicker]=\"timepicker\" twelveHoursFormat>\n * <nb-timepicker #timepicke [formControl]=\"formControl\"></nb-timepicker>\n *\n * @stacked-example(NgModel, timepicker/timepicker-ng-model.component)\n *\n * <input [nbTimepicker]=\"timepicker\" twelveHoursFormat>\n * <nb-timepicker #timepicke [ngModel]=\"date\"></nb-timepicker>\n *\n * You can provide localized versions of the timepicker text via the `localization` property of the config\n * object passed to the `forRoot` or `forChild` methods of the `NbTimepickerModule`:\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTimepickerModule.forRoot({\n *       localization: {\n *         hoursText: 'Hr',\n *         minutesText: 'Min',\n *         secondsText: 'Sec',\n *         ampmText: 'Am/Pm',\n *       }\n *     }),\n *   ],\n * })\n * export class AppModule { }\n * ```\n *\n * @styles\n *\n * timepicker-cell-text-color:\n * timepicker-cell-hover-background-color:\n * timepicker-cell-hover-text-color:\n * timepicker-cell-focus-background-color:\n * timepicker-cell-focus-text-color:\n * timepicker-cell-active-background-color:\n * timepicker-cell-active-text-color:\n * timepicker-cell-text-font-size:\n * timepicker-cell-text-font-family:\n * timepicker-cell-text-line-height:\n * timepicker-cell-text-font-weight:\n * timepicker-cell-height:\n * timepicker-header-cell-text-color:\n * timepicker-header-cell-text-font-size:\n * timepicker-header-cell-text-font-family:\n * timepicker-header-cell-height:\n * timepicker-header-cell-text-line-height:\n * timepicker-header-cell-text-font-weight:\n * timepicker-border-color:\n * timepicker-border-style:\n * timepicker-border-width:\n * timepicker-scrollbar-color:\n * timepicker-scrollbar-background-color:\n * timepicker-scrollbar-width:\n * timepicker-single-column-width:\n * timepicker-multiple-column-width:\n * timepicker-title-height:\n * timepicker-title-padding:\n * timepicker-container-width:\n * timepicker-container-height:\n * */\n\n\nlet NbTimePickerDirective = /*#__PURE__*/(() => {\n  class NbTimePickerDirective {\n    constructor(document, positionBuilder, hostRef, triggerStrategyBuilder, overlay, cd, calendarTimeModelService, dateService, renderer, placeholder) {\n      this.document = document;\n      this.positionBuilder = positionBuilder;\n      this.hostRef = hostRef;\n      this.triggerStrategyBuilder = triggerStrategyBuilder;\n      this.overlay = overlay;\n      this.cd = cd;\n      this.calendarTimeModelService = calendarTimeModelService;\n      this.dateService = dateService;\n      this.renderer = renderer;\n      this.placeholder = placeholder;\n      /**\n       * Time picker overlay offset.\n       * */\n\n      this.overlayOffset = 8;\n      this.destroy$ = new Subject();\n\n      this.onChange = () => {};\n\n      this.onTouched = () => {};\n    }\n    /**\n     * Provides timepicker component.\n     * */\n\n\n    get timepicker() {\n      return this._timePickerComponent;\n    }\n\n    set timepicker(timePicker) {\n      this._timePickerComponent = timePicker;\n    }\n    /**\n     * Returns html input element.\n     * @docs-private\n     * */\n\n\n    get input() {\n      return this.hostRef.nativeElement;\n    }\n    /**\n     * Determines is timepicker overlay opened.\n     * @docs-private\n     * */\n\n\n    get isOpen() {\n      return this.overlayRef && this.overlayRef.hasAttached();\n    }\n    /**\n     * Determines is timepicker overlay closed.\n     * @docs-private\n     * */\n\n\n    get isClosed() {\n      return !this.isOpen;\n    }\n    /**\n     * Returns host input value.\n     * @docs-private\n     * */\n\n\n    get inputValue() {\n      return this.input.value;\n    }\n\n    set inputValue(value) {\n      this.input.value = value;\n    }\n\n    ngAfterViewInit() {\n      this.subscribeOnInputChange();\n\n      if (!this.placeholder) {\n        this.renderer.setProperty(this.input, 'placeholder', this.timepicker.timeFormat);\n      }\n\n      this.triggerStrategy = this.createTriggerStrategy();\n      this.subscribeOnTriggers();\n      this.subscribeToBlur();\n    }\n\n    show() {\n      if (this.isClosed) {\n        this.attachToOverlay();\n      }\n    }\n\n    hide() {\n      if (this.isOpen) {\n        this.overlayRef.detach();\n        this.cd.markForCheck();\n      }\n    }\n    /**\n     * Attaches picker to the timepicker portal.\n     * @docs-private\n     * */\n\n\n    attachToOverlay() {\n      if (!this.overlayRef) {\n        this.setupTimepicker();\n        this.initOverlay();\n      }\n\n      this.overlayRef.attach(this.timepicker.portal);\n    }\n\n    setupTimepicker() {\n      if (this.dateService.getId() === 'native' && isDevMode()) {\n        console.warn('Date.parse does not support parsing time with custom format.' + ' See details here https://akveo.github.io/nebular/docs/components/datepicker/overview#native-parse-issue');\n      }\n\n      this.timepicker.setHost(this.hostRef);\n\n      if (this.inputValue) {\n        const val = this.dateService.getId() === 'native' ? this.parseNativeDateString(this.inputValue) : this.inputValue;\n        this.timepicker.date = this.dateService.parse(val, this.timepicker.timeFormat);\n      } else {\n        this.timepicker.date = this.calendarTimeModelService.getResetTime();\n      }\n    }\n\n    initOverlay() {\n      this.positionStrategy = this.createPositionStrategy();\n      this.subscribeOnApplyClick();\n      this.createOverlay();\n    }\n\n    subscribeOnApplyClick() {\n      this.timepicker.onSelectTime.pipe(takeUntil(this.destroy$)).subscribe(value => {\n        const time = this.dateService.format(value.time, this.timepicker.timeFormat).toUpperCase();\n        this.inputValue = time;\n        this.timepicker.date = value.time;\n        this.onChange(value.time);\n\n        if (value.save) {\n          this.lastInputValue = time;\n          this.hide();\n        }\n      });\n    }\n\n    createOverlay() {\n      const scrollStrategy = this.createScrollStrategy();\n      this.overlayRef = this.overlay.create({\n        positionStrategy: this.positionStrategy,\n        scrollStrategy\n      });\n    }\n\n    subscribeOnTriggers() {\n      this.triggerStrategy.show$.pipe(filter(() => this.isClosed)).subscribe(() => this.show());\n      this.triggerStrategy.hide$.pipe(filter(() => this.isOpen)).subscribe(() => {\n        this.inputValue = this.lastInputValue || '';\n        this.hide();\n      });\n    }\n\n    createTriggerStrategy() {\n      return this.triggerStrategyBuilder.trigger(NbTrigger.FOCUS).host(this.hostRef.nativeElement).container(() => this.getContainer()).build();\n    }\n\n    createPositionStrategy() {\n      return this.positionBuilder.connectedTo(this.hostRef).position(NbPosition.BOTTOM).offset(this.overlayOffset).adjustment(NbAdjustment.VERTICAL);\n    }\n\n    getContainer() {\n      return this.overlayRef && this.isOpen && {\n        location: {\n          nativeElement: this.overlayRef.overlayElement\n        }\n      };\n    }\n\n    createScrollStrategy() {\n      return this.overlay.scrollStrategies.block();\n    }\n\n    subscribeOnInputChange() {\n      fromEvent(this.input, 'input').pipe(map(() => this.inputValue), takeUntil(this.destroy$)).subscribe(value => this.handleInputChange(value));\n    }\n\n    subscribeToBlur() {\n      merge(this.timepicker.blur, fromEvent(this.input, 'blur').pipe(filter(() => !this.isOpen && this.document.activeElement !== this.input))).pipe(takeUntil(this.destroy$)).subscribe(() => this.onTouched());\n    }\n    /**\n     * Parses input value and write if it isn't null.\n     * @docs-private\n     * */\n\n\n    handleInputChange(value) {\n      if (this.dateService.getId() === 'native') {\n        /**\n         * Native date service dont parse only time string value,\n         * and we adding year mouth and day to convert string to valid date format\n         **/\n        value = this.parseNativeDateString(value);\n      }\n\n      const isValidDate = this.dateService.isValidDateString(value, this.timepicker.timeFormat);\n\n      if (isValidDate) {\n        this.lastInputValue = value;\n        const date = this.dateService.parse(value, this.timepicker.timeFormat);\n        this.onChange(date);\n        this.timepicker.date = date;\n      }\n    }\n\n    updateValue(value) {\n      if (value) {\n        this.timepicker.date = value;\n        const timeString = this.dateService.format(value, this.timepicker.timeFormat).toUpperCase();\n        this.inputValue = timeString;\n        this.lastInputValue = timeString;\n      }\n    }\n\n    writeValue(value) {\n      this.updateValue(value);\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    parseNativeDateString(value) {\n      const date = this.dateService.today();\n      const year = this.dateService.getYear(date);\n      const month = this.calendarTimeModelService.paddToTwoSymbols(this.dateService.getMonth(date));\n      const day = this.calendarTimeModelService.paddToTwoSymbols(this.dateService.getDate(date));\n      return `${year}-${month}-${day} ${value}`;\n    }\n\n  }\n\n  NbTimePickerDirective.ɵfac = function NbTimePickerDirective_Factory(t) {\n    return new (t || NbTimePickerDirective)(ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPositionBuilderService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbTriggerStrategyBuilderService), ɵngcc0.ɵɵdirectiveInject(NbOverlayService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbCalendarTimeModelService), ɵngcc0.ɵɵdirectiveInject(NbDateService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵinjectAttribute('placeholder'));\n  };\n\n  NbTimePickerDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTimePickerDirective,\n    selectors: [[\"input\", \"nbTimepicker\", \"\"]],\n    inputs: {\n      overlayOffset: \"overlayOffset\",\n      timepicker: [\"nbTimepicker\", \"timepicker\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbTimePickerDirective),\n      multi: true\n    }])]\n  });\n  return NbTimePickerDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTimePickerCellComponent = /*#__PURE__*/(() => {\n  class NbTimePickerCellComponent {\n    constructor(ngZone, platformService) {\n      this.ngZone = ngZone;\n      this.platformService = platformService;\n      this.selectedChange$ = new Subject();\n      this.unselected$ = this.selectedChange$.pipe(filter(selected => !selected));\n      this.destroy$ = new Subject();\n      this.select = new EventEmitter();\n    }\n\n    set selected(selected) {\n      if (selected) {\n        this._selected = selected;\n        this.scrollToElement();\n      }\n\n      this.selectedChange$.next(selected);\n    }\n\n    get selected() {\n      return this._selected;\n    }\n\n    onClick() {\n      this.select.emit({\n        value: this.value\n      });\n    }\n\n    ngAfterViewInit() {\n      if (this.selected) {\n        // Since we render timepicker in the overlay, at the moment this hook called,\n        // timepicker could be not fully rendered and placed. Because of it, we're waiting for Angular\n        // to finish change detection run and only then scroll to the selected cell.\n        this.ngZone.onStable.pipe(take(1), takeUntil(merge(this.unselected$, this.destroy$))).subscribe(() => this.scrollToElement());\n      }\n    }\n\n    scrollToElement() {\n      if (this.valueContainerElement && this.platformService.isBrowser) {\n        this.ngZone.runOutsideAngular(() => this.valueContainerElement.nativeElement.scrollIntoView({\n          block: 'center'\n        }));\n      }\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n  }\n\n  NbTimePickerCellComponent.ɵfac = function NbTimePickerCellComponent_Factory(t) {\n    return new (t || NbTimePickerCellComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbPlatform));\n  };\n\n  NbTimePickerCellComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTimePickerCellComponent,\n    selectors: [[\"nb-timepicker-cell\"]],\n    viewQuery: function NbTimePickerCellComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c46, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.valueContainerElement = _t.first);\n      }\n    },\n    hostBindings: function NbTimePickerCellComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbTimePickerCellComponent_click_HostBindingHandler() {\n          return ctx.onClick();\n        });\n      }\n    },\n    inputs: {\n      selected: \"selected\",\n      value: \"value\"\n    },\n    outputs: {\n      select: \"select\"\n    },\n    decls: 3,\n    vars: 1,\n    consts: [[\"valueContainer\", \"\"]],\n    template: function NbTimePickerCellComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"div\", null, 0);\n        ɵngcc0.ɵɵtext(2);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵtextInterpolate(ctx.value);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;user-select:none}\"],\n    changeDetection: 0\n  });\n  return NbTimePickerCellComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTimepickerModule = /*#__PURE__*/(() => {\n  class NbTimepickerModule {\n    static forRoot(config = {}) {\n      return {\n        ngModule: NbTimepickerModule,\n        providers: [{\n          provide: NB_TIME_PICKER_CONFIG,\n          useValue: config\n        }]\n      };\n    }\n\n    static forChild(config = {}) {\n      return {\n        ngModule: NbTimepickerModule,\n        providers: [{\n          provide: NB_TIME_PICKER_CONFIG,\n          useValue: config\n        }]\n      };\n    }\n\n  }\n\n  NbTimepickerModule.ɵfac = function NbTimepickerModule_Factory(t) {\n    return new (t || NbTimepickerModule)();\n  };\n\n  NbTimepickerModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTimepickerModule\n  });\n  NbTimepickerModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [NbCalendarTimeModelService],\n    imports: [[CommonModule, NbOverlayModule, NbListModule, NbCardModule, NbCalendarKitModule]]\n  });\n  return NbTimepickerModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTimepickerModule, {\n    declarations: function () {\n      return [NbTimePickerComponent, NbTimePickerCellComponent, NbTimePickerDirective];\n    },\n    imports: function () {\n      return [CommonModule, NbOverlayModule, NbListModule, NbCardModule, NbCalendarKitModule];\n    },\n    exports: function () {\n      return [NbTimePickerComponent, NbTimePickerCellComponent, NbTimePickerDirective];\n    }\n  });\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbDateAdapterService = /*#__PURE__*/(() => {\n  class NbDateAdapterService extends NbDatepickerAdapter {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.picker = NbDatepickerComponent;\n    }\n\n    parse(date, format) {\n      return this.dateService.parse(date, format);\n    }\n\n    format(date, format) {\n      return this.dateService.format(date, format);\n    }\n\n    isValid(date, format) {\n      return this.dateService.isValidDateString(date, format);\n    }\n\n  }\n\n  NbDateAdapterService.ɵfac = function NbDateAdapterService_Factory(t) {\n    return new (t || NbDateAdapterService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbDateAdapterService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDateAdapterService,\n    factory: NbDateAdapterService.ɵfac\n  });\n  return NbDateAdapterService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbRangeAdapterService = /*#__PURE__*/(() => {\n  class NbRangeAdapterService extends NbDatepickerAdapter {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.picker = NbRangepickerComponent;\n    }\n\n    parse(range, format) {\n      const [start, end] = range.split('-').map(subDate => subDate.trim());\n      return {\n        start: this.dateService.parse(start, format),\n        end: this.dateService.parse(end, format)\n      };\n    }\n\n    format(range, format) {\n      if (!range) {\n        return '';\n      }\n\n      const start = this.dateService.format(range.start, format);\n      const isStartValid = this.dateService.isValidDateString(start, format);\n\n      if (!isStartValid) {\n        return '';\n      }\n\n      const end = this.dateService.format(range.end, format);\n      const isEndValid = this.dateService.isValidDateString(end, format);\n\n      if (isEndValid) {\n        return `${start} - ${end}`;\n      } else {\n        return start;\n      }\n    }\n\n    isValid(range, format) {\n      const [start, end] = range.split('-').map(subDate => subDate.trim());\n      return this.dateService.isValidDateString(start, format) && this.dateService.isValidDateString(end, format);\n    }\n\n  }\n\n  NbRangeAdapterService.ɵfac = function NbRangeAdapterService_Factory(t) {\n    return new (t || NbRangeAdapterService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbRangeAdapterService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbRangeAdapterService,\n    factory: NbRangeAdapterService.ɵfac\n  });\n  return NbRangeAdapterService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbDateTimeAdapterService = /*#__PURE__*/(() => {\n  class NbDateTimeAdapterService extends NbDatepickerAdapter {\n    constructor(dateService) {\n      super();\n      this.dateService = dateService;\n      this.picker = NbDateTimePickerComponent;\n    }\n\n    parse(date, format) {\n      return this.dateService.parse(date, format);\n    }\n\n    format(date, format) {\n      return this.dateService.format(date, format);\n    }\n\n    isValid(date, format) {\n      return this.dateService.isValidDateString(date, format);\n    }\n\n  }\n\n  NbDateTimeAdapterService.ɵfac = function NbDateTimeAdapterService_Factory(t) {\n    return new (t || NbDateTimeAdapterService)(ɵngcc0.ɵɵinject(NbDateService));\n  };\n\n  NbDateTimeAdapterService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbDateTimeAdapterService,\n    factory: NbDateTimeAdapterService.ɵfac\n  });\n  return NbDateTimeAdapterService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbDatepickerModule = /*#__PURE__*/(() => {\n  class NbDatepickerModule {\n    static forRoot() {\n      return {\n        ngModule: NbDatepickerModule,\n        providers: [DatePipe, {\n          provide: NB_DATE_ADAPTER,\n          multi: true,\n          useClass: NbDateAdapterService\n        }, {\n          provide: NB_DATE_ADAPTER,\n          multi: true,\n          useClass: NbRangeAdapterService\n        }, {\n          provide: NB_DATE_ADAPTER,\n          multi: true,\n          useClass: NbDateTimeAdapterService\n        }]\n      };\n    }\n\n  }\n\n  NbDatepickerModule.ɵfac = function NbDatepickerModule_Factory(t) {\n    return new (t || NbDatepickerModule)();\n  };\n\n  NbDatepickerModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbDatepickerModule\n  });\n  NbDatepickerModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[NbOverlayModule, NbCalendarModule, NbCalendarRangeModule, NbCardModule, NbBaseCalendarModule, NbTimepickerModule, NbCalendarKitModule]]\n  });\n  return NbDatepickerModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbDatepickerModule, {\n    declarations: [NbDatepickerDirective, NbDatepickerContainerComponent, NbCalendarWithTimeComponent, NbDateTimePickerComponent, NbDatepickerComponent, NbRangepickerComponent, NbBasePickerComponent],\n    imports: [NbOverlayModule, NbCalendarModule, NbCalendarRangeModule, NbCardModule, NbBaseCalendarModule, NbTimepickerModule, NbCalendarKitModule],\n    exports: [NbDatepickerDirective, NbDatepickerComponent, NbRangepickerComponent, NbDateTimePickerComponent, NbCalendarWithTimeComponent]\n  });\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbRadioComponent` provides the same functionality as native `<input type=\"radio\">`\n * with Nebular styles and animations.\n *\n * @stacked-example(Showcase, radio/radio-showcase.component)\n *\n * ### Installation\n *\n * Import `NbRadioModule` to your feature module.\n *\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbRadioModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * ### Usage\n *\n * Radio buttons should be wrapped in `nb-radio-group` to provide form bindings.\n *\n * ```html\n * <nb-radio-group [(ngModel)]=\"selectedOption\">\n *   <nb-radio value=\"1\">Option 1</nb-radio>\n *   <nb-radio value=\"2\">Option 2</nb-radio>\n *   <nb-radio value=\"3\">Option 3</nb-radio>\n * </nb-radio-group>\n * ```\n *\n * You can disable some radios in the group using a `disabled` attribute.\n *\n * @stacked-example(Disabled, radio/radio-disabled.component)\n *\n *\n * @styles\n *\n * radio-width:\n * radio-height:\n * radio-border-style:\n * radio-border-width:\n * radio-text-font-family:\n * radio-text-font-size:\n * radio-text-font-weight:\n * radio-text-line-height:\n * radio-outline-color:\n * radio-outline-width:\n * radio-basic-text-color:\n * radio-basic-border-color:\n * radio-basic-background-color:\n * radio-basic-checked-background-color:\n * radio-basic-checked-border-color:\n * radio-basic-inner-circle-color:\n * radio-basic-focus-border-color:\n * radio-basic-focus-inner-circle-color:\n * radio-basic-hover-background-color:\n * radio-basic-hover-border-color:\n * radio-basic-hover-inner-circle-color:\n * radio-basic-hover-checked-background-color:\n * radio-basic-active-border-color:\n * radio-basic-active-inner-circle-color:\n * radio-basic-disabled-background-color:\n * radio-basic-disabled-border-color:\n * radio-basic-disabled-text-color:\n * radio-basic-disabled-checked-background-color:\n * radio-basic-disabled-checked-border-color:\n * radio-basic-disabled-checked-inner-circle-color:\n * radio-primary-text-color:\n * radio-primary-border-color:\n * radio-primary-background-color:\n * radio-primary-checked-background-color:\n * radio-primary-checked-border-color:\n * radio-primary-inner-circle-color:\n * radio-primary-focus-border-color:\n * radio-primary-focus-inner-circle-color:\n * radio-primary-hover-background-color:\n * radio-primary-hover-border-color:\n * radio-primary-hover-inner-circle-color:\n * radio-primary-hover-checked-background-color:\n * radio-primary-active-border-color:\n * radio-primary-active-inner-circle-color:\n * radio-primary-disabled-background-color:\n * radio-primary-disabled-border-color:\n * radio-primary-disabled-text-color:\n * radio-primary-disabled-checked-background-color:\n * radio-primary-disabled-checked-border-color:\n * radio-primary-disabled-checked-inner-circle-color:\n * radio-success-text-color:\n * radio-success-border-color:\n * radio-success-background-color:\n * radio-success-checked-background-color:\n * radio-success-checked-border-color:\n * radio-success-inner-circle-color:\n * radio-success-focus-border-color:\n * radio-success-focus-inner-circle-color:\n * radio-success-hover-background-color:\n * radio-success-hover-border-color:\n * radio-success-hover-inner-circle-color:\n * radio-success-hover-checked-background-color:\n * radio-success-active-border-color:\n * radio-success-active-inner-circle-color:\n * radio-success-disabled-background-color:\n * radio-success-disabled-border-color:\n * radio-success-disabled-text-color:\n * radio-success-disabled-checked-background-color:\n * radio-success-disabled-checked-border-color:\n * radio-success-disabled-checked-inner-circle-color:\n * radio-info-text-color:\n * radio-info-border-color:\n * radio-info-background-color:\n * radio-info-checked-background-color:\n * radio-info-checked-border-color:\n * radio-info-inner-circle-color:\n * radio-info-focus-border-color:\n * radio-info-focus-inner-circle-color:\n * radio-info-hover-background-color:\n * radio-info-hover-border-color:\n * radio-info-hover-inner-circle-color:\n * radio-info-hover-checked-background-color:\n * radio-info-active-border-color:\n * radio-info-active-inner-circle-color:\n * radio-info-disabled-background-color:\n * radio-info-disabled-border-color:\n * radio-info-disabled-text-color:\n * radio-info-disabled-checked-background-color:\n * radio-info-disabled-checked-border-color:\n * radio-info-disabled-checked-inner-circle-color:\n * radio-warning-text-color:\n * radio-warning-border-color:\n * radio-warning-background-color:\n * radio-warning-checked-background-color:\n * radio-warning-checked-border-color:\n * radio-warning-inner-circle-color:\n * radio-warning-focus-border-color:\n * radio-warning-focus-inner-circle-color:\n * radio-warning-hover-background-color:\n * radio-warning-hover-border-color:\n * radio-warning-hover-inner-circle-color:\n * radio-warning-hover-checked-background-color:\n * radio-warning-active-border-color:\n * radio-warning-active-inner-circle-color:\n * radio-warning-disabled-background-color:\n * radio-warning-disabled-border-color:\n * radio-warning-disabled-text-color:\n * radio-warning-disabled-checked-background-color:\n * radio-warning-disabled-checked-border-color:\n * radio-warning-disabled-checked-inner-circle-color:\n * radio-danger-text-color:\n * radio-danger-border-color:\n * radio-danger-background-color:\n * radio-danger-checked-background-color:\n * radio-danger-checked-border-color:\n * radio-danger-inner-circle-color:\n * radio-danger-focus-border-color:\n * radio-danger-focus-inner-circle-color:\n * radio-danger-hover-background-color:\n * radio-danger-hover-border-color:\n * radio-danger-hover-inner-circle-color:\n * radio-danger-hover-checked-background-color:\n * radio-danger-active-border-color:\n * radio-danger-active-inner-circle-color:\n * radio-danger-disabled-background-color:\n * radio-danger-disabled-border-color:\n * radio-danger-disabled-text-color:\n * radio-danger-disabled-checked-background-color:\n * radio-danger-disabled-checked-border-color:\n * radio-danger-disabled-checked-inner-circle-color:\n * radio-control-text-color:\n * radio-control-background-color:\n * radio-control-border-color:\n * radio-control-checked-background-color:\n * radio-control-checked-border-color:\n * radio-control-inner-circle-color:\n * radio-control-focus-border-color:\n * radio-control-focus-inner-circle-color:\n * radio-control-hover-background-color:\n * radio-control-hover-border-color:\n * radio-control-hover-inner-circle-color:\n * radio-control-hover-checked-background-color:\n * radio-control-active-border-color:\n * radio-control-active-inner-circle-color:\n * radio-control-disabled-background-color:\n * radio-control-disabled-border-color:\n * radio-control-disabled-text-color:\n * radio-control-disabled-checked-background-color:\n * radio-control-disabled-checked-border-color:\n * radio-control-disabled-checked-inner-circle-color:\n * */\n\n\nlet NbRadioComponent = /*#__PURE__*/(() => {\n  class NbRadioComponent {\n    constructor(cd, renderer, statusService) {\n      this.cd = cd;\n      this.renderer = renderer;\n      this.statusService = statusService;\n      this._checked = false;\n      this._disabled = false;\n      this.status = 'basic';\n      this.valueChange = new EventEmitter();\n      this.blur = new EventEmitter();\n    }\n\n    get name() {\n      return this._name;\n    }\n\n    set name(value) {\n      if (this._name !== value) {\n        this._name = value;\n      }\n    }\n\n    get checked() {\n      return this._checked;\n    }\n\n    set checked(value) {\n      const boolValue = convertToBoolProperty(value);\n\n      if (this._checked !== boolValue) {\n        this._checked = boolValue;\n      }\n    }\n\n    get value() {\n      return this._value;\n    }\n\n    set value(value) {\n      if (this._value !== value) {\n        this._value = value;\n      }\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(disabled) {\n      const boolValue = convertToBoolProperty(disabled);\n\n      if (this._disabled !== boolValue) {\n        this._disabled = boolValue;\n      }\n    }\n\n    get isPrimary() {\n      return this.status === 'primary';\n    }\n\n    get isSuccess() {\n      return this.status === 'success';\n    }\n\n    get isWarning() {\n      return this.status === 'warning';\n    }\n\n    get isDanger() {\n      return this.status === 'danger';\n    }\n\n    get isInfo() {\n      return this.status === 'info';\n    }\n\n    get isBasic() {\n      return this.status === 'basic';\n    }\n\n    get isControl() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    onChange(event) {\n      event.stopPropagation();\n      this.checked = true;\n      this.valueChange.emit(this.value);\n    }\n\n    onClick(event) {\n      event.stopPropagation();\n    }\n    /*\n     * @docs-private\n     * We use this method when setting radio inputs from radio group component.\n     * Otherwise Angular won't detect changes in radio template as cached last rendered\n     * value didn't updated.\n     **/\n\n\n    _markForCheck() {\n      this.cd.markForCheck();\n    }\n    /*\n     * @docs-private\n     * Use this method when setting radio name from radio group component.\n     * In case option 'name' isn't set on nb-radio component we need to set name\n     * right away, so it won't overlap with options without names from other radio\n     * groups. Otherwise they all would have same name and will be considered as\n     * options from one group so only the last option will stay selected.\n     **/\n\n\n    _setName(name) {\n      this.name = name;\n\n      if (this.input) {\n        this.renderer.setProperty(this.input.nativeElement, 'name', name);\n      }\n    }\n\n  }\n\n  NbRadioComponent.ɵfac = function NbRadioComponent_Factory(t) {\n    return new (t || NbRadioComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbRadioComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRadioComponent,\n    selectors: [[\"nb-radio\"]],\n    viewQuery: function NbRadioComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵviewQuery(_c47, 5, ElementRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.input = _t.first);\n      }\n    },\n    hostVars: 16,\n    hostBindings: function NbRadioComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-primary\", ctx.isPrimary)(\"status-success\", ctx.isSuccess)(\"status-warning\", ctx.isWarning)(\"status-danger\", ctx.isDanger)(\"status-info\", ctx.isInfo)(\"status-basic\", ctx.isBasic)(\"status-control\", ctx.isControl);\n      }\n    },\n    inputs: {\n      status: \"status\",\n      name: \"name\",\n      checked: \"checked\",\n      value: \"value\",\n      disabled: \"disabled\"\n    },\n    outputs: {\n      valueChange: \"valueChange\",\n      blur: \"blur\"\n    },\n    ngContentSelectors: _c0,\n    decls: 7,\n    vars: 4,\n    consts: [[\"type\", \"radio\", 1, \"native-input\", \"visually-hidden\", 3, \"name\", \"value\", \"checked\", \"disabled\", \"change\", \"click\"], [\"input\", \"\"], [1, \"outer-circle\"], [1, \"inner-circle\"], [1, \"text\"]],\n    template: function NbRadioComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"label\");\n        ɵngcc0.ɵɵelementStart(1, \"input\", 0, 1);\n        ɵngcc0.ɵɵlistener(\"change\", function NbRadioComponent_Template_input_change_1_listener($event) {\n          return ctx.onChange($event);\n        })(\"click\", function NbRadioComponent_Template_input_click_1_listener($event) {\n          return ctx.onClick($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelement(3, \"span\", 2);\n        ɵngcc0.ɵɵelement(4, \"span\", 3);\n        ɵngcc0.ɵɵelementStart(5, \"span\", 4);\n        ɵngcc0.ɵɵprojection(6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"name\", ctx.name)(\"value\", ctx.value)(\"checked\", ctx.checked)(\"disabled\", ctx.disabled);\n      }\n    },\n    styles: [\"[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]   label[_ngcontent-%COMP%]{display:inline-flex;margin:0;min-height:inherit;padding:0.375rem 0;align-items:center}[dir=ltr]   [_nghost-%COMP%]   label[_ngcontent-%COMP%]{padding-right:1.5rem}[dir=rtl]   [_nghost-%COMP%]   label[_ngcontent-%COMP%]{padding-left:1.5rem}[_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{border-radius:50%;position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr]   [_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [dir=ltr]   [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{left:0}[dir=rtl]   [_nghost-%COMP%]   .outer-circle[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{right:0}[_nghost-%COMP%]   .inner-circle[_ngcontent-%COMP%]{transform:translateY(-50%) scale(0.6)}[dir=ltr]   [_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding-left:.5rem}[dir=rtl]   [_nghost-%COMP%]   .text[_ngcontent-%COMP%]{padding-right:.5rem}\"],\n    changeDetection: 0\n  });\n  return NbRadioComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * The `NbRadioGroupComponent` is the wrapper for `nb-radio` button.\n * It provides form bindings:\n *\n * ```html\n * <nb-radio-group [(ngModel)]=\"selectedOption\">\n *   <nb-radio value=\"1\">Option 1</nb-radio>\n *   <nb-radio value=\"2\">Option 2</nb-radio>\n *   <nb-radio value=\"3\">Option 3</nb-radio>\n * </nb-radio-group>\n * ```\n *\n * Also, you can use `value` and `valueChange` for binding without forms.\n *\n * ```html\n * <nb-radio-group [(value)]=\"selectedOption\">\n *   <nb-radio value=\"1\">Option 1</nb-radio>\n *   <nb-radio value=\"2\">Option 2</nb-radio>\n *   <nb-radio value=\"3\">Option 3</nb-radio>\n * </nb-radio-group>\n * ```\n *\n * Radio items name has to be provided through `name` input property of the radio group.\n *\n * ```html\n * <nb-radio-group name=\"my-radio-group\">\n *   ...\n * </nb-radio-group>\n * ```\n *\n * You can change radio group status by setting `status` input.\n * @stacked-example(Statuses, radio/radio-statuses.component)\n *\n * Also, you can disable the whole group using `disabled` attribute.\n * @stacked-example(Disabled group, radio/radio-disabled-group.component)\n *\n * Radio group supports `ngModel` and reactive forms:\n * @stacked-example(Radio Group with forms, radio/radio-form.component)\n *\n * */\n\n\nlet NbRadioGroupComponent = /*#__PURE__*/(() => {\n  class NbRadioGroupComponent {\n    constructor(hostElement, platformId, document) {\n      this.hostElement = hostElement;\n      this.platformId = platformId;\n      this.document = document;\n      this.destroy$ = new Subject();\n\n      this.onChange = value => {};\n\n      this.onTouched = () => {};\n\n      this._status = 'basic';\n      this.valueChange = new EventEmitter();\n    }\n\n    get value() {\n      return this._value;\n    }\n\n    set value(value) {\n      this._value = value;\n      this.updateValues();\n    }\n\n    get name() {\n      return this._name;\n    }\n\n    set name(name) {\n      this._name = name;\n      this.updateNames();\n    }\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(disabled) {\n      this._disabled = convertToBoolProperty(disabled);\n      this.updateDisabled();\n    }\n    /**\n     * Radio buttons status.\n     * Possible values are `primary` (default), `success`, `warning`, `danger`, `info`.\n     */\n\n\n    get status() {\n      return this._status;\n    }\n\n    set status(value) {\n      if (this._status !== value) {\n        this._status = value;\n        this.updateStatus();\n      }\n    }\n\n    ngAfterContentInit() {\n      // In case option 'name' isn't set on nb-radio component,\n      // we need to set it's name right away, so it won't overlap with options\n      // without names from other radio groups. Otherwise they all would have\n      // same name and will be considered as options from one group so only the\n      // last option will stay selected.\n      this.updateNames();\n      this.radios.changes.pipe(startWith(this.radios), // 'changes' emit during change detection run and we can't update\n      // option properties right of since they already was initialized.\n      // Instead we schedule microtask to update radios after change detection\n      // run is finished and trigger one more change detection run.\n      switchMap(radios => from(Promise.resolve(radios))), takeUntil(this.destroy$)).subscribe(() => this.updateAndSubscribeToRadios());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    writeValue(value) {\n      this.value = value;\n    }\n\n    setDisabledState(isDisabled) {\n      this.disabled = isDisabled;\n    }\n\n    updateAndSubscribeToRadios() {\n      this.updateValueFromCheckedOption();\n      this.updateNames();\n      this.updateValues();\n      this.updateDisabled();\n      this.updateStatus();\n      this.subscribeOnRadiosValueChange();\n      this.subscribeOnRadiosBlur();\n    }\n\n    updateNames() {\n      if (this.radios) {\n        this.radios.forEach(radio => radio._setName(this.name));\n      }\n    }\n\n    updateValues() {\n      this.updateAndMarkForCheckRadios(radio => radio.checked = radio.value === this.value);\n    }\n\n    updateDisabled() {\n      if (typeof this.disabled !== 'undefined') {\n        this.updateAndMarkForCheckRadios(radio => radio.disabled = this.disabled);\n      }\n    }\n\n    subscribeOnRadiosValueChange() {\n      if (!this.radios || !this.radios.length) {\n        return;\n      }\n\n      merge(...this.radios.map(radio => radio.valueChange)).pipe(takeUntil(merge(this.radios.changes, this.destroy$))).subscribe(value => {\n        this.writeValue(value);\n        this.propagateValue(value);\n      });\n    }\n\n    propagateValue(value) {\n      this.valueChange.emit(value);\n      this.onChange(value);\n    }\n\n    subscribeOnRadiosBlur() {\n      const hasNoRadios = !this.radios || !this.radios.length;\n\n      if (!isPlatformBrowser(this.platformId) || hasNoRadios) {\n        return;\n      }\n\n      const hostElement = this.hostElement.nativeElement;\n      fromEvent(hostElement, 'focusin').pipe(filter(event => hostElement.contains(event.target)), switchMap(() => merge(fromEvent(this.document, 'focusin'), fromEvent(this.document, 'click'))), filter(event => !hostElement.contains(event.target)), takeUntil(merge(this.radios.changes, this.destroy$))).subscribe(() => this.onTouched());\n    }\n\n    updateStatus() {\n      this.updateAndMarkForCheckRadios(radio => radio.status = this.status);\n    }\n\n    updateAndMarkForCheckRadios(updateFn) {\n      if (this.radios) {\n        this.radios.forEach(radio => {\n          updateFn(radio);\n\n          radio._markForCheck();\n        });\n      }\n    }\n\n    updateValueFromCheckedOption() {\n      const checkedRadio = this.radios.find(radio => radio.checked);\n      const isValueMissing = this.value === undefined || this.value === null;\n\n      if (checkedRadio && isValueMissing && checkedRadio.value !== this.value) {\n        this.value = checkedRadio.value;\n      }\n    }\n\n  }\n\n  NbRadioGroupComponent.ɵfac = function NbRadioGroupComponent_Factory(t) {\n    return new (t || NbRadioGroupComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT));\n  };\n\n  NbRadioGroupComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbRadioGroupComponent,\n    selectors: [[\"nb-radio-group\"]],\n    contentQueries: function NbRadioGroupComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbRadioComponent, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.radios = _t);\n      }\n    },\n    inputs: {\n      value: \"value\",\n      name: \"name\",\n      disabled: \"disabled\",\n      status: \"status\"\n    },\n    outputs: {\n      valueChange: \"valueChange\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbRadioGroupComponent),\n      multi: true\n    }])],\n    ngContentSelectors: _c49,\n    decls: 1,\n    vars: 0,\n    template: function NbRadioGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c48);\n        ɵngcc0.ɵɵprojection(0);\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbRadioGroupComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbRadioModule = /*#__PURE__*/(() => {\n  class NbRadioModule {}\n\n  NbRadioModule.ɵfac = function NbRadioModule_Factory(t) {\n    return new (t || NbRadioModule)();\n  };\n\n  NbRadioModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbRadioModule\n  });\n  NbRadioModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[]]\n  });\n  return NbRadioModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbRadioModule, {\n    declarations: [NbRadioComponent, NbRadioGroupComponent],\n    exports: [NbRadioComponent, NbRadioGroupComponent]\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet tagUniqueId = 0;\n/**\n *\n * To show a cross on a tag and enable `remove` event add the `removable` attribute.\n * @stacked-example(Removable tags, tag/tag-removable.component)\n *\n * You can change appearance via `appearance` input:\n * @stacked-example(Tag Appearance, tag/tag-appearance.component)\n *\n * You can change status via `status` input:\n * @stacked-example(Tag Status, tag/tag-status.component)\n *\n * @styles\n *\n * tag-text-font-family:\n * tag-text-transform:\n * tag-border-width:\n * tag-border-style:\n * tag-border-radius:\n * tag-tiny-text-font-size:\n * tag-tiny-text-font-weight:\n * tag-tiny-text-line-height:\n * tag-tiny-padding:\n * tag-tiny-close-offset:\n * tag-small-text-font-size:\n * tag-small-text-font-weight:\n * tag-small-text-line-height:\n * tag-small-padding:\n * tag-small-close-offset:\n * tag-medium-text-font-size:\n * tag-medium-text-font-weight:\n * tag-medium-text-line-height:\n * tag-medium-padding:\n * tag-medium-close-offset:\n * tag-large-text-font-size:\n * tag-large-text-font-weight:\n * tag-large-text-line-height:\n * tag-large-padding:\n * tag-large-close-offset:\n * tag-giant-text-font-size:\n * tag-giant-text-font-weight:\n * tag-giant-text-line-height:\n * tag-giant-padding:\n * tag-giant-close-offset:\n * tag-filled-basic-background-color:\n * tag-filled-basic-border-color:\n * tag-filled-basic-text-color:\n * tag-filled-basic-active-background-color:\n * tag-filled-basic-active-border-color:\n * tag-filled-basic-hover-background-color:\n * tag-filled-basic-hover-border-color:\n * tag-filled-basic-selected-background-color:\n * tag-filled-basic-selected-border-color:\n * tag-filled-primary-background-color:\n * tag-filled-primary-border-color:\n * tag-filled-primary-text-color:\n * tag-filled-primary-active-background-color:\n * tag-filled-primary-active-border-color:\n * tag-filled-primary-hover-background-color:\n * tag-filled-primary-hover-border-color:\n * tag-filled-primary-selected-background-color:\n * tag-filled-primary-selected-border-color:\n * tag-filled-success-background-color:\n * tag-filled-success-border-color:\n * tag-filled-success-text-color:\n * tag-filled-success-active-background-color:\n * tag-filled-success-active-border-color:\n * tag-filled-success-hover-background-color:\n * tag-filled-success-hover-border-color:\n * tag-filled-success-selected-background-color:\n * tag-filled-success-selected-border-color:\n * tag-filled-info-background-color:\n * tag-filled-info-border-color:\n * tag-filled-info-text-color:\n * tag-filled-info-active-background-color:\n * tag-filled-info-active-border-color:\n * tag-filled-info-hover-background-color:\n * tag-filled-info-hover-border-color:\n * tag-filled-info-selected-background-color:\n * tag-filled-info-selected-border-color:\n * tag-filled-warning-background-color:\n * tag-filled-warning-border-color:\n * tag-filled-warning-text-color:\n * tag-filled-warning-active-background-color:\n * tag-filled-warning-active-border-color:\n * tag-filled-warning-hover-background-color:\n * tag-filled-warning-hover-border-color:\n * tag-filled-warning-selected-background-color:\n * tag-filled-warning-selected-border-color:\n * tag-filled-danger-background-color:\n * tag-filled-danger-border-color:\n * tag-filled-danger-text-color:\n * tag-filled-danger-active-background-color:\n * tag-filled-danger-active-border-color:\n * tag-filled-danger-hover-background-color:\n * tag-filled-danger-hover-border-color:\n * tag-filled-danger-selected-background-color:\n * tag-filled-danger-selected-border-color:\n * tag-filled-control-background-color:\n * tag-filled-control-border-color:\n * tag-filled-control-text-color:\n * tag-filled-control-active-background-color:\n * tag-filled-control-active-border-color:\n * tag-filled-control-hover-background-color:\n * tag-filled-control-hover-border-color:\n * tag-filled-control-selected-background-color:\n * tag-filled-control-selected-border-color:\n * tag-outline-basic-background-color:\n * tag-outline-basic-border-color:\n * tag-outline-basic-text-color:\n * tag-outline-basic-active-background-color:\n * tag-outline-basic-active-border-color:\n * tag-outline-basic-active-text-color:\n * tag-outline-basic-hover-background-color:\n * tag-outline-basic-hover-border-color:\n * tag-outline-basic-hover-text-color:\n * tag-outline-basic-selected-background-color:\n * tag-outline-basic-selected-border-color:\n * tag-outline-basic-selected-text-color:\n * tag-outline-primary-background-color:\n * tag-outline-primary-border-color:\n * tag-outline-primary-text-color:\n * tag-outline-primary-active-background-color:\n * tag-outline-primary-active-border-color:\n * tag-outline-primary-active-text-color:\n * tag-outline-primary-hover-background-color:\n * tag-outline-primary-hover-border-color:\n * tag-outline-primary-hover-text-color:\n * tag-outline-primary-selected-background-color:\n * tag-outline-primary-selected-border-color:\n * tag-outline-primary-selected-text-color:\n * tag-outline-success-background-color:\n * tag-outline-success-border-color:\n * tag-outline-success-text-color:\n * tag-outline-success-active-background-color:\n * tag-outline-success-active-border-color:\n * tag-outline-success-active-text-color:\n * tag-outline-success-hover-background-color:\n * tag-outline-success-hover-border-color:\n * tag-outline-success-hover-text-color:\n * tag-outline-success-selected-background-color:\n * tag-outline-success-selected-border-color:\n * tag-outline-success-selected-text-color:\n * tag-outline-info-background-color:\n * tag-outline-info-border-color:\n * tag-outline-info-text-color:\n * tag-outline-info-active-background-color:\n * tag-outline-info-active-border-color:\n * tag-outline-info-active-text-color:\n * tag-outline-info-hover-background-color:\n * tag-outline-info-hover-border-color:\n * tag-outline-info-hover-text-color:\n * tag-outline-info-selected-background-color:\n * tag-outline-info-selected-border-color:\n * tag-outline-info-selected-text-color:\n * tag-outline-warning-background-color:\n * tag-outline-warning-border-color:\n * tag-outline-warning-text-color:\n * tag-outline-warning-active-background-color:\n * tag-outline-warning-active-border-color:\n * tag-outline-warning-active-text-color:\n * tag-outline-warning-hover-background-color:\n * tag-outline-warning-hover-border-color:\n * tag-outline-warning-hover-text-color:\n * tag-outline-warning-selected-background-color:\n * tag-outline-warning-selected-border-color:\n * tag-outline-warning-selected-text-color:\n * tag-outline-danger-background-color:\n * tag-outline-danger-border-color:\n * tag-outline-danger-text-color:\n * tag-outline-danger-active-background-color:\n * tag-outline-danger-active-border-color:\n * tag-outline-danger-active-text-color:\n * tag-outline-danger-hover-background-color:\n * tag-outline-danger-hover-border-color:\n * tag-outline-danger-hover-text-color:\n * tag-outline-danger-selected-background-color:\n * tag-outline-danger-selected-border-color:\n * tag-outline-danger-selected-text-color:\n * tag-outline-control-background-color:\n * tag-outline-control-border-color:\n * tag-outline-control-text-color:\n * tag-outline-control-active-background-color:\n * tag-outline-control-active-border-color:\n * tag-outline-control-active-text-color:\n * tag-outline-control-hover-background-color:\n * tag-outline-control-hover-border-color:\n * tag-outline-control-hover-text-color:\n * tag-outline-control-selected-background-color:\n * tag-outline-control-selected-border-color:\n * tag-outline-control-selected-text-color:\n */\n\nlet NbTagComponent = /*#__PURE__*/(() => {\n  class NbTagComponent {\n    constructor(_hostElement, cd, renderer, zone, statusService) {\n      this._hostElement = _hostElement;\n      this.cd = cd;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.statusService = statusService;\n      this._destroy$ = new Subject();\n      this._selected = false;\n      this._removable = false;\n      /**\n       * Tag appearance: `filled`, `outline`.\n       */\n\n      this.appearance = 'filled';\n      /**\n       * Tag status: `basic`, `primary`, `info`, `success`, `warning`, `danger`, `control`.\n       */\n\n      this.status = 'basic';\n      /**\n       * Tag size: `tiny`, `small`, `medium`, `large`, `giant`.\n       */\n\n      this.size = 'medium';\n      this.role = 'option';\n      /**\n       * Emits when the user removes the tag\n       * (whether by clicking on the remove button or by pressing `delete` or `backspace` key).\n       */\n\n      this.remove = new EventEmitter();\n      this.selectedChange = new EventEmitter();\n      this._isActive = false;\n      this._id = `nb-tag-${tagUniqueId++}`;\n    }\n\n    get destroy$() {\n      return this._destroy$.asObservable();\n    }\n\n    get selected() {\n      return this._selected;\n    }\n\n    set selected(value) {\n      if (this.selected !== convertToBoolProperty(value)) {\n        this._selected = !this.selected;\n        this.selectedChange.emit({\n          tag: this,\n          selected: this.selected\n        });\n      }\n    }\n    /**\n     * Controls whether the user can remove a tag or not.\n     */\n\n\n    get removable() {\n      return this._removable;\n    }\n\n    set removable(value) {\n      this._removable = convertToBoolProperty(value);\n    }\n\n    get filled() {\n      return this.appearance === 'filled';\n    }\n\n    set filled(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'filled';\n      }\n    }\n\n    get outline() {\n      return this.appearance === 'outline';\n    }\n\n    set outline(value) {\n      if (convertToBoolProperty(value)) {\n        this.appearance = 'outline';\n      }\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get tiny() {\n      return this.size === 'tiny';\n    }\n\n    get small() {\n      return this.size === 'small';\n    }\n\n    get medium() {\n      return this.size === 'medium';\n    }\n\n    get large() {\n      return this.size === 'large';\n    }\n\n    get giant() {\n      return this.size === 'giant';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    _remove() {\n      if (this.removable) {\n        this.remove.emit(this);\n      }\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this._hostElement.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this._destroy$.next(this);\n    }\n\n    _toggleSelection() {\n      this.selected = !this.selected;\n      this.cd.markForCheck();\n    }\n\n    setActiveStyles() {\n      if (!this._isActive) {\n        this._isActive = true;\n        this.cd.markForCheck();\n      }\n    }\n\n    setInactiveStyles() {\n      if (this._isActive) {\n        this._isActive = false;\n        this.cd.markForCheck();\n      }\n    }\n\n  }\n\n  NbTagComponent.ɵfac = function NbTagComponent_Factory(t) {\n    return new (t || NbTagComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbTagComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTagComponent,\n    selectors: [[\"nb-tag\"]],\n    hostVars: 37,\n    hostBindings: function NbTagComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown.delete\", function NbTagComponent_keydown_delete_HostBindingHandler() {\n          return ctx._remove();\n        })(\"keydown.backspace\", function NbTagComponent_keydown_backspace_HostBindingHandler() {\n          return ctx._remove();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"role\", ctx.role)(\"id\", ctx._id)(\"aria-selected\", ctx.selected);\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"active\", ctx._isActive)(\"selected\", ctx.selected)(\"appearance-filled\", ctx.filled)(\"appearance-outline\", ctx.outline)(\"status-basic\", ctx.basic)(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-info\", ctx.info)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-control\", ctx.control)(\"size-tiny\", ctx.tiny)(\"size-small\", ctx.small)(\"size-medium\", ctx.medium)(\"size-large\", ctx.large)(\"size-giant\", ctx.giant);\n      }\n    },\n    inputs: {\n      appearance: \"appearance\",\n      status: \"status\",\n      size: \"size\",\n      role: \"role\",\n      selected: \"selected\",\n      removable: \"removable\",\n      text: \"text\"\n    },\n    outputs: {\n      remove: \"remove\",\n      selectedChange: \"selectedChange\"\n    },\n    exportAs: [\"nbTag\"],\n    decls: 2,\n    vars: 2,\n    consts: [[\"icon\", \"close-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 3, \"class\", \"click\", 4, \"ngIf\"], [\"icon\", \"close-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 3, \"click\"]],\n    template: function NbTagComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtext(0);\n        ɵngcc0.ɵɵtemplate(1, NbTagComponent_nb_icon_1_Template, 1, 3, \"nb-icon\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵtextInterpolate1(\"\", ctx.text, \"\\n\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.removable);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbTagComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n *\n * `[nbTagInput]` directive connects input with a `nb-tag-list` component.\n *\n * @stacked-example(Tag Input, tag/tag-input.component)\n *\n * @additional-example(Tag Input with Autocomplete, tag/tag-input-with-autocomplete.component)\n *\n * @styles\n *\n * tag-list-tiny-tag-offset:\n * tag-list-small-tag-offset:\n * tag-list-medium-tag-offset:\n * tag-list-large-tag-offset:\n * tag-list-giant-tag-offset:\n * tag-list-with-input-tiny-padding:\n * tag-list-with-input-small-padding:\n * tag-list-with-input-medium-padding:\n * tag-list-with-input-large-padding:\n * tag-list-with-input-giant-padding:\n */\n\n\nlet NbTagInputDirective = /*#__PURE__*/(() => {\n  class NbTagInputDirective extends NbInputDirective {\n    constructor(_hostElement, focusMonitor, renderer, zone, statusService) {\n      super(_hostElement, focusMonitor, renderer, zone, statusService);\n      this._hostElement = _hostElement;\n      this.focusMonitor = focusMonitor;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.statusService = statusService;\n      this.keyDown$ = new Subject();\n      /**\n       * Controls which keys should trigger tag add event.\n       */\n\n      this.separatorKeys = [ENTER];\n      /**\n       * Emits when a tag need to be added.\n       */\n\n      this.tagAdd = new EventEmitter();\n      this.nbTagInputClass = true;\n    }\n\n    get _value() {\n      return this._hostElement.nativeElement.value;\n    }\n\n    _onKeydown(event) {\n      this.keyDown$.next(event);\n    }\n\n    ngAfterViewInit() {\n      super.ngAfterViewInit();\n      this.keyDown$.pipe(filter(({\n        keyCode\n      }) => this.isSeparatorKey(keyCode)), map(() => this._value), takeUntil(this.destroy$)).subscribe(value => this.tagAdd.emit({\n        value,\n        input: this._hostElement\n      }));\n    }\n\n    isSeparatorKey(keyCode) {\n      return this.separatorKeys.includes(keyCode);\n    }\n\n  }\n\n  NbTagInputDirective.ɵfac = function NbTagInputDirective_Factory(t) {\n    return new (t || NbTagInputDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbTagInputDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTagInputDirective,\n    selectors: [[\"input\", \"nbTagInput\", \"\"]],\n    hostVars: 2,\n    hostBindings: function NbTagInputDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function NbTagInputDirective_keydown_HostBindingHandler($event) {\n          return ctx._onKeydown($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"nb-tag-input\", ctx.nbTagInputClass);\n      }\n    },\n    inputs: {\n      separatorKeys: \"separatorKeys\"\n    },\n    outputs: {\n      tagAdd: \"tagAdd\"\n    },\n    exportAs: [\"nbTagInput\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbFormFieldControl,\n      useExisting: NbTagInputDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTagInputDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n *\n * `nb-tag-list` component displays a list of `nb-tag` components.\n *\n * @stacked-example(Tag List Showcase, tag/tag-showcase.component)\n *\n * @styles\n *\n * tag-list-tiny-tag-offset:\n * tag-list-small-tag-offset:\n * tag-list-medium-tag-offset:\n * tag-list-large-tag-offset:\n * tag-list-giant-tag-offset:\n * tag-list-with-input-tiny-padding:\n * tag-list-with-input-small-padding:\n * tag-list-with-input-medium-padding:\n * tag-list-with-input-large-padding:\n * tag-list-with-input-giant-padding:\n * tag-list-with-input-rectangle-border-radius:\n * tag-list-with-input-semi-round-border-radius:\n * tag-list-with-input-round-border-radius:\n */\n\n\nlet NbTagListComponent = /*#__PURE__*/(() => {\n  class NbTagListComponent {\n    constructor(hostElement, cd, renderer, zone, focusMonitor, activeDescendantKeyManagerFactory, directionService, statusService) {\n      this.hostElement = hostElement;\n      this.cd = cd;\n      this.renderer = renderer;\n      this.zone = zone;\n      this.focusMonitor = focusMonitor;\n      this.activeDescendantKeyManagerFactory = activeDescendantKeyManagerFactory;\n      this.directionService = directionService;\n      this.statusService = statusService;\n      this.destroy$ = new Subject();\n      this.keyDown$ = new Subject();\n      this.tagClick$ = new Subject();\n      this.focused = false;\n      /**\n       * Controls tags offset.\n       */\n\n      this.size = 'medium';\n      this.tabIndex = 0;\n      this.role = 'listbox';\n      this._multiple = false;\n      this.activeTagId = null;\n      /**\n       * Emits when tag need to be removed (whether because of click on the remove button\n       * or when `delete` or `backspace` key pressed).\n       */\n\n      this.tagRemove = new EventEmitter();\n    }\n\n    get multiple() {\n      return this._multiple;\n    }\n\n    set multiple(value) {\n      this._multiple = convertToBoolProperty(value);\n    }\n\n    get _hasInput() {\n      return !!this.tagInput;\n    }\n\n    get _isFocused() {\n      return this.focused;\n    }\n\n    get _isFullWidth() {\n      var _a;\n\n      return !!((_a = this.tagInput) === null || _a === void 0 ? void 0 : _a.fullWidth);\n    }\n\n    get _inputClasses() {\n      if (this._hasInput) {\n        return [`shape-${this.tagInput.shape}`, `size-${this.tagInput.fieldSize}`, this.statusService.getStatusClass(this.tagInput.status)];\n      }\n\n      return [`size-${this.size}`];\n    }\n\n    _onKeydown(event) {\n      this.keyDown$.next(event);\n    }\n\n    _onClick({\n      target\n    }) {\n      const clickedTag = this.tags.find(tag => tag._hostElement.nativeElement === target);\n\n      if (clickedTag) {\n        this.tagClick$.next(clickedTag);\n      }\n    }\n\n    ngOnInit() {\n      this.focusMonitor.monitor(this.hostElement, true).pipe(map(origin => !!origin), finalize(() => this.focusMonitor.stopMonitoring(this.hostElement)), takeUntil(this.destroy$)).subscribe(isFocused => this.onFocusChange(isFocused));\n    }\n\n    ngAfterContentInit() {\n      this.initKeyManager();\n      this.setAutocompleteCustomHost();\n    }\n\n    ngAfterViewInit() {\n      this.listenToLayoutDirectionChange();\n      this.listenListKeyDown();\n      this.listenInputKeyDown();\n      this.listenTagClick();\n      this.listenTagRemove();\n      this.listenTagDestroy();\n      this.listenActiveTagChange();\n      this.listenNoTags(); // TODO: #2254\n\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.hostElement.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n    }\n\n    initKeyManager() {\n      this.keyManager = this.activeDescendantKeyManagerFactory.create(this.tags).withHorizontalOrientation(this.directionService.getDirection()).withWrap();\n    }\n\n    listenToLayoutDirectionChange() {\n      this.directionService.onDirectionChange().pipe(takeUntil(this.destroy$)).subscribe(direction => this.keyManager.withHorizontalOrientation(direction));\n    }\n\n    listenListKeyDown() {\n      const tagListKeyDown$ = this.keyDown$.pipe(filter(({\n        target\n      }) => target === this.hostElement.nativeElement));\n      const activeTagKeyDown$ = tagListKeyDown$.pipe(filter(() => !!this.keyManager.activeItem));\n      tagListKeyDown$.pipe(takeUntil(this.destroy$)).subscribe(event => this.keyManager.onKeydown(event));\n      activeTagKeyDown$.pipe(filter(({\n        keyCode\n      }) => keyCode === SPACE), takeUntil(this.destroy$)).subscribe(event => {\n        this.toggleTag(this.keyManager.activeItem); // Prevents page scroll.\n\n        event.preventDefault();\n      });\n      activeTagKeyDown$.pipe(filter(({\n        keyCode\n      }) => this.isBackspaceOrDelete(keyCode)), map(() => this.keyManager.activeItem), takeUntil(this.destroy$)).subscribe(tagToRemove => tagToRemove._remove());\n    }\n\n    listenInputKeyDown() {\n      const inputKeyDown$ = this.keyDown$.pipe(filter(({\n        target\n      }) => {\n        var _a;\n\n        return target === ((_a = this.tagInput) === null || _a === void 0 ? void 0 : _a._hostElement.nativeElement);\n      }));\n      inputKeyDown$.pipe(filter(({\n        keyCode\n      }) => {\n        return this.tagInput._value === '' && this.isBackspaceOrDelete(keyCode) && this.tags.length > 0;\n      }), takeUntil(this.destroy$)).subscribe(() => {\n        this.hostElement.nativeElement.focus();\n        this.keyManager.setLastItemActive();\n        this.cd.markForCheck();\n      });\n    }\n\n    listenTagClick() {\n      this.tagClick$.pipe(takeUntil(this.destroy$)).subscribe(clickedTag => {\n        this.toggleTag(clickedTag);\n        this.keyManager.setActiveItem(clickedTag);\n      });\n    }\n\n    listenTagRemove() {\n      this.tags.changes.pipe(startWith(this.tags), switchMap(tags => merge(...tags.map(tag => tag.remove))), takeUntil(this.destroy$)).subscribe(tagToRemove => this.tagRemove.emit(tagToRemove));\n    }\n\n    listenTagDestroy() {\n      this.tags.changes.pipe(startWith(this.tags), switchMap(tags => merge(...tags.map(tag => tag.destroy$))), filter(destroyedTag => destroyedTag === this.keyManager.activeItem), map(destroyedTag => destroyedTag === this.tags.last), takeUntil(this.destroy$)).subscribe(isLastTagDestroyed => {\n        if (isLastTagDestroyed) {\n          this.keyManager.setPreviousItemActive();\n        } else {\n          this.keyManager.setNextItemActive();\n        }\n      });\n    }\n\n    listenNoTags() {\n      this.tags.changes.pipe(startWith(this.tags), filter(tags => tags.length === 0), takeUntil(this.destroy$)).subscribe(() => this.focusInputIfActive());\n    }\n\n    listenActiveTagChange() {\n      this.keyManager.change.pipe(map(() => {\n        var _a;\n\n        return (_a = this.keyManager.activeItem) === null || _a === void 0 ? void 0 : _a._id;\n      }), takeUntil(this.destroy$)).subscribe(activeTagId => {\n        this.activeTagId = activeTagId;\n        this.cd.markForCheck();\n      });\n    }\n\n    onFocusChange(isFocused) {\n      var _a;\n\n      this.focused = isFocused;\n      this.cd.markForCheck();\n\n      if (!isFocused || ((_a = this.tagInput) === null || _a === void 0 ? void 0 : _a.focused$.value)) {\n        this.keyManager.setActiveItem(-1);\n        return;\n      } // Focus input when focusing tag list without tags. Otherwise select first tag.\n\n\n      if (this.tags.length === 0 && this._hasInput) {\n        this.focusInput();\n      } else {\n        this.keyManager.setFirstItemActive();\n      }\n    }\n\n    isBackspaceOrDelete(keyCode) {\n      return keyCode === BACKSPACE || keyCode === DELETE;\n    }\n\n    setAutocompleteCustomHost() {\n      if (this.autocompleteDirective) {\n        this.autocompleteDirective.customOverlayHost = this.hostElement;\n      }\n    }\n\n    toggleTag(tagToToggle) {\n      tagToToggle._toggleSelection();\n\n      if (tagToToggle.selected && !this.multiple) {\n        this.tags.forEach(tag => {\n          if (tag !== tagToToggle) {\n            tag.selected = false;\n          }\n        });\n      }\n    }\n\n    focusInput() {\n      if (this._hasInput) {\n        this.tagInput._hostElement.nativeElement.focus();\n      }\n    }\n\n    focusInputIfActive() {\n      if (this._isFocused) {\n        this.focusInput();\n      }\n    }\n\n  }\n\n  NbTagListComponent.ɵfac = function NbTagListComponent_Factory(t) {\n    return new (t || NbTagListComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbFocusMonitor), ɵngcc0.ɵɵdirectiveInject(NbActiveDescendantKeyManagerFactoryService), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbTagListComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTagListComponent,\n    selectors: [[\"nb-tag-list\"]],\n    contentQueries: function NbTagListComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbTagInputDirective, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbAutocompleteDirective, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbTagComponent, 4);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tagInput = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.autocompleteDirective = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.tags = _t);\n      }\n    },\n    hostVars: 12,\n    hostBindings: function NbTagListComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"keydown\", function NbTagListComponent_keydown_HostBindingHandler($event) {\n          return ctx._onKeydown($event);\n        })(\"click\", function NbTagListComponent_click_HostBindingHandler($event) {\n          return ctx._onClick($event);\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"tabindex\", ctx.tabIndex)(\"role\", ctx.role)(\"aria-activedescendant\", ctx.activeTagId)(\"aria-multiselectable\", ctx.multiple);\n        ɵngcc0.ɵɵclassMap(ctx._inputClasses);\n        ɵngcc0.ɵɵclassProp(\"nb-tag-list-with-input\", ctx._hasInput)(\"focus\", ctx._isFocused)(\"input-full-width\", ctx._isFullWidth);\n      }\n    },\n    inputs: {\n      size: \"size\",\n      tabIndex: \"tabIndex\",\n      role: \"role\",\n      multiple: \"multiple\"\n    },\n    outputs: {\n      tagRemove: \"tagRemove\"\n    },\n    exportAs: [\"nbTagList\"],\n    ngContentSelectors: _c51,\n    decls: 2,\n    vars: 0,\n    consts: [[1, \"nb-tag-list-tags-wrapper\"]],\n    template: function NbTagListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c50);\n        ɵngcc0.ɵɵelementStart(0, \"div\", 0);\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n    },\n    encapsulation: 2,\n    changeDetection: 0\n  });\n  return NbTagListComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTagModule = /*#__PURE__*/(() => {\n  class NbTagModule {}\n\n  NbTagModule.ɵfac = function NbTagModule_Factory(t) {\n    return new (t || NbTagModule)();\n  };\n\n  NbTagModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTagModule\n  });\n  NbTagModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, NbIconModule]]\n  });\n  return NbTagModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTagModule, {\n    declarations: function () {\n      return [NbTagComponent, NbTagListComponent, NbTagInputDirective];\n    },\n    imports: function () {\n      return [CommonModule, NbIconModule];\n    },\n    exports: function () {\n      return [NbTagComponent, NbTagListComponent, NbTagInputDirective];\n    }\n  });\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_DEFAULT_ROW_LEVEL = 0;\n/**\n * Implicit context of cells and rows\n */\n\nclass NbTreeGridPresentationNode {\n  constructor(\n  /**\n   * Data object associated with row\n   */\n  data, children,\n  /**\n   * Row expand state\n   */\n  expanded, level) {\n    this.data = data;\n    this.children = children;\n    this.expanded = expanded;\n    this.level = level;\n  }\n  /**\n   * True if row has child rows\n   */\n\n\n  hasChildren() {\n    return !!this.children && !!this.children.length;\n  }\n\n}\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTreeGridDataService = /*#__PURE__*/(() => {\n  class NbTreeGridDataService {\n    constructor() {\n      this.defaultGetters = {\n        dataGetter: node => node.data,\n        childrenGetter: d => d.children || undefined,\n        expandedGetter: d => !!d.expanded\n      };\n    }\n\n    toPresentationNodes(nodes, customGetters, level = NB_DEFAULT_ROW_LEVEL) {\n      const getters = Object.assign(Object.assign({}, this.defaultGetters), customGetters);\n      return this.mapNodes(nodes, getters, level);\n    }\n\n    mapNodes(nodes, getters, level) {\n      const {\n        dataGetter,\n        childrenGetter,\n        expandedGetter\n      } = getters;\n      return nodes.map(node => {\n        const childrenNodes = childrenGetter(node);\n        let children;\n\n        if (childrenNodes) {\n          children = this.toPresentationNodes(childrenNodes, getters, level + 1);\n        }\n\n        return new NbTreeGridPresentationNode(dataGetter(node), children, expandedGetter(node), level);\n      });\n    }\n\n    flattenExpanded(nodes) {\n      return nodes.reduce((res, node) => {\n        res.push(node);\n\n        if (node.expanded && node.hasChildren()) {\n          res.push(...this.flattenExpanded(node.children));\n        }\n\n        return res;\n      }, []);\n    }\n\n    copy(nodes) {\n      return nodes.map(node => {\n        let children;\n\n        if (node.hasChildren()) {\n          children = this.copy(node.children);\n        }\n\n        return new NbTreeGridPresentationNode(node.data, children, node.expanded, node.level);\n      });\n    }\n\n  }\n\n  NbTreeGridDataService.ɵfac = function NbTreeGridDataService_Factory(t) {\n    return new (t || NbTreeGridDataService)();\n  };\n\n  NbTreeGridDataService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTreeGridDataService,\n    factory: NbTreeGridDataService.ɵfac\n  });\n  return NbTreeGridDataService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Service used to filter tree grid data. Searched searchString in all object values.\n * If you need custom filter, you can extend this service and override filterPredicate or whole filter method.\n */\n\n\nlet NbTreeGridFilterService = /*#__PURE__*/(() => {\n  class NbTreeGridFilterService {\n    filter(query, data) {\n      if (!query) {\n        return data;\n      }\n\n      return data.reduce((filtered, node) => {\n        let filteredChildren;\n\n        if (node.children) {\n          filteredChildren = this.filter(query, node.children);\n          node.children = filteredChildren;\n        }\n\n        node.expanded = false;\n\n        if (filteredChildren && filteredChildren.length) {\n          node.expanded = true;\n          filtered.push(node);\n        } else if (this.filterPredicate(node.data, query)) {\n          filtered.push(node);\n        }\n\n        return filtered;\n      }, []);\n    }\n\n    filterPredicate(data, searchQuery) {\n      const preparedQuery = searchQuery.trim().toLocaleLowerCase();\n\n      for (const val of Object.values(data)) {\n        const preparedVal = `${val}`.trim().toLocaleLowerCase();\n\n        if (preparedVal.includes(preparedQuery)) {\n          return true;\n        }\n      }\n\n      return false;\n    }\n\n  }\n\n  NbTreeGridFilterService.ɵfac = function NbTreeGridFilterService_Factory(t) {\n    return new (t || NbTreeGridFilterService)();\n  };\n\n  NbTreeGridFilterService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTreeGridFilterService,\n    factory: NbTreeGridFilterService.ɵfac\n  });\n  return NbTreeGridFilterService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nvar NbSortDirection = /*#__PURE__*/(() => {\n  (function (NbSortDirection) {\n    NbSortDirection[\"ASCENDING\"] = \"asc\";\n    NbSortDirection[\"DESCENDING\"] = \"desc\";\n    NbSortDirection[\"NONE\"] = \"\";\n  })(NbSortDirection || (NbSortDirection = {}));\n\n  return NbSortDirection;\n})();\nconst sortDirections = [NbSortDirection.ASCENDING, NbSortDirection.DESCENDING, NbSortDirection.NONE];\n/**\n * Directive triggers sort method of passed object when sort header changes direction\n */\n\nlet NbSortDirective = /*#__PURE__*/(() => {\n  class NbSortDirective {\n    constructor() {\n      this.sort = new EventEmitter();\n    }\n\n    emitSort(sortRequest) {\n      if (this.sortable && this.sortable.sort) {\n        this.sortable.sort(sortRequest);\n      }\n\n      this.sort.emit(sortRequest);\n    }\n\n  }\n\n  NbSortDirective.ɵfac = function NbSortDirective_Factory(t) {\n    return new (t || NbSortDirective)();\n  };\n\n  NbSortDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbSortDirective,\n    selectors: [[\"\", \"nbSort\", \"\"]],\n    inputs: {\n      sortable: [\"nbSort\", \"sortable\"]\n    },\n    outputs: {\n      sort: \"sort\"\n    }\n  });\n  return NbSortDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Directive for headers sort icons. Mark you icon implementation with this structural directive and\n * it'll set template's implicit context with current direction. Context also has `isAscending`,\n * `isDescending` and `isNone` properties.\n */\n\n\nlet NbSortHeaderIconDirective = /*#__PURE__*/(() => {\n  class NbSortHeaderIconDirective {}\n\n  NbSortHeaderIconDirective.ɵfac = function NbSortHeaderIconDirective_Factory(t) {\n    return new (t || NbSortHeaderIconDirective)();\n  };\n\n  NbSortHeaderIconDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbSortHeaderIconDirective,\n    selectors: [[\"\", \"nbSortHeaderIcon\", \"\"]]\n  });\n  return NbSortHeaderIconDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbSortIconComponent = /*#__PURE__*/(() => {\n  class NbSortIconComponent {\n    constructor() {\n      this.direction = NbSortDirection.NONE;\n    }\n\n    isAscending() {\n      return this.direction === NbSortDirection.ASCENDING;\n    }\n\n    isDescending() {\n      return this.direction === NbSortDirection.DESCENDING;\n    }\n\n    isDirectionSet() {\n      return this.isAscending() || this.isDescending();\n    }\n\n  }\n\n  NbSortIconComponent.ɵfac = function NbSortIconComponent_Factory(t) {\n    return new (t || NbSortIconComponent)();\n  };\n\n  NbSortIconComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSortIconComponent,\n    selectors: [[\"nb-sort-icon\"]],\n    inputs: {\n      direction: \"direction\"\n    },\n    decls: 1,\n    vars: 1,\n    consts: [[4, \"ngIf\"], [\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"icon\", \"chevron-up-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"icon\", \"chevron-down-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\"], [\"icon\", \"chevron-up-outline\", \"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\"]],\n    template: function NbSortIconComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵtemplate(0, NbSortIconComponent_ng_container_0_Template, 3, 2, \"ng-container\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.isDirectionSet());\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    encapsulation: 2\n  });\n  return NbSortIconComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Marks header as sort header so it emitting sort event when clicked.\n */\n\n\nlet NbSortHeaderComponent = /*#__PURE__*/(() => {\n  class NbSortHeaderComponent {\n    constructor(sort, columnDef) {\n      this.sort = sort;\n      this.columnDef = columnDef;\n      this.disabledValue = false;\n    }\n    /**\n     * Disable sort header\n     */\n\n\n    set disabled(value) {\n      this.disabledValue = convertToBoolProperty(value);\n    }\n\n    get disabled() {\n      return this.disabledValue;\n    }\n\n    sortIfEnabled() {\n      if (!this.disabled) {\n        this.sortData();\n      }\n    }\n\n    isAscending() {\n      return this.direction === NbSortDirection.ASCENDING;\n    }\n\n    isDescending() {\n      return this.direction === NbSortDirection.DESCENDING;\n    }\n\n    sortData() {\n      const sortRequest = this.createSortRequest();\n      this.sort.emitSort(sortRequest);\n    }\n\n    getIconContext() {\n      return {\n        $implicit: this.direction,\n        isAscending: this.isAscending(),\n        isDescending: this.isDescending(),\n        isNone: !this.isAscending() && !this.isDescending()\n      };\n    }\n\n    getDisabledAttributeValue() {\n      return this.disabled ? '' : null;\n    }\n\n    createSortRequest() {\n      this.direction = this.getNextDirection();\n      return {\n        direction: this.direction,\n        column: this.columnDef.name\n      };\n    }\n\n    getNextDirection() {\n      const sortDirectionCycle = sortDirections;\n      let nextDirectionIndex = sortDirectionCycle.indexOf(this.direction) + 1;\n\n      if (nextDirectionIndex >= sortDirectionCycle.length) {\n        nextDirectionIndex = 0;\n      }\n\n      return sortDirectionCycle[nextDirectionIndex];\n    }\n\n  }\n\n  NbSortHeaderComponent.ɵfac = function NbSortHeaderComponent_Factory(t) {\n    return new (t || NbSortHeaderComponent)(ɵngcc0.ɵɵdirectiveInject(NbSortDirective), ɵngcc0.ɵɵdirectiveInject(NB_SORT_HEADER_COLUMN_DEF));\n  };\n\n  NbSortHeaderComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbSortHeaderComponent,\n    selectors: [[\"\", \"nbSortHeader\", \"\"]],\n    contentQueries: function NbSortHeaderComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSortHeaderIconDirective, 5, TemplateRef);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.sortIcon = _t.first);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function NbSortHeaderComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbSortHeaderComponent_click_HostBindingHandler() {\n          return ctx.sortIfEnabled();\n        });\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"disabled\", ctx.disabled);\n      }\n    },\n    inputs: {\n      disabled: \"disabled\",\n      direction: [\"nbSortHeader\", \"direction\"]\n    },\n    attrs: _c52,\n    ngContentSelectors: _c0,\n    decls: 5,\n    vars: 5,\n    consts: [[\"type\", \"button\", 1, \"nb-tree-grid-header-change-sort-button\", 3, \"click\"], [3, \"direction\", 4, \"ngIf\", \"ngIfElse\"], [3, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"customIcon\", \"\"], [3, \"direction\"]],\n    template: function NbSortHeaderComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵlistener(\"click\", function NbSortHeaderComponent_Template_button_click_0_listener() {\n          return ctx.sortData();\n        });\n        ɵngcc0.ɵɵprojection(1);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(2, NbSortHeaderComponent_nb_sort_icon_2_Template, 1, 1, \"nb-sort-icon\", 1);\n        ɵngcc0.ɵɵtemplate(3, NbSortHeaderComponent_ng_template_3_Template, 0, 0, \"ng-template\", 2, 3, ɵngcc0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = ɵngcc0.ɵɵreference(4);\n\n        ɵngcc0.ɵɵattribute(\"disabled\", ctx.getDisabledAttributeValue());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", !ctx.sortIcon)(\"ngIfElse\", _r1);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngTemplateOutlet\", ctx.sortIcon)(\"ngTemplateOutletContext\", ctx.getIconContext());\n      }\n    },\n    directives: [ɵngcc2.NgIf, ɵngcc2.NgTemplateOutlet, NbSortIconComponent],\n    encapsulation: 2\n  });\n  return NbSortHeaderComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Service used to sort tree grid data. Uses Array.prototype.sort method.\n * If you need custom sorting, you can extend this service and override comparator or whole sort method.\n */\n\n\nlet NbTreeGridSortService = /*#__PURE__*/(() => {\n  class NbTreeGridSortService {\n    sort(request, data) {\n      if (!request) {\n        return data;\n      }\n\n      const sorted = data.sort((na, nb) => this.comparator(request, na, nb));\n\n      for (const node of data) {\n        if (node.children) {\n          node.children = this.sort(request, node.children);\n        }\n      }\n\n      return sorted;\n    }\n\n    comparator(request, na, nb) {\n      const key = request.column;\n      const dir = request.direction;\n      const a = na.data[key];\n      const b = nb.data[key];\n      let res = 0;\n\n      if (a > b) {\n        res = 1;\n      }\n\n      if (a < b) {\n        res = -1;\n      }\n\n      return dir === NbSortDirection.ASCENDING ? res : res * -1;\n    }\n\n  }\n\n  NbTreeGridSortService.ɵfac = function NbTreeGridSortService_Factory(t) {\n    return new (t || NbTreeGridSortService)();\n  };\n\n  NbTreeGridSortService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTreeGridSortService,\n    factory: NbTreeGridSortService.ɵfac\n  });\n  return NbTreeGridSortService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTreeGridService = /*#__PURE__*/(() => {\n  class NbTreeGridService {\n    expand(data, row, options = {}) {\n      const node = this.find(data, row);\n      node.expanded = true;\n\n      if (options.deep && node.hasChildren()) {\n        node.children.forEach(n => this.expand(data, n.data, options));\n      }\n    }\n\n    collapse(data, row, options = {}) {\n      const node = this.find(data, row);\n      node.expanded = false;\n\n      if (options.deep && node.hasChildren()) {\n        node.children.forEach(n => this.collapse(data, n.data, options));\n      }\n    }\n\n    toggle(data, row, options = {}) {\n      const node = this.find(data, row);\n\n      if (node.expanded) {\n        this.collapse(data, row, options);\n      } else {\n        this.expand(data, row, options);\n      }\n    }\n\n    find(data, row) {\n      const toCheck = [...data];\n\n      for (const node of toCheck) {\n        if (node.data === row) {\n          return node;\n        }\n\n        if (node.hasChildren()) {\n          toCheck.push(...node.children);\n        }\n      }\n    }\n\n  }\n\n  NbTreeGridService.ɵfac = function NbTreeGridService_Factory(t) {\n    return new (t || NbTreeGridService)();\n  };\n\n  NbTreeGridService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTreeGridService,\n    factory: NbTreeGridService.ɵfac\n  });\n  return NbTreeGridService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nclass NbTreeGridDataSource extends NbDataSource {\n  constructor(sortService, filterService, treeGridService, treeGridDataService) {\n    super();\n    this.sortService = sortService;\n    this.filterService = filterService;\n    this.treeGridService = treeGridService;\n    this.treeGridDataService = treeGridDataService;\n    /** Stream emitting render data to the table (depends on ordered data changes). */\n\n    this.renderData = new BehaviorSubject([]);\n    this.filterRequest = new BehaviorSubject('');\n    this.sortRequest = new BehaviorSubject(null);\n  }\n\n  setData(data, customGetters) {\n    let presentationData = [];\n\n    if (data) {\n      presentationData = this.treeGridDataService.toPresentationNodes(data, customGetters);\n    }\n\n    this.data = new BehaviorSubject(presentationData);\n    this.updateChangeSubscription();\n  }\n\n  connect(collectionViewer) {\n    return this.renderData;\n  }\n\n  disconnect(collectionViewer) {}\n\n  expand(row) {\n    this.treeGridService.expand(this.data.value, row);\n    this.data.next(this.data.value);\n  }\n\n  collapse(row) {\n    this.treeGridService.collapse(this.data.value, row);\n    this.data.next(this.data.value);\n  }\n\n  toggle(row, options) {\n    this.treeGridService.toggle(this.data.value, row, options);\n    this.data.next(this.data.value);\n  }\n\n  toggleByIndex(dataIndex, options) {\n    const node = this.renderData.value && this.renderData.value[dataIndex];\n\n    if (node) {\n      this.toggle(node.data, options);\n    }\n  }\n\n  getLevel(rowIndex) {\n    const row = this.renderData.value[rowIndex];\n    return row ? row.level : NB_DEFAULT_ROW_LEVEL;\n  }\n\n  sort(sortRequest) {\n    this.sortRequest.next(sortRequest);\n  }\n\n  filter(searchQuery) {\n    this.filterRequest.next(searchQuery);\n  }\n\n  updateChangeSubscription() {\n    const dataStream = this.data;\n    const filteredData = combineLatest([dataStream, this.filterRequest]).pipe(map(([data]) => this.treeGridDataService.copy(data)), map(data => this.filterData(data)));\n    const sortedData = combineLatest([filteredData, this.sortRequest]).pipe(map(([data]) => this.sortData(data)));\n    sortedData.pipe(map(data => this.treeGridDataService.flattenExpanded(data))).subscribe(data => this.renderData.next(data));\n  }\n\n  filterData(data) {\n    return this.filterService.filter(this.filterRequest.value, data);\n  }\n\n  sortData(data) {\n    return this.sortService.sort(this.sortRequest.value, data);\n  }\n\n}\n\nlet NbTreeGridDataSourceBuilder = /*#__PURE__*/(() => {\n  class NbTreeGridDataSourceBuilder {\n    constructor(filterService, sortService, treeGridService, treeGridDataService) {\n      this.filterService = filterService;\n      this.sortService = sortService;\n      this.treeGridService = treeGridService;\n      this.treeGridDataService = treeGridDataService;\n    }\n\n    create(data, customGetters) {\n      const dataSource = new NbTreeGridDataSource(this.sortService, this.filterService, this.treeGridService, this.treeGridDataService);\n      dataSource.setData(data, customGetters);\n      return dataSource;\n    }\n\n  }\n\n  NbTreeGridDataSourceBuilder.ɵfac = function NbTreeGridDataSourceBuilder_Factory(t) {\n    return new (t || NbTreeGridDataSourceBuilder)(ɵngcc0.ɵɵinject(NbTreeGridFilterService), ɵngcc0.ɵɵinject(NbTreeGridSortService), ɵngcc0.ɵɵinject(NbTreeGridService), ɵngcc0.ɵɵinject(NbTreeGridDataService));\n  };\n\n  NbTreeGridDataSourceBuilder.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbTreeGridDataSourceBuilder,\n    factory: NbTreeGridDataSourceBuilder.ɵfac\n  });\n  return NbTreeGridDataSourceBuilder;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst NB_TREE_GRID = new InjectionToken('NB_TREE_GRID');\nlet NbColumnsService = /*#__PURE__*/(() => {\n  class NbColumnsService {\n    constructor(differs) {\n      this.differs = differs;\n      this.columnHide$ = new Subject();\n      this.columnShow$ = new Subject();\n    }\n\n    setColumns(columns) {\n      if (!this.changesDiffer) {\n        this.changesDiffer = this.differs.find(columns || []).create();\n      }\n\n      if (this.changesDiffer.diff(columns)) {\n        this.allColumns = Array.from(columns);\n        this.visibleColumns = Array.from(columns);\n      }\n    }\n\n    getVisibleColumns() {\n      return this.visibleColumns;\n    }\n\n    hideColumn(column) {\n      const toRemove = this.visibleColumns.indexOf(column);\n\n      if (toRemove > -1) {\n        this.visibleColumns.splice(toRemove, 1);\n        this.columnHide$.next();\n      }\n    }\n\n    showColumn(column) {\n      if (this.visibleColumns.includes(column)) {\n        return;\n      }\n\n      this.visibleColumns.splice(this.findInsertIndex(column), 0, column);\n      this.columnShow$.next();\n    }\n\n    onColumnsChange() {\n      return merge(this.columnShow$, this.columnHide$);\n    }\n\n    findInsertIndex(column) {\n      const initialIndex = this.allColumns.indexOf(column);\n\n      if (initialIndex === 0 || !this.visibleColumns.length) {\n        return 0;\n      }\n\n      if (initialIndex === this.allColumns.length - 1) {\n        return this.visibleColumns.length;\n      }\n\n      const leftSiblingIndex = initialIndex - 1;\n\n      for (let i = leftSiblingIndex; i >= 0; i--) {\n        const leftSibling = this.allColumns[i];\n        const index = this.visibleColumns.indexOf(leftSibling);\n\n        if (index !== -1) {\n          return index + 1;\n        }\n      }\n\n      const rightSiblingIndex = initialIndex + 1;\n\n      for (let i = rightSiblingIndex; i < this.allColumns.length; i++) {\n        const rightSibling = this.allColumns[i];\n        const index = this.visibleColumns.indexOf(rightSibling);\n\n        if (index !== -1) {\n          return index;\n        }\n      }\n\n      throw new Error(`Can't restore column position.`);\n    }\n\n  }\n\n  NbColumnsService.ɵfac = function NbColumnsService_Factory(t) {\n    return new (t || NbColumnsService)(ɵngcc0.ɵɵinject(ɵngcc0.IterableDiffers));\n  };\n\n  NbColumnsService.ɵprov = /*@__PURE__*/ɵngcc0.ɵɵdefineInjectable({\n    token: NbColumnsService,\n    factory: NbColumnsService.ɵfac\n  });\n  return NbColumnsService;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Tree grid component that can be used to display nested rows of data.\n * Supports filtering and sorting.\n * @stacked-example(Showcase, tree-grid/tree-grid-showcase.component)\n *\n * ### Installation\n *\n * Import `NbTreeGridModule` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbTreeGridModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n *\n * ### Usage\n *\n * As the most basic usage you need to define [nbTreeGridRowDef](docs/components/treegrid/api#nbtreegridrowdefdirective)\n * where you should pass columns to display in rows and\n * [nbTreeGridColumnDef](docs/components/treegrid/api#nbtreegridcolumndefdirective) - component containing cell\n * definitions for each column passed to row definition.\n * @stacked-example(Basic, tree-grid/tree-grid-basic.component)\n *\n * `NbTreeGridComponent`'s source input and `NbTreeGridDataSourceBuilder.create` expecting data to be an array of\n * objects with `data`, `children` and `expanded` properties. If your data doesn't match this interface, you can pass\n * getter functions for each property as arguments to `NbTreeGridDataSourceBuilder.create` method.\n * @stacked-example(Custom node structure, tree-grid/tree-grid-custom-node-structure.component)\n *\n * To use sorting you can add `nbSort` directive to table and subscribe to `sort` method. When user click on header,\n * sort event will be emitted. Event object contain clicked column name and desired sort direction.\n * @stacked-example(Sortable, tree-grid/tree-grid-sortable.component)\n *\n * You can use `Data Source Builder` to create `NbTreeGridDataSource` which would have toggle, sort and\n * filter methods. Then you can call this methods to change sort or toggle rows programmatically. Also `nbSort` and\n * `nbFilterInput` directives both support `NbTreeGridDataSource`, so you can pass it directly as an input and\n * directives will trigger sort, toggle themselves.\n * @stacked-example(Data Source Builder, tree-grid/tree-grid-showcase.component)\n *\n * You can create responsive grid by setting `hideOn` and `showOn` inputs of\n * [nbTreeGridColumnDef](docs/components/tree-grid/api#nbtreegridcolumndefdirective) directive.\n * When viewport reaches specified width grid hides or shows columns.\n * @stacked-example(Responsive columns, tree-grid/tree-grid-responsive.component)\n *\n * To customize sort or row toggle icons you can use `nbSortHeaderIcon` and `nbTreeGridRowToggle` directives\n * respectively. `nbSortHeaderIcon` is a structural directive and it's implicit context set to current direction.\n * Also context has three properties: `isAscending`, `isDescending` and `isNone`.\n * @stacked-example(Custom icons, tree-grid/tree-grid-custom-icons.component)\n *\n * By default, row to toggle happens when user clicks anywhere in the row. Also double click expands row deeply.\n * To disable this you can set `[clickToToggle]=\"false\"` input of `nbTreeGridRow`.\n * @stacked-example(Disable click toggle, tree-grid/tree-grid-disable-click-toggle.component)\n *\n * @styles\n *\n * tree-grid-cell-border-width:\n * tree-grid-cell-border-style:\n * tree-grid-cell-border-color:\n * tree-grid-row-min-height:\n * tree-grid-cell-padding:\n * tree-grid-header-background-color:\n * tree-grid-header-text-color:\n * tree-grid-header-text-font-family:\n * tree-grid-header-text-font-size:\n * tree-grid-header-text-font-weight:\n * tree-grid-header-text-line-height:\n * tree-grid-footer-background-color:\n * tree-grid-footer-text-color:\n * tree-grid-footer-text-font-family:\n * tree-grid-footer-text-font-size:\n * tree-grid-footer-text-font-weight:\n * tree-grid-footer-text-line-height:\n * tree-grid-row-background-color:\n * tree-grid-row-even-background-color:\n * tree-grid-row-hover-background-color:\n * tree-grid-row-text-color:\n * tree-grid-row-text-font-family:\n * tree-grid-row-text-font-size:\n * tree-grid-row-text-font-weight:\n * tree-grid-row-text-line-height:\n * tree-grid-sort-header-button-background-color:\n * tree-grid-sort-header-button-border:\n * tree-grid-sort-header-button-padding:\n */\n\n\nlet NbTreeGridComponent = /*#__PURE__*/(() => {\n  class NbTreeGridComponent extends NbTable {\n    constructor(dataSourceBuilder, differs, changeDetectorRef, elementRef, role, dir, document, platform, window, _viewRepeater, _coalescedStyleScheduler, _viewportRuler, _stickyPositioningListener) {\n      super(differs, changeDetectorRef, elementRef, role, dir, document, platform, _viewRepeater, _coalescedStyleScheduler, _viewportRuler, _stickyPositioningListener);\n      this.dataSourceBuilder = dataSourceBuilder;\n      this.window = window;\n      this._viewRepeater = _viewRepeater;\n      this._coalescedStyleScheduler = _coalescedStyleScheduler;\n      this._stickyPositioningListener = _stickyPositioningListener;\n      this.destroy$ = new Subject();\n      this.levelPadding = '';\n      this.equalColumnsWidthValue = false;\n      this.treeClass = true;\n      this.platform = platform;\n    }\n    /**\n     * The table's data\n     * @param data\n     * @type {<T>[] | NbTreeGridDataSource}\n     */\n\n\n    set source(data) {\n      if (!data) {\n        return;\n      }\n\n      if (data instanceof NbTreeGridDataSource) {\n        this._source = data;\n      } else {\n        this._source = this.dataSourceBuilder.create(data);\n      }\n\n      this.dataSource = this._source;\n    }\n    /**\n     * Make all columns equal width. False by default.\n     */\n\n\n    set equalColumnsWidth(value) {\n      this.equalColumnsWidthValue = convertToBoolProperty(value);\n    }\n\n    get equalColumnsWidth() {\n      return this.equalColumnsWidthValue;\n    }\n\n    ngAfterViewInit() {\n      this.checkDefsCount();\n      const rowsChange$ = merge(this._contentRowDefs.changes, this._contentHeaderRowDefs.changes, this._contentFooterRowDefs.changes);\n      rowsChange$.pipe(takeUntil(this.destroy$)).subscribe(() => this.checkDefsCount());\n\n      if (this.platform.isBrowser) {\n        this.updateVisibleColumns();\n        const windowResize$ = fromEvent(this.window, 'resize').pipe(debounceTime(50));\n        merge(rowsChange$, this._contentColumnDefs.changes, windowResize$).pipe(takeUntil(this.destroy$)).subscribe(() => this.updateVisibleColumns());\n      }\n    }\n\n    ngOnDestroy() {\n      super.ngOnDestroy();\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    toggleRow(row, options) {\n      const context = this.getRowContext(row);\n\n      this._source.toggle(context.$implicit.data, options);\n    }\n\n    toggleCellRow(cell) {\n      const context = this.getCellContext(cell);\n\n      this._source.toggle(context.$implicit.data);\n    }\n\n    getColumnWidth() {\n      if (this.equalColumnsWidth) {\n        return `${100 / this.getColumnsCount()}%`;\n      }\n\n      return '';\n    }\n\n    getCellLevel(cell, columnName) {\n      if (this.isFirstColumn(columnName)) {\n        return this.getCellContext(cell).$implicit.level;\n      }\n\n      return NB_DEFAULT_ROW_LEVEL;\n    }\n\n    getRowContext(row) {\n      return this.getContextByRowEl(row.elementRef.nativeElement);\n    }\n\n    getCellContext(cell) {\n      return this.getContextByCellEl(cell.elementRef.nativeElement);\n    }\n\n    getContextByCellEl(cellEl) {\n      return this.getContextByRowEl(cellEl.parentElement);\n    }\n\n    getContextByRowEl(rowEl) {\n      const rowsContainer = this._rowOutlet.viewContainer;\n\n      for (let i = 0; i < rowsContainer.length; i++) {\n        const rowViewRef = rowsContainer.get(i);\n\n        if (rowViewRef.rootNodes.includes(rowEl)) {\n          return rowViewRef.context;\n        }\n      }\n    }\n\n    getColumns() {\n      let rowDef;\n\n      if (this._contentHeaderRowDefs.length) {\n        rowDef = this._contentHeaderRowDefs.first;\n      } else {\n        rowDef = this._contentRowDefs.first;\n      }\n\n      return Array.from(rowDef.getVisibleColumns() || []);\n    }\n\n    getColumnsCount() {\n      return this.getColumns().length;\n    }\n\n    isFirstColumn(columnName) {\n      return this.getColumns()[0] === columnName;\n    }\n\n    checkDefsCount() {\n      if (this._contentRowDefs.length > 1) {\n        throw new Error(`Found multiple row definitions`);\n      }\n\n      if (this._contentHeaderRowDefs.length > 1) {\n        throw new Error(`Found multiple header row definitions`);\n      }\n\n      if (this._contentFooterRowDefs.length > 1) {\n        throw new Error(`Found multiple footer row definitions`);\n      }\n    }\n\n    updateVisibleColumns() {\n      const width = this.window.innerWidth;\n      const columnDefs = this._contentColumnDefs;\n      const columnsToHide = columnDefs.filter(col => col.shouldHide(width)).map(col => col.name);\n      const columnsToShow = columnDefs.filter(col => col.shouldShow(width)).map(col => col.name);\n\n      if (!columnsToHide.length && !columnsToShow.length) {\n        return;\n      }\n\n      const rowDefs = [this._contentHeaderRowDefs.first, this._contentRowDefs.first, this._contentFooterRowDefs.first].filter(d => !!d);\n\n      for (const rowDef of rowDefs) {\n        for (const column of columnsToHide) {\n          rowDef.hideColumn(column);\n        }\n\n        for (const column of columnsToShow) {\n          rowDef.showColumn(column);\n        }\n      }\n    }\n\n  }\n\n  NbTreeGridComponent.ɵfac = function NbTreeGridComponent_Factory(t) {\n    return new (t || NbTreeGridComponent)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridDataSourceBuilder), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵinjectAttribute('role'), ɵngcc0.ɵɵdirectiveInject(NbDirectionality), ɵngcc0.ɵɵdirectiveInject(NB_DOCUMENT), ɵngcc0.ɵɵdirectiveInject(NbPlatform), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(NB_VIEW_REPEATER_STRATEGY), ɵngcc0.ɵɵdirectiveInject(NB_COALESCED_STYLE_SCHEDULER), ɵngcc0.ɵɵdirectiveInject(NbViewportRulerAdapter), ɵngcc0.ɵɵdirectiveInject(NB_STICKY_POSITIONING_LISTENER, 12));\n  };\n\n  NbTreeGridComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTreeGridComponent,\n    selectors: [[\"table\", \"nbTreeGrid\", \"\"]],\n    hostVars: 2,\n    hostBindings: function NbTreeGridComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassProp(\"nb-tree-grid\", ctx.treeClass);\n      }\n    },\n    inputs: {\n      levelPadding: \"levelPadding\",\n      source: [\"nbTreeGrid\", \"source\"],\n      equalColumnsWidth: \"equalColumnsWidth\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NB_TREE_GRID,\n      useExisting: NbTreeGridComponent\n    }, NbColumnsService, ...NB_TABLE_PROVIDERS]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    attrs: _c53,\n    decls: 4,\n    vars: 0,\n    consts: [[\"nbHeaderRowOutlet\", \"\"], [\"nbRowOutlet\", \"\"], [\"nbNoDataRowOutlet\", \"\"], [\"nbFooterRowOutlet\", \"\"]],\n    template: function NbTreeGridComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n        ɵngcc0.ɵɵelementContainer(1, 1);\n        ɵngcc0.ɵɵelementContainer(2, 2);\n        ɵngcc0.ɵɵelementContainer(3, 3);\n      }\n    },\n    directives: [NbHeaderRowOutletDirective, NbDataRowOutletDirective, NbNoDataRowOutletDirective, NbFooterRowOutletDirective],\n    styles: [\"[_nghost-%COMP%]{table-layout:fixed;border-spacing:0;border-collapse:collapse;width:100%;max-width:100%;overflow:auto}  .nb-tree-grid-cell,   .nb-tree-grid-header-cell,   .nb-tree-grid-footer-cell{overflow:hidden}\"]\n  });\n  return NbTreeGridComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Data row definition for the tree-grid.\n * Captures the header row's template and columns to display.\n */\n\n\nlet NbTreeGridRowDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridRowDefDirective extends NbRowDefDirective {\n    constructor(template, differs, columnsService) {\n      super(template, differs);\n      this.columnsService = columnsService;\n    }\n\n    ngOnChanges(changes) {\n      super.ngOnChanges(changes);\n\n      if (changes['columns']) {\n        this.updateColumns(this.columns);\n      }\n    }\n\n    updateColumns(columns) {\n      this.columnsService.setColumns(columns);\n    }\n\n    getVisibleColumns() {\n      return this.columnsService.getVisibleColumns();\n    }\n    /** @docs-private */\n\n\n    hideColumn(column) {\n      this.columnsService.hideColumn(column);\n    }\n    /** @docs-private */\n\n\n    showColumn(column) {\n      this.columnsService.showColumn(column);\n    }\n\n  }\n\n  NbTreeGridRowDefDirective.ɵfac = function NbTreeGridRowDefDirective_Factory(t) {\n    return new (t || NbTreeGridRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService));\n  };\n\n  NbTreeGridRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridRowDefDirective,\n    selectors: [[\"\", \"nbTreeGridRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbTreeGridRowDefColumns\", \"columns\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkRowDef,\n      useExisting: NbTreeGridRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbTreeGridRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridHeaderRowDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridHeaderRowDefDirective extends NbHeaderRowDefDirective {\n    constructor(template, differs, columnsService) {\n      super(template, differs);\n      this.columnsService = columnsService;\n    }\n\n    ngOnChanges(changes) {\n      super.ngOnChanges(changes);\n\n      if (changes['columns']) {\n        this.updateColumns(this.columns);\n      }\n    }\n\n    updateColumns(columns) {\n      this.columnsService.setColumns(columns);\n    }\n\n    getVisibleColumns() {\n      return this.columnsService.getVisibleColumns();\n    }\n    /** @docs-private */\n\n\n    hideColumn(column) {\n      this.columnsService.hideColumn(column);\n    }\n    /** @docs-private */\n\n\n    showColumn(column) {\n      this.columnsService.showColumn(column);\n    }\n\n  }\n\n  NbTreeGridHeaderRowDefDirective.ɵfac = function NbTreeGridHeaderRowDefDirective_Factory(t) {\n    return new (t || NbTreeGridHeaderRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService));\n  };\n\n  NbTreeGridHeaderRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridHeaderRowDefDirective,\n    selectors: [[\"\", \"nbTreeGridHeaderRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbTreeGridHeaderRowDef\", \"columns\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkHeaderRowDef,\n      useExisting: NbTreeGridHeaderRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbTreeGridHeaderRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridFooterRowDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridFooterRowDefDirective extends NbFooterRowDefDirective {\n    constructor(template, differs, columnsService) {\n      super(template, differs);\n      this.columnsService = columnsService;\n    }\n\n    ngOnChanges(changes) {\n      super.ngOnChanges(changes);\n\n      if (changes['columns']) {\n        this.updateColumns(this.columns);\n      }\n    }\n\n    updateColumns(columns) {\n      this.columnsService.setColumns(columns);\n    }\n\n    getVisibleColumns() {\n      return this.columnsService.getVisibleColumns();\n    }\n    /** @docs-private */\n\n\n    hideColumn(column) {\n      this.columnsService.hideColumn(column);\n    }\n    /** @docs-private */\n\n\n    showColumn(column) {\n      this.columnsService.showColumn(column);\n    }\n\n  }\n\n  NbTreeGridFooterRowDefDirective.ɵfac = function NbTreeGridFooterRowDefDirective_Factory(t) {\n    return new (t || NbTreeGridFooterRowDefDirective)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.TemplateRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.IterableDiffers), ɵngcc0.ɵɵdirectiveInject(NbColumnsService));\n  };\n\n  NbTreeGridFooterRowDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridFooterRowDefDirective,\n    selectors: [[\"\", \"nbTreeGridFooterRowDef\", \"\"]],\n    inputs: {\n      columns: [\"nbTreeGridFooterRowDef\", \"columns\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkFooterRowDef,\n      useExisting: NbTreeGridFooterRowDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbTreeGridFooterRowDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Cell definition for a nb-table.\n * Captures the template of a column's data row cell as well as cell-specific properties.\n */\n\n\nlet NbTreeGridCellDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridCellDefDirective extends NbCellDefDirective {}\n\n  NbTreeGridCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridCellDefDirective_BaseFactory;\n    return function NbTreeGridCellDefDirective_Factory(t) {\n      return (ɵNbTreeGridCellDefDirective_BaseFactory || (ɵNbTreeGridCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridCellDefDirective)))(t || NbTreeGridCellDefDirective);\n    };\n  }();\n\n  NbTreeGridCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridCellDefDirective,\n    selectors: [[\"\", \"nbTreeGridCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkCellDef,\n      useExisting: NbTreeGridCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Header cell definition for the nb-table.\n * Captures the template of a column's header cell and as well as cell-specific properties.\n */\n\n\nlet NbTreeGridHeaderCellDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridHeaderCellDefDirective extends NbHeaderCellDefDirective {}\n\n  NbTreeGridHeaderCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridHeaderCellDefDirective_BaseFactory;\n    return function NbTreeGridHeaderCellDefDirective_Factory(t) {\n      return (ɵNbTreeGridHeaderCellDefDirective_BaseFactory || (ɵNbTreeGridHeaderCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridHeaderCellDefDirective)))(t || NbTreeGridHeaderCellDefDirective);\n    };\n  }();\n\n  NbTreeGridHeaderCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridHeaderCellDefDirective,\n    selectors: [[\"\", \"nbTreeGridHeaderCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkHeaderCellDef,\n      useExisting: NbTreeGridHeaderCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridHeaderCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Footer cell definition for the nb-table.\n * Captures the template of a column's footer cell and as well as cell-specific properties.\n */\n\n\nlet NbTreeGridFooterCellDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridFooterCellDefDirective extends NbFooterCellDefDirective {}\n\n  NbTreeGridFooterCellDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridFooterCellDefDirective_BaseFactory;\n    return function NbTreeGridFooterCellDefDirective_Factory(t) {\n      return (ɵNbTreeGridFooterCellDefDirective_BaseFactory || (ɵNbTreeGridFooterCellDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridFooterCellDefDirective)))(t || NbTreeGridFooterCellDefDirective);\n    };\n  }();\n\n  NbTreeGridFooterCellDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridFooterCellDefDirective,\n    selectors: [[\"\", \"nbTreeGridFooterCellDef\", \"\"]],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkFooterCellDef,\n      useExisting: NbTreeGridFooterCellDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridFooterCellDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nconst NB_ROW_DOUBLE_CLICK_DELAY = 200;\n/**\n * Cells container. Adds the right class and role.\n */\n\nlet NbTreeGridRowComponent = /*#__PURE__*/(() => {\n  class NbTreeGridRowComponent extends NbRowComponent {\n    constructor(tree, elementRef) {\n      super();\n      this.elementRef = elementRef;\n      this.doubleClick$ = new Subject();\n      /**\n       * Time to wait for second click to expand row deeply.\n       * 200ms by default.\n       */\n\n      this.doubleClickDelay = NB_ROW_DOUBLE_CLICK_DELAY;\n      /**\n       * Toggle row on click. Enabled by default.\n       */\n\n      this.clickToToggle = true;\n      this.tree = tree;\n    }\n\n    toggleIfEnabledNode() {\n      if (!this.clickToToggle) {\n        return;\n      }\n\n      timer(NB_ROW_DOUBLE_CLICK_DELAY).pipe(take(1), takeUntil(this.doubleClick$)).subscribe(() => this.tree.toggleRow(this));\n    }\n\n    toggleIfEnabledNodeDeep() {\n      if (!this.clickToToggle) {\n        return;\n      }\n\n      this.doubleClick$.next();\n      this.tree.toggleRow(this, {\n        deep: true\n      });\n    }\n\n    ngOnDestroy() {\n      this.doubleClick$.complete();\n    }\n\n  }\n\n  NbTreeGridRowComponent.ɵfac = function NbTreeGridRowComponent_Factory(t) {\n    return new (t || NbTreeGridRowComponent)(ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef));\n  };\n\n  NbTreeGridRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTreeGridRowComponent,\n    selectors: [[\"tr\", \"nbTreeGridRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-tree-grid-row\"],\n    hostBindings: function NbTreeGridRowComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbTreeGridRowComponent_click_HostBindingHandler() {\n          return ctx.toggleIfEnabledNode();\n        })(\"dblclick\", function NbTreeGridRowComponent_dblclick_HostBindingHandler() {\n          return ctx.toggleIfEnabledNodeDeep();\n        });\n      }\n    },\n    inputs: {\n      doubleClickDelay: \"doubleClickDelay\",\n      clickToToggle: \"clickToToggle\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkRow,\n      useExisting: NbTreeGridRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    attrs: _c54,\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbTreeGridRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbTreeGridRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridHeaderRowComponent = /*#__PURE__*/(() => {\n  class NbTreeGridHeaderRowComponent extends NbHeaderRowComponent {}\n\n  NbTreeGridHeaderRowComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridHeaderRowComponent_BaseFactory;\n    return function NbTreeGridHeaderRowComponent_Factory(t) {\n      return (ɵNbTreeGridHeaderRowComponent_BaseFactory || (ɵNbTreeGridHeaderRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridHeaderRowComponent)))(t || NbTreeGridHeaderRowComponent);\n    };\n  }();\n\n  NbTreeGridHeaderRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTreeGridHeaderRowComponent,\n    selectors: [[\"tr\", \"nbTreeGridHeaderRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-tree-grid-header-row\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkHeaderRow,\n      useExisting: NbTreeGridHeaderRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    attrs: _c55,\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbTreeGridHeaderRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbTreeGridHeaderRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridFooterRowComponent = /*#__PURE__*/(() => {\n  class NbTreeGridFooterRowComponent extends NbFooterRowComponent {}\n\n  NbTreeGridFooterRowComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridFooterRowComponent_BaseFactory;\n    return function NbTreeGridFooterRowComponent_Factory(t) {\n      return (ɵNbTreeGridFooterRowComponent_BaseFactory || (ɵNbTreeGridFooterRowComponent_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridFooterRowComponent)))(t || NbTreeGridFooterRowComponent);\n    };\n  }();\n\n  NbTreeGridFooterRowComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTreeGridFooterRowComponent,\n    selectors: [[\"tr\", \"nbTreeGridFooterRow\", \"\"]],\n    hostAttrs: [\"role\", \"row\", 1, \"nb-tree-grid-footer-row\"],\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkFooterRow,\n      useExisting: NbTreeGridFooterRowComponent\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature],\n    attrs: _c56,\n    decls: 1,\n    vars: 0,\n    consts: [[\"nbCellOutlet\", \"\"]],\n    template: function NbTreeGridFooterRowComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementContainer(0, 0);\n      }\n    },\n    directives: [NbCellOutletDirective],\n    encapsulation: 2\n  });\n  return NbTreeGridFooterRowComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Column definition for the tree-grid.\n * Defines a set of cells available for a table column.\n */\n\n\nlet NbTreeGridColumnDefDirective = /*#__PURE__*/(() => {\n  class NbTreeGridColumnDefDirective extends NbColumnDefDirective {\n    constructor() {\n      super(...arguments);\n      this.hideOnValue = null;\n      this.showOnValue = null;\n    }\n    /**\n     * Column name\n     */\n\n\n    get name() {\n      return this._name;\n    }\n\n    set name(value) {\n      this._setNameInput(value);\n    }\n    /**\n     * Amount of pixels of viewport at which column should be hidden.\n     * type number\n     */\n\n\n    get hideOn() {\n      return this.hideOnValue;\n    }\n\n    set hideOn(value) {\n      this.hideOnValue = !value && value !== 0 ? null : parseInt(value, 10);\n    }\n    /**\n     * Amount of pixels of viewport at which column should be shown.\n     * type number\n     */\n\n\n    get showOn() {\n      return this.showOnValue;\n    }\n\n    set showOn(value) {\n      this.showOnValue = !value && value !== 0 ? null : parseInt(value, 10);\n    }\n\n    ngOnChanges() {\n      if (this.hideOn != null && this.showOn != null) {\n        throw new Error(`hideOn and showOn are mutually exclusive and can't be used simultaneously.`);\n      }\n    }\n\n    shouldHide(width) {\n      return !this.shouldShow(width);\n    }\n\n    shouldShow(width) {\n      if (this.hideOn == null && this.showOn == null) {\n        return true;\n      }\n\n      if (this.hideOn != null) {\n        return width > this.hideOn;\n      }\n\n      return width >= this.showOn;\n    }\n\n  }\n\n  NbTreeGridColumnDefDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbTreeGridColumnDefDirective_BaseFactory;\n    return function NbTreeGridColumnDefDirective_Factory(t) {\n      return (ɵNbTreeGridColumnDefDirective_BaseFactory || (ɵNbTreeGridColumnDefDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbTreeGridColumnDefDirective)))(t || NbTreeGridColumnDefDirective);\n    };\n  }();\n\n  NbTreeGridColumnDefDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridColumnDefDirective,\n    selectors: [[\"\", \"nbTreeGridColumnDef\", \"\"]],\n    inputs: {\n      name: [\"nbTreeGridColumnDef\", \"name\"],\n      hideOn: \"hideOn\",\n      showOn: \"showOn\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkColumnDef,\n      useExisting: NbTreeGridColumnDefDirective\n    }, {\n      provide: NB_SORT_HEADER_COLUMN_DEF,\n      useExisting: NbTreeGridColumnDefDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature, ɵngcc0.ɵɵNgOnChangesFeature]\n  });\n  return NbTreeGridColumnDefDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbTreeGridCellDirective = /*#__PURE__*/(() => {\n  class NbTreeGridCellDirective extends NbCellDirective {\n    constructor(columnDef, elementRef, tree, platformId, window, sanitizer, directionService, columnService, cd) {\n      super(columnDef, elementRef);\n      this.platformId = platformId;\n      this.window = window;\n      this.sanitizer = sanitizer;\n      this.directionService = directionService;\n      this.columnService = columnService;\n      this.cd = cd;\n      this.destroy$ = new Subject();\n      this.initialLeftPadding = '';\n      this.initialRightPadding = '';\n      this.tree = tree;\n      this.columnDef = columnDef;\n      this.elementRef = elementRef;\n    }\n\n    get columnWidth() {\n      this.latestWidth = this.tree.getColumnWidth();\n\n      if (this.latestWidth) {\n        return this.latestWidth;\n      }\n\n      return null;\n    }\n\n    get leftPadding() {\n      if (this.directionService.isLtr()) {\n        return this.getStartPadding();\n      }\n\n      return null;\n    }\n\n    get rightPadding() {\n      if (this.directionService.isRtl()) {\n        return this.getStartPadding();\n      }\n\n      return null;\n    }\n\n    ngOnInit() {\n      if (isPlatformBrowser(this.platformId)) {\n        const style$$1 = this.window.getComputedStyle(this.elementRef.nativeElement);\n        this.initialLeftPadding = style$$1.paddingLeft;\n        this.initialRightPadding = style$$1.paddingRight;\n      }\n\n      this.columnService.onColumnsChange().pipe(filter(() => this.latestWidth !== this.tree.getColumnWidth()), takeUntil(this.destroy$)).subscribe(() => this.cd.detectChanges());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    toggleRow() {\n      this.tree.toggleCellRow(this);\n    }\n\n    get initialStartPadding() {\n      return this.directionService.isLtr() ? this.initialLeftPadding : this.initialRightPadding;\n    }\n\n    getStartPadding() {\n      const rowLevel = this.tree.getCellLevel(this, this.columnDef.name);\n\n      if (rowLevel === NB_DEFAULT_ROW_LEVEL) {\n        return null;\n      }\n\n      const nestingLevel = rowLevel + 1;\n      let padding = '';\n\n      if (this.tree.levelPadding) {\n        padding = `calc(${this.tree.levelPadding} * ${nestingLevel})`;\n      } else if (this.initialStartPadding) {\n        padding = `calc(${this.initialStartPadding} * ${nestingLevel})`;\n      }\n\n      if (!padding) {\n        return null;\n      }\n\n      return this.sanitizer.bypassSecurityTrustStyle(padding);\n    }\n\n  }\n\n  NbTreeGridCellDirective.ɵfac = function NbTreeGridCellDirective_Factory(t) {\n    return new (t || NbTreeGridCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(PLATFORM_ID), ɵngcc0.ɵɵdirectiveInject(NB_WINDOW), ɵngcc0.ɵɵdirectiveInject(ɵngcc4.DomSanitizer), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbTreeGridCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridCellDirective,\n    selectors: [[\"td\", \"nbTreeGridCell\", \"\"]],\n    hostAttrs: [\"role\", \"gridcell\", 1, \"nb-tree-grid-cell\"],\n    hostVars: 6,\n    hostBindings: function NbTreeGridCellDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.columnWidth)(\"padding-left\", ctx.leftPadding)(\"padding-right\", ctx.rightPadding);\n      }\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkCell,\n      useExisting: NbTreeGridCellDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridHeaderCellDirective = /*#__PURE__*/(() => {\n  class NbTreeGridHeaderCellDirective extends NbHeaderCellDirective {\n    constructor(columnDef, elementRef, tree, columnService, cd) {\n      super(columnDef, elementRef);\n      this.columnService = columnService;\n      this.cd = cd;\n      this.destroy$ = new Subject();\n      this.tree = tree;\n    }\n\n    get columnWidth() {\n      this.latestWidth = this.tree.getColumnWidth();\n      return this.latestWidth || null;\n    }\n\n    ngOnInit() {\n      this.columnService.onColumnsChange().pipe(filter(() => this.latestWidth !== this.tree.getColumnWidth()), takeUntil(this.destroy$)).subscribe(() => this.cd.detectChanges());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n  }\n\n  NbTreeGridHeaderCellDirective.ɵfac = function NbTreeGridHeaderCellDirective_Factory(t) {\n    return new (t || NbTreeGridHeaderCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbTreeGridHeaderCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridHeaderCellDirective,\n    selectors: [[\"th\", \"nbTreeGridHeaderCell\", \"\"]],\n    hostAttrs: [\"role\", \"columnheader\", 1, \"nb-tree-grid-header-cell\"],\n    hostVars: 2,\n    hostBindings: function NbTreeGridHeaderCellDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.columnWidth);\n      }\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkHeaderCell,\n      useExisting: NbTreeGridHeaderCellDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridHeaderCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbTreeGridFooterCellDirective = /*#__PURE__*/(() => {\n  class NbTreeGridFooterCellDirective extends NbFooterCellDirective {\n    constructor(columnDef, elementRef, tree, columnService, cd) {\n      super(columnDef, elementRef);\n      this.columnService = columnService;\n      this.cd = cd;\n      this.destroy$ = new Subject();\n      this.tree = tree;\n    }\n\n    get columnWidth() {\n      this.latestWidth = this.tree.getColumnWidth();\n      return this.latestWidth || null;\n    }\n\n    ngOnInit() {\n      this.columnService.onColumnsChange().pipe(filter(() => this.latestWidth !== this.tree.getColumnWidth()), takeUntil(this.destroy$)).subscribe(() => this.cd.detectChanges());\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n  }\n\n  NbTreeGridFooterCellDirective.ɵfac = function NbTreeGridFooterCellDirective_Factory(t) {\n    return new (t || NbTreeGridFooterCellDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridColumnDefDirective), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(NB_TREE_GRID), ɵngcc0.ɵɵdirectiveInject(NbColumnsService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef));\n  };\n\n  NbTreeGridFooterCellDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridFooterCellDirective,\n    selectors: [[\"td\", \"nbTreeGridFooterCell\", \"\"]],\n    hostAttrs: [\"role\", \"gridcell\", 1, \"nb-tree-grid-footer-cell\"],\n    hostVars: 2,\n    hostBindings: function NbTreeGridFooterCellDirective_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵstyleProp(\"width\", ctx.columnWidth);\n      }\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbCdkFooterCell,\n      useExisting: NbTreeGridFooterCellDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbTreeGridFooterCellDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbFilterDirective = /*#__PURE__*/(() => {\n  class NbFilterDirective {\n    filter(filterRequest) {\n      this.filterable.filter(filterRequest);\n    }\n\n  }\n\n  NbFilterDirective.ɵfac = function NbFilterDirective_Factory(t) {\n    return new (t || NbFilterDirective)();\n  };\n\n  NbFilterDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFilterDirective,\n    selectors: [[\"\", \"nbFilter\", \"\"]],\n    inputs: {\n      filterable: [\"nbFilter\", \"filterable\"]\n    }\n  });\n  return NbFilterDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * Helper directive to trigger data source's filter method when user types in input\n */\n\n\nlet NbFilterInputDirective = /*#__PURE__*/(() => {\n  class NbFilterInputDirective extends NbFilterDirective {\n    constructor() {\n      super(...arguments);\n      this.search$ = new Subject();\n      this.destroy$ = new Subject();\n      /**\n       * Debounce time before triggering filter method. Set in milliseconds.\n       * Default 200.\n       */\n\n      this.debounceTime = 200;\n    }\n\n    ngOnInit() {\n      this.search$.pipe(debounceTime(this.debounceTime), takeUntil(this.destroy$)).subscribe(query => {\n        super.filter(query);\n      });\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n      this.search$.complete();\n    }\n\n    filter(event) {\n      this.search$.next(event.target.value);\n    }\n\n  }\n\n  NbFilterInputDirective.ɵfac = /*@__PURE__*/function () {\n    let ɵNbFilterInputDirective_BaseFactory;\n    return function NbFilterInputDirective_Factory(t) {\n      return (ɵNbFilterInputDirective_BaseFactory || (ɵNbFilterInputDirective_BaseFactory = ɵngcc0.ɵɵgetInheritedFactory(NbFilterInputDirective)))(t || NbFilterInputDirective);\n    };\n  }();\n\n  NbFilterInputDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbFilterInputDirective,\n    selectors: [[\"\", \"nbFilterInput\", \"\"]],\n    hostBindings: function NbFilterInputDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"input\", function NbFilterInputDirective_input_HostBindingHandler($event) {\n          return ctx.filter($event);\n        });\n      }\n    },\n    inputs: {\n      debounceTime: \"debounceTime\",\n      filterable: [\"nbFilterInput\", \"filterable\"]\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NbFilterDirective,\n      useExisting: NbFilterInputDirective\n    }]), ɵngcc0.ɵɵInheritDefinitionFeature]\n  });\n  return NbFilterInputDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * When using custom row toggle, apply this directive on your toggle to toggle row on element click.\n */\n\n\nlet NbTreeGridRowToggleDirective = /*#__PURE__*/(() => {\n  class NbTreeGridRowToggleDirective {\n    constructor(cell) {\n      this.cell = cell;\n    }\n\n    toggleRow($event) {\n      this.cell.toggleRow();\n      $event.stopPropagation();\n    }\n\n  }\n\n  NbTreeGridRowToggleDirective.ɵfac = function NbTreeGridRowToggleDirective_Factory(t) {\n    return new (t || NbTreeGridRowToggleDirective)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridCellDirective));\n  };\n\n  NbTreeGridRowToggleDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbTreeGridRowToggleDirective,\n    selectors: [[\"\", \"nbTreeGridRowToggle\", \"\"]],\n    hostBindings: function NbTreeGridRowToggleDirective_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbTreeGridRowToggleDirective_click_HostBindingHandler($event) {\n          return ctx.toggleRow($event);\n        });\n      }\n    }\n  });\n  return NbTreeGridRowToggleDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * NbTreeGridRowToggleComponent\n */\n\n\nlet NbTreeGridRowToggleComponent = /*#__PURE__*/(() => {\n  class NbTreeGridRowToggleComponent {\n    constructor(cell) {\n      this.cell = cell;\n    }\n\n    set expanded(value) {\n      this.expandedValue = value;\n    }\n\n    get expanded() {\n      return this.expandedValue;\n    }\n\n    toggleRow($event) {\n      this.cell.toggleRow();\n      $event.stopPropagation();\n    }\n\n  }\n\n  NbTreeGridRowToggleComponent.ɵfac = function NbTreeGridRowToggleComponent_Factory(t) {\n    return new (t || NbTreeGridRowToggleComponent)(ɵngcc0.ɵɵdirectiveInject(NbTreeGridCellDirective));\n  };\n\n  NbTreeGridRowToggleComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbTreeGridRowToggleComponent,\n    selectors: [[\"nb-tree-grid-row-toggle\"]],\n    hostBindings: function NbTreeGridRowToggleComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵlistener(\"click\", function NbTreeGridRowToggleComponent_click_HostBindingHandler($event) {\n          return ctx.toggleRow($event);\n        });\n      }\n    },\n    inputs: {\n      expanded: \"expanded\"\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[1, \"row-toggle-button\"], [\"pack\", \"nebular-essentials\", \"aria-hidden\", \"true\", 3, \"icon\"]],\n    template: function NbTreeGridRowToggleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵelementStart(0, \"button\", 0);\n        ɵngcc0.ɵɵelement(1, \"nb-icon\", 1);\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵattribute(\"aria-label\", ctx.expanded ? \"collapse\" : \"expand\");\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"icon\", ctx.expanded ? \"chevron-down-outline\" : \"chevron-right-outline\");\n      }\n    },\n    directives: [NbIconComponent],\n    styles: [\"button[_ngcontent-%COMP%] {\\n      background: transparent;\\n      border: none;\\n      padding: 0;\\n    }\"]\n  });\n  return NbTreeGridRowToggleComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/*\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst COMPONENTS$2 = [// Tree Grid\nNbTreeGridComponent, NbTreeGridRowDefDirective, NbTreeGridRowComponent, NbTreeGridCellDefDirective, NbTreeGridCellDirective, NbTreeGridHeaderRowDefDirective, NbTreeGridHeaderRowComponent, NbTreeGridHeaderCellDefDirective, NbTreeGridHeaderCellDirective, NbTreeGridFooterRowDefDirective, NbTreeGridFooterRowComponent, NbTreeGridFooterCellDefDirective, NbTreeGridFooterCellDirective, NbTreeGridColumnDefDirective, // Sort directives\nNbSortDirective, NbSortHeaderComponent, NbSortIconComponent, // Filter directives\nNbFilterDirective, NbFilterInputDirective, NbTreeGridRowToggleDirective, NbTreeGridRowToggleComponent, NbSortHeaderIconDirective];\nlet NbTreeGridModule = /*#__PURE__*/(() => {\n  class NbTreeGridModule {}\n\n  NbTreeGridModule.ɵfac = function NbTreeGridModule_Factory(t) {\n    return new (t || NbTreeGridModule)();\n  };\n\n  NbTreeGridModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbTreeGridModule\n  });\n  NbTreeGridModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    providers: [NbTreeGridSortService, NbTreeGridFilterService, NbTreeGridService, NbTreeGridDataService, NbTreeGridDataSourceBuilder],\n    imports: [[CommonModule, NbTableModule, NbIconModule], NbTableModule]\n  });\n  return NbTreeGridModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbTreeGridModule, {\n    declarations: function () {\n      return [NbTreeGridComponent, NbTreeGridRowDefDirective, NbTreeGridRowComponent, NbTreeGridCellDefDirective, NbTreeGridCellDirective, NbTreeGridHeaderRowDefDirective, NbTreeGridHeaderRowComponent, NbTreeGridHeaderCellDefDirective, NbTreeGridHeaderCellDirective, NbTreeGridFooterRowDefDirective, NbTreeGridFooterRowComponent, NbTreeGridFooterCellDefDirective, NbTreeGridFooterCellDirective, NbTreeGridColumnDefDirective, NbSortDirective, NbSortHeaderComponent, NbSortIconComponent, NbFilterDirective, NbFilterInputDirective, NbTreeGridRowToggleDirective, NbTreeGridRowToggleComponent, NbSortHeaderIconDirective];\n    },\n    imports: function () {\n      return [CommonModule, NbTableModule, NbIconModule];\n    },\n    exports: function () {\n      return [NbTableModule, NbTreeGridComponent, NbTreeGridRowDefDirective, NbTreeGridRowComponent, NbTreeGridCellDefDirective, NbTreeGridCellDirective, NbTreeGridHeaderRowDefDirective, NbTreeGridHeaderRowComponent, NbTreeGridHeaderCellDefDirective, NbTreeGridHeaderCellDirective, NbTreeGridFooterRowDefDirective, NbTreeGridFooterRowComponent, NbTreeGridFooterCellDefDirective, NbTreeGridFooterCellDirective, NbTreeGridColumnDefDirective, NbSortDirective, NbSortHeaderComponent, NbSortIconComponent, NbFilterDirective, NbFilterInputDirective, NbTreeGridRowToggleDirective, NbTreeGridRowToggleComponent, NbSortHeaderIconDirective];\n    }\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n/**\n * Toggle is a control representing `on` and `off` states.\n *\n * @stacked-example(Showcase, toggle/toggle-showcase.component)\n *\n * ### Installation\n *\n * Import `NbToggleComponent` to your feature module.\n * ```ts\n * @NgModule({\n *   imports: [\n *     // ...\n *     NbToggleModule,\n *   ],\n * })\n * export class PageModule { }\n * ```\n * ### Usage\n *\n * Toggle may have one of the following statuses: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`\n *\n * @stacked-example(Toggle status, toggle/toggle-status.component)\n *\n * Toggle can be disabled via `disabled` input.\n *\n * @stacked-example(Disabled Toggles, toggle/toggle-disabled.component)\n *\n * Toggle may have a label with following positions: `left`, `right`, `start`, `end` (default)\n *\n * @stacked-example(Toggles With Labels, toggle/toggle-label-position.component.ts)\n *\n * You can set control state via `checked` binding:\n *\n * ```html\n * <nb-toggle [(checked)]=\"checked\"></nb-toggle>\n * ```\n *\n * Or it could be set via reactive forms or ngModel bindings:\n *\n * @stacked-example(Toggle form binding, toggle/toggle-form.component)\n *\n * @styles\n *\n * toggle-height:\n * toggle-width:\n * toggle-border-width:\n * toggle-border-radius:\n * toggle-outline-width:\n * toggle-outline-color:\n * toggle-switcher-size:\n * toggle-switcher-icon-size:\n * toggle-text-font-family:\n * toggle-text-font-size:\n * toggle-text-font-weight:\n * toggle-text-line-height:\n * toggle-cursor:\n * toggle-disabled-cursor:\n * toggle-basic-text-color:\n * toggle-basic-background-color:\n * toggle-basic-border-color:\n * toggle-basic-checked-background-color:\n * toggle-basic-checked-border-color:\n * toggle-basic-checked-switcher-background-color:\n * toggle-basic-checked-switcher-checkmark-color:\n * toggle-basic-focus-background-color:\n * toggle-basic-focus-border-color:\n * toggle-basic-focus-checked-background-color:\n * toggle-basic-focus-checked-border-color:\n * toggle-basic-hover-background-color:\n * toggle-basic-hover-border-color:\n * toggle-basic-hover-checked-background-color:\n * toggle-basic-hover-checked-border-color:\n * toggle-basic-active-background-color:\n * toggle-basic-active-border-color:\n * toggle-basic-active-checked-background-color:\n * toggle-basic-active-checked-border-color:\n * toggle-basic-disabled-background-color:\n * toggle-basic-disabled-border-color:\n * toggle-basic-disabled-switcher-background-color:\n * toggle-basic-disabled-checked-switcher-checkmark-color:\n * toggle-basic-disabled-text-color:\n * toggle-primary-text-color:\n * toggle-primary-background-color:\n * toggle-primary-border-color:\n * toggle-primary-checked-background-color:\n * toggle-primary-checked-border-color:\n * toggle-primary-checked-switcher-background-color:\n * toggle-primary-checked-switcher-checkmark-color:\n * toggle-primary-focus-background-color:\n * toggle-primary-focus-border-color:\n * toggle-primary-focus-checked-background-color:\n * toggle-primary-focus-checked-border-color:\n * toggle-primary-hover-background-color:\n * toggle-primary-hover-border-color:\n * toggle-primary-hover-checked-background-color:\n * toggle-primary-hover-checked-border-color:\n * toggle-primary-active-background-color:\n * toggle-primary-active-border-color:\n * toggle-primary-active-checked-background-color:\n * toggle-primary-active-checked-border-color:\n * toggle-primary-disabled-background-color:\n * toggle-primary-disabled-border-color:\n * toggle-primary-disabled-switcher-background-color:\n * toggle-primary-disabled-checked-switcher-checkmark-color:\n * toggle-primary-disabled-text-color:\n * toggle-success-text-color:\n * toggle-success-background-color:\n * toggle-success-border-color:\n * toggle-success-checked-background-color:\n * toggle-success-checked-border-color:\n * toggle-success-checked-switcher-background-color:\n * toggle-success-checked-switcher-checkmark-color:\n * toggle-success-focus-background-color:\n * toggle-success-focus-border-color:\n * toggle-success-focus-checked-background-color:\n * toggle-success-focus-checked-border-color:\n * toggle-success-hover-background-color:\n * toggle-success-hover-border-color:\n * toggle-success-hover-checked-background-color:\n * toggle-success-hover-checked-border-color:\n * toggle-success-active-background-color:\n * toggle-success-active-border-color:\n * toggle-success-active-checked-background-color:\n * toggle-success-active-checked-border-color:\n * toggle-success-disabled-background-color:\n * toggle-success-disabled-border-color:\n * toggle-success-disabled-switcher-background-color:\n * toggle-success-disabled-checked-switcher-checkmark-color:\n * toggle-success-disabled-text-color:\n * toggle-info-text-color:\n * toggle-info-background-color:\n * toggle-info-border-color:\n * toggle-info-checked-background-color:\n * toggle-info-checked-border-color:\n * toggle-info-checked-switcher-background-color:\n * toggle-info-checked-switcher-checkmark-color:\n * toggle-info-focus-background-color:\n * toggle-info-focus-border-color:\n * toggle-info-focus-checked-background-color:\n * toggle-info-focus-checked-border-color:\n * toggle-info-hover-background-color:\n * toggle-info-hover-border-color:\n * toggle-info-hover-checked-background-color:\n * toggle-info-hover-checked-border-color:\n * toggle-info-active-background-color:\n * toggle-info-active-border-color:\n * toggle-info-active-checked-background-color:\n * toggle-info-active-checked-border-color:\n * toggle-info-disabled-background-color:\n * toggle-info-disabled-border-color:\n * toggle-info-disabled-switcher-background-color:\n * toggle-info-disabled-checked-switcher-checkmark-color:\n * toggle-info-disabled-text-color:\n * toggle-warning-text-color:\n * toggle-warning-background-color:\n * toggle-warning-border-color:\n * toggle-warning-checked-background-color:\n * toggle-warning-checked-border-color:\n * toggle-warning-checked-switcher-background-color:\n * toggle-warning-checked-switcher-checkmark-color:\n * toggle-warning-focus-background-color:\n * toggle-warning-focus-border-color:\n * toggle-warning-focus-checked-background-color:\n * toggle-warning-focus-checked-border-color:\n * toggle-warning-hover-background-color:\n * toggle-warning-hover-border-color:\n * toggle-warning-hover-checked-background-color:\n * toggle-warning-hover-checked-border-color:\n * toggle-warning-active-background-color:\n * toggle-warning-active-border-color:\n * toggle-warning-active-checked-background-color:\n * toggle-warning-active-checked-border-color:\n * toggle-warning-disabled-background-color:\n * toggle-warning-disabled-border-color:\n * toggle-warning-disabled-switcher-background-color:\n * toggle-warning-disabled-checked-switcher-checkmark-color:\n * toggle-warning-disabled-text-color:\n * toggle-danger-text-color:\n * toggle-danger-background-color:\n * toggle-danger-border-color:\n * toggle-danger-checked-background-color:\n * toggle-danger-checked-border-color:\n * toggle-danger-checked-switcher-background-color:\n * toggle-danger-checked-switcher-checkmark-color:\n * toggle-danger-focus-background-color:\n * toggle-danger-focus-border-color:\n * toggle-danger-focus-checked-background-color:\n * toggle-danger-focus-checked-border-color:\n * toggle-danger-hover-background-color:\n * toggle-danger-hover-border-color:\n * toggle-danger-hover-checked-background-color:\n * toggle-danger-hover-checked-border-color:\n * toggle-danger-active-background-color:\n * toggle-danger-active-border-color:\n * toggle-danger-active-checked-background-color:\n * toggle-danger-active-checked-border-color:\n * toggle-danger-disabled-background-color:\n * toggle-danger-disabled-border-color:\n * toggle-danger-disabled-switcher-background-color:\n * toggle-danger-disabled-checked-switcher-checkmark-color:\n * toggle-danger-disabled-text-color:\n * toggle-control-text-color:\n * toggle-control-background-color:\n * toggle-control-border-color:\n * toggle-control-checked-background-color:\n * toggle-control-checked-border-color:\n * toggle-control-checked-switcher-background-color:\n * toggle-control-checked-switcher-checkmark-color:\n * toggle-control-focus-background-color:\n * toggle-control-focus-border-color:\n * toggle-control-focus-checked-background-color:\n * toggle-control-focus-checked-border-color:\n * toggle-control-hover-background-color:\n * toggle-control-hover-border-color:\n * toggle-control-hover-checked-background-color:\n * toggle-control-hover-checked-border-color:\n * toggle-control-active-background-color:\n * toggle-control-active-border-color:\n * toggle-control-active-checked-background-color:\n * toggle-control-active-checked-border-color:\n * toggle-control-disabled-background-color:\n * toggle-control-disabled-border-color:\n * toggle-control-disabled-switcher-background-color:\n * toggle-control-disabled-checked-switcher-checkmark-color:\n * toggle-control-disabled-text-color:\n */\n\n\nlet NbToggleComponent = /*#__PURE__*/(() => {\n  class NbToggleComponent {\n    constructor(changeDetector, layoutDirection, renderer, hostElement, zone, statusService) {\n      this.changeDetector = changeDetector;\n      this.layoutDirection = layoutDirection;\n      this.renderer = renderer;\n      this.hostElement = hostElement;\n      this.zone = zone;\n      this.statusService = statusService;\n\n      this.onChange = () => {};\n\n      this.onTouched = () => {};\n\n      this.destroy$ = new Subject();\n      this._checked = false;\n      this._disabled = false;\n      /**\n       * Toggle status.\n       * Possible values are: `basic`, `primary`, `success`, `warning`, `danger`, `info`, `control`.\n       */\n\n      this.status = 'basic';\n      /**\n       * Toggle label position.\n       * Possible values are: `left`, `right`, `start`, `end` (default)\n       */\n\n      this.labelPosition = 'end';\n      /**\n       * Output when checked state is changed by a user\n       * @type EventEmitter<boolean>\n       */\n\n      this.checkedChange = new EventEmitter();\n    }\n    /**\n     * Toggle checked\n     * @type {boolean}\n     */\n\n\n    get checked() {\n      return this._checked;\n    }\n\n    set checked(value) {\n      this._checked = convertToBoolProperty(value);\n    }\n    /**\n     * Controls input disabled state\n     */\n\n\n    get disabled() {\n      return this._disabled;\n    }\n\n    set disabled(value) {\n      this._disabled = convertToBoolProperty(value);\n    }\n\n    get primary() {\n      return this.status === 'primary';\n    }\n\n    get success() {\n      return this.status === 'success';\n    }\n\n    get warning() {\n      return this.status === 'warning';\n    }\n\n    get danger() {\n      return this.status === 'danger';\n    }\n\n    get info() {\n      return this.status === 'info';\n    }\n\n    get basic() {\n      return this.status === 'basic';\n    }\n\n    get control() {\n      return this.status === 'control';\n    }\n\n    get additionalClasses() {\n      if (this.statusService.isCustomStatus(this.status)) {\n        return [this.statusService.getStatusClass(this.status)];\n      }\n\n      return [];\n    }\n\n    get labelLeft() {\n      return this.labelPosition === 'left';\n    }\n\n    get labelRight() {\n      return this.labelPosition === 'right';\n    }\n\n    get labelStart() {\n      return this.labelPosition === 'start';\n    }\n\n    get labelEnd() {\n      return this.labelPosition === 'end';\n    }\n\n    ngOnInit() {\n      this.layoutDirection.onDirectionChange().pipe(takeUntil(this.destroy$)).subscribe(() => this.changeDetector.detectChanges());\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.hostElement.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n      this.destroy$.complete();\n    }\n\n    checkState() {\n      if (this.checked) {\n        return this.layoutDirection.isLtr() ? 'right' : 'left';\n      }\n\n      return this.layoutDirection.isLtr() ? 'left' : 'right';\n    }\n\n    registerOnChange(fn) {\n      this.onChange = fn;\n    }\n\n    registerOnTouched(fn) {\n      this.onTouched = fn;\n    }\n\n    writeValue(val) {\n      this.checked = val;\n      this.changeDetector.markForCheck();\n    }\n\n    setDisabledState(val) {\n      this.disabled = convertToBoolProperty(val);\n      this.changeDetector.markForCheck();\n    }\n\n    updateValue(event) {\n      const input = event.target;\n      this.checked = input.checked;\n      this.checkedChange.emit(this.checked);\n      this.onChange(this.checked);\n    }\n\n    onInputClick(event) {\n      event.stopPropagation();\n    }\n\n  }\n\n  NbToggleComponent.ɵfac = function NbToggleComponent_Factory(t) {\n    return new (t || NbToggleComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(NbLayoutDirectionService), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(NbStatusService));\n  };\n\n  NbToggleComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbToggleComponent,\n    selectors: [[\"nb-toggle\"]],\n    hostVars: 24,\n    hostBindings: function NbToggleComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.additionalClasses);\n        ɵngcc0.ɵɵclassProp(\"status-primary\", ctx.primary)(\"status-success\", ctx.success)(\"status-warning\", ctx.warning)(\"status-danger\", ctx.danger)(\"status-info\", ctx.info)(\"status-basic\", ctx.basic)(\"status-control\", ctx.control)(\"toggle-label-left\", ctx.labelLeft)(\"toggle-label-right\", ctx.labelRight)(\"toggle-label-start\", ctx.labelStart)(\"toggle-label-end\", ctx.labelEnd);\n      }\n    },\n    inputs: {\n      status: \"status\",\n      labelPosition: \"labelPosition\",\n      checked: \"checked\",\n      disabled: \"disabled\"\n    },\n    outputs: {\n      checkedChange: \"checkedChange\"\n    },\n    features: [ɵngcc0.ɵɵProvidersFeature([{\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NbToggleComponent),\n      multi: true\n    }])],\n    ngContentSelectors: _c0,\n    decls: 7,\n    vars: 7,\n    consts: [[1, \"toggle-label\"], [\"type\", \"checkbox\", \"role\", \"switch\", 1, \"native-input\", \"visually-hidden\", 3, \"disabled\", \"checked\", \"change\", \"blur\", \"click\"], [1, \"toggle\"], [1, \"toggle-switcher\"], [\"icon\", \"checkmark-bold-outline\", \"pack\", \"nebular-essentials\", 4, \"ngIf\"], [1, \"text\"], [\"icon\", \"checkmark-bold-outline\", \"pack\", \"nebular-essentials\"]],\n    template: function NbToggleComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef();\n        ɵngcc0.ɵɵelementStart(0, \"label\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"input\", 1);\n        ɵngcc0.ɵɵlistener(\"change\", function NbToggleComponent_Template_input_change_1_listener($event) {\n          return ctx.updateValue($event);\n        })(\"blur\", function NbToggleComponent_Template_input_blur_1_listener() {\n          return ctx.onTouched();\n        })(\"click\", function NbToggleComponent_Template_input_click_1_listener($event) {\n          return ctx.onInputClick($event);\n        });\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(2, \"div\", 2);\n        ɵngcc0.ɵɵelementStart(3, \"span\", 3);\n        ɵngcc0.ɵɵtemplate(4, NbToggleComponent_nb_icon_4_Template, 1, 0, \"nb-icon\", 4);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementStart(5, \"span\", 5);\n        ɵngcc0.ɵɵprojection(6);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"disabled\", ctx.disabled)(\"checked\", ctx.checked);\n        ɵngcc0.ɵɵattribute(\"aria-checked\", ctx.checked);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"checked\", ctx.checked);\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"@position\", ctx.checkState());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.checked);\n      }\n    },\n    directives: [ɵngcc2.NgIf, NbIconComponent],\n    styles: [\"[_nghost-%COMP%]{display:inline-flex;outline:none}.toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:0.6875rem}[dir=ltr]   .toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:-1}[dir=rtl]   .toggle-label-left[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:1}.toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:0.6875rem}[dir=ltr]   .toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:1}[dir=rtl]   .toggle-label-right[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){order:-1}.toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]{flex-direction:row-reverse}[dir=ltr]   .toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:.6875rem}[dir=rtl]   .toggle-label-start[_nghost-%COMP%]   .toggle-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:.6875rem}[dir=ltr]   .toggle-label-end[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-left:.6875rem}[dir=rtl]   .toggle-label-end[_nghost-%COMP%]   .text[_ngcontent-%COMP%]:not(:empty){padding-right:.6875rem}.nb-transition[_nghost-%COMP%]   .toggle[_ngcontent-%COMP%]{transition-duration:0.15s;transition-property:background-color,border,box-shadow;transition-timing-function:ease-in}.toggle-label[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center}.toggle[_ngcontent-%COMP%]{position:relative;display:inline-flex;box-sizing:content-box}.toggle-switcher[_ngcontent-%COMP%]{position:absolute;border-radius:50%;margin:1px}.toggle-switcher[_ngcontent-%COMP%]   nb-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}\"],\n    data: {\n      animation: [trigger('position', [state('right', style({\n        right: 0,\n        left: '*'\n      })), state('left', style({\n        left: 0,\n        right: '*'\n      })), transition(':enter', [animate(0)]), transition('right <=> left', [animate('0.15s')])])]\n    },\n    changeDetection: 0\n  });\n  return NbToggleComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nlet NbToggleModule = /*#__PURE__*/(() => {\n  class NbToggleModule {}\n\n  NbToggleModule.ɵfac = function NbToggleModule_Factory(t) {\n    return new (t || NbToggleModule)();\n  };\n\n  NbToggleModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbToggleModule\n  });\n  NbToggleModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule, NbIconModule]]\n  });\n  return NbToggleModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbToggleModule, {\n    declarations: function () {\n      return [NbToggleComponent];\n    },\n    imports: function () {\n      return [CommonModule, NbIconModule];\n    },\n    exports: function () {\n      return [NbToggleComponent];\n    }\n  });\n})();\n\nlet NbPrefixDirective = /*#__PURE__*/(() => {\n  class NbPrefixDirective {}\n\n  NbPrefixDirective.ɵfac = function NbPrefixDirective_Factory(t) {\n    return new (t || NbPrefixDirective)();\n  };\n\n  NbPrefixDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbPrefixDirective,\n    selectors: [[\"\", \"nbPrefix\", \"\"]]\n  });\n  return NbPrefixDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\nlet NbSuffixDirective = /*#__PURE__*/(() => {\n  class NbSuffixDirective {}\n\n  NbSuffixDirective.ɵfac = function NbSuffixDirective_Factory(t) {\n    return new (t || NbSuffixDirective)();\n  };\n\n  NbSuffixDirective.ɵdir = /*@__PURE__*/ɵngcc0.ɵɵdefineDirective({\n    type: NbSuffixDirective,\n    selectors: [[\"\", \"nbSuffix\", \"\"]]\n  });\n  return NbSuffixDirective;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nfunction throwFormControlElementNotFound() {\n  throw new Error(`NbFormFieldComponent must contain [nbInput]`);\n}\n/*\n * NbFormFieldComponent\n *\n * @styles\n *\n * form-field-addon-basic-text-color:\n * form-field-addon-basic-highlight-text-color:\n * form-field-addon-primary-text-color:\n * form-field-addon-primary-highlight-text-color:\n * form-field-addon-success-text-color:\n * form-field-addon-success-highlight-text-color:\n * form-field-addon-info-text-color:\n * form-field-addon-info-highlight-text-color:\n * form-field-addon-warning-text-color:\n * form-field-addon-warning-highlight-text-color:\n * form-field-addon-danger-text-color:\n * form-field-addon-danger-highlight-text-color:\n * form-field-addon-control-text-color:\n * form-field-addon-control-highlight-text-color:\n * form-field-addon-disabled-text-color:\n * form-field-addon-tiny-height:\n * form-field-addon-tiny-width:\n * form-field-addon-tiny-icon-size:\n * form-field-addon-tiny-font-size:\n * form-field-addon-tiny-line-height:\n * form-field-addon-tiny-font-weight:\n * form-field-addon-small-height:\n * form-field-addon-small-width:\n * form-field-addon-small-icon-size:\n * form-field-addon-small-font-size:\n * form-field-addon-small-line-height:\n * form-field-addon-small-font-weight:\n * form-field-addon-medium-height:\n * form-field-addon-medium-width:\n * form-field-addon-medium-icon-size:\n * form-field-addon-medium-font-size:\n * form-field-addon-medium-line-height:\n * form-field-addon-medium-font-weight:\n * form-field-addon-large-height:\n * form-field-addon-large-width:\n * form-field-addon-large-icon-size:\n * form-field-addon-large-font-size:\n * form-field-addon-large-line-height:\n * form-field-addon-large-font-weight:\n * form-field-addon-giant-height:\n * form-field-addon-giant-width:\n * form-field-addon-giant-icon-size:\n * form-field-addon-giant-font-size:\n * form-field-addon-giant-line-height:\n * form-field-addon-giant-font-weight:\n **/\n\n\nlet NbFormFieldComponent = /*#__PURE__*/(() => {\n  class NbFormFieldComponent {\n    constructor(cd, zone, elementRef, renderer) {\n      this.cd = cd;\n      this.zone = zone;\n      this.elementRef = elementRef;\n      this.renderer = renderer;\n      this.destroy$ = new Subject();\n      this.formControlState$ = new ReplaySubject(1);\n      this.prefixClasses$ = this.formControlState$.pipe(map(s => this.getAddonClasses('prefix', s)));\n      this.suffixClasses$ = this.formControlState$.pipe(map(s => this.getAddonClasses('suffix', s)));\n    }\n\n    ngAfterContentChecked() {\n      if (!this.formControl) {\n        throwFormControlElementNotFound();\n      }\n    }\n\n    ngAfterContentInit() {\n      this.subscribeToFormControlStateChange();\n      this.subscribeToAddonChange();\n    }\n\n    ngAfterViewInit() {\n      // TODO: #2254\n      this.zone.runOutsideAngular(() => setTimeout(() => {\n        this.renderer.addClass(this.elementRef.nativeElement, 'nb-transition');\n      }));\n    }\n\n    ngOnDestroy() {\n      this.destroy$.next();\n    }\n\n    shouldShowPrefix() {\n      return this.getFormControlConfig().supportsPrefix && !!this.prefix.length;\n    }\n\n    shouldShowSuffix() {\n      return this.getFormControlConfig().supportsSuffix && !!this.suffix.length;\n    }\n\n    subscribeToFormControlStateChange() {\n      const {\n        disabled$,\n        focused$,\n        size$,\n        status$,\n        fullWidth$\n      } = this.formControl;\n      combineLatest([disabled$, focused$, size$, status$, fullWidth$]).pipe(map(([disabled, focused, size, status, fullWidth]) => ({\n        disabled,\n        focused,\n        size,\n        status,\n        fullWidth\n      })), distinctUntilChanged((oldState, state$$1) => this.isStatesEqual(oldState, state$$1)), tap(({\n        size,\n        fullWidth\n      }) => {\n        const formFieldClasses = [`nb-form-field-size-${size}`];\n\n        if (!fullWidth) {\n          formFieldClasses.push('nb-form-field-limited-width');\n        }\n\n        this.formFieldClasses = formFieldClasses.join(' ');\n      }), takeUntil(this.destroy$)).subscribe(this.formControlState$);\n    }\n\n    subscribeToAddonChange() {\n      merge(this.prefix.changes, this.suffix.changes).pipe(takeUntil(this.destroy$)).subscribe(() => this.cd.markForCheck());\n    }\n\n    getAddonClasses(addon, state$$1) {\n      const classes = ['nb-form-field-addon', `nb-form-field-${addon}-${state$$1.size}`];\n\n      if (state$$1.disabled) {\n        classes.push(`nb-form-field-addon-disabled`);\n      } else if (state$$1.focused) {\n        classes.push(`nb-form-field-addon-${state$$1.status}-highlight`);\n      } else {\n        classes.push(`nb-form-field-addon-${state$$1.status}`);\n      }\n\n      return classes;\n    }\n\n    getFormControlConfig() {\n      return this.formControlConfig || new NbFormFieldControlConfig();\n    }\n\n    isStatesEqual(oldState, state$$1) {\n      return oldState.status === state$$1.status && oldState.disabled === state$$1.disabled && oldState.focused === state$$1.focused && oldState.fullWidth === state$$1.fullWidth && oldState.size === state$$1.size;\n    }\n\n  }\n\n  NbFormFieldComponent.ɵfac = function NbFormFieldComponent_Factory(t) {\n    return new (t || NbFormFieldComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ChangeDetectorRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.NgZone), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef), ɵngcc0.ɵɵdirectiveInject(ɵngcc0.Renderer2));\n  };\n\n  NbFormFieldComponent.ɵcmp = /*@__PURE__*/ɵngcc0.ɵɵdefineComponent({\n    type: NbFormFieldComponent,\n    selectors: [[\"nb-form-field\"]],\n    contentQueries: function NbFormFieldComponent_ContentQueries(rf, ctx, dirIndex) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbFormFieldControl, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbFormFieldControlConfig, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbPrefixDirective, 5);\n        ɵngcc0.ɵɵcontentQuery(dirIndex, NbSuffixDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControl = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.formControlConfig = _t.first);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.prefix = _t);\n        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.suffix = _t);\n      }\n    },\n    hostVars: 2,\n    hostBindings: function NbFormFieldComponent_HostBindings(rf, ctx) {\n      if (rf & 2) {\n        ɵngcc0.ɵɵclassMap(ctx.formFieldClasses);\n      }\n    },\n    ngContentSelectors: _c58,\n    decls: 4,\n    vars: 6,\n    consts: [[3, \"ngClass\", 4, \"ngIf\"], [1, \"nb-form-control-container\"], [3, \"ngClass\"]],\n    template: function NbFormFieldComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        ɵngcc0.ɵɵprojectionDef(_c57);\n        ɵngcc0.ɵɵtemplate(0, NbFormFieldComponent_div_0_Template, 3, 3, \"div\", 0);\n        ɵngcc0.ɵɵelementStart(1, \"div\", 1);\n        ɵngcc0.ɵɵprojection(2);\n        ɵngcc0.ɵɵelementEnd();\n        ɵngcc0.ɵɵtemplate(3, NbFormFieldComponent_div_3_Template, 3, 3, \"div\", 0);\n      }\n\n      if (rf & 2) {\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.shouldShowPrefix());\n        ɵngcc0.ɵɵadvance(1);\n        ɵngcc0.ɵɵclassProp(\"nb-form-field-control-with-prefix\", ctx.shouldShowPrefix())(\"nb-form-field-control-with-suffix\", ctx.shouldShowSuffix());\n        ɵngcc0.ɵɵadvance(2);\n        ɵngcc0.ɵɵproperty(\"ngIf\", ctx.shouldShowSuffix());\n      }\n    },\n    directives: [ɵngcc2.NgIf, ɵngcc2.NgClass],\n    pipes: [ɵngcc2.AsyncPipe],\n    styles: [\"[_nghost-%COMP%]{display:flex;align-items:center}.nb-form-control-container[_ngcontent-%COMP%]{width:100%}\"],\n    changeDetection: 0\n  });\n  return NbFormFieldComponent;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n\n\nconst COMPONENTS$3 = [NbFormFieldComponent, NbPrefixDirective, NbSuffixDirective];\nlet NbFormFieldModule = /*#__PURE__*/(() => {\n  class NbFormFieldModule {}\n\n  NbFormFieldModule.ɵfac = function NbFormFieldModule_Factory(t) {\n    return new (t || NbFormFieldModule)();\n  };\n\n  NbFormFieldModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: NbFormFieldModule\n  });\n  NbFormFieldModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({\n    imports: [[CommonModule]]\n  });\n  return NbFormFieldModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(NbFormFieldModule, {\n    declarations: function () {\n      return [NbFormFieldComponent, NbPrefixDirective, NbSuffixDirective];\n    },\n    imports: function () {\n      return [CommonModule];\n    },\n    exports: function () {\n      return [NbFormFieldComponent, NbPrefixDirective, NbSuffixDirective];\n    }\n  });\n})();\n/**\n * @license\n * Copyright Akveo. All Rights Reserved.\n * Licensed under the MIT License. See License.txt in the project root for license information.\n */\n// TODO: export all components\n\n/**\n * Generated bundle index. Do not edit.\n */\n\n\nexport { NbCalendarActionsComponent as ɵe, NbActiveDescendantKeyManagerFactoryService as ɵd, NbFocusKeyManagerFactoryService as ɵc, NbCustomMessageService as ɵf, NbCalendarWithTimeComponent as ɵh, NbMenuInternalService as ɵa, NbSharedModule as ɵb, NbTimePickerCellComponent as ɵg, NbCalendarDayCellComponent, NbDateTimePickerComponent, NbCalendarYearPickerComponent, NbCalendarMonthPickerComponent, MONTHS_IN_VIEW, MONTHS_IN_COLUMN, NbCalendarDayPickerComponent, NbCalendarViewModeComponent, NbCalendarPageableNavigationComponent, NbCalendarDaysNamesComponent, NbCalendarWeekNumberComponent, NbCalendarMonthCellComponent, NbCalendarYearCellComponent, NbCalendarPickerRowComponent, NbCalendarPickerComponent, NbCalendarMonthModelService, NbNativeDateService, NbDateService, NbMenuService, NbMenuItem, NbSidebarService, NB_THEME_OPTIONS, NB_MEDIA_BREAKPOINTS, NB_BUILT_IN_JS_THEMES, NB_JS_THEMES, NB_WINDOW, NB_DOCUMENT, windowFactory, NbThemeModule, NbThemeService, NbSpinnerService, DEFAULT_MEDIA_BREAKPOINTS, NbMediaBreakpointsService, NbColorHelper, NbLayoutDirection, NB_LAYOUT_DIRECTION, NbLayoutDirectionService, NbLayoutScrollService, NbLayoutRulerService, NbStatusService, BUILT_IN_THEMES, NbJSThemesRegistry, CORPORATE_THEME, COSMIC_THEME, DEFAULT_THEME, DARK_THEME, NbCardModule, NbCardHeaderComponent, NbCardBodyComponent, NbCardFooterComponent, NbCardComponent, NbFlipCardComponent, NbRevealCardComponent, NbCardFrontComponent, NbCardBackComponent, NbCalendarModule, NbCalendarComponent, NbCalendarRangeModule, NbCalendarRangeComponent, NbBaseCalendarComponent, NbBaseCalendarModule, NbBaseCalendarRangeCell, NbCalendarRangeDayCellComponent, NbCalendarRangeMonthCellComponent, NbCalendarRangeYearCellComponent, NbCalendarYearModelService, NbCalendarTimeModelService, NbCalendarViewMode, NbCalendarSize, NbCalendarKitModule, NbLayoutModule, NbLayoutComponent, NbLayoutColumnComponent, NbLayoutHeaderComponent, NbLayoutFooterComponent, NbRestoreScrollTopHelper, NbMenuModule, NbToggleStates, NbMenuItemComponent, NbMenuComponent, NbRouteTabsetModule, NbRouteTabsetComponent, NbSidebarModule, NbSidebarHeaderComponent, NbSidebarFooterComponent, NbSidebarComponent, NbTabsetModule, NbTabComponent, NbTabsetComponent, NbUserModule, NbUserComponent, NbActionsModule, NbActionComponent, NbActionsComponent, NbSearchModule, NbSearchService, NbSearchFieldComponent, NbSearchComponent, NbCheckboxComponent, NbCheckboxModule, NbBadgeComponent, NbBadgeModule, NbPopoverDirective, NbPopoverModule, NbPopoverComponent, NbContextMenuDirective, NbContextMenuComponent, NbContextMenuModule, NbProgressBarComponent, NbProgressBarModule, NbAlertComponent, NbAlertModule, NbChatComponent, NbChatMessageComponent, NbChatMessageMapComponent, NbChatMessageFileComponent, NbChatMessageQuoteComponent, NbChatMessageTextComponent, NbChatFormComponent, NbChatModule, NbChatOptions, NbChatAvatarComponent, NbChatCustomMessageDirective, NbSpinnerComponent, NbSpinnerDirective, NbSpinnerModule, NB_STEPPER, NbStepperComponent, NbStepComponent, NbStepperNextDirective, NbStepperPreviousDirective, NbStepperModule, NbAccordionComponent, NbAccordionItemComponent, NbAccordionItemBodyComponent, NbAccordionItemHeaderComponent, NbAccordionModule, NbButton, NbButtonComponent, NbButtonModule, NbButtonGroupComponent, NbButtonGroupModule, NbButtonToggleDirective, NbListComponent, NbListItemComponent, NbListModule, NbListPageTrackerDirective, NbScrollableContainerDimentions, NbInfiniteListDirective, NbInputDirective, NbInputModule, NbOverlayModule, patch, createContainer, NbOverlayService, NbAdjustment, NbPosition, NbAdjustableConnectedPositionStrategy, NbGlobalPositionStrategy, NbPositionBuilderService, NbPositionedContainerComponent, NbOverlayContainerComponent, NbTrigger, NbTriggerStrategyBase, NbClickTriggerStrategy, NbHoverTriggerStrategy, NbHintTriggerStrategy, NbFocusTriggerStrategy, NbNoopTriggerStrategy, NbTriggerStrategyBuilderService, NbPortalDirective, NbPortalOutletDirective, NbComponentPortal, NbOverlay, NbOverlayPositionBuilder, NbTemplatePortal, NbOverlayContainer, NbFlexibleConnectedPositionStrategy, NbPortalInjector, NbCdkMappingModule, NbGlobalLogicalPosition, NbGlobalPhysicalPosition, NbPositionHelper, NbDynamicOverlay, NbDynamicOverlayChange, NbDynamicOverlayHandler, NbPlatform, NbFocusMonitor, NbA11yModule, NbFocusTrap, NbFocusTrapFactoryService, NbCdkAdapterModule, NbBlockScrollStrategyAdapter, NbScrollStrategyOptions, NbOverlayContainerAdapter, NbScrollDispatcherAdapter, NbViewportRulerAdapter, NbDirectionality, NbBidiModule, NbCellDefDirective, NbHeaderCellDefDirective, NbFooterCellDefDirective, NB_SORT_HEADER_COLUMN_DEF, NbColumnDefDirective, NbHeaderCellDirective, NbFooterCellDirective, NbCellDirective, NbDataSource, NbDataRowOutletDirective, NbHeaderRowOutletDirective, NbFooterRowOutletDirective, NbNoDataRowOutletDirective, NbCellOutletDirective, NbHeaderRowDefDirective, NbFooterRowDefDirective, NbRowDefDirective, NbHeaderRowComponent, NbFooterRowComponent, NbRowComponent, NB_TABLE_TEMPLATE, NB_VIEW_REPEATER_STRATEGY, NB_COALESCED_STYLE_SCHEDULER, NB_TABLE_PROVIDERS, NbTable, NbTableModule, NB_DIALOG_CONFIG, NbDialogConfig, NbDialogRef, NbDialogService, NbDialogModule, NbToastrModule, NbToastRef, NbToastContainer, NbToastrContainerRegistry, NbToastrService, NbToast, NbToastComponent, NB_TOASTR_CONFIG, NbToastrConfig, NbToastrContainerComponent, NbTooltipModule, NbTooltipDirective, NbTooltipComponent, NbSelectModule, NbSelectLabelComponent, nbSelectFormFieldControlConfigFactory, NbSelectComponent, NbOptionModule, NbOptionComponent, NbOptionGroupComponent, NbOptionListComponent, NB_SELECT_INJECTION_TOKEN, NbAutocompleteModule, NbAutocompleteComponent, NbAutocompleteDirective, NbWindowModule, NbWindowService, NbWindowRef, NbWindowState, NB_WINDOW_DEFAULT_BUTTONS_CONFIG, NbWindowConfig, NB_WINDOW_CONTENT, NB_WINDOW_CONFIG, NB_WINDOW_CONTEXT, NbWindowComponent, NbWindowsContainerComponent, NbTimepickerModule, NB_TIME_PICKER_CONFIG, NB_DEFAULT_TIMEPICKER_LOCALIZATION_CONFIG, NbTimePickerComponent, NbTimePickerDirective, NbDatepickerModule, NbDatepickerAdapter, NbDatepicker, NB_DATE_ADAPTER, NB_DATE_SERVICE_OPTIONS, NbDatepickerDirective, NbDateAdapterService, NbRangeAdapterService, NbDateTimeAdapterService, NbDatepickerContainerComponent, NbBasePicker, NbBasePickerComponent, NbDatepickerComponent, NbRangepickerComponent, NbDialogContainerComponent, NbRadioModule, NbRadioGroupComponent, NbRadioComponent, NbTagModule, NbTagComponent, NbTagListComponent, NbTagInputDirective, NbTreeGridModule, NbTreeGridComponent, NB_ROW_DOUBLE_CLICK_DELAY, NbTreeGridRowComponent, NbTreeGridHeaderRowComponent, NbTreeGridFooterRowComponent, NB_TREE_GRID, NbSortDirection, NbSortDirective, NbSortHeaderIconDirective, NbSortIconComponent, NbSortHeaderComponent, NbTreeGridRowToggleComponent, NbTreeGridColumnDefDirective, NbTreeGridCellDirective, NbTreeGridHeaderCellDirective, NbTreeGridFooterCellDirective, NbTreeGridRowDefDirective, NbTreeGridHeaderRowDefDirective, NbTreeGridFooterRowDefDirective, NbTreeGridCellDefDirective, NbTreeGridHeaderCellDefDirective, NbTreeGridFooterCellDefDirective, NbFilterDirective, NbFilterInputDirective, NbTreeGridRowToggleDirective, NB_DEFAULT_ROW_LEVEL, NbTreeGridPresentationNode, NbTreeGridDataSource, NbTreeGridDataSourceBuilder, NbTreeGridDataService, NbTreeGridFilterService, NbTreeGridService, NbTreeGridSortService, NbColumnsService, NbIconModule, NbIconComponent, NbFontIcon, NbSvgIcon, NbIconPackType, NbIconDefinition, NbIconLibraries, NbToggleModule, NbToggleComponent, NbFormFieldModule, NbFormFieldComponent, NbPrefixDirective, NbSuffixDirective, NbFormFieldControl, NbFormFieldControlConfig }; //# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O29JQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7eUpBR0U7QUFDRjtBQUNBO0FBQ0E7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7d0hBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7cUdBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzhIQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c0pBR0U7QUFDRjtBQUNBO0FBQ0E7Ozs7Ozs7O2tDQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrQ0FVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O3lKQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O2tDQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzBCQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7MEJBR0U7QUFDRjtBQUNBOzs7Ozs7MEJBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7MEJBR0U7QUFDRjtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7a1RBV0U7QUFDRjtBQUNBO0FBQ0E7cVBBQUM7QUFDRDs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzBCQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztnSkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OEhBR0U7QUFDRjtBQUNBO0FBQ0E7OztrRkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztzSkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7bUtBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7MkpBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztpRkFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs4SEFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7dUdBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7eUpBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztrS0FHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztxR0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O21KQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzBCQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7MktBR0U7QUFDRjtBQUNBO0FBQ0E7Ozs7OztrQ0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bVVBaUJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O3NLQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtvR0FBQztBQUNEOzs7O2dEQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozt5U0FRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2NBYUU7QUFDRjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztrUkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OzBCQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OzBCQVlFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7bThCQWVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztxK0RBc0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OGdCQWNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs0RkF3QkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzsyTkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztpREFZRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrTkFhRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OytKQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7dUVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O29RQTRCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7eU9BVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7aURBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7a0hBbUJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs0SkFHRTtBQUNGO0FBQ0E7QUFDQTs7O3VFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7bUdBWUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozt1SkFjRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztxSUFvQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzttSUFhRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzswRkFtQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzRFQWFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1SUFHRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7O2tDQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzRKQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7dUVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OzswSUFzQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7bStCQWFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs0VEFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozt1UUFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs4TkFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7O29FQXdCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttVkFpQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O2k5QkFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a3pCQXNERTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozt3RUFRRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztlQWlCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Oyt2QkFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzswVkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2tXQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OGhCQU9FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztzSkFHRTtBQUNGO0FBQ0E7QUFDQTs7O3VFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZrRkF1QkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs2QkFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7NkJBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7NkJBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d1dBZ0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NklBR0U7QUFDRjtBQUNBO0FBQ0E7Ozt5RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2VBYUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7eWpCQXNCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzttaUJBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztvTEFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7bVJBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7dXhDQTRDRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K09BY0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OzswQkFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OzBCQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7aW9DQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQWlCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2VEFhRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7d0RBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7O3doREFnQ0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrUUFlRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztzekJBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyTkFjRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7O2d0QkE2Q0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzBFQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3dSQWVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Z0RBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a29nQkFBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQTRCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OzttYUFzQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7aVRBd0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MG1CQThCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OztzT0FVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OEhBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs0S0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7bUpBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7eUpBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7b0pBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs2b0JBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OzswT0FRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzREQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O2thQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OFZBUUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyTkFjRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7aU9BU0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7aVhBWUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7K01BYUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrT0E0Q0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2dEQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O21DQTRFRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O3NJQXFCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O21IQVVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O2lLQTJCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7a0xBZUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztzR0FVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OzBCQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OzRDQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7K01BT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs0RUFXRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2lRQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZwQkFrQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7b2VBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzJNQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs2UEFVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs2QkFVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzB2Q0FRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztxQ0FLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O3FDQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs2V0FvQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O2lEQVNFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OENBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O2tHQWNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O3NFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQ0EyQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OytkQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OztrREFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O2lEQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O3dQQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7O3lHQU9FO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozt3RkFPRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7NEdBS0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O3dLQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OztxVUFNRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7MEJBR0U7QUFDRjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7MEJBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzBCQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztrREFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJRQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7MkdBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7dVFBU0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzsyR0FBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt1T0FTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7OzJHQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2tZQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O2tZQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7eVZBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBWUU7QUFDRjtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7OzBCQVlFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzswQkFZRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt5U0FPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztpZ0NBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OztvRUFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJIQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O3dLQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7OzhNQU9FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O2lqQkFPRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7O2VBYUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzt5SkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7MkhBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7Ozs7O3VFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OE9BT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztlQXlCRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7MnFCQU9FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozt3UUFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7O2twQkFlRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzgzQ0FrQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7aUlBV0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7O2lEQVdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7d1lBY0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs4V0FrQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzsrTUFRRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7b0JBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7cUxBZ0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzsySkFPRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsycENBd0NFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzJIQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7a0NBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs0VEFVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O29CQVVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzZKQVVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzBjQWNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzBJQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7dUVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzZJQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7dUVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7c0pBR0U7QUFDRjtBQUNBO0FBQ0E7Ozt1RUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7MGxCQW1DRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsyaUNBMEJFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7aURBZUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7a09BT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OzZGQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7OztrREFTRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztpREFZRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzsrV0FrQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztnREFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzttTUFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OzBCQUdFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7O3lFQVdFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7c0dBZ0JFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OzswQkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7MEJBR0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzsrSkFHRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O2dMQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OzhIQUdFO0FBQ0Y7QUFDQTtBQUNBOzs7Z0ZBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7OzBXQVlFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Z1lBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NlpBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7NlpBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7MEJBTUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7OzswQkFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7OzBCQU1FO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztrRUFXRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7MEJBWUU7QUFDRjtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7OzswQkFZRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OytFQVNFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztxSkFVRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O2lLQVVFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7aUtBVUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztvTEFHRTtBQUNGO0FBQ0E7QUFDQTs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OzttUEFNRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztXQUtFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7OztrS0FvQkU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O285Q0FjRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzttQ0F5Q0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7b0JBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7c1NBVUU7QUFDRjtBQUNBO0FBQ0E7Ozs7Ozs7OzBCQUtFO0FBQ0Y7QUFDQTtBQUNBOzs7Ozs7OzswQkFLRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OzZOQVFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7NldBT0U7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEF0dHJpYnV0ZSwgQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3ksIENoYW5nZURldGVjdG9yUmVmLCBDb21wb25lbnQsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQ29udGVudENoaWxkLCBDb250ZW50Q2hpbGRyZW4sIERpcmVjdGl2ZSwgRWxlbWVudFJlZiwgRXZlbnRFbWl0dGVyLCBIb3N0LCBIb3N0QmluZGluZywgSG9zdExpc3RlbmVyLCBJbmplY3QsIEluamVjdGFibGUsIEluamVjdGlvblRva2VuLCBJbmplY3RvciwgSW5wdXQsIEl0ZXJhYmxlRGlmZmVycywgTE9DQUxFX0lELCBOZ01vZHVsZSwgTmdab25lLCBPcHRpb25hbCwgT3V0cHV0LCBQTEFURk9STV9JRCwgUmVuZGVyZXIyLCBTaW1wbGVDaGFuZ2UsIFNraXBTZWxmLCBUZW1wbGF0ZVJlZiwgVHlwZSwgVmlld0NoaWxkLCBWaWV3Q2hpbGRyZW4sIFZpZXdDb250YWluZXJSZWYsIGZvcndhcmRSZWYsIGlzRGV2TW9kZSwgybXJtWRlZmluZUluamVjdGFibGUsIMm1ybVpbmplY3QgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCAqIGFzIGkwIGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlLCBET0NVTUVOVCwgRGF0ZVBpcGUsIEZvcm1TdHlsZSwgRm9ybWF0V2lkdGgsIExvY2F0aW9uLCBUcmFuc2xhdGlvbldpZHRoLCBnZXRMb2NhbGVEYXlOYW1lcywgZ2V0TG9jYWxlRmlyc3REYXlPZldlZWssIGdldExvY2FsZU1vbnRoTmFtZXMsIGdldExvY2FsZVRpbWVGb3JtYXQsIGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEJlaGF2aW9yU3ViamVjdCwgRU1QVFksIE9ic2VydmFibGUsIFJlcGxheVN1YmplY3QsIFN1YmplY3QsIGNvbWJpbmVMYXRlc3QsIGZvcmtKb2luLCBmcm9tLCBmcm9tRXZlbnQsIGludGVydmFsLCBtZXJnZSwgb2YsIHRpbWVyIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWJvdW5jZVRpbWUsIGRlbGF5LCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgZmlsdGVyLCBmaW5hbGl6ZSwgbWFwLCBwYWlyd2lzZSwgcHVibGlzaCwgcmVmQ291bnQsIHJlcGVhdCwgc2hhcmUsIHNraXAsIHN0YXJ0V2l0aCwgc3dpdGNoTWFwLCB0YWtlLCB0YWtlVW50aWwsIHRha2VXaGlsZSwgdGFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgRm9ybXNNb2R1bGUsIE5HX1ZBTElEQVRPUlMsIE5HX1ZBTFVFX0FDQ0VTU09SLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIE5hdmlnYXRpb25FbmQsIFJvdXRlciwgUm91dGVyTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IEFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyLCBGb2N1c0tleU1hbmFnZXIsIEZvY3VzTW9uaXRvciwgRm9jdXNUcmFwLCBGb2N1c1RyYXBGYWN0b3J5LCBJbnRlcmFjdGl2aXR5Q2hlY2tlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9hMTF5JztcbmltcG9ydCB7IENka1BvcnRhbCwgQ2RrUG9ydGFsT3V0bGV0LCBDb21wb25lbnRQb3J0YWwsIFBvcnRhbEluamVjdG9yLCBQb3J0YWxNb2R1bGUsIFRlbXBsYXRlUG9ydGFsIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BvcnRhbCc7XG5pbXBvcnQgeyBCbG9ja1Njcm9sbFN0cmF0ZWd5LCBGbGV4aWJsZUNvbm5lY3RlZFBvc2l0aW9uU3RyYXRlZ3ksIEdsb2JhbFBvc2l0aW9uU3RyYXRlZ3ksIE92ZXJsYXksIE92ZXJsYXlDb250YWluZXIsIE92ZXJsYXlNb2R1bGUsIE92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIsIFNjcm9sbERpc3BhdGNoZXIsIFNjcm9sbFN0cmF0ZWd5T3B0aW9ucywgVmlld3BvcnRSdWxlciB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9vdmVybGF5JztcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3BsYXRmb3JtJztcbmltcG9ydCAqIGFzIGkxIGZyb20gJ0Bhbmd1bGFyL2Nkay9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBEb21TYW5pdGl6ZXIgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IGFuaW1hdGUsIHN0YXRlLCBzdHlsZSwgdHJhbnNpdGlvbiwgdHJpZ2dlciB9IGZyb20gJ0Bhbmd1bGFyL2FuaW1hdGlvbnMnO1xuaW1wb3J0ICdpbnRlcnNlY3Rpb24tb2JzZXJ2ZXInO1xuaW1wb3J0IHsgQmlkaU1vZHVsZSwgRGlyZWN0aW9uYWxpdHkgfSBmcm9tICdAYW5ndWxhci9jZGsvYmlkaSc7XG5pbXBvcnQgeyBDZGtDZWxsLCBDZGtDZWxsRGVmLCBDZGtDZWxsT3V0bGV0LCBDZGtDb2x1bW5EZWYsIENka0Zvb3RlckNlbGwsIENka0Zvb3RlckNlbGxEZWYsIENka0Zvb3RlclJvdywgQ2RrRm9vdGVyUm93RGVmLCBDZGtIZWFkZXJDZWxsLCBDZGtIZWFkZXJDZWxsRGVmLCBDZGtIZWFkZXJSb3csIENka0hlYWRlclJvd0RlZiwgQ2RrUm93LCBDZGtSb3dEZWYsIENka1RhYmxlLCBDZGtUYWJsZU1vZHVsZSwgRGF0YVJvd091dGxldCwgRGF0YVNvdXJjZSwgRm9vdGVyUm93T3V0bGV0LCBIZWFkZXJSb3dPdXRsZXQsIE5vRGF0YVJvd091dGxldCwgU1RJQ0tZX1BPU0lUSU9OSU5HX0xJU1RFTkVSLCBfQ09BTEVTQ0VEX1NUWUxFX1NDSEVEVUxFUiwgX0NvYWxlc2NlZFN0eWxlU2NoZWR1bGVyIH0gZnJvbSAnQGFuZ3VsYXIvY2RrL3RhYmxlJztcbmltcG9ydCB7IGNvZXJjZUJvb2xlYW5Qcm9wZXJ0eSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2VyY2lvbic7XG5pbXBvcnQgeyBfRGlzcG9zZVZpZXdSZXBlYXRlclN0cmF0ZWd5LCBfVklFV19SRVBFQVRFUl9TVFJBVEVHWSB9IGZyb20gJ0Bhbmd1bGFyL2Nkay9jb2xsZWN0aW9ucyc7XG5pbXBvcnQgeyBCQUNLU1BBQ0UsIERFTEVURSwgRU5URVIsIEVTQ0FQRSwgU1BBQ0UgfSBmcm9tICdAYW5ndWxhci9jZGsva2V5Y29kZXMnO1xuaW1wb3J0ICogYXMgX2FuZ3VsYXJfY2RrX2tleWNvZGVzIGZyb20gJ0Bhbmd1bGFyL2Nkay9rZXljb2Rlcyc7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IE5CX1RIRU1FX09QVElPTlMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05lYnVsYXIgVGhlbWUgT3B0aW9ucycpO1xuY29uc3QgTkJfTUVESUFfQlJFQUtQT0lOVFMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05lYnVsYXIgTWVkaWEgQnJlYWtwb2ludHMnKTtcbmNvbnN0IE5CX0JVSUxUX0lOX0pTX1RIRU1FUyA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBCdWlsdC1pbiBKUyBUaGVtZXMnKTtcbmNvbnN0IE5CX0pTX1RIRU1FUyA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBKUyBUaGVtZXMnKTtcbi8qKlxuICogV2UncmUgcHJvdmlkaW5nIGJyb3dzZXIgYXBpcyB3aXRoIHRva2VucyB0byBpbXByb3ZlIHRlc3RpbmcgY2FwYWJpbGl0aWVzLlxuICogKi9cbmNvbnN0IE5CX1dJTkRPVyA9IG5ldyBJbmplY3Rpb25Ub2tlbignV2luZG93Jyk7XG5jb25zdCBOQl9ET0NVTUVOVCA9IG5ldyBJbmplY3Rpb25Ub2tlbignRG9jdW1lbnQnKTtcblxuY29uc3QgcGFsZXR0ZSA9IHtcbiAgICBwcmltYXJ5OiAnIzMzNjZmZicsXG4gICAgc3VjY2VzczogJyMwMGQ2OGYnLFxuICAgIGluZm86ICcjMDA5NWZmJyxcbiAgICB3YXJuaW5nOiAnI2ZmYWEwMCcsXG4gICAgZGFuZ2VyOiAnI2ZmM2Q3MScsXG59O1xuY29uc3QgREVGQVVMVF9USEVNRSA9IHtcbiAgICBuYW1lOiAnZGVmYXVsdCcsXG4gICAgdmFyaWFibGVzOiB7XG4gICAgICAgIGZvbnRNYWluOiAnT3BlbiBTYW5zLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgZm9udFNlY29uZGFyeTogJ1JhbGV3YXksIHNhbnMtc2VyaWYnLFxuICAgICAgICBiZzogJyNmZmZmZmYnLFxuICAgICAgICBiZzI6ICcjZjdmOWZjJyxcbiAgICAgICAgYmczOiAnI2VkZjFmNycsXG4gICAgICAgIGJnNDogJyNlNGU5ZjInLFxuICAgICAgICBib3JkZXI6ICcjZmZmZmZmJyxcbiAgICAgICAgYm9yZGVyMjogJyNmN2Y5ZmMnLFxuICAgICAgICBib3JkZXIzOiAnI2VkZjFmNycsXG4gICAgICAgIGJvcmRlcjQ6ICcjZTRlOWYyJyxcbiAgICAgICAgYm9yZGVyNTogJyNjNWNlZTAnLFxuICAgICAgICBmZzogJyM4ZjliYjMnLFxuICAgICAgICBmZ0hlYWRpbmc6ICcjMWEyMTM4JyxcbiAgICAgICAgZmdUZXh0OiAnIzFhMjEzOCcsXG4gICAgICAgIGZnSGlnaGxpZ2h0OiBwYWxldHRlLnByaW1hcnksXG4gICAgICAgIGxheW91dEJnOiAnI2Y3ZjlmYycsXG4gICAgICAgIHNlcGFyYXRvcjogJyNlZGYxZjcnLFxuICAgICAgICBwcmltYXJ5OiBwYWxldHRlLnByaW1hcnksXG4gICAgICAgIHN1Y2Nlc3M6IHBhbGV0dGUuc3VjY2VzcyxcbiAgICAgICAgaW5mbzogcGFsZXR0ZS5pbmZvLFxuICAgICAgICB3YXJuaW5nOiBwYWxldHRlLndhcm5pbmcsXG4gICAgICAgIGRhbmdlcjogcGFsZXR0ZS5kYW5nZXIsXG4gICAgICAgIHByaW1hcnlMaWdodDogJyM1OThiZmYnLFxuICAgICAgICBzdWNjZXNzTGlnaHQ6ICcjMmNlNjliJyxcbiAgICAgICAgaW5mb0xpZ2h0OiAnIzQyYWFmZicsXG4gICAgICAgIHdhcm5pbmdMaWdodDogJyNmZmM5NGQnLFxuICAgICAgICBkYW5nZXJMaWdodDogJyNmZjcwOGQnLFxuICAgIH0sXG59O1xuXG5jb25zdCBwYWxldHRlJDEgPSB7XG4gICAgcHJpbWFyeTogJyNhMTZlZmYnLFxuICAgIHN1Y2Nlc3M6ICcjMDBkNjhmJyxcbiAgICBpbmZvOiAnIzAwOTVmZicsXG4gICAgd2FybmluZzogJyNmZmFhMDAnLFxuICAgIGRhbmdlcjogJyNmZjNkNzEnLFxufTtcbmNvbnN0IENPU01JQ19USEVNRSA9IHtcbiAgICBuYW1lOiAnY29zbWljJyxcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgZm9udE1haW46ICdPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuICAgICAgICBmb250U2Vjb25kYXJ5OiAnUmFsZXdheSwgc2Fucy1zZXJpZicsXG4gICAgICAgIGJnOiAnIzMyMzI1OScsXG4gICAgICAgIGJnMjogJyMyNTI1NDcnLFxuICAgICAgICBiZzM6ICcjMWIxYjM4JyxcbiAgICAgICAgYmc0OiAnIzEzMTMyYicsXG4gICAgICAgIGJvcmRlcjogJyMzMjMyNTknLFxuICAgICAgICBib3JkZXIyOiAnIzI1MjU0NycsXG4gICAgICAgIGJvcmRlcjM6ICcjMWIxYjM4JyxcbiAgICAgICAgYm9yZGVyNDogJyMxMzEzMmInLFxuICAgICAgICBib3JkZXI1OiAnIzEzMTMyYicsXG4gICAgICAgIGZnOiAnI2I0YjRkYicsXG4gICAgICAgIGZnSGVhZGluZzogJyNmZmZmZmYnLFxuICAgICAgICBmZ1RleHQ6ICcjZmZmZmZmJyxcbiAgICAgICAgZmdIaWdobGlnaHQ6IHBhbGV0dGUkMS5wcmltYXJ5LFxuICAgICAgICBsYXlvdXRCZzogJyMxNTFhMzAnLFxuICAgICAgICBzZXBhcmF0b3I6ICcjMTUxYTMwJyxcbiAgICAgICAgcHJpbWFyeTogcGFsZXR0ZSQxLnByaW1hcnksXG4gICAgICAgIHN1Y2Nlc3M6IHBhbGV0dGUkMS5zdWNjZXNzLFxuICAgICAgICBpbmZvOiBwYWxldHRlJDEuaW5mbyxcbiAgICAgICAgd2FybmluZzogcGFsZXR0ZSQxLndhcm5pbmcsXG4gICAgICAgIGRhbmdlcjogcGFsZXR0ZSQxLmRhbmdlcixcbiAgICAgICAgcHJpbWFyeUxpZ2h0OiAnI2IxOGFmZicsXG4gICAgICAgIHN1Y2Nlc3NMaWdodDogJyMyY2U2OWInLFxuICAgICAgICBpbmZvTGlnaHQ6ICcjNDJhYWZmJyxcbiAgICAgICAgd2FybmluZ0xpZ2h0OiAnI2ZmYzk0ZCcsXG4gICAgICAgIGRhbmdlckxpZ2h0OiAnI2ZmNzA4ZCcsXG4gICAgfSxcbn07XG5cbmNvbnN0IHBhbGV0dGUkMiA9IHtcbiAgICBwcmltYXJ5OiAnIzczYTFmZicsXG4gICAgc3VjY2VzczogJyM1ZGNmZTMnLFxuICAgIGluZm86ICcjYmE3ZmVjJyxcbiAgICB3YXJuaW5nOiAnI2ZmYTM2YicsXG4gICAgZGFuZ2VyOiAnI2ZmNmI4MycsXG59O1xuY29uc3QgQ09SUE9SQVRFX1RIRU1FID0ge1xuICAgIG5hbWU6ICdjb3Jwb3JhdGUnLFxuICAgIGJhc2U6ICdkZWZhdWx0JyxcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgICAgZm9udE1haW46ICdPcGVuIFNhbnMsIHNhbnMtc2VyaWYnLFxuICAgICAgICBmb250U2Vjb25kYXJ5OiAnUmFsZXdheSwgc2Fucy1zZXJpZicsXG4gICAgICAgIGJnOiAnI2ZmZmZmZicsXG4gICAgICAgIGJnMjogJyNmN2Y5ZmMnLFxuICAgICAgICBiZzM6ICcjZWRmMWY3JyxcbiAgICAgICAgYmc0OiAnI2U0ZTlmMicsXG4gICAgICAgIGJvcmRlcjogJyNmZmZmZmYnLFxuICAgICAgICBib3JkZXIyOiAnI2Y3ZjlmYycsXG4gICAgICAgIGJvcmRlcjM6ICcjZWRmMWY3JyxcbiAgICAgICAgYm9yZGVyNDogJyNlNGU5ZjInLFxuICAgICAgICBib3JkZXI1OiAnI2M1Y2VlMCcsXG4gICAgICAgIGZnOiAnIzhmOWJiMycsXG4gICAgICAgIGZnSGVhZGluZzogJyMxYTIxMzgnLFxuICAgICAgICBmZ1RleHQ6ICcjMWEyMTM4JyxcbiAgICAgICAgZmdIaWdobGlnaHQ6IHBhbGV0dGUkMi5wcmltYXJ5LFxuICAgICAgICBsYXlvdXRCZzogJyNmN2Y5ZmMnLFxuICAgICAgICBzZXBhcmF0b3I6ICcjZWRmMWY3JyxcbiAgICAgICAgcHJpbWFyeTogcGFsZXR0ZSQyLnByaW1hcnksXG4gICAgICAgIHN1Y2Nlc3M6IHBhbGV0dGUkMi5zdWNjZXNzLFxuICAgICAgICBpbmZvOiBwYWxldHRlJDIuaW5mbyxcbiAgICAgICAgd2FybmluZzogcGFsZXR0ZSQyLndhcm5pbmcsXG4gICAgICAgIGRhbmdlcjogcGFsZXR0ZSQyLmRhbmdlcixcbiAgICAgICAgcHJpbWFyeUxpZ2h0OiAnIzU5OGJmZicsXG4gICAgICAgIHN1Y2Nlc3NMaWdodDogJyMyY2U2OWInLFxuICAgICAgICBpbmZvTGlnaHQ6ICcjNDJhYWZmJyxcbiAgICAgICAgd2FybmluZ0xpZ2h0OiAnI2ZmYzk0ZCcsXG4gICAgICAgIGRhbmdlckxpZ2h0OiAnI2ZmNzA4ZCcsXG4gICAgfSxcbn07XG5cbmNvbnN0IHBhbGV0dGUkMyA9IHtcbiAgICBwcmltYXJ5OiAnIzMzNjZmZicsXG4gICAgc3VjY2VzczogJyMwMGQ2OGYnLFxuICAgIGluZm86ICcjMDA5NWZmJyxcbiAgICB3YXJuaW5nOiAnI2ZmYWEwMCcsXG4gICAgZGFuZ2VyOiAnI2ZmM2Q3MScsXG59O1xuY29uc3QgREFSS19USEVNRSA9IHtcbiAgICBuYW1lOiAnZGFyaycsXG4gICAgdmFyaWFibGVzOiB7XG4gICAgICAgIGZvbnRNYWluOiAnT3BlbiBTYW5zLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgZm9udFNlY29uZGFyeTogJ1JhbGV3YXksIHNhbnMtc2VyaWYnLFxuICAgICAgICBiZzogJyMyMjJiNDUnLFxuICAgICAgICBiZzI6ICcjMWEyMTM4JyxcbiAgICAgICAgYmczOiAnIzE1MWEzMCcsXG4gICAgICAgIGJnNDogJyMxMDE0MjYnLFxuICAgICAgICBib3JkZXI6ICcjMjIyYjQ1JyxcbiAgICAgICAgYm9yZGVyMjogJyMxYTIxMzgnLFxuICAgICAgICBib3JkZXIzOiAnIzE1MWEzMCcsXG4gICAgICAgIGJvcmRlcjQ6ICcjMTAxNDI2JyxcbiAgICAgICAgYm9yZGVyNTogJyMxMDE0MjYnLFxuICAgICAgICBmZzogJyM4ZjliYjMnLFxuICAgICAgICBmZ0hlYWRpbmc6ICcjZmZmZmZmJyxcbiAgICAgICAgZmdUZXh0OiAnI2ZmZmZmZicsXG4gICAgICAgIGZnSGlnaGxpZ2h0OiBwYWxldHRlJDMucHJpbWFyeSxcbiAgICAgICAgbGF5b3V0Qmc6ICcjMWIxYjM4JyxcbiAgICAgICAgc2VwYXJhdG9yOiAnIzFiMWIzOCcsXG4gICAgICAgIHByaW1hcnk6IHBhbGV0dGUkMy5wcmltYXJ5LFxuICAgICAgICBzdWNjZXNzOiBwYWxldHRlJDMuc3VjY2VzcyxcbiAgICAgICAgaW5mbzogcGFsZXR0ZSQzLmluZm8sXG4gICAgICAgIHdhcm5pbmc6IHBhbGV0dGUkMy53YXJuaW5nLFxuICAgICAgICBkYW5nZXI6IHBhbGV0dGUkMy5kYW5nZXIsXG4gICAgICAgIHByaW1hcnlMaWdodDogJyM1OThiZmYnLFxuICAgICAgICBzdWNjZXNzTGlnaHQ6ICcjMmNlNjliJyxcbiAgICAgICAgaW5mb0xpZ2h0OiAnIzQyYWFmZicsXG4gICAgICAgIHdhcm5pbmdMaWdodDogJyNmZmM5NGQnLFxuICAgICAgICBkYW5nZXJMaWdodDogJyNmZjcwOGQnLFxuICAgIH0sXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBCVUlMVF9JTl9USEVNRVMgPSBbXG4gICAgREVGQVVMVF9USEVNRSxcbiAgICBDT1NNSUNfVEhFTUUsXG4gICAgQ09SUE9SQVRFX1RIRU1FLFxuICAgIERBUktfVEhFTUUsXG5dO1xuLyoqXG4gKiBKcyBUaGVtZXMgcmVnaXN0cnkgLSBwcm92aWRlcyBhY2Nlc3MgdG8gdGhlIEpTIHRoZW1lcycgdmFyaWFibGVzLlxuICogVXN1YWxseSBzaG91bGRuJ3QgYmUgdXNlZCBkaXJlY3RseSwgYnV0IHRocm91Z2ggdGhlIE5iVGhlbWVTZXJ2aWNlIGNsYXNzIG1ldGhvZHMgKGdldEpzVGhlbWUpLlxuICovXG5jbGFzcyBOYkpTVGhlbWVzUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKGJ1aWx0SW5UaGVtZXMsIG5ld1RoZW1lcyA9IFtdKSB7XG4gICAgICAgIHRoaXMudGhlbWVzID0ge307XG4gICAgICAgIGNvbnN0IHRoZW1lcyA9IHRoaXMuY29tYmluZUJ5TmFtZXMobmV3VGhlbWVzLCBidWlsdEluVGhlbWVzKTtcbiAgICAgICAgdGhlbWVzLmZvckVhY2goKHRoZW1lKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyKHRoZW1lLCB0aGVtZS5uYW1lLCB0aGVtZS5iYXNlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIG5ldyBKUyB0aGVtZVxuICAgICAqIEBwYXJhbSBjb25maWcgYW55XG4gICAgICogQHBhcmFtIHRoZW1lTmFtZSBzdHJpbmdcbiAgICAgKiBAcGFyYW0gYmFzZVRoZW1lIHN0cmluZ1xuICAgICAqL1xuICAgIHJlZ2lzdGVyKGNvbmZpZywgdGhlbWVOYW1lLCBiYXNlVGhlbWUpIHtcbiAgICAgICAgY29uc3QgYmFzZSA9IHRoaXMuaGFzKGJhc2VUaGVtZSkgPyB0aGlzLmdldChiYXNlVGhlbWUpIDoge307XG4gICAgICAgIHRoaXMudGhlbWVzW3RoZW1lTmFtZV0gPSB0aGlzLm1lcmdlRGVlcCh7fSwgYmFzZSwgY29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHdoZXRoZXIgdGhlIHRoZW1lIGlzIHJlZ2lzdGVyZWRcbiAgICAgKiBAcGFyYW0gdGhlbWVOYW1lXG4gICAgICogQHJldHVybnMgYm9vbGVhblxuICAgICAqL1xuICAgIGhhcyh0aGVtZU5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy50aGVtZXNbdGhlbWVOYW1lXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJuIGEgdGhlbWVcbiAgICAgKiBAcGFyYW0gdGhlbWVOYW1lXG4gICAgICogQHJldHVybnMgTmJKU1RoZW1lT3B0aW9uc1xuICAgICAqL1xuICAgIGdldCh0aGVtZU5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnRoZW1lc1t0aGVtZU5hbWVdKSB7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTmJUaGVtZUNvbmZpZzogbm8gdGhlbWUgJyR7dGhlbWVOYW1lfScgZm91bmQgcmVnaXN0ZXJlZC5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnRoZW1lc1t0aGVtZU5hbWVdKSk7XG4gICAgfVxuICAgIGNvbWJpbmVCeU5hbWVzKG5ld1RoZW1lcywgb2xkVGhlbWVzKSB7XG4gICAgICAgIGlmIChuZXdUaGVtZXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG1lcmdlZFRoZW1lcyA9IFtdO1xuICAgICAgICAgICAgbmV3VGhlbWVzLmZvckVhY2goKHRoZW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc2FtZU9sZCA9IG9sZFRoZW1lcy5maW5kKCh0bSkgPT4gdG0ubmFtZSA9PT0gdGhlbWUubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgfHwge307XG4gICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkVGhlbWUgPSB0aGlzLm1lcmdlRGVlcCh7fSwgc2FtZU9sZCwgdGhlbWUpO1xuICAgICAgICAgICAgICAgIG1lcmdlZFRoZW1lcy5wdXNoKG1lcmdlZFRoZW1lKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgb2xkVGhlbWVzLmZvckVhY2goKHRoZW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFtZXJnZWRUaGVtZXMuZmluZCgodG0pID0+IHRtLm5hbWUgPT09IHRoZW1lLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFRoZW1lcy5wdXNoKHRoZW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBtZXJnZWRUaGVtZXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG9sZFRoZW1lcztcbiAgICB9XG4gICAgaXNPYmplY3QoaXRlbSkge1xuICAgICAgICByZXR1cm4gaXRlbSAmJiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaXRlbSk7XG4gICAgfVxuICAgIC8vIFRPRE86IG1vdmUgdG8gaGVscGVyc1xuICAgIG1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpIHtcbiAgICAgICAgaWYgKCFzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgICAgIGlmICh0aGlzLmlzT2JqZWN0KHRhcmdldCkgJiYgdGhpcy5pc09iamVjdChzb3VyY2UpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc09iamVjdChzb3VyY2Vba2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0YXJnZXRba2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0YXJnZXQsIHsgW2tleV06IHt9IH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVyZ2VEZWVwKHRhcmdldFtrZXldLCBzb3VyY2Vba2V5XSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKHRhcmdldCwgeyBba2V5XTogc291cmNlW2tleV0gfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm1lcmdlRGVlcCh0YXJnZXQsIC4uLnNvdXJjZXMpO1xuICAgIH1cbn1cbk5iSlNUaGVtZXNSZWdpc3RyeS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJKU1RoZW1lc1JlZ2lzdHJ5LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogQXJyYXksIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0JVSUxUX0lOX0pTX1RIRU1FUyxdIH1dIH0sXG4gICAgeyB0eXBlOiBBcnJheSwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfSlNfVEhFTUVTLF0gfV0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgREVGQVVMVF9NRURJQV9CUkVBS1BPSU5UUyA9IFtcbiAgICB7XG4gICAgICAgIG5hbWU6ICd4cycsXG4gICAgICAgIHdpZHRoOiAwLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnaXMnLFxuICAgICAgICB3aWR0aDogNDAwLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnc20nLFxuICAgICAgICB3aWR0aDogNTc2LFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnbWQnLFxuICAgICAgICB3aWR0aDogNzY4LFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAnbGcnLFxuICAgICAgICB3aWR0aDogOTkyLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAneGwnLFxuICAgICAgICB3aWR0aDogMTIwMCxcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ3h4bCcsXG4gICAgICAgIHdpZHRoOiAxNDAwLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAneHh4bCcsXG4gICAgICAgIHdpZHRoOiAxNjAwLFxuICAgIH0sXG5dO1xuLyoqXG4gKiBNYW5hZ2VzIG1lZGlhIGJyZWFrcG9pbnRzXG4gKlxuICogUHJvdmlkZXMgYWNjZXNzIHRvIGF2YWlsYWJsZSBtZWRpYSBicmVha3BvaW50cyB0byBjb252ZXJ0IHdpbmRvdyB3aWR0aCB0byBhIGNvbmZpZ3VyZWQgYnJlYWtwb2ludCxcbiAqIGUuZy4gMjAwcHggLSAqeHMqIGJyZWFrcG9pbnRcbiAqL1xuY2xhc3MgTmJNZWRpYUJyZWFrcG9pbnRzU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoYnJlYWtwb2ludHMpIHtcbiAgICAgICAgdGhpcy5icmVha3BvaW50cyA9IGJyZWFrcG9pbnRzO1xuICAgICAgICB0aGlzLmJyZWFrcG9pbnRzTWFwID0gdGhpcy5icmVha3BvaW50cy5yZWR1Y2UoKHJlcywgYikgPT4ge1xuICAgICAgICAgICAgcmVzW2IubmFtZV0gPSBiLndpZHRoO1xuICAgICAgICAgICAgcmV0dXJuIHJlcztcbiAgICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29uZmlndXJlZCBicmVha3BvaW50IGJ5IHdpZHRoXG4gICAgICogQHBhcmFtIHdpZHRoIG51bWJlclxuICAgICAqIEByZXR1cm5zIHtafHtuYW1lOiBzdHJpbmcsIHdpZHRoOiBudW1iZXJ9fVxuICAgICAqL1xuICAgIGdldEJ5V2lkdGgod2lkdGgpIHtcbiAgICAgICAgY29uc3QgdW5rbm93biA9IHsgbmFtZTogJ3Vua25vd24nLCB3aWR0aDogd2lkdGggfTtcbiAgICAgICAgY29uc3QgYnJlYWtwb2ludHMgPSB0aGlzLmdldEJyZWFrcG9pbnRzKCk7XG4gICAgICAgIHJldHVybiBicmVha3BvaW50c1xuICAgICAgICAgICAgLmZpbmQoKHBvaW50LCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbmV4dCA9IGJyZWFrcG9pbnRzW2luZGV4ICsgMV07XG4gICAgICAgICAgICByZXR1cm4gd2lkdGggPj0gcG9pbnQud2lkdGggJiYgKCFuZXh0IHx8IHdpZHRoIDwgbmV4dC53aWR0aCk7XG4gICAgICAgIH0pIHx8IHVua25vd247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjb25maWd1cmVkIGJyZWFrcG9pbnQgYnkgbmFtZVxuICAgICAqIEBwYXJhbSBuYW1lIHN0cmluZ1xuICAgICAqIEByZXR1cm5zIE5iTWVkaWFCcmVha3BvaW50XG4gICAgICovXG4gICAgZ2V0QnlOYW1lKG5hbWUpIHtcbiAgICAgICAgY29uc3QgdW5rbm93biA9IHsgbmFtZTogJ3Vua25vd24nLCB3aWR0aDogTmFOIH07XG4gICAgICAgIGNvbnN0IGJyZWFrcG9pbnRzID0gdGhpcy5nZXRCcmVha3BvaW50cygpO1xuICAgICAgICByZXR1cm4gYnJlYWtwb2ludHMuZmluZCgocG9pbnQpID0+IG5hbWUgPT09IHBvaW50Lm5hbWUpIHx8IHVua25vd247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGNvbmZpZ3VyZWQgYnJlYWtwb2ludHMgZm9yIHRoZSB0aGVtZVxuICAgICAqIEByZXR1cm5zIE5iTWVkaWFCcmVha3BvaW50W11cbiAgICAgKi9cbiAgICBnZXRCcmVha3BvaW50cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnJlYWtwb2ludHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBtYXAgb2YgY29uZmlndXJlZCBicmVha3BvaW50cyBmb3IgdGhlIHRoZW1lXG4gICAgICogQHJldHVybnMge1twOiBzdHJpbmddOiBudW1iZXJ9XG4gICAgICovXG4gICAgZ2V0QnJlYWtwb2ludHNNYXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJyZWFrcG9pbnRzTWFwO1xuICAgIH1cbn1cbk5iTWVkaWFCcmVha3BvaW50c1NlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iTWVkaWFCcmVha3BvaW50c1NlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX01FRElBX0JSRUFLUE9JTlRTLF0gfV0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBNYWluIE5lYnVsYXIgc2VydmljZS4gSW5jbHVkZXMgdmFyaW91cyBoZWxwZXIgbWV0aG9kcy5cbiAqL1xuY2xhc3MgTmJUaGVtZVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMsIGJyZWFrcG9pbnRTZXJ2aWNlLCBqc1RoZW1lc1JlZ2lzdHJ5KSB7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgICAgIHRoaXMuYnJlYWtwb2ludFNlcnZpY2UgPSBicmVha3BvaW50U2VydmljZTtcbiAgICAgICAgdGhpcy5qc1RoZW1lc1JlZ2lzdHJ5ID0ganNUaGVtZXNSZWdpc3RyeTtcbiAgICAgICAgdGhpcy50aGVtZUNoYW5nZXMkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4gICAgICAgIHRoaXMuYXBwZW5kTGF5b3V0Q2xhc3MkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXlvdXRDbGFzcyQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmNoYW5nZVdpbmRvd1dpZHRoJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDIpO1xuICAgICAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLm5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlVGhlbWUob3B0aW9ucy5uYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2UgY3VycmVudCBhcHBsaWNhdGlvbiB0aGVtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAgICovXG4gICAgY2hhbmdlVGhlbWUobmFtZSkge1xuICAgICAgICB0aGlzLnRoZW1lQ2hhbmdlcyQubmV4dCh7IG5hbWUsIHByZXZpb3VzOiB0aGlzLmN1cnJlbnRUaGVtZSB9KTtcbiAgICAgICAgdGhpcy5jdXJyZW50VGhlbWUgPSBuYW1lO1xuICAgIH1cbiAgICBjaGFuZ2VXaW5kb3dXaWR0aCh3aWR0aCkge1xuICAgICAgICB0aGlzLmNoYW5nZVdpbmRvd1dpZHRoJC5uZXh0KHdpZHRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHRoZW1lIG9iamVjdCB3aXRoIHZhcmlhYmxlcyAoY29sb3IvcGFkZGluZ3MvZXRjKSBvbiBhIHRoZW1lIGNoYW5nZS5cbiAgICAgKiBPbmNlIHN1YnNjcmliZWQgLSByZXR1cm5zIGN1cnJlbnQgdGhlbWUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxOYkpTVGhlbWVPcHRpb25zPn1cbiAgICAgKi9cbiAgICBnZXRKc1RoZW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vblRoZW1lQ2hhbmdlKCkucGlwZShtYXAoKHRoZW1lKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5qc1RoZW1lc1JlZ2lzdHJ5LmdldCh0aGVtZS5uYW1lKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VycyBtZWRpYSBxdWVyeSBicmVha3BvaW50IGNoYW5nZVxuICAgICAqIFJldHVybnMgYSBwYWlyIHdoZXJlIHRoZSBmaXJzdCBpdGVtIGlzIHByZXZpb3VzIG1lZGlhIGJyZWFrcG9pbnQgYW5kIHRoZSBzZWNvbmQgaXRlbSBpcyBjdXJyZW50IGJyZWFrcG9pdC5cbiAgICAgKiBgYGB0c1xuICAgICAqICBbeyBuYW1lOiAneHMnLCB3aWR0aDogMCB9LCB7IG5hbWU6ICdtZCcsIHdpZHRoOiA3NjggfV0gLy8gY2hhbmdlIGZyb20gYHhzYCB0byBgbWRgXG4gICAgICogYGBgXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8W05iTWVkaWFCcmVha3BvaW50LCBOYk1lZGlhQnJlYWtwb2ludF0+fVxuICAgICAqL1xuICAgIG9uTWVkaWFRdWVyeUNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlV2luZG93V2lkdGgkXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodW5kZWZpbmVkKSwgcGFpcndpc2UoKSwgbWFwKChbcHJldldpZHRoLCB3aWR0aF0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgdGhpcy5icmVha3BvaW50U2VydmljZS5nZXRCeVdpZHRoKHByZXZXaWR0aCksXG4gICAgICAgICAgICAgICAgdGhpcy5icmVha3BvaW50U2VydmljZS5nZXRCeVdpZHRoKHdpZHRoKSxcbiAgICAgICAgICAgIF07XG4gICAgICAgIH0pLCBmaWx0ZXIoKFtwcmV2UG9pbnQsIHBvaW50XSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHByZXZQb2ludC5uYW1lICE9PSBwb2ludC5uYW1lO1xuICAgICAgICB9KSwgZGlzdGluY3RVbnRpbENoYW5nZWQobnVsbCwgcGFyYW1zID0+IHBhcmFtc1swXS5uYW1lICsgcGFyYW1zWzFdLm5hbWUpLCBzaGFyZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlcmVkIHdoZW4gY3VycmVudCB0aGVtZSBpcyBjaGFuZ2VkXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8YW55Pn1cbiAgICAgKi9cbiAgICBvblRoZW1lQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVtZUNoYW5nZXMkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZCBhIGNsYXNzIHRvIG5iLWxheW91dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKi9cbiAgICBhcHBlbmRMYXlvdXRDbGFzcyhjbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRMYXlvdXRDbGFzcyQubmV4dChjbGFzc05hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIG5ldyBjbGFzcyBpcyBhZGRlZCB0byBuYi1sYXlvdXQgdGhyb3VnaCBgYXBwZW5kTGF5b3V0Q2xhc3NgIG1ldGhvZFxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPGFueT59XG4gICAgICovXG4gICAgb25BcHBlbmRMYXlvdXRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZW5kTGF5b3V0Q2xhc3MkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjbGFzcyBmcm9tIG5iLWxheW91dFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc05hbWVcbiAgICAgKi9cbiAgICByZW1vdmVMYXlvdXRDbGFzcyhjbGFzc05hbWUpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXlvdXRDbGFzcyQubmV4dChjbGFzc05hbWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmlnZ2VyZWQgd2hlbiBhIGNsYXNzIGlzIHJlbW92ZWQgZnJvbSBuYi1sYXlvdXQgdGhyb3VnaCBgcmVtb3ZlTGF5b3V0Q2xhc3NgIG1ldGhvZFxuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPGFueT59XG4gICAgICovXG4gICAgb25SZW1vdmVMYXlvdXRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3ZlTGF5b3V0Q2xhc3MkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxufVxuTmJUaGVtZVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iVGhlbWVTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9USEVNRV9PUFRJT05TLF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iTWVkaWFCcmVha3BvaW50c1NlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iSlNUaGVtZXNSZWdpc3RyeSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFNlcnZpY2UgdG8gY29udHJvbCB0aGUgZ2xvYmFsIHBhZ2Ugc3Bpbm5lci5cbiAqL1xuY2xhc3MgTmJTcGlubmVyU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnQpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmxvYWRlcnMgPSBbXTtcbiAgICAgICAgdGhpcy5zZWxlY3RvciA9ICduYi1nbG9iYWwtc3Bpbm5lcic7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGVuZHMgbmV3IGxvYWRlciB0byB0aGUgbGlzdCBvZiBsb2FkZXIgdG8gYmUgY29tcGxldGVkIGJlZm9yZVxuICAgICAqIHNwaW5uZXIgd2lsbCBiZSBoaWRkZW5cbiAgICAgKiBAcGFyYW0gbWV0aG9kIFByb21pc2U8YW55PlxuICAgICAqL1xuICAgIHJlZ2lzdGVyTG9hZGVyKG1ldGhvZCkge1xuICAgICAgICB0aGlzLmxvYWRlcnMucHVzaChtZXRob2QpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGxpc3Qgb2YgbG9hZGVyXG4gICAgICovXG4gICAgY2xlYXIoKSB7XG4gICAgICAgIHRoaXMubG9hZGVycyA9IFtdO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydCB0aGUgbG9hZGVyIHByb2Nlc3MsIHNob3cgc3Bpbm5kZXIgYW5kIGV4ZWN1dGUgbG9hZGVyc1xuICAgICAqL1xuICAgIGxvYWQoKSB7XG4gICAgICAgIHRoaXMuc2hvd1NwaW5uZXIoKTtcbiAgICAgICAgdGhpcy5leGVjdXRlQWxsKCk7XG4gICAgfVxuICAgIGV4ZWN1dGVBbGwoZG9uZSA9ICgpID0+IHsgfSkge1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLmxvYWRlcnMpLnRoZW4oKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5oaWRlU3Bpbm5lcigpO1xuICAgICAgICAgICAgZG9uZS5jYWxsKG51bGwsIHZhbHVlcyk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAvLyBUT0RPOiBQcm9taXNlLnJlamVjdFxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUT0RPIGlzIHRoZXJlIGFueSBiZXR0ZXIgd2F5IG9mIGRvaW5nIHRoaXM/XG4gICAgc2hvd1NwaW5uZXIoKSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5nZXRTcGlubmVyRWxlbWVudCgpO1xuICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlWydkaXNwbGF5J10gPSAnYmxvY2snO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhpZGVTcGlubmVyKCkge1xuICAgICAgICBjb25zdCBlbCA9IHRoaXMuZ2V0U3Bpbm5lckVsZW1lbnQoKTtcbiAgICAgICAgaWYgKGVsKSB7XG4gICAgICAgICAgICBlbC5zdHlsZVsnZGlzcGxheSddID0gJ25vbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFNwaW5uZXJFbGVtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKTtcbiAgICB9XG59XG5OYlNwaW5uZXJTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYlNwaW5uZXJTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH1cbl07XG5cbi8qKlxuICogTGF5b3V0IGRpcmVjdGlvbi5cbiAqICovXG52YXIgTmJMYXlvdXREaXJlY3Rpb247XG4oZnVuY3Rpb24gKE5iTGF5b3V0RGlyZWN0aW9uKSB7XG4gICAgTmJMYXlvdXREaXJlY3Rpb25bXCJMVFJcIl0gPSBcImx0clwiO1xuICAgIE5iTGF5b3V0RGlyZWN0aW9uW1wiUlRMXCJdID0gXCJydGxcIjtcbn0pKE5iTGF5b3V0RGlyZWN0aW9uIHx8IChOYkxheW91dERpcmVjdGlvbiA9IHt9KSk7XG5cbi8qKlxuICogTGF5b3V0IGRpcmVjdGlvbiBzZXR0aW5nIGluamVjdGlvbiB0b2tlbi5cbiAqICovXG5jb25zdCBOQl9MQVlPVVRfRElSRUNUSU9OID0gbmV3IEluamVjdGlvblRva2VuKCdMYXlvdXQgZGlyZWN0aW9uJyk7XG4vKipcbiAqIExheW91dCBEaXJlY3Rpb24gU2VydmljZS5cbiAqIEFsbG93cyB0byBzZXQgb3IgZ2V0IGxheW91dCBkaXJlY3Rpb24gYW5kIGxpc3RlbiB0byBpdHMgY2hhbmdlc1xuICovXG5jbGFzcyBOYkxheW91dERpcmVjdGlvblNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGRpcmVjdGlvbiA9IE5iTGF5b3V0RGlyZWN0aW9uLkxUUikge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcbiAgICAgICAgdGhpcy4kZGlyZWN0aW9uQ2hhbmdlID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4gICAgICAgIHRoaXMuc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBsYXlvdXQgZGlyZWN0aW9uIHNldCB0byBsZWZ0IHRvIHJpZ2h0LlxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4uXG4gICAgICogKi9cbiAgICBpc0x0cigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBOYkxheW91dERpcmVjdGlvbi5MVFI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBsYXlvdXQgZGlyZWN0aW9uIHNldCB0byByaWdodCB0byBsZWZ0LlxuICAgICAqIEByZXR1cm5zIGJvb2xlYW4uXG4gICAgICogKi9cbiAgICBpc1J0bCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBOYkxheW91dERpcmVjdGlvbi5SVEw7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgY3VycmVudCBsYXlvdXQgZGlyZWN0aW9uLlxuICAgICAqIEByZXR1cm5zIE5iTGF5b3V0RGlyZWN0aW9uLlxuICAgICAqICovXG4gICAgZ2V0RGlyZWN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgbGF5b3V0IGRpcmVjdGlvblxuICAgICAqIEBwYXJhbSB7TmJMYXlvdXREaXJlY3Rpb259IGRpcmVjdGlvblxuICAgICAqL1xuICAgIHNldERpcmVjdGlvbihkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gICAgICAgIHRoaXMuJGRpcmVjdGlvbkNoYW5nZS5uZXh0KGRpcmVjdGlvbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXJlZCB3aGVuIGRpcmVjdGlvbiB3YXMgY2hhbmdlZC5cbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPE5iTGF5b3V0RGlyZWN0aW9uPi5cbiAgICAgKi9cbiAgICBvbkRpcmVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuJGRpcmVjdGlvbkNoYW5nZS5waXBlKHNoYXJlKCkpO1xuICAgIH1cbn1cbk5iTGF5b3V0RGlyZWN0aW9uU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0xBWU9VVF9ESVJFQ1RJT04sXSB9XSB9XG5dO1xuXG4vKipcbiAqIExheW91dCBzY3JvbGwgc2VydmljZS4gUHJvdmlkZXMgaW5mb3JtYXRpb24gYWJvdXQgY3VycmVudCBzY3JvbGwgcG9zaXRpb24sXG4gKiBhcyB3ZWxsIGFzIG1ldGhvZHMgdG8gdXBkYXRlIHBvc2l0aW9uIG9mIHRoZSBzY3JvbGwuXG4gKlxuICogVGhlIHJlYXNvbiB3ZSBhZGRlZCB0aGlzIHNlcnZpY2UgaXMgdGhhdCBpbiBOZWJ1bGFyIHRoZXJlIGFyZSB0d28gc2Nyb2xsIG1vZGVzOlxuICogLSB0aGUgZGVmYXVsdCBtb2RlIHdoZW4gc2Nyb2xsIGlzIG9uIGJvZHlcbiAqIC0gYW5kIHRoZSBgd2l0aFNjcm9sbGAgbW9kZSwgd2hlbiBzY3JvbGwgaXMgcmVtb3ZlZCBmcm9tIHRoZSBib2R5IGFuZCBtb3ZlZCB0byBhbiBlbGVtZW50IGluc2lkZSBvZiB0aGVcbiAqIGBuYi1sYXlvdXRgIGNvbXBvbmVudFxuICovXG5jbGFzcyBOYkxheW91dFNjcm9sbFNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uUmVxJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMubWFudWFsU2Nyb2xsJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2Nyb2xsYWJsZSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNjcm9sbCBwb3NpdGlvblxuICAgICAqXG4gICAgICogQHJldHVybnMge09ic2VydmFibGU8TmJTY3JvbGxQb3NpdGlvbj59XG4gICAgICovXG4gICAgZ2V0UG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgT2JzZXJ2YWJsZSgob2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgICAgIGxpc3RlbmVyLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFBvc2l0aW9uUmVxJC5uZXh0KHsgbGlzdGVuZXIgfSk7XG4gICAgICAgICAgICByZXR1cm4gKCkgPT4gbGlzdGVuZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgc2Nyb2xsIHBvc2l0aW9uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAgICovXG4gICAgc2Nyb2xsVG8oeCA9IG51bGwsIHkgPSBudWxsKSB7XG4gICAgICAgIHRoaXMubWFudWFsU2Nyb2xsJC5uZXh0KHsgeCwgeSB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmVhbSBvZiBzY3JvbGwgZXZlbnRzXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTxhbnk+fVxuICAgICAqL1xuICAgIG9uU2Nyb2xsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGwkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZTxOYlNjcm9sbFBvc2l0aW9uPi5cbiAgICAgKi9cbiAgICBvbk1hbnVhbFNjcm9sbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubWFudWFsU2Nyb2xsJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEByZXR1cm5zIHtTdWJqZWN0PGFueT59XG4gICAgICovXG4gICAgb25HZXRQb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2Nyb2xsUG9zaXRpb25SZXEkO1xuICAgIH1cbiAgICBvblNjcm9sbGFibGVDaGFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNjcm9sbGFibGUkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICogQHBhcmFtIHthbnl9IGV2ZW50XG4gICAgICovXG4gICAgZmlyZVNjcm9sbENoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLnNjcm9sbCQubmV4dChldmVudCk7XG4gICAgfVxuICAgIHNjcm9sbGFibGUoc2Nyb2xsYWJsZSkge1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUkLm5leHQoc2Nyb2xsYWJsZSk7XG4gICAgfVxufVxuTmJMYXlvdXRTY3JvbGxTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5cbi8qKlxuICogU2ltcGxlIGhlbHBlciBzZXJ2aWNlIHRvIHJldHVybiBMYXlvdXQgZGltZW5zaW9uc1xuICogRGVwZW5kaW5nIG9mIGN1cnJlbnQgTGF5b3V0IHNjcm9sbCBtb2RlIChkZWZhdWx0IG9yIGB3aXRoU2Nyb2xsYCB3aGVuIHNjcm9sbCBpcyBtb3ZlZCB0byBhbiBlbGVtZW50XG4gKiBpbnNpZGUgb2YgdGhlIGxheW91dCkgY29ycmVzcG9uZGluZyBkaW1lbnNpb25zIHdpbGwgYmUgcmV0dXJucyAgLSBvZiBgZG9jdW1lbnRFbGVtZW50YCBpbiBmaXJzdCBjYXNlIGFuZFxuICogYC5zY3JvbGxhYmxlLWNvbnRhaW5lcmAgaW4gdGhlIHNlY29uZC5cbiAqL1xuY2xhc3MgTmJMYXlvdXRSdWxlclNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvbnRlbnREaW1lbnNpb25zUmVxJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRlbnQgZGltZW5zaW9uc1xuICAgICAqIEByZXR1cm5zIHtPYnNlcnZhYmxlPE5iTGF5b3V0RGltZW5zaW9ucz59XG4gICAgICovXG4gICAgZ2V0RGltZW5zaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlKChvYnNlcnZlcikgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGlzdGVuZXIgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAgICAgbGlzdGVuZXIuc3Vic2NyaWJlKG9ic2VydmVyKTtcbiAgICAgICAgICAgIHRoaXMuY29udGVudERpbWVuc2lvbnNSZXEkLm5leHQoeyBsaXN0ZW5lciB9KTtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiBsaXN0ZW5lci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKiBAcmV0dXJucyB7U3ViamVjdDxhbnk+fVxuICAgICAqL1xuICAgIG9uR2V0RGltZW5zaW9ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudERpbWVuc2lvbnNSZXEkO1xuICAgIH1cbn1cbk5iTGF5b3V0UnVsZXJTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iU2hhcmVkTW9kdWxlIHtcbn1cbk5iU2hhcmVkTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcHJvYmFibHkgd2UgZG9uJ3QgbmVlZCBGb3Jtc01vZHVsZSBpbiBTaGFyZWRNb2R1bGVcbiAgICAgICAgICAgICAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIFJvdXRlck1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogT3ZlcnJpZGVzIGFuZ3VsYXIgY2RrIGZvY3VzIHRyYXAgdG8ga2VlcCByZXN0b3JlIGZ1bmN0aW9uYWxpdHkgaW5zaWRlIHRyYXAuXG4gKiAqL1xuY2xhc3MgTmJGb2N1c1RyYXAgZXh0ZW5kcyBGb2N1c1RyYXAge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnQsIGNoZWNrZXIsIG5nWm9uZSwgZG9jdW1lbnQsIGRlZmVyQW5jaG9ycykge1xuICAgICAgICBzdXBlcihlbGVtZW50LCBjaGVja2VyLCBuZ1pvbmUsIGRvY3VtZW50LCBkZWZlckFuY2hvcnMpO1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgICAgICB0aGlzLmNoZWNrZXIgPSBjaGVja2VyO1xuICAgICAgICB0aGlzLm5nWm9uZSA9IG5nWm9uZTtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLnNhdmVQcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICB9XG4gICAgcmVzdG9yZUZvY3VzKCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgYmx1clByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5wcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQuYmx1cigpO1xuICAgIH1cbiAgICBzYXZlUHJldmlvdXNseUZvY3VzZWRFbGVtZW50KCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCA9IHRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcbiAgICB9XG59XG5jbGFzcyBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlIGV4dGVuZHMgRm9jdXNUcmFwRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IoY2hlY2tlciwgbmdab25lLCBkb2N1bWVudCkge1xuICAgICAgICBzdXBlcihjaGVja2VyLCBuZ1pvbmUsIGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5jaGVja2VyID0gY2hlY2tlcjtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG4gICAgY3JlYXRlKGVsZW1lbnQsIGRlZmVyQ2FwdHVyZUVsZW1lbnRzKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmJGb2N1c1RyYXAoZWxlbWVudCwgdGhpcy5jaGVja2VyLCB0aGlzLm5nWm9uZSwgdGhpcy5kb2N1bWVudCwgZGVmZXJDYXB0dXJlRWxlbWVudHMpO1xuICAgIH1cbn1cbk5iRm9jdXNUcmFwRmFjdG9yeVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iRm9jdXNUcmFwRmFjdG9yeVNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBJbnRlcmFjdGl2aXR5Q2hlY2tlciB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RPQ1VNRU5ULF0gfV0gfVxuXTtcblxuY2xhc3MgTmJGb2N1c0tleU1hbmFnZXIgZXh0ZW5kcyBGb2N1c0tleU1hbmFnZXIge1xufVxuY2xhc3MgTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSB7XG4gICAgY3JlYXRlKGl0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmJGb2N1c0tleU1hbmFnZXIoaXRlbXMpO1xuICAgIH1cbn1cblxuY2xhc3MgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlciBleHRlbmRzIEFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyIHtcbn1cbmNsYXNzIE5iQWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5U2VydmljZSB7XG4gICAgY3JlYXRlKGl0ZW1zKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlcihpdGVtcyk7XG4gICAgfVxufVxudmFyIE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlO1xuKGZ1bmN0aW9uIChOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZSkge1xuICAgIE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlW05iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlW1wiUkVTRVRfQUNUSVZFXCJdID0gLTFdID0gXCJSRVNFVF9BQ1RJVkVcIjtcbiAgICBOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZVtOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZVtcIkZJUlNUX0FDVElWRVwiXSA9IDBdID0gXCJGSVJTVF9BQ1RJVkVcIjtcbn0pKE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlIHx8IChOYktleU1hbmFnZXJBY3RpdmVJdGVtTW9kZSA9IHt9KSk7XG5cbmNsYXNzIE5iRm9jdXNNb25pdG9yIGV4dGVuZHMgRm9jdXNNb25pdG9yIHtcbn1cbk5iRm9jdXNNb25pdG9yLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5jbGFzcyBOYkExMXlNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iQTExeU1vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iRm9jdXNUcmFwRmFjdG9yeVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSxcbiAgICAgICAgICAgICAgICBOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYkZvY3VzTW9uaXRvciwgdXNlQ2xhc3M6IEZvY3VzTW9uaXRvciB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5OYkExMXlNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe30sXSB9XG5dO1xuXG5jbGFzcyBOYlBvcnRhbERpcmVjdGl2ZSBleHRlbmRzIENka1BvcnRhbCB7XG59XG5OYlBvcnRhbERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1tuYlBvcnRhbF0nIH0sXSB9XG5dO1xuY2xhc3MgTmJQb3J0YWxPdXRsZXREaXJlY3RpdmUgZXh0ZW5kcyBDZGtQb3J0YWxPdXRsZXQge1xufVxuTmJQb3J0YWxPdXRsZXREaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbbmJQb3J0YWxPdXRsZXRdJyB9LF0gfVxuXTtcbmNsYXNzIE5iQ29tcG9uZW50UG9ydGFsIGV4dGVuZHMgQ29tcG9uZW50UG9ydGFsIHtcbn1cbmNsYXNzIE5iT3ZlcmxheSBleHRlbmRzIE92ZXJsYXkge1xufVxuTmJPdmVybGF5LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5jbGFzcyBOYk92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIgZXh0ZW5kcyBPdmVybGF5UG9zaXRpb25CdWlsZGVyIHtcbn1cbk5iT3ZlcmxheVBvc2l0aW9uQnVpbGRlci5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuY2xhc3MgTmJUZW1wbGF0ZVBvcnRhbCBleHRlbmRzIFRlbXBsYXRlUG9ydGFsIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgdmlld0NvbnRhaW5lclJlZiwgY29udGV4dCkge1xuICAgICAgICBzdXBlcih0ZW1wbGF0ZSwgdmlld0NvbnRhaW5lclJlZiwgY29udGV4dCk7XG4gICAgfVxufVxuY2xhc3MgTmJPdmVybGF5Q29udGFpbmVyIGV4dGVuZHMgT3ZlcmxheUNvbnRhaW5lciB7XG59XG5OYk92ZXJsYXlDb250YWluZXIuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbmNsYXNzIE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5IGV4dGVuZHMgRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5IHtcbn1cbmNsYXNzIE5iUG9ydGFsSW5qZWN0b3IgZXh0ZW5kcyBQb3J0YWxJbmplY3RvciB7XG59XG5jb25zdCBDREtfTU9EVUxFUyA9IFtPdmVybGF5TW9kdWxlLCBQb3J0YWxNb2R1bGVdO1xuLyoqXG4gKiBUaGlzIG1vZHVsZSBoZWxwcyB1cyB0byBrZWVwIGFsbCBhbmd1bGFyL2NkayBkZXBzIGluc2lkZSBvdXIgY2RrIG1vZHVsZSB2aWEgcHJvdmlkaW5nIGFsaWFzZXMuXG4gKiBBcHByb2FjaCB3aWxsIGhlbHAgdXMgbW92ZSBjZGsgaW4gc2VwYXJhdGUgbnBtIHBhY2thZ2UgYW5kIHJlZmFjdG9yIG5lYnVsYXIvdGhlbWUgY29kZS5cbiAqICovXG5jbGFzcyBOYkNka01hcHBpbmdNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iQ2RrTWFwcGluZ01vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iT3ZlcmxheSxcbiAgICAgICAgICAgICAgICBOYk92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbk5iQ2RrTWFwcGluZ01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogWy4uLkNES19NT0RVTEVTXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLkNES19NT0RVTEVTLFxuICAgICAgICAgICAgICAgICAgICBOYlBvcnRhbERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgTmJQb3J0YWxPdXRsZXREaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYlBvcnRhbERpcmVjdGl2ZSwgTmJQb3J0YWxPdXRsZXREaXJlY3RpdmVdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbmNsYXNzIE5iUGxhdGZvcm0gZXh0ZW5kcyBQbGF0Zm9ybSB7XG59XG5OYlBsYXRmb3JtLsm1cHJvdiA9IMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgZmFjdG9yeTogZnVuY3Rpb24gTmJQbGF0Zm9ybV9GYWN0b3J5KCkgeyByZXR1cm4gbmV3IFBsYXRmb3JtKMm1ybVpbmplY3QoUExBVEZPUk1fSUQpKTsgfSwgdG9rZW46IE5iUGxhdGZvcm0sIHByb3ZpZGVkSW46IFwicm9vdFwiIH0pO1xuTmJQbGF0Zm9ybS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBwcm92aWRlZEluOiAncm9vdCcsXG4gICAgICAgICAgICAgICAgdXNlQ2xhc3M6IFBsYXRmb3JtLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogUHJvdmlkZXMgbmItbGF5b3V0IGFzIG92ZXJsYXkgY29udGFpbmVyLlxuICogQ29udGFpbmVyIGhhcyB0byBiZSBjbGVhcmVkIHdoZW4gbGF5b3V0IGRlc3Ryb3lzLlxuICogQW5vdGhlciB3YXkgcHJldmlvdXMgdmVyc2lvbiBvZiB0aGUgY29udGFpbmVyIHdpbGwgYmUgdXNlZFxuICogYnV0IGl0IGlzbid0IGluc2VydGVkIGluIERPTSBhbmQgZXhpc3RzIGluIG1lbW9yeSBvbmx5LlxuICogVGhpcyBjYXNlIGltcG9ydGFudCBvbmx5IGlmIHlvdSBzd2l0Y2ggYmV0d2VlbiBtdWx0aXBsZSBsYXlvdXRzLlxuICogKi9cbmNsYXNzIE5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXIgZXh0ZW5kcyBOYk92ZXJsYXlDb250YWluZXIge1xuICAgIHNldENvbnRhaW5lcihjb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgfVxuICAgIGNsZWFyQ29udGFpbmVyKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lckVsZW1lbnQgPSBudWxsO1xuICAgIH1cbiAgICBfY3JlYXRlQ29udGFpbmVyKCkge1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLl9kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2Nkay1vdmVybGF5LWNvbnRhaW5lcicpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICB0aGlzLl9jb250YWluZXJFbGVtZW50ID0gY29udGFpbmVyO1xuICAgIH1cbn1cbk5iT3ZlcmxheUNvbnRhaW5lckFkYXB0ZXIuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcblxuY2xhc3MgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciBleHRlbmRzIFZpZXdwb3J0UnVsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBsYXRmb3JtLCBuZ1pvbmUsIHJ1bGVyLCBzY3JvbGwsIGRvY3VtZW50KSB7XG4gICAgICAgIHN1cGVyKHBsYXRmb3JtLCBuZ1pvbmUsIGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5ydWxlciA9IHJ1bGVyO1xuICAgICAgICB0aGlzLnNjcm9sbCA9IHNjcm9sbDtcbiAgICB9XG4gICAgZ2V0Vmlld3BvcnRTaXplKCkge1xuICAgICAgICBsZXQgcmVzO1xuICAgICAgICAvKlxuICAgICAgICAqIGdldERpbWVuc2lvbnMgY2FsbCBpcyByZWFsbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgICAgICAqIEFuZCB3ZSBoYXZlIHRvIGNvbmZvcm0gd2l0aCB0aGUgaW50ZXJmYWNlIG9mIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICAgICAgICAqICovXG4gICAgICAgIHRoaXMucnVsZXIuZ2V0RGltZW5zaW9ucygpXG4gICAgICAgICAgICAucGlwZShtYXAoZGltZW5zaW9ucyA9PiAoeyB3aWR0aDogZGltZW5zaW9ucy5jbGllbnRXaWR0aCwgaGVpZ2h0OiBkaW1lbnNpb25zLmNsaWVudEhlaWdodCB9KSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHJlY3QgPT4gcmVzID0gcmVjdCk7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIGdldFZpZXdwb3J0U2Nyb2xsUG9zaXRpb24oKSB7XG4gICAgICAgIGxldCByZXM7XG4gICAgICAgIC8qXG4gICAgICAgICogZ2V0UG9zaXRpb24gY2FsbCBpcyByZWFsbHkgc3luY2hyb25vdXMgb3BlcmF0aW9uLlxuICAgICAgICAqIEFuZCB3ZSBoYXZlIHRvIGNvbmZvcm0gd2l0aCB0aGUgaW50ZXJmYWNlIG9mIHRoZSBvcmlnaW5hbCBzZXJ2aWNlLlxuICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2Nyb2xsLmdldFBvc2l0aW9uKClcbiAgICAgICAgICAgIC5waXBlKG1hcCgocG9zaXRpb24pID0+ICh7IHRvcDogcG9zaXRpb24ueSwgbGVmdDogcG9zaXRpb24ueCB9KSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHBvc2l0aW9uID0+IHJlcyA9IHBvc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG59XG5OYlZpZXdwb3J0UnVsZXJBZGFwdGVyLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYlZpZXdwb3J0UnVsZXJBZGFwdGVyLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJQbGF0Zm9ybSB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYkxheW91dFJ1bGVyU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJMYXlvdXRTY3JvbGxTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RPQ1VNRU5ULF0gfV0gfVxuXTtcblxudmFyIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uO1xuKGZ1bmN0aW9uIChOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbikge1xuICAgIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uW1wiVE9QX1NUQVJUXCJdID0gXCJ0b3Atc3RhcnRcIjtcbiAgICBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbltcIlRPUF9FTkRcIl0gPSBcInRvcC1lbmRcIjtcbiAgICBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbltcIkJPVFRPTV9TVEFSVFwiXSA9IFwiYm90dG9tLXN0YXJ0XCI7XG4gICAgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb25bXCJCT1RUT01fRU5EXCJdID0gXCJib3R0b20tZW5kXCI7XG59KShOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbiB8fCAoTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24gPSB7fSkpO1xudmFyIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbjtcbihmdW5jdGlvbiAoTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uKSB7XG4gICAgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uW1wiVE9QX1JJR0hUXCJdID0gXCJ0b3AtcmlnaHRcIjtcbiAgICBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb25bXCJUT1BfTEVGVFwiXSA9IFwidG9wLWxlZnRcIjtcbiAgICBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb25bXCJCT1RUT01fUklHSFRcIl0gPSBcImJvdHRvbS1yaWdodFwiO1xuICAgIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbltcIkJPVFRPTV9MRUZUXCJdID0gXCJib3R0b20tbGVmdFwiO1xufSkoTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uIHx8IChOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24gPSB7fSkpO1xuY2xhc3MgTmJQb3NpdGlvbkhlbHBlciB7XG4gICAgY29uc3RydWN0b3IobGF5b3V0RGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uID0gbGF5b3V0RGlyZWN0aW9uO1xuICAgIH1cbiAgICB0b0xvZ2ljYWxQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbikuaW5jbHVkZXMocG9zaXRpb24pKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9zaXRpb247XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubGF5b3V0RGlyZWN0aW9uLmlzTHRyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvTG9naWNhbFBvc2l0aW9uV2hlbkx0cihwb3NpdGlvbik7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b0xvZ2ljYWxQb3NpdGlvbldoZW5SdGwocG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvUGh5c2ljYWxQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAoT2JqZWN0LnZhbHVlcyhOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24pLmluY2x1ZGVzKHBvc2l0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmxheW91dERpcmVjdGlvbi5pc0x0cigpKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy50b1BoeXNpY2FsUG9zaXRpb25XaGVuTHRyKHBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRvUGh5c2ljYWxQb3NpdGlvbldoZW5SdGwocG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlzVG9wUG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgbG9naWNhbFBvc2l0aW9uID0gdGhpcy50b0xvZ2ljYWxQb3NpdGlvbihwb3NpdGlvbik7XG4gICAgICAgIHJldHVybiBsb2dpY2FsUG9zaXRpb24gPT09IE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkRcbiAgICAgICAgICAgIHx8IGxvZ2ljYWxQb3NpdGlvbiA9PT0gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUO1xuICAgIH1cbiAgICBpc1JpZ2h0UG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgcGh5c2ljYWxQb3NpdGlvbiA9IHRoaXMudG9QaHlzaWNhbFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgcmV0dXJuIHBoeXNpY2FsUG9zaXRpb24gPT09IE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfUklHSFRcbiAgICAgICAgICAgIHx8IHBoeXNpY2FsUG9zaXRpb24gPT09IE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5CT1RUT01fUklHSFQ7XG4gICAgfVxuICAgIHRvTG9naWNhbFBvc2l0aW9uV2hlbkx0cihwb3NpdGlvbikge1xuICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfUklHSFQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9FTkQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfTEVGVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX1JJR0hUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fRU5EO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX0xFRlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b0xvZ2ljYWxQb3NpdGlvbldoZW5SdGwocG9zaXRpb24pIHtcbiAgICAgICAgc3dpdGNoIChwb3NpdGlvbikge1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX1JJR0hUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfU1RBUlQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5UT1BfTEVGVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX0VORDtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9SSUdIVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uQk9UVE9NX1NUQVJUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uQk9UVE9NX0xFRlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9FTkQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdG9QaHlzaWNhbFBvc2l0aW9uV2hlbkx0cihwb3NpdGlvbikge1xuICAgICAgICBzd2l0Y2ggKHBvc2l0aW9uKSB7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLlRPUF9TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLlRPUF9MRUZUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX1JJR0hUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fU1RBUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE5iR2xvYmFsUGh5c2ljYWxQb3NpdGlvbi5CT1RUT01fTEVGVDtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uQk9UVE9NX0VORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9SSUdIVDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b1BoeXNpY2FsUG9zaXRpb25XaGVuUnRsKHBvc2l0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX1JJR0hUO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5UT1BfRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24uVE9QX0xFRlQ7XG4gICAgICAgICAgICBjYXNlIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLkJPVFRPTV9TVEFSVDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9SSUdIVDtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uQk9UVE9NX0VORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTmJHbG9iYWxQaHlzaWNhbFBvc2l0aW9uLkJPVFRPTV9MRUZUO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJQb3NpdGlvbkhlbHBlci5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJQb3NpdGlvbkhlbHBlci5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSB9XG5dO1xuXG52YXIgTmJBZGp1c3RtZW50O1xuKGZ1bmN0aW9uIChOYkFkanVzdG1lbnQpIHtcbiAgICBOYkFkanVzdG1lbnRbXCJOT09QXCJdID0gXCJub29wXCI7XG4gICAgTmJBZGp1c3RtZW50W1wiQ0xPQ0tXSVNFXCJdID0gXCJjbG9ja3dpc2VcIjtcbiAgICBOYkFkanVzdG1lbnRbXCJDT1VOVEVSQ0xPQ0tXSVNFXCJdID0gXCJjb3VudGVyY2xvY2t3aXNlXCI7XG4gICAgTmJBZGp1c3RtZW50W1wiVkVSVElDQUxcIl0gPSBcInZlcnRpY2FsXCI7XG4gICAgTmJBZGp1c3RtZW50W1wiSE9SSVpPTlRBTFwiXSA9IFwiaG9yaXpvbnRhbFwiO1xufSkoTmJBZGp1c3RtZW50IHx8IChOYkFkanVzdG1lbnQgPSB7fSkpO1xudmFyIE5iUG9zaXRpb247XG4oZnVuY3Rpb24gKE5iUG9zaXRpb24pIHtcbiAgICBOYlBvc2l0aW9uW1wiVE9QXCJdID0gXCJ0b3BcIjtcbiAgICBOYlBvc2l0aW9uW1wiQk9UVE9NXCJdID0gXCJib3R0b21cIjtcbiAgICBOYlBvc2l0aW9uW1wiTEVGVFwiXSA9IFwibGVmdFwiO1xuICAgIE5iUG9zaXRpb25bXCJSSUdIVFwiXSA9IFwicmlnaHRcIjtcbiAgICBOYlBvc2l0aW9uW1wiU1RBUlRcIl0gPSBcInN0YXJ0XCI7XG4gICAgTmJQb3NpdGlvbltcIkVORFwiXSA9IFwiZW5kXCI7XG4gICAgTmJQb3NpdGlvbltcIlRPUF9FTkRcIl0gPSBcInRvcC1lbmRcIjtcbiAgICBOYlBvc2l0aW9uW1wiVE9QX1NUQVJUXCJdID0gXCJ0b3Atc3RhcnRcIjtcbiAgICBOYlBvc2l0aW9uW1wiQk9UVE9NX0VORFwiXSA9IFwiYm90dG9tLWVuZFwiO1xuICAgIE5iUG9zaXRpb25bXCJCT1RUT01fU1RBUlRcIl0gPSBcImJvdHRvbS1zdGFydFwiO1xuICAgIE5iUG9zaXRpb25bXCJFTkRfVE9QXCJdID0gXCJlbmQtdG9wXCI7XG4gICAgTmJQb3NpdGlvbltcIkVORF9CT1RUT01cIl0gPSBcImVuZC1ib3R0b21cIjtcbiAgICBOYlBvc2l0aW9uW1wiU1RBUlRfVE9QXCJdID0gXCJzdGFydC10b3BcIjtcbiAgICBOYlBvc2l0aW9uW1wiU1RBUlRfQk9UVE9NXCJdID0gXCJzdGFydC1ib3R0b21cIjtcbn0pKE5iUG9zaXRpb24gfHwgKE5iUG9zaXRpb24gPSB7fSkpO1xuY29uc3QgUE9TSVRJT05TID0ge1xuICAgIFtOYlBvc2l0aW9uLlJJR0hUXShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2VuZCcsIG9yaWdpblk6ICdjZW50ZXInLCBvdmVybGF5WDogJ3N0YXJ0Jywgb3ZlcmxheVk6ICdjZW50ZXInLCBvZmZzZXRYOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIFtOYlBvc2l0aW9uLkJPVFRPTV0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdjZW50ZXInLCBvcmlnaW5ZOiAnYm90dG9tJywgb3ZlcmxheVg6ICdjZW50ZXInLCBvdmVybGF5WTogJ3RvcCcsIG9mZnNldFk6IG9mZnNldCB9O1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uTEVGVF0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdzdGFydCcsIG9yaWdpblk6ICdjZW50ZXInLCBvdmVybGF5WDogJ2VuZCcsIG92ZXJsYXlZOiAnY2VudGVyJywgb2Zmc2V0WDogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uVE9QXShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2NlbnRlcicsIG9yaWdpblk6ICd0b3AnLCBvdmVybGF5WDogJ2NlbnRlcicsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WTogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uU1RBUlRdKG9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpc1tOYlBvc2l0aW9uLkxFRlRdKG9mZnNldCk7XG4gICAgfSxcbiAgICBbTmJQb3NpdGlvbi5FTkRdKG9mZnNldCkge1xuICAgICAgICByZXR1cm4gdGhpc1tOYlBvc2l0aW9uLlJJR0hUXShvZmZzZXQpO1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uRU5EX1RPUF0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdlbmQnLCBvcmlnaW5ZOiAnYm90dG9tJywgb3ZlcmxheVg6ICdzdGFydCcsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WDogb2Zmc2V0IH07XG4gICAgfSxcbiAgICBbTmJQb3NpdGlvbi5FTkRfQk9UVE9NXShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ2VuZCcsIG9yaWdpblk6ICd0b3AnLCBvdmVybGF5WDogJ3N0YXJ0Jywgb3ZlcmxheVk6ICd0b3AnLCBvZmZzZXRYOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIFtOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVF0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdlbmQnLCBvcmlnaW5ZOiAnYm90dG9tJywgb3ZlcmxheVg6ICdlbmQnLCBvdmVybGF5WTogJ3RvcCcsIG9mZnNldFk6IG9mZnNldCB9O1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uQk9UVE9NX0VORF0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdzdGFydCcsIG9yaWdpblk6ICdib3R0b20nLCBvdmVybGF5WDogJ3N0YXJ0Jywgb3ZlcmxheVk6ICd0b3AnLCBvZmZzZXRZOiBvZmZzZXQgfTtcbiAgICB9LFxuICAgIFtOYlBvc2l0aW9uLlNUQVJUX1RPUF0ob2Zmc2V0KSB7XG4gICAgICAgIHJldHVybiB7IG9yaWdpblg6ICdzdGFydCcsIG9yaWdpblk6ICdib3R0b20nLCBvdmVybGF5WDogJ2VuZCcsIG92ZXJsYXlZOiAnYm90dG9tJywgb2Zmc2V0WDogLW9mZnNldCB9O1xuICAgIH0sXG4gICAgW05iUG9zaXRpb24uU1RBUlRfQk9UVE9NXShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ3N0YXJ0Jywgb3JpZ2luWTogJ3RvcCcsIG92ZXJsYXlYOiAnZW5kJywgb3ZlcmxheVk6ICd0b3AnLCBvZmZzZXRYOiAtb2Zmc2V0IH07XG4gICAgfSxcbiAgICBbTmJQb3NpdGlvbi5UT1BfU1RBUlRdKG9mZnNldCkge1xuICAgICAgICByZXR1cm4geyBvcmlnaW5YOiAnZW5kJywgb3JpZ2luWTogJ3RvcCcsIG92ZXJsYXlYOiAnZW5kJywgb3ZlcmxheVk6ICdib3R0b20nLCBvZmZzZXRZOiAtb2Zmc2V0IH07XG4gICAgfSxcbiAgICBbTmJQb3NpdGlvbi5UT1BfRU5EXShvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHsgb3JpZ2luWDogJ3N0YXJ0Jywgb3JpZ2luWTogJ3RvcCcsIG92ZXJsYXlYOiAnc3RhcnQnLCBvdmVybGF5WTogJ2JvdHRvbScsIG9mZnNldFk6IC1vZmZzZXQgfTtcbiAgICB9LFxufTtcbmNvbnN0IENPVU5URVJfQ0xPQ0tXSVNFX1BPU0lUSU9OUyA9IFtcbiAgICBOYlBvc2l0aW9uLlRPUCxcbiAgICBOYlBvc2l0aW9uLlRPUF9FTkQsXG4gICAgTmJQb3NpdGlvbi5UT1BfU1RBUlQsXG4gICAgTmJQb3NpdGlvbi5TVEFSVCxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX1RPUCxcbiAgICBOYlBvc2l0aW9uLlNUQVJUX0JPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTSxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVCxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkQsXG4gICAgTmJQb3NpdGlvbi5FTkRfQk9UVE9NLFxuICAgIE5iUG9zaXRpb24uRU5EX1RPUCxcbl07XG5jb25zdCBDTE9DS1dJU0VfUE9TSVRJT05TID0gW1xuICAgIE5iUG9zaXRpb24uVE9QLFxuICAgIE5iUG9zaXRpb24uVE9QX1NUQVJULFxuICAgIE5iUG9zaXRpb24uVE9QX0VORCxcbiAgICBOYlBvc2l0aW9uLkVORCxcbiAgICBOYlBvc2l0aW9uLkVORF9UT1AsXG4gICAgTmJQb3NpdGlvbi5FTkRfQk9UVE9NLFxuICAgIE5iUG9zaXRpb24uQk9UVE9NLFxuICAgIE5iUG9zaXRpb24uQk9UVE9NX0VORCxcbiAgICBOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVCxcbiAgICBOYlBvc2l0aW9uLlNUQVJULFxuICAgIE5iUG9zaXRpb24uU1RBUlRfQk9UVE9NLFxuICAgIE5iUG9zaXRpb24uU1RBUlRfVE9QLFxuXTtcbmNvbnN0IFZFUlRJQ0FMX1BPU0lUSU9OUyA9IFtOYlBvc2l0aW9uLkJPVFRPTSwgTmJQb3NpdGlvbi5UT1BdO1xuY29uc3QgSE9SSVpPTlRBTF9QT1NJVElPTlMgPSBbTmJQb3NpdGlvbi5TVEFSVCwgTmJQb3NpdGlvbi5FTkRdO1xuZnVuY3Rpb24gY29tcGFyZVBvc2l0aW9ucyhwMSwgcDIpIHtcbiAgICByZXR1cm4gcDEub3JpZ2luWCA9PT0gcDIub3JpZ2luWFxuICAgICAgICAmJiBwMS5vcmlnaW5ZID09PSBwMi5vcmlnaW5ZXG4gICAgICAgICYmIHAxLm92ZXJsYXlYID09PSBwMi5vdmVybGF5WFxuICAgICAgICAmJiBwMS5vdmVybGF5WSA9PT0gcDIub3ZlcmxheVk7XG59XG4vKipcbiAqIFRoZSBtYWluIGlkZWEgb2YgdGhlIGFkanVzdGFibGUgY29ubmVjdGVkIHN0cmF0ZWd5IGlzIHRvIHByb3ZpZGUgcHJlZGVmaW5lZCBzZXQgb2YgcG9zaXRpb25zIGZvciB5b3VyIG92ZXJsYXkuXG4gKiBZb3UgaGF2ZSB0byBwcm92aWRlIGFkanVzdG1lbnQgYW5kIGFwcHJvcHJpYXRlIHN0cmF0ZWd5IHdpbGwgYmUgY2hvc2VuIGluIHJ1bnRpbWUuXG4gKiAqL1xuY2xhc3MgTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneSBleHRlbmRzIE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gMTU7XG4gICAgICAgIHRoaXMucG9zaXRpb25DaGFuZ2UgPSB0aGlzLnBvc2l0aW9uQ2hhbmdlcy5waXBlKG1hcCgocG9zaXRpb25DaGFuZ2UpID0+IHBvc2l0aW9uQ2hhbmdlLmNvbm5lY3Rpb25QYWlyKSwgbWFwKChjb25uZWN0aW9uUGFpcikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbGllZFBvc2l0aW9ucy5maW5kKCh7IGNvbm5lY3RlZFBvc2l0aW9uIH0pID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29tcGFyZVBvc2l0aW9ucyhjb25uZWN0ZWRQb3NpdGlvbiwgY29ubmVjdGlvblBhaXIpO1xuICAgICAgICAgICAgfSkua2V5O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGF0dGFjaChvdmVybGF5UmVmKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXZSBoYXZlIHRvIGFwcGx5IHBvc2l0aW9ucyBiZWZvcmUgYXR0YWNoIGJlY2F1c2Ugc3VwZXIuYXR0YWNoKCkgdmFsaWRhdGVzIHBvc2l0aW9ucyBhbmQgY3Jhc2hlcyBhcHBcbiAgICAgICAgICogaWYgbm8gcG9zaXRpb25zIHByb3ZpZGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmFwcGx5UG9zaXRpb25zKCk7XG4gICAgICAgIHN1cGVyLmF0dGFjaChvdmVybGF5UmVmKTtcbiAgICB9XG4gICAgYXBwbHkoKSB7XG4gICAgICAgIHRoaXMuYXBwbHlQb3NpdGlvbnMoKTtcbiAgICAgICAgc3VwZXIuYXBwbHkoKTtcbiAgICB9XG4gICAgcG9zaXRpb24ocG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFkanVzdG1lbnQoYWRqdXN0bWVudCkge1xuICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gYWRqdXN0bWVudDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG9mZnNldChvZmZzZXQpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gb2Zmc2V0O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgYXBwbHlQb3NpdGlvbnMoKSB7XG4gICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMuY3JlYXRlUG9zaXRpb25zKCk7XG4gICAgICAgIHRoaXMucGVyc2lzdENob3NlblBvc2l0aW9ucyhwb3NpdGlvbnMpO1xuICAgICAgICB0aGlzLndpdGhQb3NpdGlvbnModGhpcy5hcHBsaWVkUG9zaXRpb25zLm1hcCgoeyBjb25uZWN0ZWRQb3NpdGlvbiB9KSA9PiBjb25uZWN0ZWRQb3NpdGlvbikpO1xuICAgIH1cbiAgICBjcmVhdGVQb3NpdGlvbnMoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5fYWRqdXN0bWVudCkge1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuTk9PUDpcbiAgICAgICAgICAgICAgICByZXR1cm4gW3RoaXMuX3Bvc2l0aW9uXTtcbiAgICAgICAgICAgIGNhc2UgTmJBZGp1c3RtZW50LkNMT0NLV0lTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW9yZGVyUHJlZmVycmVkUG9zaXRpb25zKENMT0NLV0lTRV9QT1NJVElPTlMpO1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuQ09VTlRFUkNMT0NLV0lTRTpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW9yZGVyUHJlZmVycmVkUG9zaXRpb25zKENPVU5URVJfQ0xPQ0tXSVNFX1BPU0lUSU9OUyk7XG4gICAgICAgICAgICBjYXNlIE5iQWRqdXN0bWVudC5IT1JJWk9OVEFMOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlb3JkZXJQcmVmZXJyZWRQb3NpdGlvbnMoSE9SSVpPTlRBTF9QT1NJVElPTlMpO1xuICAgICAgICAgICAgY2FzZSBOYkFkanVzdG1lbnQuVkVSVElDQUw6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVvcmRlclByZWZlcnJlZFBvc2l0aW9ucyhWRVJUSUNBTF9QT1NJVElPTlMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHBlcnNpc3RDaG9zZW5Qb3NpdGlvbnMocG9zaXRpb25zKSB7XG4gICAgICAgIHRoaXMuYXBwbGllZFBvc2l0aW9ucyA9IHBvc2l0aW9ucy5tYXAocG9zaXRpb24gPT4gKHtcbiAgICAgICAgICAgIGtleTogcG9zaXRpb24sXG4gICAgICAgICAgICBjb25uZWN0ZWRQb3NpdGlvbjogUE9TSVRJT05TW3Bvc2l0aW9uXSh0aGlzLl9vZmZzZXQpLFxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHJlb3JkZXJQcmVmZXJyZWRQb3NpdGlvbnMocG9zaXRpb25zKSB7XG4gICAgICAgIC8vIFBoeXNpY2FsIHBvc2l0aW9ucyBzaG91bGQgYmUgbWFwcGVkIHRvIGxvZ2ljYWwgYXMgYWRqdXN0bWVudHMgdXNlIGxvZ2ljYWwgcG9zaXRpb25zLlxuICAgICAgICBjb25zdCBzdGFydFBvc2l0aW9uSW5kZXggPSBwb3NpdGlvbnMuaW5kZXhPZih0aGlzLm1hcFRvTG9naWNhbFBvc2l0aW9uKHRoaXMuX3Bvc2l0aW9uKSk7XG4gICAgICAgIGNvbnN0IGZpcnN0UGFydCA9IHBvc2l0aW9ucy5zbGljZShzdGFydFBvc2l0aW9uSW5kZXgpO1xuICAgICAgICBjb25zdCBzZWNvbmRQYXJ0ID0gcG9zaXRpb25zLnNsaWNlKDAsIHN0YXJ0UG9zaXRpb25JbmRleCk7XG4gICAgICAgIHJldHVybiBmaXJzdFBhcnQuY29uY2F0KHNlY29uZFBhcnQpO1xuICAgIH1cbiAgICBtYXBUb0xvZ2ljYWxQb3NpdGlvbihwb3NpdGlvbikge1xuICAgICAgICBpZiAocG9zaXRpb24gPT09IE5iUG9zaXRpb24uTEVGVCkge1xuICAgICAgICAgICAgcmV0dXJuIE5iUG9zaXRpb24uU1RBUlQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlJJR0hUKSB7XG4gICAgICAgICAgICByZXR1cm4gTmJQb3NpdGlvbi5FTkQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbn1cbmNsYXNzIE5iR2xvYmFsUG9zaXRpb25TdHJhdGVneSBleHRlbmRzIEdsb2JhbFBvc2l0aW9uU3RyYXRlZ3kge1xuICAgIHBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHN3aXRjaCAocG9zaXRpb24pIHtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX1NUQVJUOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRvcCgpLmxlZnQoKTtcbiAgICAgICAgICAgIGNhc2UgTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX0VORDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50b3AoKS5yaWdodCgpO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fU1RBUlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tKCkubGVmdCgpO1xuICAgICAgICAgICAgY2FzZSBOYkdsb2JhbExvZ2ljYWxQb3NpdGlvbi5CT1RUT01fRU5EOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJvdHRvbSgpLnJpZ2h0KCk7XG4gICAgICAgIH1cbiAgICB9XG59XG5jbGFzcyBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGRvY3VtZW50LCB2aWV3cG9ydFJ1bGVyLCBwbGF0Zm9ybSwgcG9zaXRpb25CdWlsZGVyLCBvdmVybGF5Q29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy52aWV3cG9ydFJ1bGVyID0gdmlld3BvcnRSdWxlcjtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHBsYXRmb3JtO1xuICAgICAgICB0aGlzLnBvc2l0aW9uQnVpbGRlciA9IHBvc2l0aW9uQnVpbGRlcjtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyID0gb3ZlcmxheUNvbnRhaW5lcjtcbiAgICB9XG4gICAgZ2xvYmFsKCkge1xuICAgICAgICByZXR1cm4gbmV3IE5iR2xvYmFsUG9zaXRpb25TdHJhdGVneSgpO1xuICAgIH1cbiAgICBjb25uZWN0ZWRUbyhlbGVtZW50UmVmKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneShlbGVtZW50UmVmLCB0aGlzLnZpZXdwb3J0UnVsZXIsIHRoaXMuZG9jdW1lbnQsIHRoaXMucGxhdGZvcm0sIHRoaXMub3ZlcmxheUNvbnRhaW5lcilcbiAgICAgICAgICAgIC53aXRoRmxleGlibGVEaW1lbnNpb25zKGZhbHNlKVxuICAgICAgICAgICAgLndpdGhQdXNoKGZhbHNlKTtcbiAgICB9XG59XG5OYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iUG9zaXRpb25CdWlsZGVyU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciB9LFxuICAgIHsgdHlwZTogTmJQbGF0Zm9ybSB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyIH0sXG4gICAgeyB0eXBlOiBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyIH1cbl07XG5cbmNsYXNzIE5iUG9zaXRpb25lZENvbnRhaW5lckNvbXBvbmVudCB7XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uVE9QO1xuICAgIH1cbiAgICBnZXQgdG9wU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLlRPUF9TVEFSVDtcbiAgICB9XG4gICAgZ2V0IHRvcEVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uVE9QX0VORDtcbiAgICB9XG4gICAgZ2V0IHJpZ2h0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5SSUdIVCB8fCB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkVORDtcbiAgICB9XG4gICAgZ2V0IGVuZFRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uRU5EX1RPUDtcbiAgICB9XG4gICAgZ2V0IGVuZEJvdHRvbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uRU5EX0JPVFRPTTtcbiAgICB9XG4gICAgZ2V0IGJvdHRvbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uQk9UVE9NO1xuICAgIH1cbiAgICBnZXQgYm90dG9tU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkJPVFRPTV9TVEFSVDtcbiAgICB9XG4gICAgZ2V0IGJvdHRvbUVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uQk9UVE9NX0VORDtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkxFRlQgfHwgdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5TVEFSVDtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0VG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5TVEFSVF9UT1A7XG4gICAgfVxuICAgIGdldCBzdGFydEJvdHRvbSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uU1RBUlRfQk9UVE9NO1xuICAgIH1cbn1cbk5iUG9zaXRpb25lZENvbnRhaW5lckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJ1xuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlBvc2l0aW9uZWRDb250YWluZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgcG9zaXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRvcDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS10b3AnLF0gfV0sXG4gICAgdG9wU3RhcnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5iLW92ZXJsYXktdG9wLXN0YXJ0JyxdIH1dLFxuICAgIHRvcEVuZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS10b3AtZW5kJyxdIH1dLFxuICAgIHJpZ2h0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5uYi1vdmVybGF5LXJpZ2h0JyxdIH1dLFxuICAgIGVuZFRvcDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS1lbmQtdG9wJyxdIH1dLFxuICAgIGVuZEJvdHRvbTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS1lbmQtYm90dG9tJyxdIH1dLFxuICAgIGJvdHRvbTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS1ib3R0b20nLF0gfV0sXG4gICAgYm90dG9tU3RhcnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5iLW92ZXJsYXktYm90dG9tLXN0YXJ0JyxdIH1dLFxuICAgIGJvdHRvbUVuZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS1ib3R0b20tZW5kJyxdIH1dLFxuICAgIGxlZnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5iLW92ZXJsYXktbGVmdCcsXSB9XSxcbiAgICBzdGFydFRvcDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItb3ZlcmxheS1zdGFydC10b3AnLF0gfV0sXG4gICAgc3RhcnRCb3R0b206IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5iLW92ZXJsYXktc3RhcnQtYm90dG9tJyxdIH1dXG59O1xuY2xhc3MgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih2Y3IsIGluamVjdG9yLCBjaGFuZ2VEZXRlY3RvclJlZikge1xuICAgICAgICB0aGlzLnZjciA9IHZjcjtcbiAgICAgICAgdGhpcy5pbmplY3RvciA9IGluamVjdG9yO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmID0gY2hhbmdlRGV0ZWN0b3JSZWY7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaXNTdHJpbmdDb250ZW50KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmNvbnRlbnQ7XG4gICAgfVxuICAgIGF0dGFjaENvbXBvbmVudFBvcnRhbChwb3J0YWwsIGNvbnRleHQpIHtcbiAgICAgICAgcG9ydGFsLmluamVjdG9yID0gdGhpcy5jcmVhdGVDaGlsZEluamVjdG9yKHBvcnRhbC5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpO1xuICAgICAgICBjb25zdCBjb21wb25lbnRSZWYgPSB0aGlzLnBvcnRhbE91dGxldC5hdHRhY2hDb21wb25lbnRQb3J0YWwocG9ydGFsKTtcbiAgICAgICAgaWYgKGNvbnRleHQpIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oY29tcG9uZW50UmVmLmluc3RhbmNlLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBjb21wb25lbnRSZWYuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIGNvbXBvbmVudFJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBjb21wb25lbnRSZWY7XG4gICAgfVxuICAgIGF0dGFjaFRlbXBsYXRlUG9ydGFsKHBvcnRhbCkge1xuICAgICAgICBjb25zdCB0ZW1wbGF0ZVJlZiA9IHRoaXMucG9ydGFsT3V0bGV0LmF0dGFjaFRlbXBsYXRlUG9ydGFsKHBvcnRhbCk7XG4gICAgICAgIHRlbXBsYXRlUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgdGhpcy5pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlUmVmO1xuICAgIH1cbiAgICBhdHRhY2hTdHJpbmdDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgfVxuICAgIGRldGFjaCgpIHtcbiAgICAgICAgaWYgKHRoaXMucG9ydGFsT3V0bGV0Lmhhc0F0dGFjaGVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMucG9ydGFsT3V0bGV0LmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXR0YWNoU3RyaW5nQ29udGVudChudWxsKTtcbiAgICAgICAgdGhpcy5pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGNyZWF0ZUNoaWxkSW5qZWN0b3IoY2ZyKSB7XG4gICAgICAgIHJldHVybiBuZXcgTmJQb3J0YWxJbmplY3Rvcih0aGlzLmluamVjdG9yLCBuZXcgV2Vha01hcChbXG4gICAgICAgICAgICBbQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyLCBjZnJdLFxuICAgICAgICBdKSk7XG4gICAgfVxufVxuTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1vdmVybGF5LWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2ICpuZ0lmPVwiaXNTdHJpbmdDb250ZW50XCIgY2xhc3M9XCJwcmltaXRpdmUtb3ZlcmxheVwiPnt7IGNvbnRlbnQgfX08L2Rpdj5cbiAgICA8bmctdGVtcGxhdGUgbmJQb3J0YWxPdXRsZXQ+PC9uZy10ZW1wbGF0ZT5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBWaWV3Q29udGFpbmVyUmVmIH0sXG4gICAgeyB0eXBlOiBJbmplY3RvciB9LFxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfVxuXTtcbk5iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBwb3J0YWxPdXRsZXQ6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW05iUG9ydGFsT3V0bGV0RGlyZWN0aXZlLCB7IHN0YXRpYzogdHJ1ZSB9LF0gfV1cbn07XG5cbmZ1bmN0aW9uIHBhdGNoKGNvbnRhaW5lciwgY29udGFpbmVyQ29udGV4dCkge1xuICAgIE9iamVjdC5hc3NpZ24oY29udGFpbmVyLmluc3RhbmNlLCBjb250YWluZXJDb250ZXh0KTtcbiAgICBjb250YWluZXIuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIHJldHVybiBjb250YWluZXI7XG59XG5mdW5jdGlvbiBjcmVhdGVDb250YWluZXIocmVmLCBjb250YWluZXIsIGNvbnRleHQsIGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcikge1xuICAgIGNvbnN0IGNvbnRhaW5lclJlZiA9IHJlZi5hdHRhY2gobmV3IE5iQ29tcG9uZW50UG9ydGFsKGNvbnRhaW5lciwgbnVsbCwgbnVsbCwgY29tcG9uZW50RmFjdG9yeVJlc29sdmVyKSk7XG4gICAgcGF0Y2goY29udGFpbmVyUmVmLCBjb250ZXh0KTtcbiAgICByZXR1cm4gY29udGFpbmVyUmVmO1xufVxuY2xhc3MgTmJPdmVybGF5U2VydmljZSB7XG4gICAgY29uc3RydWN0b3Iob3ZlcmxheSwgbGF5b3V0RGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uID0gbGF5b3V0RGlyZWN0aW9uO1xuICAgIH1cbiAgICBnZXQgc2Nyb2xsU3RyYXRlZ2llcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzO1xuICAgIH1cbiAgICBjcmVhdGUoY29uZmlnKSB7XG4gICAgICAgIGNvbnN0IG92ZXJsYXlSZWYgPSB0aGlzLm92ZXJsYXkuY3JlYXRlKGNvbmZpZyk7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uLm9uRGlyZWN0aW9uQ2hhbmdlKClcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZGlyID0+IG92ZXJsYXlSZWYuc2V0RGlyZWN0aW9uKGRpcikpO1xuICAgICAgICByZXR1cm4gb3ZlcmxheVJlZjtcbiAgICB9XG59XG5OYk92ZXJsYXlTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYk92ZXJsYXlTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJPdmVybGF5IH0sXG4gICAgeyB0eXBlOiBOYkxheW91dERpcmVjdGlvblNlcnZpY2UgfVxuXTtcblxuY2xhc3MgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciBleHRlbmRzIFNjcm9sbERpc3BhdGNoZXIge1xuICAgIGNvbnN0cnVjdG9yKG5nWm9uZSwgcGxhdGZvcm0sIHNjcm9sbFNlcnZpY2UsIGRvY3VtZW50KSB7XG4gICAgICAgIHN1cGVyKG5nWm9uZSwgcGxhdGZvcm0sIGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlID0gc2Nyb2xsU2VydmljZTtcbiAgICB9XG4gICAgc2Nyb2xsZWQoYXVkaXRUaW1lSW5Ncykge1xuICAgICAgICByZXR1cm4gbWVyZ2Uoc3VwZXIuc2Nyb2xsZWQoYXVkaXRUaW1lSW5NcyksIHRoaXMuc2Nyb2xsU2VydmljZS5vblNjcm9sbCgpKTtcbiAgICB9XG59XG5OYlNjcm9sbERpc3BhdGNoZXJBZGFwdGVyLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYlNjcm9sbERpc3BhdGNoZXJBZGFwdGVyLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlBsYXRmb3JtIH0sXG4gICAgeyB0eXBlOiBOYkxheW91dFNjcm9sbFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9XG5dO1xuXG4vKipcbiAqIE92ZXJyaWRlcyBkZWZhdWx0IGJsb2NrIHNjcm9sbCBzdHJhdGVneSBiZWNhdXNlIGRlZmF1bHQgc3RyYXRlZ3kgYmxvY2tzIHNjcm9sbGluZyBvbiB0aGUgYm9keSBvbmx5LlxuICogQnV0IE5lYnVsYXIgaGFzIGl0cyBvd24gc2Nyb2xsYWJsZSBjb250YWluZXIgLSBuYi1sYXlvdXQuIFNvLCB3ZSBuZWVkIHRvIGJsb2NrIHNjcm9sbGluZyBpbiBpdCB0by5cbiAqICovXG5jbGFzcyBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyIGV4dGVuZHMgQmxvY2tTY3JvbGxTdHJhdGVneSB7XG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnQsIHZpZXdwb3J0UnVsZXIsIHNjcm9sbFNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIodmlld3BvcnRSdWxlciwgZG9jdW1lbnQpO1xuICAgICAgICB0aGlzLnNjcm9sbFNlcnZpY2UgPSBzY3JvbGxTZXJ2aWNlO1xuICAgIH1cbiAgICBlbmFibGUoKSB7XG4gICAgICAgIHN1cGVyLmVuYWJsZSgpO1xuICAgICAgICB0aGlzLnNjcm9sbFNlcnZpY2Uuc2Nyb2xsYWJsZShmYWxzZSk7XG4gICAgfVxuICAgIGRpc2FibGUoKSB7XG4gICAgICAgIHN1cGVyLmRpc2FibGUoKTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlLnNjcm9sbGFibGUodHJ1ZSk7XG4gICAgfVxufVxuTmJCbG9ja1Njcm9sbFN0cmF0ZWd5QWRhcHRlci5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJCbG9ja1Njcm9sbFN0cmF0ZWd5QWRhcHRlci5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciB9LFxuICAgIHsgdHlwZTogTmJMYXlvdXRTY3JvbGxTZXJ2aWNlIH1cbl07XG5jbGFzcyBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucyBleHRlbmRzIFNjcm9sbFN0cmF0ZWd5T3B0aW9ucyB7XG4gICAgY29uc3RydWN0b3Ioc2Nyb2xsU2VydmljZSwgc2Nyb2xsRGlzcGF0Y2hlciwgdmlld3BvcnRSdWxlciwgbmdab25lLCBkb2N1bWVudCkge1xuICAgICAgICBzdXBlcihzY3JvbGxEaXNwYXRjaGVyLCB2aWV3cG9ydFJ1bGVyLCBuZ1pvbmUsIGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlID0gc2Nyb2xsU2VydmljZTtcbiAgICAgICAgdGhpcy5zY3JvbGxEaXNwYXRjaGVyID0gc2Nyb2xsRGlzcGF0Y2hlcjtcbiAgICAgICAgdGhpcy52aWV3cG9ydFJ1bGVyID0gdmlld3BvcnRSdWxlcjtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy5ibG9jayA9ICgpID0+IG5ldyBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyKHRoaXMuZG9jdW1lbnQsIHRoaXMudmlld3BvcnRSdWxlciwgdGhpcy5zY3JvbGxTZXJ2aWNlKTtcbiAgICB9XG59XG5OYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucy5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJTY3JvbGxTdHJhdGVneU9wdGlvbnMuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkxheW91dFNjcm9sbFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFNjcm9sbERpc3BhdGNoZXIgfSxcbiAgICB7IHR5cGU6IE5iVmlld3BvcnRSdWxlckFkYXB0ZXIgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH1cbl07XG5cbmNsYXNzIE5iQ2RrQWRhcHRlck1vZHVsZSB7XG4gICAgc3RhdGljIGZvclJvb3QoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJDZGtBZGFwdGVyTW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlcixcbiAgICAgICAgICAgICAgICBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyLFxuICAgICAgICAgICAgICAgIE5iQmxvY2tTY3JvbGxTdHJhdGVneUFkYXB0ZXIsXG4gICAgICAgICAgICAgICAgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlcixcbiAgICAgICAgICAgICAgICBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucyxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE92ZXJsYXlDb250YWluZXIsIHVzZUV4aXN0aW5nOiBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYk92ZXJsYXlDb250YWluZXIsIHVzZUV4aXN0aW5nOiBOYk92ZXJsYXlDb250YWluZXJBZGFwdGVyIH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBTY3JvbGxEaXNwYXRjaGVyLCB1c2VFeGlzdGluZzogTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciB9LFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogU2Nyb2xsU3RyYXRlZ3lPcHRpb25zLCB1c2VFeGlzdGluZzogTmJTY3JvbGxTdHJhdGVneU9wdGlvbnMgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJDZGtBZGFwdGVyTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3t9LF0gfVxuXTtcblxudmFyIE5iVHJpZ2dlcjtcbihmdW5jdGlvbiAoTmJUcmlnZ2VyKSB7XG4gICAgTmJUcmlnZ2VyW1wiTk9PUFwiXSA9IFwibm9vcFwiO1xuICAgIE5iVHJpZ2dlcltcIkNMSUNLXCJdID0gXCJjbGlja1wiO1xuICAgIE5iVHJpZ2dlcltcIkhPVkVSXCJdID0gXCJob3ZlclwiO1xuICAgIE5iVHJpZ2dlcltcIkhJTlRcIl0gPSBcImhpbnRcIjtcbiAgICBOYlRyaWdnZXJbXCJGT0NVU1wiXSA9IFwiZm9jdXNcIjtcbn0pKE5iVHJpZ2dlciB8fCAoTmJUcmlnZ2VyID0ge30pKTtcbi8qKlxuICogVE9ETyBtYXliZSB3ZSBoYXZlIHRvIHVzZSByZW5kZXJlci5saXN0ZW4gaW5zdGVhZCBvZiBvYnNlcnZhYmxlRnJvbUV2ZW50P1xuICogUmVuZGVyZXIgcHJvdmlkZXMgY2FwYWJpbGl0eSB1c2UgaXQgaW4gc2VydmljZSB3b3JrZXIsIHNzciBhbmQgc28gb24uXG4gKiAqL1xuY2xhc3MgTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2N1bWVudCwgaG9zdCwgY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveWVkJC5uZXh0KCk7XG4gICAgfVxuICAgIGlzTm90T25Ib3N0T3JDb250YWluZXIoZXZlbnQpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzT25Ib3N0KGV2ZW50KSAmJiAhdGhpcy5pc09uQ29udGFpbmVyKGV2ZW50KTtcbiAgICB9XG4gICAgaXNPbkhvc3RPckNvbnRhaW5lcihldmVudCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09uSG9zdChldmVudCkgfHwgdGhpcy5pc09uQ29udGFpbmVyKGV2ZW50KTtcbiAgICB9XG4gICAgaXNPbkhvc3QoeyB0YXJnZXQgfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0LmNvbnRhaW5zKHRhcmdldCk7XG4gICAgfVxuICAgIGlzT25Db250YWluZXIoeyB0YXJnZXQgfSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXIoKSAmJiB0aGlzLmNvbnRhaW5lcigpLmxvY2F0aW9uLm5hdGl2ZUVsZW1lbnQuY29udGFpbnModGFyZ2V0KTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgc2hvdyBhbmQgaGlkZSBldmVudCBzdHJlYW1zLlxuICogRmlyZXMgdG9nZ2xlIGV2ZW50IHdoZW4gdGhlIGNsaWNrIHdhcyBwZXJmb3JtZWQgb24gdGhlIGhvc3QgZWxlbWVudC5cbiAqIEZpcmVzIGNsb3NlIGV2ZW50IHdoZW4gdGhlIGNsaWNrIHdhcyBwZXJmb3JtZWQgb24gdGhlIGRvY3VtZW50IGJ1dFxuICogbm90IG9uIHRoZSBob3N0IG9yIGNvbnRhaW5lci5cbiAqICovXG5jbGFzcyBOYkNsaWNrVHJpZ2dlclN0cmF0ZWd5IGV4dGVuZHMgTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgLy8gc2luY2Ugd2Ugc2hvdWxkIHRyYWNrIGNsaWNrIGZvciBib3RoIFNIT1cgYW5kIEhJREUgZXZlbnQgd2UgZmlyc3RseSBuZWVkIHRvIHRyYWNrIHRoZSBjbGljayBhbmQgdGhlIHN0YXRlXG4gICAgICAgIC8vIG9mIHRoZSBjb250YWluZXIgYW5kIHRoZW4gbGF0ZXIgb24gZGVjaWRlIHNob3VsZCB3ZSBoaWRlIGl0IG9yIHNob3dcbiAgICAgICAgLy8gaWYgd2UgdHJhY2sgdGhlIGNsaWNrICYgc3RhdGUgc2VwYXJhdGVseSB0aGlzIHdpbGwgY2FzZSBhIGJlaGF2aW9yIHdoZW4gdGhlIGNvbnRhaW5lciBpcyBnZXR0aW5nIHNob3duXG4gICAgICAgIC8vIGFuZCB0aGVuIGhpZGRlbiByaWdodCBhd2F5XG4gICAgICAgIHRoaXMuY2xpY2skID0gZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdjbGljaycpXG4gICAgICAgICAgICAucGlwZShtYXAoKGV2ZW50KSA9PiBbIXRoaXMuY29udGFpbmVyKCkgJiYgdGhpcy5pc09uSG9zdChldmVudCksIGV2ZW50XSksIHNoYXJlKCksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgdGhpcy5zaG93JCA9IHRoaXMuY2xpY2skXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKFtzaG91bGRTaG93XSkgPT4gc2hvdWxkU2hvdyksIG1hcCgoWywgZXZlbnRdKSA9PiBldmVudCksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgdGhpcy5oaWRlJCA9IHRoaXMuY2xpY2skXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKFtzaG91bGRTaG93LCBldmVudF0pID0+ICFzaG91bGRTaG93ICYmICF0aGlzLmlzT25Db250YWluZXIoZXZlbnQpKSwgbWFwKChbLCBldmVudF0pID0+IGV2ZW50KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBzaG93IGFuZCBoaWRlIGV2ZW50IHN0cmVhbXMuXG4gKiBGaXJlcyBvcGVuIGV2ZW50IHdoZW4gYSBtb3VzZSBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50IGFuZCBzdGF5IG92ZXIgYXQgbGVhc3QgMTAwIG1pbGxpc2Vjb25kcy5cbiAqIEZpcmVzIGNsb3NlIGV2ZW50IHdoZW4gdGhlIG1vdXNlIGxlYXZlcyB0aGUgaG9zdCBlbGVtZW50IGFuZCBzdG9wcyBvdXQgb2YgdGhlIGhvc3QgYW5kIHBvcG92ZXIgY29udGFpbmVyLlxuICogKi9cbmNsYXNzIE5iSG92ZXJUcmlnZ2VyU3RyYXRlZ3kgZXh0ZW5kcyBOYlRyaWdnZXJTdHJhdGVneUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnNob3ckID0gZnJvbUV2ZW50KHRoaXMuaG9zdCwgJ21vdXNlZW50ZXInKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLmNvbnRhaW5lcigpKSwgXG4gICAgICAgIC8vIHRoaXMgYGRlbGF5ICYgdGFrZVVudGlsICYgcmVwZWF0YCBvcGVyYXRvcnMgY29tYmluYXRpb24gaXMgYSBzeW5vbnltIGZvciBgY29uZGl0aW9uYWwgZGVib3VuY2VgXG4gICAgICAgIC8vIG1lYW5pbmcgdGhhdCBpZiBvbmUgZXZlbnQgb2NjdXJzIGluIHNvbWUgdGltZSBhZnRlciB0aGUgaW5pdGlhbCBvbmUgd2Ugd29uJ3QgcmVhY3QgdG8gaXRcbiAgICAgICAgZGVsYXkoMTAwKSwgXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyeGpzLW5vLXVuc2FmZS10YWtldW50aWxcbiAgICAgICAgdGFrZVVudGlsKGZyb21FdmVudCh0aGlzLmhvc3QsICdtb3VzZWxlYXZlJykpLCByZXBlYXQoKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICB0aGlzLmhpZGUkID0gZnJvbUV2ZW50KHRoaXMuaG9zdCwgJ21vdXNlbGVhdmUnKVxuICAgICAgICAgICAgLnBpcGUoc3dpdGNoTWFwKCgpID0+IGZyb21FdmVudCh0aGlzLmRvY3VtZW50LCAnbW91c2Vtb3ZlJylcbiAgICAgICAgICAgIC5waXBlKGRlYm91bmNlVGltZSgxMDApLCB0YWtlV2hpbGUoKCkgPT4gISF0aGlzLmNvbnRhaW5lcigpKSwgZmlsdGVyKGV2ZW50ID0+IHRoaXMuaXNOb3RPbkhvc3RPckNvbnRhaW5lcihldmVudCkpKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKTtcbiAgICB9XG59XG4vKipcbiAqIENyZWF0ZXMgc2hvdyBhbmQgaGlkZSBldmVudCBzdHJlYW1zLlxuICogRmlyZXMgb3BlbiBldmVudCB3aGVuIGEgbW91c2UgaG92ZXJzIG92ZXIgdGhlIGhvc3QgZWxlbWVudCBhbmQgc3RheSBvdmVyIGF0IGxlYXN0IDEwMCBtaWxsaXNlY29uZHMuXG4gKiBGaXJlcyBjbG9zZSBldmVudCB3aGVuIHRoZSBtb3VzZSBsZWF2ZXMgdGhlIGhvc3QgZWxlbWVudC5cbiAqICovXG5jbGFzcyBOYkhpbnRUcmlnZ2VyU3RyYXRlZ3kgZXh0ZW5kcyBOYlRyaWdnZXJTdHJhdGVneUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnNob3ckID0gZnJvbUV2ZW50KHRoaXMuaG9zdCwgJ21vdXNlZW50ZXInKVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgIC8vIHRoaXMgYGRlbGF5ICYgdGFrZVVudGlsICYgcmVwZWF0YCBvcGVyYXRvcnMgY29tYmluYXRpb24gaXMgYSBzeW5vbnltIGZvciBgY29uZGl0aW9uYWwgZGVib3VuY2VgXG4gICAgICAgIC8vIG1lYW5pbmcgdGhhdCBpZiBvbmUgZXZlbnQgb2NjdXJzIGluIHNvbWUgdGltZSBhZnRlciB0aGUgaW5pdGlhbCBvbmUgd2Ugd29uJ3QgcmVhY3QgdG8gaXRcbiAgICAgICAgZGVsYXkoMTAwKSwgXG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZTpyeGpzLW5vLXVuc2FmZS10YWtldW50aWxcbiAgICAgICAgdGFrZVVudGlsKGZyb21FdmVudCh0aGlzLmhvc3QsICdtb3VzZWxlYXZlJykpLCByZXBlYXQoKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICB0aGlzLmhpZGUkID0gZnJvbUV2ZW50KHRoaXMuaG9zdCwgJ21vdXNlbGVhdmUnKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBzaG93IGFuZCBoaWRlIGV2ZW50IHN0cmVhbXMuXG4gKiBGaXJlcyBvcGVuIGV2ZW50IHdoZW4gYSBmb2N1cyBpcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBzdGF5IG92ZXIgYXQgbGVhc3QgMTAwIG1pbGxpc2Vjb25kcy5cbiAqIEZpcmVzIGNsb3NlIGV2ZW50IHdoZW4gdGhlIGZvY3VzIGxlYXZlcyB0aGUgaG9zdCBlbGVtZW50LlxuICogKi9cbmNsYXNzIE5iRm9jdXNUcmlnZ2VyU3RyYXRlZ3kgZXh0ZW5kcyBOYlRyaWdnZXJTdHJhdGVneUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLmZvY3VzT3V0JCA9IGZyb21FdmVudCh0aGlzLmhvc3QsICdmb2N1c291dCcpXG4gICAgICAgICAgICAucGlwZShzd2l0Y2hNYXAoKCkgPT4gZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdmb2N1c2luJylcbiAgICAgICAgICAgIC5waXBlKHRha2VXaGlsZSgoKSA9PiAhIXRoaXMuY29udGFpbmVyKCkpLCBmaWx0ZXIoZXZlbnQgPT4gdGhpcy5pc05vdE9uSG9zdE9yQ29udGFpbmVyKGV2ZW50KSkpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgICAgICB0aGlzLmNsaWNrSW4kID0gZnJvbUV2ZW50KHRoaXMuaG9zdCwgJ2NsaWNrJylcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiAhdGhpcy5jb250YWluZXIoKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgdGhpcy5jbGlja091dCQgPSBmcm9tRXZlbnQodGhpcy5kb2N1bWVudCwgJ2NsaWNrJylcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiAhIXRoaXMuY29udGFpbmVyKCkpLCBmaWx0ZXIoZXZlbnQgPT4gdGhpcy5pc05vdE9uSG9zdE9yQ29udGFpbmVyKGV2ZW50KSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3llZCQpKTtcbiAgICAgICAgdGhpcy50YWJLZXlQcmVzcyQgPSBmcm9tRXZlbnQodGhpcy5kb2N1bWVudCwgJ2tleWRvd24nKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChldmVudCkgPT4gZXZlbnQua2V5Q29kZSA9PT0gOSksIGZpbHRlcigoKSA9PiAhIXRoaXMuY29udGFpbmVyKCkpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQkKSk7XG4gICAgICAgIHRoaXMuc2hvdyQgPSBtZXJnZShmcm9tRXZlbnQodGhpcy5ob3N0LCAnZm9jdXNpbicpLCB0aGlzLmNsaWNrSW4kKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLmNvbnRhaW5lcigpKSwgZGVib3VuY2VUaW1lKDEwMCksIFxuICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6cnhqcy1uby11bnNhZmUtdGFrZXVudGlsXG4gICAgICAgIHRha2VVbnRpbChmcm9tRXZlbnQodGhpcy5ob3N0LCAnZm9jdXNvdXQnKSksIHJlcGVhdCgpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95ZWQkKSk7XG4gICAgICAgIHRoaXMuaGlkZSQgPSBtZXJnZSh0aGlzLmZvY3VzT3V0JCwgdGhpcy50YWJLZXlQcmVzcyQsIHRoaXMuY2xpY2tPdXQkKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveWVkJCkpO1xuICAgIH1cbn1cbi8qKlxuICogQ3JlYXRlcyBlbXB0eSBzaG93IGFuZCBoaWRlIGV2ZW50IHN0cmVhbXMuXG4gKiAqL1xuY2xhc3MgTmJOb29wVHJpZ2dlclN0cmF0ZWd5IGV4dGVuZHMgTmJUcmlnZ2VyU3RyYXRlZ3lCYXNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5zaG93JCA9IEVNUFRZO1xuICAgICAgICB0aGlzLmhpZGUkID0gRU1QVFk7XG4gICAgfVxufVxuY2xhc3MgTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoX2RvY3VtZW50KSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50ID0gX2RvY3VtZW50O1xuICAgIH1cbiAgICB0cmlnZ2VyKHRyaWdnZXIkJDEpIHtcbiAgICAgICAgdGhpcy5fdHJpZ2dlciA9IHRyaWdnZXIkJDE7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBob3N0KGhvc3QpIHtcbiAgICAgICAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb250YWluZXIoY29udGFpbmVyKSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGJ1aWxkKCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX3RyaWdnZXIpIHtcbiAgICAgICAgICAgIGNhc2UgTmJUcmlnZ2VyLkNMSUNLOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTmJDbGlja1RyaWdnZXJTdHJhdGVneSh0aGlzLl9kb2N1bWVudCwgdGhpcy5faG9zdCwgdGhpcy5fY29udGFpbmVyKTtcbiAgICAgICAgICAgIGNhc2UgTmJUcmlnZ2VyLkhJTlQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBOYkhpbnRUcmlnZ2VyU3RyYXRlZ3kodGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hvc3QsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBjYXNlIE5iVHJpZ2dlci5IT1ZFUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5iSG92ZXJUcmlnZ2VyU3RyYXRlZ3kodGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hvc3QsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBjYXNlIE5iVHJpZ2dlci5GT0NVUzpcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE5iRm9jdXNUcmlnZ2VyU3RyYXRlZ3kodGhpcy5fZG9jdW1lbnQsIHRoaXMuX2hvc3QsIHRoaXMuX2NvbnRhaW5lcik7XG4gICAgICAgICAgICBjYXNlIE5iVHJpZ2dlci5OT09QOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTmJOb29wVHJpZ2dlclN0cmF0ZWd5KHRoaXMuX2RvY3VtZW50LCB0aGlzLl9ob3N0LCB0aGlzLl9jb250YWluZXIpO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RyaWdnZXIgaGF2ZSB0byBiZSBwcm92aWRlZCcpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJUcmlnZ2VyU3RyYXRlZ3lCdWlsZGVyU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9XG5dO1xuXG5jbGFzcyBOYk92ZXJsYXlNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iT3ZlcmxheU1vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iUG9zaXRpb25CdWlsZGVyU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIE5iT3ZlcmxheVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJQb3NpdGlvbkhlbHBlcixcbiAgICAgICAgICAgICAgICAuLi5OYkNka01hcHBpbmdNb2R1bGUuZm9yUm9vdCgpLnByb3ZpZGVycyxcbiAgICAgICAgICAgICAgICAuLi5OYkNka0FkYXB0ZXJNb2R1bGUuZm9yUm9vdCgpLnByb3ZpZGVycyxcbiAgICAgICAgICAgICAgICAuLi5OYkExMXlNb2R1bGUuZm9yUm9vdCgpLnByb3ZpZGVycyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJPdmVybGF5TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iQ2RrTWFwcGluZ01vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJQb3NpdGlvbmVkQ29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iQ2RrTWFwcGluZ01vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJDZGtBZGFwdGVyTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlN0YXR1c1NlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmNvcmVTdGF0dXNlcyA9IFsnYmFzaWMnLCAncHJpbWFyeScsICdpbmZvJywgJ3dhcm5pbmcnLCAnZGFuZ2VyJywgJ2NvbnRyb2wnXTtcbiAgICB9XG4gICAgaXNDb3JlU3RhdHVzKHN0YXR1cykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb3JlU3RhdHVzZXMuaW5jbHVkZXMoc3RhdHVzKTtcbiAgICB9XG4gICAgaXNDdXN0b21TdGF0dXMoc3RhdHVzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRTdGF0dXNTdHJpbmcoc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmlzQ29yZVN0YXR1cyhzdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0U3RhdHVzQ2xhc3Moc3RhdHVzKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRTdGF0dXNTdHJpbmcoc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIGBzdGF0dXMtJHtzdGF0dXN9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpc1ZhbGlkU3RhdHVzU3RyaW5nKHN0YXR1cykge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHN0YXR1cyA9PT0gJ3N0cmluZycgJiYgc3RhdHVzLmxlbmd0aCA+IDA7XG4gICAgfVxufVxuTmJTdGF0dXNTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHdpbmRvd0ZhY3RvcnkocGxhdGZvcm1JZCkge1xuICAgIGlmIChpc1BsYXRmb3JtQnJvd3NlcihwbGF0Zm9ybUlkKSkge1xuICAgICAgICByZXR1cm4gd2luZG93O1xuICAgIH1cbiAgICAvLyBQcm92aWRlIHVuZGVmaW5lZCB0byBnZXQgdGhlIGVycm9yIHdoZW4gdHJ5aW5nIHRvIGFjY2VzcyB0aGUgd2luZG93IGFzIGl0XG4gICAgLy8gc2hvdWxkbid0IGJlIHVzZWQgb3V0c2lkZSB0aGUgYnJvd3Nlci4gVGhvc2Ugd2hvIG5lZWQgdG8gcHJvdmlkZSBzb21ldGhpbmdcbiAgICAvLyBpbnN0ZWFkIG9mIHdpbmRvdyAoZS5nLiBkb21pbm8gd2luZG93IHdoZW4gcnVubmluZyBpbiBub2RlKSBjb3VsZCBvdmVycmlkZVxuICAgIC8vIE5CX1dJTkRPVyB0b2tlbi5cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xufVxuY2xhc3MgTmJUaGVtZU1vZHVsZSB7XG4gICAgLy8gVE9ETzogY2hlY2sgdGhlIG9wdGlvbnMgKHRocm93IGV4Y2VwdGlvbj8pXG4gICAgLyoqXG4gICAgICogTWFpbiBUaGVtZSBNb2R1bGVcbiAgICAgKlxuICAgICAqIEBwYXJhbSBuYlRoZW1lT3B0aW9ucyB7TmJUaGVtZU9wdGlvbnN9IE1haW4gdGhlbWUgb3B0aW9uc1xuICAgICAqIEBwYXJhbSBuYkpTVGhlbWVzIHtOYkpTVGhlbWVPcHRpb25zW119IExpc3Qgb2YgSlMgVGhlbWVzLCB3aWxsIGJlIG1lcmdlZCB3aXRoIGRlZmF1bHQgdGhlbWVzXG4gICAgICogQHBhcmFtIG5iTWVkaWFCcmVha3BvaW50cyB7TmJNZWRpYUJyZWFrcG9pbnR9IEF2YWlsYWJsZSBtZWRpYSBicmVha3BvaW50c1xuICAgICAqIEBwYXJhbSBsYXlvdXREaXJlY3Rpb24ge05iTGF5b3V0RGlyZWN0aW9ufSBMYXlvdXQgZGlyZWN0aW9uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TW9kdWxlV2l0aFByb3ZpZGVyc31cbiAgICAgKi9cbiAgICBzdGF0aWMgZm9yUm9vdChuYlRoZW1lT3B0aW9ucyA9IHsgbmFtZTogJ2RlZmF1bHQnIH0sIG5iSlNUaGVtZXMsIG5iTWVkaWFCcmVha3BvaW50cywgbGF5b3V0RGlyZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJUaGVtZU1vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfVEhFTUVfT1BUSU9OUywgdXNlVmFsdWU6IG5iVGhlbWVPcHRpb25zIHx8IHt9IH0sXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9CVUlMVF9JTl9KU19USEVNRVMsIHVzZVZhbHVlOiBCVUlMVF9JTl9USEVNRVMgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX0pTX1RIRU1FUywgdXNlVmFsdWU6IG5iSlNUaGVtZXMgfHwgW10gfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX01FRElBX0JSRUFLUE9JTlRTLCB1c2VWYWx1ZTogbmJNZWRpYUJyZWFrcG9pbnRzIHx8IERFRkFVTFRfTUVESUFfQlJFQUtQT0lOVFMgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX0RPQ1VNRU5ULCB1c2VFeGlzdGluZzogRE9DVU1FTlQgfSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1dJTkRPVywgdXNlRmFjdG9yeTogd2luZG93RmFjdG9yeSwgZGVwczogW1BMQVRGT1JNX0lEXSB9LFxuICAgICAgICAgICAgICAgIE5iSlNUaGVtZXNSZWdpc3RyeSxcbiAgICAgICAgICAgICAgICBOYlRoZW1lU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIE5iU3Bpbm5lclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9MQVlPVVRfRElSRUNUSU9OLCB1c2VWYWx1ZTogbGF5b3V0RGlyZWN0aW9uIHx8IE5iTGF5b3V0RGlyZWN0aW9uLkxUUiB9LFxuICAgICAgICAgICAgICAgIE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSxcbiAgICAgICAgICAgICAgICBOYkxheW91dFNjcm9sbFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJMYXlvdXRSdWxlclNlcnZpY2UsXG4gICAgICAgICAgICAgICAgLi4uTmJPdmVybGF5TW9kdWxlLmZvclJvb3QoKS5wcm92aWRlcnMsXG4gICAgICAgICAgICAgICAgTmJTdGF0dXNTZXJ2aWNlLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5OYlRoZW1lTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbmNsYXNzIE5iQ29sb3JIZWxwZXIge1xuICAgIHN0YXRpYyBzaGFkZShjb2xvciwgd2VpZ2h0KSB7XG4gICAgICAgIHJldHVybiBOYkNvbG9ySGVscGVyLm1peCgnIzAwMDAwMCcsIGNvbG9yLCB3ZWlnaHQpO1xuICAgIH1cbiAgICBzdGF0aWMgdGludChjb2xvciwgd2VpZ2h0KSB7XG4gICAgICAgIHJldHVybiBOYkNvbG9ySGVscGVyLm1peCgnI2ZmZmZmZicsIGNvbG9yLCB3ZWlnaHQpO1xuICAgIH1cbiAgICBzdGF0aWMgbWl4KGNvbG9yMSwgY29sb3IyLCB3ZWlnaHQpIHtcbiAgICAgICAgY29uc3QgZDJoID0gKGQpID0+IGQudG9TdHJpbmcoMTYpO1xuICAgICAgICBjb25zdCBoMmQgPSAoaCkgPT4gcGFyc2VJbnQoaCwgMTYpO1xuICAgICAgICBsZXQgcmVzdWx0ID0gJyMnO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8IDc7IGkgKz0gMikge1xuICAgICAgICAgICAgY29uc3QgZmlyc3RQYXJ0ID0gaDJkKGNvbG9yMS5zdWJzdHIoaSwgMikpO1xuICAgICAgICAgICAgY29uc3Qgc2Vjb25kUGFydCA9IGgyZChjb2xvcjIuc3Vic3RyKGksIDIpKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFBhcnQgPSBkMmgoTWF0aC5mbG9vcihzZWNvbmRQYXJ0ICsgKGZpcnN0UGFydCAtIHNlY29uZFBhcnQpICogKHdlaWdodCAvIDEwMC4wKSkpO1xuICAgICAgICAgICAgcmVzdWx0ICs9ICgnMCcgKyByZXN1bHRQYXJ0KS5zbGljZSgtMik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc3RhdGljIGhleFRvUmdiQShoZXgsIGFscGhhKSB7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBpZiAoL14jKFtBLUZhLWYwLTldezN9KXsxLDJ9JC8udGVzdChoZXgpKSB7XG4gICAgICAgICAgICBjID0gaGV4LnN1YnN0cmluZygxKS5zcGxpdCgnJyk7XG4gICAgICAgICAgICBpZiAoYy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICBjID0gW2NbMF0sIGNbMF0sIGNbMV0sIGNbMV0sIGNbMl0sIGNbMl1dO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYyA9ICcweCcgKyBjLmpvaW4oJycpO1xuICAgICAgICAgICAgcmV0dXJuICdyZ2JhKCcgKyBbKGMgPj4gMTYpICYgMjU1LCAoYyA+PiA4KSAmIDI1NSwgYyAmIDI1NV0uam9pbignLCcpICsgJywnICsgYWxwaGEgKyAnKSc7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdCYWQgSGV4Jyk7XG4gICAgfVxufVxuXG52YXIgTmJJY29uUGFja1R5cGU7XG4oZnVuY3Rpb24gKE5iSWNvblBhY2tUeXBlKSB7XG4gICAgTmJJY29uUGFja1R5cGVbXCJTVkdcIl0gPSBcInN2Z1wiO1xuICAgIE5iSWNvblBhY2tUeXBlW1wiRk9OVFwiXSA9IFwiZm9udFwiO1xufSkoTmJJY29uUGFja1R5cGUgfHwgKE5iSWNvblBhY2tUeXBlID0ge30pKTtcblxuY2xhc3MgTmJGb250SWNvbiB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGVudCwgcGFyYW1zID0ge30pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuICAgIGdldENsYXNzZXMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5wYWNrQ2xhc3MpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCh0aGlzLnBhcmFtcy5wYWNrQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLnBhcmFtcy5pY29uQ2xhc3NQcmVmaXggPyBgJHt0aGlzLnBhcmFtcy5pY29uQ2xhc3NQcmVmaXh9LSR7dGhpcy5uYW1lfWAgOiB0aGlzLm5hbWU7XG4gICAgICAgIGNsYXNzZXMucHVzaChuYW1lKTtcbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XG4gICAgfVxuICAgIGdldENvbnRlbnQob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gdGhpcy5jb250ZW50O1xuICAgIH1cbn1cbmNsYXNzIE5iU3ZnSWNvbiB7XG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGVudCwgcGFyYW1zID0ge30pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XG4gICAgfVxuICAgIGdldENsYXNzZXMob3B0aW9ucykge1xuICAgICAgICBjb25zdCBjbGFzc2VzID0gW107XG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy5wYWNrQ2xhc3MpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaCh0aGlzLnBhcmFtcy5wYWNrQ2xhc3MpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjbGFzc2VzO1xuICAgIH1cbiAgICBnZXRDb250ZW50KG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGVudDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iSWNvbkRlZmluaXRpb24ge1xufVxuZnVuY3Rpb24gdGhyb3dQYWNrTm90Rm91bmRFcnJvcihuYW1lKSB7XG4gICAgdGhyb3cgRXJyb3IoYEljb24gUGFjayAnJHtuYW1lfScgaXMgbm90IHJlZ2lzdGVyZWRgKTtcbn1cbmZ1bmN0aW9uIHRocm93Tm9EZWZhdWx0UGFja0Vycm9yKCkge1xuICAgIHRocm93IEVycm9yKCdEZWZhdWx0IHBhY2sgaXMgbm90IHJlZ2lzdGVyZWQuJyk7XG59XG5mdW5jdGlvbiB0aHJvd1dyb25nUGFja1R5cGVFcnJvcihuYW1lLCB0eXBlLCBkZXNpcmVkVHlwZSkge1xuICAgIHRocm93IEVycm9yKGBQYWNrICcke25hbWV9JyBpcyBub3QgYW4gJyR7ZGVzaXJlZFR5cGV9JyBQYWNrIGFuZCBpdHMgdHlwZSBpcyAnJHt0eXBlfSdgKTtcbn1cbi8qKlxuICogVGhpcyBzZXJ2aWNlIGFsbG93cyB0byByZWdpc3RlciBtdWx0aXBsZSBpY29uIHBhY2tzIHRvIHVzZSB0aGVtIGxhdGVyIHdpdGhpbiBgPG5iLWljb24+PC9uYi1pY29uPmAgY29tcG9uZW50LlxuICovXG5jbGFzcyBOYkljb25MaWJyYXJpZXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnBhY2tzID0gbmV3IE1hcCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgbmV3IFN2ZyBpY29uIHBhY2tcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7TmJJY29ufSBpY29uc1xuICAgICAqIEBwYXJhbSB7TmJJY29uUGFja1BhcmFtc30gcGFyYW1zXG4gICAgICovXG4gICAgcmVnaXN0ZXJTdmdQYWNrKG5hbWUsIGljb25zLCBwYXJhbXMgPSB7fSkge1xuICAgICAgICB0aGlzLnBhY2tzLnNldChuYW1lLCB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaWNvbnM6IG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoaWNvbnMpKSxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIHR5cGU6IE5iSWNvblBhY2tUeXBlLlNWRyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBuZXcgZm9udCBwYWNrXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge05iSWNvblBhY2tQYXJhbXN9IHBhcmFtc1xuICAgICAqL1xuICAgIHJlZ2lzdGVyRm9udFBhY2sobmFtZSwgcGFyYW1zID0ge30pIHtcbiAgICAgICAgdGhpcy5wYWNrcy5zZXQobmFtZSwge1xuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHBhcmFtcyxcbiAgICAgICAgICAgIGljb25zOiBuZXcgTWFwKCksXG4gICAgICAgICAgICB0eXBlOiBOYkljb25QYWNrVHlwZS5GT05ULFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBwYWNrIGJ5IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqL1xuICAgIGdldFBhY2sobmFtZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYWNrcy5nZXQobmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgcGFjayBhcyBhIGRlZmF1bHRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqL1xuICAgIHNldERlZmF1bHRQYWNrKG5hbWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhY2tzLmhhcyhuYW1lKSkge1xuICAgICAgICAgICAgdGhyb3dQYWNrTm90Rm91bmRFcnJvcihuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlZmF1bHRQYWNrID0gdGhpcy5wYWNrcy5nZXQobmFtZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgU3ZnIGljb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYWNrXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBOYkljb25EZWZpbml0aW9uXG4gICAgICovXG4gICAgZ2V0U3ZnSWNvbihuYW1lLCBwYWNrKSB7XG4gICAgICAgIGNvbnN0IGljb25zUGFjayA9IHBhY2sgPyB0aGlzLmdldFBhY2tPclRocm93KHBhY2spIDogdGhpcy5nZXREZWZhdWx0UGFja09yVGhyb3coKTtcbiAgICAgICAgaWYgKGljb25zUGFjay50eXBlICE9PSBOYkljb25QYWNrVHlwZS5TVkcpIHtcbiAgICAgICAgICAgIHRocm93V3JvbmdQYWNrVHlwZUVycm9yKGljb25zUGFjay5uYW1lLCBpY29uc1BhY2sudHlwZSwgJ1NWRycpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGljb24gPSB0aGlzLmdldEljb25Gcm9tUGFjayhuYW1lLCBpY29uc1BhY2spO1xuICAgICAgICBpZiAoIWljb24pIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgcGFjazogaWNvbnNQYWNrLm5hbWUsXG4gICAgICAgICAgICB0eXBlOiBOYkljb25QYWNrVHlwZS5TVkcsXG4gICAgICAgICAgICBpY29uOiB0aGlzLmNyZWF0ZVN2Z0ljb24obmFtZSwgaWNvbiwgaWNvbnNQYWNrLnBhcmFtcyksXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgRm9udCBpY29uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGFja1xuICAgICAqXG4gICAgICogQHJldHVybnMgTmJJY29uRGVmaW5pdGlvblxuICAgICAqL1xuICAgIGdldEZvbnRJY29uKG5hbWUsIHBhY2spIHtcbiAgICAgICAgY29uc3QgaWNvbnNQYWNrID0gcGFjayA/IHRoaXMuZ2V0UGFja09yVGhyb3cocGFjaykgOiB0aGlzLmdldERlZmF1bHRQYWNrT3JUaHJvdygpO1xuICAgICAgICBpZiAoaWNvbnNQYWNrLnR5cGUgIT09IE5iSWNvblBhY2tUeXBlLkZPTlQpIHtcbiAgICAgICAgICAgIHRocm93V3JvbmdQYWNrVHlwZUVycm9yKGljb25zUGFjay5uYW1lLCBpY29uc1BhY2sudHlwZSwgJ0ZvbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpY29uID0gdGhpcy5nZXRJY29uRnJvbVBhY2sobmFtZSwgaWNvbnNQYWNrKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBwYWNrOiBpY29uc1BhY2submFtZSxcbiAgICAgICAgICAgIHR5cGU6IE5iSWNvblBhY2tUeXBlLkZPTlQsXG4gICAgICAgICAgICBpY29uOiB0aGlzLmNyZWF0ZUZvbnRJY29uKG5hbWUsIGljb24gPyBpY29uIDogJycsIGljb25zUGFjay5wYXJhbXMpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGljb25cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYWNrXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBOYkljb25EZWZpbml0aW9uXG4gICAgICovXG4gICAgZ2V0SWNvbihuYW1lLCBwYWNrKSB7XG4gICAgICAgIGNvbnN0IGljb25zUGFjayA9IHBhY2sgPyB0aGlzLmdldFBhY2tPclRocm93KHBhY2spIDogdGhpcy5nZXREZWZhdWx0UGFja09yVGhyb3coKTtcbiAgICAgICAgaWYgKGljb25zUGFjay50eXBlID09PSBOYkljb25QYWNrVHlwZS5TVkcpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN2Z0ljb24obmFtZSwgcGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9udEljb24obmFtZSwgcGFjayk7XG4gICAgfVxuICAgIGNyZWF0ZVN2Z0ljb24obmFtZSwgY29udGVudCwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50IGluc3RhbmNlb2YgTmJTdmdJY29uID8gY29udGVudCA6IG5ldyBOYlN2Z0ljb24obmFtZSwgY29udGVudCwgcGFyYW1zKTtcbiAgICB9XG4gICAgY3JlYXRlRm9udEljb24obmFtZSwgY29udGVudCwgcGFyYW1zKSB7XG4gICAgICAgIHJldHVybiBjb250ZW50IGluc3RhbmNlb2YgTmJGb250SWNvbiA/IGNvbnRlbnQgOiBuZXcgTmJGb250SWNvbihuYW1lLCBjb250ZW50LCBwYXJhbXMpO1xuICAgIH1cbiAgICBnZXRQYWNrT3JUaHJvdyhuYW1lKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSB0aGlzLnBhY2tzLmdldChuYW1lKTtcbiAgICAgICAgaWYgKCFwYWNrKSB7XG4gICAgICAgICAgICB0aHJvd1BhY2tOb3RGb3VuZEVycm9yKG5hbWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYWNrO1xuICAgIH1cbiAgICBnZXREZWZhdWx0UGFja09yVGhyb3coKSB7XG4gICAgICAgIGlmICghdGhpcy5kZWZhdWx0UGFjaykge1xuICAgICAgICAgICAgdGhyb3dOb0RlZmF1bHRQYWNrRXJyb3IoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kZWZhdWx0UGFjaztcbiAgICB9XG4gICAgZ2V0SWNvbkZyb21QYWNrKG5hbWUsIHBhY2spIHtcbiAgICAgICAgaWYgKHBhY2suaWNvbnMuaGFzKG5hbWUpKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFjay5pY29ucy5nZXQobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuTmJJY29uTGlicmFyaWVzLsm1cHJvdiA9IMm1ybVkZWZpbmVJbmplY3RhYmxlKHsgZmFjdG9yeTogZnVuY3Rpb24gTmJJY29uTGlicmFyaWVzX0ZhY3RvcnkoKSB7IHJldHVybiBuZXcgTmJJY29uTGlicmFyaWVzKCk7IH0sIHRva2VuOiBOYkljb25MaWJyYXJpZXMsIHByb3ZpZGVkSW46IFwicm9vdFwiIH0pO1xuTmJJY29uTGlicmFyaWVzLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlLCBhcmdzOiBbeyBwcm92aWRlZEluOiAncm9vdCcgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogSWNvbiBjb21wb25lbnQuIEFsbG93cyB0byByZW5kZXIgYm90aCBgc3ZnYCBhbmQgYGZvbnRgIGljb25zLlxuICogU3RhcnRpbmcgZnJvbSBOZWJ1bGFyIDQuMCB1c2VzIFtFdmEgSWNvbnNdKGh0dHBzOi8vYWt2ZW8uZ2l0aHViLmlvL2V2YS1pY29ucy8pIHBhY2sgYnkgZGVmYXVsdC5cbiAqXG4gKiBCYXNpYyBpY29uIGV4YW1wbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBpY29uL2ljb24tc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEljb24gY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItaWNvbiBpY29uPVwic3RhclwiPjwvbmItaWNvbj5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEJ5IGRlZmF1bHQgTmVidWxhciBjb21lcyB3aXRob3V0IGFueSBwcmUtaW5zdGFsbGVkIGljb24gcGFjay5cbiAqIFN0YXJ0aW5nIHdpdGggTmVidWxhciA0LjAuMCB3ZSBzaGlwIHNlcGFyYXRlIHBhY2thZ2UgY2FsbGVkIGBAbmVidWxhci9ldmEtaWNvbnNgXG4gKiB3aGljaCBpbnRlZ3JhdGVzIFNWRyBbRXZhIEljb25zXShodHRwczovL2FrdmVvLmdpdGh1Yi5pby9ldmEtaWNvbnMvKSBwYWNrIHRvIE5lYnVsYXIuIFRvIGFkZCBpdCB0byB5b3VyXG4gKiBwcm9qZWN0IHJ1bjpcbiAqIGBgYHNoXG4gKiBucG0gaSBldmEtaWNvbnMgQG5lYnVsYXIvZXZhLWljb25zXG4gKiBgYGBcbiAqIFRoaXMgY29tbWFuZCB3aWxsIGluc3RhbGwgRXZhIEljb25zIHBhY2suIFRoZW4gcmVnaXN0ZXIgYE5iRXZhSWNvbnNNb2R1bGVgIGludG8geW91ciBhcHAgbW9kdWxlOlxuICogYGBgdHNcbiAqIGltcG9ydCB7IE5iRXZhSWNvbnNNb2R1bGUgfSBmcm9tICdAbmVidWxhci9ldmEtaWNvbnMnO1xuICpcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkV2YUljb25zTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqIExhc3QgdGhpbmcsIGltcG9ydCBgTmJJY29uTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlIHdoZXJlIHlvdSBuZWVkIHRvIHNob3cgYW4gaWNvbjpcbiAqIGBgYHRzXG4gKiBpbXBvcnQgeyBOYkljb25Nb2R1bGUgfSBmcm9tICdAbmVidWxhci90aGVtZSc7XG4gKlxuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iSWNvbk1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogSWNvbiBjYW4gYmUgY29sb3JlZCB1c2luZyBgc3RhdHVzYCBpbnB1dDpcbiAqIGBgYGh0bWxcbiAqIDxuYi1pY29uIGljb249XCJzdGFyXCIgc3RhdHVzPVwid2FybmluZ1wiPjwvbmItaWNvbj5cbiAqIGBgYFxuICpcbiAqIENvbG9yZWQgaWNvbnM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgSWNvbnMsIGljb24vaWNvbi1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEluIGNhc2UgeW91IG5lZWQgdG8gc3BlY2lmeSBhbiBpY29uIGZyb20gYSBzcGVjaWZpYyBpY29uIHBhY2ssIHRoaXMgY291bGQgYmUgZG9uZSB1c2luZyBgcGFja2AgaW5wdXQgcHJvcGVydHk6XG4gKiBgYGBodG1sXG4gKiA8bmItaWNvbiBpY29uPVwic3RhclwiIHBhY2s9XCJmb250LWF3ZXNvbWVcIj48L25iLWljb24+XG4gKiBgYGBcbiAqIEFkZGl0aW9uYWwgaWNvbiBzZXR0aW5ncyAoaWYgYXZhaWxhYmxlIGJ5IHRoZSBpY29uIHBhY2spIGNvdWxkIGJlIHBhc3NlZCB1c2luZyBgb3B0aW9uc2AgaW5wdXQ6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWljb24gaWNvbj1cInN0YXJcIiBbb3B0aW9uc109XCJ7IGFuaW1hdGlvbjogeyB0eXBlOiAnem9vbScgfSB9XCI+PC9uYi1pY29uPlxuICogYGBgXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGljb24tZm9udC1zaXplOlxuICogaWNvbi1saW5lLWhlaWdodDpcbiAqIGljb24td2lkdGg6XG4gKiBpY29uLWhlaWdodDpcbiAqIGljb24tc3ZnLXZlcnRpY2FsLWFsaWduOlxuICogaWNvbi1iYXNpYy1jb2xvcjpcbiAqIGljb24tcHJpbWFyeS1jb2xvcjpcbiAqIGljb24taW5mby1jb2xvcjpcbiAqIGljb24tc3VjY2Vzcy1jb2xvcjpcbiAqIGljb24td2FybmluZy1jb2xvcjpcbiAqIGljb24tZGFuZ2VyLWNvbG9yOlxuICogaWNvbi1jb250cm9sLWNvbG9yOlxuICovXG5jbGFzcyBOYkljb25Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNhbml0aXplciwgaWNvbkxpYnJhcnksIGVsLCByZW5kZXJlciwgc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLnNhbml0aXplciA9IHNhbml0aXplcjtcbiAgICAgICAgdGhpcy5pY29uTGlicmFyeSA9IGljb25MaWJyYXJ5O1xuICAgICAgICB0aGlzLmVsID0gZWw7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5wcmV2Q2xhc3NlcyA9IFtdO1xuICAgICAgICB0aGlzLmh0bWwgPSAnJztcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgfVxuICAgIGdldCBzdWNjZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBhbGwgaWNvbiBjb25maWd1cmFibGUgcHJvcGVydGllcyB2aWEgY29uZmlnIG9iamVjdC5cbiAgICAgKiBJZiBwYXNzZWQgdmFsdWUgaXMgYSBzdHJpbmcgc2V0IGljb24gbmFtZS5cbiAgICAgKiBAZG9jcy1wcml2YXRlXG4gICAgICovXG4gICAgZ2V0IGNvbmZpZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbmZpZztcbiAgICB9XG4gICAgc2V0IGNvbmZpZyh2YWx1ZSkge1xuICAgICAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fY29uZmlnID0gdmFsdWU7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aGlzLmljb24gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaWNvbiA9IHZhbHVlLmljb247XG4gICAgICAgICAgICB0aGlzLnBhY2sgPSB2YWx1ZS5wYWNrO1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSB2YWx1ZS5zdGF0dXM7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMgPSB2YWx1ZS5vcHRpb25zO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmljb25EZWYgPSB0aGlzLnJlbmRlckljb24odGhpcy5pY29uLCB0aGlzLnBhY2ssIHRoaXMub3B0aW9ucyk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKCkge1xuICAgICAgICBjb25zdCBpY29uRGVmID0gdGhpcy5pY29uTGlicmFyeS5nZXRJY29uKHRoaXMuaWNvbiwgdGhpcy5wYWNrKTtcbiAgICAgICAgaWYgKGljb25EZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVySWNvbih0aGlzLmljb24sIHRoaXMucGFjaywgdGhpcy5vcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJJY29uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVuZGVySWNvbihuYW1lLCBwYWNrLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGljb25EZWZpbml0aW9uID0gdGhpcy5pY29uTGlicmFyeS5nZXRJY29uKG5hbWUsIHBhY2spO1xuICAgICAgICBpZiAoIWljb25EZWZpbml0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29udGVudCA9IGljb25EZWZpbml0aW9uLmljb24uZ2V0Q29udGVudChvcHRpb25zKTtcbiAgICAgICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaHRtbCA9IHRoaXMuc2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RIdG1sKGNvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYXNzaWduQ2xhc3NlcyhpY29uRGVmaW5pdGlvbi5pY29uLmdldENsYXNzZXMob3B0aW9ucykpO1xuICAgICAgICByZXR1cm4gaWNvbkRlZmluaXRpb247XG4gICAgfVxuICAgIGNsZWFySWNvbigpIHtcbiAgICAgICAgdGhpcy5odG1sID0gJyc7XG4gICAgICAgIHRoaXMuYXNzaWduQ2xhc3NlcyhbXSk7XG4gICAgfVxuICAgIGFzc2lnbkNsYXNzZXMoY2xhc3Nlcykge1xuICAgICAgICB0aGlzLnByZXZDbGFzc2VzLmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjbGFzc2VzLmZvckVhY2goKGNsYXNzTmFtZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnByZXZDbGFzc2VzID0gY2xhc3NlcztcbiAgICB9XG59XG5OYkljb25Db21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWljb24nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6aW5saW5lLWJsb2NrfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkljb25Db21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBEb21TYW5pdGl6ZXIgfSxcbiAgICB7IHR5cGU6IE5iSWNvbkxpYnJhcmllcyB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iSWNvbkNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBodG1sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydpbm5lckh0bWwnLF0gfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dLFxuICAgIGljb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBhY2s6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG9wdGlvbnM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY29uZmlnOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJJY29uTW9kdWxlIHtcbiAgICBjb25zdHJ1Y3RvcihpY29uc0xpYnJhcnkpIHtcbiAgICAgICAgdGhpcy5pY29uc0xpYnJhcnkgPSBpY29uc0xpYnJhcnk7XG4gICAgICAgIHRoaXMuZXNzZW50aWFsc1BhY2tOYW1lID0gJ25lYnVsYXItZXNzZW50aWFscyc7XG4gICAgICAgIC8vIGluIGNhc2Ugb2YgY29uc2VxdWVudCBjYWxscyB3ZSBkb24ndCBuZWVkIHRvIGVuYWJsZSBgbmVidWxhci1lc3NlbnRpYWxzYCBwYWNrIGFnYWluXG4gICAgICAgIGlmICh0aGlzLmljb25zTGlicmFyeS5nZXRQYWNrKHRoaXMuZXNzZW50aWFsc1BhY2tOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIHRzbGludDpkaXNhYmxlOm1heC1saW5lLWxlbmd0aFxuICAgICAgICB0aGlzLmljb25zTGlicmFyeS5yZWdpc3RlclN2Z1BhY2sodGhpcy5lc3NlbnRpYWxzUGFja05hbWUsIHtcbiAgICAgICAgICAgICdjaGV2cm9uLWRvd24tb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2hldnJvbi1kb3duXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xMiAxNS41YTEgMSAwIDAgMS0uNzEtLjI5bC00LTRhMSAxIDAgMSAxIDEuNDItMS40MkwxMiAxMy4xbDMuMy0zLjE4YTEgMSAwIDEgMSAxLjM4IDEuNDRsLTQgMy44NmExIDEgMCAwIDEtLjY4LjI4elwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnY2hldnJvbi11cC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJjaGV2cm9uLXVwXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE2IDE0LjVhMSAxIDAgMCAxLS43MS0uMjlMMTIgMTAuOWwtMy4zIDMuMThhMSAxIDAgMCAxLTEuNDEgMCAxIDEgMCAwIDEgMC0xLjQybDQtMy44NmExIDEgMCAwIDEgMS40IDBsNCA0YTEgMSAwIDAgMSAwIDEuNDIgMSAxIDAgMCAxLS42OS4yOHpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2NoZXZyb24tbGVmdC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJjaGV2cm9uLWxlZnRcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoOTAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xMy4zNiAxN2ExIDEgMCAwIDEtLjcyLS4zMWwtMy44Ni00YTEgMSAwIDAgMSAwLTEuNGw0LTRhMSAxIDAgMSAxIDEuNDIgMS40MkwxMC45IDEybDMuMTggMy4zYTEgMSAwIDAgMSAwIDEuNDEgMSAxIDAgMCAxLS43Mi4yOXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2NoZXZyb24tcmlnaHQtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2hldnJvbi1yaWdodFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIHRyYW5zZm9ybT1cInJvdGF0ZSgtOTAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xMC41IDE3YTEgMSAwIDAgMS0uNzEtLjI5IDEgMSAwIDAgMSAwLTEuNDJMMTMuMSAxMiA5LjkyIDguNjlhMSAxIDAgMCAxIDAtMS40MSAxIDEgMCAwIDEgMS40MiAwbDMuODYgNGExIDEgMCAwIDEgMCAxLjRsLTQgNGExIDEgMCAwIDEtLjcuMzJ6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdjaGVja21hcmstb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2hlY2ttYXJrXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk05Ljg2IDE4YTEgMSAwIDAgMS0uNzMtLjMybC00Ljg2LTUuMTdhMSAxIDAgMSAxIDEuNDYtMS4zN2w0LjEyIDQuMzkgOC40MS05LjJhMSAxIDAgMSAxIDEuNDggMS4zNGwtOS4xNCAxMGExIDEgMCAwIDEtLjczLjMzelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAncGFwZXItcGxhbmUtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwicGFwZXItcGxhbmVcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTIxIDRhMS4zMSAxLjMxIDAgMCAwLS4wNi0uMjd2LS4wOWExIDEgMCAwIDAtLjItLjMgMSAxIDAgMCAwLS4yOS0uMTloLS4wOWEuODYuODYgMCAwIDAtLjMxLS4xNUgyMGExIDEgMCAwIDAtLjMgMGwtMTggNmExIDEgMCAwIDAgMCAxLjlsOC41MyAyLjg0IDIuODQgOC41M2ExIDEgMCAwIDAgMS45IDBsNi0xOEExIDEgMCAwIDAgMjEgNHptLTQuNyAyLjI5bC01LjU3IDUuNTdMNS4xNiAxMHpNMTQgMTguODRsLTEuODYtNS41NyA1LjU3LTUuNTd6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdmaWxlLXRleHQtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiZmlsZS10ZXh0XCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xNSAxNkg5YTEgMSAwIDAgMCAwIDJoNmExIDEgMCAwIDAgMC0yelwiLz48cGF0aCBkPVwiTTkgMTRoM2ExIDEgMCAwIDAgMC0ySDlhMSAxIDAgMCAwIDAgMnpcIi8+PHBhdGggZD1cIk0xOS43NCA4LjMzbC01LjQ0LTZhMSAxIDAgMCAwLS43NC0uMzNoLTdBMi41MyAyLjUzIDAgMCAwIDQgNC41djE1QTIuNTMgMi41MyAwIDAgMCA2LjU2IDIyaDEwLjg4QTIuNTMgMi41MyAwIDAgMCAyMCAxOS41VjlhMSAxIDAgMCAwLS4yNi0uNjd6TTE0IDVsMi43NCAzaC0yYS43OS43OSAwIDAgMS0uNzQtLjg1em0zLjQ0IDE1SDYuNTZhLjUzLjUzIDAgMCAxLS41Ni0uNXYtMTVhLjUzLjUzIDAgMCAxIC41Ni0uNUgxMnYzLjE1QTIuNzkgMi43OSAwIDAgMCAxNC43MSAxMEgxOHY5LjVhLjUzLjUzIDAgMCAxLS41Ni41elwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnYWxlcnQtdHJpYW5nbGUtb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiYWxlcnQtdHJpYW5nbGVcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoOTAgMTIgMTIpXCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0yMi41NiAxNi4zTDE0Ljg5IDMuNThhMy40MyAzLjQzIDAgMCAwLTUuNzggMEwxLjQ0IDE2LjNhMyAzIDAgMCAwLS4wNSAzQTMuMzcgMy4zNyAwIDAgMCA0LjMzIDIxaDE1LjM0YTMuMzcgMy4zNyAwIDAgMCAyLjk0LTEuNjYgMyAzIDAgMCAwLS4wNS0zLjA0em0tMS43IDIuMDVhMS4zMSAxLjMxIDAgMCAxLTEuMTkuNjVINC4zM2ExLjMxIDEuMzEgMCAwIDEtMS4xOS0uNjUgMSAxIDAgMCAxIDAtMWw3LjY4LTEyLjczYTEuNDggMS40OCAwIDAgMSAyLjM2IDBsNy42NyAxMi43MmExIDEgMCAwIDEgLjAxIDEuMDF6XCIvPjxjaXJjbGUgY3g9XCIxMlwiIGN5PVwiMTZcIiByPVwiMVwiLz48cGF0aCBkPVwiTTEyIDhhMSAxIDAgMCAwLTEgMXY0YTEgMSAwIDAgMCAyIDBWOWExIDEgMCAwIDAtMS0xelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAncXVlc3Rpb24tbWFyay1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJxdWVzdGlvbi1tYXJrXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE3IDlBNSA1IDAgMCAwIDcgOWExIDEgMCAwIDAgMiAwIDMgMyAwIDEgMSAzIDMgMSAxIDAgMCAwLTEgMXYyYTEgMSAwIDAgMCAyIDB2LTEuMUE1IDUgMCAwIDAgMTcgOXpcIi8+PGNpcmNsZSBjeD1cIjEyXCIgY3k9XCIxOVwiIHI9XCIxXCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgICAgICdlbWFpbC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJlbWFpbFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTkgNEg1YTMgMyAwIDAgMC0zIDN2MTBhMyAzIDAgMCAwIDMgM2gxNGEzIDMgMCAwIDAgMy0zVjdhMyAzIDAgMCAwLTMtM3ptLS42NyAyTDEyIDEwLjc1IDUuNjcgNnpNMTkgMThINWExIDEgMCAwIDEtMS0xVjcuMjVsNy40IDUuNTVhMSAxIDAgMCAwIC42LjIgMSAxIDAgMCAwIC42LS4yTDIwIDcuMjVWMTdhMSAxIDAgMCAxLTEgMXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2ZsYXNoLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cImZsYXNoXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgb3BhY2l0eT1cIjBcIi8+PHBhdGggZD1cIk0xMS4xMSAyM2ExIDEgMCAwIDEtLjM0LS4wNiAxIDEgMCAwIDEtLjY1LTEuMDVsLjc3LTcuMDlINWExIDEgMCAwIDEtLjgzLTEuNTZsNy44OS0xMS44YTEgMSAwIDAgMSAxLjE3LS4zOCAxIDEgMCAwIDEgLjY1IDFsLS43NyA3LjE0SDE5YTEgMSAwIDAgMSAuODMgMS41NmwtNy44OSAxMS44YTEgMSAwIDAgMS0uODMuNDR6TTYuODcgMTIuOEgxMmExIDEgMCAwIDEgLjc0LjMzIDEgMSAwIDAgMSAuMjUuNzhsLS40NSA0LjE1IDQuNTktNi44NkgxMmExIDEgMCAwIDEtMS0xLjExbC40NS00LjE1elwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnc2VhcmNoLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cInNlYXJjaFwiPjxyZWN0IHdpZHRoPVwiMjRcIiBoZWlnaHQ9XCIyNFwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMjAuNzEgMTkuMjlsLTMuNC0zLjM5QTcuOTIgNy45MiAwIDAgMCAxOSAxMWE4IDggMCAxIDAtOCA4IDcuOTIgNy45MiAwIDAgMCA0LjktMS42OWwzLjM5IDMuNGExIDEgMCAwIDAgMS40MiAwIDEgMSAwIDAgMCAwLTEuNDJ6TTUgMTFhNiA2IDAgMSAxIDYgNiA2IDYgMCAwIDEtNi02elwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnY2xvc2Utb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY2xvc2VcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoMTgwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTMuNDEgMTJsNC4zLTQuMjlhMSAxIDAgMSAwLTEuNDItMS40MkwxMiAxMC41OWwtNC4yOS00LjNhMSAxIDAgMCAwLTEuNDIgMS40Mmw0LjMgNC4yOS00LjMgNC4yOWExIDEgMCAwIDAgMCAxLjQyIDEgMSAwIDAgMCAxLjQyIDBsNC4yOS00LjMgNC4yOSA0LjNhMSAxIDAgMCAwIDEuNDIgMCAxIDEgMCAwIDAgMC0xLjQyelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnY29sbGFwc2Utb3V0bGluZSc6ICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIj48ZyBkYXRhLW5hbWU9XCJMYXllciAyXCI+PGcgZGF0YS1uYW1lPVwiY29sbGFwc2VcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoMTgwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTkgOWgtMi41OGwzLjI5LTMuMjlhMSAxIDAgMSAwLTEuNDItMS40MkwxNSA3LjU3VjVhMSAxIDAgMCAwLTEtMSAxIDEgMCAwIDAtMSAxdjVhMSAxIDAgMCAwIDEgMWg1YTEgMSAwIDAgMCAwLTJ6XCIvPjxwYXRoIGQ9XCJNMTAgMTNINWExIDEgMCAwIDAgMCAyaDIuNTdsLTMuMjggMy4yOWExIDEgMCAwIDAgMCAxLjQyIDEgMSAwIDAgMCAxLjQyIDBMOSAxNi40MlYxOWExIDEgMCAwIDAgMSAxIDEgMSAwIDAgMCAxLTF2LTVhMSAxIDAgMCAwLTEtMXpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2V4cGFuZC1vdXRsaW5lJzogJzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGZpbGw9XCJjdXJyZW50Q29sb3JcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJleHBhbmRcIj48cmVjdCB3aWR0aD1cIjI0XCIgaGVpZ2h0PVwiMjRcIiB0cmFuc2Zvcm09XCJyb3RhdGUoMTgwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMjAgNWExIDEgMCAwIDAtMS0xaC01YTEgMSAwIDAgMCAwIDJoMi41N2wtMy4yOCAzLjI5YTEgMSAwIDAgMCAwIDEuNDIgMSAxIDAgMCAwIDEuNDIgMEwxOCA3LjQyVjEwYTEgMSAwIDAgMCAxIDEgMSAxIDAgMCAwIDEtMXpcIi8+PHBhdGggZD1cIk0xMC43MSAxMy4yOWExIDEgMCAwIDAtMS40MiAwTDYgMTYuNTdWMTRhMSAxIDAgMCAwLTEtMSAxIDEgMCAwIDAtMSAxdjVhMSAxIDAgMCAwIDEgMWg1YTEgMSAwIDAgMCAwLTJINy40MmwzLjI5LTMuMjlhMSAxIDAgMCAwIDAtMS40MnpcIi8+PC9nPjwvZz48L3N2Zz4nLFxuICAgICAgICAgICAgJ21pbnVzLW91dGxpbmUnOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHdpZHRoPVwiMTAwJVwiIGhlaWdodD1cIjEwMCVcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCI+PGcgZGF0YS1uYW1lPVwiTGF5ZXIgMlwiPjxnIGRhdGEtbmFtZT1cIm1pbnVzXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDE4MCAxMiAxMilcIiBvcGFjaXR5PVwiMFwiLz48cGF0aCBkPVwiTTE5IDEzSDVhMSAxIDAgMCAxIDAtMmgxNGExIDEgMCAwIDEgMCAyelwiLz48L2c+PC9nPjwvc3ZnPicsXG4gICAgICAgICAgICAnbWludXMtYm9sZC1vdXRsaW5lJzogJzxzdmcgeG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgZmlsbD1cImN1cnJlbnRDb2xvclwiIHZpZXdCb3g9XCIwIDAgOCAyXCIgd2lkdGg9XCIxMDAlXCIgaGVpZ2h0PVwiMTAwJVwiPjxkZWZzPjxyZWN0IGlkPVwibmItbWJvXCIgeT1cIjNcIiB3aWR0aD1cIjhcIiBoZWlnaHQ9XCIyXCIgcng9XCIxXCIvPjwvZGVmcz48dXNlIHhsaW5rOmhyZWY9XCIjbmItbWJvXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAgLTMpXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2NoZWNrbWFyay1ib2xkLW91dGxpbmUnOiAnPHN2ZyB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiBmaWxsPVwiY3VycmVudENvbG9yXCIgdmlld0JveD1cIjAgMCA4IDdcIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCI+PGRlZnM+PHBhdGggaWQ9XCJuYi1jYm9cIiBkPVwiTTYuMDM5IDEuNDNhMS4xMSAxLjExIDAgMCAxIDEuNTE3LS4yMjhjLjQ4My4zNDIuNTg4Ljk5OC4yMzQgMS40NjZMNC40MzEgNy4xYTEgMSAwIDAgMS0xLjQ5Mi4xMTVMLjMxNyA0LjY3N2ExLjAyMyAxLjAyMyAwIDAgMSAuMDAyLTEuNDgzIDEuMTEzIDEuMTEzIDAgMCAxIDEuNTM1LjAwMmwxLjY0MSAxLjU5TDYuMDQgMS40Mjh6XCIvPjwvZGVmcz48dXNlIHhsaW5rOmhyZWY9XCIjbmItY2JvXCIgdHJhbnNmb3JtPVwidHJhbnNsYXRlKDAgLTEpXCIgZmlsbC1ydWxlPVwiZXZlbm9kZFwiLz48L3N2Zz4nLFxuICAgICAgICAgICAgJ2Fycm93LWJhY2snOiAnPHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgdmlld0JveD1cIjAgMCAyNCAyNFwiPjxnIGRhdGEtbmFtZT1cIkxheWVyIDJcIj48ZyBkYXRhLW5hbWU9XCJhcnJvdy1iYWNrXCI+PHJlY3Qgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdHJhbnNmb3JtPVwicm90YXRlKDkwIDEyIDEyKVwiIG9wYWNpdHk9XCIwXCIvPjxwYXRoIGQ9XCJNMTkgMTFINy4xNGwzLjYzLTQuMzZhMSAxIDAgMSAwLTEuNTQtMS4yOGwtNSA2YTEuMTkgMS4xOSAwIDAgMC0uMDkuMTVjMCAuMDUgMCAuMDgtLjA3LjEzQTEgMSAwIDAgMCA0IDEyYTEgMSAwIDAgMCAuMDcuMzZjMCAuMDUgMCAuMDguMDcuMTNhMS4xOSAxLjE5IDAgMCAwIC4wOS4xNWw1IDZBMSAxIDAgMCAwIDEwIDE5YTEgMSAwIDAgMCAuNjQtLjIzIDEgMSAwIDAgMCAuMTMtMS40MUw3LjE0IDEzSDE5YTEgMSAwIDAgMCAwLTJ6XCIvPjwvZz48L2c+PC9zdmc+JyxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIHRzbGludDplbmFibGU6bWF4LWxpbmUtbGVuZ3RoXG4gICAgfVxufVxuTmJJY29uTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICBOYkljb25Db21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbkNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkljb25Nb2R1bGUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkljb25MaWJyYXJpZXMgfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gdGhlIGA8bmItY2FyZD5gIGNvbXBvbmVudC5cbiAqIEl0IGFkZHMgc3R5bGVzIGZvciBhIHByZXNldCBoZWFkZXIgc2VjdGlvbi5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2FyZC1oZWFkZXItdGV4dC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBjYXJkLWhlYWRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhcmQtaGVhZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYXJkLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FyZC1oZWFkZXItYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLWJhc2ljLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1pbmZvLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBjYXJkLWhlYWRlci1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtaGVhZGVyLWRhbmdlci10ZXh0LWNvbG9yOlxuICogY2FyZC1oZWFkZXItY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FyZC1oZWFkZXItY29udHJvbC10ZXh0LWNvbG9yOlxuICovXG5jbGFzcyBOYkNhcmRIZWFkZXJDb21wb25lbnQge1xufVxuTmJDYXJkSGVhZGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYXJkLWhlYWRlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGA8bmctY29udGVudD48L25nLWNvbnRlbnQ+YFxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiAgdGhlIGA8bmItY2FyZD5gIGNvbXBvbmVudC5cbiAqIEFkZHMgc3R5bGVzIGZvciBhIHByZXNldCBib2R5IHNlY3Rpb24uXG4gKi9cbmNsYXNzIE5iQ2FyZEJvZHlDb21wb25lbnQge1xufVxuTmJDYXJkQm9keUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FyZC1ib2R5JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50PjwvbmctY29udGVudD5gXG4gICAgICAgICAgICB9LF0gfVxuXTtcbi8qKlxuICogQ29tcG9uZW50IGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aGluICB0aGUgYDxuYi1jYXJkPmAgY29tcG9uZW50LlxuICogQWRkcyBzdHlsZXMgZm9yIGEgcHJlc2V0IGZvb3RlciBzZWN0aW9uLlxuICovXG5jbGFzcyBOYkNhcmRGb290ZXJDb21wb25lbnQge1xufVxuTmJDYXJkRm9vdGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYXJkLWZvb3RlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGA8bmctY29udGVudD48L25nLWNvbnRlbnQ+YFxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIEJhc2ljIGNvbnRlbnQgY29udGFpbmVyIGNvbXBvbmVudC5cbiAqXG4gKiBCYXNpYyBjYXJkIGV4YW1wbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjYXJkL2NhcmQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhc2ljIGNhcmQgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItY2FyZD5cbiAqICAgPG5iLWNhcmQtYm9keT5cbiAqICAgICBDYXJkXG4gKiAgIDwvbmItY2FyZC1ib2R5PlxuICogPC9uYi1jYXJkPlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDYXJkTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkNhcmRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIENhcmQgd2l0aCBoZWFkZXIgYW5kIGZvb3RlcjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2l0aCBIZWFkZXIgJiBGb290ZXIsIGNhcmQvY2FyZC1mdWxsLmNvbXBvbmVudClcbiAqXG4gKiBNb3N0IG9mIHRoZSB0aW1lIG1haW4gY2FyZCBjb250ZW50IGdvZXMgdG8gYG5iLWNhcmQtYm9keWAsXG4gKiBzbyBpdCBpcyBzdHlsZWQgYW5kIGFsaWduZWQgaW4gYWNjb3JkYW5jZSB3aXRoIHRoZSBoZWFkZXIgYW5kIGZvb3Rlci5cbiAqIEluIGNhc2UgeW91IG5lZWQgYSBoaWdoZXIgbGV2ZWwgb2YgY29udHJvbCwgeW91IGNhbiBwYXNzIGNvbnRlbmQgZGlyZWN0bHkgdG8gYG5iLWNhcmRgLFxuICogc28gYG5iLWNhcmQtYm9keWAgc3R5bGluZyB3aWxsIG5vdCBiZSBhcHBsaWVkLlxuICpcbiAqIENvbnNpZGVyIGFuIGV4YW1wbGUgd2l0aCBgbmItbGlzdGAgY29tcG9uZW50OlxuICogQHN0YWNrZWQtZXhhbXBsZShDYXJkIHdpdGggbGlzdCwgY2FyZC9jYXJkLXdpdGhvdXQtYm9keS5jb21wb25lbnQpXG4gKlxuICogQ29sb3JlZCBjYXJkcyBjb3VsZCBiZSBzaW1wbHkgY29uZmlndXJlZCBieSBwcm92aWRpbmcgYSBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29sb3JlZCBDYXJkLCBjYXJkL2NhcmQtY29sb3JzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGFzc2lnbiBhbiBgYWNjZW50YCBwcm9wZXJ0eSBmb3IgYSBzbGlnaHQgY2FyZCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBY2NlbnQgQ2FyZCwgY2FyZC9jYXJkLWFjY2VudHMuY29tcG9uZW50KVxuICpcbiAqIENhcmRzIG9mIHNtYWxsZXIgc2l6ZXMgY291bGQgYmUgY29tYmluZWQgYW5kIHB1dCBvbiB0aGUgc2FtZSByb3cgd2l0aCBhIGJpZ2dlciBjYXJkIHNvIHRoZXkgaGF2ZSB0aGUgc2FtZSBoZWlnaHRzLlxuICogQHN0YWNrZWQtZXhhbXBsZShDYXJkIHNpemVzIGNvbWJpbmF0aW9ucywgY2FyZC9jYXJkLXNpemVzLWNvbWJpbmF0aW9ucy5jb21wb25lbnQpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShNdWx0aXBsZSBTaXplcywgY2FyZC9jYXJkLXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2FyZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FyZC10ZXh0LWNvbG9yOlxuICogY2FyZC10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2FyZC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhcmQtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhcmQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhcmQtYm9yZGVyLXdpZHRoOlxuICogY2FyZC1ib3JkZXItc3R5bGU6XG4gKiBjYXJkLWJvcmRlci1jb2xvcjpcbiAqIGNhcmQtYm9yZGVyLXJhZGl1czpcbiAqIGNhcmQtcGFkZGluZzpcbiAqIGNhcmQtc2hhZG93OlxuICogY2FyZC1kaXZpZGVyLWNvbG9yOlxuICogY2FyZC1kaXZpZGVyLXN0eWxlOlxuICogY2FyZC1kaXZpZGVyLXdpZHRoOlxuICogY2FyZC1oZWlnaHQtdGlueTpcbiAqIGNhcmQtaGVpZ2h0LXNtYWxsOlxuICogY2FyZC1oZWlnaHQtbWVkaXVtOlxuICogY2FyZC1oZWlnaHQtbGFyZ2U6XG4gKiBjYXJkLWhlaWdodC1naWFudDpcbiAqIGNhcmQtbWFyZ2luLWJvdHRvbTpcbiAqIGNhcmQtc2Nyb2xsYmFyLWNvbG9yOlxuICogY2FyZC1zY3JvbGxiYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhcmQtc2Nyb2xsYmFyLXdpZHRoOlxuICovXG5jbGFzcyBOYkNhcmRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5fc2l6ZSA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2FyZCBzdGF0dXM6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcmQgYWNjZW50IChjb2xvciBvZiB0aGUgdG9wIGJvcmRlcik6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYGluZm9gLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hY2NlbnQgPSAnJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FyZCBzaXplLCBhdmFpbGFibGUgc2l6ZXM6XG4gICAgICogdGlueSwgc21hbGwsIG1lZGl1bSwgbGFyZ2UsIGdpYW50XG4gICAgICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgIH1cbiAgICBzZXQgc2l6ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zaXplID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCB0aW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzbWFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IGdpYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgfVxuICAgIGdldCBkYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgfVxuICAgIGdldCBoYXNBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudDtcbiAgICB9XG4gICAgZ2V0IHByaW1hcnlBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgaW5mb0FjY2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnaW5mbyc7XG4gICAgfVxuICAgIGdldCBzdWNjZXNzQWNjZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdzdWNjZXNzJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmdBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyQWNjZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWNBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG5OYkNhcmRDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhcmQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItY2FyZC1oZWFkZXJcIj48L25nLWNvbnRlbnQ+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItY2FyZC1ib2R5XCI+PC9uZy1jb250ZW50PlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jYXJkLWZvb3RlclwiPjwvbmctY29udGVudD5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FyZENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJDYXJkQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYWNjZW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0aW55OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXRpbnknLF0gfV0sXG4gICAgc21hbGw6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtc21hbGwnLF0gfV0sXG4gICAgbWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBsYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBnaWFudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1naWFudCcsXSB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBpbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICBoYXNBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudCcsXSB9XSxcbiAgICBwcmltYXJ5QWNjZW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hY2NlbnQtcHJpbWFyeScsXSB9XSxcbiAgICBpbmZvQWNjZW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hY2NlbnQtaW5mbycsXSB9XSxcbiAgICBzdWNjZXNzQWNjZW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hY2NlbnQtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nQWNjZW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hY2NlbnQtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXJBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWNBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sQWNjZW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hY2NlbnQtY29udHJvbCcsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV1cbn07XG5cbi8qKlxuICpcbiAqIFJldmVhbCBjYXJkIGV4YW1wbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKE15IGV4YW1wbGUsIHJldmVhbC1jYXJkL3JldmVhbC1jYXJkLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBBcyBhIGNvbnRlbnQgUmV2ZWFsIGNhcmQgYWNjZXB0cyB0d28gaW5zdGFuY2VzIG9mIGBuYi1jYXJkYCAtIGZvciBmcm9udCBhbmQgYmFjayBzaWRlcy5cbiAqXG4gKiBCYXNpYyByZXZlYWwgY2FyZCBjb25maWd1cmF0aW9uOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1yZXZlYWwtY2FyZD5cbiAqICAgPG5iLWNhcmQtZnJvbnQ+XG4gKiAgICAgPG5iLWNhcmQ+XG4gKiAgICAgICA8bmItY2FyZC1ib2R5PlxuICogICAgICAgICBGcm9udFxuICogICAgICAgPC9uYi1jYXJkLWJvZHk+XG4gKiAgICAgPC9uYi1jYXJkPlxuICogICA8L25iLWNhcmQtZnJvbnQ+XG4gKiAgIDxuYi1jYXJkLWJhY2s+XG4gKiAgICAgPG5iLWNhcmQ+XG4gKiAgICAgICA8bmItY2FyZC1ib2R5PlxuICogICAgICAgICBCYWNrXG4gKiAgICAgICA8L25iLWNhcmQtYm9keT5cbiAqICAgICA8L25iLWNhcmQ+XG4gKiAgIDwvbmItY2FyZC1iYWNrPlxuICogPC9uYi1yZXZlYWwtY2FyZD5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2FyZE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDYXJkTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBSZXZlYWwgQ2FyZCB3aXRoIGhlYWRlciBhbmQgZm9vdGVyOlxuICogQHN0YWNrZWQtZXhhbXBsZShXaXRoIEhlYWRlciAmIEZvb3RlciwgcmV2ZWFsLWNhcmQvcmV2ZWFsLWNhcmQtZnVsbC5jb21wb25lbnQpXG4gKlxuICogQ29sb3JlZCByZXZlYWwtY2FyZHMgY291bGQgYmUgc2ltcGx5IGNvbmZpZ3VyZWQgYnkgcHJvdmlkaW5nIGEgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2FyZCwgcmV2ZWFsLWNhcmQvcmV2ZWFsLWNhcmQtY29sb3JzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGFzc2lnbiBhbiBgYWNjZW50YCBwcm9wZXJ0eSBmb3IgYSBzbGlnaHQgY2FyZCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBY2NlbnQgQ2FyZCwgcmV2ZWFsLWNhcmQvcmV2ZWFsLWNhcmQtYWNjZW50cy5jb21wb25lbnQpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShNdWx0aXBsZSBTaXplcywgcmV2ZWFsLWNhcmQvcmV2ZWFsLWNhcmQtc2l6ZXMuY29tcG9uZW50KVxuICovXG5jbGFzcyBOYlJldmVhbENhcmRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogUmV2ZWFsIHN0YXRlXG4gICAgICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmV2ZWFsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cvaGlkZSB0b2dnbGUgYnV0dG9uIHRvIGJlIGFibGUgdG8gY29udHJvbCB0b2dnbGUgZnJvbSB5b3VyIGNvZGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3dUb2dnbGVCdXR0b24gPSB0cnVlO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIHRoaXMucmV2ZWFsZWQgPSAhdGhpcy5yZXZlYWxlZDtcbiAgICB9XG59XG5OYlJldmVhbENhcmRDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXJldmVhbC1jYXJkJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWNhcmQtZnJvbnRcIj48L25nLWNvbnRlbnQ+XG4gICAgPGRpdiBjbGFzcz1cInNlY29uZC1jYXJkLWNvbnRhaW5lclwiPlxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItY2FyZC1iYWNrXCI+PC9uZy1jb250ZW50PlxuICAgIDwvZGl2PlxuICAgIDxhICpuZ0lmPVwic2hvd1RvZ2dsZUJ1dHRvblwiIGNsYXNzPVwicmV2ZWFsLWJ1dHRvblwiIChjbGljayk9XCJ0b2dnbGUoKVwiPlxuICAgICAgPG5iLWljb24gaWNvbj1cImNoZXZyb24tZG93bi1vdXRsaW5lXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvbmItaWNvbj5cbiAgICA8L2E+XG4gIGAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOnJlbGF0aXZlO292ZXJmbG93OmhpZGRlbn06aG9zdCAuc2Vjb25kLWNhcmQtY29udGFpbmVye3Bvc2l0aW9uOmFic29sdXRlO3RvcDoxMDAlO3JpZ2h0OjA7bGVmdDowO292ZXJmbG93OmhpZGRlbjt0cmFuc2l0aW9uOnRvcCAwcyAwLjVzfTpob3N0IDo6bmctZGVlcCBuYi1jYXJkLWZyb250IG5iLWNhcmQsOmhvc3QgOjpuZy1kZWVwIG5iLWNhcmQtYmFjayBuYi1jYXJke2JveC1zaGFkb3c6bm9uZTttYXJnaW46MH06aG9zdCA6Om5nLWRlZXAgbmItY2FyZC1mcm9udHtkaXNwbGF5OmJsb2NrO2hlaWdodDoxMDAlfTpob3N0IDo6bmctZGVlcCBuYi1jYXJkLWJhY2t7cG9zaXRpb246YWJzb2x1dGU7bGVmdDowO3RvcDoxMDAlO3dpZHRoOjEwMCU7dHJhbnNpdGlvbjp0b3AgMC41c306aG9zdCAucmV2ZWFsLWJ1dHRvbntjdXJzb3I6cG9pbnRlcjtwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2JvdHRvbTowO3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzfTpob3N0KC5yZXZlYWxlZCkgLnNlY29uZC1jYXJkLWNvbnRhaW5lcnt0b3A6MDt0cmFuc2l0aW9uOm5vbmV9Omhvc3QoLnJldmVhbGVkKSAuc2Vjb25kLWNhcmQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1jYXJkLWJhY2t7dG9wOjB9Omhvc3QoLnJldmVhbGVkKSAucmV2ZWFsLWJ1dHRvbnt0cmFuc2Zvcm06bm9uZX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJSZXZlYWxDYXJkQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHJldmVhbGVkOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnJldmVhbGVkJyxdIH1dLFxuICAgIHNob3dUb2dnbGVCdXR0b246IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKipcbiAqXG4gKiBGbGlwIGNhcmQgZXhhbXBsZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGZsaXAtY2FyZC9mbGlwLWNhcmQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEFzIGEgY29udGVudCBGbGlwIGNhcmQgYWNjZXB0cyB0d28gaW5zdGFuY2VzIG9mIGBuYi1jYXJkYCAtIGZvciBmcm9udCBhbmQgYmFjayBzaWRlcy5cbiAqXG4gKiBCYXNpYyBmbGlwIGNhcmQgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItZmxpcC1jYXJkPlxuICogICA8bmItY2FyZC1mcm9udD5cbiAqICAgICA8bmItY2FyZD5cbiAqICAgICAgIDxuYi1jYXJkLWJvZHk+XG4gKiAgICAgICAgIEZyb250XG4gKiAgICAgICA8L25iLWNhcmQtYm9keT5cbiAqICAgICA8L25iLWNhcmQ+XG4gKiAgIDwvbmItY2FyZC1mcm9udD5cbiAqICAgPG5iLWNhcmQtYmFjaz5cbiAqICAgICA8bmItY2FyZD5cbiAqICAgICAgIDxuYi1jYXJkLWJvZHk+XG4gKiAgICAgICAgIEJhY2tcbiAqICAgICAgIDwvbmItY2FyZC1ib2R5PlxuICogICAgIDwvbmItY2FyZD5cbiAqICAgPC9uYi1jYXJkLWJhY2s+XG4gKiA8L25iLWZsaXAtY2FyZD5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2FyZE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDYXJkTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBGbGlwIENhcmQgd2l0aCBoZWFkZXIgYW5kIGZvb3RlcjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoV2l0aCBIZWFkZXIgJiBGb290ZXIsIGZsaXAtY2FyZC9mbGlwLWNhcmQtZnVsbC5jb21wb25lbnQudHMpXG4gKlxuICogQ29sb3JlZCBmbGlwLWNhcmRzIGNvdWxkIGJlIHNpbXBseSBjb25maWd1cmVkIGJ5IHByb3ZpZGluZyBhIGBzdGF0dXNgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShDb2xvcmVkIENhcmQsIGZsaXAtY2FyZC9mbGlwLWNhcmQtY29sb3JzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGFzc2lnbiBhbiBgYWNjZW50YCBwcm9wZXJ0eSBmb3IgYSBzbGlnaHQgY2FyZCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBY2NlbnQgQ2FyZCwgZmxpcC1jYXJkL2ZsaXAtY2FyZC1hY2NlbnRzLmNvbXBvbmVudClcbiAqXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKE11bHRpcGxlIFNpemVzLCBmbGlwLWNhcmQvZmxpcC1jYXJkLXNpemVzLmNvbXBvbmVudClcbiAqXG4gKi9cbmNsYXNzIE5iRmxpcENhcmRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogRmxpcCBzdGF0ZVxuICAgICAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZsaXBwZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cvaGlkZSB0b2dnbGUgYnV0dG9uIHRvIGJlIGFibGUgdG8gY29udHJvbCB0b2dnbGUgZnJvbSB5b3VyIGNvZGVcbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNob3dUb2dnbGVCdXR0b24gPSB0cnVlO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIHRoaXMuZmxpcHBlZCA9ICF0aGlzLmZsaXBwZWQ7XG4gICAgfVxufVxuTmJGbGlwQ2FyZENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZmxpcC1jYXJkJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJmbGlwY2FyZC1ib2R5XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZnJvbnQtY29udGFpbmVyXCI+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWNhcmQtZnJvbnRcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxhICpuZ0lmPVwic2hvd1RvZ2dsZUJ1dHRvblwiIGNsYXNzPVwiZmxpcC1idXR0b25cIiAoY2xpY2spPVwidG9nZ2xlKClcIj5cbiAgICAgICAgICA8bmItaWNvbiBpY29uPVwiY2hldnJvbi1sZWZ0LW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9uYi1pY29uPlxuICAgICAgICA8L2E+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJiYWNrLWNvbnRhaW5lclwiPlxuICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jYXJkLWJhY2tcIj48L25nLWNvbnRlbnQ+XG4gICAgICAgIDxhICpuZ0lmPVwic2hvd1RvZ2dsZUJ1dHRvblwiIGNsYXNzPVwiZmxpcC1idXR0b25cIiAoY2xpY2spPVwidG9nZ2xlKClcIj5cbiAgICAgICAgICA8bmItaWNvbiBpY29uPVwiY2hldnJvbi1sZWZ0LW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9uYi1pY29uPlxuICAgICAgICA8L2E+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6YmxvY2s7cGVyc3BlY3RpdmU6MTIwMHB4O3Bvc2l0aW9uOnJlbGF0aXZlfTpob3N0LWNvbnRleHQoLmZsaXBwZWQpIC5mbGlwY2FyZC1ib2R5e3RyYW5zZm9ybTpyb3RhdGVZKC0xODBkZWcpfTpob3N0LWNvbnRleHQoLmZsaXBwZWQpIC5mbGlwY2FyZC1ib2R5IC5mcm9udC1jb250YWluZXJ7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwcyAwLjI1cztiYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6aGlkZGVufTpob3N0LWNvbnRleHQoLmZsaXBwZWQpIC5mbGlwY2FyZC1ib2R5IC5mcm9udC1jb250YWluZXIgLmZsaXAtYnV0dG9ue29wYWNpdHk6MDt6LWluZGV4Oi0xfTpob3N0LWNvbnRleHQoLmZsaXBwZWQpIC5mbGlwY2FyZC1ib2R5IC5iYWNrLWNvbnRhaW5lcntiYWNrZmFjZS12aXNpYmlsaXR5OnZpc2libGU7LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OnZpc2libGV9LmZsaXBjYXJkLWJvZHl7ZGlzcGxheTpmbGV4O3RyYW5zaXRpb246dHJhbnNmb3JtIDAuNXM7dHJhbnNmb3JtLXN0eWxlOnByZXNlcnZlLTNkfS5mbGlwY2FyZC1ib2R5IC5mcm9udC1jb250YWluZXIsLmZsaXBjYXJkLWJvZHkgLmJhY2stY29udGFpbmVye2ZsZXg6MX0uZmxpcGNhcmQtYm9keSAuZnJvbnQtY29udGFpbmVyIC5mbGlwLWJ1dHRvbiwuZmxpcGNhcmQtYm9keSAuYmFjay1jb250YWluZXIgLmZsaXAtYnV0dG9ue2N1cnNvcjpwb2ludGVyO3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjA7Ym90dG9tOjA7b3BhY2l0eToxO3RyYW5zaXRpb246b3BhY2l0eSAwcyAwLjE1c30uZmxpcGNhcmQtYm9keSAuZnJvbnQtY29udGFpbmVye2JhY2tmYWNlLXZpc2liaWxpdHk6dmlzaWJsZTstd2Via2l0LWJhY2tmYWNlLXZpc2liaWxpdHk6dmlzaWJsZTt0cmFuc2l0aW9uOm9wYWNpdHkgMHMgMC4yc30uZmxpcGNhcmQtYm9keSAuYmFjay1jb250YWluZXJ7YmFja2ZhY2UtdmlzaWJpbGl0eTpoaWRkZW47LXdlYmtpdC1iYWNrZmFjZS12aXNpYmlsaXR5OmhpZGRlbjt0cmFuc2Zvcm06cm90YXRlWSgxODBkZWcpfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkZsaXBDYXJkQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGZsaXBwZWQ6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZmxpcHBlZCcsXSB9XSxcbiAgICBzaG93VG9nZ2xlQnV0dG9uOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gdGhlIGA8bmItZmxpcC1jYXJkPmAgYW5kIGA8bmItcmV2ZWFsLWNhcmQ+YCBjb21wb25lbnRzLlxuICpcbiAqIFVzZSBpdCBhcyBhIGNvbnRhaW5lciBmb3IgdGhlIGZyb250IGNhcmQuXG4gKi9cbmNsYXNzIE5iQ2FyZEZyb250Q29tcG9uZW50IHtcbn1cbk5iQ2FyZEZyb250Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYXJkLWZyb250JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWNhcmRcIj48L25nLWNvbnRlbnQ+J1xuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiB0aGUgYDxuYi1mbGlwLWNhcmQ+YCBhbmQgYDxuYi1yZXZlYWwtY2FyZD5gIGNvbXBvbmVudHMuXG4gKlxuICogVXNlIGl0IGFzIGEgY29udGFpbmVyIGZvciB0aGUgYmFjayBjYXJkLlxuICovXG5jbGFzcyBOYkNhcmRCYWNrQ29tcG9uZW50IHtcbn1cbk5iQ2FyZEJhY2tDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhcmQtYmFjaycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jYXJkXCI+PC9uZy1jb250ZW50PidcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9DQVJEX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJDYXJkQ29tcG9uZW50LFxuICAgIE5iQ2FyZEJvZHlDb21wb25lbnQsXG4gICAgTmJDYXJkRm9vdGVyQ29tcG9uZW50LFxuICAgIE5iQ2FyZEhlYWRlckNvbXBvbmVudCxcbiAgICBOYlJldmVhbENhcmRDb21wb25lbnQsXG4gICAgTmJGbGlwQ2FyZENvbXBvbmVudCxcbiAgICBOYkNhcmRGcm9udENvbXBvbmVudCxcbiAgICBOYkNhcmRCYWNrQ29tcG9uZW50LFxuXTtcbmNsYXNzIE5iQ2FyZE1vZHVsZSB7XG59XG5OYkNhcmRNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9DQVJEX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX0NBUkRfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYkNhbGVuZGFyVmlld01vZGU7XG4oZnVuY3Rpb24gKE5iQ2FsZW5kYXJWaWV3TW9kZSkge1xuICAgIE5iQ2FsZW5kYXJWaWV3TW9kZVtcIllFQVJcIl0gPSBcInllYXJcIjtcbiAgICBOYkNhbGVuZGFyVmlld01vZGVbXCJNT05USFwiXSA9IFwibW9udGhcIjtcbiAgICBOYkNhbGVuZGFyVmlld01vZGVbXCJEQVRFXCJdID0gXCJkYXRlXCI7XG59KShOYkNhbGVuZGFyVmlld01vZGUgfHwgKE5iQ2FsZW5kYXJWaWV3TW9kZSA9IHt9KSk7XG52YXIgTmJDYWxlbmRhclNpemU7XG4oZnVuY3Rpb24gKE5iQ2FsZW5kYXJTaXplKSB7XG4gICAgTmJDYWxlbmRhclNpemVbXCJNRURJVU1cIl0gPSBcIm1lZGl1bVwiO1xuICAgIE5iQ2FsZW5kYXJTaXplW1wiTEFSR0VcIl0gPSBcImxhcmdlXCI7XG59KShOYkNhbGVuZGFyU2l6ZSB8fCAoTmJDYWxlbmRhclNpemUgPSB7fSkpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5mdW5jdGlvbiBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKSB7XG4gICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHZhbCA9IHZhbC50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgICAgcmV0dXJuICh2YWwgPT09ICd0cnVlJyB8fCB2YWwgPT09ICcnKTtcbiAgICB9XG4gICAgcmV0dXJuICEhdmFsO1xufVxuXG5mdW5jdGlvbiBmaXJzdENoaWxkTm90Q29tbWVudChub2RlKSB7XG4gICAgY29uc3QgY2hpbGRyZW4gPSBBcnJheVxuICAgICAgICAuZnJvbShub2RlLmNoaWxkTm9kZXMpXG4gICAgICAgIC5maWx0ZXIoKGNoaWxkKSA9PiBjaGlsZC5ub2RlVHlwZSAhPT0gTm9kZS5DT01NRU5UX05PREUpO1xuICAgIHJldHVybiBjaGlsZHJlblswXTtcbn1cbmZ1bmN0aW9uIGxhc3RDaGlsZE5vdENvbW1lbnQobm9kZSkge1xuICAgIGNvbnN0IGNoaWxkcmVuID0gQXJyYXlcbiAgICAgICAgLmZyb20obm9kZS5jaGlsZE5vZGVzKVxuICAgICAgICAuZmlsdGVyKChjaGlsZCkgPT4gY2hpbGQubm9kZVR5cGUgIT09IE5vZGUuQ09NTUVOVF9OT0RFKTtcbiAgICByZXR1cm4gY2hpbGRyZW5bY2hpbGRyZW4ubGVuZ3RoIC0gMV07XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ2FsZW5kYXIgY29tcG9uZW50IHByb3ZpZGVzIGEgY2FwYWJpbGl0eSB0byBjaG9vc2UgYSBkYXRlLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1jYWxlbmRhciBbKGRhdGUpXT1cImRhdGVcIj48L25iLWNhbGVuZGFyPlxuICogPG5iLWNhbGVuZGFyIFtkYXRlXT1cImRhdGVcIiAoZGF0ZUNoYW5nZSk9XCJoYW5kbGVEYXRlQ2hhbmdlKCRldmVudClcIj48L25iLWNhbGVuZGFyPlxuICogYGBgXG4gKlxuICogQmFzaWMgdXNhZ2UgZXhhbXBsZVxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgY2FsZW5kYXIvY2FsZW5kYXItc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2FsZW5kYXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2FsZW5kYXJNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIElmIHlvdSB3YW50IHRvIHNlbGVjdCByYW5nZXMgeW91IGNhbiB1c2UgYE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudGAuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLWNhbGVuZGFyLXJhbmdlIFsocmFuZ2UpXT1cInJhbmdlXCI+PC9uYi1jYWxlbmRhci1yYW5nZT5cbiAqIDxuYi1jYWxlbmRhci1yYW5nZSBbcmFuZ2VdPVwicmFuZ2VcIiAocmFuZ2VDaGFuZ2UpPVwiaGFuZGxlUmFuZ2VDaGFuZ2UoJGV2ZW50KVwiPjwvbmItY2FsZW5kYXItcmFuZ2U+XG4gKiBgYGBcbiAqXG4gKiBJbiBvcmRlciB0byB1c2UgaXQsIHlvdSBoYXZlIHRvIGltcG9ydCBgTmJDYWxlbmRhclJhbmdlTW9kdWxlYC5cbiAqIEBzdGFja2VkLWV4YW1wbGUoUmFuZ2UsIGNhbGVuZGFyL2NhbGVuZGFyLXJhbmdlLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBUaGUgY2FsZW5kYXIgY29tcG9uZW50IGlzIHN1cHBsaWVkIHdpdGggYSBjYWxlbmRhciBuYXZpZ2F0aW9uIHRoYXQgY29udGFpbnMgbmF2aWdhdGUgYnV0dG9ucy5cbiAqIElmIHlvdSBkbyBub3Qgd2FudCB0byB1c2UgaXQgeW91IGNhbiBoaWRlIGNhbGVuZGFyIG5hdmlnYXRpb24gdXNpbmcgYHNob3dOYXZpZ2F0aW9uYCBwcm9wZXJ0eS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoV2l0aG91dCBuYXZpZ2F0aW9uLCBjYWxlbmRhci9jYWxlbmRhci13aXRob3V0LW5hdmlnYXRpb24uY29tcG9uZW50KVxuICpcbiAqIEFzIHlvdSBjYW4gc2VlIGluIHRoZSBiYXNpYyB1c2FnZSBleGFtcGxlIGNhbGVuZGFyIGNvbnRhaW5zIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoIGRheXNcbiAqIHdoaWNoIGNhbiBiZSBkaXNhYmxlZCB1c2luZyBgYm91bmRpbmdNb250aGAgcHJvcGVydHkuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEJvdW5kaW5nIG1vbnRocywgY2FsZW5kYXIvY2FsZW5kYXItYm91bmRpbmctbW9udGguY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gZGVmaW5lIHN0YXJ0aW5nIHZpZXcgb2YgdGhlIGNhbGVuZGFyIGJ5IHNldHRpbmcgYHN0YXJ0Vmlld2AgcHJvcGVydHkuXG4gKiBBdmFpbGFibGUgdmFsdWVzOiB5ZWFyLCBtb250aCBhbmQgZGF0ZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU3RhcnQgdmlldywgY2FsZW5kYXIvY2FsZW5kYXItc3RhcnQtdmlldy5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiB1c2UgYSBsYXJnZXIgdmVyc2lvbiBvZiB0aGUgY2FsZW5kYXIgYnkgZGVmaW5pbmcgc2l6ZSBwcm9wZXJ0eS5cbiAqIEF2YWlsYWJsZSB2YWx1ZXM6IG1lZGl1bSh3aGljaCBpcyBkZWZhdWx0KSBhbmQgbGFyZ2UuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNpemUsIGNhbGVuZGFyL2NhbGVuZGFyLXNpemUuY29tcG9uZW50KVxuICpcbiAqIENhbGVuZGFyIHN1cHBvcnRzIG1pbiBhbmQgbWF4IGRhdGVzIHdoaWNoIGRpc2FibGVzIHZhbHVlcyBvdXQgb2YgbWluLW1heCByYW5nZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQm9yZGVycywgY2FsZW5kYXIvY2FsZW5kYXItbWluLW1heC5jb21wb25lbnQpXG4gKlxuICogQWxzbywgeW91IGNhbiBkZWZpbmUgY3VzdG9tIGZpbHRlciBwcm9wZXJ0eSB0aGF0IHNob3VsZCBiZSBwcmVkaWNhdGUgd2hpY2ggcmVjZWl2ZXNcbiAqIGRhdGUgYW5kIHJldHVybnMgZmFsc2UgaWYgdGhpcyBkYXRlIGhhcyB0byBiZSBkaXNhYmxlZC4gSW4gdGhpcyBleGFtcGxlLCB3ZSBwcm92aWRlIHRoZSBmaWx0ZXJcbiAqIHdoaWNoIGRpc2FibGVzIHdlZWtkYXlzLlxuICogQHN0YWNrZWQtZXhhbXBsZShGaWx0ZXIsIGNhbGVuZGFyL2NhbGVuZGFyLWZpbHRlci5jb21wb25lbnQpXG4gKlxuICogV2VlayBudW1iZXJzIGNvbHVtbiBjb3VsZCBiZSBlbmFibGVkIHZpYSBgc2hvd1dlZWtOdW1iZXJgIGJpbmRpbmc6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFdlZWsgbnVtYmVyLCBjYWxlbmRhci9jYWxlbmRhci13ZWVrLW51bWJlci5jb21wb25lbnQpXG4gKlxuICogSWYgeW91IG5lZWQgY3JlYXRlIGN1c3RvbSBjZWxscyB5b3UgY2FuIGVhc2lseSBwcm92aWRlIGN1c3RvbSBjb21wb25lbnRzIGZvclxuICogY2FsZW5kYXIuIEZvciBleGFtcGxlcyBpZiB5b3Ugd2FudCB0byBzaG93IGFueSBhdmVyYWdlIHByaWNlIHVuZGVyIGVhY2ggZGF0ZSB5b3UgY2FuXG4gKiBqdXN0IHByb3ZpZGUgY3VzdG9tIGBkYXlDZWxsQ29tcG9uZW50YC4gQ3VzdG9tIGNlbGxzIGZvciBtb250aCBhbmQgeWVhciBjYW4gYmUgcHJvdmlkZWRcbiAqIHRoZSBzYW1lIHdheSwgY2hlY2sgQVBJIHJlZmVyZW5jZS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQ3VzdG9tIGRheSBjZWxsLCBjYWxlbmRhci9jYWxlbmRhci1jdXN0b20tZGF5LWNlbGwtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBjYWxlbmRhci13aWR0aDpcbiAqIGNhbGVuZGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1ib3JkZXItc3R5bGU6XG4gKiBjYWxlbmRhci1ib3JkZXItd2lkdGg6XG4gKiBjYWxlbmRhci1ib3JkZXItcmFkaXVzOlxuICogY2FsZW5kYXItdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBjYWxlbmRhci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItcGlja2VyLXBhZGRpbmctdG9wOlxuICogY2FsZW5kYXItcGlja2VyLXBhZGRpbmctYm90dG9tOlxuICogY2FsZW5kYXItcGlja2VyLXBhZGRpbmctc3RhcnQ6XG4gKiBjYWxlbmRhci1waWNrZXItcGFkZGluZy1lbmQ6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRleHQtZm9udC1mYW1pbHk6XG4gKiBjYWxlbmRhci1uYXZpZ2F0aW9uLXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi10aXRsZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi1wYWRkaW5nOlxuICogY2FsZW5kYXItY2VsbC1pbmFjdGl2ZS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWhvdmVyLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItY2VsbC10b2RheS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItY2VsbC10b2RheS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItY2VsbC10b2RheS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItY2VsbC10b2RheS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLXRleHQtZm9udC1zaXplOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXNlbGVjdGVkLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItZGF5LWNlbGwtd2lkdGg6XG4gKiBjYWxlbmRhci1kYXktY2VsbC1oZWlnaHQ6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLXdpZHRoOlxuICogY2FsZW5kYXItbW9udGgtY2VsbC1oZWlnaHQ6XG4gKiBjYWxlbmRhci15ZWFyLWNlbGwtd2lkdGg6XG4gKiBjYWxlbmRhci15ZWFyLWNlbGwtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1iYWNrZ3JvdW5kOlxuICogY2FsZW5kYXItd2Vla2RheS1kaXZpZGVyLWNvbG9yOlxuICogY2FsZW5kYXItd2Vla2RheS1kaXZpZGVyLXdpZHRoOlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItd2Vla2RheS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLXdlZWtkYXktdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktaG9saWRheS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItd2Vla2RheS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXdpZHRoOlxuICogY2FsZW5kYXItd2Vla251bWJlci1iYWNrZ3JvdW5kOlxuICogY2FsZW5kYXItd2Vla251bWJlci1kaXZpZGVyLWNvbG9yOlxuICogY2FsZW5kYXItd2Vla251bWJlci1kaXZpZGVyLXdpZHRoOlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItd2Vla251bWJlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla251bWJlci13aWR0aDpcbiAqIGNhbGVuZGFyLWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXItZGF5LWNlbGwtbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1kYXktY2VsbC1sYXJnZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWxhcmdlLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci1tb250aC1jZWxsLWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXItbW9udGgtY2VsbC1sYXJnZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci15ZWFyLWNlbGwtbGFyZ2Utd2lkdGg6XG4gKiBjYWxlbmRhci15ZWFyLWNlbGwtbGFyZ2UtaGVpZ2h0OlxuICogKi9cbmNsYXNzIE5iQ2FsZW5kYXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB3ZSBzaG91bGQgcmVuZGVyIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoc1xuICAgICAgICAgKiBpbiB0aGUgY3VycmVudCBtb250aCB2aWV3LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJvdW5kaW5nTW9udGggPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBzdGFydGluZyB2aWV3IGZvciBjYWxlbmRhci5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zdGFydFZpZXcgPSBOYkNhbGVuZGFyVmlld01vZGUuREFURTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgdGhlIGNhbGVuZGFyIGFuZCBlbnRpcmUgY29tcG9uZW50cy5cbiAgICAgICAgICogQ2FuIGJlICdtZWRpdW0nIHdoaWNoIGlzIGRlZmF1bHQgb3IgJ2xhcmdlJy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBzaG91bGQgd2Ugc2hvdyBjYWxlbmRhcnMgbmF2aWdhdGlvbiBvciBub3QuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2hvd05hdmlnYXRpb24gPSB0cnVlO1xuICAgICAgICB0aGlzLl9zaG93V2Vla051bWJlciA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBzeW1ib2wgdXNlZCBhcyBhIGhlYWRlciBmb3Igd2VlayBudW1iZXJzIGNvbHVtblxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLndlZWtOdW1iZXJTeW1ib2wgPSAnIyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyBkYXRlIHdoZW4gc2VsZWN0ZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZGF0ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBzaG91bGQgd2Ugc2hvdyB3ZWVrIG51bWJlcnMgY29sdW1uLlxuICAgICAqIEZhbHNlIGJ5IGRlZmF1bHQuXG4gICAgICogKi9cbiAgICBnZXQgc2hvd1dlZWtOdW1iZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaG93V2Vla051bWJlcjtcbiAgICB9XG4gICAgc2V0IHNob3dXZWVrTnVtYmVyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Nob3dXZWVrTnVtYmVyID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG59XG5OYkNhbGVuZGFyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmItYmFzZS1jYWxlbmRhclxuICAgICAgW2JvdW5kaW5nTW9udGhdPVwiYm91bmRpbmdNb250aFwiXG4gICAgICBbc3RhcnRWaWV3XT1cInN0YXJ0Vmlld1wiXG4gICAgICBbZGF0ZV09XCJkYXRlXCJcbiAgICAgIFttaW5dPVwibWluXCJcbiAgICAgIFttYXhdPVwibWF4XCJcbiAgICAgIFtmaWx0ZXJdPVwiZmlsdGVyXCJcbiAgICAgIFtkYXlDZWxsQ29tcG9uZW50XT1cImRheUNlbGxDb21wb25lbnRcIlxuICAgICAgW21vbnRoQ2VsbENvbXBvbmVudF09XCJtb250aENlbGxDb21wb25lbnRcIlxuICAgICAgW3llYXJDZWxsQ29tcG9uZW50XT1cInllYXJDZWxsQ29tcG9uZW50XCJcbiAgICAgIFtzaXplXT1cInNpemVcIlxuICAgICAgW3Zpc2libGVEYXRlXT1cInZpc2libGVEYXRlXCJcbiAgICAgIFtzaG93TmF2aWdhdGlvbl09XCJzaG93TmF2aWdhdGlvblwiXG4gICAgICBbc2hvd1dlZWtOdW1iZXJdPVwic2hvd1dlZWtOdW1iZXJcIlxuICAgICAgW3dlZWtOdW1iZXJTeW1ib2xdPVwid2Vla051bWJlclN5bWJvbFwiXG4gICAgICAoZGF0ZUNoYW5nZSk9XCJkYXRlQ2hhbmdlLmVtaXQoJGV2ZW50KVwiXG4gICAgPjwvbmItYmFzZS1jYWxlbmRhcj5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGJvdW5kaW5nTW9udGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXJ0VmlldzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF5Q2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbW9udGhDZWxsQ29tcG9uZW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB5ZWFyQ2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dOYXZpZ2F0aW9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93V2Vla051bWJlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgd2Vla051bWJlclN5bWJvbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0ZUNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6ZGlyZWN0aXZlLWNsYXNzLXN1ZmZpeFxuY2xhc3MgTmJCdXR0b24ge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBob3N0RWxlbWVudCwgY2QsIHpvbmUsIHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBzaXplLCBhdmFpbGFibGUgc2l6ZXM6XG4gICAgICAgICAqIGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAsIGBsYXJnZWAsIGBnaWFudGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICAvKipcbiAgICAgICAgICogQnV0dG9uIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdXR0b24gc2hhcGVzOiBgcmVjdGFuZ2xlYCwgYHJvdW5kYCwgYHNlbWktcm91bmRgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYXBlID0gJ3JlY3RhbmdsZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCdXR0b24gYXBwZWFyYW5jZTogYGZpbGxlZGAsIGBvdXRsaW5lYCwgYGdob3N0YCwgYGhlcm9gXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZmlsbGVkJztcbiAgICAgICAgdGhpcy5fZnVsbFdpZHRoID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYGZpbGxlZGAgYXBwZWFyYW5jZVxuICAgICAqL1xuICAgIGdldCBmaWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVhcmFuY2UgPT09ICdmaWxsZWQnO1xuICAgIH1cbiAgICBzZXQgZmlsbGVkKHZhbHVlKSB7XG4gICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZmlsbGVkJztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGBvdXRsaW5lYCBhcHBlYXJhbmNlXG4gICAgICovXG4gICAgZ2V0IG91dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVhcmFuY2UgPT09ICdvdXRsaW5lJztcbiAgICB9XG4gICAgc2V0IG91dGxpbmUodmFsdWUpIHtcbiAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdvdXRsaW5lJztcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZXRzIGBnaG9zdGAgYXBwZWFyYW5jZVxuICAgICAqL1xuICAgIGdldCBnaG9zdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2dob3N0JztcbiAgICB9XG4gICAgc2V0IGdob3N0KHZhbHVlKSB7XG4gICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZ2hvc3QnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHNldCBlbGVtZW50IHdpbGwgZmlsbCBpdHMgY29udGFpbmVyXG4gICAgICovXG4gICAgZ2V0IGZ1bGxXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGxXaWR0aDtcbiAgICB9XG4gICAgc2V0IGZ1bGxXaWR0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlcyB0aGUgYnV0dG9uXG4gICAgICovXG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCAhPT0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSAhdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnZGlzYWJsZWQnLCB0aGlzLmRpc2FibGVkKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBpc3N1ZSAjNzk0XG4gICAgZ2V0IHRhYmJhYmxlKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuICctMSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMudGFiSW5kZXggPT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuICcwJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy50YWJJbmRleC50b1N0cmluZygpO1xuICAgIH1cbiAgICBnZXQgdGlueSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3RpbnknO1xuICAgIH1cbiAgICBnZXQgc21hbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgfVxuICAgIGdldCBtZWRpdW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgIH1cbiAgICBnZXQgbGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gICAgfVxuICAgIGdldCBnaWFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICB9XG4gICAgZ2V0IHJlY3RhbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyZWN0YW5nbGUnO1xuICAgIH1cbiAgICBnZXQgcm91bmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncm91bmQnO1xuICAgIH1cbiAgICBnZXQgc2VtaVJvdW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3NlbWktcm91bmQnO1xuICAgIH1cbiAgICBnZXQgaWNvbkxlZnQoKSB7XG4gICAgICAgIGNvbnN0IGVsID0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBpY29uID0gdGhpcy5pY29uRWxlbWVudDtcbiAgICAgICAgcmV0dXJuICEhKGljb24gJiYgZmlyc3RDaGlsZE5vdENvbW1lbnQoZWwpID09PSBpY29uKTtcbiAgICB9XG4gICAgZ2V0IGljb25SaWdodCgpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IGljb24gPSB0aGlzLmljb25FbGVtZW50O1xuICAgICAgICByZXR1cm4gISEoaWNvbiAmJiBsYXN0Q2hpbGROb3RDb21tZW50KGVsKSA9PT0gaWNvbik7XG4gICAgfVxuICAgIGdldCBhZGRpdGlvbmFsQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzU2VydmljZS5pc0N1c3RvbVN0YXR1cyh0aGlzLnN0YXR1cykpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5zdGF0dXNTZXJ2aWNlLmdldFN0YXR1c0NsYXNzKHRoaXMuc3RhdHVzKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIC8vIFRPRE86ICMyMjU0XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnbmItdHJhbnNpdGlvbicpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiovXG4gICAgdXBkYXRlUHJvcGVydGllcyhjb25maWcpIHtcbiAgICAgICAgbGV0IGlzUHJvcGVydHlDaGFuZ2VkID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3Qga2V5IGluIGNvbmZpZykge1xuICAgICAgICAgICAgaWYgKGNvbmZpZy5oYXNPd25Qcm9wZXJ0eShrZXkpICYmIHRoaXNba2V5XSAhPT0gY29uZmlnW2tleV0pIHtcbiAgICAgICAgICAgICAgICB0aGlzW2tleV0gPSBjb25maWdba2V5XTtcbiAgICAgICAgICAgICAgICBpc1Byb3BlcnR5Q2hhbmdlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzUHJvcGVydHlDaGFuZ2VkKSB7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpY29uRWxlbWVudCgpIHtcbiAgICAgICAgY29uc3QgZWwgPSB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHJldHVybiBlbC5xdWVyeVNlbGVjdG9yKCduYi1pY29uJyk7XG4gICAgfVxufVxuTmJCdXR0b24uZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSB9XG5dO1xuTmJCdXR0b24uY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJCdXR0b24ucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaGFwZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYXBwZWFyYW5jZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZmlsbGVkOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFwcGVhcmFuY2UtZmlsbGVkJyxdIH1dLFxuICAgIG91dGxpbmU6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYXBwZWFyYW5jZS1vdXRsaW5lJyxdIH1dLFxuICAgIGdob3N0OiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFwcGVhcmFuY2UtZ2hvc3QnLF0gfV0sXG4gICAgZnVsbFdpZHRoOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmZ1bGwtd2lkdGgnLF0gfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5hcmlhLWRpc2FibGVkJyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYnRuLWRpc2FibGVkJyxdIH1dLFxuICAgIHRhYkluZGV4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWJiYWJsZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci50YWJpbmRleCcsXSB9XSxcbiAgICB0aW55OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXRpbnknLF0gfV0sXG4gICAgc21hbGw6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtc21hbGwnLF0gfV0sXG4gICAgbWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBsYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBnaWFudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1naWFudCcsXSB9XSxcbiAgICByZWN0YW5nbGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNoYXBlLXJlY3RhbmdsZScsXSB9XSxcbiAgICByb3VuZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2hhcGUtcm91bmQnLF0gfV0sXG4gICAgc2VtaVJvdW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaGFwZS1zZW1pLXJvdW5kJyxdIH1dLFxuICAgIGljb25MZWZ0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5pY29uLXN0YXJ0JyxdIH1dLFxuICAgIGljb25SaWdodDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuaWNvbi1lbmQnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEJhc2ljIGJ1dHRvbiBjb21wb25lbnQuXG4gKlxuICogRGVmYXVsdCBidXR0b24gc2l6ZSBpcyBgbWVkaXVtYCBhbmQgc3RhdHVzIGNvbG9yIGlzIGBiYXNpY2A6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBTaG93Y2FzZSwgYnV0dG9uL2J1dHRvbi1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogYGBgaHRtbFxuICogPGJ1dHRvbiBuYkJ1dHRvbj48L2J1dHRvbj5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJCdXR0b25Nb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQnV0dG9uTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBCdXR0b25zIGFyZSBhdmFpbGFibGUgaW4gbXVsdGlwbGUgY29sb3JzIHVzaW5nIGBzdGF0dXNgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gQ29sb3JzLCBidXR0b24vYnV0dG9uLWNvbG9ycy5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgYnV0dG9uIHNpemVzOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQnV0dG9uIFNpemVzLCBidXR0b24vYnV0dG9uLXNpemVzLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIEFuZCB0d28gYWRkaXRpb25hbCBzdHlsZSB0eXBlcyAtIGBvdXRsaW5lYDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKE91dGxpbmUgQnV0dG9ucywgYnV0dG9uL2J1dHRvbi1vdXRsaW5lLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIGFuZCBgaGVyb2A6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gSGVybywgYnV0dG9uL2J1dHRvbi1oZXJvLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIEJ1dHRvbnMgYXZhaWxhYmxlIGluIGRpZmZlcmVudCBzaGFwZXMsIHdoaWNoIGNvdWxkIGJlIGNvbWJpbmVkIHdpdGggdGhlIG90aGVyIHByb3BlcnRpZXM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBTaGFwZXMsIGJ1dHRvbi9idXR0b24tc2hhcGVzLmNvbXBvbmVudClcbiAqXG4gKiBgbmJCdXR0b25gIGNvdWxkIGJlIGFwcGxpZWQgdG8gdGhlIGZvbGxvd2luZyBzZWxlY3RvcnMgLSBgYnV0dG9uYCwgYGlucHV0W3R5cGU9XCJidXR0b25cIl1gLCBgaW5wdXRbdHlwZT1cInN1Ym1pdFwiXWBcbiAqIGFuZCBgYWA6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBFbGVtZW50cywgYnV0dG9uL2J1dHRvbi10eXBlcy5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBCdXR0b24gY2FuIGJlIG1hZGUgYGZ1bGxXaWR0aGA6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEZ1bGwgV2lkdGggQnV0dG9uLCBidXR0b24vYnV0dG9uLWZ1bGwtd2lkdGguY29tcG9uZW50Lmh0bWwpXG4gKlxuICogSWNvbiBjYW4gYmUgcGxhY2VkIGluc2lkZSBvZiBhIGJ1dHRvbiBhcyBhIGNoaWxkIGVsZW1lbnQ6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEljb24gQnV0dG9uLCBidXR0b24vYnV0dG9uLWljb24uY29tcG9uZW50Lmh0bWwpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShJbnRlcmFjdGl2ZSBleGFtcGxlLCBidXR0b24vYnV0dG9uLWludGVyYWN0aXZlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYnV0dG9uLWN1cnNvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdpZHRoOlxuICogYnV0dG9uLW91dGxpbmUtY29sb3I6XG4gKiBidXR0b24tdGV4dC1mb250LWZhbWlseTpcbiAqIGJ1dHRvbi10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYnV0dG9uLWRpc2FibGVkLWN1cnNvcjpcbiAqIGJ1dHRvbi10aW55LXRleHQtZm9udC1zaXplOlxuICogYnV0dG9uLXRpbnktdGV4dC1saW5lLWhlaWdodDpcbiAqIGJ1dHRvbi10aW55LWljb24tc2l6ZTpcbiAqIGJ1dHRvbi10aW55LWljb24tdmVydGljYWwtbWFyZ2luOlxuICogYnV0dG9uLXRpbnktaWNvbi1vZmZzZXQ6XG4gKiBidXR0b24tc21hbGwtdGV4dC1mb250LXNpemU6XG4gKiBidXR0b24tc21hbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIGJ1dHRvbi1zbWFsbC1pY29uLXNpemU6XG4gKiBidXR0b24tc21hbGwtaWNvbi12ZXJ0aWNhbC1tYXJnaW46XG4gKiBidXR0b24tc21hbGwtaWNvbi1vZmZzZXQ6XG4gKiBidXR0b24tbWVkaXVtLXRleHQtZm9udC1zaXplOlxuICogYnV0dG9uLW1lZGl1bS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYnV0dG9uLW1lZGl1bS1pY29uLXNpemU6XG4gKiBidXR0b24tbWVkaXVtLWljb24tdmVydGljYWwtbWFyZ2luOlxuICogYnV0dG9uLW1lZGl1bS1pY29uLW9mZnNldDpcbiAqIGJ1dHRvbi1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGJ1dHRvbi1sYXJnZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYnV0dG9uLWxhcmdlLWljb24tc2l6ZTpcbiAqIGJ1dHRvbi1sYXJnZS1pY29uLXZlcnRpY2FsLW1hcmdpbjpcbiAqIGJ1dHRvbi1sYXJnZS1pY29uLW9mZnNldDpcbiAqIGJ1dHRvbi1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGJ1dHRvbi1naWFudC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYnV0dG9uLWdpYW50LWljb24tc2l6ZTpcbiAqIGJ1dHRvbi1naWFudC1pY29uLXZlcnRpY2FsLW1hcmdpbjpcbiAqIGJ1dHRvbi1naWFudC1pY29uLW9mZnNldDpcbiAqIGJ1dHRvbi1yZWN0YW5nbGUtYm9yZGVyLXJhZGl1czpcbiAqIGJ1dHRvbi1zZW1pLXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiBidXR0b24tcm91bmQtYm9yZGVyLXJhZGl1czpcbiAqIGJ1dHRvbi1maWxsZWQtYm9yZGVyLXN0eWxlOlxuICogYnV0dG9uLWZpbGxlZC1ib3JkZXItd2lkdGg6XG4gKiBidXR0b24tZmlsbGVkLXRleHQtdHJhbnNmb3JtOlxuICogYnV0dG9uLWZpbGxlZC10aW55LXBhZGRpbmc6XG4gKiBidXR0b24tZmlsbGVkLXNtYWxsLXBhZGRpbmc6XG4gKiBidXR0b24tZmlsbGVkLW1lZGl1bS1wYWRkaW5nOlxuICogYnV0dG9uLWZpbGxlZC1sYXJnZS1wYWRkaW5nOlxuICogYnV0dG9uLWZpbGxlZC1naWFudC1wYWRkaW5nOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1iYXNpYy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtcHJpbWFyeS1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWluZm8tYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1pbmZvLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtd2FybmluZy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1kYW5nZXItYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWRhbmdlci1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLXRleHQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZmlsbGVkLWNvbnRyb2wtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWZpbGxlZC1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1maWxsZWQtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYm9yZGVyLXN0eWxlOlxuICogYnV0dG9uLW91dGxpbmUtYm9yZGVyLXdpZHRoOlxuICogYnV0dG9uLW91dGxpbmUtdGV4dC10cmFuc2Zvcm06XG4gKiBidXR0b24tb3V0bGluZS1mb2N1cy1pbnNldC1zaGFkb3ctbGVuZ3RoOlxuICogYnV0dG9uLW91dGxpbmUtdGlueS1wYWRkaW5nOlxuICogYnV0dG9uLW91dGxpbmUtc21hbGwtcGFkZGluZzpcbiAqIGJ1dHRvbi1vdXRsaW5lLW1lZGl1bS1wYWRkaW5nOlxuICogYnV0dG9uLW91dGxpbmUtbGFyZ2UtcGFkZGluZzpcbiAqIGJ1dHRvbi1vdXRsaW5lLWdpYW50LXBhZGRpbmc6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1iYXNpYy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXN1Y2Nlc3MtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1pbmZvLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZm9jdXMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1ob3Zlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctYWN0aXZlLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWRhbmdlci1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tb3V0bGluZS1jb250cm9sLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLW91dGxpbmUtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJvcmRlci1zdHlsZTpcbiAqIGJ1dHRvbi1naG9zdC1ib3JkZXItd2lkdGg6XG4gKiBidXR0b24tZ2hvc3QtdGV4dC10cmFuc2Zvcm06XG4gKiBidXR0b24tZ2hvc3QtZm9jdXMtaW5zZXQtc2hhZG93LWxlbmd0aDpcbiAqIGJ1dHRvbi1naG9zdC10aW55LXBhZGRpbmc6XG4gKiBidXR0b24tZ2hvc3Qtc21hbGwtcGFkZGluZzpcbiAqIGJ1dHRvbi1naG9zdC1tZWRpdW0tcGFkZGluZzpcbiAqIGJ1dHRvbi1naG9zdC1sYXJnZS1wYWRkaW5nOlxuICogYnV0dG9uLWdob3N0LWdpYW50LXBhZGRpbmc6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1iYXNpYy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXByaW1hcnktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtcHJpbWFyeS1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8tdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1mb2N1cy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LXdhcm5pbmctaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWhvdmVyLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3Qtd2FybmluZy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1kYW5nZXItYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWZvY3VzLXRleHQtY29sb3I6XG4gKiBidXR0b24tZ2hvc3QtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtaG92ZXItdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdob3N0LWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGJ1dHRvbi1naG9zdC1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1ib3JkZXItY29sb3I6XG4gKiBidXR0b24taGVyby1ib3JkZXItc3R5bGU6XG4gKiBidXR0b24taGVyby1ib3JkZXItd2lkdGg6XG4gKiBidXR0b24taGVyby10ZXh0LXRyYW5zZm9ybTpcbiAqIGJ1dHRvbi1oZXJvLXRpbnktcGFkZGluZzpcbiAqIGJ1dHRvbi1oZXJvLXNtYWxsLXBhZGRpbmc6XG4gKiBidXR0b24taGVyby1tZWRpdW0tcGFkZGluZzpcbiAqIGJ1dHRvbi1oZXJvLWxhcmdlLXBhZGRpbmc6XG4gKiBidXR0b24taGVyby1naWFudC1wYWRkaW5nOlxuICogYnV0dG9uLWhlcm8tc2hhZG93OlxuICogYnV0dG9uLWhlcm8tdGV4dC1zaGFkb3c6XG4gKiBidXR0b24taGVyby1iZXZlbC1zaXplOlxuICogYnV0dG9uLWhlcm8tZ2xvdy1zaXplOlxuICogYnV0dG9uLWhlcm8tb3V0bGluZS1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLW91dGxpbmUtd2lkdGg6XG4gKiBidXR0b24taGVyby1iYXNpYy10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1nbG93LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWZvY3VzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1iYXNpYy1ob3Zlci1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtYWN0aXZlLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWJldmVsLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1nbG93LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1wcmltYXJ5LWZvY3VzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1ob3Zlci1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tcHJpbWFyeS1hY3RpdmUtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtYmV2ZWwtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXN1Y2Nlc3MtZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWFjdGl2ZS1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1zdWNjZXNzLWFjdGl2ZS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1iZXZlbC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tZ2xvdy1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8taW5mby1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8taG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tYWN0aXZlLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWluZm8tYWN0aXZlLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWJldmVsLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1nbG93LWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby13YXJuaW5nLWZvY3VzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1ob3Zlci1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8td2FybmluZy1hY3RpdmUtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWJldmVsLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWdsb3ctY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItZm9jdXMtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWhvdmVyLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1kYW5nZXItYWN0aXZlLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1hY3RpdmUtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWRhbmdlci1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLXRleHQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWJldmVsLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1nbG93LWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBidXR0b24taGVyby1jb250cm9sLWZvY3VzLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1ob3Zlci1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1hY3RpdmUtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYnV0dG9uLWhlcm8tY29udHJvbC1hY3RpdmUtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJ1dHRvbi1oZXJvLWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJCdXR0b25Db21wb25lbnQgZXh0ZW5kcyBOYkJ1dHRvbiB7XG4gICAgY29uc3RydWN0b3IocmVuZGVyZXIsIGhvc3RFbGVtZW50LCBjZCwgem9uZSwgc3RhdHVzU2VydmljZSkge1xuICAgICAgICBzdXBlcihyZW5kZXJlciwgaG9zdEVsZW1lbnQsIGNkLCB6b25lLCBzdGF0dXNTZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBgaGVyb2AgYXBwZWFyYW5jZVxuICAgICAqL1xuICAgIGdldCBoZXJvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlYXJhbmNlID09PSAnaGVybyc7XG4gICAgfVxuICAgIHNldCBoZXJvKHZhbHVlKSB7XG4gICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnaGVybyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgfVxuICAgIGdldCBzdWNjZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqIEtlZXAgdGhpcyBoYW5kbGVyIHRvIHBhcnRpYWxseSBzdXBwb3J0IGFuY2hvciBkaXNhYmxpbmcuXG4gICAgICogVW5saWtlIGJ1dHRvbiwgYW5jaG9yIGRvZXNuJ3QgaGF2ZSAnZGlzYWJsZWQnIERPTSBwcm9wZXJ0eSxcbiAgICAgKiBzbyBoYW5kbGVyIHdpbGwgYmUgY2FsbGVkIGFueXdheS4gV2UgcHJldmVudGluZyBuYXZpZ2F0aW9uIGFuZCBidWJibGluZy5cbiAgICAgKiBEaXNhYmxpbmcgaXMgcGFydGlhbCBkdWUgdG8gY2xpY2sgaGFuZGxlcnMgcHJlY2VkZW5jZS4gQ29uc2lkZXIgZXhhbXBsZTpcbiAgICAgKiA8YSBuYkJ1dHRvbiBbZGlzYWJsZWRdPVwidHJ1ZVwiIChjbGljayk9XCJjbGlja0hhbmRsZXIoKVwiPi4uLjwvYT5cbiAgICAgKiAnY2xpY2tIYW5kbGVyJyB3aWxsIGJlIGNhbGxlZCBiZWZvcmUgb3VyIGhvc3QgbGlzdGVuZXIgYmVsb3cuIFdlIGNhbid0IHByZXZlbnRcbiAgICAgKiBzdWNoIGhhbmRsZXJzIGNhbGwuXG4gICAgICovXG4gICAgb25DbGljayhldmVudCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJCdXR0b25Db21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2J1dHRvbltuYkJ1dHRvbl0sYVtuYkJ1dHRvbl0saW5wdXRbdHlwZT1cImJ1dHRvblwiXVtuYkJ1dHRvbl0saW5wdXRbdHlwZT1cInN1Ym1pdFwiXVtuYkJ1dHRvbl0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iQnV0dG9uLCB1c2VFeGlzdGluZzogTmJCdXR0b25Db21wb25lbnQgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQnV0dG9uQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iQnV0dG9uQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGhlcm86IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYXBwZWFyYW5jZS1oZXJvJyxdIH1dLFxuICAgIHByaW1hcnk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyxdIH1dLFxuICAgIGluZm86IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1pbmZvJyxdIH1dLFxuICAgIHN1Y2Nlc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyxdIH1dLFxuICAgIHdhcm5pbmc6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyxdIH1dLFxuICAgIGRhbmdlcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWRhbmdlcicsXSB9XSxcbiAgICBiYXNpYzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWJhc2ljJyxdIH1dLFxuICAgIGNvbnRyb2w6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1jb250cm9sJyxdIH1dLFxuICAgIG9uQ2xpY2s6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydjbGljaycsIFsnJGV2ZW50J10sXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgTkJfQlVUVE9OX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJCdXR0b25Db21wb25lbnQsXG5dO1xuY2xhc3MgTmJCdXR0b25Nb2R1bGUge1xufVxuTmJCdXR0b25Nb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfQlVUVE9OX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX0JVVFRPTl9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkRhdGVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5EQVlTX0lOX1dFRUsgPSA3O1xuICAgICAgICAvKipcbiAgICAgICAgICogTnVtYmVyIG9mIGhvdXJzIGluIEFNL1BNIGRheSBwZXJpb2RzLlxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuSE9VUlNfSU5fREFZX1BFUklPRCA9IDEyO1xuICAgIH1cbiAgICBzZXRMb2NhbGUobG9jYWxlKSB7XG4gICAgICAgIHRoaXMubG9jYWxlID0gbG9jYWxlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGVja3MgaWYgdGhlIGRhdGUgaXMgYmV0d2VlbiB0aGUgc3RhcnQgZGF0ZSBhbmQgdGhlIGVuZCBkYXRlLlxuICAgICAqICovXG4gICAgaXNCZXR3ZWVuKGRhdGUsIHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcGFyZURhdGVzKGRhdGUsIHN0YXJ0KSA+IDAgJiYgdGhpcy5jb21wYXJlRGF0ZXMoZGF0ZSwgZW5kKSA8IDA7XG4gICAgfVxuICAgIDtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaXMgdHdvIGRhdGVzIGhhdmUgdGhlIHNhbWUgZGF5LlxuICAgICAqICovXG4gICAgaXNTYW1lRGF5U2FmZShkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUxICYmIGRhdGUyICYmIHRoaXMuaXNTYW1lRGF5KGRhdGUxLCBkYXRlMik7XG4gICAgfVxuICAgIDtcbiAgICAvKipcbiAgICAgKiBDaGVja3MgaXMgdHdvIGRhdGVzIGhhdmUgdGhlIHNhbWUgbW9udGguXG4gICAgICogKi9cbiAgICBpc1NhbWVNb250aFNhZmUoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMSAmJiBkYXRlMiAmJiB0aGlzLmlzU2FtZU1vbnRoKGRhdGUxLCBkYXRlMik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrcyBpcyB0d28gZGF0ZXMgaGF2ZSB0aGUgc2FtZSB5ZWFyLlxuICAgICAqICovXG4gICAgaXNTYW1lWWVhclNhZmUoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMSAmJiBkYXRlMiAmJiB0aGlzLmlzU2FtZVllYXIoZGF0ZTEsIGRhdGUyKTtcbiAgICB9XG4gICAgaXNTYW1lSG91ckFuZE1pbnV0ZShkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTYW1lSG91cihkYXRlMSwgZGF0ZTIpICYmIHRoaXMuaXNTYW1lTWludXRlKGRhdGUxLCBkYXRlMik7XG4gICAgfVxuICAgIGlzU2FtZUhvdXIoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEhvdXJzKGRhdGUxKSA9PT0gdGhpcy5nZXRIb3VycyhkYXRlMik7XG4gICAgfVxuICAgIGlzU2FtZU1pbnV0ZShkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWludXRlcyhkYXRlMSkgPT09IHRoaXMuZ2V0TWludXRlcyhkYXRlMik7XG4gICAgfVxuICAgIGdldFR3ZW50eUZvdXJIb3Vyc0Zvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuICdISDptbSc7XG4gICAgfVxuICAgIGdldFR3ZW50eUZvdXJIb3Vyc0Zvcm1hdFdpdGhTZWNvbmRzKCkge1xuICAgICAgICByZXR1cm4gJ0hIOm1tOnNzJztcbiAgICB9XG4gICAgZ2V0VHdlbHZlSG91cnNGb3JtYXRXaXRoU2Vjb25kcygpIHtcbiAgICAgICAgcmV0dXJuICdoaDptbTpzcyBhJztcbiAgICB9XG4gICAgZ2V0RGF5UGVyaW9kKGRhdGUpIHtcbiAgICAgICAgY29uc3QgaXNGaXJzdERheVBlcmlvZCA9IHRoaXMuZ2V0SG91cnMoZGF0ZSkgPCB0aGlzLkhPVVJTX0lOX0RBWV9QRVJJT0Q7XG4gICAgICAgIGlmIChpc0ZpcnN0RGF5UGVyaW9kKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJBTVwiIC8qIEFNICovO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIFwiUE1cIiAvKiBQTSAqLztcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgYmF0Y2ggPSAodGFyZ2V0LCBiYXRjaFNpemUsIG9mZnNldCA9IDApID0+IHtcbiAgICByZXR1cm4gdGFyZ2V0LnJlZHVjZSgocmVzLCBpdGVtLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCBjaHVua0luZGV4ID0gTWF0aC5mbG9vcigoaW5kZXggKyBvZmZzZXQpIC8gYmF0Y2hTaXplKTtcbiAgICAgICAgaWYgKCFyZXNbY2h1bmtJbmRleF0pIHtcbiAgICAgICAgICAgIHJlc1tjaHVua0luZGV4XSA9IFtdO1xuICAgICAgICB9XG4gICAgICAgIHJlc1tjaHVua0luZGV4XS5wdXNoKGl0ZW0pO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH0sIFtdKTtcbn07XG4vKipcbiAqIHJldHVybnMgYXJyYXkgd2l0aCBudW1iZXJzIGZyb20gZmlyc3QgYXJndW1lbnQgdG8gYm91bmQuXG4gKiAqL1xuY29uc3QgcmFuZ2VGcm9tVG8gPSAoZnJvbSQkMSwgdG8gPSAwLCBwcm9kdWNlciA9IGkgPT4gaSkgPT4ge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSBmcm9tJCQxOyBpIDwgdG87IGkrKykge1xuICAgICAgICBhcnIucHVzaChwcm9kdWNlcihpKSk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG59O1xuLyoqXG4gKiByZXR1cm5zIGFycmF5IHdpdGggbnVtYmVycyBmcm9tIHplcm8gdG8gYm91bmQuXG4gKiAqL1xuY29uc3QgcmFuZ2UgPSAoYm91bmQsIHByb2R1Y2VyID0gaSA9PiBpKSA9PiB7XG4gICAgcmV0dXJuIHJhbmdlRnJvbVRvKDAsIGJvdW5kLCBwcm9kdWNlcik7XG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICB9XG4gICAgY3JlYXRlRGF5c0dyaWQoYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGggPSB0cnVlKSB7XG4gICAgICAgIGNvbnN0IHdlZWtzID0gdGhpcy5jcmVhdGVEYXRlcyhhY3RpdmVNb250aCk7XG4gICAgICAgIHJldHVybiB0aGlzLndpdGhCb3VuZGluZ01vbnRocyh3ZWVrcywgYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgpO1xuICAgIH1cbiAgICBjcmVhdGVEYXRlcyhhY3RpdmVNb250aCkge1xuICAgICAgICBjb25zdCBkYXlzID0gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChhY3RpdmVNb250aCk7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZXZWVrRGF5RGlmZiA9IHRoaXMuZ2V0U3RhcnRPZldlZWtEYXlEaWZmKGFjdGl2ZU1vbnRoKTtcbiAgICAgICAgcmV0dXJuIGJhdGNoKGRheXMsIHRoaXMuZGF0ZVNlcnZpY2UuREFZU19JTl9XRUVLLCBzdGFydE9mV2Vla0RheURpZmYpO1xuICAgIH1cbiAgICB3aXRoQm91bmRpbmdNb250aHMod2Vla3MsIGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoKSB7XG4gICAgICAgIGxldCB3aXRoQm91bmRpbmdNb250aHMgPSB3ZWVrcztcbiAgICAgICAgaWYgKHRoaXMuaXNTaG91bGRBZGRQcmV2Qm91bmRpbmdNb250aCh3aXRoQm91bmRpbmdNb250aHMpKSB7XG4gICAgICAgICAgICB3aXRoQm91bmRpbmdNb250aHMgPSB0aGlzLmFkZFByZXZCb3VuZGluZ01vbnRoKHdpdGhCb3VuZGluZ01vbnRocywgYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzU2hvdWxkQWRkTmV4dEJvdW5kaW5nTW9udGgod2l0aEJvdW5kaW5nTW9udGhzKSkge1xuICAgICAgICAgICAgd2l0aEJvdW5kaW5nTW9udGhzID0gdGhpcy5hZGROZXh0Qm91bmRpbmdNb250aCh3aXRoQm91bmRpbmdNb250aHMsIGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gd2l0aEJvdW5kaW5nTW9udGhzO1xuICAgIH1cbiAgICBhZGRQcmV2Qm91bmRpbmdNb250aCh3ZWVrcywgYWN0aXZlTW9udGgsIGJvdW5kaW5nTW9udGgpIHtcbiAgICAgICAgY29uc3QgZmlyc3RXZWVrID0gd2Vla3Muc2hpZnQoKTtcbiAgICAgICAgY29uc3QgcmVxdWlyZWRJdGVtcyA9IHRoaXMuZGF0ZVNlcnZpY2UuREFZU19JTl9XRUVLIC0gZmlyc3RXZWVrLmxlbmd0aDtcbiAgICAgICAgZmlyc3RXZWVrLnVuc2hpZnQoLi4udGhpcy5jcmVhdGVQcmV2Qm91bmRpbmdEYXlzKGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoLCByZXF1aXJlZEl0ZW1zKSk7XG4gICAgICAgIHJldHVybiBbZmlyc3RXZWVrLCAuLi53ZWVrc107XG4gICAgfVxuICAgIGFkZE5leHRCb3VuZGluZ01vbnRoKHdlZWtzLCBhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCkge1xuICAgICAgICBjb25zdCBsYXN0V2VlayA9IHdlZWtzLnBvcCgpO1xuICAgICAgICBjb25zdCByZXF1aXJlZEl0ZW1zID0gdGhpcy5kYXRlU2VydmljZS5EQVlTX0lOX1dFRUsgLSBsYXN0V2Vlay5sZW5ndGg7XG4gICAgICAgIGxhc3RXZWVrLnB1c2goLi4udGhpcy5jcmVhdGVOZXh0Qm91bmRpbmdEYXlzKGFjdGl2ZU1vbnRoLCBib3VuZGluZ01vbnRoLCByZXF1aXJlZEl0ZW1zKSk7XG4gICAgICAgIHJldHVybiBbLi4ud2Vla3MsIGxhc3RXZWVrXTtcbiAgICB9XG4gICAgY3JlYXRlUHJldkJvdW5kaW5nRGF5cyhhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCwgcmVxdWlyZWRJdGVtcykge1xuICAgICAgICBjb25zdCBtb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkTW9udGgoYWN0aXZlTW9udGgsIC0xKTtcbiAgICAgICAgY29uc3QgZGF5c0luTW9udGggPSB0aGlzLmRhdGVTZXJ2aWNlLmdldE51bWJlck9mRGF5c0luTW9udGgobW9udGgpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChtb250aClcbiAgICAgICAgICAgIC5zbGljZShkYXlzSW5Nb250aCAtIHJlcXVpcmVkSXRlbXMpXG4gICAgICAgICAgICAubWFwKGRhdGUgPT4gYm91bmRpbmdNb250aCA/IGRhdGUgOiBudWxsKTtcbiAgICB9XG4gICAgY3JlYXRlTmV4dEJvdW5kaW5nRGF5cyhhY3RpdmVNb250aCwgYm91bmRpbmdNb250aCwgcmVxdWlyZWRJdGVtcykge1xuICAgICAgICBjb25zdCBtb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkTW9udGgoYWN0aXZlTW9udGgsIDEpO1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVEYXRlUmFuZ2VGb3JNb250aChtb250aClcbiAgICAgICAgICAgIC5zbGljZSgwLCByZXF1aXJlZEl0ZW1zKVxuICAgICAgICAgICAgLm1hcChkYXRlID0+IGJvdW5kaW5nTW9udGggPyBkYXRlIDogbnVsbCk7XG4gICAgfVxuICAgIGdldFN0YXJ0T2ZXZWVrRGF5RGlmZihkYXRlKSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0T2ZNb250aCA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhTdGFydChkYXRlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2Vla1N0YXJ0RGlmZihzdGFydE9mTW9udGgpO1xuICAgIH1cbiAgICBnZXRXZWVrU3RhcnREaWZmKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuICg3IC0gdGhpcy5kYXRlU2VydmljZS5nZXRGaXJzdERheU9mV2VlaygpICsgdGhpcy5kYXRlU2VydmljZS5nZXREYXlPZldlZWsoZGF0ZSkpICUgNztcbiAgICB9XG4gICAgaXNTaG91bGRBZGRQcmV2Qm91bmRpbmdNb250aCh3ZWVrcykge1xuICAgICAgICByZXR1cm4gd2Vla3NbMF0ubGVuZ3RoIDwgdGhpcy5kYXRlU2VydmljZS5EQVlTX0lOX1dFRUs7XG4gICAgfVxuICAgIGlzU2hvdWxkQWRkTmV4dEJvdW5kaW5nTW9udGgod2Vla3MpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtzW3dlZWtzLmxlbmd0aCAtIDFdLmxlbmd0aCA8IHRoaXMuZGF0ZVNlcnZpY2UuREFZU19JTl9XRUVLO1xuICAgIH1cbiAgICBjcmVhdGVEYXRlUmFuZ2VGb3JNb250aChkYXRlKSB7XG4gICAgICAgIGNvbnN0IGRheXNJbk1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5nZXROdW1iZXJPZkRheXNJbk1vbnRoKGRhdGUpO1xuICAgICAgICByZXR1cm4gcmFuZ2UoZGF5c0luTW9udGgsIGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgeWVhciA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcihkYXRlKTtcbiAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aChkYXRlKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmNyZWF0ZURhdGUoeWVhciwgbW9udGgsIGkgKyAxKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkRhdGVTZXJ2aWNlIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKHRydWUpO1xuICAgICAgICB0aGlzLmRheUNlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGdldCB0b2RheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lRGF5U2FmZSh0aGlzLmRhdGUsIHRoaXMuZGF0ZVNlcnZpY2UudG9kYXkoKSk7XG4gICAgfVxuICAgIGdldCBib3VuZGluZ01vbnRoKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lTW9udGhTYWZlKHRoaXMuZGF0ZSwgdGhpcy52aXNpYmxlRGF0ZSk7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lRGF5U2FmZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgfVxuICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRhdGU7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc21hbGxlclRoYW5NaW4oKSB8fCB0aGlzLmdyZWF0ZXJUaGFuTWF4KCkgfHwgdGhpcy5kb250Rml0RmlsdGVyKCk7XG4gICAgfVxuICAgIGdldCBpc0xhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICB9XG4gICAgZ2V0IGRheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGUodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgb25DbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5lbXB0eSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgc21hbGxlclRoYW5NaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCB0aGlzLm1pbikgPCAwO1xuICAgIH1cbiAgICBncmVhdGVyVGhhbk1heCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLm1heCAmJiB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLmRhdGUsIHRoaXMubWF4KSA+IDA7XG4gICAgfVxuICAgIGRvbnRGaXRGaWx0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5maWx0ZXIgJiYgIXRoaXMuZmlsdGVyKHRoaXMuZGF0ZSk7XG4gICAgfVxufVxuTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLWRheS1jZWxsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJjZWxsLWNvbnRlbnRcIj5cbiAgICAgIHt7IGRheSB9fVxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhckRheUNlbGxDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0ZWRWYWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWx0ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHRvZGF5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2RheScsXSB9XSxcbiAgICBib3VuZGluZ01vbnRoOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5ib3VuZGluZy1tb250aCcsXSB9XSxcbiAgICBzZWxlY3RlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2VsZWN0ZWQnLF0gfV0sXG4gICAgZW1wdHk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmVtcHR5JyxdIH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5kaXNhYmxlZCcsXSB9XSxcbiAgICBpc0xhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIGRheUNlbGxDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZGF5LWNlbGwnLF0gfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGNhcGFiaWxpdHkgcGljayBkYXlzLlxuICogKi9cbmNsYXNzIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG1vbnRoTW9kZWwpIHtcbiAgICAgICAgdGhpcy5tb250aE1vZGVsID0gbW9udGhNb2RlbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgd2Ugc2hvdWxkIHJlbmRlciBwcmV2aW91cyBhbmQgbmV4dCBtb250aHNcbiAgICAgICAgICogaW4gdGhlIGN1cnJlbnQgbW9udGggdmlldy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5ib3VuZGluZ01vbnRocyA9IHRydWU7XG4gICAgICAgIHRoaXMuY2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJEYXlDZWxsQ29tcG9uZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogU2l6ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBDYW4gYmUgJ21lZGl1bScgd2hpY2ggaXMgZGVmYXVsdCBvciAnbGFyZ2UnLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuX3Nob3dXZWVrTnVtYmVyID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaXJlcyBuZXdseSBzZWxlY3RlZCBkYXRlLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmRhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBkYXkgY2VsbCBjb21wb25lbnQuIEhhdmUgdG8gaW1wbGVtZW50IGBOYkNhbGVuZGFyQ2VsbGAgaW50ZXJmYWNlLlxuICAgICAqICovXG4gICAgc2V0IHNldENlbGxDb21wb25lbnQoY2VsbENvbXBvbmVudCkge1xuICAgICAgICBpZiAoY2VsbENvbXBvbmVudCkge1xuICAgICAgICAgICAgdGhpcy5jZWxsQ29tcG9uZW50ID0gY2VsbENvbXBvbmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgKiAqL1xuICAgIGdldCBzaG93V2Vla051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgIH1cbiAgICBzZXQgc2hvd1dlZWtOdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgbGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyh7IHZpc2libGVEYXRlLCBib3VuZGluZ01vbnRocyB9KSB7XG4gICAgICAgIGlmICh2aXNpYmxlRGF0ZSB8fCBib3VuZGluZ01vbnRocykge1xuICAgICAgICAgICAgdGhpcy53ZWVrcyA9IHRoaXMubW9udGhNb2RlbC5jcmVhdGVEYXlzR3JpZCh0aGlzLnZpc2libGVEYXRlLCB0aGlzLmJvdW5kaW5nTW9udGhzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvblNlbGVjdChkYXkpIHtcbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQoZGF5KTtcbiAgICB9XG59XG5OYkNhbGVuZGFyRGF5UGlja2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1kYXktcGlja2VyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYi1jYWxlbmRhci13ZWVrLW51bWJlcnMgKm5nSWY9XCJzaG93V2Vla051bWJlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2Vla3NdPVwid2Vla3NcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbd2Vla051bWJlclN5bWJvbF09XCJ3ZWVrTnVtYmVyU3ltYm9sXCI+XG4gICAgPC9uYi1jYWxlbmRhci13ZWVrLW51bWJlcnM+XG4gICAgPGRpdiBjbGFzcz1cImRheXMtY29udGFpbmVyXCI+XG4gICAgICA8bmItY2FsZW5kYXItZGF5cy1uYW1lcyBbc2l6ZV09XCJzaXplXCI+PC9uYi1jYWxlbmRhci1kYXlzLW5hbWVzPlxuICAgICAgPG5iLWNhbGVuZGFyLXBpY2tlclxuICAgICAgICAgIFtkYXRhXT1cIndlZWtzXCJcbiAgICAgICAgICBbdmlzaWJsZURhdGVdPVwidmlzaWJsZURhdGVcIlxuICAgICAgICAgIFtzZWxlY3RlZFZhbHVlXT1cImRhdGVcIlxuICAgICAgICAgIFtjZWxsQ29tcG9uZW50XT1cImNlbGxDb21wb25lbnRcIlxuICAgICAgICAgIFttaW5dPVwibWluXCJcbiAgICAgICAgICBbbWF4XT1cIm1heFwiXG4gICAgICAgICAgW2ZpbHRlcl09XCJmaWx0ZXJcIlxuICAgICAgICAgIFtzaXplXT1cInNpemVcIlxuICAgICAgICAgIChzZWxlY3QpPVwib25TZWxlY3QoJGV2ZW50KVwiPlxuICAgICAgPC9uYi1jYWxlbmRhci1waWNrZXI+XG4gICAgPC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXh9LmRheXMtY29udGFpbmVye3dpZHRoOjEwMCV9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkNhbGVuZGFyTW9udGhNb2RlbFNlcnZpY2UgfVxuXTtcbk5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGJvdW5kaW5nTW9udGhzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtaW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1heDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZmlsdGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZXRDZWxsQ29tcG9uZW50OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWydjZWxsQ29tcG9uZW50JyxdIH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dXZWVrTnVtYmVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB3ZWVrTnVtYmVyU3ltYm9sOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJEYXlzTmFtZXNDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICB9XG4gICAgZ2V0IGlzTGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgY29uc3QgZGF5cyA9IHRoaXMuY3JlYXRlRGF5c05hbWVzKCk7XG4gICAgICAgIHRoaXMuZGF5cyA9IHRoaXMuc2hpZnRTdGFydE9mV2VlayhkYXlzKTtcbiAgICB9XG4gICAgY3JlYXRlRGF5c05hbWVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXREYXlPZldlZWtOYW1lcygpXG4gICAgICAgICAgICAubWFwKHRoaXMubWFya0lmSG9saWRheSk7XG4gICAgfVxuICAgIHNoaWZ0U3RhcnRPZldlZWsoZGF5cykge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0Rmlyc3REYXlPZldlZWsoKTsgaSsrKSB7XG4gICAgICAgICAgICBkYXlzLnB1c2goZGF5cy5zaGlmdCgpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF5cztcbiAgICB9XG4gICAgbWFya0lmSG9saWRheShuYW1lLCBpKSB7XG4gICAgICAgIHJldHVybiB7IG5hbWUsIGlzSG9saWRheTogaSAlIDYgPT09IDAgfTtcbiAgICB9XG59XG5OYkNhbGVuZGFyRGF5c05hbWVzQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1kYXlzLW5hbWVzJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJkYXlcIiAqbmdGb3I9XCJsZXQgZGF5IG9mIGRheXNcIiBbY2xhc3MuaG9saWRheV09XCJkYXkuaXNIb2xpZGF5XCI+e3sgZGF5Lm5hbWUgfX08L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2Vlbn06aG9zdCAuZGF5e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcn1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfVxuXTtcbk5iQ2FsZW5kYXJEYXlzTmFtZXNDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXNMYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICAgICAgdGhpcy5tb250aENlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lTW9udGhTYWZlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHRvZGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aFNhZmUodGhpcy5kYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNtYWxsZXJUaGFuTWluKCkgfHwgdGhpcy5ncmVhdGVyVGhhbk1heCgpO1xuICAgIH1cbiAgICBnZXQgaXNMYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxuICAgIGdldCBtb250aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGhOYW1lKHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH1cbiAgICBzbWFsbGVyVGhhbk1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLm1pbiAmJiB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLm1vbnRoRW5kKCksIHRoaXMubWluKSA8IDA7XG4gICAgfVxuICAgIGdyZWF0ZXJUaGFuTWF4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMubW9udGhTdGFydCgpLCB0aGlzLm1heCkgPiAwO1xuICAgIH1cbiAgICBtb250aFN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aFN0YXJ0KHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIG1vbnRoRW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aEVuZCh0aGlzLmRhdGUpO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLW1vbnRoLWNlbGwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImNlbGwtY29udGVudFwiPlxuICAgICAge3sgbW9udGggfX1cbiAgICA8L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3RlZFZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtaW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1heDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgc2VsZWN0ZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNlbGVjdGVkJyxdIH1dLFxuICAgIHRvZGF5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2RheScsXSB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZGlzYWJsZWQnLF0gfV0sXG4gICAgaXNMYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBtb250aENlbGxDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubW9udGgtY2VsbCcsXSB9XSxcbiAgICBvbkNsaWNrOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IE1PTlRIU19JTl9WSUVXID0gMTI7XG5jb25zdCBNT05USFNfSU5fQ09MVU1OID0gNDtcbmNsYXNzIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMubW9udGhDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuY2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQ7XG4gICAgfVxuICAgIHNldCBfY2VsbENvbXBvbmVudChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKGNoYW5nZXMubW9udGgpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdE1vbnRocygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGluaXRNb250aHMoKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGUodGhpcy5tb250aCk7XG4gICAgICAgIGNvbnN0IHllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5tb250aCk7XG4gICAgICAgIGNvbnN0IGZpcnN0TW9udGggPSB0aGlzLmRhdGVTZXJ2aWNlLmNyZWF0ZURhdGUoeWVhciwgMCwgZGF0ZSk7XG4gICAgICAgIGNvbnN0IG1vbnRocyA9IFtmaXJzdE1vbnRoXTtcbiAgICAgICAgZm9yIChsZXQgbW9udGhJbmRleCA9IDE7IG1vbnRoSW5kZXggPCBNT05USFNfSU5fVklFVzsgbW9udGhJbmRleCsrKSB7XG4gICAgICAgICAgICBtb250aHMucHVzaCh0aGlzLmRhdGVTZXJ2aWNlLmFkZE1vbnRoKGZpcnN0TW9udGgsIG1vbnRoSW5kZXgpKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vbnRocyA9IGJhdGNoKG1vbnRocywgTU9OVEhTX0lOX0NPTFVNTik7XG4gICAgfVxuICAgIG9uU2VsZWN0KG1vbnRoKSB7XG4gICAgICAgIHRoaXMubW9udGhDaGFuZ2UuZW1pdChtb250aCk7XG4gICAgfVxufVxuTmJDYWxlbmRhck1vbnRoUGlja2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1tb250aC1waWNrZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5iLWNhbGVuZGFyLXBpY2tlclxuICAgICAgW2RhdGFdPVwibW9udGhzXCJcbiAgICAgIFttaW5dPVwibWluXCJcbiAgICAgIFttYXhdPVwibWF4XCJcbiAgICAgIFtmaWx0ZXJdPVwiZmlsdGVyXCJcbiAgICAgIFtzZWxlY3RlZFZhbHVlXT1cImRhdGVcIlxuICAgICAgW3Zpc2libGVEYXRlXT1cIm1vbnRoXCJcbiAgICAgIFtjZWxsQ29tcG9uZW50XT1cImNlbGxDb21wb25lbnRcIlxuICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAoc2VsZWN0KT1cIm9uU2VsZWN0KCRldmVudClcIj5cbiAgICA8L25iLWNhbGVuZGFyLXBpY2tlcj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkRhdGVTZXJ2aWNlIH1cbl07XG5OYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbW9udGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1vbnRoQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgX2NlbGxDb21wb25lbnQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ2NlbGxDb21wb25lbnQnLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy55ZWFyc0luVmlldyA9IDEyO1xuICAgICAgICB0aGlzLnllYXJzSW5Sb3cgPSA0O1xuICAgIH1cbiAgICBnZXRZZWFyc0luVmlldygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueWVhcnNJblZpZXc7XG4gICAgfVxuICAgIGdldFllYXJzSW5Sb3coKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnllYXJzSW5Sb3c7XG4gICAgfVxuICAgIGdldFZpZXdZZWFycyh2aWV3WWVhcikge1xuICAgICAgICBjb25zdCB5ZWFyID0gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKHZpZXdZZWFyKTtcbiAgICAgICAgbGV0IHZpZXdTdGFydFllYXI7XG4gICAgICAgIGlmICh5ZWFyID49IDApIHtcbiAgICAgICAgICAgIHZpZXdTdGFydFllYXIgPSB5ZWFyIC0gKHllYXIgJSB0aGlzLnllYXJzSW5WaWV3KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZpZXdTdGFydFllYXIgPSB5ZWFyIC0gKHllYXIgJSB0aGlzLnllYXJzSW5WaWV3ICsgdGhpcy55ZWFyc0luVmlldyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgeWVhcnMgPSByYW5nZSh0aGlzLnllYXJzSW5WaWV3KS5tYXAoaSA9PiB0aGlzLmNvcHlXaXRoWWVhcih2aWV3U3RhcnRZZWFyICsgaSwgdmlld1llYXIpKTtcbiAgICAgICAgcmV0dXJuIGJhdGNoKHllYXJzLCB0aGlzLnllYXJzSW5Sb3cpO1xuICAgIH1cbiAgICBjb3B5V2l0aFllYXIoeWVhciwgZGF0ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5jcmVhdGVEYXRlKHllYXIsIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TW9udGgoZGF0ZSksIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF0ZShkYXRlKSk7XG4gICAgfVxufVxuTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlLCB5ZWFyTW9kZWxTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy55ZWFyTW9kZWxTZXJ2aWNlID0geWVhck1vZGVsU2VydmljZTtcbiAgICAgICAgdGhpcy52aWV3TW9kZSA9IE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFO1xuICAgICAgICB0aGlzLmNoYW5nZU1vZGUgPSBuZXcgRXZlbnRFbWl0dGVyKHRydWUpO1xuICAgIH1cbiAgICBnZXRUZXh0KCkge1xuICAgICAgICBpZiAoIXRoaXMuZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy52aWV3TW9kZSkge1xuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuREFURToge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aE5hbWUodGhpcy5kYXRlLCBUcmFuc2xhdGlvbldpZHRoLldpZGUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIodGhpcy5kYXRlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYCR7bW9udGh9ICR7eWVhcn1gO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuTU9OVEg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3RoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcih0aGlzLmRhdGUpfWA7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5ZRUFSOlxuICAgICAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmdldEZpcnN0WWVhcigpfSAtICR7dGhpcy5nZXRMYXN0WWVhcigpfWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SWNvbigpIHtcbiAgICAgICAgaWYgKHRoaXMudmlld01vZGUgPT09IE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NoZXZyb24tZG93bi1vdXRsaW5lJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJ2NoZXZyb24tdXAtb3V0bGluZSc7XG4gICAgfVxuICAgIGdldEZpcnN0WWVhcigpIHtcbiAgICAgICAgY29uc3QgeWVhcnMgPSB0aGlzLnllYXJNb2RlbFNlcnZpY2UuZ2V0Vmlld1llYXJzKHRoaXMuZGF0ZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoeWVhcnNbMF1bMF0pLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGdldExhc3RZZWFyKCkge1xuICAgICAgICBjb25zdCB5ZWFycyA9IHRoaXMueWVhck1vZGVsU2VydmljZS5nZXRWaWV3WWVhcnModGhpcy5kYXRlKTtcbiAgICAgICAgY29uc3QgbGFzdFJvdyA9IHllYXJzW3llYXJzLmxlbmd0aCAtIDFdO1xuICAgICAgICBjb25zdCBsYXN0WWVhciA9IGxhc3RSb3dbbGFzdFJvdy5sZW5ndGggLSAxXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcihsYXN0WWVhcikudG9TdHJpbmcoKTtcbiAgICB9XG59XG5OYkNhbGVuZGFyVmlld01vZGVDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLXZpZXctbW9kZScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8YnV0dG9uIG5iQnV0dG9uIChjbGljayk9XCJjaGFuZ2VNb2RlLmVtaXQoKVwiIGdob3N0IHN0YXR1cz1cImJhc2ljXCI+XG4gICAgICB7eyBnZXRUZXh0KCkgfX1cbiAgICAgIDxuYi1pY29uIFtpY29uXT1cImdldEljb24oKVwiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgPC9idXR0b24+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UgfVxuXTtcbk5iQ2FsZW5kYXJWaWV3TW9kZUNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2aWV3TW9kZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY2hhbmdlTW9kZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkaXJlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uU2VydmljZSA9IGRpcmVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMubmV4dCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5wcmV2ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBnZXQgaXNMdHIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvblNlcnZpY2UuaXNMdHIoKTtcbiAgICB9XG59XG5OYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1wYWdlYWJsZS1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxidXR0b24gbmJCdXR0b24gKGNsaWNrKT1cInByZXYuZW1pdCgpXCIgZ2hvc3Qgc3RhdHVzPVwiYmFzaWNcIiBjbGFzcz1cInByZXYtbW9udGhcIj5cbiAgICAgIDxuYi1pY29uIFtpY29uXT1cImlzTHRyID8gJ2NoZXZyb24tbGVmdC1vdXRsaW5lJyA6ICdjaGV2cm9uLXJpZ2h0LW91dGxpbmUnXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiPjwvbmItaWNvbj5cbiAgICA8L2J1dHRvbj5cbiAgICA8YnV0dG9uIG5iQnV0dG9uIChjbGljayk9XCJuZXh0LmVtaXQoKVwiIGdob3N0IHN0YXR1cz1cImJhc2ljXCIgY2xhc3M9XCJuZXh0LW1vbnRoXCI+XG4gICAgICA8bmItaWNvbiBbaWNvbl09XCJpc0x0ciA/ICdjaGV2cm9uLXJpZ2h0LW91dGxpbmUnIDogJ2NoZXZyb24tbGVmdC1vdXRsaW5lJ1wiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgPC9idXR0b24+XG4gIGAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0fVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlIH1cbl07XG5OYkNhbGVuZGFyUGFnZWFibGVOYXZpZ2F0aW9uQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG5leHQ6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBwcmV2OiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBnZXQgaXNMYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxufVxuTmJDYWxlbmRhclBpY2tlckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItcGlja2VyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYi1jYWxlbmRhci1waWNrZXItcm93XG4gICAgICAqbmdGb3I9XCJsZXQgcm93IG9mIGRhdGFcIlxuICAgICAgW3Jvd109XCJyb3dcIlxuICAgICAgW3Zpc2libGVEYXRlXT1cInZpc2libGVEYXRlXCJcbiAgICAgIFtzZWxlY3RlZFZhbHVlXT1cInNlbGVjdGVkVmFsdWVcIlxuICAgICAgW2NvbXBvbmVudF09XCJjZWxsQ29tcG9uZW50XCJcbiAgICAgIFttaW5dPVwibWluXCJcbiAgICAgIFttYXhdPVwibWF4XCJcbiAgICAgIFtmaWx0ZXJdPVwiZmlsdGVyXCJcbiAgICAgIFtzaXplXT1cInNpemVcIlxuICAgICAgKHNlbGVjdCk9XCJzZWxlY3QuZW1pdCgkZXZlbnQpXCI+XG4gICAgPC9uYi1jYWxlbmRhci1waWNrZXItcm93PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGF0YTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdGVkVmFsdWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNlbGxDb21wb25lbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWx0ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGlzTGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJQaWNrZXJSb3dDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGNmcikge1xuICAgICAgICB0aGlzLmNmciA9IGNmcjtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIGNvbnN0IGZhY3RvcnkgPSB0aGlzLmNmci5yZXNvbHZlQ29tcG9uZW50RmFjdG9yeSh0aGlzLmNvbXBvbmVudCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyUmVmLmNsZWFyKCk7XG4gICAgICAgIHRoaXMucm93LmZvckVhY2goKGRhdGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuY29udGFpbmVyUmVmLmNyZWF0ZUNvbXBvbmVudChmYWN0b3J5KTtcbiAgICAgICAgICAgIHRoaXMucGF0Y2hXaXRoQ29udGV4dChjb21wb25lbnQuaW5zdGFuY2UsIGRhdGUpO1xuICAgICAgICAgICAgY29tcG9uZW50LmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHBhdGNoV2l0aENvbnRleHQoY29tcG9uZW50LCBkYXRlKSB7XG4gICAgICAgIGNvbXBvbmVudC52aXNpYmxlRGF0ZSA9IHRoaXMudmlzaWJsZURhdGU7XG4gICAgICAgIGNvbXBvbmVudC5zZWxlY3RlZFZhbHVlID0gdGhpcy5zZWxlY3RlZFZhbHVlO1xuICAgICAgICBjb21wb25lbnQuZGF0ZSA9IGRhdGU7XG4gICAgICAgIGNvbXBvbmVudC5taW4gPSB0aGlzLm1pbjtcbiAgICAgICAgY29tcG9uZW50Lm1heCA9IHRoaXMubWF4O1xuICAgICAgICBjb21wb25lbnQuZmlsdGVyID0gdGhpcy5maWx0ZXI7XG4gICAgICAgIGNvbXBvbmVudC5zaXplID0gdGhpcy5zaXplO1xuICAgICAgICBjb21wb25lbnQuc2VsZWN0LnN1YnNjcmliZSh0aGlzLnNlbGVjdC5lbWl0LmJpbmQodGhpcy5zZWxlY3QpKTtcbiAgICB9XG59XG5OYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1waWNrZXItcm93JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy10ZW1wbGF0ZT48L25nLXRlbXBsYXRlPicsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbYFxuICAgIDpob3N0IHtcbiAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgfVxuICBgXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIH1cbl07XG5OYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHJvdzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0ZWRWYWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgY29udGFpbmVyUmVmOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtUZW1wbGF0ZVJlZiwgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMueWVhckNlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGdldCBzZWxlY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lWWVhclNhZmUodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUpO1xuICAgIH1cbiAgICBnZXQgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZVllYXJTYWZlKHRoaXMuZGF0ZSwgdGhpcy5kYXRlU2VydmljZS50b2RheSgpKTtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zbWFsbGVyVGhhbk1pbigpIHx8IHRoaXMuZ3JlYXRlclRoYW5NYXgoKTtcbiAgICB9XG4gICAgZ2V0IGlzTGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgIH1cbiAgICBnZXQgeWVhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcih0aGlzLmRhdGUpO1xuICAgIH1cbiAgICBvbkNsaWNrKCkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgc21hbGxlclRoYW5NaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy55ZWFyRW5kKCksIHRoaXMubWluKSA8IDA7XG4gICAgfVxuICAgIGdyZWF0ZXJUaGFuTWF4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWF4ICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMueWVhclN0YXJ0KCksIHRoaXMubWF4KSA+IDA7XG4gICAgfVxuICAgIHllYXJTdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhclN0YXJ0KHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIHllYXJFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXJFbmQodGhpcy5kYXRlKTtcbiAgICB9XG59XG5OYkNhbGVuZGFyWWVhckNlbGxDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNhbGVuZGFyLXllYXItY2VsbCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwiY2VsbC1jb250ZW50XCI+XG4gICAgICB7eyB5ZWFyIH19XG4gICAgPC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3RlZFZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3Q6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBzZWxlY3RlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2VsZWN0ZWQnLF0gfV0sXG4gICAgdG9kYXk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnRvZGF5JyxdIH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5kaXNhYmxlZCcsXSB9XSxcbiAgICBpc0xhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIHllYXJDZWxsQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnllYXItY2VsbCcsXSB9XSxcbiAgICBvbkNsaWNrOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihkYXRlU2VydmljZSwgeWVhck1vZGVsU2VydmljZSkge1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIHRoaXMueWVhck1vZGVsU2VydmljZSA9IHllYXJNb2RlbFNlcnZpY2U7XG4gICAgICAgIHRoaXMuY2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudDtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnllYXJDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIHNldCBfY2VsbENvbXBvbmVudChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLmNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLnllYXJzID0gdGhpcy55ZWFyTW9kZWxTZXJ2aWNlLmdldFZpZXdZZWFycyh0aGlzLnllYXIpO1xuICAgIH1cbiAgICBvblNlbGVjdCh5ZWFyKSB7XG4gICAgICAgIHRoaXMueWVhckNoYW5nZS5lbWl0KHllYXIpO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJZZWFyUGlja2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci15ZWFyLXBpY2tlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmItY2FsZW5kYXItcGlja2VyXG4gICAgICBbZGF0YV09XCJ5ZWFyc1wiXG4gICAgICBbbWluXT1cIm1pblwiXG4gICAgICBbbWF4XT1cIm1heFwiXG4gICAgICBbZmlsdGVyXT1cImZpbHRlclwiXG4gICAgICBbc2VsZWN0ZWRWYWx1ZV09XCJkYXRlXCJcbiAgICAgIFt2aXNpYmxlRGF0ZV09XCJ5ZWFyXCJcbiAgICAgIFtjZWxsQ29tcG9uZW50XT1cImNlbGxDb21wb25lbnRcIlxuICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAoc2VsZWN0KT1cIm9uU2VsZWN0KCRldmVudClcIj5cbiAgICA8L25iLWNhbGVuZGFyLXBpY2tlcj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlIH1cbl07XG5OYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtaW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1heDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZmlsdGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBfY2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnY2VsbENvbXBvbmVudCcsXSB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB5ZWFyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB5ZWFyQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICB9XG4gICAgZ2V0IGlzTGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLndlZWtzKSB7XG4gICAgICAgICAgICB0aGlzLndlZWtOdW1iZXJzID0gdGhpcy5nZXRXZWVrcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldFdlZWtzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53ZWVrcy5tYXAoKHdlZWspID0+IHtcbiAgICAgICAgICAgIC8vIEZpbmQgbGFzdCBkZWZpbmVkIGRheSBhcyB3ZWVrIGNvdWxkIGNvbnRhaW4gbnVsbCBkYXlzIGluIGNhc2VcbiAgICAgICAgICAgIC8vIGJvdW5kaW5nTW9udGggc2V0IHRvIGZhbHNlXG4gICAgICAgICAgICBjb25zdCBsYXN0RGF5ID0gWy4uLndlZWtdLnJldmVyc2UoKS5maW5kKChkYXkpID0+ICEhZGF5KTtcbiAgICAgICAgICAgIC8vIFVzZSBsYXN0IGRheSBvZiB0aGUgd2VlayB0byBkZXRlcm1pbmUgd2VlayBudW1iZXIuXG4gICAgICAgICAgICAvLyBUaGlzIHdheSB3ZWVrcyB3aGljaCBzcGFuIGJldHdlZW4gc2libGluZyB5ZWFycyBpcyBtYXJrZWQgZmlyc3RcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldFdlZWtOdW1iZXIobGFzdERheSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci13ZWVrLW51bWJlcnMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cInNpZ24tY29udGFpbmVyXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwic2lnblwiPnt7IHdlZWtOdW1iZXJTeW1ib2wgfX08L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwid2Vlay1udW1iZXJcIiAqbmdGb3I9XCJsZXQgd2Vla051bWJlciBvZiB3ZWVrTnVtYmVyc1wiPnt7IHdlZWtOdW1iZXIgfX08L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJXZWVrTnVtYmVyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgd2Vla3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHdlZWtOdW1iZXJTeW1ib2w6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGlzTGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYk5hdGl2ZURhdGVTZXJ2aWNlYCBpcyBiYXNpYyBpbXBsZW1lbnRhdGlvbiBvZiBgTmJEYXRlU2VydmljZWAgdXNpbmdcbiAqIG5hdGl2ZSBqcyBkYXRlIG9iamVjdHMgYW5kIGFuZ3VsYXIgbG9jYWxpemF0aW9uIHNlcnZpY2VzLlxuICogKi9cbmNsYXNzIE5iTmF0aXZlRGF0ZVNlcnZpY2UgZXh0ZW5kcyBOYkRhdGVTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhbGUpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5zZXRMb2NhbGUobG9jYWxlKTtcbiAgICB9XG4gICAgc2V0TG9jYWxlKGxvY2FsZSkge1xuICAgICAgICBzdXBlci5zZXRMb2NhbGUobG9jYWxlKTtcbiAgICAgICAgdGhpcy5kYXRlUGlwZSA9IG5ldyBEYXRlUGlwZShsb2NhbGUpO1xuICAgIH1cbiAgICBzZXRIb3VycyhkYXRlLCBob3VyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuY2xvbmUoZGF0ZSk7XG4gICAgICAgIHJlc3VsdC5zZXRIb3Vycyhob3VyKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc2V0TWludXRlcyhkYXRlLCBtaW51dGUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbG9uZShkYXRlKTtcbiAgICAgICAgcmVzdWx0LnNldE1pbnV0ZXMobWludXRlKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc2V0U2Vjb25kcyhkYXRlLCBzZWNvbmQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5jbG9uZShkYXRlKTtcbiAgICAgICAgcmVzdWx0LnNldFNlY29uZHMoc2Vjb25kKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gICAgc2V0TWlsbGlzZWNvbmRzKGRhdGUsIHNlY29uZCkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNsb25lKGRhdGUpO1xuICAgICAgICByZXN1bHQuc2V0TWlsbGlzZWNvbmRzKHNlY29uZCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGlzVmFsaWREYXRlU3RyaW5nKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKHRoaXMucGFyc2UoZGF0ZSwgZm9ybWF0KS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICBpc1ZhbGlkVGltZVN0cmluZyhkYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNWYWxpZERhdGVTdHJpbmcoZGF0ZSwgZm9ybWF0KTtcbiAgICB9XG4gICAgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGF0ZSgpO1xuICAgIH1cbiAgICBnZXRMb2NhbGVUaW1lRm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gZ2V0TG9jYWxlVGltZUZvcm1hdCh0aGlzLmxvY2FsZSwgRm9ybWF0V2lkdGguU2hvcnQpO1xuICAgIH1cbiAgICBnZXREYXRlKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpO1xuICAgIH1cbiAgICBnZXRNb250aChkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1vbnRoKCk7XG4gICAgfVxuICAgIGdldFllYXIoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIH1cbiAgICBnZXREYXlPZldlZWsoZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS5nZXREYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogcmV0dXJucyBmaXJzdCBkYXkgb2YgdGhlIHdlZWssIGl0IGNhbiBiZSAxIGlmIHdlZWsgc3RhcnRzIGZyb20gbW9uZGF5XG4gICAgICogYW5kIDAgaWYgZnJvbSBzdW5kYXkgYW5kIHNvIG9uLlxuICAgICAqICovXG4gICAgZ2V0Rmlyc3REYXlPZldlZWsoKSB7XG4gICAgICAgIHJldHVybiBnZXRMb2NhbGVGaXJzdERheU9mV2Vlayh0aGlzLmxvY2FsZSk7XG4gICAgfVxuICAgIGdldE1vbnRoTmFtZShkYXRlLCBzdHlsZSQkMSA9IFRyYW5zbGF0aW9uV2lkdGguQWJicmV2aWF0ZWQpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1vbnRoTmFtZUJ5SW5kZXgoaW5kZXgsIHN0eWxlJCQxKTtcbiAgICB9XG4gICAgZ2V0TW9udGhOYW1lQnlJbmRleChpbmRleCwgc3R5bGUkJDEgPSBUcmFuc2xhdGlvbldpZHRoLkFiYnJldmlhdGVkKSB7XG4gICAgICAgIHJldHVybiBnZXRMb2NhbGVNb250aE5hbWVzKHRoaXMubG9jYWxlLCBGb3JtU3R5bGUuRm9ybWF0LCBzdHlsZSQkMSlbaW5kZXhdO1xuICAgIH1cbiAgICBnZXREYXlPZldlZWtOYW1lcygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi5nZXRMb2NhbGVEYXlOYW1lcyh0aGlzLmxvY2FsZSwgRm9ybVN0eWxlLkZvcm1hdCwgVHJhbnNsYXRpb25XaWR0aC5TaG9ydCldO1xuICAgIH1cbiAgICBmb3JtYXQoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVQaXBlLnRyYW5zZm9ybShkYXRlLCBmb3JtYXQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZSBoYXZlbid0IGdvdCBjYXBhYmlsaXR5IHRvIHBhcnNlIGRhdGUgdXNpbmcgZm9ybWF0dGluZyB3aXRob3V0IHRoaXJkIHBhcnR5IGxpYnJhcmllcy5cbiAgICAgKiAqL1xuICAgIHBhcnNlKGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5wYXJzZShkYXRlKSk7XG4gICAgfVxuICAgIGFkZERheShkYXRlLCBudW0pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIGRhdGUuZ2V0TW9udGgoKSwgZGF0ZS5nZXREYXRlKCkgKyBudW0pO1xuICAgIH1cbiAgICBhZGRNb250aChkYXRlLCBudW0pIHtcbiAgICAgICAgY29uc3QgbW9udGggPSB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKyBudW0sIDEpO1xuICAgICAgICAvLyBJbiBjYXNlIG9mIGRhdGUgaGFzIG1vcmUgZGF5cyB0aGFuIGNhbGN1bGF0ZWQgbW9udGgganMgRGF0ZSB3aWxsIGNoYW5nZSB0aGF0IG1vbnRoIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAvLyBiZWNhdXNlIG9mIHRoZSBkYXRlIG92ZXJmbG93LlxuICAgICAgICBtb250aC5zZXREYXRlKE1hdGgubWluKGRhdGUuZ2V0RGF0ZSgpLCB0aGlzLmdldE1vbnRoRW5kKG1vbnRoKS5nZXREYXRlKCkpKTtcbiAgICAgICAgcmV0dXJuIG1vbnRoO1xuICAgIH1cbiAgICBhZGRNaW51dGVzKGRhdGUsIG1pbnV0ZSkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgcmVzdWx0LnNldE1pbnV0ZXMoZGF0ZS5nZXRNaW51dGVzKCkgKyBtaW51dGUpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBhZGRIb3VycyhkYXRlLCBob3VyKSB7XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBEYXRlKGRhdGUpO1xuICAgICAgICByZXN1bHQuc2V0SG91cnMoZGF0ZS5nZXRIb3VycygpICsgaG91cik7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGdldEhvdXJzKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0SG91cnMoKTtcbiAgICB9XG4gICAgZ2V0TWludXRlcyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldE1pbnV0ZXMoKTtcbiAgICB9XG4gICAgZ2V0U2Vjb25kcyhkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLmdldFNlY29uZHMoKTtcbiAgICB9XG4gICAgZ2V0TWlsbGlzZWNvbmRzKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCk7XG4gICAgfVxuICAgIGFkZFllYXIoZGF0ZSwgbnVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpICsgbnVtLCBkYXRlLmdldE1vbnRoKCksIGRhdGUuZ2V0RGF0ZSgpKTtcbiAgICB9XG4gICAgY2xvbmUoZGF0ZSkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuICAgIH1cbiAgICBjb21wYXJlRGF0ZXMoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiBkYXRlMS5nZXRUaW1lKCkgLSBkYXRlMi5nZXRUaW1lKCk7XG4gICAgfVxuICAgIGNyZWF0ZURhdGUoeWVhciwgbW9udGgsIGRhdGUpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRhdGUpO1xuICAgICAgICAvLyBXZSBuZWVkIHRvIGNvcnJlY3QgZm9yIHRoZSBmYWN0IHRoYXQgSlMgbmF0aXZlIERhdGUgdHJlYXRzIHllYXJzIGluIHJhbmdlIFswLCA5OV0gYXNcbiAgICAgICAgLy8gYWJicmV2aWF0aW9ucyBmb3IgMTl4eC5cbiAgICAgICAgaWYgKHllYXIgPj0gMCAmJiB5ZWFyIDwgMTAwKSB7XG4gICAgICAgICAgICByZXN1bHQuc2V0RnVsbFllYXIocmVzdWx0LmdldEZ1bGxZZWFyKCkgLSAxOTAwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBnZXRNb250aEVuZChkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCkgKyAxLCAwKTtcbiAgICB9XG4gICAgZ2V0TW9udGhTdGFydChkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCBkYXRlLmdldE1vbnRoKCksIDEpO1xuICAgIH1cbiAgICBnZXROdW1iZXJPZkRheXNJbk1vbnRoKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TW9udGhFbmQoZGF0ZSkuZ2V0RGF0ZSgpO1xuICAgIH1cbiAgICBnZXRZZWFyRW5kKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksIDExLCAzMSk7XG4gICAgfVxuICAgIGdldFllYXJTdGFydChkYXRlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZURhdGUoZGF0ZS5nZXRGdWxsWWVhcigpLCAwLCAxKTtcbiAgICB9XG4gICAgdmFsdWVPZihkYXRlKSB7XG4gICAgICAgIHJldHVybiBkYXRlLnZhbHVlT2YoKTtcbiAgICB9XG4gICAgaXNTYW1lRGF5KGRhdGUxLCBkYXRlMikge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1NhbWVNb250aChkYXRlMSwgZGF0ZTIpICYmXG4gICAgICAgICAgICBkYXRlMS5nZXREYXRlKCkgPT09IGRhdGUyLmdldERhdGUoKTtcbiAgICB9XG4gICAgaXNTYW1lTW9udGgoZGF0ZTEsIGRhdGUyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzU2FtZVllYXIoZGF0ZTEsIGRhdGUyKSAmJlxuICAgICAgICAgICAgZGF0ZTEuZ2V0TW9udGgoKSA9PT0gZGF0ZTIuZ2V0TW9udGgoKTtcbiAgICB9XG4gICAgaXNTYW1lWWVhcihkYXRlMSwgZGF0ZTIpIHtcbiAgICAgICAgcmV0dXJuIGRhdGUxLmdldEZ1bGxZZWFyKCkgPT09IGRhdGUyLmdldEZ1bGxZZWFyKCk7XG4gICAgfVxuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gJ25hdGl2ZSc7XG4gICAgfVxuICAgIGdldFdlZWtOdW1iZXIoZGF0ZSkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5kYXRlUGlwZS50cmFuc2Zvcm0oZGF0ZSwgJ3cnKSwgMTApO1xuICAgIH1cbiAgICBnZXREYXRlRm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gJ3l5eXktTU0tZGQnO1xuICAgIH1cbiAgICBnZXRUd2VsdmVIb3Vyc0Zvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuICdoaDptbSBhJztcbiAgICB9XG59XG5OYk5hdGl2ZURhdGVTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYk5hdGl2ZURhdGVTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogU3RyaW5nLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtMT0NBTEVfSUQsXSB9XSB9XG5dO1xuXG5jbGFzcyBOYkNhbGVuZGFyVGltZU1vZGVsU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLk1JTlVURVNfQU5EX1NFQ09ORFMgPSA2MDtcbiAgICB9XG4gICAgZ2V0SG91cnNSYW5nZShzdGVwID0gdGhpcy5NSU5VVEVTX0FORF9TRUNPTkRTKSB7XG4gICAgICAgIGxldCBkYXRlID0gdGhpcy5nZXRSZXNldFRpbWUoKTtcbiAgICAgICAgY29uc3QgZW5kRGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkRGF5KGRhdGUsIDEpO1xuICAgICAgICBjb25zdCByZXN1bHQgPSBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKGRhdGUsIGVuZERhdGUpIDwgMCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goZGF0ZSk7XG4gICAgICAgICAgICBkYXRlID0gdGhpcy5kYXRlU2VydmljZS5hZGRNaW51dGVzKGRhdGUsIHN0ZXApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGdldFJlc2V0VGltZSgpIHtcbiAgICAgICAgbGV0IHRvZGF5ID0gdGhpcy5kYXRlU2VydmljZS50b2RheSgpO1xuICAgICAgICB0b2RheSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0SG91cnModG9kYXksIDApO1xuICAgICAgICB0b2RheSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWludXRlcyh0b2RheSwgMCk7XG4gICAgICAgIHRvZGF5ID0gdGhpcy5kYXRlU2VydmljZS5zZXRTZWNvbmRzKHRvZGF5LCAwKTtcbiAgICAgICAgdG9kYXkgPSB0aGlzLmRhdGVTZXJ2aWNlLnNldE1pbGxpc2Vjb25kcyh0b2RheSwgMCk7XG4gICAgICAgIHJldHVybiB0b2RheTtcbiAgICB9XG4gICAgcGFkZFRvVHdvU3ltYm9scyhuKSB7XG4gICAgICAgIGlmIChuIDwgMTApIHtcbiAgICAgICAgICAgIHJldHVybiAnMCcgKyBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIGJ1aWxkRGF0ZUZvcm1hdCh0d2VsdmVIb3Vyc0Zvcm1hdCwgd2l0aFNlY29uZHMgPSBmYWxzZSkge1xuICAgICAgICBpZiAodHdlbHZlSG91cnNGb3JtYXQpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGVGb3JtYXQoKX0gJHt0aGlzLmRhdGVTZXJ2aWNlLmdldFR3ZWx2ZUhvdXJzRm9ybWF0KCl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAod2l0aFNlY29uZHMpIHtcbiAgICAgICAgICAgIHJldHVybiBgJHt0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGVGb3JtYXQoKX0gJHt0aGlzLmRhdGVTZXJ2aWNlLmdldFR3ZW50eUZvdXJIb3Vyc0Zvcm1hdFdpdGhTZWNvbmRzKCl9YDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYCR7dGhpcy5kYXRlU2VydmljZS5nZXREYXRlRm9ybWF0KCl9ICR7dGhpcy5kYXRlU2VydmljZS5nZXRUd2VudHlGb3VySG91cnNGb3JtYXQoKX1gO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYkNhbGVuZGFyVGltZU1vZGVsU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfVxuXTtcblxuY2xhc3MgTmJDYWxlbmRhckFjdGlvbnNDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9hcHBseUJ1dHRvblRleHQgPSAnb2snO1xuICAgICAgICB0aGlzLl9jdXJyZW50VGltZUJ1dHRvblRleHQgPSAnbm93JztcbiAgICAgICAgdGhpcy5zZXRDdXJyZW50VGltZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zYXZlVmFsdWUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIHNldCBhcHBseUJ1dHRvblRleHQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9hcHBseUJ1dHRvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICA7XG4gICAgZ2V0IGFwcGx5VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcGx5QnV0dG9uVGV4dDtcbiAgICB9XG4gICAgO1xuICAgIHNldCBjdXJyZW50VGltZUJ1dHRvblRleHQodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VGltZUJ1dHRvblRleHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgY3VycmVudFRpbWVUZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFRpbWVCdXR0b25UZXh0O1xuICAgIH1cbiAgICA7XG59XG5OYkNhbGVuZGFyQWN0aW9uc0NvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItYWN0aW9ucycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8YnV0dG9uXG4gICAgICBuYkJ1dHRvblxuICAgICAgZ2hvc3RcbiAgICAgIHN0YXR1cz1cInByaW1hcnlcIlxuICAgICAgc2l6ZT1cInNtYWxsXCJcbiAgICAgIChjbGljayk9XCJzZXRDdXJyZW50VGltZS5lbWl0KClcIj5cbiAgICAgIHt7IGN1cnJlbnRUaW1lVGV4dCB9fTwvYnV0dG9uPlxuICAgIDxidXR0b25cbiAgICAgIG5iQnV0dG9uXG4gICAgICBzdGF0dXM9XCJwcmltYXJ5XCJcbiAgICAgIHNpemU9XCJzbWFsbFwiXG4gICAgICAoY2xpY2spPVwic2F2ZVZhbHVlLmVtaXQoKVwiPlxuICAgICAge3sgYXBwbHlUZXh0IH19PC9idXR0b24+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW59XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJBY3Rpb25zQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGFwcGx5QnV0dG9uVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY3VycmVudFRpbWVCdXR0b25UZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZXRDdXJyZW50VGltZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHNhdmVWYWx1ZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBTRVJWSUNFUyA9IFtcbiAgICB7IHByb3ZpZGU6IE5iRGF0ZVNlcnZpY2UsIHVzZUNsYXNzOiBOYk5hdGl2ZURhdGVTZXJ2aWNlIH0sXG4gICAgRGF0ZVBpcGUsXG4gICAgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLFxuICAgIE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlLFxuICAgIE5iQ2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlLFxuXTtcbmNvbnN0IENPTVBPTkVOVFMgPSBbXG4gICAgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJQYWdlYWJsZU5hdmlnYXRpb25Db21wb25lbnQsXG4gICAgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyWWVhclBpY2tlckNvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyTW9udGhQaWNrZXJDb21wb25lbnQsXG4gICAgTmJDYWxlbmRhckRheVBpY2tlckNvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyQWN0aW9uc0NvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyTW9udGhDZWxsQ29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudCxcbiAgICBOYkNhbGVuZGFyUGlja2VyUm93Q29tcG9uZW50LFxuICAgIE5iQ2FsZW5kYXJQaWNrZXJDb21wb25lbnQsXG4gICAgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQsXG5dO1xuLyoqXG4gKiBgTmJDYWxlbmRhcktpdE1vZHVsZWAgaXMgYSBtb2R1bGUgdGhhdCBjb250YWlucyBtdWx0aXBsZSB1c2VmdWwgY29tcG9uZW50cyBmb3IgYnVpbGRpbmcgY3VzdG9tIGNhbGVuZGFycy5cbiAqIFNvIGlmIHlvdSB0aGluayBvdXIgY2FsZW5kYXJzIGlzIG5vdCBlbm91Z2ggcG93ZXJmdWwgZm9yIHlvdSBqdXN0IHVzZSBjYWxlbmRhci1raXQgYW5kIGJ1aWxkIHlvdXIgb3duIGNhbGVuZGFyIVxuICpcbiAqIEF2YWlsYWJsZSBjb21wb25lbnRzOlxuICogLSBgTmJDYWxlbmRhckRheVBpY2tlcmBcbiAqIC0gYE5iQ2FsZW5kYXJEYXlDZWxsYFxuICogLSBgTmJDYWxlbmRhck1vbnRoUGlja2VyYFxuICogLSBgTmJDYWxlbmRhck1vbnRoQ2VsbGBcbiAqIC0gYE5iQ2FsZW5kYXJZZWFyUGlja2VyYFxuICogLSBgTmJDYWxlbmRhclllYXJDZWxsYFxuICogLSBgTmJDYWxlbmRhclZpZXdNb2RlQ29tcG9uZW50YFxuICogLSBgTmJDYWxlbmRhclBhZ2VhYmxlTmF2aWdhdGlvbmBcbiAqXG4gKiBGb3IgZXhhbXBsZSB5b3UgY2FuIGVhc2lseSBidWlsZCBmdWxsIGNhbGVuZGFyOlxuICogQHN0YWNrZWQtZXhhbXBsZShGdWxsIGNhbGVuZGFyLCBjYWxlbmRhci1raXQvY2FsZW5kYXIta2l0LWZ1bGwtY2FsZW5kYXIuY29tcG9uZW50KVxuICogKi9cbmNsYXNzIE5iQ2FsZW5kYXJLaXRNb2R1bGUge1xufVxuTmJDYWxlbmRhcktpdE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iU2hhcmVkTW9kdWxlLCBOYkJ1dHRvbk1vZHVsZSwgTmJJY29uTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbLi4uQ09NUE9ORU5UU10sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbLi4uQ09NUE9ORU5UU10sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbLi4uU0VSVklDRVNdLFxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhck1vbnRoQ2VsbENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhclllYXJDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYmFzaXMgZm9yIGNhbGVuZGFyIGFuZCByYW5nZSBjYWxlbmRhciBjb21wb25lbnRzLlxuICogRW5jYXBzdWxhdGVzIGNvbW1vbiBiZWhhdmlvciAtIHN0b3JlIGNhbGVuZGFyIHN0YXRlIGFuZCBwZXJmb3JtIG5hdmlnYXRpb25cbiAqIGJldHdlZW4gcGlja2Vycy5cbiAqICovXG5jbGFzcyBOYkJhc2VDYWxlbmRhckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UsIHllYXJNb2RlbFNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnllYXJNb2RlbFNlcnZpY2UgPSB5ZWFyTW9kZWxTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBpZiB3ZSBzaG91bGQgcmVuZGVyIHByZXZpb3VzIGFuZCBuZXh0IG1vbnRoc1xuICAgICAgICAgKiBpbiB0aGUgY3VycmVudCBtb250aCB2aWV3LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJvdW5kaW5nTW9udGggPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVmaW5lcyBhY3RpdmUgdmlldyBmb3IgY2FsZW5kYXIuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuYWN0aXZlVmlld01vZGUgPSBOYkNhbGVuZGFyVmlld01vZGUuREFURTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNpemUgb2YgdGhlIGNhbGVuZGFyIGFuZCBlbnRpcmUgY29tcG9uZW50cy5cbiAgICAgICAgICogQ2FuIGJlICdtZWRpdW0nIHdoaWNoIGlzIGRlZmF1bHQgb3IgJ2xhcmdlJy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHdlIHNob3VsZCBzaG93IGNhbGVuZGFyIG5hdmlnYXRpb24gb3Igbm90LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNob3dOYXZpZ2F0aW9uID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIGRhdGUgd2hlbiBzZWxlY3RlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLlZpZXdNb2RlID0gTmJDYWxlbmRhclZpZXdNb2RlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgKiAqL1xuICAgIGdldCBzaG93V2Vla051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgIH1cbiAgICBzZXQgc2hvd1dlZWtOdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnZpc2libGVEYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gdGhpcy5kYXRlU2VydmljZS50b2RheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxuICAgIHNldFZpZXdNb2RlKHZpZXdNb2RlKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVmlld01vZGUgPSB2aWV3TW9kZTtcbiAgICB9XG4gICAgc2V0VmlzaWJsZURhdGUodmlzaWJsZURhdGUpIHtcbiAgICAgICAgdGhpcy52aXNpYmxlRGF0ZSA9IHZpc2libGVEYXRlO1xuICAgIH1cbiAgICBwcmV2TW9udGgoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlVmlzaWJsZU1vbnRoKC0xKTtcbiAgICB9XG4gICAgbmV4dE1vbnRoKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVNb250aCgxKTtcbiAgICB9XG4gICAgcHJldlllYXIoKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlVmlzaWJsZVllYXIoLTEpO1xuICAgIH1cbiAgICBuZXh0WWVhcigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VWaXNpYmxlWWVhcigxKTtcbiAgICB9XG4gICAgcHJldlllYXJzKCkge1xuICAgICAgICB0aGlzLmNoYW5nZVZpc2libGVZZWFycygtMSk7XG4gICAgfVxuICAgIG5leHRZZWFycygpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VWaXNpYmxlWWVhcnMoMSk7XG4gICAgfVxuICAgIG5hdmlnYXRlUHJldigpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLmFjdGl2ZVZpZXdNb2RlKSB7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnByZXZNb250aCgpO1xuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuTU9OVEg6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldlllYXIoKTtcbiAgICAgICAgICAgIGNhc2UgTmJDYWxlbmRhclZpZXdNb2RlLllFQVI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJldlllYXJzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmF2aWdhdGVOZXh0KCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlVmlld01vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgTmJDYWxlbmRhclZpZXdNb2RlLkRBVEU6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dE1vbnRoKCk7XG4gICAgICAgICAgICBjYXNlIE5iQ2FsZW5kYXJWaWV3TW9kZS5NT05USDpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0WWVhcigpO1xuICAgICAgICAgICAgY2FzZSBOYkNhbGVuZGFyVmlld01vZGUuWUVBUjpcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5uZXh0WWVhcnMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBvbkNoYW5nZVZpZXdNb2RlKCkge1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVWaWV3TW9kZSA9PT0gTmJDYWxlbmRhclZpZXdNb2RlLkRBVEUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFZpZXdNb2RlKE5iQ2FsZW5kYXJWaWV3TW9kZS5ZRUFSKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFZpZXdNb2RlKE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFKTtcbiAgICB9XG4gICAgY2hhbmdlVmlzaWJsZU1vbnRoKGRpcmVjdGlvbikge1xuICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gdGhpcy5kYXRlU2VydmljZS5hZGRNb250aCh0aGlzLnZpc2libGVEYXRlLCBkaXJlY3Rpb24pO1xuICAgIH1cbiAgICBjaGFuZ2VWaXNpYmxlWWVhcihkaXJlY3Rpb24pIHtcbiAgICAgICAgdGhpcy52aXNpYmxlRGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UuYWRkWWVhcih0aGlzLnZpc2libGVEYXRlLCBkaXJlY3Rpb24pO1xuICAgIH1cbiAgICBjaGFuZ2VWaXNpYmxlWWVhcnMoZGlyZWN0aW9uKSB7XG4gICAgICAgIHRoaXMudmlzaWJsZURhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLmFkZFllYXIodGhpcy52aXNpYmxlRGF0ZSwgZGlyZWN0aW9uICogdGhpcy55ZWFyTW9kZWxTZXJ2aWNlLmdldFllYXJzSW5WaWV3KCkpO1xuICAgIH1cbn1cbk5iQmFzZUNhbGVuZGFyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1iYXNlLWNhbGVuZGFyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bmItY2FyZD5cXG4gIDxuYi1jYXJkLWhlYWRlciAqbmdJZj1cXFwic2hvd05hdmlnYXRpb25cXFwiIGNsYXNzPVxcXCJjYWxlbmRhci1uYXZpZ2F0aW9uXFxcIj5cXG4gICAgPG5iLWNhbGVuZGFyLXZpZXctbW9kZSBbZGF0ZV09XFxcInZpc2libGVEYXRlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2aWV3TW9kZV09XFxcImFjdGl2ZVZpZXdNb2RlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIChjaGFuZ2VNb2RlKT1cXFwib25DaGFuZ2VWaWV3TW9kZSgpXFxcIj5cXG4gICAgPC9uYi1jYWxlbmRhci12aWV3LW1vZGU+XFxuXFxuICAgIDxuYi1jYWxlbmRhci1wYWdlYWJsZS1uYXZpZ2F0aW9uIChwcmV2KT1cXFwibmF2aWdhdGVQcmV2KClcXFwiIChuZXh0KT1cXFwibmF2aWdhdGVOZXh0KClcXFwiPlxcbiAgICA8L25iLWNhbGVuZGFyLXBhZ2VhYmxlLW5hdmlnYXRpb24+XFxuICA8L25iLWNhcmQtaGVhZGVyPlxcblxcbiAgPG5iLWNhcmQtYm9keSBbbmdTd2l0Y2hdPVxcXCJhY3RpdmVWaWV3TW9kZVxcXCI+XFxuXFxuICAgIDxuYi1jYWxlbmRhci1kYXktcGlja2VyICpuZ1N3aXRjaENhc2U9XFxcIlZpZXdNb2RlLkRBVEVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtib3VuZGluZ01vbnRoc109XFxcImJvdW5kaW5nTW9udGhcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjZWxsQ29tcG9uZW50XT1cXFwiZGF5Q2VsbENvbXBvbmVudFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW21pbl09XFxcIm1pblxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW21heF09XFxcIm1heFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbHRlcl09XFxcImZpbHRlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3Zpc2libGVEYXRlXT1cXFwidmlzaWJsZURhdGVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzaXplXT1cXFwic2l6ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RhdGVdPVxcXCJkYXRlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2hvd1dlZWtOdW1iZXJdPVxcXCJzaG93V2Vla051bWJlclxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGRhdGVDaGFuZ2UpPVxcXCJkYXRlQ2hhbmdlLmVtaXQoJGFueSgkZXZlbnQpKVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3dlZWtOdW1iZXJTeW1ib2xdPVxcXCJ3ZWVrTnVtYmVyU3ltYm9sXFxcIj5cXG4gICAgPC9uYi1jYWxlbmRhci1kYXktcGlja2VyPlxcblxcbiAgICA8bmItY2FsZW5kYXIteWVhci1waWNrZXIgKm5nU3dpdGNoQ2FzZT1cXFwiVmlld01vZGUuWUVBUlxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjZWxsQ29tcG9uZW50XT1cXFwieWVhckNlbGxDb21wb25lbnRcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZV09XFxcIiRhbnkoZGF0ZSlcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWluXT1cXFwibWluXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21heF09XFxcIm1heFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtmaWx0ZXJdPVxcXCJmaWx0ZXJcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2l6ZV09XFxcInNpemVcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbeWVhcl09XFxcInZpc2libGVEYXRlXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKHllYXJDaGFuZ2UpPVxcXCJzZXRWaXNpYmxlRGF0ZSgkZXZlbnQpOyBzZXRWaWV3TW9kZShWaWV3TW9kZS5NT05USClcXFwiPlxcbiAgICA8L25iLWNhbGVuZGFyLXllYXItcGlja2VyPlxcblxcbiAgICA8bmItY2FsZW5kYXItbW9udGgtcGlja2VyICpuZ1N3aXRjaENhc2U9XFxcIlZpZXdNb2RlLk1PTlRIXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtjZWxsQ29tcG9uZW50XT1cXFwibW9udGhDZWxsQ29tcG9uZW50XFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttaW5dPVxcXCJtaW5cXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21heF09XFxcIm1heFxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZmlsdGVyXT1cXFwiZmlsdGVyXFxcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtzaXplXT1cXFwic2l6ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbW9udGhdPVxcXCJ2aXNpYmxlRGF0ZVxcXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZV09XFxcIiRhbnkoZGF0ZSlcXFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKG1vbnRoQ2hhbmdlKT1cXFwic2V0VmlzaWJsZURhdGUoJGV2ZW50KTsgc2V0Vmlld01vZGUoVmlld01vZGUuREFURSlcXFwiPlxcbiAgICA8L25iLWNhbGVuZGFyLW1vbnRoLXBpY2tlcj5cXG5cXG4gIDwvbmItY2FyZC1ib2R5PlxcblxcbjwvbmItY2FyZD5cXG5cIlxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkJhc2VDYWxlbmRhckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iQ2FsZW5kYXJZZWFyTW9kZWxTZXJ2aWNlIH1cbl07XG5OYkJhc2VDYWxlbmRhckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBib3VuZGluZ01vbnRoOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhY3RpdmVWaWV3TW9kZTogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnc3RhcnRWaWV3JyxdIH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWx0ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRheUNlbGxDb21wb25lbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1vbnRoQ2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgeWVhckNlbGxDb21wb25lbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZpc2libGVEYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93TmF2aWdhdGlvbjogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5oYXMtbmF2aWdhdGlvbicsXSB9XSxcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93V2Vla051bWJlcjogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5oYXMtd2Vlay1udW1iZXInLF0gfV0sXG4gICAgd2Vla051bWJlclN5bWJvbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0ZUNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGxhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkJhc2VDYWxlbmRhck1vZHVsZSB7XG59XG5OYkJhc2VDYWxlbmRhck1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iQ2FsZW5kYXJLaXRNb2R1bGUsIE5iU2hhcmVkTW9kdWxlLCBOYkNhcmRNb2R1bGVdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYkJhc2VDYWxlbmRhckNvbXBvbmVudF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJCYXNlQ2FsZW5kYXJDb21wb25lbnRdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ2FsZW5kYXJNb2R1bGUge1xufVxuTmJDYWxlbmRhck1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iQmFzZUNhbGVuZGFyTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJDYWxlbmRhckNvbXBvbmVudF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJDYWxlbmRhckNvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGwge1xuICAgIGdldCBoYXNSYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuc2VsZWN0ZWRWYWx1ZSAmJiB0aGlzLnNlbGVjdGVkVmFsdWUuc3RhcnQgJiYgdGhpcy5zZWxlY3RlZFZhbHVlLmVuZCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50IGV4dGVuZHMgTmJCYXNlQ2FsZW5kYXJSYW5nZUNlbGwge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5zaXplID0gTmJDYWxlbmRhclNpemUuTUVESVVNO1xuICAgICAgICB0aGlzLnNlbGVjdCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIHRoaXMucmFuZ2VDZWxsQ2xhc3MgPSB0cnVlO1xuICAgICAgICB0aGlzLmRheUNlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGdldCBpblJhbmdlKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRlICYmIHRoaXMuaGFzUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmlzSW5SYW5nZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgc3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5oYXNSYW5nZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZURheSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5zdGFydCk7XG4gICAgfVxuICAgIGdldCBlbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5oYXNSYW5nZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZURheSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5lbmQpO1xuICAgIH1cbiAgICBnZXQgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5kYXRlU2VydmljZS5pc1NhbWVEYXkodGhpcy5kYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgIH1cbiAgICBnZXQgYm91bmRpbmdNb250aCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZU1vbnRoU2FmZSh0aGlzLmRhdGUsIHRoaXMudmlzaWJsZURhdGUpO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmluUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZURheVNhZmUodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuc3RhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRhdGU7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc21hbGxlclRoYW5NaW4oKSB8fCB0aGlzLmdyZWF0ZXJUaGFuTWF4KCkgfHwgdGhpcy5kb250Rml0RmlsdGVyKCk7XG4gICAgfVxuICAgIGdldCBpc0xhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICB9XG4gICAgZ2V0IGRheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGUodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgb25DbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQgfHwgdGhpcy5lbXB0eSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgc21hbGxlclRoYW5NaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5taW4gJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCB0aGlzLm1pbikgPCAwO1xuICAgIH1cbiAgICBncmVhdGVyVGhhbk1heCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLm1heCAmJiB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLmRhdGUsIHRoaXMubWF4KSA+IDA7XG4gICAgfVxuICAgIGRvbnRGaXRGaWx0ZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5maWx0ZXIgJiYgIXRoaXMuZmlsdGVyKHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIGlzSW5SYW5nZShkYXRlLCB7IHN0YXJ0LCBlbmQgfSkge1xuICAgICAgICBjb25zdCBpc0dyZWF0ZXJUaGFuU3RhcnQgPSB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLmRhdGUsIHN0YXJ0KSA+PSAwO1xuICAgICAgICBjb25zdCBpc0xlc3NUaGFuRW5kID0gdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5kYXRlLCBlbmQpIDw9IDA7XG4gICAgICAgIHJldHVybiBpc0dyZWF0ZXJUaGFuU3RhcnQgJiYgaXNMZXNzVGhhbkVuZDtcbiAgICB9XG59XG5OYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1yYW5nZS1kYXktY2VsbCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwiY2VsbC1jb250ZW50XCI+e3sgZGF5IH19PC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfVxuXTtcbk5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0ZWRWYWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1pbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWF4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWx0ZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGluUmFuZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmluLXJhbmdlJyxdIH1dLFxuICAgIHN0YXJ0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGFydCcsXSB9XSxcbiAgICBlbmQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmVuZCcsXSB9XSxcbiAgICByYW5nZUNlbGxDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MucmFuZ2UtY2VsbCcsXSB9XSxcbiAgICBkYXlDZWxsQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmRheS1jZWxsJyxdIH1dLFxuICAgIHRvZGF5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2RheScsXSB9XSxcbiAgICBib3VuZGluZ01vbnRoOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5ib3VuZGluZy1tb250aCcsXSB9XSxcbiAgICBzZWxlY3RlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2VsZWN0ZWQnLF0gfV0sXG4gICAgZW1wdHk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmVtcHR5JyxdIH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5kaXNhYmxlZCcsXSB9XSxcbiAgICBpc0xhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIG9uQ2xpY2s6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydjbGljaycsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQgZXh0ZW5kcyBOYkJhc2VDYWxlbmRhclJhbmdlQ2VsbCB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICAgICAgdGhpcy55ZWFyQ2VsbENsYXNzID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yYW5nZUNlbGxDbGFzcyA9IHRydWU7XG4gICAgfVxuICAgIGdldCBpblJhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNSYW5nZSAmJiB0aGlzLmlzSW5SYW5nZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgfVxuICAgIGdldCByYW5nZVN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYXNSYW5nZSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZVllYXIodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuc3RhcnQpO1xuICAgIH1cbiAgICBnZXQgcmFuZ2VFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1JhbmdlICYmIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lWWVhcih0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5lbmQpO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmluUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZVllYXJTYWZlKHRoaXMuZGF0ZSwgdGhpcy5zZWxlY3RlZFZhbHVlLnN0YXJ0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZVllYXIodGhpcy5kYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNtYWxsZXJUaGFuTWluKCkgfHwgdGhpcy5ncmVhdGVyVGhhbk1heCgpO1xuICAgIH1cbiAgICBnZXQgaXNMYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gTmJDYWxlbmRhclNpemUuTEFSR0U7XG4gICAgfVxuICAgIGdldCB5ZWFyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyKHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3QuZW1pdCh0aGlzLmRhdGUpO1xuICAgIH1cbiAgICBzbWFsbGVyVGhhbk1pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZSAmJiB0aGlzLm1pbiAmJiB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyh0aGlzLnllYXJFbmQoKSwgdGhpcy5taW4pIDwgMDtcbiAgICB9XG4gICAgZ3JlYXRlclRoYW5NYXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5tYXggJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy55ZWFyU3RhcnQoKSwgdGhpcy5tYXgpID4gMDtcbiAgICB9XG4gICAgeWVhclN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRZZWFyU3RhcnQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgeWVhckVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhckVuZCh0aGlzLmRhdGUpO1xuICAgIH1cbiAgICBpc0luUmFuZ2UoZGF0ZSwgeyBzdGFydCwgZW5kIH0pIHtcbiAgICAgICAgaWYgKHN0YXJ0ICYmIGVuZCkge1xuICAgICAgICAgICAgY29uc3QgY2VsbFllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoZGF0ZSk7XG4gICAgICAgICAgICBjb25zdCBzdGFydFllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoc3RhcnQpO1xuICAgICAgICAgICAgY29uc3QgZW5kWWVhciA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0WWVhcihlbmQpO1xuICAgICAgICAgICAgcmV0dXJuIGNlbGxZZWFyID49IHN0YXJ0WWVhciAmJiBjZWxsWWVhciA8PSBlbmRZZWFyO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZVllYXIoZGF0ZSwgc3RhcnQpO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1yYW5nZS15ZWFyLWNlbGwnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImNlbGwtY29udGVudFwiPlxuICAgICAge3sgeWVhciB9fVxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdGVkVmFsdWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGluUmFuZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmluLXJhbmdlJyxdIH1dLFxuICAgIHJhbmdlU3RhcnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXJ0JyxdIH1dLFxuICAgIHJhbmdlRW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5lbmQnLF0gfV0sXG4gICAgc2VsZWN0ZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNlbGVjdGVkJyxdIH1dLFxuICAgIHRvZGF5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2RheScsXSB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZGlzYWJsZWQnLF0gfV0sXG4gICAgaXNMYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICB5ZWFyQ2VsbENsYXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy55ZWFyLWNlbGwnLF0gfV0sXG4gICAgcmFuZ2VDZWxsQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnJhbmdlLWNlbGwnLF0gfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNhbGVuZGFyUmFuZ2VNb250aENlbGxDb21wb25lbnQgZXh0ZW5kcyBOYkJhc2VDYWxlbmRhclJhbmdlQ2VsbCB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIHRoaXMuc2VsZWN0ID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcbiAgICAgICAgdGhpcy5tb250aENlbGxDbGFzcyA9IHRydWU7XG4gICAgICAgIHRoaXMucmFuZ2VDZWxsQ2xhc3MgPSB0cnVlO1xuICAgIH1cbiAgICBnZXQgbW9udGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoTmFtZSh0aGlzLmRhdGUpO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLmluUmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkVmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZU1vbnRoU2FmZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5zdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGluUmFuZ2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1JhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pc0luUmFnZSh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHJhbmdlU3RhcnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc1JhbmdlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aCh0aGlzLmRhdGUsIHRoaXMuc2VsZWN0ZWRWYWx1ZS5zdGFydCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHJhbmdlRW5kKCkge1xuICAgICAgICBpZiAodGhpcy5oYXNSYW5nZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNTYW1lTW9udGgodGhpcy5kYXRlLCB0aGlzLnNlbGVjdGVkVmFsdWUuZW5kKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgdG9kYXkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZU1vbnRoU2FmZSh0aGlzLmRhdGUsIHRoaXMuZGF0ZVNlcnZpY2UudG9kYXkoKSk7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc21hbGxlclRoYW5NaW4oKSB8fCB0aGlzLmdyZWF0ZXJUaGFuTWF4KCk7XG4gICAgfVxuICAgIGdldCBpc0xhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSBOYkNhbGVuZGFyU2l6ZS5MQVJHRTtcbiAgICB9XG4gICAgb25DbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNlbGVjdC5lbWl0KHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIHNtYWxsZXJUaGFuTWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlICYmIHRoaXMubWluICYmIHRoaXMuZGF0ZVNlcnZpY2UuY29tcGFyZURhdGVzKHRoaXMubW9udGhFbmQoKSwgdGhpcy5taW4pIDwgMDtcbiAgICB9XG4gICAgZ3JlYXRlclRoYW5NYXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGUgJiYgdGhpcy5tYXggJiYgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXModGhpcy5tb250aFN0YXJ0KCksIHRoaXMubWF4KSA+IDA7XG4gICAgfVxuICAgIG1vbnRoU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoU3RhcnQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgbW9udGhFbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoRW5kKHRoaXMuZGF0ZSk7XG4gICAgfVxuICAgIGlzSW5SYWdlKGRhdGUsIHJhbmdlKSB7XG4gICAgICAgIGlmIChyYW5nZS5zdGFydCAmJiByYW5nZS5lbmQpIHtcbiAgICAgICAgICAgIGNvbnN0IGNlbGxEYXRlID0gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aFN0YXJ0KGRhdGUpO1xuICAgICAgICAgICAgY29uc3Qgc3RhcnQgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoU3RhcnQocmFuZ2Uuc3RhcnQpO1xuICAgICAgICAgICAgY29uc3QgZW5kID0gdGhpcy5kYXRlU2VydmljZS5nZXRNb250aFN0YXJ0KHJhbmdlLmVuZCk7XG4gICAgICAgICAgICBjb25zdCBpc0dyZWF0ZXJUaGFuU3RhcnQgPSB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyhjZWxsRGF0ZSwgc3RhcnQpID49IDA7XG4gICAgICAgICAgICBjb25zdCBpc0xlc3NUaGFuRW5kID0gdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXMoY2VsbERhdGUsIGVuZCkgPD0gMDtcbiAgICAgICAgICAgIHJldHVybiBpc0dyZWF0ZXJUaGFuU3RhcnQgJiYgaXNMZXNzVGhhbkVuZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1NhbWVNb250aChkYXRlLCByYW5nZS5zdGFydCk7XG4gICAgfVxufVxuTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jYWxlbmRhci1yYW5nZS1tb250aC1jZWxsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJjZWxsLWNvbnRlbnRcIj5cbiAgICAgIHt7IG1vbnRoIH19XG4gICAgPC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZpc2libGVEYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3RlZFZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtaW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1heDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgbW9udGhDZWxsQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm1vbnRoLWNlbGwnLF0gfV0sXG4gICAgcmFuZ2VDZWxsQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnJhbmdlLWNlbGwnLF0gfV0sXG4gICAgc2VsZWN0ZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNlbGVjdGVkJyxdIH1dLFxuICAgIGluUmFuZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmluLXJhbmdlJyxdIH1dLFxuICAgIHJhbmdlU3RhcnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXJ0JyxdIH1dLFxuICAgIHJhbmdlRW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5lbmQnLF0gfV0sXG4gICAgdG9kYXk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnRvZGF5JyxdIH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5kaXNhYmxlZCcsXSB9XSxcbiAgICBpc0xhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIG9uQ2xpY2s6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydjbGljaycsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDYWxlbmRhclJhbmdlIGNvbXBvbmVudCBwcm92aWRlcyBhIGNhcGFiaWxpdHkgdG8gY2hvb3NlIGEgZGF0ZSByYW5nZS5cbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItY2FsZW5kYXIgWyhkYXRlKV09XCJkYXRlXCI+PC9uYi1jYWxlbmRhcj5cbiAqIDxuYi1jYWxlbmRhciBbZGF0ZV09XCJkYXRlXCIgKGRhdGVDaGFuZ2UpPVwiaGFuZGxlRGF0ZUNoYW5nZSgkZXZlbnQpXCI+PC9uYi1jYWxlbmRhcj5cbiAqIGBgYFxuICpcbiAqIEJhc2ljIHVzYWdlIGV4YW1wbGVcbiAqIEBzdGFja2VkLWV4YW1wbGUoUmFuZ2UsIGNhbGVuZGFyL2NhbGVuZGFyLXJhbmdlLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkNhbGVuZGFyUmFuZ2VNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2FsZW5kYXJSYW5nZU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIENhbGVuZGFyUmFuZ2UgY29tcG9uZW50IHN1cHBvcnRzIGFsbCBvZiB0aGUgQ2FsZW5kYXIgY29tcG9uZW50IGN1c3RvbWl6YXRpb24gcHJvcGVydGllcy4gTW9yZSBkZWZhaWxzIGNhbiBiZSBmb3VuZFxuICogaW4gdGhlIFtDYWxlbmRhciBjb21wb25lbnQgZG9jc10oZG9jcy9jb21wb25lbnRzL2NhbGVuZGFyKS5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2FsZW5kYXItd2lkdGg6XG4gKiBjYWxlbmRhci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItYm9yZGVyLXN0eWxlOlxuICogY2FsZW5kYXItYm9yZGVyLXdpZHRoOlxuICogY2FsZW5kYXItYm9yZGVyLXJhZGl1czpcbiAqIGNhbGVuZGFyLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2FsZW5kYXItdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLXBpY2tlci1wYWRkaW5nLXRvcDpcbiAqIGNhbGVuZGFyLXBpY2tlci1wYWRkaW5nLWJvdHRvbTpcbiAqIGNhbGVuZGFyLXBpY2tlci1wYWRkaW5nLXN0YXJ0OlxuICogY2FsZW5kYXItcGlja2VyLXBhZGRpbmctZW5kOlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2FsZW5kYXItbmF2aWdhdGlvbi10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGl0bGUtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLW5hdmlnYXRpb24tcGFkZGluZzpcbiAqIGNhbGVuZGFyLWNlbGwtaW5hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1ob3Zlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtaG92ZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci1jZWxsLWFjdGl2ZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2FsZW5kYXItY2VsbC1hY3RpdmUtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLXRleHQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktc2VsZWN0ZWQtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LXNlbGVjdGVkLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjYWxlbmRhci1jZWxsLXRvZGF5LWluLXJhbmdlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC10b2RheS1pbi1yYW5nZS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtdG9kYXktaW4tcmFuZ2UtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC10ZXh0LWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1mb250LXdlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2FsZW5kYXItY2VsbC1zZWxlY3RlZC1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNhbGVuZGFyLWNlbGwtc2VsZWN0ZWQtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLXdpZHRoOlxuICogY2FsZW5kYXItZGF5LWNlbGwtaGVpZ2h0OlxuICogY2FsZW5kYXItbW9udGgtY2VsbC13aWR0aDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtaGVpZ2h0OlxuICogY2FsZW5kYXIteWVhci1jZWxsLXdpZHRoOlxuICogY2FsZW5kYXIteWVhci1jZWxsLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktYmFja2dyb3VuZDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktZGl2aWRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLXdlZWtkYXktZGl2aWRlci13aWR0aDpcbiAqIGNhbGVuZGFyLXdlZWtkYXktdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLXdlZWtkYXktdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWhvbGlkYXktdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLXdlZWtkYXktaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS13aWR0aDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItYmFja2dyb3VuZDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItZGl2aWRlci1jb2xvcjpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItZGl2aWRlci13aWR0aDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItdGV4dC1jb2xvcjpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItdGV4dC1mb250LXNpemU6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWhlaWdodDpcbiAqIGNhbGVuZGFyLXdlZWtudW1iZXItd2lkdGg6XG4gKiBjYWxlbmRhci1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLWRheS1jZWxsLWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXItZGF5LWNlbGwtbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXItd2Vla2RheS1sYXJnZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrZGF5LWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXItd2Vla251bWJlci1sYXJnZS1oZWlnaHQ6XG4gKiBjYWxlbmRhci13ZWVrbnVtYmVyLWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXItbW9udGgtY2VsbC1sYXJnZS13aWR0aDpcbiAqIGNhbGVuZGFyLW1vbnRoLWNlbGwtbGFyZ2UtaGVpZ2h0OlxuICogY2FsZW5kYXIteWVhci1jZWxsLWxhcmdlLXdpZHRoOlxuICogY2FsZW5kYXIteWVhci1jZWxsLWxhcmdlLWhlaWdodDpcbiAqICovXG5jbGFzcyBOYkNhbGVuZGFyUmFuZ2VDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgd2Ugc2hvdWxkIHJlbmRlciBwcmV2aW91cyBhbmQgbmV4dCBtb250aHNcbiAgICAgICAgICogaW4gdGhlIGN1cnJlbnQgbW9udGggdmlldy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5ib3VuZGluZ01vbnRoID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgc3RhcnRpbmcgdmlldyBmb3IgdGhlIGNhbGVuZGFyLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnN0YXJ0VmlldyA9IE5iQ2FsZW5kYXJWaWV3TW9kZS5EQVRFO1xuICAgICAgICB0aGlzLmRheUNlbGxDb21wb25lbnQgPSBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50O1xuICAgICAgICB0aGlzLm1vbnRoQ2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudDtcbiAgICAgICAgdGhpcy55ZWFyQ2VsbENvbXBvbmVudCA9IE5iQ2FsZW5kYXJSYW5nZVllYXJDZWxsQ29tcG9uZW50O1xuICAgICAgICAvKipcbiAgICAgICAgICogU2l6ZSBvZiB0aGUgY2FsZW5kYXIgYW5kIGVudGlyZSBjb21wb25lbnRzLlxuICAgICAgICAgKiBDYW4gYmUgJ21lZGl1bScgd2hpY2ggaXMgZGVmYXVsdCBvciAnbGFyZ2UnLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnNpemUgPSBOYkNhbGVuZGFyU2l6ZS5NRURJVU07XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IGNhbGVuZGFycyBuYXZpZ2F0aW9uIG9yIG5vdC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zaG93TmF2aWdhdGlvbiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Nob3dXZWVrTnVtYmVyID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHN5bWJvbCB1c2VkIGFzIGEgaGVhZGVyIGZvciB3ZWVrIG51bWJlcnMgY29sdW1uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMud2Vla051bWJlclN5bWJvbCA9ICcjJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHJhbmdlIHdoZW4gc3RhcnQgc2VsZWN0ZWQgYW5kIGVtaXRzIGFnYWluIHdoZW4gZW5kIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnJhbmdlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDdXN0b20gZGF5IGNlbGwgY29tcG9uZW50LiBIYXZlIHRvIGltcGxlbWVudCBgTmJDYWxlbmRhckNlbGxgIGludGVyZmFjZS5cbiAgICAgKiAqL1xuICAgIHNldCBfY2VsbENvbXBvbmVudChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLmRheUNlbGxDb21wb25lbnQgPSBjZWxsQ29tcG9uZW50O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEN1c3RvbSBtb250aCBjZWxsIGNvbXBvbmVudC4gSGF2ZSB0byBpbXBsZW1lbnQgYE5iQ2FsZW5kYXJDZWxsYCBpbnRlcmZhY2UuXG4gICAgICogKi9cbiAgICBzZXQgX21vbnRoQ2VsbENvbXBvbmVudChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLm1vbnRoQ2VsbENvbXBvbmVudCA9IGNlbGxDb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3VzdG9tIHllYXIgY2VsbCBjb21wb25lbnQuIEhhdmUgdG8gaW1wbGVtZW50IGBOYkNhbGVuZGFyQ2VsbGAgaW50ZXJmYWNlLlxuICAgICAqICovXG4gICAgc2V0IF95ZWFyQ2VsbENvbXBvbmVudChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjZWxsQ29tcG9uZW50KSB7XG4gICAgICAgICAgICB0aGlzLnllYXJDZWxsQ29tcG9uZW50ID0gY2VsbENvbXBvbmVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgKiAqL1xuICAgIGdldCBzaG93V2Vla051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgIH1cbiAgICBzZXQgc2hvd1dlZWtOdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBvbkNoYW5nZShkYXRlKSB7XG4gICAgICAgIHRoaXMuaW5pdERhdGVJZk51bGwoKTtcbiAgICAgICAgdGhpcy5oYW5kbGVTZWxlY3RlZChkYXRlKTtcbiAgICB9XG4gICAgaW5pdERhdGVJZk51bGwoKSB7XG4gICAgICAgIGlmICghdGhpcy5yYW5nZSkge1xuICAgICAgICAgICAgdGhpcy5yYW5nZSA9IHsgc3RhcnQ6IG51bGwsIGVuZDogbnVsbCB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZVNlbGVjdGVkKGRhdGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uU3RhcnRlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdEVuZChkYXRlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0U3RhcnQoZGF0ZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0aW9uU3RhcnRlZCgpIHtcbiAgICAgICAgY29uc3QgeyBzdGFydCwgZW5kIH0gPSB0aGlzLnJhbmdlO1xuICAgICAgICByZXR1cm4gc3RhcnQgJiYgIWVuZDtcbiAgICB9XG4gICAgc2VsZWN0U3RhcnQoc3RhcnQpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RSYW5nZSh7IHN0YXJ0IH0pO1xuICAgIH1cbiAgICBzZWxlY3RFbmQoZGF0ZSkge1xuICAgICAgICBjb25zdCB7IHN0YXJ0IH0gPSB0aGlzLnJhbmdlO1xuICAgICAgICBpZiAodGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXMoZGF0ZSwgc3RhcnQpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RSYW5nZSh7IHN0YXJ0LCBlbmQ6IGRhdGUgfSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdFJhbmdlKHsgc3RhcnQ6IGRhdGUsIGVuZDogc3RhcnQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0UmFuZ2UocmFuZ2UpIHtcbiAgICAgICAgdGhpcy5yYW5nZSA9IHJhbmdlO1xuICAgICAgICB0aGlzLnJhbmdlQ2hhbmdlLmVtaXQocmFuZ2UpO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItcmFuZ2UnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5iLWJhc2UtY2FsZW5kYXJcbiAgICAgIFtkYXRlXT1cInJhbmdlXCJcbiAgICAgIChkYXRlQ2hhbmdlKT1cIm9uQ2hhbmdlKCRhbnkoJGV2ZW50KSlcIlxuICAgICAgW21pbl09XCJtaW5cIlxuICAgICAgW21heF09XCJtYXhcIlxuICAgICAgW2ZpbHRlcl09XCJmaWx0ZXJcIlxuICAgICAgW3N0YXJ0Vmlld109XCJzdGFydFZpZXdcIlxuICAgICAgW2JvdW5kaW5nTW9udGhdPVwiYm91bmRpbmdNb250aFwiXG4gICAgICBbZGF5Q2VsbENvbXBvbmVudF09XCJkYXlDZWxsQ29tcG9uZW50XCJcbiAgICAgIFttb250aENlbGxDb21wb25lbnRdPVwibW9udGhDZWxsQ29tcG9uZW50XCJcbiAgICAgIFt5ZWFyQ2VsbENvbXBvbmVudF09XCJ5ZWFyQ2VsbENvbXBvbmVudFwiXG4gICAgICBbdmlzaWJsZURhdGVdPVwidmlzaWJsZURhdGVcIlxuICAgICAgW3Nob3dOYXZpZ2F0aW9uXT1cInNob3dOYXZpZ2F0aW9uXCJcbiAgICAgIFtzaXplXT1cInNpemVcIlxuICAgICAgW3Nob3dXZWVrTnVtYmVyXT1cInNob3dXZWVrTnVtYmVyXCJcbiAgICAgIFt3ZWVrTnVtYmVyU3ltYm9sXT1cIndlZWtOdW1iZXJTeW1ib2xcIlxuICAgID48L25iLWJhc2UtY2FsZW5kYXI+XG4gIGBcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGJvdW5kaW5nTW9udGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXJ0VmlldzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgX2NlbGxDb21wb25lbnQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ2RheUNlbGxDb21wb25lbnQnLF0gfV0sXG4gICAgX21vbnRoQ2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbW9udGhDZWxsQ29tcG9uZW50JyxdIH1dLFxuICAgIG1vbnRoQ2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgX3llYXJDZWxsQ29tcG9uZW50OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyd5ZWFyQ2VsbENvbXBvbmVudCcsXSB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2aXNpYmxlRGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hvd05hdmlnYXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJhbmdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93V2Vla051bWJlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgd2Vla051bWJlclN5bWJvbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcmFuZ2VDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJDYWxlbmRhclJhbmdlTW9kdWxlIHtcbn1cbk5iQ2FsZW5kYXJSYW5nZU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iQmFzZUNhbGVuZGFyTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyUmFuZ2VEYXlDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZURheUNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZU1vbnRoQ2VsbENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhclJhbmdlWWVhckNlbGxDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9USU1FX1BJQ0tFUl9DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05CX1RJTUVfUElDS0VSX0NPTkZJRycpO1xuY29uc3QgTkJfREVGQVVMVF9USU1FUElDS0VSX0xPQ0FMSVpBVElPTl9DT05GSUcgPSB7XG4gICAgaG91cnNUZXh0OiAnSHInLFxuICAgIG1pbnV0ZXNUZXh0OiAnTWluJyxcbiAgICBzZWNvbmRzVGV4dDogJ1NlYycsXG4gICAgYW1wbVRleHQ6ICdBbS9QbScsXG59O1xuXG4vKipcbiAqIFRoZSBUaW1lUGlja2VyIGNvbXBvbmVudHMgaXRzZWxmLlxuICogUHJvdmlkZXMgYSBwcm94eSB0byBgVGltZVBpY2tlcmAgb3B0aW9ucyBhcyB3ZWxsIGFzIGN1c3RvbSBwaWNrZXIgb3B0aW9ucy5cbiAqL1xuY2xhc3MgTmJUaW1lUGlja2VyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIHBsYXRmb3JtU2VydmljZSwgbG9jYWxlLCBjZCwgY2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlLCBkYXRlU2VydmljZSkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5wbGF0Zm9ybVNlcnZpY2UgPSBwbGF0Zm9ybVNlcnZpY2U7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UgPSBjYWxlbmRhclRpbWVNb2RlbFNlcnZpY2U7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5ibHVyJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuZGF5UGVyaW9kQ29sdW1uT3B0aW9ucyA9IFtcIkFNXCIgLyogQU0gKi8sIFwiUE1cIiAvKiBQTSAqL107XG4gICAgICAgIHRoaXMuaXNBTSA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbiB0aW1lcGlja2VyIHZhbHVlIHNob3VsZCBiZSBhbHdheXMgdHJ1ZVxuICAgICAgICAgKiBJbiBjYWxlbmRhci13aXRoLXRpbWUuY29tcG9uZW50ICBzaG91bGQgc2V0IHRvIGZhbHNlXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0Zvb3RlciA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyBkYXRlIHdoZW4gc2VsZWN0ZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMub25TZWxlY3RUaW1lID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmluaXRGcm9tQ29uZmlnKHRoaXMuY29uZmlnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgd2hlbiB0aW1lcGlja2VyIGxvb3NlcyBmb2N1cy5cbiAgICAgKi9cbiAgICBnZXQgYmx1cigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1ciQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlZmluZXMgdGltZSBmb3JtYXQgc3RyaW5nLlxuICAgICAqICovXG4gICAgZ2V0IHRpbWVGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lRm9ybWF0O1xuICAgIH1cbiAgICBzZXQgdGltZUZvcm1hdCh0aW1lRm9ybWF0KSB7XG4gICAgICAgIHRoaXMuX3RpbWVGb3JtYXQgPSB0aW1lRm9ybWF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIDEyIGhvdXJzIGZvcm1hdCAuXG4gICAgICogKi9cbiAgICBnZXQgdHdlbHZlSG91cnNGb3JtYXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90d2VsdmVIb3Vyc0Zvcm1hdDtcbiAgICB9XG4gICAgc2V0IHR3ZWx2ZUhvdXJzRm9ybWF0KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3R3ZWx2ZUhvdXJzRm9ybWF0ID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgO1xuICAgIC8qKlxuICAgICAqIFNob3cgc2Vjb25kcyBpbiB0aW1lcGlja2VyLlxuICAgICAqIElnbm9yZWQgd2hlbiBzaW5nbGVDb2x1bW4gaXMgdHJ1ZVxuICAgICAqICovXG4gICAgZ2V0IHdpdGhTZWNvbmRzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFNlY29uZHM7XG4gICAgfVxuICAgIHNldCB3aXRoU2Vjb25kcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl93aXRoU2Vjb25kcyA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIDtcbiAgICAvKipcbiAgICAgKiBTaG93IHRpbWVwaWNrZXIgdmFsdWVzIGluIG9uZSBjb2x1bW4gd2l0aCA2MCBtaW51dGVzIHN0ZXAgYnkgZGVmYXVsdC5cbiAgICAgKiAqL1xuICAgIGdldCBzaW5nbGVDb2x1bW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaW5nbGVDb2x1bW47XG4gICAgfVxuICAgIHNldCBzaW5nbGVDb2x1bW4odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2luZ2xlQ29sdW1uID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBtaW51dGVzIG9mZnNldCBmb3Igb3B0aW9ucywgd2hlbiB0aW1lcGlja2VyIGlzIGluIHNpbmdsZSBjb2x1bW4gbW9kZS5cbiAgICAgKiBCeSBkZWZhdWx0IGl04oCZcyA2MCBtaW51dGVzOiAnMTI6MDAsIDEzOjAwOiAxNDowMCwgMTU6MDAuLi4nXG4gICAgICogKi9cbiAgICBzZXQgc3RlcChzdGVwKSB7XG4gICAgICAgIHRoaXMuX3N0ZXAgPSBzdGVwO1xuICAgIH1cbiAgICBnZXQgc3RlcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0ZXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERhdGUgd2hpY2ggd2lsbCBiZSByZW5kZXJlZCBhcyBzZWxlY3RlZC5cbiAgICAgKiAqL1xuICAgIHNldCBkYXRlKGRhdGUpIHtcbiAgICAgICAgdGhpcy5fZGF0ZSA9IGRhdGU7XG4gICAgICAgIHRoaXMuaXNBTSA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF5UGVyaW9kKHRoaXMuZGF0ZSkgPT09IFwiQU1cIiAvKiBBTSAqLztcbiAgICAgICAgdGhpcy5idWlsZENvbHVtbk9wdGlvbnMoKTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgZ2V0IGRhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kYXRlO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy50aW1lRm9ybWF0ID0gdGhpcy5zZXR1cFRpbWVGb3JtYXQoKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoeyBzdGVwLCB0d2VsdmVIb3Vyc0Zvcm1hdCwgd2l0aFNlY29uZHMsIHNpbmdsZUNvbHVtbiwgfSkge1xuICAgICAgICB0aGlzLnRpbWVGb3JtYXQgPSB0aGlzLnNldHVwVGltZUZvcm1hdCgpO1xuICAgICAgICBjb25zdCBpc0NvbmZpZ0NoYW5nZWQgPSBzdGVwIHx8IHR3ZWx2ZUhvdXJzRm9ybWF0IHx8IHdpdGhTZWNvbmRzIHx8IHNpbmdsZUNvbHVtbjtcbiAgICAgICAgaWYgKGlzQ29uZmlnQ2hhbmdlZCB8fCAhdGhpcy5mdWxsVGltZU9wdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuYnVpbGRDb2x1bW5PcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0SG9zdChob3N0UmVmKSB7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgfVxuICAgIGF0dGFjaChob3N0UmVmKSB7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgfVxuICAgIHNldEN1cnJlbnRUaW1lKCkge1xuICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCk7XG4gICAgICAgIHRoaXMub25TZWxlY3RUaW1lLmVtaXQoe1xuICAgICAgICAgICAgdGltZTogdGhpcy5kYXRlLFxuICAgICAgICAgICAgc2F2ZTogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldEhvdXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLmRhdGVTZXJ2aWNlLnNldEhvdXJzKHRoaXMuZGF0ZSwgdmFsdWUpKTtcbiAgICB9XG4gICAgc2V0TWludXRlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5kYXRlU2VydmljZS5zZXRNaW51dGVzKHRoaXMuZGF0ZSwgdmFsdWUpKTtcbiAgICB9XG4gICAgc2V0U2Vjb25kKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodGhpcy5kYXRlU2VydmljZS5zZXRTZWNvbmRzKHRoaXMuZGF0ZSwgdmFsdWUpKTtcbiAgICB9XG4gICAgc2VsZWN0RnVsbFRpbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICAgIGNoYW5nZURheVBlcmlvZChkYXlQZXJpb2RUb1NldCkge1xuICAgICAgICBpZiAodGhpcy5kYXRlU2VydmljZS5nZXREYXlQZXJpb2QodGhpcy5kYXRlKSA9PT0gZGF5UGVyaW9kVG9TZXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBTdWJ0cmFjdCBob3VycyB3aGVuIHN3aXRjaGluZyB0byBBTSAoYmVmb3JlIG1pZGRheSwgMC0xMSBpbiAyNC1ob3VyKSBmcm9tIFBNIChhZnRlciBtaWRkYXksIDEyLTI0IGluIDI0LWhvdXIpLFxuICAgICAgICAvLyBvdGhlcndpc2UgYWRkIGhvdXJzIGJlY2F1c2Ugc3dpdGNoaW5nIHRvIFBNIGZyb20gQU0uXG4gICAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IGRheVBlcmlvZFRvU2V0ID09PSBcIkFNXCIgLyogQU0gKi8gPyAtMSA6IDE7XG4gICAgICAgIGNvbnN0IGluY3JlbWVudCA9IGRpcmVjdGlvbiAqIHRoaXMuZGF0ZVNlcnZpY2UuSE9VUlNfSU5fREFZX1BFUklPRDtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLmRhdGVTZXJ2aWNlLmFkZEhvdXJzKHRoaXMuZGF0ZSwgaW5jcmVtZW50KSk7XG4gICAgfVxuICAgIHVwZGF0ZVZhbHVlKGRhdGUpIHtcbiAgICAgICAgdGhpcy5vblNlbGVjdFRpbWUuZW1pdCh7IHRpbWU6IGRhdGUgfSk7XG4gICAgfVxuICAgIHNhdmVWYWx1ZSgpIHtcbiAgICAgICAgdGhpcy5vblNlbGVjdFRpbWUuZW1pdCh7XG4gICAgICAgICAgICB0aW1lOiB0aGlzLmRhdGUsXG4gICAgICAgICAgICBzYXZlOiB0cnVlLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgdHJhY2tCeVRpbWVWYWx1ZXMoaW5kZXgsIGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuIGl0ZW0udmFsdWU7XG4gICAgfVxuICAgIHRyYWNrQnlTaW5nbGVDb2x1bW5WYWx1ZShpbmRleCwgaXRlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS52YWx1ZU9mKGl0ZW0pO1xuICAgIH1cbiAgICB0cmFja0J5RGF5UGVyaW9kKGluZGV4LCBpdGVtKSB7XG4gICAgICAgIHJldHVybiBpdGVtO1xuICAgIH1cbiAgICBzaG93U2Vjb25kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aFNlY29uZHMgJiYgIXRoaXMuc2luZ2xlQ29sdW1uO1xuICAgIH1cbiAgICBpc1NlbGVjdGVkSG91cih2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0SG91cnModGhpcy5kYXRlKSA9PT0gdmFsO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaXNTZWxlY3RlZE1pbnV0ZSh2YWwpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TWludXRlcyh0aGlzLmRhdGUpID09PSB2YWw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpc1NlbGVjdGVkU2Vjb25kKHZhbCkge1xuICAgICAgICBpZiAodGhpcy5kYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5nZXRTZWNvbmRzKHRoaXMuZGF0ZSkgPT09IHZhbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlzU2VsZWN0ZWREYXlQZXJpb2QoZGF5UGVyaW9kKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiBkYXlQZXJpb2QgPT09IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0RGF5UGVyaW9kKHRoaXMuZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXRGdWxsVGltZVN0cmluZyhpdGVtKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmZvcm1hdChpdGVtLCB0aGlzLnRpbWVGb3JtYXQpLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuICAgIGlzU2VsZWN0ZWRGdWxsVGltZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGlmICh0aGlzLmRhdGUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzU2FtZUhvdXJBbmRNaW51dGUodmFsdWUsIHRoaXMuZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBidWlsZENvbHVtbk9wdGlvbnMoKSB7XG4gICAgICAgIHRoaXMudGltZUZvcm1hdCA9IHRoaXMuc2V0dXBUaW1lRm9ybWF0KCk7XG4gICAgICAgIHRoaXMuZnVsbFRpbWVPcHRpb25zID0gdGhpcy5zaW5nbGVDb2x1bW5cbiAgICAgICAgICAgID8gdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UuZ2V0SG91cnNSYW5nZSh0aGlzLnN0ZXApXG4gICAgICAgICAgICA6IFtdO1xuICAgICAgICB0aGlzLmhvdXJzQ29sdW1uT3B0aW9ucyA9IHRoaXMuZ2VuZXJhdGVIb3VycygpO1xuICAgICAgICB0aGlzLm1pbnV0ZXNDb2x1bW5PcHRpb25zID0gdGhpcy5nZW5lcmF0ZU1pbnV0ZXNPclNlY29uZHMoKTtcbiAgICAgICAgdGhpcy5zZWNvbmRzQ29sdW1uT3B0aW9ucyA9IHRoaXMud2l0aFNlY29uZHMgPyB0aGlzLmdlbmVyYXRlTWludXRlc09yU2Vjb25kcygpIDogW107XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKi9cbiAgICBpc0ZpcmVmb3goKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBsYXRmb3JtU2VydmljZS5GSVJFRk9YO1xuICAgIH1cbiAgICBnZW5lcmF0ZUhvdXJzKCkge1xuICAgICAgICBpZiAoIXRoaXMudHdlbHZlSG91cnNGb3JtYXQpIHtcbiAgICAgICAgICAgIHJldHVybiByYW5nZSgyNCwgKHYpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdiwgdGV4dDogdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UucGFkZFRvVHdvU3ltYm9scyh2KSB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNBTSkge1xuICAgICAgICAgICAgcmV0dXJuIChyYW5nZSgxMiwgKHYpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gdiA9PT0gMCA/IDEyIDogdjtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdiwgdGV4dDogdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UucGFkZFRvVHdvU3ltYm9scyh0ZXh0KSB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmFuZ2VGcm9tVG8oMTIsIDI0LCAodikgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGV4dCA9IHYgPT09IDEyID8gMTIgOiAodiAtIDEyKTtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB2LCB0ZXh0OiB0aGlzLmNhbGVuZGFyVGltZU1vZGVsU2VydmljZS5wYWRkVG9Ud29TeW1ib2xzKHRleHQpIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2VuZXJhdGVNaW51dGVzT3JTZWNvbmRzKCkge1xuICAgICAgICByZXR1cm4gcmFuZ2UoNjAsICh2KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdiwgdGV4dDogdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UucGFkZFRvVHdvU3ltYm9scyh2KSB9O1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0dXBUaW1lRm9ybWF0KCkge1xuICAgICAgICBpZiAoIXRoaXMudGltZUZvcm1hdCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmZvcm1hdCB8fCB0aGlzLmJ1aWxkVGltZUZvcm1hdCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVGb3JtYXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKi9cbiAgICBidWlsZFRpbWVGb3JtYXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnR3ZWx2ZUhvdXJzRm9ybWF0KSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy53aXRoU2Vjb25kcyAmJiAhdGhpcy5zaW5nbGVDb2x1bW4gPyB0aGlzLmRhdGVTZXJ2aWNlLmdldFR3ZWx2ZUhvdXJzRm9ybWF0V2l0aFNlY29uZHMoKVxuICAgICAgICAgICAgICAgIDogdGhpcy5kYXRlU2VydmljZS5nZXRUd2VsdmVIb3Vyc0Zvcm1hdCgpfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy53aXRoU2Vjb25kcyAmJiAhdGhpcy5zaW5nbGVDb2x1bW4gPyB0aGlzLmRhdGVTZXJ2aWNlLmdldFR3ZW50eUZvdXJIb3Vyc0Zvcm1hdFdpdGhTZWNvbmRzKClcbiAgICAgICAgICAgICAgICA6IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0VHdlbnR5Rm91ckhvdXJzRm9ybWF0KCl9YDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpbml0RnJvbUNvbmZpZyhjb25maWcpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoY29uZmlnKSB7XG4gICAgICAgICAgICB0aGlzLnR3ZWx2ZUhvdXJzRm9ybWF0ID0gY29uZmlnLnR3ZWx2ZUhvdXJzRm9ybWF0O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50d2VsdmVIb3Vyc0Zvcm1hdCA9IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TG9jYWxlVGltZUZvcm1hdCgpLmluY2x1ZGVzKCdoJyk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbG9jYWxlQ29uZmlnID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBOQl9ERUZBVUxUX1RJTUVQSUNLRVJfTE9DQUxJWkFUSU9OX0NPTkZJRyksIChfYSA9IGNvbmZpZyA9PT0gbnVsbCB8fCBjb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbmZpZy5sb2NhbGl6YXRpb24pICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHt9KTtcbiAgICAgICAgdGhpcy5ob3Vyc1RleHQgPSBsb2NhbGVDb25maWcuaG91cnNUZXh0O1xuICAgICAgICB0aGlzLm1pbnV0ZXNUZXh0ID0gbG9jYWxlQ29uZmlnLm1pbnV0ZXNUZXh0O1xuICAgICAgICB0aGlzLnNlY29uZHNUZXh0ID0gbG9jYWxlQ29uZmlnLnNlY29uZHNUZXh0O1xuICAgICAgICB0aGlzLmFtcG1UZXh0ID0gbG9jYWxlQ29uZmlnLmFtcG1UZXh0O1xuICAgIH1cbn1cbk5iVGltZVBpY2tlckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdGltZXBpY2tlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPG5iLWNhcmQgKm5iUG9ydGFsXFxuICAgICAgICAgW2NsYXNzLnN1cHBvcnRzLXNjcm9sbGJhci10aGVtaW5nXT1cXFwiIWlzRmlyZWZveCgpXFxcIlxcbiAgICAgICAgIGNsYXNzPVxcXCJuYi10aW1lcGlja2VyLWNvbnRhaW5lclxcXCI+XFxuICA8bmItY2FyZC1oZWFkZXIgY2xhc3M9XFxcImNvbHVtbi1oZWFkZXJcXFwiPlxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzaW5nbGVDb2x1bW47IGVsc2UgZnVsbFRpbWVIZWFkZXJzQmxvY2tcXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlci1jZWxsXFxcIj5UaW1lPC9kaXY+XFxuICAgIDwvbmctY29udGFpbmVyPlxcbiAgICA8bmctdGVtcGxhdGUgI2Z1bGxUaW1lSGVhZGVyc0Jsb2NrPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlci1jZWxsXFxcIj57eyBob3Vyc1RleHQgfX08L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkZXItY2VsbFxcXCI+e3sgbWludXRlc1RleHQgfX08L2Rpdj5cXG4gICAgICA8ZGl2ICpuZ0lmPVxcXCJ3aXRoU2Vjb25kc1xcXCIgY2xhc3M9XFxcImhlYWRlci1jZWxsXFxcIj57eyBzZWNvbmRzVGV4dCB9fTwvZGl2PlxcbiAgICAgIDxkaXYgKm5nSWY9XFxcInR3ZWx2ZUhvdXJzRm9ybWF0XFxcIiBjbGFzcz1cXFwiaGVhZGVyLWNlbGxcXFwiPnt7IGFtcG1UZXh0IH19PC9kaXY+XFxuICAgIDwvbmctdGVtcGxhdGU+XFxuICA8L25iLWNhcmQtaGVhZGVyPlxcblxcbiAgPGRpdiBjbGFzcz1cXFwicGlja2VyLWJvZHlcXFwiPlxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzaW5nbGVDb2x1bW47IGVsc2UgZnVsbFRpbWVDb2x1bW5CbG9ja1xcXCI+XFxuICAgICAgPG5iLWxpc3QgY2xhc3M9XFxcInZhbHVlcy1saXN0XFxcIj5cXG4gICAgICAgIDxuYi1saXN0LWl0ZW1cXG4gICAgICAgICAgY2xhc3M9XFxcImxpc3QtaXRlbVxcXCJcXG4gICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cXFwiaXNTZWxlY3RlZEZ1bGxUaW1lVmFsdWUoaXRlbSlcXFwiXFxuICAgICAgICAgICpuZ0Zvcj1cXFwibGV0IGl0ZW0gb2YgZnVsbFRpbWVPcHRpb25zOyB0cmFja0J5OiB0cmFja0J5U2luZ2xlQ29sdW1uVmFsdWUuYmluZCh0aGlzKVxcXCI+XFxuICAgICAgICAgIDxuYi10aW1lcGlja2VyLWNlbGxcXG4gICAgICAgICAgICBbdmFsdWVdPVxcXCJnZXRGdWxsVGltZVN0cmluZyhpdGVtKVxcXCJcXG4gICAgICAgICAgICBbc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkRnVsbFRpbWVWYWx1ZShpdGVtKVxcXCJcXG4gICAgICAgICAgICAoc2VsZWN0KT1cXFwic2VsZWN0RnVsbFRpbWUoaXRlbSlcXFwiPlxcbiAgICAgICAgICA8L25iLXRpbWVwaWNrZXItY2VsbD5cXG4gICAgICAgIDwvbmItbGlzdC1pdGVtPlxcbiAgICAgIDwvbmItbGlzdD5cXG4gICAgPC9uZy1jb250YWluZXI+XFxuXFxuICAgIDxuZy10ZW1wbGF0ZSAjZnVsbFRpbWVDb2x1bW5CbG9jaz5cXG4gICAgICA8bmItbGlzdCBjbGFzcz1cXFwidmFsdWVzLWxpc3RcXFwiPlxcbiAgICAgICAgPG5iLWxpc3QtaXRlbVxcbiAgICAgICAgICBjbGFzcz1cXFwibGlzdC1pdGVtXFxcIlxcbiAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkSG91cihpdGVtLnZhbHVlKVxcXCJcXG4gICAgICAgICAgKm5nRm9yPVxcXCJsZXQgaXRlbSBvZiBob3Vyc0NvbHVtbk9wdGlvbnM7IHRyYWNrQnk6IHRyYWNrQnlUaW1lVmFsdWVzXFxcIj5cXG4gICAgICAgICAgPG5iLXRpbWVwaWNrZXItY2VsbFxcbiAgICAgICAgICAgIFt2YWx1ZV09XFxcIml0ZW0udGV4dFxcXCJcXG4gICAgICAgICAgICBbc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkSG91cihpdGVtLnZhbHVlKVxcXCJcXG4gICAgICAgICAgICAoc2VsZWN0KT1cXFwic2V0SG91cihpdGVtLnZhbHVlKVxcXCI+XFxuICAgICAgICAgIDwvbmItdGltZXBpY2tlci1jZWxsPlxcbiAgICAgICAgPC9uYi1saXN0LWl0ZW0+XFxuICAgICAgPC9uYi1saXN0PlxcbiAgICAgIDxuYi1saXN0IGNsYXNzPVxcXCJ2YWx1ZXMtbGlzdFxcXCI+XFxuICAgICAgICA8bmItbGlzdC1pdGVtXFxuICAgICAgICAgIGNsYXNzPVxcXCJsaXN0LWl0ZW1cXFwiXFxuICAgICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XFxcImlzU2VsZWN0ZWRNaW51dGUoaXRlbS52YWx1ZSlcXFwiXFxuICAgICAgICAgICpuZ0Zvcj1cXFwibGV0IGl0ZW0gb2YgbWludXRlc0NvbHVtbk9wdGlvbnM7IHRyYWNrQnk6IHRyYWNrQnlUaW1lVmFsdWVzXFxcIj5cXG4gICAgICAgICAgPG5iLXRpbWVwaWNrZXItY2VsbFxcbiAgICAgICAgICAgIFt2YWx1ZV09XFxcIml0ZW0udGV4dFxcXCJcXG4gICAgICAgICAgICBbc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkTWludXRlKGl0ZW0udmFsdWUpXFxcIlxcbiAgICAgICAgICAgIChzZWxlY3QpPVxcXCJzZXRNaW51dGUoaXRlbS52YWx1ZSlcXFwiPlxcbiAgICAgICAgICA8L25iLXRpbWVwaWNrZXItY2VsbD5cXG4gICAgICAgIDwvbmItbGlzdC1pdGVtPlxcbiAgICAgIDwvbmItbGlzdD5cXG4gICAgICA8bmItbGlzdCAqbmdJZj1cXFwic2hvd1NlY29uZHMoKVxcXCIgY2xhc3M9XFxcInZhbHVlcy1saXN0XFxcIj5cXG4gICAgICAgIDxuYi1saXN0LWl0ZW1cXG4gICAgICAgICAgY2xhc3M9XFxcImxpc3QtaXRlbVxcXCJcXG4gICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cXFwiaXNTZWxlY3RlZFNlY29uZChpdGVtLnZhbHVlKVxcXCJcXG4gICAgICAgICAgKm5nRm9yPVxcXCJsZXQgaXRlbSBvZiBzZWNvbmRzQ29sdW1uT3B0aW9uczsgdHJhY2tCeTogdHJhY2tCeVRpbWVWYWx1ZXNcXFwiPlxcbiAgICAgICAgICA8bmItdGltZXBpY2tlci1jZWxsXFxuICAgICAgICAgICAgW3ZhbHVlXT1cXFwiaXRlbS50ZXh0XFxcIlxcbiAgICAgICAgICAgIFtzZWxlY3RlZF09XFxcImlzU2VsZWN0ZWRTZWNvbmQoaXRlbS52YWx1ZSlcXFwiXFxuICAgICAgICAgICAgKHNlbGVjdCk9XFxcInNldFNlY29uZChpdGVtLnZhbHVlKVxcXCI+XFxuICAgICAgICAgIDwvbmItdGltZXBpY2tlci1jZWxsPlxcbiAgICAgICAgPC9uYi1saXN0LWl0ZW0+XFxuICAgICAgPC9uYi1saXN0PlxcbiAgICAgIDxuYi1saXN0ICpuZ0lmPVxcXCJ0d2VsdmVIb3Vyc0Zvcm1hdFxcXCIgY2xhc3M9XFxcInZhbHVlcy1saXN0XFxcIj5cXG4gICAgICAgIDxuYi1saXN0LWl0ZW1cXG4gICAgICAgICAgY2xhc3M9XFxcImxpc3QtaXRlbSBhbS1wbS1pdGVtXFxcIlxcbiAgICAgICAgICBbY2xhc3Muc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkRGF5UGVyaW9kKGRheVBlcmlvZClcXFwiXFxuICAgICAgICAgICpuZ0Zvcj1cXFwibGV0IGRheVBlcmlvZCBvZiBkYXlQZXJpb2RDb2x1bW5PcHRpb25zOyB0cmFja0J5OiB0cmFja0J5RGF5UGVyaW9kXFxcIj5cXG4gICAgICAgICAgPG5iLXRpbWVwaWNrZXItY2VsbFxcbiAgICAgICAgICAgIFt2YWx1ZV09XFxcImRheVBlcmlvZFxcXCJcXG4gICAgICAgICAgICBbc2VsZWN0ZWRdPVxcXCJpc1NlbGVjdGVkRGF5UGVyaW9kKGRheVBlcmlvZClcXFwiXFxuICAgICAgICAgICAgKHNlbGVjdCk9XFxcImNoYW5nZURheVBlcmlvZChkYXlQZXJpb2QpXFxcIj5cXG4gICAgICAgICAgPC9uYi10aW1lcGlja2VyLWNlbGw+XFxuICAgICAgICA8L25iLWxpc3QtaXRlbT5cXG4gICAgICA8L25iLWxpc3Q+XFxuICAgIDwvbmctdGVtcGxhdGU+XFxuICA8L2Rpdj5cXG5cXG4gIDxuYi1jYXJkLWZvb3RlciAqbmdJZj1cXFwic2hvd0Zvb3RlclxcXCIgY2xhc3M9XFxcImFjdGlvbnMtZm9vdGVyXFxcIj5cXG4gICAgPG5iLWNhbGVuZGFyLWFjdGlvbnNcXG4gICAgICBbYXBwbHlCdXR0b25UZXh0XT1cXFwiYXBwbHlCdXR0b25UZXh0XFxcIlxcbiAgICAgIFtjdXJyZW50VGltZUJ1dHRvblRleHRdPVxcXCJjdXJyZW50VGltZUJ1dHRvblRleHRcXFwiXFxuICAgICAgKHNldEN1cnJlbnRUaW1lKT1cXFwic2V0Q3VycmVudFRpbWUoKVxcXCJcXG4gICAgICAoc2F2ZVZhbHVlKT1cXFwic2F2ZVZhbHVlKClcXFwiXFxuICAgID48L25iLWNhbGVuZGFyLWFjdGlvbnM+XFxuICA8L25iLWNhcmQtZm9vdGVyPlxcbjwvbmItY2FyZD5cXG5cIixcbiAgICAgICAgICAgICAgICBleHBvcnRBczogJ25iVGltZXBpY2tlcicsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCIubmItdGltZXBpY2tlci1jb250YWluZXJ7b3ZlcmZsb3c6aGlkZGVuO21hcmdpbi1ib3R0b206MH0udmFsdWVzLWxpc3R7d2lkdGg6MTAwJTtvdmVyZmxvdzpoaWRkZW47c2Nyb2xsLXNuYXAtdHlwZTp5IHByb3hpbWl0eX0udmFsdWVzLWxpc3Q6aG92ZXJ7b3ZlcmZsb3cteTphdXRvfS5saXN0LWl0ZW17Ym9yZGVyOjA7cGFkZGluZzowO2N1cnNvcjpwb2ludGVyfS5waWNrZXItYm9keXtkaXNwbGF5OmZsZXg7d2lkdGg6MTAwJTtmbGV4OjEgMCAwO292ZXJmbG93OmhpZGRlbn0uY29sdW1uLWhlYWRlcnt3aWR0aDoxMDAlO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtwYWRkaW5nOjB9LmhlYWRlci1jZWxse3dpZHRoOjEwMCU7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyfS5hY3Rpb25zLWZvb3Rlcnt3aWR0aDoxMDAlfW5iLWNhcmQtaGVhZGVyLG5iLWNhcmQtZm9vdGVye2ZsZXg6MCAwIGF1dG99XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iVGltZVBpY2tlckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfVElNRV9QSUNLRVJfQ09ORklHLF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iUGxhdGZvcm0gfSxcbiAgICB7IHR5cGU6IFN0cmluZywgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTE9DQUxFX0lELF0gfV0gfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBOYkNhbGVuZGFyVGltZU1vZGVsU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuTmJUaW1lUGlja2VyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRpbWVGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHR3ZWx2ZUhvdXJzRm9ybWF0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB3aXRoU2Vjb25kczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2luZ2xlQ29sdW1uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGVwOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93Rm9vdGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhcHBseUJ1dHRvblRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGhvdXJzVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWludXRlc1RleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlY29uZHNUZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhbXBtVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY3VycmVudFRpbWVCdXR0b25UZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvblNlbGVjdFRpbWU6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBwb3J0YWw6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW05iUG9ydGFsRGlyZWN0aXZlLCB7IHN0YXRpYzogdHJ1ZSB9LF0gfV1cbn07XG5cbmNsYXNzIE5iQ2FsZW5kYXJXaXRoVGltZUNvbXBvbmVudCBleHRlbmRzIE5iQ2FsZW5kYXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlLCBjZCwgY2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLmNhbGVuZGFyVGltZU1vZGVsU2VydmljZSA9IGNhbGVuZGFyVGltZU1vZGVsU2VydmljZTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICghdGhpcy5kYXRlKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGUgPSB0aGlzLmNhbGVuZGFyVGltZU1vZGVsU2VydmljZS5nZXRSZXNldFRpbWUoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMucG9ydGFsT3V0bGV0LmF0dGFjaFRlbXBsYXRlUG9ydGFsKHRoaXMudGltZXBpY2tlci5wb3J0YWwpO1xuICAgIH1cbiAgICBvbkRhdGVWYWx1ZUNoYW5nZShkYXRlKSB7XG4gICAgICAgIGNvbnN0IGhvdXJzID0gdGhpcy5kYXRlU2VydmljZS5nZXRIb3Vycyh0aGlzLmRhdGUpO1xuICAgICAgICBjb25zdCBtaW51dGVzID0gdGhpcy5kYXRlU2VydmljZS5nZXRNaW51dGVzKHRoaXMuZGF0ZSk7XG4gICAgICAgIGNvbnN0IHNlY29uZHMgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFNlY29uZHModGhpcy5kYXRlKTtcbiAgICAgICAgY29uc3QgbWlsbGlzZWNvbmRzID0gdGhpcy5kYXRlU2VydmljZS5nZXRNaWxsaXNlY29uZHModGhpcy5kYXRlKTtcbiAgICAgICAgbGV0IG5ld0RhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLnNldEhvdXJzKGRhdGUsIGhvdXJzKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWludXRlcyhuZXdEYXRlLCBtaW51dGVzKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWludXRlcyhuZXdEYXRlLCBtaW51dGVzKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0U2Vjb25kcyhuZXdEYXRlLCBzZWNvbmRzKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWlsbGlzZWNvbmRzKG5ld0RhdGUsIG1pbGxpc2Vjb25kcyk7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG5ld0RhdGU7XG4gICAgfVxuICAgIG9uVGltZUNoYW5nZShzZWxlY3RlZFRpbWUpIHtcbiAgICAgICAgbGV0IG5ld0RhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLmNsb25lKHRoaXMuZGF0ZSk7XG4gICAgICAgIG5ld0RhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLnNldEhvdXJzKG5ld0RhdGUsIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0SG91cnMoc2VsZWN0ZWRUaW1lLnRpbWUpKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWludXRlcyhuZXdEYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLmdldE1pbnV0ZXMoc2VsZWN0ZWRUaW1lLnRpbWUpKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0U2Vjb25kcyhuZXdEYXRlLCB0aGlzLmRhdGVTZXJ2aWNlLmdldFNlY29uZHMoc2VsZWN0ZWRUaW1lLnRpbWUpKTtcbiAgICAgICAgbmV3RGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2Uuc2V0TWlsbGlzZWNvbmRzKG5ld0RhdGUsIHRoaXMuZGF0ZVNlcnZpY2UuZ2V0TWlsbGlzZWNvbmRzKHNlbGVjdGVkVGltZS50aW1lKSk7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG5ld0RhdGU7XG4gICAgfVxuICAgIHNhdmVWYWx1ZSgpIHtcbiAgICAgICAgdGhpcy5kYXRlQ2hhbmdlLmVtaXQodGhpcy5kYXRlKTtcbiAgICB9XG4gICAgc2F2ZUN1cnJlbnRUaW1lKCkge1xuICAgICAgICB0aGlzLmRhdGVDaGFuZ2UuZW1pdCh0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZSBkb24ndCBzaG93IHNlY29uZHMgd2l0aCB0d2VsdmUgaG91cnMgZm9ybWF0XG4gICAgICogKi9cbiAgICBzaG93U2Vjb25kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMud2l0aFNlY29uZHMgJiYgIXRoaXMudHdlbHZlSG91cnNGb3JtYXQ7XG4gICAgfVxuICAgIGlzTGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IE5iQ2FsZW5kYXJTaXplLkxBUkdFO1xuICAgIH1cbn1cbk5iQ2FsZW5kYXJXaXRoVGltZUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2FsZW5kYXItd2l0aC10aW1lJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYi1jYXJkIGNsYXNzPVwiY2FsZW5kYXItd2l0aC10aW1lXCI+XG4gICAgICA8bmItY2FyZC1ib2R5IGNsYXNzPVwicGlja2VyLWJvZHlcIj5cbiAgICAgICAgPG5iLWJhc2UtY2FsZW5kYXJcbiAgICAgICAgICBbYm91bmRpbmdNb250aF09XCJib3VuZGluZ01vbnRoXCJcbiAgICAgICAgICBbc3RhcnRWaWV3XT1cInN0YXJ0Vmlld1wiXG4gICAgICAgICAgW2RhdGVdPVwiZGF0ZVwiXG4gICAgICAgICAgW21pbl09XCJtaW5cIlxuICAgICAgICAgIFttYXhdPVwibWF4XCJcbiAgICAgICAgICBbZmlsdGVyXT1cImZpbHRlclwiXG4gICAgICAgICAgW2RheUNlbGxDb21wb25lbnRdPVwiZGF5Q2VsbENvbXBvbmVudFwiXG4gICAgICAgICAgW21vbnRoQ2VsbENvbXBvbmVudF09XCJtb250aENlbGxDb21wb25lbnRcIlxuICAgICAgICAgIFt5ZWFyQ2VsbENvbXBvbmVudF09XCJ5ZWFyQ2VsbENvbXBvbmVudFwiXG4gICAgICAgICAgW3NpemVdPVwic2l6ZVwiXG4gICAgICAgICAgW3Zpc2libGVEYXRlXT1cInZpc2libGVEYXRlXCJcbiAgICAgICAgICBbc2hvd05hdmlnYXRpb25dPVwic2hvd05hdmlnYXRpb25cIlxuICAgICAgICAgIFtzaG93V2Vla051bWJlcl09XCJzaG93V2Vla051bWJlclwiXG4gICAgICAgICAgW3dlZWtOdW1iZXJTeW1ib2xdPVwid2Vla051bWJlclN5bWJvbFwiXG4gICAgICAgICAgKGRhdGVDaGFuZ2UpPVwib25EYXRlVmFsdWVDaGFuZ2UoJGV2ZW50KVwiPlxuICAgICAgICA8L25iLWJhc2UtY2FsZW5kYXI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLXNlY3Rpb25cIlxuICAgICAgICAgICAgIFtjbGFzcy5zaXplLWxhcmdlXT1cImlzTGFyZ2UoKVwiXG4gICAgICAgICAgICAgW2NsYXNzLnRpbWVwaWNrZXItc2luZ2xlLWNvbHVtbi13aWR0aF09XCJzaW5nbGVDb2x1bW5cIlxuICAgICAgICAgICAgIFtjbGFzcy50aW1lcGlja2VyLW11bHRpcGxlLWNvbHVtbi13aWR0aF09XCIhc2luZ2xlQ29sdW1uXCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInBpY2tlci10aXRsZVwiPnt7IHRpdGxlIH19PC9kaXY+XG4gICAgICAgICAgPG5iLXRpbWVwaWNrZXJcbiAgICAgICAgICAgIChvblNlbGVjdFRpbWUpPVwib25UaW1lQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgW2RhdGVdPVwiZGF0ZVwiXG4gICAgICAgICAgICBbdHdlbHZlSG91cnNGb3JtYXRdPVwidHdlbHZlSG91cnNGb3JtYXRcIlxuICAgICAgICAgICAgW3dpdGhTZWNvbmRzXT1cInNob3dTZWNvbmRzKClcIlxuICAgICAgICAgICAgW3Nob3dGb290ZXJdPVwiZmFsc2VcIlxuICAgICAgICAgICAgW3NpbmdsZUNvbHVtbl09XCJzaW5nbGVDb2x1bW5cIlxuICAgICAgICAgICAgW3N0ZXBdPVwic3RlcFwiPlxuICAgICAgICAgIDwvbmItdGltZXBpY2tlcj5cbiAgICAgICAgICA8bmctY29udGFpbmVyIG5iUG9ydGFsT3V0bGV0PjwvbmctY29udGFpbmVyPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvbmItY2FyZC1ib2R5PlxuICAgICAgPG5iLWNhcmQtZm9vdGVyIGNsYXNzPVwicGlja2VyLWZvb3RlclwiPlxuICAgICAgICA8bmItY2FsZW5kYXItYWN0aW9uc1xuICAgICAgICAgIFthcHBseUJ1dHRvblRleHRdPVwiYXBwbHlCdXR0b25UZXh0XCJcbiAgICAgICAgICBbY3VycmVudFRpbWVCdXR0b25UZXh0XT1cImN1cnJlbnRUaW1lQnV0dG9uVGV4dFwiXG4gICAgICAgICAgKHNldEN1cnJlbnRUaW1lKT1cInNhdmVDdXJyZW50VGltZSgpXCJcbiAgICAgICAgICAoc2F2ZVZhbHVlKT1cInNhdmVWYWx1ZSgpXCJcbiAgICAgICAgPjwvbmItY2FsZW5kYXItYWN0aW9ucz5cbiAgICAgIDwvbmItY2FyZC1mb290ZXI+XG4gICAgPC9uYi1jYXJkPlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgOjpuZy1kZWVwIG5iLWNhcmQubmItdGltZXBpY2tlci1jb250YWluZXJ7ZmxleDoxIDAgMDtib3JkZXItcmFkaXVzOjA7d2lkdGg6YXV0bztib3JkZXItcmlnaHQ6MDtib3JkZXItYm90dG9tOjB9W2Rpcj1sdHJdIDpob3N0IC5waWNrZXItZm9vdGVye3BhZGRpbmctbGVmdDouNjI1cmVtfVtkaXI9cnRsXSA6aG9zdCAucGlja2VyLWZvb3RlcntwYWRkaW5nLXJpZ2h0Oi42MjVyZW19LnBpY2tlci1ib2R5e2FsaWduLWl0ZW1zOnN0cmV0Y2g7ZGlzcGxheTpmbGV4O3BhZGRpbmc6MH0ucGlja2VyLWJvZHkgbmItYmFzZS1jYWxlbmRhciA6Om5nLWRlZXAgbmItY2FyZHtib3JkZXItcmFkaXVzOjB9LmNhbGVuZGFyLXdpdGgtdGltZXtvdmVyZmxvdzpoaWRkZW59LnRpbWVwaWNrZXItc2VjdGlvbntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1ufVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNhbGVuZGFyV2l0aFRpbWVDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkRhdGVTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmJDYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UgfVxuXTtcbk5iQ2FsZW5kYXJXaXRoVGltZUNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICB2aXNpYmxlRGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdHdlbHZlSG91cnNGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHdpdGhTZWNvbmRzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaW5nbGVDb2x1bW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0ZXA6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRpbWVGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRpdGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhcHBseUJ1dHRvblRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGN1cnJlbnRUaW1lQnV0dG9uVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9ydGFsT3V0bGV0OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtOYlBvcnRhbE91dGxldERpcmVjdGl2ZSxdIH1dLFxuICAgIHRpbWVwaWNrZXI6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW05iVGltZVBpY2tlckNvbXBvbmVudCxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudCBleHRlbmRzIE5iUG9zaXRpb25lZENvbnRhaW5lckNvbXBvbmVudCB7XG4gICAgYXR0YWNoKHBvcnRhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5Q29udGFpbmVyLmF0dGFjaENvbXBvbmVudFBvcnRhbChwb3J0YWwpO1xuICAgIH1cbn1cbk5iRGF0ZXBpY2tlckNvbnRhaW5lckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZGF0ZXBpY2tlci1jb250YWluZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5iLW92ZXJsYXktY29udGFpbmVyPjwvbmItb3ZlcmxheS1jb250YWluZXI+XG4gIGBcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG92ZXJsYXlDb250YWluZXI6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW05iT3ZlcmxheUNvbnRhaW5lckNvbXBvbmVudCwgeyBzdGF0aWM6IHRydWUgfSxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYkRhdGVwaWNrZXJBZGFwdGVyYCBpbnN0YW5jZXMgcHJvdmlkZSB3YXkgaG93IHRvIHBhcnNlLCBmb3JtYXQgYW5kIHZhbGlkYXRlXG4gKiBkaWZmZXJlbnQgZGF0ZSB0eXBlcy5cbiAqICovXG5jbGFzcyBOYkRhdGVwaWNrZXJBZGFwdGVyIHtcbn1cbi8qKlxuICogRGF0ZXBpY2tlciBpcyBhbiBjb250cm9sIHRoYXQgY2FuIHBpY2sgYW55IHZhbHVlcyBhbnl3YXkuXG4gKiBJdCBoYXMgdG8gYmUgYm91bmQgdG8gdGhlIGRhdGVwaWNrZXIgZGlyZWN0aXZlIHRocm91Z2ggbmJEYXRlcGlja2VyIGlucHV0LlxuICogKi9cbmNsYXNzIE5iRGF0ZXBpY2tlciB7XG59XG5jb25zdCBOQl9EQVRFX0FEQVBURVIgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0RhdGVwaWNrZXIgQWRhcHRlcicpO1xuY29uc3QgTkJfREFURV9TRVJWSUNFX09QVElPTlMgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0RhdGUgc2VydmljZSBvcHRpb25zJyk7XG4vKipcbiAqIFRoZSBgTmJEYXRlcGlja2VyRGlyZWN0aXZlYCBpcyBmb3JtIGNvbnRyb2wgdGhhdCBnaXZlcyB5b3UgYWJpbGl0eSB0byBzZWxlY3QgZGF0ZXMgYW5kIHJhbmdlcy4gVGhlIGRhdGVwaWNrZXJcbiAqIGlzIHNob3duIHdoZW4gaW5wdXQgcmVjZWl2ZXMgYSBgZm9jdXNgIGV2ZW50LlxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBbbmJEYXRlcGlja2VyXT1cImRhdGVwaWNrZXJcIj5cbiAqIDxuYi1kYXRlcGlja2VyICNkYXRlcGlja2VyPjwvbmItZGF0ZXBpY2tlcj5cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGRhdGVwaWNrZXIvZGF0ZXBpY2tlci1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJEYXRlcGlja2VyTW9kdWxlLmZvclJvb3QoKWAgdG8geW91ciByb290IG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEYXRlcGlja2VyTW9kdWxlLmZvclJvb3QoKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHsgfVxuICogYGBgXG4gKiBBbmQgYE5iRGF0ZXBpY2tlck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJEYXRlcGlja2VyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdXNlIHJhbmdlIHNlbGVjdGlvbiwgeW91IGhhdmUgdG8gdXNlIGBOYlJhbmdlcGlja2VyQ29tcG9uZW50YCBpbnN0ZWFkOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBbbmJEYXRlcGlja2VyXT1cInJhbmdlcGlja2VyXCI+XG4gKiA8bmItcmFuZ2VwaWNrZXIgI3JhbmdlcGlja2VyPjwvbmItcmFuZ2VwaWNrZXI+XG4gKiBgYGBcbiAqXG4gKiBCb3RoIHJhbmdlIGFuZCBkYXRlIHBpY2tlcnMgc3VwcG9ydCBhbGwgcGFyYW1ldGVycyBhcyBjYWxlbmRhciwgc28sIGNoZWNrIGBOYkNhbGVuZGFyQ29tcG9uZW50YCBmb3IgYWRkaXRpb25hbFxuICogaW5mby5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFJhbmdlIHNob3djYXNlLCBkYXRlcGlja2VyL3JhbmdlcGlja2VyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBEYXRlcGlja2VyIGlzIHRoZSBmb3JtIGNvbnRyb2wgc28gaXQgY2FuIGJlIGJvdW5kIHdpdGggYW5ndWxhciBmb3JtcyB0aHJvdWdoIG5nTW9kZWwgYW5kIGZvcm0gY29udHJvbHMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShGb3JtcywgZGF0ZXBpY2tlci9kYXRlcGlja2VyLWZvcm1zLmNvbXBvbmVudClcbiAqXG4gKiBgTmJEYXRlcGlja2VyRGlyZWN0aXZlYCBtYXkgYmUgdmFsaWRhdGVkIHVzaW5nIGBtaW5gIGFuZCBgbWF4YCBkYXRlcyBwYXNzZWQgdG8gdGhlIGRhdGVwaWNrZXIuXG4gKiBBbmQgYGZpbHRlcmAgcHJlZGljYXRlIHRoYXQgcmVjZWl2ZXMgZGF0ZSBvYmplY3QgYW5kIGhhcyB0byByZXR1cm4gYSBib29sZWFuIHZhbHVlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVmFsaWRhdGlvbiwgZGF0ZXBpY2tlci9kYXRlcGlja2VyLXZhbGlkYXRpb24uY29tcG9uZW50KVxuICpcbiAqIElmIHlvdSBuZWVkIHRvIHBpY2sgYSB0aW1lIGFsb25nIHdpdGggdGhlIGRhdGUsIHlvdSBjYW4gdXNlIG5iLWRhdGUtdGltZXBpY2tlclxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBuYklucHV0IHBsYWNlaG9sZGVyPVwiUGljayBEYXRlXCIgW25iRGF0ZXBpY2tlcl09XCJkYXRlVGltZVBpY2tlclwiPlxuICogPG5iLWRhdGUtdGltZXBpY2tlciB3aXRoU2Vjb25kcyAjZGF0ZVRpbWVQaWNrZXI+PC9uYi1kYXRlLXRpbWVwaWNrZXI+XG4gKiBgYGBcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGF0ZSB0aW1lcGlja2VyLCBkYXRlcGlja2VyL2RhdGUtdGltZXBpY2tlci1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQSBzaW5nbGUgY29sdW1uIHBpY2tlciB3aXRoIG9wdGlvbnMgdmFsdWUgYXMgdGltZSBhbmQgbWludXRlLCBzbyB1c2VycyB3b27igJl0IGJlIGFibGUgdG8gcGlja1xuICogaG91cnMgYW5kIG1pbnV0ZXMgaW5kaXZpZHVhbGx5LlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGF0ZSB0aW1lcGlja2VyIHNpbmdsZSBjb2x1bW4sIGRhdGVwaWNrZXIvZGF0ZS10aW1lcGlja2VyLXNpbmdsZS1jb2x1bW4uY29tcG9uZW50KVxuXG4gKiBUaGUgYE5iRGF0ZXBpY2tlckNvbXBvbmVudGAgc3VwcG9ydHMgZGF0ZSBmb3JtYXR0aW5nOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBbbmJEYXRlcGlja2VyXT1cImRhdGVwaWNrZXJcIj5cbiAqIDxuYi1kYXRlcGlja2VyICNkYXRlcGlja2VyIGZvcm1hdD1cIk1NXFxkZFxceXl5eVwiPjwvbmItZGF0ZXBpY2tlcj5cbiAqIGBgYFxuICogPHNwYW4gaWQ9XCJmb3JtYXR0aW5nLWlzc3VlXCI+PC9zcGFuPlxuICogIyMgRm9ybWF0dGluZyBJc3N1ZVxuICpcbiAqIEJ5IGRlZmF1bHQsIGRhdGVwaWNrZXIgdXNlcyBhbmd1bGFycyBgTE9DQUxFX0lEYCB0b2tlbiBmb3IgbG9jYWxpemF0aW9uIGFuZCBgRGF0ZVBpcGVgIGZvciBkYXRlcyBmb3JtYXR0aW5nLlxuICogQW5kIG5hdGl2ZSBgRGF0ZS5wYXJzZSguLi4pYCBmb3IgZGF0ZXMgcGFyc2luZy4gQnV0IG5hdGl2ZSBgRGF0ZS5wYXJzZWAgZnVuY3Rpb24gZG9lc24ndCBzdXBwb3J0IGZvcm1hdHMuXG4gKiBUbyBwcm92aWRlIGN1c3RvbSBmb3JtYXR0aW5nIHlvdSBoYXZlIHRvIHVzZSBvbmUgb2YgdGhlIGZvbGxvd2luZyBwYWNrYWdlczpcbiAqXG4gKiAtIGBAbmVidWxhci9tb21lbnRgIC0gcHJvdmlkZXMgbW9tZW50IGRhdGUgYWRhcHRlciB0aGF0IHVzZXMgbW9tZW50IGZvciBkYXRlIG9iamVjdHMuIFRoaXMgbWVhbnMgZGF0ZXBpY2tlciB0aGFuXG4gKiB3aWxsIG9wZXJhdGUgb25seSBtb21lbnQgZGF0ZSBvYmplY3RzLiBJZiB5b3Ugd2FudCB0byB1c2UgaXQgeW91IGhhdmUgdG8gaW5zdGFsbCBpdDogYG5wbSBpIEBuZWJ1bGFyL21vbWVudGAsIGFuZFxuICogaW1wb3J0IGBOYk1vbWVudERhdGVNb2R1bGVgIGZyb20gdGhpcyBwYWNrYWdlLlxuICpcbiAqIC0gYEBuZWJ1bGFyL2RhdGUtZm5zYCAtIGFkYXB0ZXIgZm9yIHBvcHVsYXIgZGF0ZS1mbnMgbGlicmFyeS4gVGhpcyB3YXkgaXMgcHJlZmVycmVkIGlmIHlvdSBuZWVkIG9ubHkgZGF0ZSBmb3JtYXR0aW5nLlxuICogQmVjYXVzZSBkYXRlLWZucyBpcyB0cmVlc2hha2FibGUsIHRpbnkgYW5kIG9wZXJhdGVzIG5hdGl2ZSBkYXRlIG9iamVjdHMuIElmIHlvdSB3YW50IHRvIHVzZSBpdCB5b3UgaGF2ZSB0b1xuICogaW5zdGFsbCBpdDogYG5wbSBpIEBuZWJ1bGFyL2RhdGUtZm5zYCwgYW5kIGltcG9ydCBgTmJEYXRlRm5zRGF0ZU1vZHVsZWAgZnJvbSB0aGlzIHBhY2thZ2UuXG4gKlxuICogIyMjIE5iRGF0ZUZuc0RhdGVNb2R1bGVcbiAqXG4gKiBGb3JtYXQgaXMgcmVxdWlyZWQgd2hlbiB1c2luZyBgTmJEYXRlRm5zRGF0ZU1vZHVsZWAuIFlvdSBjYW4gc2V0IGl0IHZpYSBgZm9ybWF0YCBpbnB1dCBvbiBkYXRlcGlja2VyIGNvbXBvbmVudDpcbiAqIGBgYGh0bWxcbiAqIDxuYi1kYXRlcGlja2VyIGZvcm1hdD1cImRkLk1NLnl5eXlcIj48L25iLWRhdGVwaWNrZXI+XG4gKiBgYGBcbiAqIEFsc28gZm9ybWF0IGNhbiBiZSBzZXQgZ2xvYmFsbHkgd2l0aCBgTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JSb290KHsgZm9ybWF0OiAnZGQuTU0ueXl5eScgfSlgIGFuZFxuICogYE5iRGF0ZUZuc0RhdGVNb2R1bGUuZm9yQ2hpbGQoeyBmb3JtYXQ6ICdkZC5NTS55eXl5JyB9KWAgbWV0aG9kcy5cbiAqXG4gKiBQbGVhc2Ugbm90ZSB0byB1c2Ugc29tZSBvZiB0aGUgZm9ybWF0dGluZyB0b2tlbnMgeW91IGFsc28gbmVlZCB0byBwYXNzXG4gKiBgeyB1c2VBZGRpdGlvbmFsV2Vla1llYXJUb2tlbnM6IHRydWUsIHVzZUFkZGl0aW9uYWxEYXlPZlllYXJUb2tlbnM6IHRydWUgfWAgdG8gZGF0ZS1mbnMgcGFyc2UgYW5kIGZvcm1hdCBmdW5jdGlvbnMuXG4gKiBZb3UgY2FuIGNvbmZpZ3VyZSBvcHRpb25zIHBhc3NlZCB0aGlzIGZ1bmN0aW9ucyBieSBzZXR0aW5nIGBmb3JtYXRPcHRpb25zYCBhbmRcbiAqIGBwYXJzZU9wdGlvbnNgIG9mIG9wdGlvbnMgb2JqZWN0IHBhc3NlZCB0byBgTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JSb290YCBhbmQgYE5iRGF0ZUZuc0RhdGVNb2R1bGUuZm9yQ2hpbGRgIG1ldGhvZHMuXG4gKiBgYGB0c1xuICogTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JSb290KHtcbiAqICAgcGFyc2VPcHRpb25zOiB7IHVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2VuczogdHJ1ZSwgdXNlQWRkaXRpb25hbERheU9mWWVhclRva2VuczogdHJ1ZSB9LFxuICogICBmb3JtYXRPcHRpb25zOiB7IHVzZUFkZGl0aW9uYWxXZWVrWWVhclRva2VuczogdHJ1ZSwgdXNlQWRkaXRpb25hbERheU9mWWVhclRva2VuczogdHJ1ZSB9LFxuICogfSlcbiAqIGBgYFxuICogRnVydGhlciBpbmZvIG9uIGBkYXRlLWZuc2AgZm9ybWF0dGluZyB0b2tlbnMgY291bGQgYmUgZm91bmQgYXRcbiAqIFtkYXRlLWZucyBkb2NzXShodHRwczovL2RhdGUtZm5zLm9yZy92Mi4wLjAtYWxwaGEuMjcvZG9jcy9Vbmljb2RlLVRva2VucykuXG4gKlxuICogWW91IGNhbiBhbHNvIHVzZSBgcGFyc2VPcHRpb25zYCBhbmQgYGZvcm1hdE9wdGlvbnNgIHRvIHByb3ZpZGUgbG9jYWxlLlxuICogYGBgdHNcbiAqIGltcG9ydCB7IGVvIH0gZnJvbSAnZGF0ZS1mbnMvbG9jYWxlJztcbiAqXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgTmJEYXRlRm5zRGF0ZU1vZHVsZS5mb3JSb290KHtcbiAqICAgICAgIHBhcnNlT3B0aW9uczogeyBsb2NhbGU6IGVvIH0sXG4gKiAgICAgICBmb3JtYXRPcHRpb25zOiB7IGxvY2FsZTogZW8gfSxcbiAqICAgICB9KSxcbiAqICAgXSxcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogZGF0ZXBpY2tlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogZGF0ZXBpY2tlci1ib3JkZXItY29sb3I6XG4gKiBkYXRlcGlja2VyLWJvcmRlci1zdHlsZTpcbiAqIGRhdGVwaWNrZXItYm9yZGVyLXdpZHRoOlxuICogZGF0ZXBpY2tlci1ib3JkZXItcmFkaXVzOlxuICogZGF0ZXBpY2tlci1zaGFkb3c6XG4gKiAqL1xuY2xhc3MgTmJEYXRlcGlja2VyRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2N1bWVudCwgZGF0ZXBpY2tlckFkYXB0ZXJzLCBob3N0UmVmLCBkYXRlU2VydmljZSwgY2hhbmdlRGV0ZWN0b3IpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmRhdGVwaWNrZXJBZGFwdGVycyA9IGRhdGVwaWNrZXJBZGFwdGVycztcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmlzRGF0ZXBpY2tlclJlYWR5ID0gZmFsc2U7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gKCkgPT4geyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9ybSBjb250cm9sIHZhbGlkYXRvcnMgd2lsbCBiZSBjYWxsZWQgaW4gdmFsaWRhdG9ycyBjb250ZXh0LCBzbywgd2UgbmVlZCB0byBiaW5kIHRoZW0uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMudmFsaWRhdG9yID0gVmFsaWRhdG9ycy5jb21wb3NlKFtcbiAgICAgICAgICAgIHRoaXMucGFyc2VWYWxpZGF0b3IsXG4gICAgICAgICAgICB0aGlzLm1pblZhbGlkYXRvcixcbiAgICAgICAgICAgIHRoaXMubWF4VmFsaWRhdG9yLFxuICAgICAgICAgICAgdGhpcy5maWx0ZXJWYWxpZGF0b3IsXG4gICAgICAgIF0ubWFwKGZuID0+IGZuLmJpbmQodGhpcykpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbklucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3ZpZGVzIGRhdGVwaWNrZXIgY29tcG9uZW50LlxuICAgICAqICovXG4gICAgc2V0IHNldFBpY2tlcihwaWNrZXIpIHtcbiAgICAgICAgdGhpcy5waWNrZXIgPSBwaWNrZXI7XG4gICAgICAgIHRoaXMuc2V0dXBQaWNrZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBodG1sIGlucHV0IGVsZW1lbnQuXG4gICAgICogKi9cbiAgICBnZXQgaW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBob3N0IGlucHV0IHZhbHVlLlxuICAgICAqICovXG4gICAgZ2V0IGlucHV0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlucHV0LnZhbHVlO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHZhbHVlIGluIHBpY2tlciBhbmQgaHRtbCBpbnB1dCBlbGVtZW50LlxuICAgICAqICovXG4gICAgd3JpdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5pc0RhdGVwaWNrZXJSZWFkeSkge1xuICAgICAgICAgICAgdGhpcy53cml0ZVBpY2tlcih2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlSW5wdXQodmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5pbnB1dC5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZvcm0gY29udHJvbCB2YWxpZGF0aW9uIGJhc2VkIG9uIHBpY2tlciB2YWxpZGF0b3IgY29uZmlnLlxuICAgICAqICovXG4gICAgdmFsaWRhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbGlkYXRvcihudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZXMgcGlja2VyLCBmb2N1c2VzIHRoZSBpbnB1dFxuICAgICAqL1xuICAgIGhpZGVQaWNrZXIoKSB7XG4gICAgICAgIHRoaXMuaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5waWNrZXIuaGlkZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgdGhhdCB3ZSBjYW4gcGFyc2UgdmFsdWUgY29ycmVjdGx5LlxuICAgICAqICovXG4gICAgcGFyc2VWYWxpZGF0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEYXRlIHNlcnZpY2VzIHRyZWF0IGVtcHR5IHN0cmluZyBhcyBpbnZhbGlkIGRhdGUuXG4gICAgICAgICAqIFRoYXQncyB3aHkgd2UncmUgZ2V0dGluZyBpbnZhbGlkIGZvcm1Db250cm9sIGluIGNhc2Ugb2YgZW1wdHkgaW5wdXQgd2hpY2ggaXMgbm90IHJlcXVpcmVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICBpZiAodGhpcy5pbnB1dFZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIuaXNWYWxpZCh0aGlzLmlucHV0VmFsdWUsIHRoaXMucGlja2VyLmZvcm1hdCk7XG4gICAgICAgIHJldHVybiBpc1ZhbGlkID8gbnVsbCA6IHsgbmJEYXRlcGlja2VyUGFyc2U6IHsgdmFsdWU6IHRoaXMuaW5wdXRWYWx1ZSB9IH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyBwYXNzZWQgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIG1pbi5cbiAgICAgKiAqL1xuICAgIG1pblZhbGlkYXRvcigpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gdGhpcy5waWNrZXIuZ2V0VmFsaWRhdG9yQ29uZmlnKCk7XG4gICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLnBhcnNlKHRoaXMuaW5wdXRWYWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICghY29uZmlnLm1pbiB8fCAhZGF0ZSB8fCB0aGlzLmRhdGVTZXJ2aWNlLmNvbXBhcmVEYXRlcyhjb25maWcubWluLCBkYXRlKSA8PSAwKSA/XG4gICAgICAgICAgICBudWxsIDogeyBuYkRhdGVwaWNrZXJNaW46IHsgbWluOiBjb25maWcubWluLCBhY3R1YWw6IGRhdGUgfSB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBWYWxpZGF0ZXMgcGFzc2VkIHZhbHVlIGlzIHNtYWxsZXIgdGhhbiBtYXguXG4gICAgICogKi9cbiAgICBtYXhWYWxpZGF0b3IoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMucGlja2VyLmdldFZhbGlkYXRvckNvbmZpZygpO1xuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5kYXRlcGlja2VyQWRhcHRlci5wYXJzZSh0aGlzLmlucHV0VmFsdWUsIHRoaXMucGlja2VyLmZvcm1hdCk7XG4gICAgICAgIHJldHVybiAoIWNvbmZpZy5tYXggfHwgIWRhdGUgfHwgdGhpcy5kYXRlU2VydmljZS5jb21wYXJlRGF0ZXMoY29uZmlnLm1heCwgZGF0ZSkgPj0gMCkgP1xuICAgICAgICAgICAgbnVsbCA6IHsgbmJEYXRlcGlja2VyTWF4OiB7IG1heDogY29uZmlnLm1heCwgYWN0dWFsOiBkYXRlIH0gfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIHBhc3NlZCB2YWx1ZSBzYXRpc2Z5IHRoZSBmaWx0ZXIuXG4gICAgICogKi9cbiAgICBmaWx0ZXJWYWxpZGF0b3IoKSB7XG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHRoaXMucGlja2VyLmdldFZhbGlkYXRvckNvbmZpZygpO1xuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5kYXRlcGlja2VyQWRhcHRlci5wYXJzZSh0aGlzLmlucHV0VmFsdWUsIHRoaXMucGlja2VyLmZvcm1hdCk7XG4gICAgICAgIHJldHVybiAoIWNvbmZpZy5maWx0ZXIgfHwgIWRhdGUgfHwgY29uZmlnLmZpbHRlcihkYXRlKSkgP1xuICAgICAgICAgICAgbnVsbCA6IHsgbmJEYXRlcGlja2VyRmlsdGVyOiB0cnVlIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENob29zZXMgZGF0ZXBpY2tlciBhZGFwdGVyIGJhc2VkIG9uIHBhc3NlZCBwaWNrZXIgY29tcG9uZW50LlxuICAgICAqICovXG4gICAgY2hvb3NlRGF0ZXBpY2tlckFkYXB0ZXIoKSB7XG4gICAgICAgIHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIgPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVycy5maW5kKCh7IHBpY2tlciB9KSA9PiB0aGlzLnBpY2tlciBpbnN0YW5jZW9mIHBpY2tlcik7XG4gICAgICAgIGlmICh0aGlzLm5vRGF0ZXBpY2tlckFkYXB0ZXJQcm92aWRlZCgpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGRhdGVwaWNrZXJBZGFwdGVyIHByb3ZpZGVkIGZvciBwaWNrZXInKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBwaWNrZXIgdG8gdGhlIGhvc3QgaW5wdXQgZWxlbWVudCBhbmQgc3Vic2NyaWJlcyBvbiB2YWx1ZSBjaGFuZ2VzLlxuICAgICAqICovXG4gICAgc2V0dXBQaWNrZXIoKSB7XG4gICAgICAgIHRoaXMuY2hvb3NlRGF0ZXBpY2tlckFkYXB0ZXIoKTtcbiAgICAgICAgdGhpcy5waWNrZXIuYXR0YWNoKHRoaXMuaG9zdFJlZik7XG4gICAgICAgIGlmICh0aGlzLmlucHV0VmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLnZhbHVlID0gdGhpcy5kYXRlcGlja2VyQWRhcHRlci5wYXJzZSh0aGlzLmlucHV0VmFsdWUsIHRoaXMucGlja2VyLmZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW4gY2FzZSBkYXRlcGlja2VyIGNvbXBvbmVudCBwbGFjZWQgYWZ0ZXIgdGhlIGlucHV0IHdpdGggZGF0ZXBpY2tlciBkaXJlY3RpdmUsXG4gICAgICAgIC8vIHdlIGNhbid0IHJlYWQgYHRoaXMucGlja2VyLmZvcm1hdGAgb24gZmlyc3QgY2hhbmdlIGRldGVjdGlvbiBydW4sXG4gICAgICAgIC8vIHNpbmNlIGl0J3Mgbm90IGJvdW5kIHlldCwgc28gd2UgaGF2ZSB0byB3YWl0IGZvciBkYXRlcGlja2VyIGNvbXBvbmVudCBpbml0aWFsaXphdGlvbi5cbiAgICAgICAgaWYgKCF0aGlzLmlzRGF0ZXBpY2tlclJlYWR5KSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci5pbml0XG4gICAgICAgICAgICAgICAgLnBpcGUodGFrZSgxKSwgdGFwKCgpID0+IHRoaXMuaXNEYXRlcGlja2VyUmVhZHkgPSB0cnVlKSwgZmlsdGVyKCgpID0+ICEhdGhpcy5xdWV1ZSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLndyaXRlVmFsdWUodGhpcy5xdWV1ZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLnF1ZXVlKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLnF1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5waWNrZXIudmFsdWVDaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndyaXRlUGlja2VyKHZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMud3JpdGVJbnB1dCh2YWx1ZSk7XG4gICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnBpY2tlci5zaG91bGRIaWRlKCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVQaWNrZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG1lcmdlKHRoaXMucGlja2VyLmJsdXIsIGZyb21FdmVudCh0aGlzLmlucHV0LCAnYmx1cicpLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLnBpY2tlci5pc1Nob3duICYmIHRoaXMuZG9jdW1lbnQuYWN0aXZlRWxlbWVudCAhPT0gdGhpcy5pbnB1dCkpKS5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5vblRvdWNoZWQoKSk7XG4gICAgfVxuICAgIHdyaXRlUGlja2VyKHZhbHVlKSB7XG4gICAgICAgIHRoaXMucGlja2VyLnZhbHVlID0gdmFsdWU7XG4gICAgfVxuICAgIHdyaXRlSW5wdXQodmFsdWUpIHtcbiAgICAgICAgY29uc3Qgc3RyaW5nUmVwcmVzZW50YXRpb24gPSB0aGlzLmRhdGVwaWNrZXJBZGFwdGVyLmZvcm1hdCh2YWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KTtcbiAgICAgICAgdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSBzdHJpbmdSZXByZXNlbnRhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmFsaWRhdGVzIGlmIG5vIGRhdGVwaWNrZXIgYWRhcHRlciBwcm92aWRlZC5cbiAgICAgKiAqL1xuICAgIG5vRGF0ZXBpY2tlckFkYXB0ZXJQcm92aWRlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRhdGVwaWNrZXJBZGFwdGVyIHx8ICEodGhpcy5kYXRlcGlja2VyQWRhcHRlciBpbnN0YW5jZW9mIE5iRGF0ZXBpY2tlckFkYXB0ZXIpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbklucHV0Q2hhbmdlKCkge1xuICAgICAgICBmcm9tRXZlbnQodGhpcy5pbnB1dCwgJ2lucHV0JylcbiAgICAgICAgICAgIC5waXBlKG1hcCgoKSA9PiB0aGlzLmlucHV0VmFsdWUpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh2YWx1ZSkgPT4gdGhpcy5oYW5kbGVJbnB1dENoYW5nZSh2YWx1ZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgaW5wdXQgdmFsdWUgYW5kIHdyaXRlIGlmIGl0IGlzbid0IG51bGwuXG4gICAgICogKi9cbiAgICBoYW5kbGVJbnB1dENoYW5nZSh2YWx1ZSkge1xuICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5wYXJzZUlucHV0VmFsdWUodmFsdWUpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKGRhdGUpO1xuICAgICAgICB0aGlzLndyaXRlUGlja2VyKGRhdGUpO1xuICAgIH1cbiAgICBwYXJzZUlucHV0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIuaXNWYWxpZCh2YWx1ZSwgdGhpcy5waWNrZXIuZm9ybWF0KSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZXBpY2tlckFkYXB0ZXIucGFyc2UodmFsdWUsIHRoaXMucGlja2VyLmZvcm1hdCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuTmJEYXRlcGlja2VyRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdpbnB1dFtuYkRhdGVwaWNrZXJdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOYkRhdGVwaWNrZXJEaXJlY3RpdmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTElEQVRPUlMsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOYkRhdGVwaWNrZXJEaXJlY3RpdmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJEYXRlcGlja2VyRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH0sXG4gICAgeyB0eXBlOiBBcnJheSwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfREFURV9BREFQVEVSLF0gfV0gfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH1cbl07XG5OYkRhdGVwaWNrZXJEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2V0UGlja2VyOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYkRhdGVwaWNrZXInLF0gfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iQmFzZVBpY2tlcmAgY29tcG9uZW50IGNvbmNlbnRyYXRlcyBvdmVybGF5IG1hbmlwdWxhdGlvbiBsb2dpYy5cbiAqICovXG5jbGFzcyBOYkJhc2VQaWNrZXIgZXh0ZW5kcyBOYkRhdGVwaWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKG92ZXJsYXksIHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgY2ZyLCBkYXRlU2VydmljZSwgZGF0ZVNlcnZpY2VPcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXIgPSB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyO1xuICAgICAgICB0aGlzLmNmciA9IGNmcjtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlT3B0aW9ucyA9IGRhdGVTZXJ2aWNlT3B0aW9ucztcbiAgICAgICAgdGhpcy5pbml0JCA9IG5ldyBSZXBsYXlTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdHJlYW0gb2YgcGlja2VyIGNoYW5nZXMuIFJlcXVpcmVkIHRvIGJlIHRoZSBzdWJqZWN0IGJlY2F1c2UgcGlja2VyIGhpZGVzIGFuZCBzaG93cyBhbmQgcGlja2VyXG4gICAgICAgICAqIGNoYW5nZSBzdHJlYW0gYmVjb21lcyByZWNyZWF0ZWQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMub25DaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5vdmVybGF5T2Zmc2V0ID0gODtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuYmx1ciQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHBpY2tlciBpbnN0YW5jZS5cbiAgICAgKiAqL1xuICAgIGdldCBwaWNrZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpY2tlclJlZiAmJiB0aGlzLnBpY2tlclJlZi5pbnN0YW5jZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3RyZWFtIG9mIHBpY2tlciB2YWx1ZSBjaGFuZ2VzLlxuICAgICAqICovXG4gICAgZ2V0IHZhbHVlQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vbkNoYW5nZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIGdldCBpc1Nob3duKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWYgJiYgdGhpcy5yZWYuaGFzQXR0YWNoZWQoKTtcbiAgICB9XG4gICAgZ2V0IGluaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmluaXQkLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWl0cyB3aGVuIGRhdGVwaWNrZXIgbG9vc2VzIGZvY3VzLlxuICAgICAqL1xuICAgIGdldCBibHVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVyJC5hc09ic2VydmFibGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGF0ZXBpY2tlciBrbm93cyBub3RoaW5nIGFib3V0IGhvc3QgaHRtbCBpbnB1dCBlbGVtZW50LlxuICAgICAqIFNvLCBhdHRhY2ggbWV0aG9kIGF0dGFjaGVzIGRhdGVwaWNrZXIgdG8gdGhlIGhvc3QgaW5wdXQgZWxlbWVudC5cbiAgICAgKiAqL1xuICAgIGF0dGFjaChob3N0UmVmKSB7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25UcmlnZ2VycygpO1xuICAgIH1cbiAgICBnZXRWYWxpZGF0b3JDb25maWcoKSB7XG4gICAgICAgIHJldHVybiB7IG1pbjogdGhpcy5taW4sIG1heDogdGhpcy5tYXgsIGZpbHRlcjogdGhpcy5maWx0ZXIgfTtcbiAgICB9XG4gICAgc2hvdygpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcGVuRGF0ZXBpY2tlcigpO1xuICAgIH1cbiAgICBzaG91bGRIaWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWRlT25TZWxlY3QgJiYgISF0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBoaWRlKCkge1xuICAgICAgICBpZiAodGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVmLmRldGFjaCgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIHNhdmUgY3VycmVudCB2YWx1ZSBpZiBwaWNrZXIgd2FzIHJlbmRlcmVkXG4gICAgICAgIGlmICh0aGlzLnBpY2tlcikge1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IHRoaXMudmFsdWU7XG4gICAgICAgICAgICB0aGlzLnBpY2tlclJlZi5kZXN0cm95KCk7XG4gICAgICAgICAgICB0aGlzLnBpY2tlclJlZiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlT3ZlcmxheSgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMucmVmID0gdGhpcy5vdmVybGF5LmNyZWF0ZSh7XG4gICAgICAgICAgICBwb3NpdGlvblN0cmF0ZWd5OiB0aGlzLnBvc2l0aW9uU3RyYXRlZ3ksXG4gICAgICAgICAgICBzY3JvbGxTdHJhdGVneTogdGhpcy5vdmVybGF5LnNjcm9sbFN0cmF0ZWdpZXMucmVwb3NpdGlvbigpLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlKCk7XG4gICAgfVxuICAgIG9wZW5EYXRlcGlja2VyKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHRoaXMucmVmLmF0dGFjaChuZXcgTmJDb21wb25lbnRQb3J0YWwoTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LCBudWxsLCBudWxsLCB0aGlzLmNmcikpO1xuICAgICAgICB0aGlzLmluc3RhbnRpYXRlUGlja2VyKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25WYWx1ZUNoYW5nZSgpO1xuICAgICAgICB0aGlzLndyaXRlUXVldWUoKTtcbiAgICAgICAgdGhpcy5wYXRjaFdpdGhJbnB1dHMoKTtcbiAgICAgICAgdGhpcy5waWNrZXJSZWYuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmNvbm5lY3RlZFRvKHRoaXMuaG9zdFJlZilcbiAgICAgICAgICAgIC5wb3NpdGlvbihOYlBvc2l0aW9uLkJPVFRPTSlcbiAgICAgICAgICAgIC5vZmZzZXQodGhpcy5vdmVybGF5T2Zmc2V0KVxuICAgICAgICAgICAgLmFkanVzdG1lbnQoTmJBZGp1c3RtZW50LkNPVU5URVJDTE9DS1dJU0UpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3kucG9zaXRpb25DaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHBvc2l0aW9uKSA9PiBwYXRjaCh0aGlzLmNvbnRhaW5lciwgeyBwb3NpdGlvbiB9KSk7XG4gICAgfVxuICAgIGNyZWF0ZVRyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlclxuICAgICAgICAgICAgLnRyaWdnZXIoTmJUcmlnZ2VyLkZPQ1VTKVxuICAgICAgICAgICAgLmhvc3QodGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQpXG4gICAgICAgICAgICAuY29udGFpbmVyKCgpID0+IHRoaXMuY29udGFpbmVyKVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uVHJpZ2dlcnMoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuc2hvdyQuc3Vic2NyaWJlKCgpID0+IHRoaXMuc2hvdygpKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuaGlkZSQuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYmx1ciQubmV4dCgpO1xuICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBpbnN0YW50aWF0ZVBpY2tlcigpIHtcbiAgICAgICAgdGhpcy5waWNrZXJSZWYgPSB0aGlzLmNvbnRhaW5lci5pbnN0YW5jZS5hdHRhY2gobmV3IE5iQ29tcG9uZW50UG9ydGFsKHRoaXMucGlja2VyQ2xhc3MsIG51bGwsIG51bGwsIHRoaXMuY2ZyKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZXMgb24gcGlja2VyIHZhbHVlIGNoYW5nZXMgYW5kIGVtaXQgZGF0YSB0aHJvdWdoIHRoaXMub25DaGFuZ2UkIHN1YmplY3QuXG4gICAgICogKi9cbiAgICBzdWJzY3JpYmVPblZhbHVlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnBpY2tlclZhbHVlQ2hhbmdlLnN1YnNjcmliZShkYXRlID0+IHtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UkLm5leHQoZGF0ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwYXRjaFdpdGhJbnB1dHMoKSB7XG4gICAgICAgIHRoaXMucGlja2VyLmJvdW5kaW5nTW9udGggPSB0aGlzLmJvdW5kaW5nTW9udGg7XG4gICAgICAgIHRoaXMucGlja2VyLnN0YXJ0VmlldyA9IHRoaXMuc3RhcnRWaWV3O1xuICAgICAgICB0aGlzLnBpY2tlci5taW4gPSB0aGlzLm1pbjtcbiAgICAgICAgdGhpcy5waWNrZXIubWF4ID0gdGhpcy5tYXg7XG4gICAgICAgIHRoaXMucGlja2VyLmZpbHRlciA9IHRoaXMuZmlsdGVyO1xuICAgICAgICB0aGlzLnBpY2tlci5fY2VsbENvbXBvbmVudCA9IHRoaXMuZGF5Q2VsbENvbXBvbmVudDtcbiAgICAgICAgdGhpcy5waWNrZXIuX21vbnRoQ2VsbENvbXBvbmVudCA9IHRoaXMubW9udGhDZWxsQ29tcG9uZW50O1xuICAgICAgICB0aGlzLnBpY2tlci5feWVhckNlbGxDb21wb25lbnQgPSB0aGlzLnllYXJDZWxsQ29tcG9uZW50O1xuICAgICAgICB0aGlzLnBpY2tlci5zaXplID0gdGhpcy5zaXplO1xuICAgICAgICB0aGlzLnBpY2tlci5zaG93TmF2aWdhdGlvbiA9IHRoaXMuc2hvd05hdmlnYXRpb247XG4gICAgICAgIHRoaXMucGlja2VyLnZpc2libGVEYXRlID0gdGhpcy52aXNpYmxlRGF0ZTtcbiAgICAgICAgdGhpcy5waWNrZXIuc2hvd1dlZWtOdW1iZXIgPSB0aGlzLnNob3dXZWVrTnVtYmVyO1xuICAgICAgICB0aGlzLnBpY2tlci53ZWVrTnVtYmVyU3ltYm9sID0gdGhpcy53ZWVrTnVtYmVyU3ltYm9sO1xuICAgIH1cbiAgICBjaGVja0Zvcm1hdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVNlcnZpY2UuZ2V0SWQoKSA9PT0gJ25hdGl2ZScgJiYgdGhpcy5mb3JtYXQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBmb3JtYXQgbmF0aXZlIGRhdGUuIFRvIHVzZSBjdXN0b20gZm9ybWF0dGluZyB5b3UgaGF2ZSB0byBpbnN0YWxsIEBuZWJ1bGFyL21vbWVudCBvciAnICtcbiAgICAgICAgICAgICAgICAnQG5lYnVsYXIvZGF0ZS1mbnMgcGFja2FnZSBhbmQgaW1wb3J0IE5iTW9tZW50RGF0ZU1vZHVsZSBvciBOYkRhdGVGbnNEYXRlTW9kdWxlIGFjY29yZGluZ2x5LicgK1xuICAgICAgICAgICAgICAgICdNb3JlIGluZm9ybWF0aW9uIGF0IFwiRm9ybWF0dGluZyBpc3N1ZVwiICcgK1xuICAgICAgICAgICAgICAgICdodHRwczovL2FrdmVvLmdpdGh1Yi5pby9uZWJ1bGFyL2RvY3MvY29tcG9uZW50cy9kYXRlcGlja2VyL292ZXJ2aWV3I25iZGF0ZXBpY2tlcmNvbXBvbmVudCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzRm9ybWF0U2V0ID0gdGhpcy5mb3JtYXQgfHwgKHRoaXMuZGF0ZVNlcnZpY2VPcHRpb25zICYmIHRoaXMuZGF0ZVNlcnZpY2VPcHRpb25zLmZvcm1hdCk7XG4gICAgICAgIGlmICh0aGlzLmRhdGVTZXJ2aWNlLmdldElkKCkgPT09ICdkYXRlLWZucycgJiYgIWlzRm9ybWF0U2V0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Zvcm1hdCBpcyByZXF1aXJlZCB3aGVuIHVzaW5nIE5iRGF0ZUZuc0RhdGVNb2R1bGUnKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmNsYXNzIE5iQmFzZVBpY2tlckNvbXBvbmVudCBleHRlbmRzIE5iQmFzZVBpY2tlciB7XG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnQsIHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgb3ZlcmxheSwgY2ZyLCBkYXRlU2VydmljZSwgZGF0ZVNlcnZpY2VPcHRpb25zKSB7XG4gICAgICAgIHN1cGVyKG92ZXJsYXksIHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgY2ZyLCBkYXRlU2VydmljZSwgZGF0ZVNlcnZpY2VPcHRpb25zKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgaWYgd2Ugc2hvdWxkIHJlbmRlciBwcmV2aW91cyBhbmQgbmV4dCBtb250aHNcbiAgICAgICAgICogaW4gdGhlIGN1cnJlbnQgbW9udGggdmlldy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5ib3VuZGluZ01vbnRoID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlZmluZXMgc3RhcnRpbmcgdmlldyBmb3IgY2FsZW5kYXIuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc3RhcnRWaWV3ID0gTmJDYWxlbmRhclZpZXdNb2RlLkRBVEU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaXplIG9mIHRoZSBjYWxlbmRhciBhbmQgZW50aXJlIGNvbXBvbmVudHMuXG4gICAgICAgICAqIENhbiBiZSAnbWVkaXVtJyB3aGljaCBpcyBkZWZhdWx0IG9yICdsYXJnZScuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2l6ZSA9IE5iQ2FsZW5kYXJTaXplLk1FRElVTTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpZGUgcGlja2VyIHdoZW4gYSBkYXRlIG9yIGEgcmFuZ2UgaXMgc2VsZWN0ZWQsIGB0cnVlYCBieSBkZWZhdWx0XG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oaWRlT25TZWxlY3QgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBzaG91bGQgd2Ugc2hvdyBjYWxlbmRhcnMgbmF2aWdhdGlvbiBvciBub3QuXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93TmF2aWdhdGlvbiA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXRzIHN5bWJvbCB1c2VkIGFzIGEgaGVhZGVyIGZvciB3ZWVrIG51bWJlcnMgY29sdW1uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMud2Vla051bWJlclN5bWJvbCA9ICcjJztcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgcGlja2VyIG92ZXJsYXkgb2Zmc2V0IChpbiBwaXhlbHMpLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLm92ZXJsYXlPZmZzZXQgPSA4O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIHNob3VsZCB3ZSBzaG93IHdlZWsgbnVtYmVycyBjb2x1bW4uXG4gICAgICogRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgKiAqL1xuICAgIGdldCBzaG93V2Vla051bWJlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dXZWVrTnVtYmVyO1xuICAgIH1cbiAgICBzZXQgc2hvd1dlZWtOdW1iZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2hvd1dlZWtOdW1iZXIgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5jaGVja0Zvcm1hdCgpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmZvcm1hdCAmJiAhY2hhbmdlcy5mb3JtYXQuaXNGaXJzdENoYW5nZSgpKSB7XG4gICAgICAgICAgICB0aGlzLmNoZWNrRm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLmluaXQkLm5leHQoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB0aGlzLmluaXQkLmNvbXBsZXRlKCk7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJTdHJhdGVneSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwaWNrZXJWYWx1ZUNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldCB2YWx1ZSh2YWx1ZSkgeyB9XG4gICAgd3JpdGVRdWV1ZSgpIHtcbiAgICB9XG59XG5OYkJhc2VQaWNrZXJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJydcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJCYXNlUGlja2VyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RBVEVfU0VSVklDRV9PUFRJT05TLF0gfV0gfVxuXTtcbk5iQmFzZVBpY2tlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGJvdW5kaW5nTW9udGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXJ0VmlldzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbWluOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtYXg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF5Q2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbW9udGhDZWxsQ29tcG9uZW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB5ZWFyQ2VsbENvbXBvbmVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmlzaWJsZURhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGhpZGVPblNlbGVjdDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hvd05hdmlnYXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHdlZWtOdW1iZXJTeW1ib2w6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dXZWVrTnVtYmVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvdmVybGF5T2Zmc2V0OiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcbi8qKlxuICogVGhlIERhdGVQaWNrZXIgY29tcG9uZW50cyBpdHNlbGYuXG4gKiBQcm92aWRlcyBhIHByb3h5IHRvIGBOYkNhbGVuZGFyYCBvcHRpb25zIGFzIHdlbGwgYXMgY3VzdG9tIHBpY2tlciBvcHRpb25zLlxuICovXG5jbGFzcyBOYkRhdGVwaWNrZXJDb21wb25lbnQgZXh0ZW5kcyBOYkJhc2VQaWNrZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnBpY2tlckNsYXNzID0gTmJDYWxlbmRhckNvbXBvbmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGF0ZSB3aGljaCB3aWxsIGJlIHJlbmRlcmVkIGFzIHNlbGVjdGVkLlxuICAgICAqICovXG4gICAgc2V0IGRhdGUoZGF0ZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gZGF0ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW1pdHMgZGF0ZSB3aGVuIHNlbGVjdGVkLlxuICAgICAqICovXG4gICAgZ2V0IGRhdGVDaGFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlQ2hhbmdlO1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpY2tlciA/IHRoaXMucGlja2VyLmRhdGUgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldCB2YWx1ZShkYXRlKSB7XG4gICAgICAgIGlmICghdGhpcy5waWNrZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSBkYXRlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLnZpc2libGVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmRhdGUgPSBkYXRlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBwaWNrZXJWYWx1ZUNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlja2VyLmRhdGVDaGFuZ2U7XG4gICAgfVxuICAgIHdyaXRlUXVldWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5xdWV1ZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGRhdGU7XG4gICAgICAgIH1cbiAgICB9XG59XG5OYkRhdGVwaWNrZXJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWRhdGVwaWNrZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJ1xuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkRhdGVwaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0ZUNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuLyoqXG4gKiBUaGUgUmFuZ2VEYXRlUGlja2VyIGNvbXBvbmVudHMgaXRzZWxmLlxuICogUHJvdmlkZXMgYSBwcm94eSB0byBgTmJDYWxlbmRhclJhbmdlYCBvcHRpb25zIGFzIHdlbGwgYXMgY3VzdG9tIHBpY2tlciBvcHRpb25zLlxuICovXG5jbGFzcyBOYlJhbmdlcGlja2VyQ29tcG9uZW50IGV4dGVuZHMgTmJCYXNlUGlja2VyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5waWNrZXJDbGFzcyA9IE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmFuZ2Ugd2hpY2ggd2lsbCBiZSByZW5kZXJlZCBhcyBzZWxlY3RlZC5cbiAgICAgKiAqL1xuICAgIHNldCByYW5nZShyYW5nZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gcmFuZ2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIHJhbmdlIHdoZW4gc3RhcnQgc2VsZWN0ZWQgYW5kIGVtaXRzIGFnYWluIHdoZW4gZW5kIHNlbGVjdGVkLlxuICAgICAqICovXG4gICAgZ2V0IHJhbmdlQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUNoYW5nZTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5waWNrZXIgPyB0aGlzLnBpY2tlci5yYW5nZSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc2V0IHZhbHVlKHJhbmdlKSB7XG4gICAgICAgIGlmICghdGhpcy5waWNrZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSByYW5nZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmFuZ2UpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpc2libGVEYXRlID0gcmFuZ2UgJiYgcmFuZ2Uuc3RhcnQ7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gdmlzaWJsZURhdGU7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci52aXNpYmxlRGF0ZSA9IHZpc2libGVEYXRlO1xuICAgICAgICAgICAgdGhpcy5waWNrZXIucmFuZ2UgPSByYW5nZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgcGlja2VyVmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpY2tlci5yYW5nZUNoYW5nZTtcbiAgICB9XG4gICAgc2hvdWxkSGlkZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLnNob3VsZEhpZGUoKSAmJiAhISh0aGlzLnZhbHVlICYmIHRoaXMudmFsdWUuc3RhcnQgJiYgdGhpcy52YWx1ZS5lbmQpO1xuICAgIH1cbiAgICB3cml0ZVF1ZXVlKCkge1xuICAgICAgICBpZiAodGhpcy5xdWV1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmFuZ2UgPSB0aGlzLnF1ZXVlO1xuICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gcmFuZ2U7XG4gICAgICAgIH1cbiAgICB9XG59XG5OYlJhbmdlcGlja2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1yYW5nZXBpY2tlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICcnXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iUmFuZ2VwaWNrZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgcmFuZ2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJhbmdlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5cbmNsYXNzIE5iRGF0ZVRpbWVQaWNrZXJDb21wb25lbnQgZXh0ZW5kcyBOYkJhc2VQaWNrZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRvY3VtZW50LCBwb3NpdGlvbkJ1aWxkZXIsIHRyaWdnZXJTdHJhdGVneUJ1aWxkZXIsIG92ZXJsYXksIGNmciwgZGF0ZVNlcnZpY2UsIGRhdGVTZXJ2aWNlT3B0aW9ucywgY2FsZW5kYXJXaXRoVGltZU1vZGVsU2VydmljZSkge1xuICAgICAgICBzdXBlcihkb2N1bWVudCwgcG9zaXRpb25CdWlsZGVyLCB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyLCBvdmVybGF5LCBjZnIsIGRhdGVTZXJ2aWNlLCBkYXRlU2VydmljZU9wdGlvbnMpO1xuICAgICAgICB0aGlzLmNhbGVuZGFyV2l0aFRpbWVNb2RlbFNlcnZpY2UgPSBjYWxlbmRhcldpdGhUaW1lTW9kZWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLnBpY2tlckNsYXNzID0gTmJDYWxlbmRhcldpdGhUaW1lQ29tcG9uZW50O1xuICAgIH1cbiAgICBnZXQgdmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBpY2tlciA/IHRoaXMucGlja2VyLmRhdGUgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIHNldCB2YWx1ZShkYXRlKSB7XG4gICAgICAgIGlmICghdGhpcy5waWNrZXIpIHtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSBkYXRlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLnZpc2libGVEYXRlID0gZGF0ZTtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLmRhdGUgPSBkYXRlO1xuICAgICAgICAgICAgdGhpcy5waWNrZXIuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHR3ZWx2ZUhvdXJzRm9ybWF0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHdlbHZlSG91cnNGb3JtYXQ7XG4gICAgfVxuICAgIHNldCB0d2VsdmVIb3Vyc0Zvcm1hdCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90d2VsdmVIb3Vyc0Zvcm1hdCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCB3aXRoU2Vjb25kcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhTZWNvbmRzO1xuICAgIH1cbiAgICBzZXQgd2l0aFNlY29uZHModmFsdWUpIHtcbiAgICAgICAgdGhpcy5fd2l0aFNlY29uZHMgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgc2luZ2xlQ29sdW1uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2luZ2xlQ29sdW1uO1xuICAgIH1cbiAgICBzZXQgc2luZ2xlQ29sdW1uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NpbmdsZUNvbHVtbiA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmZvcm1hdCA9IHRoaXMuZm9ybWF0IHx8IHRoaXMuYnVpbGRUaW1lRm9ybWF0KCk7XG4gICAgfVxuICAgIHBhdGNoV2l0aElucHV0cygpIHtcbiAgICAgICAgdGhpcy5waWNrZXIuc2luZ2xlQ29sdW1uID0gdGhpcy5zaW5nbGVDb2x1bW47XG4gICAgICAgIHRoaXMucGlja2VyLnR3ZWx2ZUhvdXJzRm9ybWF0ID0gdGhpcy50d2VsdmVIb3Vyc0Zvcm1hdDtcbiAgICAgICAgdGhpcy5waWNrZXIud2l0aFNlY29uZHMgPSB0aGlzLndpdGhTZWNvbmRzO1xuICAgICAgICB0aGlzLnBpY2tlci5zdGVwID0gdGhpcy5zdGVwO1xuICAgICAgICB0aGlzLnBpY2tlci50aXRsZSA9IHRoaXMudGl0bGU7XG4gICAgICAgIHRoaXMucGlja2VyLmFwcGx5QnV0dG9uVGV4dCA9IHRoaXMuYXBwbHlCdXR0b25UZXh0O1xuICAgICAgICB0aGlzLnBpY2tlci5jdXJyZW50VGltZUJ1dHRvblRleHQgPSB0aGlzLmN1cnJlbnRUaW1lQnV0dG9uVGV4dDtcbiAgICAgICAgaWYgKHRoaXMudHdlbHZlSG91cnNGb3JtYXQpIHtcbiAgICAgICAgICAgIHRoaXMucGlja2VyLnRpbWVGb3JtYXQgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFR3ZWx2ZUhvdXJzRm9ybWF0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBpY2tlci50aW1lRm9ybWF0ID0gdGhpcy53aXRoU2Vjb25kcyA/IHRoaXMuZGF0ZVNlcnZpY2UuZ2V0VHdlbnR5Rm91ckhvdXJzRm9ybWF0V2l0aFNlY29uZHMoKSA6XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRlU2VydmljZS5nZXRUd2VudHlGb3VySG91cnNGb3JtYXQoKTtcbiAgICAgICAgfVxuICAgICAgICBzdXBlci5wYXRjaFdpdGhJbnB1dHMoKTtcbiAgICAgICAgdGhpcy5waWNrZXIuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIGdldCBwaWNrZXJWYWx1ZUNoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGlja2VyLmRhdGVDaGFuZ2U7XG4gICAgfVxuICAgIHdyaXRlUXVldWUoKSB7XG4gICAgICAgIGlmICh0aGlzLnF1ZXVlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gdGhpcy5xdWV1ZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IGRhdGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYnVpbGRUaW1lRm9ybWF0KCkge1xuICAgICAgICBpZiAodGhpcy5zaW5nbGVDb2x1bW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhbGVuZGFyV2l0aFRpbWVNb2RlbFNlcnZpY2UuYnVpbGREYXRlRm9ybWF0KHRoaXMudHdlbHZlSG91cnNGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FsZW5kYXJXaXRoVGltZU1vZGVsU2VydmljZS5idWlsZERhdGVGb3JtYXQodGhpcy50d2VsdmVIb3Vyc0Zvcm1hdCwgdGhpcy53aXRoU2Vjb25kcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5OYkRhdGVUaW1lUGlja2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1kYXRlLXRpbWVwaWNrZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnJyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkRhdGVUaW1lUGlja2VyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RBVEVfU0VSVklDRV9PUFRJT05TLF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iQ2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlIH1cbl07XG5OYkRhdGVUaW1lUGlja2VyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHN0ZXA6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRpdGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhcHBseUJ1dHRvblRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGN1cnJlbnRUaW1lQnV0dG9uVGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdHdlbHZlSG91cnNGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHdpdGhTZWNvbmRzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaW5nbGVDb2x1bW46IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5mdW5jdGlvbiBpc1VybFBhdGhFcXVhbChwYXRoLCBsaW5rKSB7XG4gICAgY29uc3QgbG9jYXRpb25QYXRoID0gZ2V0UGF0aFBhcnRPZlVybChwYXRoKTtcbiAgICByZXR1cm4gbGluayA9PT0gbG9jYXRpb25QYXRoO1xufVxuZnVuY3Rpb24gaXNVcmxQYXRoQ29udGFpbihwYXRoLCBsaW5rKSB7XG4gICAgY29uc3QgbG9jYXRpb25QYXRoID0gZ2V0UGF0aFBhcnRPZlVybChwYXRoKTtcbiAgICBjb25zdCBlbmRPZlVybFNlZ21lbnRSZWdFeHAgPSAvXFwvfF4kLztcbiAgICByZXR1cm4gbG9jYXRpb25QYXRoLnN0YXJ0c1dpdGgobGluaykgJiZcbiAgICAgICAgbG9jYXRpb25QYXRoLnNsaWNlKGxpbmsubGVuZ3RoKS5jaGFyQXQoMCkuc2VhcmNoKGVuZE9mVXJsU2VnbWVudFJlZ0V4cCkgIT09IC0xO1xufVxuZnVuY3Rpb24gZ2V0UGF0aFBhcnRPZlVybCh1cmwpIHtcbiAgICByZXR1cm4gdXJsLm1hdGNoKC8uKj8oPz1bPzsjXXwkKS8pWzBdO1xufVxuZnVuY3Rpb24gZ2V0RnJhZ21lbnRQYXJ0T2ZVcmwodXJsKSB7XG4gICAgY29uc3QgbWF0Y2hlZCA9IHVybC5tYXRjaCgvIyguKykvKTtcbiAgICByZXR1cm4gbWF0Y2hlZCA/IG1hdGNoZWRbMV0gOiAnJztcbn1cbmZ1bmN0aW9uIGlzRnJhZ21lbnRFcXVhbChwYXRoLCBmcmFnbWVudCkge1xuICAgIHJldHVybiBnZXRGcmFnbWVudFBhcnRPZlVybChwYXRoKSA9PT0gZnJhZ21lbnQ7XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50Q29udGFpbihwYXRoLCBmcmFnbWVudCkge1xuICAgIHJldHVybiBnZXRGcmFnbWVudFBhcnRPZlVybChwYXRoKS5pbmNsdWRlcyhmcmFnbWVudCk7XG59XG5cbi8qKlxuICogVGhpcyBzZXJ2aWNlIGRldGVybWluZXMgd2hldGhlciB3ZSBzaG91bGQgc2Nyb2xsIHRoZSBsYXlvdXQgYmFjayB0byB0b3AuXG4gKiBUaGlzIG9jY3VycyB3aGVuIHRoZSBwYWdlIGlzIGNoYW5nZWQsIHNvIHdoZW4gY3VycmVudCB1cmwgUEFUSCBpcyBub3QgZXF1YWwgdG8gdGhlIHByZXZpb3VzIG9uZS5cbiAqXG4gKiAgVE9ETzogdGhpcyBpcyBtb3N0IGxpa2VseSBhIHRlbXBvcmFyeSBzb2x1dGlvbnMgYXMgcmVjZW50bHkgQW5ndWxhciBpbnRyb2R1Y2VzIFZpZXdwb3J0U2Nyb2xsXG4gKiAgYW5kIHNjcm9sbCByZXN0b3JhdGlvbiBwcm9jZXNzXG4gKi9cbmNsYXNzIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlciB7XG4gICAgY29uc3RydWN0b3Iocm91dGVyKSB7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgIH1cbiAgICBzaG91bGRSZXN0b3JlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb3V0ZXIuZXZlbnRzXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgobnVsbCksIGZpbHRlcihldmVudCA9PiBldmVudCA9PT0gbnVsbCB8fCBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpLCBwYWlyd2lzZSgpLCBtYXAoKFtwcmV2LCBjdXJyZW50XSkgPT4gdGhpcy5wYWdlQ2hhbmdlZChwcmV2LCBjdXJyZW50KSksIGZpbHRlcihyZXMgPT4gISFyZXMpKTtcbiAgICB9XG4gICAgcGFnZUNoYW5nZWQocHJldiwgY3VycmVudCkge1xuICAgICAgICByZXR1cm4gIXByZXYgfHwgZ2V0UGF0aFBhcnRPZlVybChwcmV2LnVybCkgIT09IGdldFBhdGhQYXJ0T2ZVcmwoY3VycmVudC51cmwpO1xuICAgIH1cbn1cbk5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlci5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJSZXN0b3JlU2Nyb2xsVG9wSGVscGVyLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogUm91dGVyIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTGF5b3V0IGNvbnRhaW5lciBjb21wb25lbnQuXG4gKiBXaGVuIHVzaW5nIHdpdGggTmVidWxhciBUaGVtZSBTeXN0ZW0gaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgY2hpbGQgY29tcG9uZW50cyBzaG91bGQgYmUgcGxhY2VkIGluc2lkZS5cbiAqXG4gKiBCYXNpYyBleGFtcGxlIG9mIHR3byBjb2x1bW4gbGF5b3V0IHdpdGggaGVhZGVyOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGxheW91dC9sYXlvdXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIENhbiBjb250YWluIHRoZSBmb2xsb3dpbmcgY29tcG9uZW50cyBpbnNpZGU6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWxheW91dD5cbiAqICA8bmItbGF5b3V0LWhlYWRlcj48L25iLWxheW91dC1oZWFkZXI+XG4gKiAgPG5iLWxheW91dC1mb290ZXI+PC9uYi1sYXlvdXQtZm9vdGVyPlxuICogIDxuYi1sYXlvdXQtY29sdW1uPjwvbmItbGF5b3V0LWNvbHVtbj5cbiAqICA8bmItc2lkZWJhcj48L25iLXNpZGViYXI+XG4gKiA8L25iLWxheW91dD5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJMYXlvdXRNb2R1bGVgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJMYXlvdXRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKiBCeSBkZWZhdWx0IHRoZSBsYXlvdXQgZmlsbHMgdXAgdGhlIHdob2xlIHZpZXctcG9ydC5cbiAqIFRoZSB3aW5kb3cgc2Nyb2xsYmFycyBhcmUgZGlzYWJsZWQgb24gdGhlIGJvZHkgYW5kIG1vdmVkIGluc2lkZSBvZiB0aGUgbmItbGF5b3V0LCBzbyB0aGF0IHRoZSBzY3JvbGxiYXJzXG4gKiB3b24ndCBtZXNzIHdpdGggdGhlIGZpeGVkIG5iLWhlYWRlci5cbiAqXG4gKiBUaGUgY2hpbGQgY29tcG9uZW50cyBhcmUgcHJvamVjdGVkIGludG8gYSBmbGV4aWJsZSBsYXlvdXQgc3RydWN0dXJlIGFsbG93aW5nIHRvIGFkanVzdCB0aGUgbGF5b3V0IGJlaGF2aW9yXG4gKiBiYXNlZCBvbiB0aGUgc2V0dGluZ3MgcHJvdmlkZWQuXG4gKlxuICogVGhlIGxheW91dCBjb250ZW50IChjb2x1bW5zKSBiZWNvbWVzIGNlbnRlcmVkIHdoZW4gdGhlIHdpbmRvdyB3aWR0aCBpcyBtb3JlIHRoYW5cbiAqIHRoZSB2YWx1ZSBzcGVjaWZpZWQgaW4gdGhlIHRoZW1lIHZhcmlhYmxlIGBsYXlvdXQtY29udGVudC13aWR0aGAuXG4gKlxuICogVGhlIGxheW91dCBhbHNvIGNvbnRhaW5zIHRoZSBhcmVhIG9uIHRoZSB2ZXJ5IHRvcCAodGhlIGZpcnN0IGNoaWxkIG9mIHRoZSBuYi1sYXlvdXQpLCB3aGljaCBjb3VsZCBiZSB1c2VkXG4gKiB0byBkeW5hbWljYWxseSBhcHBlbmQgc29tZSBjb21wb25lbnRzIGxpa2UgbW9kYWxzIG9yIHNwaW5uZXJzL2xvYWRlcnNcbiAqIHNvIHRoYXQgdGhleSBhcmUgbG9jYXRlZCBvbiB0b3Agb2YgdGhlIGVsZW1lbnRzIGhpZXJhcmNoeS5cbiAqIE1vcmUgZGV0YWlscyBhcmUgdW5kZXIgdGhlIGBUaGVtZVNlcnZpY2VgIHNlY3Rpb24uXG4gKlxuICogVGhlIGxheW91dCBjb21wb25lbnQgaXMgYWxzbyByZXNwb25zaWJsZSBmb3IgY2hhbmdpbmcgYXBwbGljYXRpb24gdGhlbWVzLlxuICogSXQgbGlzdGVucyB0byB0aGUgYHRoZW1lQ2hhbmdlYCBldmVudCBhbmQgY2hhbmdlIGEgdGhlbWUgQ1NTIGNsYXNzIGFwcGVuZGVkIHRvIGJvZHkuXG4gKiBCYXNlZCBvbiB0aGUgY2xhc3MgYXBwZW5kZWQsIHNwZWNpZmljIENTUy10aGVtZSBpcyBhcHBsaWVkIHRvIHRoZSBhcHBsaWNhdGlvbi5cbiAqIE1vcmUgZGV0YWlscyBvZiB0aGUgVGhlbWUgU3lzdGVtIGNvdWxkIGJlIGZvdW5kIGhlcmUgW0VuYWJsaW5nIFRoZW1lIFN5c3RlbV0oIy9kb2NzL2NvbmNlcHRzL3RoZW1lLXN5c3RlbSlcbiAqXG4gKiBBIHNpbXBsZSBsYXlvdXQgd2l0aCBmb290ZXI6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShMYXlvdXQgV2l0aCBGb290ZXIsIGxheW91dC9sYXlvdXQtdy1mb290ZXIuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIHBvc3NpYmxlIHRvIGFzayB0aGUgbGF5b3V0IHRvIGNlbnRlciB0aGUgY29sdW1ucyAobm90aWNlOiB3ZSBhZGRlZCBhIGBjZW50ZXJgIGF0dHJpYnV0ZVxuICogdG8gdGhlIGxheW91dDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItbGF5b3V0IGNlbnRlcj5cbiAqICAgPG5iLWxheW91dC1oZWFkZXI+QXdlc29tZSBDb21wYW55PC9uYi1sYXlvdXQtaGVhZGVyPlxuICpcbiAqICAgPG5iLWxheW91dC1jb2x1bW4+XG4gKiAgICAgSGVsbG8gV29ybGQhXG4gKiAgIDwvbmItbGF5b3V0LWNvbHVtbj5cbiAqXG4gKiAgIDxuYi1sYXlvdXQtZm9vdGVyPkNvbnRhY3QgdXM8L25iLWxheW91dC1mb290ZXI+XG4gKiA8L25iLWxheW91dD5cbiAqIGBgYFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBsYXlvdXQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGxheW91dC10ZXh0LWNvbG9yOlxuICogbGF5b3V0LXRleHQtZm9udC1mYW1pbHk6XG4gKiBsYXlvdXQtdGV4dC1mb250LXNpemU6XG4gKiBsYXlvdXQtdGV4dC1mb250LXdlaWdodDpcbiAqIGxheW91dC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogbGF5b3V0LW1pbi1oZWlnaHQ6XG4gKiBsYXlvdXQtY29udGVudC13aWR0aDpcbiAqIGxheW91dC13aW5kb3ctbW9kZS1taW4td2lkdGg6XG4gKiBsYXlvdXQtd2luZG93LW1vZGUtbWF4LXdpZHRoOlxuICogbGF5b3V0LXdpbmRvdy1tb2RlLWJhY2tncm91bmQtY29sb3I6XG4gKiBsYXlvdXQtd2luZG93LW1vZGUtcGFkZGluZy10b3A6XG4gKiBsYXlvdXQtd2luZG93LXNoYWRvdzpcbiAqIGxheW91dC1wYWRkaW5nOlxuICogbGF5b3V0LW1lZGl1bS1wYWRkaW5nOlxuICogbGF5b3V0LXNtYWxsLXBhZGRpbmc6XG4gKiBsYXlvdXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBsYXlvdXQtc2Nyb2xsYmFyLWNvbG9yOlxuICogbGF5b3V0LXNjcm9sbGJhci13aWR0aDpcbiAqL1xuY2xhc3MgTmJMYXlvdXRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHRoZW1lU2VydmljZSwgc3Bpbm5lclNlcnZpY2UsIGVsZW1lbnRSZWYsIHJlbmRlcmVyLCB3aW5kb3csIGRvY3VtZW50LCBwbGF0Zm9ybUlkLCBsYXlvdXREaXJlY3Rpb25TZXJ2aWNlLCBzY3JvbGxTZXJ2aWNlLCBydWxlclNlcnZpY2UsIHNjcm9sbFRvcCwgb3ZlcmxheUNvbnRhaW5lcikge1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZSA9IHRoZW1lU2VydmljZTtcbiAgICAgICAgdGhpcy5zcGlubmVyU2VydmljZSA9IHNwaW5uZXJTZXJ2aWNlO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uU2VydmljZSA9IGxheW91dERpcmVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIHRoaXMucnVsZXJTZXJ2aWNlID0gcnVsZXJTZXJ2aWNlO1xuICAgICAgICB0aGlzLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyID0gb3ZlcmxheUNvbnRhaW5lcjtcbiAgICAgICAgdGhpcy5zY3JvbGxCbG9ja0NsYXNzID0gJ25iLWdsb2JhbC1zY3JvbGxibG9jayc7XG4gICAgICAgIHRoaXMuaXNTY3JvbGxCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2VudGVyVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZXN0b3JlU2Nyb2xsVG9wVmFsdWUgPSB0cnVlO1xuICAgICAgICB0aGlzLndpbmRvd01vZGVWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLndpdGhTY3JvbGxWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLndpdGhTdWJoZWFkZXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5hZnRlclZpZXdJbml0JCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyQXNPdmVybGF5Q29udGFpbmVyKCk7XG4gICAgICAgIHRoaXMudGhlbWVTZXJ2aWNlLm9uVGhlbWVDaGFuZ2UoKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgodGhlbWUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGJvZHkgPSB0aGlzLmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdib2R5JylbMF07XG4gICAgICAgICAgICBpZiAodGhlbWUucHJldmlvdXMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKGJvZHksIGBuYi10aGVtZS0ke3RoZW1lLnByZXZpb3VzfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyhib2R5LCBgbmItdGhlbWUtJHt0aGVtZS5uYW1lfWApO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2Uub25BcHBlbmRMYXlvdXRDbGFzcygpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChjbGFzc05hbWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIGNsYXNzTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5vblJlbW92ZUxheW91dENsYXNzKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGNsYXNzTmFtZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgY2xhc3NOYW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc3Bpbm5lclNlcnZpY2UucmVnaXN0ZXJMb2FkZXIobmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuYWZ0ZXJWaWV3SW5pdCRcbiAgICAgICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoXykgPT4gcmVzb2x2ZSgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnNwaW5uZXJTZXJ2aWNlLmxvYWQoKTtcbiAgICAgICAgdGhpcy5ydWxlclNlcnZpY2Uub25HZXREaW1lbnNpb25zKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHsgbGlzdGVuZXIgfSkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIubmV4dCh0aGlzLmdldERpbWVuc2lvbnMoKSk7XG4gICAgICAgICAgICBsaXN0ZW5lci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY3JvbGxTZXJ2aWNlXG4gICAgICAgICAgICAub25TY3JvbGxhYmxlQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLndpdGhTY3JvbGxWYWx1ZSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChzY3JvbGxhYmxlKSA9PiB7XG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEluIGNhc2Ugd2hlbiBOZWJ1bGFyIExheW91dCBjdXN0b20gc2Nyb2xsIGB3aXRoU2Nyb2xsYCBtb2RlIGlzIGVuYWJsZWRcbiAgICAgICAgICAgICAqIHdlIG5lZWQgdG8gZGlzYWJsZSBkZWZhdWx0IENESyBzY3JvbGwgYmxvY2tlciAoQGxpbmsgTmJCbG9ja1Njcm9sbFN0cmF0ZWd5QWRhcHRlcikgb24gSFRNTCBlbGVtZW50XG4gICAgICAgICAgICAgKiBzbyB0aGF0IGl0IHdvbid0IGFkZCBhZGRpdGlvbmFsIHBvc2l0aW9uaW5nLlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpZiAoc2Nyb2xsYWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJsb2NrU2Nyb2xsKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgICAgICAgLy8gdHJpZ2dlciBmaXJzdCB0aW1lIHNvIHRoYXQgYWZ0ZXIgdGhlIGNoYW5nZSB3ZSBoYXZlIHRoZSBpbml0aWFsIHZhbHVlXG4gICAgICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5jaGFuZ2VXaW5kb3dXaWR0aCh0aGlzLndpbmRvdy5pbm5lcldpZHRoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGxheW91dCBjb2x1bW5zIHdpbGwgYmUgY2VudGVyZWQgYWZ0ZXIgc29tZSB3aWR0aFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICovXG4gICAgc2V0IGNlbnRlcih2YWwpIHtcbiAgICAgICAgdGhpcy5jZW50ZXJWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdGhlIGxheW91dCBlbnRlcnMgYSAnd2luZG93JyBtb2RlLCB3aGVuIHRoZSBsYXlvdXQgY29udGVudCAoaW5jbHVkaW5nIHNpZGViYXJzIGFuZCBmaXhlZCBoZWFkZXIpXG4gICAgICogYmVjb21lcyBjZW50ZXJlZCBieSB3aWR0aCB3aXRoIGEgbWFyZ2luIGZyb20gdGhlIHRvcCBvZiB0aGUgc2NyZWVuLCBsaWtlIGEgZmxvYXRpbmcgd2luZG93LlxuICAgICAqIEF1dG9tYXRpY2FsbHkgZW5hYmxlcyBgd2l0aFNjcm9sbGAgbW9kZSwgYXMgaW4gdGhlIHdpbmRvdyBtb2RlIHNjcm9sbCBtdXN0IGJlIGluc2lkZSB0aGUgbGF5b3V0IGFuZCBjYW5ub3QgYmUgb25cbiAgICAgKiB3aW5kb3cuIChUT0RPOiBjaGVjayB0aGlzKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICovXG4gICAgc2V0IHdpbmRvd01vZGUodmFsKSB7XG4gICAgICAgIHRoaXMud2luZG93TW9kZVZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIHRoaXMud2l0aFNjcm9sbCA9IHRoaXMud2luZG93TW9kZVZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZWZpbmVzIHdoZXRoZXIgdG8gbW92ZSB0aGUgc2Nyb2xsYmFycyB0byBsYXlvdXQgb3IgbGVhdmUgaXQgYXQgdGhlIGJvZHkgbGV2ZWwuXG4gICAgICogQXV0b21hdGljYWxseSBzZXQgdG8gdHJ1ZSB3aGVuIGB3aW5kb3dNb2RlYCBpcyBlbmFibGVkLlxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICovXG4gICAgc2V0IHdpdGhTY3JvbGwodmFsKSB7XG4gICAgICAgIHRoaXMud2l0aFNjcm9sbFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIC8vIFRPRE86IGlzIHRoaXMgdGhlIGJlc3Qgd2F5IG9mIGRvaW5nIGl0PyBhcyB3ZSBkb24ndCBoYXZlIGFjY2VzcyB0byBib2R5IGZyb20gdGhlbWUgc3R5bGVzXG4gICAgICAgIC8vIFRPRE86IGFkZCBlMmUgdGVzdFxuICAgICAgICBjb25zdCBib2R5ID0gdGhpcy5kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdO1xuICAgICAgICBpZiAodGhpcy53aXRoU2Nyb2xsVmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoYm9keSwgJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShib2R5LCAnb3ZlcmZsb3cnLCAnaW5pdGlhbCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlc3RvcmVzIHNjcm9sbCB0byB0aGUgdG9wIG9mIHRoZSBwYWdlIGFmdGVyIG5hdmlnYXRpb25cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCByZXN0b3JlU2Nyb2xsVG9wKHZhbCkge1xuICAgICAgICB0aGlzLnJlc3RvcmVTY3JvbGxUb3BWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZS5vbkdldFBvc2l0aW9uKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHsgbGlzdGVuZXIgfSkgPT4ge1xuICAgICAgICAgICAgbGlzdGVuZXIubmV4dCh0aGlzLmdldFNjcm9sbFBvc2l0aW9uKCkpO1xuICAgICAgICAgICAgbGlzdGVuZXIuY29tcGxldGUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9wLnNob3VsZFJlc3RvcmUoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+IHRoaXMucmVzdG9yZVNjcm9sbFRvcFZhbHVlKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLnNjcm9sbCgwLCAwKSk7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uU2VydmljZS5vbkRpcmVjdGlvbkNoYW5nZSgpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGRpcmVjdGlvbiA9PiB0aGlzLmRvY3VtZW50LmRpciA9IGRpcmVjdGlvbik7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZS5vbk1hbnVhbFNjcm9sbCgpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IHgsIHkgfSkgPT4gdGhpcy5zY3JvbGwoeCwgeSkpO1xuICAgICAgICB0aGlzLmFmdGVyVmlld0luaXQkLm5leHQodHJ1ZSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnVucmVnaXN0ZXJBc092ZXJsYXlDb250YWluZXIoKTtcbiAgICB9XG4gICAgb25TY3JvbGwoJGV2ZW50KSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZS5maXJlU2Nyb2xsQ2hhbmdlKCRldmVudCk7XG4gICAgfVxuICAgIG9uUmVzaXplKGV2ZW50KSB7XG4gICAgICAgIHRoaXMudGhlbWVTZXJ2aWNlLmNoYW5nZVdpbmRvd1dpZHRoKGV2ZW50LnRhcmdldC5pbm5lcldpZHRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBzY3JvbGwgYW5kIGNsaWVudCBoZWlnaHQvd2lkdGhcbiAgICAgKlxuICAgICAqIERlcGVuZGluZyBvbiB0aGUgY3VycmVudCBzY3JvbGwgbW9kZSAoYHdpdGhTY3JvbGw9dHJ1ZWApIHJldHVybnMgc2l6ZXMgZnJvbSB0aGUgYm9keSBlbGVtZW50XG4gICAgICogb3IgZnJvbSB0aGUgYC5zY3JvbGxhYmxlLWNvbnRhaW5lcmBcbiAgICAgKiBAcmV0dXJucyB7TmJMYXlvdXREaW1lbnNpb25zfVxuICAgICAqL1xuICAgIGdldERpbWVuc2lvbnMoKSB7XG4gICAgICAgIGxldCBjbGllbnRXaWR0aCwgY2xpZW50SGVpZ2h0LCBzY3JvbGxXaWR0aCwgc2Nyb2xsSGVpZ2h0ID0gMDtcbiAgICAgICAgaWYgKHRoaXMud2l0aFNjcm9sbFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnNjcm9sbGFibGVDb250YWluZXJSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIGNsaWVudFdpZHRoID0gY29udGFpbmVyLmNsaWVudFdpZHRoO1xuICAgICAgICAgICAgY2xpZW50SGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcbiAgICAgICAgICAgIHNjcm9sbFdpZHRoID0gY29udGFpbmVyLnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gY29udGFpbmVyLnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZG9jdW1lbnRFbGVtZW50LCBib2R5IH0gPSB0aGlzLmRvY3VtZW50O1xuICAgICAgICAgICAgY2xpZW50V2lkdGggPSBkb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHwgYm9keS5jbGllbnRXaWR0aDtcbiAgICAgICAgICAgIGNsaWVudEhlaWdodCA9IGRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHwgYm9keS5jbGllbnRIZWlnaHQ7XG4gICAgICAgICAgICBzY3JvbGxXaWR0aCA9IGRvY3VtZW50RWxlbWVudC5zY3JvbGxXaWR0aCB8fCBib2R5LnNjcm9sbFdpZHRoO1xuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0ID0gZG9jdW1lbnRFbGVtZW50LnNjcm9sbEhlaWdodCB8fCBib2R5LnNjcm9sbEhlaWdodDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2xpZW50V2lkdGgsXG4gICAgICAgICAgICBjbGllbnRIZWlnaHQsXG4gICAgICAgICAgICBzY3JvbGxXaWR0aCxcbiAgICAgICAgICAgIHNjcm9sbEhlaWdodCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBzY3JvbGwgcG9zaXRpb24gb2YgY3VycmVudCBzY3JvbGwgY29udGFpbmVyLlxuICAgICAqXG4gICAgICogSWYgYHdpdGhTY3JvbGxgID0gdHJ1ZSwgcmV0dXJucyBzY3JvbGwgcG9zaXRpb24gb2YgdGhlIGAuc2Nyb2xsYWJsZS1jb250YWluZXJgIGVsZW1lbnQsXG4gICAgICogb3RoZXJ3aXNlIC0gb2YgdGhlIHNjcm9sbGFibGUgZWxlbWVudCBvZiB0aGUgd2luZG93ICh3aGljaCBtYXkgYmUgZGlmZmVyZW50IGRlcGVuZGluZyBvZiBhIGJyb3dzZXIpXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7TmJTY3JvbGxQb3NpdGlvbn1cbiAgICAgKi9cbiAgICBnZXRTY3JvbGxQb3NpdGlvbigpIHtcbiAgICAgICAgaWYgKCFpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICAgICAgICByZXR1cm4geyB4OiAwLCB5OiAwIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2l0aFNjcm9sbFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnNjcm9sbGFibGVDb250YWluZXJSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiB7IHg6IGNvbnRhaW5lci5zY3JvbGxMZWZ0LCB5OiBjb250YWluZXIuc2Nyb2xsVG9wIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZG9jdW1lbnRSZWN0ID0gdGhpcy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGNvbnN0IHggPSAtZG9jdW1lbnRSZWN0LmxlZnQgfHwgdGhpcy5kb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgdGhpcy53aW5kb3cuc2Nyb2xsWCB8fFxuICAgICAgICAgICAgdGhpcy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCAwO1xuICAgICAgICBjb25zdCB5ID0gLWRvY3VtZW50UmVjdC50b3AgfHwgdGhpcy5kb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCB0aGlzLndpbmRvdy5zY3JvbGxZIHx8XG4gICAgICAgICAgICB0aGlzLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgMDtcbiAgICAgICAgcmV0dXJuIHsgeCwgeSB9O1xuICAgIH1cbiAgICByZWdpc3RlckFzT3ZlcmxheUNvbnRhaW5lcigpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheUNvbnRhaW5lci5zZXRDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lci5zZXRDb250YWluZXIodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVucmVnaXN0ZXJBc092ZXJsYXlDb250YWluZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLm92ZXJsYXlDb250YWluZXIuY2xlYXJDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lci5jbGVhckNvbnRhaW5lcigpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbCh4ID0gbnVsbCwgeSA9IG51bGwpIHtcbiAgICAgICAgY29uc3QgeyB4OiBjdXJyZW50WCwgeTogY3VycmVudFkgfSA9IHRoaXMuZ2V0U2Nyb2xsUG9zaXRpb24oKTtcbiAgICAgICAgeCA9IHggPT0gbnVsbCA/IGN1cnJlbnRYIDogeDtcbiAgICAgICAgeSA9IHkgPT0gbnVsbCA/IGN1cnJlbnRZIDogeTtcbiAgICAgICAgaWYgKCFpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMud2l0aFNjcm9sbFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCBzY3JvbGxhYmxlID0gdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoc2Nyb2xsYWJsZS5zY3JvbGxUbykge1xuICAgICAgICAgICAgICAgIHNjcm9sbGFibGUuc2Nyb2xsVG8oeCwgeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxhYmxlLnNjcm9sbExlZnQgPSB4O1xuICAgICAgICAgICAgICAgIHNjcm9sbGFibGUuc2Nyb2xsVG9wID0geTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMud2luZG93LnNjcm9sbFRvKHgsIHkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIFRPRE86IEV4dHJhY3QgaW50byBibG9jayBzY3JvbGwgc3RyYXRlZ3lcbiAgICBibG9ja1Njcm9sbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTY3JvbGxCbG9ja2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1Njcm9sbEJsb2NrZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLnNjcm9sbEJsb2NrQ2xhc3MpO1xuICAgICAgICBjb25zdCBzY3JvbGxhYmxlQ29udGFpbmVyRWxlbWVudCA9IHRoaXMuc2Nyb2xsYWJsZUNvbnRhaW5lclJlZi5uYXRpdmVFbGVtZW50O1xuICAgICAgICBjb25zdCBsYXlvdXRFbGVtZW50ID0gdGhpcy5sYXlvdXRDb250YWluZXJSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgY29uc3QgbGF5b3V0V2l0aFNjcm9sbFdpZHRoID0gbGF5b3V0RWxlbWVudC5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyT3ZlcmZsb3dPbGRWYWx1ZSA9IHNjcm9sbGFibGVDb250YWluZXJFbGVtZW50LnN0eWxlLm92ZXJmbG93O1xuICAgICAgICBzY3JvbGxhYmxlQ29udGFpbmVyRWxlbWVudC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgICBjb25zdCBsYXlvdXRXaXRob3V0U2Nyb2xsV2lkdGggPSBsYXlvdXRFbGVtZW50LmNsaWVudFdpZHRoO1xuICAgICAgICBjb25zdCBzY3JvbGxXaWR0aCA9IGxheW91dFdpdGhvdXRTY3JvbGxXaWR0aCAtIGxheW91dFdpdGhTY3JvbGxXaWR0aDtcbiAgICAgICAgaWYgKCFzY3JvbGxXaWR0aCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGF5b3V0UGFkZGluZ09sZFZhbHVlID0ge1xuICAgICAgICAgICAgbGVmdDogbGF5b3V0RWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCxcbiAgICAgICAgICAgIHJpZ2h0OiBsYXlvdXRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCxcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHRoaXMubGF5b3V0RGlyZWN0aW9uU2VydmljZS5pc0x0cigpKSB7XG4gICAgICAgICAgICBsYXlvdXRFbGVtZW50LnN0eWxlLnBhZGRpbmdSaWdodCA9IGAke3Njcm9sbFdpZHRofXB4YDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGxheW91dEVsZW1lbnQuc3R5bGUucGFkZGluZ0xlZnQgPSBgJHtzY3JvbGxXaWR0aH1weGA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZW5hYmxlU2Nyb2xsKCkge1xuICAgICAgICBpZiAodGhpcy5pc1Njcm9sbEJsb2NrZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxCbG9ja2VkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKHRoaXMuZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB0aGlzLnNjcm9sbEJsb2NrQ2xhc3MpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxhYmxlQ29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSB0aGlzLnNjcm9sbGFibGVDb250YWluZXJPdmVyZmxvd09sZFZhbHVlO1xuICAgICAgICAgICAgaWYgKHRoaXMubGF5b3V0UGFkZGluZ09sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF5b3V0RWxlbWVudCA9IHRoaXMubGF5b3V0Q29udGFpbmVyUmVmLm5hdGl2ZUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgbGF5b3V0RWxlbWVudC5zdHlsZS5wYWRkaW5nTGVmdCA9IHRoaXMubGF5b3V0UGFkZGluZ09sZFZhbHVlLmxlZnQ7XG4gICAgICAgICAgICAgICAgbGF5b3V0RWxlbWVudC5zdHlsZS5wYWRkaW5nUmlnaHQgPSB0aGlzLmxheW91dFBhZGRpbmdPbGRWYWx1ZS5yaWdodDtcbiAgICAgICAgICAgICAgICB0aGlzLmxheW91dFBhZGRpbmdPbGRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5OYkxheW91dENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItbGF5b3V0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJzY3JvbGxhYmxlLWNvbnRhaW5lclwiICNzY3JvbGxhYmxlQ29udGFpbmVyIChzY3JvbGwpPVwib25TY3JvbGwoJGV2ZW50KVwiPlxuICAgICAgPGRpdiBjbGFzcz1cImxheW91dFwiICNsYXlvdXRDb250YWluZXI+XG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWxheW91dC1oZWFkZXI6bm90KFtzdWJoZWFkZXJdKVwiPjwvbmctY29udGVudD5cbiAgICAgICAgPGRpdiBjbGFzcz1cImxheW91dC1jb250YWluZXJcIj5cbiAgICAgICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1zaWRlYmFyXCI+PC9uZy1jb250ZW50PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250ZW50XCIgW2NsYXNzLmNlbnRlcl09XCJjZW50ZXJWYWx1ZVwiPlxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItbGF5b3V0LWhlYWRlcltzdWJoZWFkZXJdXCI+PC9uZy1jb250ZW50PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbHVtbnNcIj5cbiAgICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItbGF5b3V0LWNvbHVtblwiPjwvbmctY29udGVudD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItbGF5b3V0LWZvb3RlclwiPjwvbmctY29udGVudD5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0ey13ZWJraXQtZm9udC1zbW9vdGhpbmc6YW50aWFsaWFzZWR9W2Rpcj1sdHJdIDpob3N0e3RleHQtYWxpZ246bGVmdH1bZGlyPXJ0bF0gOmhvc3R7dGV4dC1hbGlnbjpyaWdodH06aG9zdCAubGF5b3V0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW59Omhvc3QgOjpuZy1kZWVwIG5iLWxheW91dC1oZWFkZXJ7ZGlzcGxheTpibG9ja306aG9zdCA6Om5nLWRlZXAgbmItbGF5b3V0LWhlYWRlciBuYXZ7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpmbGV4LXN0YXJ0O2Rpc3BsYXk6ZmxleH06aG9zdCA6Om5nLWRlZXAgbmItbGF5b3V0LWhlYWRlci5maXhlZHtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDt6LWluZGV4OjEwNDB9Omhvc3QgLmxheW91dC1jb250YWluZXJ7ZGlzcGxheTpmbGV4O2ZsZXg6MTstbXMtZmxleDoxIDEgYXV0bztmbGV4LWRpcmVjdGlvbjpyb3d9W2Rpcj1sdHJdIDpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyLmxlZnR7b3JkZXI6MH1bZGlyPXJ0bF0gOmhvc3QgLmxheW91dC1jb250YWluZXIgOjpuZy1kZWVwIG5iLXNpZGViYXIubGVmdHtvcmRlcjoyfVtkaXI9bHRyXSA6aG9zdCAubGF5b3V0LWNvbnRhaW5lciA6Om5nLWRlZXAgbmItc2lkZWJhci5yaWdodHtvcmRlcjoyfVtkaXI9cnRsXSA6aG9zdCAubGF5b3V0LWNvbnRhaW5lciA6Om5nLWRlZXAgbmItc2lkZWJhci5yaWdodHtvcmRlcjowfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyLmVuZHtvcmRlcjoyfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIDo6bmctZGVlcCBuYi1zaWRlYmFyIC5maXhlZHtwb3NpdGlvbjpmaXhlZDt3aWR0aDoxMDAlO292ZXJmbG93LXk6YXV0bztoZWlnaHQ6MTAwJX06aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudHtkaXNwbGF5OmZsZXg7ZmxleDoxOy1tcy1mbGV4OjEgMSBhdXRvO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjttaW4td2lkdGg6MH06aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudC5jZW50ZXJ7bWF4LXdpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7bWFyZ2luLWxlZnQ6YXV0bzttYXJnaW4tcmlnaHQ6YXV0b306aG9zdCAubGF5b3V0LWNvbnRhaW5lciAuY29udGVudCAuY29sdW1uc3tkaXNwbGF5OmZsZXg7ZmxleDoxOy1tcy1mbGV4OjEgMSBhdXRvO2ZsZXgtZGlyZWN0aW9uOnJvdzt3aWR0aDoxMDAlfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1ue29yZGVyOjE7ZmxleDoxIDA7bWluLXdpZHRoOjB9W2Rpcj1sdHJdIDpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1uLmxlZnR7b3JkZXI6MH1bZGlyPXJ0bF0gOmhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgLmNvbHVtbnMgOjpuZy1kZWVwIG5iLWxheW91dC1jb2x1bW4ubGVmdHtvcmRlcjoyfTpob3N0IC5sYXlvdXQtY29udGFpbmVyIC5jb250ZW50IC5jb2x1bW5zIDo6bmctZGVlcCBuYi1sYXlvdXQtY29sdW1uLnN0YXJ0e29yZGVyOjB9Omhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgOjpuZy1kZWVwIG5iLWxheW91dC1mb290ZXJ7ZGlzcGxheTpibG9jazttYXJnaW4tdG9wOmF1dG99Omhvc3QgLmxheW91dC1jb250YWluZXIgLmNvbnRlbnQgOjpuZy1kZWVwIG5iLWxheW91dC1mb290ZXIgbmF2e2p1c3RpZnktY29udGVudDpjZW50ZXI7ZGlzcGxheTpmbGV4fVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkxheW91dENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iVGhlbWVTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlNwaW5uZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfV0lORE9XLF0gfV0gfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9LFxuICAgIHsgdHlwZTogT2JqZWN0LCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtQTEFURk9STV9JRCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYkxheW91dERpcmVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iTGF5b3V0U2Nyb2xsU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJMYXlvdXRSdWxlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlciB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlciB9XG5dO1xuTmJMYXlvdXRDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgd2luZG93TW9kZVZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy53aW5kb3ctbW9kZScsXSB9XSxcbiAgICB3aXRoU2Nyb2xsVmFsdWU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLndpdGgtc2Nyb2xsJyxdIH1dLFxuICAgIHdpdGhTdWJoZWFkZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLndpdGgtc3ViaGVhZGVyJyxdIH1dLFxuICAgIGNlbnRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgd2luZG93TW9kZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgd2l0aFNjcm9sbDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcmVzdG9yZVNjcm9sbFRvcDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmVyeVRvcFJlZjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ2xheW91dFRvcER5bmFtaWNBcmVhJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmIH0sXSB9XSxcbiAgICBzY3JvbGxhYmxlQ29udGFpbmVyUmVmOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnc2Nyb2xsYWJsZUNvbnRhaW5lcicsIHsgcmVhZDogRWxlbWVudFJlZiB9LF0gfV0sXG4gICAgbGF5b3V0Q29udGFpbmVyUmVmOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnbGF5b3V0Q29udGFpbmVyJywgeyByZWFkOiBFbGVtZW50UmVmIH0sXSB9XSxcbiAgICBvblNjcm9sbDogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ3dpbmRvdzpzY3JvbGwnLCBbJyRldmVudCddLF0gfV0sXG4gICAgb25SZXNpemU6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWyd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSxdIH1dXG59O1xuLyoqXG4gKiBBIGNvbnRhaW5lciBjb21wb25lbnQgd2hpY2ggZGV0ZXJtaW5lcyBhIGNvbnRlbnQgcG9zaXRpb24gaW5zaWRlIG9mIHRoZSBsYXlvdXQuXG4gKiBUaGUgbGF5b3V0IGNvdWxkIGNvbnRhaW4gdW5saW1pdGVkIGNvbHVtbnMgKG5vdCBpbmNsdWRpbmcgdGhlIHNpZGViYXJzKS5cbiAqXG4gKiBCeSBkZWZhdWx0IHRoZSBjb2x1bW5zIGFyZSBvcmRlcmVkIGZyb20gdGhlIGxlZnQgdG8gdGhlIHJpZ2h0LFxuICogYnV0IGl0J3MgYWxzbyBwb3NzaWJsZSB0byBvdmVyd3JpdGUgdGhpcyBiZWhhdmlvciBieSBzZXR0aW5nIGEgYGxlZnRgIGF0dHJpYnV0ZSB0byB0aGUgY29sdW1uLFxuICogbW92aW5nIGl0IHRvIHRoZSB2ZXJ5IGZpcnN0IHBvc2l0aW9uOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ29sdW1uIExlZnQsIGxheW91dC9sYXlvdXQtY29sdW1uLWxlZnQuY29tcG9uZW50KVxuICovXG5jbGFzcyBOYkxheW91dENvbHVtbkNvbXBvbmVudCB7XG4gICAgLyoqXG4gICAgICogTW92ZSB0aGUgY29sdW1uIHRvIHRoZSB2ZXJ5IGxlZnQgcG9zaXRpb24gaW4gdGhlIGxheW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBsZWZ0KHZhbCkge1xuICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB0aGlzLnN0YXJ0VmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZSBjb2x1bW4gZmlyc3QgaW4gdGhlIGxheW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBzdGFydCh2YWwpIHtcbiAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIHRoaXMubGVmdFZhbHVlID0gZmFsc2U7XG4gICAgfVxufVxuTmJMYXlvdXRDb2x1bW5Db21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWxheW91dC1jb2x1bW4nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICBgXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iTGF5b3V0Q29sdW1uQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGxlZnRWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubGVmdCcsXSB9XSxcbiAgICBzdGFydFZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGFydCcsXSB9XSxcbiAgICBsZWZ0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGFydDogW3sgdHlwZTogSW5wdXQgfV1cbn07XG4vKipcbiAqIFBhZ2UgaGVhZGVyIGNvbXBvbmVudC5cbiAqIExvY2F0ZWQgb24gdG9wIG9mIHRoZSBwYWdlIGFib3ZlIHRoZSBsYXlvdXQgY29sdW1ucyBhbmQgc2lkZWJhcnMuXG4gKiBDb3VsZCBiZSBtYWRlIGBmaXhlZGAgYnkgc2V0dGluZyB0aGUgY29ycmVzcG9uZGluZyBwcm9wZXJ0eS4gSW4gdGhlIGZpeGVkIG1vZGUgdGhlIGhlYWRlciBiZWNvbWVzXG4gKiBzdGlja3kgdG8gdGhlIHRvcCBvZiB0aGUgbmItbGF5b3V0ICh0byBvZiB0aGUgcGFnZSkuIEhlcmUncyBhbiBleGFtcGxlOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRml4ZWQgSGVhZGVyLCBsYXlvdXQvbGF5b3V0LWZpeGVkLWhlYWRlci5jb21wb25lbnQpXG4gKlxuICogSW4gYSBwYWlyIHdpdGggc2lkZWJhciBpdCBpcyBwb3NzaWJsZSB0byBzZXR1cCBhIGNvbmZpZ3VyYXRpb24gd2hlbiBoZWFkZXIgaXMgcGxhY2VkIG9uIGEgc2lkZSBvZiB0aGUgc2lkZWJhclxuICogYW5kIG5vdCBvbiB0b3Agb2YgaXQuIFRvIGFjaGlldmUgdGhpcyBzaW1wbHkgcHV0IGEgYHN1YmhlYWRlcmAgcHJvcGVydHkgdG8gdGhlIGhlYWRlciBsaWtlIHRoaXM6XG4gKiBgYGBodG1sXG4gKiA8bmItbGF5b3V0LWhlYWRlciBzdWJoZWFkZXI+PC9uYi1sYXlvdXQtaGVhZGVyPlxuICogYGBgXG4gKiBAc3RhY2tlZC1leGFtcGxlKFN1YmhlYWRlciwgbGF5b3V0L2xheW91dC1zaWRlYmFyLXN1YmhlYWRlci5jb21wb25lbnQpXG4gKiBOb3RlIHRoYXQgaW4gc3VjaCBjb25maWd1cmF0aW9uIHNpZGViYXIgc2hhZG93IGlzIHJlbW92ZWQgYW5kIGhlYWRlciBjYW5ub3QgYmUgbWFrZSBgZml4ZWRgLlxuICpcbiAqIFNhbWUgd2F5IHlvdSBjYW4gcHV0IGJvdGggYGZpeGVkYCBhbmQgYGNsaXBwZWRgIGhlYWRlcnMgYWRkaW5nIGNyZWF0aW5nIGEgc3ViLWhlYWRlciBmb3IgeW91ciBhcHA6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTdWJoZWFkZXIsIGxheW91dC9sYXlvdXQtc3ViaGVhZGVyLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogaGVhZGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBoZWFkZXItdGV4dC1jb2xvcjpcbiAqIGhlYWRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogaGVhZGVyLXRleHQtZm9udC1zaXplOlxuICogaGVhZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBoZWFkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGhlYWRlci1oZWlnaHQ6XG4gKiBoZWFkZXItcGFkZGluZzpcbiAqIGhlYWRlci1zaGFkb3c6XG4gKi9cbmNsYXNzIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihsYXlvdXQpIHtcbiAgICAgICAgdGhpcy5sYXlvdXQgPSBsYXlvdXQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2VzIHRoZSBoZWFkZXIgc3RpY2t5IHRvIHRoZSB0b3Agb2YgdGhlIG5iLWxheW91dC5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBmaXhlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5maXhlZFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYWNlcyBoZWFkZXIgb24gYSBzaWRlIG9mIHRoZSBzaWRlYmFyLCBhbmQgbm90IGFib3ZlLlxuICAgICAqIERpc2FibGVzIGZpeGVkIG1vZGUgZm9yIHRoaXMgaGVhZGVyIGFuZCByZW1vdmUgYSBzaGFkb3cgZnJvbSB0aGUgc2lkZWJhci5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBzdWJoZWFkZXIodmFsKSB7XG4gICAgICAgIHRoaXMuc3ViaGVhZGVyVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgdGhpcy5maXhlZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGF5b3V0LndpdGhTdWJoZWFkZXIgPSB0aGlzLnN1YmhlYWRlclZhbHVlO1xuICAgIH1cbn1cbk5iTGF5b3V0SGVhZGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1sYXlvdXQtaGVhZGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYXYgW2NsYXNzLmZpeGVkXT1cImZpeGVkVmFsdWVcIj5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8L25hdj5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkxheW91dEhlYWRlckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iTGF5b3V0Q29tcG9uZW50IH1cbl07XG5OYkxheW91dEhlYWRlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmaXhlZFZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5maXhlZCcsXSB9XSxcbiAgICBzdWJoZWFkZXJWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3ViaGVhZGVyJyxdIH1dLFxuICAgIGZpeGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdWJoZWFkZXI6IFt7IHR5cGU6IElucHV0IH1dXG59O1xuLyoqXG4gKiBQYWdlIGZvb3Rlci5cbiAqIExvY2F0ZWQgdW5kZXIgdGhlIG5iLWxheW91dCBjb250ZW50IChzcGVjaWZpY2FsbHksIHVuZGVyIHRoZSBjb2x1bW5zKS5cbiAqIENvdWxkIGJlIG1hZGUgYGZpeGVkYCwgYmVjb21pbmcgc3RpY2t5IHRvIHRoZSBib3R0b20gb2YgdGhlIHZpZXcgcG9ydCAod2luZG93KS5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogZm9vdGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBmb290ZXItdGV4dC1jb2xvcjpcbiAqIGZvb3Rlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogZm9vdGVyLXRleHQtZm9udC1zaXplOlxuICogZm9vdGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBmb290ZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGZvb3Rlci10ZXh0LWhpZ2hsaWdodC1jb2xvcjpcbiAqIGZvb3Rlci1oZWlnaHQ6XG4gKiBmb290ZXItcGFkZGluZzpcbiAqIGZvb3Rlci1kaXZpZGVyLWNvbG9yOlxuICogZm9vdGVyLWRpdmlkZXItc3R5bGU6XG4gKiBmb290ZXItZGl2aWRlci13aWR0aDpcbiAqIGZvb3Rlci1zaGFkb3c6XG4gKi9cbmNsYXNzIE5iTGF5b3V0Rm9vdGVyQ29tcG9uZW50IHtcbiAgICAvKipcbiAgICAgKiBNYWtlcyB0aGUgZm9vdGVyIHN0aWNreSB0byB0aGUgYm90dG9tIG9mIHRoZSB3aW5kb3cuXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICAgKi9cbiAgICBzZXQgZml4ZWQodmFsKSB7XG4gICAgICAgIHRoaXMuZml4ZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbn1cbk5iTGF5b3V0Rm9vdGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1sYXlvdXQtZm9vdGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYXYgW2NsYXNzLmZpeGVkXT1cImZpeGVkVmFsdWVcIj5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICA8L25hdj5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkxheW91dEZvb3RlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmaXhlZFZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5maXhlZCcsXSB9XSxcbiAgICBmaXhlZDogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IE5CX0xBWU9VVF9DT01QT05FTlRTID0gW1xuICAgIE5iTGF5b3V0Q29tcG9uZW50LFxuICAgIE5iTGF5b3V0Q29sdW1uQ29tcG9uZW50LFxuICAgIE5iTGF5b3V0Rm9vdGVyQ29tcG9uZW50LFxuICAgIE5iTGF5b3V0SGVhZGVyQ29tcG9uZW50LFxuXTtcbmNsYXNzIE5iTGF5b3V0TW9kdWxlIHtcbn1cbk5iTGF5b3V0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX0xBWU9VVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlcixcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfTEFZT1VUX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBpdGVtQ2xpY2skID0gbmV3IFN1YmplY3QoKTtcbmNvbnN0IGFkZEl0ZW1zJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuY29uc3QgbmF2aWdhdGVIb21lJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuY29uc3QgZ2V0U2VsZWN0ZWRJdGVtJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuY29uc3QgaXRlbVNlbGVjdCQgPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbmNvbnN0IGl0ZW1Ib3ZlciQgPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbmNvbnN0IHN1Ym1lbnVUb2dnbGUkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG5jb25zdCBjb2xsYXBzZUFsbCQgPSBuZXcgUmVwbGF5U3ViamVjdCgxKTtcbi8vIFRPRE86IGNoZWNrIGlmIHdlIG5lZWQgYm90aCBVUkwgYW5kIExJTktcbi8qKlxuICpcbiAqXG4gKiBNZW51IEl0ZW0gb3B0aW9ucyBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKE1lbnUgTGluayBQYXJhbWV0ZXJzLCBtZW51L21lbnUtbGluay1wYXJhbXMuY29tcG9uZW50KVxuICpcbiAqXG4gKi9cbmNsYXNzIE5iTWVudUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSXRlbSBpcyBzZWxlY3RlZCB3aGVuIHBhcnRseSBvciBmdWxseSBlcXVhbCB0byB0aGUgY3VycmVudCB1cmxcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGF0aE1hdGNoID0gJ2Z1bGwnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcmV0dXJucyBpdGVtIHBhcmVudHMgaW4gdG9wLWRvd24gb3JkZXJcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0UGFyZW50cyhpdGVtKSB7XG4gICAgICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICAgICAgbGV0IHBhcmVudCA9IGl0ZW0ucGFyZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBwYXJlbnRzLnVuc2hpZnQocGFyZW50KTtcbiAgICAgICAgICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmVudHM7XG4gICAgfVxuICAgIHN0YXRpYyBpc1BhcmVudChpdGVtLCBwb3NzaWJsZUNoaWxkKSB7XG4gICAgICAgIHJldHVybiBwb3NzaWJsZUNoaWxkLnBhcmVudFxuICAgICAgICAgICAgPyBwb3NzaWJsZUNoaWxkLnBhcmVudCA9PT0gaXRlbSB8fCB0aGlzLmlzUGFyZW50KGl0ZW0sIHBvc3NpYmxlQ2hpbGQucGFyZW50KVxuICAgICAgICAgICAgOiBmYWxzZTtcbiAgICB9XG59XG4vLyBUT0RPOiBtYXAgc2VsZWN0IGV2ZW50cyB0byByb3V0ZXIgY2hhbmdlIGV2ZW50c1xuLy8gVE9ETzogcmV2aWV3IHRoZSBpbnRlcmZhY2Vcbi8qKlxuICpcbiAqXG4gKiBNZW51IFNlcnZpY2UuIEFsbG93cyB5b3UgdG8gbGlzdGVuIHRvIG1lbnUgZXZlbnRzLCBvciB0byBpbnRlcmFjdCB3aXRoIGEgbWVudS5cbiAqIEBzdGFja2VkLWV4YW1wbGUoTWVudSBTZXJ2aWNlLCBtZW51L21lbnUtc2VydmljZS5jb21wb25lbnQpXG4gKlxuICpcbiAqL1xuY2xhc3MgTmJNZW51U2VydmljZSB7XG4gICAgLyoqXG4gICAgICogQWRkIGl0ZW1zIHRvIHRoZSBlbmQgb2YgdGhlIG1lbnUgaXRlbXMgbGlzdFxuICAgICAqIEBwYXJhbSB7TGlzdDxOYk1lbnVJdGVtPn0gaXRlbXNcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgYWRkSXRlbXMoaXRlbXMsIHRhZykge1xuICAgICAgICBhZGRJdGVtcyQubmV4dCh7IHRhZywgaXRlbXMgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxhcHNlcyBhbGwgbWVudSBpdGVtc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBjb2xsYXBzZUFsbCh0YWcpIHtcbiAgICAgICAgY29sbGFwc2VBbGwkLm5leHQoeyB0YWcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIHRoZSBob21lIG1lbnUgaXRlbVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBuYXZpZ2F0ZUhvbWUodGFnKSB7XG4gICAgICAgIG5hdmlnYXRlSG9tZSQubmV4dCh7IHRhZyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbS4gV29uJ3Qgc3Vic2NyaWJlIHRvIHRoZSBmdXR1cmUgZXZlbnRzLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKiBAcmV0dXJucyB7T2JzZXJ2YWJsZTx7dGFnOiBzdHJpbmc7IGl0ZW06IE5iTWVudUl0ZW19Pn1cbiAgICAgKi9cbiAgICBnZXRTZWxlY3RlZEl0ZW0odGFnKSB7XG4gICAgICAgIGNvbnN0IGxpc3RlbmVyID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgICAgICAgZ2V0U2VsZWN0ZWRJdGVtJC5uZXh0KHsgdGFnLCBsaXN0ZW5lciB9KTtcbiAgICAgICAgcmV0dXJuIGxpc3RlbmVyLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBvbkl0ZW1DbGljaygpIHtcbiAgICAgICAgcmV0dXJuIGl0ZW1DbGljayQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgb25JdGVtU2VsZWN0KCkge1xuICAgICAgICByZXR1cm4gaXRlbVNlbGVjdCQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgb25JdGVtSG92ZXIoKSB7XG4gICAgICAgIHJldHVybiBpdGVtSG92ZXIkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIG9uU3VibWVudVRvZ2dsZSgpIHtcbiAgICAgICAgcmV0dXJuIHN1Ym1lbnVUb2dnbGUkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxufVxuTmJNZW51U2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuY2xhc3MgTmJNZW51SW50ZXJuYWxTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihsb2NhdGlvbikge1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbG9jYXRpb247XG4gICAgfVxuICAgIHByZXBhcmVJdGVtcyhpdGVtcykge1xuICAgICAgICBjb25zdCBkZWZhdWx0SXRlbSA9IG5ldyBOYk1lbnVJdGVtKCk7XG4gICAgICAgIGl0ZW1zLmZvckVhY2goaSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5RGVmYXVsdHMoaSwgZGVmYXVsdEl0ZW0pO1xuICAgICAgICAgICAgdGhpcy5zZXRQYXJlbnQoaSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZWxlY3RGcm9tVXJsKGl0ZW1zLCB0YWcsIGNvbGxhcHNlT3RoZXIgPSBmYWxzZSkge1xuICAgICAgICBjb25zdCBzZWxlY3RlZEl0ZW0gPSB0aGlzLmZpbmRJdGVtQnlVcmwoaXRlbXMpO1xuICAgICAgICBpZiAoc2VsZWN0ZWRJdGVtKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdEl0ZW0oc2VsZWN0ZWRJdGVtLCBpdGVtcywgY29sbGFwc2VPdGhlciwgdGFnKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZWxlY3RJdGVtKGl0ZW0sIGl0ZW1zLCBjb2xsYXBzZU90aGVyID0gZmFsc2UsIHRhZykge1xuICAgICAgICBjb25zdCB1bnNlbGVjdGVkSXRlbXMgPSB0aGlzLnJlc2V0U2VsZWN0aW9uKGl0ZW1zKTtcbiAgICAgICAgY29uc3QgY29sbGFwc2VkSXRlbXMgPSBjb2xsYXBzZU90aGVyID8gdGhpcy5jb2xsYXBzZUl0ZW1zKGl0ZW1zKSA6IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IHBhcmVudCBvZiBOYk1lbnVJdGVtLmdldFBhcmVudHMoaXRlbSkpIHtcbiAgICAgICAgICAgIHBhcmVudC5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgICAgICAvLyBlbWl0IGV2ZW50IG9ubHkgZm9yIGl0ZW1zIHRoYXQgd2VyZW4ndCBzZWxlY3RlZCBiZWZvcmUgKCd1bnNlbGVjdGVkSXRlbXMnIGNvbnRhaW5zIGl0ZW1zIHRoYXQgd2VyZSBzZWxlY3RlZClcbiAgICAgICAgICAgIGlmICghdW5zZWxlY3RlZEl0ZW1zLmluY2x1ZGVzKHBhcmVudCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1TZWxlY3QocGFyZW50LCB0YWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgd2FzTm90RXhwYW5kZWQgPSAhcGFyZW50LmV4cGFuZGVkO1xuICAgICAgICAgICAgcGFyZW50LmV4cGFuZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBjb2xsYXBzZWRJdGVtcy5pbmRleE9mKHBhcmVudCk7XG4gICAgICAgICAgICAvLyBlbWl0IGV2ZW50IG9ubHkgZm9yIGl0ZW1zIHRoYXQgd2VyZW4ndCBleHBhbmRlZCBiZWZvcmUuXG4gICAgICAgICAgICAvLyAnY29sbGFwc2VkSXRlbXMnIGNvbnRhaW5zIGl0ZW1zIHRoYXQgd2VyZSBleHBhbmRlZCwgc28gbm8gbmVlZCB0byBlbWl0IGV2ZW50LlxuICAgICAgICAgICAgLy8gaW4gY2FzZSAnY29sbGFwc2VPdGhlcicgaXMgZmFsc2UsICdjb2xsYXBzZWRJdGVtcycgd2lsbCBiZSBlbXB0eSxcbiAgICAgICAgICAgIC8vIHNvIGFsc28gY2hlY2sgaWYgaXRlbSBpc24ndCBleHBhbmRlZCBhbHJlYWR5ICgnd2FzTm90RXhwYW5kZWQnKS5cbiAgICAgICAgICAgIGlmIChpID09PSAtMSAmJiB3YXNOb3RFeHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3VibWVudVRvZ2dsZShwYXJlbnQsIHRhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb2xsYXBzZWRJdGVtcy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaXRlbS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIC8vIGVtaXQgZXZlbnQgb25seSBmb3IgaXRlbXMgdGhhdCB3ZXJlbid0IHNlbGVjdGVkIGJlZm9yZSAoJ3Vuc2VsZWN0ZWRJdGVtcycgY29udGFpbnMgaXRlbXMgdGhhdCB3ZXJlIHNlbGVjdGVkKVxuICAgICAgICBpZiAoIXVuc2VsZWN0ZWRJdGVtcy5pbmNsdWRlcyhpdGVtKSkge1xuICAgICAgICAgICAgdGhpcy5pdGVtU2VsZWN0KGl0ZW0sIHRhZyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtYWluaW5nIGl0ZW1zIHdoaWNoIHdhc24ndCBleHBhbmRlZCBiYWNrIGFmdGVyIGV4cGFuZGluZyBhbGwgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW1zXG4gICAgICAgIGZvciAoY29uc3QgY29sbGFwc2VkSXRlbSBvZiBjb2xsYXBzZWRJdGVtcykge1xuICAgICAgICAgICAgdGhpcy5zdWJtZW51VG9nZ2xlKGNvbGxhcHNlZEl0ZW0sIHRhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29sbGFwc2VBbGwoaXRlbXMsIHRhZywgZXhjZXB0KSB7XG4gICAgICAgIGNvbnN0IGNvbGxhcHNlZEl0ZW1zID0gdGhpcy5jb2xsYXBzZUl0ZW1zKGl0ZW1zLCBleGNlcHQpO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgY29sbGFwc2VkSXRlbXMpIHtcbiAgICAgICAgICAgIHRoaXMuc3VibWVudVRvZ2dsZShpdGVtLCB0YWcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uQWRkSXRlbSgpIHtcbiAgICAgICAgcmV0dXJuIGFkZEl0ZW1zJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICBvbk5hdmlnYXRlSG9tZSgpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRlSG9tZSQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgb25Db2xsYXBzZUFsbCgpIHtcbiAgICAgICAgcmV0dXJuIGNvbGxhcHNlQWxsJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICBvbkdldFNlbGVjdGVkSXRlbSgpIHtcbiAgICAgICAgcmV0dXJuIGdldFNlbGVjdGVkSXRlbSQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgaXRlbUhvdmVyKGl0ZW0sIHRhZykge1xuICAgICAgICBpdGVtSG92ZXIkLm5leHQoeyB0YWcsIGl0ZW0gfSk7XG4gICAgfVxuICAgIHN1Ym1lbnVUb2dnbGUoaXRlbSwgdGFnKSB7XG4gICAgICAgIHN1Ym1lbnVUb2dnbGUkLm5leHQoeyB0YWcsIGl0ZW0gfSk7XG4gICAgfVxuICAgIGl0ZW1TZWxlY3QoaXRlbSwgdGFnKSB7XG4gICAgICAgIGl0ZW1TZWxlY3QkLm5leHQoeyB0YWcsIGl0ZW0gfSk7XG4gICAgfVxuICAgIGl0ZW1DbGljayhpdGVtLCB0YWcpIHtcbiAgICAgICAgaXRlbUNsaWNrJC5uZXh0KHsgdGFnLCBpdGVtIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVbnNlbGVjdCBhbGwgZ2l2ZW4gaXRlbXMgZGVlcGx5LlxuICAgICAqIEBwYXJhbSBpdGVtcyBhcnJheSBvZiBpdGVtcyB0byB1bnNlbGVjdC5cbiAgICAgKiBAcmV0dXJucyBpdGVtcyB3aGljaCBzZWxlY3RlZCB2YWx1ZSB3YXMgY2hhbmdlZC5cbiAgICAgKi9cbiAgICByZXNldFNlbGVjdGlvbihpdGVtcykge1xuICAgICAgICBjb25zdCB1bnNlbGVjdGVkSXRlbXMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIHVuc2VsZWN0ZWRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaXRlbS5zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICB1bnNlbGVjdGVkSXRlbXMucHVzaCguLi50aGlzLnJlc2V0U2VsZWN0aW9uKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5zZWxlY3RlZEl0ZW1zO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2xsYXBzZSBhbGwgZ2l2ZW4gaXRlbXMgZGVlcGx5LlxuICAgICAqIEBwYXJhbSBpdGVtcyBhcnJheSBvZiBpdGVtcyB0byBjb2xsYXBzZS5cbiAgICAgKiBAcGFyYW0gZXhjZXB0IG1lbnUgaXRlbSB3aGljaCBzaG91bGRuJ3QgYmUgY29sbGFwc2VkLCBhbHNvIGRpc2FibGVzIGNvbGxhcHNpbmcgZm9yIHBhcmVudHMgb2YgdGhpcyBpdGVtLlxuICAgICAqIEByZXR1cm5zIGl0ZW1zIHdoaWNoIGV4cGFuZGVkIHZhbHVlIHdhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIGNvbGxhcHNlSXRlbXMoaXRlbXMsIGV4Y2VwdCkge1xuICAgICAgICBjb25zdCBjb2xsYXBzZWRJdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHtcbiAgICAgICAgICAgIGlmIChleGNlcHQgJiYgKGl0ZW0gPT09IGV4Y2VwdCB8fCBOYk1lbnVJdGVtLmlzUGFyZW50KGl0ZW0sIGV4Y2VwdCkpKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5leHBhbmRlZCkge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEl0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpdGVtLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoaXRlbS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbGxhcHNlZEl0ZW1zLnB1c2goLi4udGhpcy5jb2xsYXBzZUl0ZW1zKGl0ZW0uY2hpbGRyZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29sbGFwc2VkSXRlbXM7XG4gICAgfVxuICAgIGFwcGx5RGVmYXVsdHMoaXRlbSwgZGVmYXVsdEl0ZW0pIHtcbiAgICAgICAgY29uc3QgbWVudUl0ZW0gPSBPYmplY3QuYXNzaWduKHt9LCBpdGVtKTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbihpdGVtLCBkZWZhdWx0SXRlbSwgbWVudUl0ZW0pO1xuICAgICAgICBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGx5RGVmYXVsdHMoY2hpbGQsIGRlZmF1bHRJdGVtKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHNldFBhcmVudChpdGVtKSB7XG4gICAgICAgIGl0ZW0uY2hpbGRyZW4gJiYgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgIGNoaWxkLnBhcmVudCA9IGl0ZW07XG4gICAgICAgICAgICB0aGlzLnNldFBhcmVudChjaGlsZCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kIGRlZXBlc3QgaXRlbSB3aGljaCBsaW5rIG1hdGNoZXMgY3VycmVudCBVUkwgcGF0aC5cbiAgICAgKiBAcGFyYW0gaXRlbXMgYXJyYXkgb2YgaXRlbXMgdG8gc2VhcmNoIGluLlxuICAgICAqIEByZXR1cm5zIGZvdW5kIGl0ZW0gb2YgdW5kZWZpbmVkLlxuICAgICAqL1xuICAgIGZpbmRJdGVtQnlVcmwoaXRlbXMpIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkSXRlbTtcbiAgICAgICAgaXRlbXMuc29tZShpdGVtID0+IHtcbiAgICAgICAgICAgIGlmIChpdGVtLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRJdGVtID0gdGhpcy5maW5kSXRlbUJ5VXJsKGl0ZW0uY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZEl0ZW0gJiYgdGhpcy5pc1NlbGVjdGVkSW5VcmwoaXRlbSkpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEl0ZW0gPSBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkSXRlbTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzZWxlY3RlZEl0ZW07XG4gICAgfVxuICAgIGlzU2VsZWN0ZWRJblVybChpdGVtKSB7XG4gICAgICAgIGNvbnN0IGV4YWN0ID0gaXRlbS5wYXRoTWF0Y2ggPT09ICdmdWxsJztcbiAgICAgICAgY29uc3QgbGluayA9IGl0ZW0ubGluaztcbiAgICAgICAgY29uc3QgaXNTZWxlY3RlZEluUGF0aCA9IGV4YWN0XG4gICAgICAgICAgICA/IGlzVXJsUGF0aEVxdWFsKHRoaXMubG9jYXRpb24ucGF0aCgpLCBsaW5rKVxuICAgICAgICAgICAgOiBpc1VybFBhdGhDb250YWluKHRoaXMubG9jYXRpb24ucGF0aCgpLCBsaW5rKTtcbiAgICAgICAgaWYgKGlzU2VsZWN0ZWRJblBhdGggJiYgaXRlbS5mcmFnbWVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gZXhhY3RcbiAgICAgICAgICAgICAgICA/IGlzRnJhZ21lbnRFcXVhbCh0aGlzLmxvY2F0aW9uLnBhdGgodHJ1ZSksIGl0ZW0uZnJhZ21lbnQpXG4gICAgICAgICAgICAgICAgOiBpc0ZyYWdtZW50Q29udGFpbih0aGlzLmxvY2F0aW9uLnBhdGgodHJ1ZSksIGl0ZW0uZnJhZ21lbnQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc1NlbGVjdGVkSW5QYXRoO1xuICAgIH1cbn1cbk5iTWVudUludGVybmFsU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJNZW51SW50ZXJuYWxTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTG9jYXRpb24gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xudmFyIE5iVG9nZ2xlU3RhdGVzO1xuKGZ1bmN0aW9uIChOYlRvZ2dsZVN0YXRlcykge1xuICAgIE5iVG9nZ2xlU3RhdGVzW1wiRXhwYW5kZWRcIl0gPSBcImV4cGFuZGVkXCI7XG4gICAgTmJUb2dnbGVTdGF0ZXNbXCJDb2xsYXBzZWRcIl0gPSBcImNvbGxhcHNlZFwiO1xufSkoTmJUb2dnbGVTdGF0ZXMgfHwgKE5iVG9nZ2xlU3RhdGVzID0ge30pKTtcbmNsYXNzIE5iTWVudUl0ZW1Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKG1lbnVTZXJ2aWNlLCBkaXJlY3Rpb25TZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMubWVudVNlcnZpY2UgPSBtZW51U2VydmljZTtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25TZXJ2aWNlID0gZGlyZWN0aW9uU2VydmljZTtcbiAgICAgICAgdGhpcy5tZW51SXRlbSA9IG51bGw7XG4gICAgICAgIHRoaXMuaG92ZXJJdGVtID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLnRvZ2dsZVN1Yk1lbnUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc2VsZWN0SXRlbSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5pdGVtQ2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICBuZ0RvQ2hlY2soKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB0aGlzLm1lbnVJdGVtLmV4cGFuZGVkID8gTmJUb2dnbGVTdGF0ZXMuRXhwYW5kZWQgOiBOYlRvZ2dsZVN0YXRlcy5Db2xsYXBzZWQ7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5tZW51U2VydmljZS5vblN1Ym1lbnVUb2dnbGUoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh7IGl0ZW0gfSkgPT4gaXRlbSA9PT0gdGhpcy5tZW51SXRlbSksIG1hcCgoeyBpdGVtIH0pID0+IGl0ZW0uZXhwYW5kZWQpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGlzRXhwYW5kZWQgPT4gdGhpcy50b2dnbGVTdGF0ZSA9IGlzRXhwYW5kZWQgPyBOYlRvZ2dsZVN0YXRlcy5FeHBhbmRlZCA6IE5iVG9nZ2xlU3RhdGVzLkNvbGxhcHNlZCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICBvblRvZ2dsZVN1Yk1lbnUoaXRlbSkge1xuICAgICAgICB0aGlzLnRvZ2dsZVN1Yk1lbnUuZW1pdChpdGVtKTtcbiAgICB9XG4gICAgb25Ib3Zlckl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLmhvdmVySXRlbS5lbWl0KGl0ZW0pO1xuICAgIH1cbiAgICBvblNlbGVjdEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLnNlbGVjdEl0ZW0uZW1pdChpdGVtKTtcbiAgICB9XG4gICAgb25JdGVtQ2xpY2soaXRlbSkge1xuICAgICAgICB0aGlzLml0ZW1DbGljay5lbWl0KGl0ZW0pO1xuICAgIH1cbiAgICBnZXRFeHBhbmRTdGF0ZUljb24oKSB7XG4gICAgICAgIGlmICh0aGlzLm1lbnVJdGVtLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICByZXR1cm4gJ2NoZXZyb24tZG93bi1vdXRsaW5lJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmlzTHRyKClcbiAgICAgICAgICAgID8gJ2NoZXZyb24tbGVmdC1vdXRsaW5lJ1xuICAgICAgICAgICAgOiAnY2hldnJvbi1yaWdodC1vdXRsaW5lJztcbiAgICB9XG59XG5OYk1lbnVJdGVtQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJNZW51SXRlbV0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxzcGFuICpuZ0lmPVxcXCJtZW51SXRlbS5ncm91cFxcXCI+XFxuICA8bmItaWNvbiBjbGFzcz1cXFwibWVudS1pY29uXFxcIiBbY29uZmlnXT1cXFwibWVudUl0ZW0uaWNvblxcXCIgKm5nSWY9XFxcIm1lbnVJdGVtLmljb25cXFwiPjwvbmItaWNvbj5cXG4gIHt7IG1lbnVJdGVtLnRpdGxlIH19XFxuPC9zcGFuPlxcbjxhICpuZ0lmPVxcXCJtZW51SXRlbS5saW5rICYmICFtZW51SXRlbS51cmwgJiYgIW1lbnVJdGVtLmNoaWxkcmVuICYmICFtZW51SXRlbS5ncm91cFxcXCJcXG4gICBbcm91dGVyTGlua109XFxcIm1lbnVJdGVtLmxpbmtcXFwiXFxuICAgW3F1ZXJ5UGFyYW1zXT1cXFwibWVudUl0ZW0ucXVlcnlQYXJhbXNcXFwiXFxuICAgW2ZyYWdtZW50XT1cXFwibWVudUl0ZW0uZnJhZ21lbnRcXFwiXFxuICAgW3F1ZXJ5UGFyYW1zSGFuZGxpbmddPVxcXCJtZW51SXRlbS5xdWVyeVBhcmFtc0hhbmRsaW5nXFxcIlxcbiAgIFtwcmVzZXJ2ZUZyYWdtZW50XT1cXFwibWVudUl0ZW0ucHJlc2VydmVGcmFnbWVudFxcXCJcXG4gICBbc2tpcExvY2F0aW9uQ2hhbmdlXT1cXFwibWVudUl0ZW0uc2tpcExvY2F0aW9uQ2hhbmdlXFxcIlxcbiAgIFthdHRyLnRhcmdldF09XFxcIm1lbnVJdGVtLnRhcmdldFxcXCJcXG4gICBbYXR0ci50aXRsZV09XFxcIm1lbnVJdGVtLnRpdGxlXFxcIlxcbiAgIFtjbGFzcy5hY3RpdmVdPVxcXCJtZW51SXRlbS5zZWxlY3RlZFxcXCJcXG4gICAobW91c2VlbnRlcik9XFxcIm9uSG92ZXJJdGVtKG1lbnVJdGVtKVxcXCJcXG4gICAoY2xpY2spPVxcXCJvbkl0ZW1DbGljayhtZW51SXRlbSk7XFxcIj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJtZW51LWljb25cXFwiIFtjb25maWddPVxcXCJtZW51SXRlbS5pY29uXFxcIiAqbmdJZj1cXFwibWVudUl0ZW0uaWNvblxcXCI+PC9uYi1pY29uPlxcbiAgPHNwYW4gY2xhc3M9XFxcIm1lbnUtdGl0bGVcXFwiPnt7IG1lbnVJdGVtLnRpdGxlIH19PC9zcGFuPlxcbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiYmFkZ2VcXFwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cXFwiYmFkZ2VUZW1wbGF0ZVxcXCI+PC9uZy1jb250YWluZXI+XFxuPC9hPlxcbjxhICpuZ0lmPVxcXCJtZW51SXRlbS51cmwgJiYgIW1lbnVJdGVtLmNoaWxkcmVuICYmICFtZW51SXRlbS5saW5rICYmICFtZW51SXRlbS5ncm91cFxcXCJcXG4gICBbYXR0ci5ocmVmXT1cXFwibWVudUl0ZW0udXJsXFxcIlxcbiAgIFthdHRyLnRhcmdldF09XFxcIm1lbnVJdGVtLnRhcmdldFxcXCJcXG4gICBbYXR0ci50aXRsZV09XFxcIm1lbnVJdGVtLnRpdGxlXFxcIlxcbiAgIFtjbGFzcy5hY3RpdmVdPVxcXCJtZW51SXRlbS5zZWxlY3RlZFxcXCJcXG4gICAobW91c2VlbnRlcik9XFxcIm9uSG92ZXJJdGVtKG1lbnVJdGVtKVxcXCJcXG4gICAoY2xpY2spPVxcXCJvblNlbGVjdEl0ZW0obWVudUl0ZW0pXFxcIj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJtZW51LWljb25cXFwiIFtjb25maWddPVxcXCJtZW51SXRlbS5pY29uXFxcIiAqbmdJZj1cXFwibWVudUl0ZW0uaWNvblxcXCI+PC9uYi1pY29uPlxcbiAgPHNwYW4gY2xhc3M9XFxcIm1lbnUtdGl0bGVcXFwiPnt7IG1lbnVJdGVtLnRpdGxlIH19PC9zcGFuPlxcbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiYmFkZ2VcXFwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cXFwiYmFkZ2VUZW1wbGF0ZVxcXCI+PC9uZy1jb250YWluZXI+XFxuPC9hPlxcbjxhICpuZ0lmPVxcXCIhbWVudUl0ZW0uY2hpbGRyZW4gJiYgIW1lbnVJdGVtLmxpbmsgJiYgIW1lbnVJdGVtLnVybCAmJiAhbWVudUl0ZW0uZ3JvdXBcXFwiXFxuICAgW2F0dHIudGFyZ2V0XT1cXFwibWVudUl0ZW0udGFyZ2V0XFxcIlxcbiAgIFthdHRyLnRpdGxlXT1cXFwibWVudUl0ZW0udGl0bGVcXFwiXFxuICAgW2NsYXNzLmFjdGl2ZV09XFxcIm1lbnVJdGVtLnNlbGVjdGVkXFxcIlxcbiAgIChtb3VzZWVudGVyKT1cXFwib25Ib3Zlckl0ZW0obWVudUl0ZW0pXFxcIlxcbiAgIChjbGljayk9XFxcIiRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyBvbkl0ZW1DbGljayhtZW51SXRlbSk7XFxcIj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJtZW51LWljb25cXFwiIFtjb25maWddPVxcXCJtZW51SXRlbS5pY29uXFxcIiAqbmdJZj1cXFwibWVudUl0ZW0uaWNvblxcXCI+PC9uYi1pY29uPlxcbiAgPHNwYW4gY2xhc3M9XFxcIm1lbnUtdGl0bGVcXFwiPnt7IG1lbnVJdGVtLnRpdGxlIH19PC9zcGFuPlxcbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiYmFkZ2VcXFwiIFtuZ1RlbXBsYXRlT3V0bGV0XT1cXFwiYmFkZ2VUZW1wbGF0ZVxcXCI+PC9uZy1jb250YWluZXI+XFxuPC9hPlxcbjxhICpuZ0lmPVxcXCJtZW51SXRlbS5jaGlsZHJlblxcXCJcXG4gICAoY2xpY2spPVxcXCIkZXZlbnQucHJldmVudERlZmF1bHQoKTsgb25Ub2dnbGVTdWJNZW51KG1lbnVJdGVtKTtcXFwiXFxuICAgW2F0dHIudGFyZ2V0XT1cXFwibWVudUl0ZW0udGFyZ2V0XFxcIlxcbiAgIFthdHRyLnRpdGxlXT1cXFwibWVudUl0ZW0udGl0bGVcXFwiXFxuICAgW2NsYXNzLmFjdGl2ZV09XFxcIm1lbnVJdGVtLnNlbGVjdGVkXFxcIlxcbiAgIChtb3VzZWVudGVyKT1cXFwib25Ib3Zlckl0ZW0obWVudUl0ZW0pXFxcIlxcbiAgIGhyZWY9XFxcIiNcXFwiPlxcbiAgPG5iLWljb24gY2xhc3M9XFxcIm1lbnUtaWNvblxcXCIgW2NvbmZpZ109XFxcIm1lbnVJdGVtLmljb25cXFwiICpuZ0lmPVxcXCJtZW51SXRlbS5pY29uXFxcIj48L25iLWljb24+XFxuICA8c3BhbiBjbGFzcz1cXFwibWVudS10aXRsZVxcXCI+e3sgbWVudUl0ZW0udGl0bGUgfX08L3NwYW4+XFxuICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJiYWRnZVxcXCIgW25nVGVtcGxhdGVPdXRsZXRdPVxcXCJiYWRnZVRlbXBsYXRlXFxcIj48L25nLWNvbnRhaW5lcj5cXG4gIDxuYi1pY29uIGNsYXNzPVxcXCJleHBhbmQtc3RhdGVcXFwiIFtpY29uXT1cXFwiZ2V0RXhwYW5kU3RhdGVJY29uKClcXFwiIHBhY2s9XFxcIm5lYnVsYXItZXNzZW50aWFsc1xcXCI+PC9uYi1pY29uPlxcbjwvYT5cXG48dWwgKm5nSWY9XFxcIm1lbnVJdGVtLmNoaWxkcmVuXFxcIlxcbiAgICBbY2xhc3MuY29sbGFwc2VkXT1cXFwiIShtZW51SXRlbS5jaGlsZHJlbiAmJiBtZW51SXRlbS5leHBhbmRlZClcXFwiXFxuICAgIFtjbGFzcy5leHBhbmRlZF09XFxcIm1lbnVJdGVtLmV4cGFuZGVkXFxcIlxcbiAgICBbQHRvZ2dsZV09XFxcInRvZ2dsZVN0YXRlXFxcIlxcbiAgICBjbGFzcz1cXFwibWVudS1pdGVtc1xcXCI+XFxuICA8bmctY29udGFpbmVyICpuZ0Zvcj1cXFwibGV0IGl0ZW0gb2YgbWVudUl0ZW0uY2hpbGRyZW5cXFwiPlxcbiAgICA8bGkgbmJNZW51SXRlbSAqbmdJZj1cXFwiIWl0ZW0uaGlkZGVuXFxcIlxcbiAgICAgICAgW21lbnVJdGVtXT1cXFwiaXRlbVxcXCJcXG4gICAgICAgIFtiYWRnZV09XFxcIml0ZW0uYmFkZ2VcXFwiXFxuICAgICAgICBbY2xhc3MubWVudS1ncm91cF09XFxcIml0ZW0uZ3JvdXBcXFwiXFxuICAgICAgICAoaG92ZXJJdGVtKT1cXFwib25Ib3Zlckl0ZW0oJGV2ZW50KVxcXCJcXG4gICAgICAgICh0b2dnbGVTdWJNZW51KT1cXFwib25Ub2dnbGVTdWJNZW51KCRldmVudClcXFwiXFxuICAgICAgICAoc2VsZWN0SXRlbSk9XFxcIm9uU2VsZWN0SXRlbSgkZXZlbnQpXFxcIlxcbiAgICAgICAgKGl0ZW1DbGljayk9XFxcIm9uSXRlbUNsaWNrKCRldmVudClcXFwiXFxuICAgICAgICBjbGFzcz1cXFwibWVudS1pdGVtXFxcIj5cXG4gICAgPC9saT5cXG4gIDwvbmctY29udGFpbmVyPlxcbjwvdWw+XFxuXFxuPG5nLXRlbXBsYXRlICNiYWRnZVRlbXBsYXRlPlxcbiAgPG5iLWJhZGdlIFt0ZXh0XT1cXFwiYmFkZ2UudGV4dFxcXCIgW2RvdE1vZGVdPVxcXCJiYWRnZS5kb3RNb2RlXFxcIiBbc3RhdHVzXT1cXFwiYmFkZ2Uuc3RhdHVzXFxcIj5cXG4gIDwvbmItYmFkZ2U+XFxuPC9uZy10ZW1wbGF0ZT5cXG5cIixcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIoJ3RvZ2dsZScsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlKE5iVG9nZ2xlU3RhdGVzLkNvbGxhcHNlZCwgc3R5bGUoeyBoZWlnaHQ6ICcwJywgbWFyZ2luOiAnMCcgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUoTmJUb2dnbGVTdGF0ZXMuRXhwYW5kZWQsIHN0eWxlKHsgaGVpZ2h0OiAnKicgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbihgJHtOYlRvZ2dsZVN0YXRlcy5Db2xsYXBzZWR9IDw9PiAke05iVG9nZ2xlU3RhdGVzLkV4cGFuZGVkfWAsIGFuaW1hdGUoMzAwKSksXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJNZW51SXRlbUNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iTWVudVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSB9XG5dO1xuTmJNZW51SXRlbUNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBtZW51SXRlbTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGhvdmVySXRlbTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHRvZ2dsZVN1Yk1lbnU6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBzZWxlY3RJdGVtOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgaXRlbUNsaWNrOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG4vKipcbiAqIFZlcnRpY2FsIG1lbnUgY29tcG9uZW50LlxuICpcbiAqIEFjY2VwdHMgYSBsaXN0IG9mIG1lbnUgaXRlbXMgYW5kIHJlbmRlcnMgdGhlbSBhY2NvcmRpbmdseS4gU3VwcG9ydHMgbXVsdGktbGV2ZWwgbWVudXMuXG4gKlxuICogQmFzaWMgZXhhbXBsZVxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgbWVudS9tZW51LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgYGB0c1xuICogLy8gLi4uXG4gKiBpdGVtczogTmJNZW51SXRlbVtdID0gW1xuICogIHtcbiAqICAgIHRpdGxlOiBob21lLFxuICogICAgbGluazogJy8nXG4gKiAgfSxcbiAqICB7XG4gKiAgICB0aXRsZTogZGFzaGJvYXJkLFxuICogICAgbGluazogJ2Rhc2hib2FyZCdcbiAqICB9XG4gKiBdO1xuICogLy8gLi4uXG4gKiA8bmItbWVudSBbaXRlbXNdPVwiaXRlbXNcIj48L25iLW1lbnU+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iTWVudU1vZHVsZS5mb3JSb290KClgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJNZW51TW9kdWxlLmZvclJvb3QoKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHsgfVxuICogYGBgXG4gKiBhbmQgYE5iTWVudU1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZSB3aGVyZSB0aGUgY29tcG9uZW50IHNob3VsZCBiZSBzaG93bjpcbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJNZW51TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBUd28tbGV2ZWwgbWVudSBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKFR3byBMZXZlbHMsIG1lbnUvbWVudS1jaGlsZHJlbi5jb21wb25lbnQpXG4gKlxuICpcbiAqIEF1dG9jb2xsYXBzZSBtZW51IGV4YW1wbGVcbiAqIEBzdGFja2VkLWV4YW1wbGUoQXV0b2NvbGxhcHNlIE1lbnUsIG1lbnUvbWVudS1hdXRvY29sbGFwc2UuY29tcG9uZW50KVxuICpcbiAqIE1lbnUgYmFkZ2VcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWVudSBpdGVtIGJhZGdlLCBtZW51L21lbnUtYmFkZ2UuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBtZW51LWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LXRleHQtY29sb3I6XG4gKiBtZW51LXRleHQtZm9udC1mYW1pbHk6XG4gKiBtZW51LXRleHQtZm9udC1zaXplOlxuICogbWVudS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogbWVudS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogbWVudS1ncm91cC10ZXh0LWNvbG9yOlxuICogbWVudS1pdGVtLWJvcmRlci1yYWRpdXM6XG4gKiBtZW51LWl0ZW0tcGFkZGluZzpcbiAqIG1lbnUtaXRlbS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogbWVudS1pdGVtLWhvdmVyLWN1cnNvcjpcbiAqIG1lbnUtaXRlbS1ob3Zlci10ZXh0LWNvbG9yOlxuICogbWVudS1pdGVtLWljb24taG92ZXItY29sb3I6XG4gKiBtZW51LWl0ZW0tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LWl0ZW0tYWN0aXZlLXRleHQtY29sb3I6XG4gKiBtZW51LWl0ZW0taWNvbi1hY3RpdmUtY29sb3I6XG4gKiBtZW51LWl0ZW0taWNvbi1jb2xvcjpcbiAqIG1lbnUtaXRlbS1pY29uLW1hcmdpbjpcbiAqIG1lbnUtaXRlbS1pY29uLXdpZHRoOlxuICogbWVudS1pdGVtLWRpdmlkZXItY29sb3I6XG4gKiBtZW51LWl0ZW0tZGl2aWRlci1zdHlsZTpcbiAqIG1lbnUtaXRlbS1kaXZpZGVyLXdpZHRoOlxuICogbWVudS1zdWJtZW51LWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtdGV4dC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1tYXJnaW46XG4gKiBtZW51LXN1Ym1lbnUtcGFkZGluZzpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWJvcmRlci1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWJvcmRlci1zdHlsZTpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWJvcmRlci13aWR0aDpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWJvcmRlci1yYWRpdXM6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1wYWRkaW5nOlxuICogbWVudS1zdWJtZW51LWl0ZW0taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWhvdmVyLXRleHQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1pY29uLWhvdmVyLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYWN0aXZlLXRleHQtY29sb3I6XG4gKiBtZW51LXN1Ym1lbnUtaXRlbS1pY29uLWFjdGl2ZS1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWFjdGl2ZS1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0tYWN0aXZlLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIG1lbnUtc3VibWVudS1pdGVtLWFjdGl2ZS1ob3Zlci10ZXh0LWNvbG9yOlxuICogbWVudS1zdWJtZW51LWl0ZW0taWNvbi1hY3RpdmUtaG92ZXItY29sb3I6XG4gKi9cbmNsYXNzIE5iTWVudUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iod2luZG93LCBwbGF0Zm9ybUlkLCBtZW51SW50ZXJuYWxTZXJ2aWNlLCByb3V0ZXIpIHtcbiAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZSA9IG1lbnVJbnRlcm5hbFNlcnZpY2U7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLl9hdXRvQ29sbGFwc2UgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxhcHNlIGFsbCBvcGVuZWQgc3VibWVudXMgb24gdGhlIHRvZ2dsZSBldmVudFxuICAgICAqIERlZmF1bHQgdmFsdWUgaXMgXCJmYWxzZVwiXG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIGdldCBhdXRvQ29sbGFwc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9hdXRvQ29sbGFwc2U7XG4gICAgfVxuICAgIHNldCBhdXRvQ29sbGFwc2UodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYXV0b0NvbGxhcHNlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5wcmVwYXJlSXRlbXModGhpcy5pdGVtcyk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZVxuICAgICAgICAgICAgLm9uQWRkSXRlbSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKGRhdGEpID0+IHRoaXMuY29tcGFyZVRhZyhkYXRhLnRhZykpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGRhdGEgPT4gdGhpcy5vbkFkZEl0ZW0oZGF0YSkpO1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2VcbiAgICAgICAgICAgIC5vbk5hdmlnYXRlSG9tZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKGRhdGEpID0+IHRoaXMuY29tcGFyZVRhZyhkYXRhLnRhZykpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMubmF2aWdhdGVIb21lKCkpO1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2VcbiAgICAgICAgICAgIC5vbkdldFNlbGVjdGVkSXRlbSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKGRhdGEpID0+IHRoaXMuY29tcGFyZVRhZyhkYXRhLnRhZykpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChkYXRhKSA9PiB7XG4gICAgICAgICAgICBkYXRhLmxpc3RlbmVyLm5leHQoeyB0YWc6IHRoaXMudGFnLCBpdGVtOiB0aGlzLmdldFNlbGVjdGVkSXRlbSh0aGlzLml0ZW1zKSB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZVxuICAgICAgICAgICAgLm9uQ29sbGFwc2VBbGwoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChkYXRhKSA9PiB0aGlzLmNvbXBhcmVUYWcoZGF0YS50YWcpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNvbGxhcHNlQWxsKCkpO1xuICAgICAgICB0aGlzLnJvdXRlci5ldmVudHNcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcihldmVudCA9PiBldmVudCBpbnN0YW5jZW9mIE5hdmlnYXRpb25FbmQpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5zZWxlY3RGcm9tVXJsKHRoaXMuaXRlbXMsIHRoaXMudGFnLCB0aGlzLmF1dG9Db2xsYXBzZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnNlbGVjdEZyb21VcmwodGhpcy5pdGVtcywgdGhpcy50YWcsIHRoaXMuYXV0b0NvbGxhcHNlKSk7XG4gICAgfVxuICAgIG9uQWRkSXRlbShkYXRhKSB7XG4gICAgICAgIHRoaXMuaXRlbXMucHVzaCguLi5kYXRhLml0ZW1zKTtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnByZXBhcmVJdGVtcyh0aGlzLml0ZW1zKTtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnNlbGVjdEZyb21VcmwodGhpcy5pdGVtcywgdGhpcy50YWcsIHRoaXMuYXV0b0NvbGxhcHNlKTtcbiAgICB9XG4gICAgb25Ib3Zlckl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2UuaXRlbUhvdmVyKGl0ZW0sIHRoaXMudGFnKTtcbiAgICB9XG4gICAgb25Ub2dnbGVTdWJNZW51KGl0ZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0b0NvbGxhcHNlKSB7XG4gICAgICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2UuY29sbGFwc2VBbGwodGhpcy5pdGVtcywgdGhpcy50YWcsIGl0ZW0pO1xuICAgICAgICB9XG4gICAgICAgIGl0ZW0uZXhwYW5kZWQgPSAhaXRlbS5leHBhbmRlZDtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLnN1Ym1lbnVUb2dnbGUoaXRlbSwgdGhpcy50YWcpO1xuICAgIH1cbiAgICAvLyBUT0RPOiBpcyBub3QgZmlyZWQgb24gcGFnZSByZWxvYWRcbiAgICBvblNlbGVjdEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLm1lbnVJbnRlcm5hbFNlcnZpY2Uuc2VsZWN0SXRlbShpdGVtLCB0aGlzLml0ZW1zLCB0aGlzLmF1dG9Db2xsYXBzZSwgdGhpcy50YWcpO1xuICAgIH1cbiAgICBvbkl0ZW1DbGljayhpdGVtKSB7XG4gICAgICAgIHRoaXMubWVudUludGVybmFsU2VydmljZS5pdGVtQ2xpY2soaXRlbSwgdGhpcy50YWcpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgbmF2aWdhdGVIb21lKCkge1xuICAgICAgICBjb25zdCBob21lSXRlbSA9IHRoaXMuZ2V0SG9tZUl0ZW0odGhpcy5pdGVtcyk7XG4gICAgICAgIGlmIChob21lSXRlbSkge1xuICAgICAgICAgICAgaWYgKGhvbWVJdGVtLmxpbmspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBleHRyYXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zOiBob21lSXRlbS5xdWVyeVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNIYW5kbGluZzogaG9tZUl0ZW0ucXVlcnlQYXJhbXNIYW5kbGluZyxcbiAgICAgICAgICAgICAgICAgICAgZnJhZ21lbnQ6IGhvbWVJdGVtLmZyYWdtZW50LFxuICAgICAgICAgICAgICAgICAgICBwcmVzZXJ2ZUZyYWdtZW50OiBob21lSXRlbS5wcmVzZXJ2ZUZyYWdtZW50LFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2hvbWVJdGVtLmxpbmtdLCBleHRyYXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGhvbWVJdGVtLnVybCAmJiBpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy53aW5kb3cubG9jYXRpb24uaHJlZiA9IGhvbWVJdGVtLnVybDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb2xsYXBzZUFsbCgpIHtcbiAgICAgICAgdGhpcy5tZW51SW50ZXJuYWxTZXJ2aWNlLmNvbGxhcHNlQWxsKHRoaXMuaXRlbXMsIHRoaXMudGFnKTtcbiAgICB9XG4gICAgZ2V0SG9tZUl0ZW0oaXRlbXMpIHtcbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5ob21lKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBob21lSXRlbSA9IGl0ZW0uY2hpbGRyZW4gJiYgdGhpcy5nZXRIb21lSXRlbShpdGVtLmNoaWxkcmVuKTtcbiAgICAgICAgICAgIGlmIChob21lSXRlbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBob21lSXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBjb21wYXJlVGFnKHRhZykge1xuICAgICAgICByZXR1cm4gIXRhZyB8fCB0YWcgPT09IHRoaXMudGFnO1xuICAgIH1cbiAgICBnZXRTZWxlY3RlZEl0ZW0oaXRlbXMpIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gbnVsbDtcbiAgICAgICAgaXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZCA9IGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXRlbS5zZWxlY3RlZCAmJiBpdGVtLmNoaWxkcmVuICYmIGl0ZW0uY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZEl0ZW0oaXRlbS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gc2VsZWN0ZWQ7XG4gICAgfVxufVxuTmJNZW51Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1tZW51JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDx1bCBjbGFzcz1cIm1lbnUtaXRlbXNcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGl0ZW0gb2YgaXRlbXNcIj5cbiAgICAgICAgPGxpIG5iTWVudUl0ZW0gKm5nSWY9XCIhaXRlbS5oaWRkZW5cIlxuICAgICAgICAgICAgW21lbnVJdGVtXT1cIml0ZW1cIlxuICAgICAgICAgICAgW2JhZGdlXT1cIml0ZW0uYmFkZ2VcIlxuICAgICAgICAgICAgW2NsYXNzLm1lbnUtZ3JvdXBdPVwiaXRlbS5ncm91cFwiXG4gICAgICAgICAgICAoaG92ZXJJdGVtKT1cIm9uSG92ZXJJdGVtKCRldmVudClcIlxuICAgICAgICAgICAgKHRvZ2dsZVN1Yk1lbnUpPVwib25Ub2dnbGVTdWJNZW51KCRldmVudClcIlxuICAgICAgICAgICAgKHNlbGVjdEl0ZW0pPVwib25TZWxlY3RJdGVtKCRldmVudClcIlxuICAgICAgICAgICAgKGl0ZW1DbGljayk9XCJvbkl0ZW1DbGljaygkZXZlbnQpXCJcbiAgICAgICAgICAgIGNsYXNzPVwibWVudS1pdGVtXCI+XG4gICAgICAgIDwvbGk+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L3VsPlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgOjpuZy1kZWVwe2Rpc3BsYXk6YmxvY2t9Omhvc3QgOjpuZy1kZWVwIC5tZW51LWl0ZW1zLDpob3N0IDo6bmctZGVlcCAubWVudS1pdGVtPi5tZW51LWl0ZW1ze2xpc3Qtc3R5bGUtdHlwZTpub25lO292ZXJmbG93OmhpZGRlbn06aG9zdCA6Om5nLWRlZXAgLm1lbnUtaXRlbSBhe2Rpc3BsYXk6ZmxleDt0ZXh0LWRlY29yYXRpb246bm9uZTthbGlnbi1pdGVtczpjZW50ZXJ9Omhvc3QgOjpuZy1kZWVwIC5tZW51LWl0ZW0gYSAubWVudS10aXRsZXtmbGV4OjEgMCBhdXRvfVtkaXI9cnRsXSA6aG9zdCA6Om5nLWRlZXAgLm1lbnUtaXRlbSBhIC5tZW51LXRpdGxle3RleHQtYWxpZ246cmlnaHR9Omhvc3QgOjpuZy1kZWVwIC5tZW51LWl0ZW0gbmItYmFkZ2V7cG9zaXRpb246c3RhdGljfTpob3N0IDo6bmctZGVlcCAubWVudS1ncm91cCBzcGFue2Rpc3BsYXk6ZmxleH1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJNZW51Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9XSU5ET1csXSB9XSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtQTEFURk9STV9JRCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYk1lbnVJbnRlcm5hbFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFJvdXRlciB9XG5dO1xuTmJNZW51Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRhZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXRlbXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGF1dG9Db2xsYXBzZTogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQmFkZ2UgaXMgYSBzaW1wbGUgbGFiZWxpbmcgY29tcG9uZW50LlxuICogSXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gdG8gYW55IGNvbnRlbnQgb3IgaGlnaGxpZ2h0IHVucmVhZCBpdGVtcy5cbiAqXG4gKiBFbGVtZW50IGlzIGFic29sdXRlIHBvc2l0aW9uZWQsIHNvIHBhcmVudCBzaG91bGQgYmVcbiAqIFtwb3NpdGlvbmVkIGVsZW1lbnRdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0NTUy9wb3NpdGlvbikuXG4gKiBJdCBtZWFucyBwYXJlbnQgYHBvc2l0aW9uYCBzaG91bGQgYmUgc2V0IHRvIGFueXRoaW5nIGV4Y2VwdCBgc3RhdGljYCwgZS5nLiBgcmVsYXRpdmVgLFxuICogYGFic29sdXRlYCwgYGZpeGVkYCwgb3IgYHN0aWNreWAuXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJCYWRnZU1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJCYWRnZU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQmFkZ2Ugd2l0aCBkZWZhdWx0IHBvc2l0aW9uIGFuZCBzdGF0dXMoY29sb3IpOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1iYWRnZSB0ZXh0PVwiYmFkZ2VUZXh0XCI+PC9uYi1iYWRnZT5cbiAqIGBgYFxuICpcbiAqIEZvciBleGFtcGxlLCBiYWRnZSBjYW4gYmUgcGxhY2VkIGludG8gbmItY2FyZCBoZWFkZXI6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBiYWRnZS9iYWRnZS1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQmFkZ2UgbG9jYXRlZCBvbiB0aGUgYm90dG9tIHJpZ2h0IHdpdGggd2FybmluZyBzdGF0dXM6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLWJhZGdlIHRleHQ9XCJiYWRnZVRleHRcIiBzdGF0dXM9XCJ3YXJuaW5nXCIgcG9zaXRpb249XCJib3R0b20gcmlnaHRcIj5cbiAqIDwvbmItYmFkZ2U+XG4gKiBgYGBcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYmFkZ2UtYm9yZGVyLXJhZGl1czpcbiAqIGJhZGdlLXRleHQtZm9udC1mYW1pbHk6XG4gKiBiYWRnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGJhZGdlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBiYWRnZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYmFkZ2UtcGFkZGluZzpcbiAqIGJhZGdlLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBiYWRnZS1iYXNpYy10ZXh0LWNvbG9yOlxuICogYmFkZ2UtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2UtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogYmFkZ2Utc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2Utc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYmFkZ2UtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2UtaW5mby10ZXh0LWNvbG9yOlxuICogYmFkZ2Utd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYmFkZ2Utd2FybmluZy10ZXh0LWNvbG9yOlxuICogYmFkZ2UtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBiYWRnZS1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGJhZGdlLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGJhZGdlLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJCYWRnZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGV4dCB0byBkaXNwbGF5XG4gICAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZXh0ID0gJyc7XG4gICAgICAgIHRoaXMuX2RlZmF1bHRQb3NpdGlvbiA9ICd0b3AgcmlnaHQnO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHRoaXMuX2RlZmF1bHRQb3NpdGlvbjtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhZGdlIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiAnYmFzaWMnLCAncHJpbWFyeScsICdpbmZvJywgJ3N1Y2Nlc3MnLCAnd2FybmluZycsICdkYW5nZXInLCAnY29udHJvbCdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQmFkZ2UgcG9zaXRpb25cbiAgICAgKlxuICAgICAqIENhbiBiZSBzZXQgdG8gYW55IGNsYXNzIG9yIHRvIG9uZSBvZiBwcmVkZWZpbmVkIHBvc2l0aW9uczpcbiAgICAgKiAndG9wIGxlZnQnLCAndG9wIHJpZ2h0JywgJ2JvdHRvbSBsZWZ0JywgJ2JvdHRvbSByaWdodCcsXG4gICAgICogJ3RvcCBzdGFydCcsICd0b3AgZW5kJywgJ2JvdHRvbSBzdGFydCcsICdib3R0b20gZW5kJ1xuICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAqL1xuICAgIGdldCBwb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uO1xuICAgIH1cbiAgICBzZXQgcG9zaXRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fcG9zaXRpb24gPSB2YWx1ZSB8fCB0aGlzLl9kZWZhdWx0UG9zaXRpb247XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3dzIGJhZGdlIGFzIGEgZG90LiBObyB0ZXh0IGlzIHNob3duLlxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBnZXQgZG90TW9kZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvdE1vZGU7XG4gICAgfVxuICAgIHNldCBkb3RNb2RlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2RvdE1vZGUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgdG9wKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3NpdGlvbi5pbmNsdWRlcygndG9wJyk7XG4gICAgfVxuICAgIGdldCByaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uaW5jbHVkZXMoJ3JpZ2h0Jyk7XG4gICAgfVxuICAgIGdldCBib3R0b20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdib3R0b20nKTtcbiAgICB9XG4gICAgZ2V0IGxlZnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdsZWZ0Jyk7XG4gICAgfVxuICAgIGdldCBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uaW5jbHVkZXMoJ3N0YXJ0Jyk7XG4gICAgfVxuICAgIGdldCBlbmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLmluY2x1ZGVzKCdlbmQnKTtcbiAgICB9XG4gICAgZ2V0IGNlbnRlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24uaW5jbHVkZXMoJ2NlbnRlcicpO1xuICAgIH1cbn1cbk5iQmFkZ2VDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWJhZGdlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYHt7ZG90TW9kZSA/ICcnIDogdGV4dH19YCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e3Bvc2l0aW9uOmFic29sdXRlO3RleHQtYWxpZ246Y2VudGVyO3doaXRlLXNwYWNlOm5vd3JhcDt2ZXJ0aWNhbC1hbGlnbjpiYXNlbGluZX06aG9zdCgucG9zaXRpb24tdG9wKXt0b3A6MH06aG9zdCgucG9zaXRpb24tcmlnaHQpe3JpZ2h0OjB9Omhvc3QoLnBvc2l0aW9uLWJvdHRvbSl7Ym90dG9tOjB9Omhvc3QoLnBvc2l0aW9uLWxlZnQpe2xlZnQ6MH06aG9zdCgucG9zaXRpb24tY2VudGVyKXt0b3A6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpfVtkaXI9bHRyXSA6aG9zdCgucG9zaXRpb24tc3RhcnQpe2xlZnQ6MH1bZGlyPXJ0bF0gOmhvc3QoLnBvc2l0aW9uLXN0YXJ0KXtyaWdodDowfVtkaXI9bHRyXSA6aG9zdCgucG9zaXRpb24tZW5kKXtyaWdodDowfVtkaXI9cnRsXSA6aG9zdCgucG9zaXRpb24tZW5kKXtsZWZ0OjB9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQmFkZ2VDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iQmFkZ2VDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9zaXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRvdE1vZGU6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZG90LW1vZGUnLF0gfV0sXG4gICAgc3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgdG9wOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5wb3NpdGlvbi10b3AnLF0gfV0sXG4gICAgcmlnaHQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnBvc2l0aW9uLXJpZ2h0JyxdIH1dLFxuICAgIGJvdHRvbTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MucG9zaXRpb24tYm90dG9tJyxdIH1dLFxuICAgIGxlZnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnBvc2l0aW9uLWxlZnQnLF0gfV0sXG4gICAgc3RhcnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnBvc2l0aW9uLXN0YXJ0JyxdIH1dLFxuICAgIGVuZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MucG9zaXRpb24tZW5kJyxdIH1dLFxuICAgIGNlbnRlcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MucG9zaXRpb24tY2VudGVyJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkJhZGdlTW9kdWxlIHtcbn1cbk5iQmFkZ2VNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYkJhZGdlQ29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYkJhZGdlQ29tcG9uZW50XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBuYk1lbnVDb21wb25lbnRzID0gW05iTWVudUNvbXBvbmVudCwgTmJNZW51SXRlbUNvbXBvbmVudF07XG5jb25zdCBOQl9NRU5VX1BST1ZJREVSUyA9IFtOYk1lbnVTZXJ2aWNlLCBOYk1lbnVJbnRlcm5hbFNlcnZpY2VdO1xuY2xhc3MgTmJNZW51TW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYk1lbnVNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAuLi5OQl9NRU5VX1BST1ZJREVSUyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJNZW51TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iQmFkZ2VNb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFsuLi5uYk1lbnVDb21wb25lbnRzXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbLi4ubmJNZW51Q29tcG9uZW50c10sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBSb3V0ZSB0YWJzZXQgY29tcG9uZW50cy5cbiAqIFJlbmRlcnMgdGFicyBpbnNpZGUgb2YgYSByb3V0ZXItb3V0bGV0LlxuICpcbiAqIGBgYHRzXG4gKiAgdGFicyA9IFtcbiAqICB7XG4gKiAgICB0aXRsZTogJ1JvdXRlIHRhYiAjMScsXG4gKiAgICByb3V0ZTogJy9wYWdlcy9kZXNjcmlwdGlvbicsXG4gKiAgICBpY29uOiAnaG9tZScsXG4gKiAgICByZXNwb25zaXZlOiB0cnVlLCAvLyBoaWRlIHRpdGxlIGJlZm9yZSBgcm91dGUtdGFicy1pY29uLW9ubHktbWF4LXdpZHRoYCB2YWx1ZVxuICogIH0sXG4gKiAge1xuICogICAgdGl0bGU6ICdSb3V0ZSB0YWIgIzInLFxuICogICAgcm91dGU6ICcvcGFnZXMvaW1hZ2VzJyxcbiAqICAgIH1cbiAqICBdO1xuICpcbiAqICA8bmItcm91dGUtdGFic2V0IFt0YWJzXT1cInRhYnNcIj48L25iLXJvdXRlLXRhYnNldD5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJSb3V0ZVRhYnNldE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJSb3V0ZVRhYnNldE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUm91dGUgVGFic2V0LCB0YWJzZXQvcm91dGUtdGFic2V0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogcm91dGUtdGFic2V0LWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtYm9yZGVyLXJhZGl1czpcbiAqIHJvdXRlLXRhYnNldC1zaGFkb3c6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXBhZGRpbmc6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtZm9udC1mYW1pbHk6XG4gKiByb3V0ZS10YWJzZXQtdGFiLXRleHQtZm9udC1zaXplOlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LXRyYW5zZm9ybTpcbiAqIHJvdXRlLXRhYnNldC10YWItdW5kZXJsaW5lLXdpZHRoOlxuICogcm91dGUtdGFic2V0LXRhYi11bmRlcmxpbmUtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItYWN0aXZlLXVuZGVybGluZS1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtdGV4dC1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC10YWItZm9jdXMtdW5kZXJsaW5lLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci10ZXh0LWNvbG9yOlxuICogcm91dGUtdGFic2V0LXRhYi1ob3Zlci11bmRlcmxpbmUtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtdGFiLWRpc2FibGVkLXVuZGVybGluZS1jb2xvcjpcbiAqIHJvdXRlLXRhYnNldC1kaXZpZGVyLWNvbG9yOlxuICogcm91dGUtdGFic2V0LWRpdmlkZXItc3R5bGU6XG4gKiByb3V0ZS10YWJzZXQtZGl2aWRlci13aWR0aDpcbiAqIHJvdXRlLXRhYnNldC1zY3JvbGxiYXItY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiByb3V0ZS10YWJzZXQtc2Nyb2xsYmFyLXdpZHRoOlxuICogcm91dGUtdGFic2V0LXRhYi10ZXh0LWhpZGUtYnJlYWtwb2ludDpcbiAqL1xuY2xhc3MgTmJSb3V0ZVRhYnNldENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuZnVsbFdpZHRoVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE9wdGlvbnMgcGFzc2VkIHRvIGByb3V0ZXJMaW5rQWN0aXZlT3B0aW9uc2AgZGlyZWN0aXZlIHdoaWNoIHNldCBvbiB0YWIgbGlua3MuXG4gICAgICAgICAqIGB7IGV4YWN0OiB0cnVlIH1gIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFjdGl2ZUxpbmtPcHRpb25zID0geyBleGFjdDogdHJ1ZSB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiB0YWIgaXMgc2VsZWN0ZWRcbiAgICAgICAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxhbnk+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VUYWIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRha2UgZnVsbCB3aWR0aCBvZiBhIHBhcmVudFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsXG4gICAgICovXG4gICAgc2V0IGZ1bGxXaWR0aCh2YWwpIHtcbiAgICAgICAgdGhpcy5mdWxsV2lkdGhWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbiAgICBzZWxlY3RUYWIodGFiKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlVGFiLmVtaXQodGFiKTtcbiAgICB9XG59XG5OYlJvdXRlVGFic2V0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1yb3V0ZS10YWJzZXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPHVsIGNsYXNzPVwicm91dGUtdGFic2V0XCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCB0YWIgb2YgdGFic1wiPlxuICAgICAgICA8bGkgKm5nSWY9XCJ0YWIuZGlzYWJsZWQ7IGVsc2UgZW5hYmxlZFwiXG4gICAgICAgICAgICBbY2xhc3MucmVzcG9uc2l2ZV09XCJ0YWIucmVzcG9uc2l2ZVwiXG4gICAgICAgICAgICBjbGFzcz1cInJvdXRlLXRhYiBkaXNhYmxlZFwiXG4gICAgICAgICAgICB0YWJpbmRleD1cIi0xXCI+XG4gICAgICAgICAgPGEgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwidGFiLWxpbmtcIj5cbiAgICAgICAgICAgIDxuYi1pY29uICpuZ0lmPVwidGFiLmljb25cIiBbY29uZmlnXT1cInRhYi5pY29uXCI+PC9uYi1pY29uPlxuICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJ0YWIudGl0bGVcIiBjbGFzcz1cInRhYi10ZXh0XCI+e3sgdGFiLnRpdGxlIH19PC9zcGFuPlxuICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9saT5cblxuICAgICAgICA8bmctdGVtcGxhdGUgI2VuYWJsZWQ+XG4gICAgICAgICAgPGxpIChjbGljayk9XCIkZXZlbnQucHJldmVudERlZmF1bHQoKTsgc2VsZWN0VGFiKHRhYilcIlxuICAgICAgICAgICAgICBbcm91dGVyTGlua109XCJ0YWIucm91dGVcIlxuICAgICAgICAgICAgICByb3V0ZXJMaW5rQWN0aXZlPVwiYWN0aXZlXCJcbiAgICAgICAgICAgICAgW3JvdXRlckxpbmtBY3RpdmVPcHRpb25zXT1cImFjdGl2ZUxpbmtPcHRpb25zXCJcbiAgICAgICAgICAgICAgW2NsYXNzLnJlc3BvbnNpdmVdPVwidGFiLnJlc3BvbnNpdmVcIlxuICAgICAgICAgICAgICBbcXVlcnlQYXJhbXNdPVwidGFiLnF1ZXJ5UGFyYW1zXCJcbiAgICAgICAgICAgICAgW3F1ZXJ5UGFyYW1zSGFuZGxpbmddPVwidGFiLnF1ZXJ5UGFyYW1zSGFuZGxpbmdcIlxuICAgICAgICAgICAgICBbZnJhZ21lbnRdPVwidGFiLmZyYWdtZW50XCJcbiAgICAgICAgICAgICAgW3ByZXNlcnZlRnJhZ21lbnRdPVwidGFiLnByZXNlcnZlRnJhZ21lbnRcIlxuICAgICAgICAgICAgICBbc2tpcExvY2F0aW9uQ2hhbmdlXT1cInRhYi5za2lwTG9jYXRpb25DaGFuZ2VcIlxuICAgICAgICAgICAgICBbcmVwbGFjZVVybF09XCJ0YWIucmVwbGFjZVVybFwiXG4gICAgICAgICAgICAgIFtzdGF0ZV09XCJ0YWIuc3RhdGVcIlxuICAgICAgICAgICAgICB0YWJpbmRleD1cIjBcIlxuICAgICAgICAgICAgICBjbGFzcz1cInJvdXRlLXRhYlwiPlxuICAgICAgICAgICAgPGEgdGFiaW5kZXg9XCItMVwiIGNsYXNzPVwidGFiLWxpbmtcIj5cbiAgICAgICAgICAgICAgPG5iLWljb24gKm5nSWY9XCJ0YWIuaWNvblwiIFtpY29uXT1cInRhYi5pY29uXCI+PC9uYi1pY29uPlxuICAgICAgICAgICAgICA8c3BhbiAqbmdJZj1cInRhYi50aXRsZVwiIGNsYXNzPVwidGFiLXRleHRcIj57eyB0YWIudGl0bGUgfX08L3NwYW4+XG4gICAgICAgICAgICA8L2E+XG4gICAgICAgICAgPC9saT5cbiAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdWw+XG4gICAgPHJvdXRlci1vdXRsZXQ+PC9yb3V0ZXItb3V0bGV0PlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiLnJvdXRlLXRhYnNldHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MH0ucm91dGUtdGFic2V0IC5yb3V0ZS10YWJ7bWFyZ2luLWJvdHRvbTotMXB4O3RleHQtYWxpZ246Y2VudGVyO3BhZGRpbmc6MH0ucm91dGUtdGFic2V0IC5yb3V0ZS10YWIuYWN0aXZlIGE6OmJlZm9yZXtkaXNwbGF5OmJsb2NrfS5yb3V0ZS10YWJzZXQgLnJvdXRlLXRhYiBhe3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtZGVjb3JhdGlvbjpub25lO2Rpc3BsYXk6aW5saW5lLWJsb2NrfS5yb3V0ZS10YWJzZXQgLnJvdXRlLXRhYiBhOjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7Y29udGVudDonJzt3aWR0aDoxMDAlO2JvcmRlci1yYWRpdXM6M3B4O2JvdHRvbTotMnB4O2xlZnQ6MH0ucm91dGUtdGFic2V0IC5yb3V0ZS10YWIgYSBuYi1pY29ue3ZlcnRpY2FsLWFsaWduOm1pZGRsZX1bZGlyPWx0cl0gOmhvc3QgLnRhYi1saW5rIG5iLWljb24rc3BhbnttYXJnaW4tbGVmdDouNXJlbX1bZGlyPXJ0bF0gOmhvc3QgLnRhYi1saW5rIG5iLWljb24rc3BhbnttYXJnaW4tcmlnaHQ6LjVyZW19Omhvc3QoLmZ1bGwtd2lkdGgpIC5yb3V0ZS10YWJzZXR7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJSb3V0ZVRhYnNldENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmdWxsV2lkdGhWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZnVsbC13aWR0aCcsXSB9XSxcbiAgICB0YWJzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhY3RpdmVMaW5rT3B0aW9uczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZnVsbFdpZHRoOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjaGFuZ2VUYWI6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJSb3V0ZVRhYnNldE1vZHVsZSB7XG59XG5OYlJvdXRlVGFic2V0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJSb3V0ZVRhYnNldENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJSb3V0ZVRhYnNldENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IGdldFNpZGViYXJTdGF0ZSQgPSBuZXcgU3ViamVjdCgpO1xuY29uc3QgZ2V0U2lkZWJhclJlc3BvbnNpdmVTdGF0ZSQgPSBuZXcgU3ViamVjdCgpO1xuLyoqXG4gKiBTaWRlYmFyIHNlcnZpY2UuXG4gKlxuICogUm9vdCBtb2R1bGUgc2VydmljZSB0byBjb250cm9sIHRoZSBzaWRlYmFyIGZyb20gYW55IHBhcnQgb2YgdGhlIGFwcC5cbiAqXG4gKiBBbGxvd3MgeW91IHRvIGNoYW5nZSBzaWRlYmFyIHN0YXRlIGR5bmFtaWNhbGx5IGZyb20gYW55IHBhcnQgb2YgdGhlIGFwcDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2lkZWJhciBTdGF0ZSwgc2lkZWJhci9zaWRlYmFyLXRvZ2dsZS5jb21wb25lbnQpXG4gKi9cbmNsYXNzIE5iU2lkZWJhclNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmV4cGFuZCQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmNvbGxhcHNlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuY29tcGFjdCQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gdG9nZ2xlIGV2ZW50c1xuICAgICAqXG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZTx7IGNvbXBhY3Q6IGJvb2xlYW4sIHRhZzogc3RyaW5nIH0+XG4gICAgICovXG4gICAgb25Ub2dnbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvZ2dsZSQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIGV4cGFuZCBldmVudHNcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHsgdGFnOiBzdHJpbmcgfT5cbiAgICAgKi9cbiAgICBvbkV4cGFuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwYW5kJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gY29sbGFwc2UgZXZlbnNcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHsgdGFnOiBzdHJpbmcgfT5cbiAgICAgKi9cbiAgICBvbkNvbGxhcHNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2xsYXBzZSQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvIGNvbXBhY3QgZXZlbnNcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHsgdGFnOiBzdHJpbmcgfT5cbiAgICAgKi9cbiAgICBvbkNvbXBhY3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBhY3QkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBhIHNpZGViYXJcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGNvbXBhY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIElmIHlvdSBoYXZlIG11bHRpcGxlIHNpZGViYXJzIG9uIHRoZSBwYWdlLCBtYXJrIHRoZW0gd2l0aCBgdGFnYCBpbnB1dCBwcm9wZXJ0eSBhbmQgcGFzcyBpdCBoZXJlXG4gICAgICogdG8gc3BlY2lmeSB3aGljaCBzaWRlYmFyIHlvdSB3YW50IHRvIGNvbnRyb2xcbiAgICAgKi9cbiAgICB0b2dnbGUoY29tcGFjdCA9IGZhbHNlLCB0YWcpIHtcbiAgICAgICAgdGhpcy50b2dnbGUkLm5leHQoeyBjb21wYWN0LCB0YWcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGFuZHMgYSBzaWRlYmFyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBJZiB5b3UgaGF2ZSBtdWx0aXBsZSBzaWRlYmFycyBvbiB0aGUgcGFnZSwgbWFyayB0aGVtIHdpdGggYHRhZ2AgaW5wdXQgcHJvcGVydHkgYW5kIHBhc3MgaXQgaGVyZVxuICAgICAqIHRvIHNwZWNpZnkgd2hpY2ggc2lkZWJhciB5b3Ugd2FudCB0byBjb250cm9sXG4gICAgICovXG4gICAgZXhwYW5kKHRhZykge1xuICAgICAgICB0aGlzLmV4cGFuZCQubmV4dCh7IHRhZyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29sbGFwc2VzIGEgc2lkZWJhclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgSWYgeW91IGhhdmUgbXVsdGlwbGUgc2lkZWJhcnMgb24gdGhlIHBhZ2UsIG1hcmsgdGhlbSB3aXRoIGB0YWdgIGlucHV0IHByb3BlcnR5IGFuZCBwYXNzIGl0IGhlcmVcbiAgICAgKiB0byBzcGVjaWZ5IHdoaWNoIHNpZGViYXIgeW91IHdhbnQgdG8gY29udHJvbFxuICAgICAqL1xuICAgIGNvbGxhcHNlKHRhZykge1xuICAgICAgICB0aGlzLmNvbGxhcHNlJC5uZXh0KHsgdGFnIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBzaWRlYmFyIGNvbXBhY3RcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIElmIHlvdSBoYXZlIG11bHRpcGxlIHNpZGViYXJzIG9uIHRoZSBwYWdlLCBtYXJrIHRoZW0gd2l0aCBgdGFnYCBpbnB1dCBwcm9wZXJ0eSBhbmQgcGFzcyBpdCBoZXJlXG4gICAgICogdG8gc3BlY2lmeSB3aGljaCBzaWRlYmFyIHlvdSB3YW50IHRvIGNvbnRyb2xcbiAgICAgKi9cbiAgICBjb21wYWN0KHRhZykge1xuICAgICAgICB0aGlzLmNvbXBhY3QkLm5leHQoeyB0YWcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgc2lkZWJhciBzdGF0ZSBvYnNlcnZhYmxlIHdoaWNoIGVtaXRzIG9uY2VcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnIElmIHlvdSBoYXZlIG11bHRpcGxlIHNpZGViYXJzIG9uIHRoZSBwYWdlLCBtYXJrIHRoZW0gd2l0aCBgdGFnYCBpbnB1dCBwcm9wZXJ0eSBhbmQgcGFzcyBpdCBoZXJlXG4gICAgICogdG8gc3BlY2lmeSB3aGljaCBzaWRlYmFyIHN0YXRlIHlvdSBuZWVkXG4gICAgICovXG4gICAgZ2V0U2lkZWJhclN0YXRlKHRhZykge1xuICAgICAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuICAgICAgICBnZXRTaWRlYmFyU3RhdGUkLm5leHQoeyBvYnNlcnZlciwgdGFnIH0pO1xuICAgICAgICByZXR1cm4gb2JzZXJ2ZXIucGlwZShwdWJsaXNoKCksIHJlZkNvdW50KCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHNpZGViYXIgc3RhdGUgb2JzZXJ2YWJsZSB3aGljaCBlbWl0cyBvbmNlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBJZiB5b3UgaGF2ZSBtdWx0aXBsZSBzaWRlYmFycyBvbiB0aGUgcGFnZSwgbWFyayB0aGVtIHdpdGggYHRhZ2AgaW5wdXQgcHJvcGVydHkgYW5kIHBhc3MgaXQgaGVyZVxuICAgICAqIHRvIHNwZWNpZnkgd2hpY2ggc2lkZWJhciByZXNwb25zaXZlIHN0YXRlIHlvdSBuZWVkXG4gICAgICovXG4gICAgZ2V0U2lkZWJhclJlc3BvbnNpdmVTdGF0ZSh0YWcpIHtcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgUmVwbGF5U3ViamVjdCgpO1xuICAgICAgICBnZXRTaWRlYmFyUmVzcG9uc2l2ZVN0YXRlJC5uZXh0KHsgb2JzZXJ2ZXIsIHRhZyB9KTtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVyLnBpcGUocHVibGlzaCgpLCByZWZDb3VudCgpKTtcbiAgICB9XG59XG5OYlNpZGViYXJTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU2lkZWJhciBoZWFkZXIgY29udGFpbmVyLlxuICpcbiAqIFBsYWNlaG9sZGVyIHdoaWNoIGNvbnRhaW5zIGEgc2lkZWJhciBoZWFkZXIgY29udGVudCxcbiAqIHBsYWNlZCBhdCB0aGUgdmVyeSB0b3Agb2YgdGhlIHNpZGViYXIgb3V0c2lkZSBvZiB0aGUgc2Nyb2xsIGFyZWEuXG4gKi9cbmNsYXNzIE5iU2lkZWJhckhlYWRlckNvbXBvbmVudCB7XG59XG5OYlNpZGViYXJIZWFkZXJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXNpZGViYXItaGVhZGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIFNpZGViYXIgZm9vdGVyIGNvbnRhaW5lci5cbiAqXG4gKiBQbGFjZWhvbGRlciB3aGljaCBjb250YWlucyBhIHNpZGViYXIgZm9vdGVyIGNvbnRlbnQsXG4gKiBwbGFjZWQgYXQgdGhlIHZlcnkgYm90dG9tIG9mIHRoZSBzaWRlYmFyIG91dHNpZGUgb2YgdGhlIHNjcm9sbCBhcmVhLlxuICovXG5jbGFzcyBOYlNpZGViYXJGb290ZXJDb21wb25lbnQge1xufVxuTmJTaWRlYmFyRm9vdGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zaWRlYmFyLWZvb3RlcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gIGBcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuLyoqXG4gKiBMYXlvdXQgc2lkZWJhciBjb21wb25lbnQuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgc2lkZWJhci9zaWRlYmFyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlNpZGViYXJNb2R1bGUuZm9yUm9vdCgpYCB0byB5b3VyIGFwcCBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2lkZWJhck1vZHVsZS5mb3JSb290KCksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICogYW5kIGBOYlNpZGViYXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUgd2hlcmUgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgc2hvd246XG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2lkZWJhck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogU2lkZWJhciBjYW4gYmUgcGxhY2VkIG9uIHRoZSBsZWZ0IG9yIHRoZSByaWdodCBzaWRlIG9mIHRoZSBsYXlvdXQsXG4gKiBvciBvbiBzdGFydC9lbmQgcG9zaXRpb24gb2YgbGF5b3V0IChkZXBlbmRzIG9uIGRvY3VtZW50IGRpcmVjdGlvbiwgbGVmdCB0byByaWdodCBvciByaWdodCB0byBsZWZ0KVxuICogSXQgY2FuIGJlIGZpeGVkIChzaG93biBhYm92ZSB0aGUgY29udGVudCkgb3IgY2FuIHB1c2ggdGhlIGxheW91dCB3aGVuIG9wZW5lZC5cbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgc3RhdGVzIC0gYGV4cGFuZGVkYCwgYGNvbGxhcHNlZGAsIGBjb21wYWN0ZWRgLlxuICogQnkgZGVmYXVsdCBzaWRlYmFyIGNvbnRlbnQgaXMgZml4ZWQgYW5kIHNhdmVzIGl0cyBwb3NpdGlvbiB3aGlsZSB0aGUgcGFnZSBpcyBiZWluZyBzY3JvbGxlZC5cbiAqXG4gKiBDb21wYWN0ZWQgc2lkZWJhciBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShDb21wYWN0ZWQgU2lkZWJhciwgc2lkZWJhci9zaWRlYmFyLWNvbXBhY3RlZC5jb21wb25lbnQpXG4gKlxuICogU2lkZWJhciBhbHNvIHN1cHBvcnRzIGEgYHJlc3BvbnNpdmVgIGJlaGF2aW9yLCBsaXN0ZW5pbmcgdG8gd2luZG93IHNpemUgY2hhbmdlIGFuZCBjaGFuZ2luZyBpdHMgc2l6ZSByZXNwZWN0YWJseS5cbiAqXG4gKiBJbiBhIHBhaXIgd2l0aCBoZWFkZXIgaXQgaXMgcG9zc2libGUgdG8gc2V0dXAgYSBjb25maWd1cmF0aW9uIHdoZW4gaGVhZGVyIGlzIHBsYWNlZCBvbiBhIHNpZGUgb2YgdGhlIHNpZGViYXJcbiAqIGFuZCBub3Qgb24gdG9wIG9mIGl0LiBUbyBhY2hpZXZlIHRoaXMgc2ltcGx5IHB1dCBhIGBzdWJoZWFkZXJgIHByb3BlcnR5IHRvIHRoZSBoZWFkZXIgbGlrZSB0aGlzOlxuICogYGBgaHRtbFxuICogPG5iLWxheW91dC1oZWFkZXIgc3ViaGVhZGVyPjwvbmItbGF5b3V0LWhlYWRlcj5cbiAqIGBgYFxuICogQHN0YWNrZWQtZXhhbXBsZShTdWJoZWFkZXIsIGxheW91dC9sYXlvdXQtc2lkZWJhci1zdWJoZWFkZXIuY29tcG9uZW50KVxuICogTm90ZSB0aGF0IGluIHN1Y2ggY29uZmlndXJhdGlvbiBzaWRlYmFyIHNoYWRvdyBpcyByZW1vdmVkIGFuZCBoZWFkZXIgY2Fubm90IGJlIG1ha2UgYGZpeGVkYC5cbiAqXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKFJpZ2h0IFNpZGViYXIsIHNpZGViYXIvc2lkZWJhci1yaWdodC5jb21wb25lbnQpXG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKEZpeGVkIFNpZGViYXIsIHNpZGViYXIvc2lkZWJhci1maXhlZC5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHNpZGViYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNpZGViYXItdGV4dC1jb2xvcjpcbiAqIHNpZGViYXItdGV4dC1mb250LWZhbWlseTpcbiAqIHNpZGViYXItdGV4dC1mb250LXNpemU6XG4gKiBzaWRlYmFyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzaWRlYmFyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzaWRlYmFyLWhlaWdodDpcbiAqIHNpZGViYXItd2lkdGg6XG4gKiBzaWRlYmFyLXdpZHRoLWNvbXBhY3Q6XG4gKiBzaWRlYmFyLXBhZGRpbmc6XG4gKiBzaWRlYmFyLWhlYWRlci1oZWlnaHQ6XG4gKiBzaWRlYmFyLWZvb3Rlci1oZWlnaHQ6XG4gKiBzaWRlYmFyLXNoYWRvdzpcbiAqIHNpZGViYXItbWVudS1pdGVtLWhpZ2hsaWdodC1jb2xvcjpcbiAqIHNpZGViYXItc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzaWRlYmFyLXNjcm9sbGJhci1jb2xvcjpcbiAqIHNpZGViYXItc2Nyb2xsYmFyLXdpZHRoOlxuICovXG5jbGFzcyBOYlNpZGViYXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNpZGViYXJTZXJ2aWNlLCB0aGVtZVNlcnZpY2UsIGVsZW1lbnQsIGNkKSB7XG4gICAgICAgIHRoaXMuc2lkZWJhclNlcnZpY2UgPSBzaWRlYmFyU2VydmljZTtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2UgPSB0aGVtZVNlcnZpY2U7XG4gICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5yZXNwb25zaXZlVmFsdWVDaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5yZXNwb25zaXZlU3RhdGUgPSAncGMnO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5jb250YWluZXJGaXhlZFZhbHVlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5maXhlZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmlnaHRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhcnRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVuZFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX3N0YXRlID0gJ2V4cGFuZGVkJztcbiAgICAgICAgdGhpcy5fcmVzcG9uc2l2ZSA9IGZhbHNlO1xuICAgICAgICAvLyBUT0RPOiBnZXQgd2lkdGggYnkgdGhlIGtleSBhbmQgZGVmaW5lIG9ubHkgbWF4IHdpZHRoIGZvciB0aGUgdGFibGV0cyBhbmQgbW9iaWxlc1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udHJvbHMgb24gd2hpY2ggc2NyZWVuIHNpemVzIHNpZGViYXIgc2hvdWxkIGJlIHN3aXRjaGVkIHRvIGNvbXBhY3RlZCBzdGF0ZS5cbiAgICAgICAgICogV29ya3Mgb25seSB3aGVuIHJlc3BvbnNpdmUgbW9kZSBpcyBvbi5cbiAgICAgICAgICogRGVmYXVsdCB2YWx1ZXMgYXJlIGBbJ3hzJywgJ2lzJywgJ3NtJywgJ21kJywgJ2xnJ11gLlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSBzdHJpbmdbXVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb21wYWN0ZWRCcmVha3BvaW50cyA9IFsneHMnLCAnaXMnLCAnc20nLCAnbWQnLCAnbGcnXTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbnRyb2xzIG9uIHdoaWNoIHNjcmVlbiBzaXplcyBzaWRlYmFyIHNob3VsZCBiZSBzd2l0Y2hlZCB0byBjb2xsYXBzZWQgc3RhdGUuXG4gICAgICAgICAqIFdvcmtzIG9ubHkgd2hlbiByZXNwb25zaXZlIG1vZGUgaXMgb24uXG4gICAgICAgICAqIERlZmF1bHQgdmFsdWVzIGFyZSBgWyd4cycsICdpcyddYC5cbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUgc3RyaW5nW11cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sbGFwc2VkQnJlYWtwb2ludHMgPSBbJ3hzJywgJ2lzJ107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuZXZlciBzaWRlYmFyIHN0YXRlIGNoYW5nZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuZXZlciBzaWRlYmFyIHJlc3BvbnNpdmUgc3RhdGUgY2hhbmdlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZXNwb25zaXZlU3RhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGdldCBleHBhbmRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdleHBhbmRlZCc7XG4gICAgfVxuICAgIGdldCBjb2xsYXBzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlID09PSAnY29sbGFwc2VkJztcbiAgICB9XG4gICAgZ2V0IGNvbXBhY3RlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09ICdjb21wYWN0ZWQnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQbGFjZXMgc2lkZWJhciBvbiB0aGUgcmlnaHQgc2lkZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCByaWdodCh2YWwpIHtcbiAgICAgICAgdGhpcy5yaWdodFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIHRoaXMubGVmdFZhbHVlID0gIXRoaXMucmlnaHRWYWx1ZTtcbiAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZW5kVmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxhY2VzIHNpZGViYXIgb24gdGhlIGxlZnQgc2lkZVxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBsZWZ0KHZhbCkge1xuICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB0aGlzLnJpZ2h0VmFsdWUgPSAhdGhpcy5sZWZ0VmFsdWU7XG4gICAgICAgIHRoaXMuc3RhcnRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmVuZFZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBsYWNlcyBzaWRlYmFyIG9uIHRoZSBzdGFydCBlZGdlIG9mIGxheW91dFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBzdGFydCh2YWwpIHtcbiAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIHRoaXMuZW5kVmFsdWUgPSAhdGhpcy5zdGFydFZhbHVlO1xuICAgICAgICB0aGlzLmxlZnRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJpZ2h0VmFsdWUgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGxhY2VzIHNpZGViYXIgb24gdGhlIGVuZCBlZGdlIG9mIGxheW91dFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBlbmQodmFsKSB7XG4gICAgICAgIHRoaXMuZW5kVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgdGhpcy5zdGFydFZhbHVlID0gIXRoaXMuZW5kVmFsdWU7XG4gICAgICAgIHRoaXMubGVmdFZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmlnaHRWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYWtlcyBzaWRlYmFyIGZpeGVkIChzaG93biBhYm92ZSB0aGUgbGF5b3V0IGNvbnRlbnQpXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgc2V0IGZpeGVkKHZhbCkge1xuICAgICAgICB0aGlzLmZpeGVkVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgc2lkZWJhciBjb250YWluZXIgZml4ZWRcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBzZXQgY29udGFpbmVyRml4ZWQodmFsKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyRml4ZWRWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbml0aWFsIHNpZGViYXIgc3RhdGUsIGBleHBhbmRlZGB8YGNvbGxhcHNlZGB8YGNvbXBhY3RlZGBcbiAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICAgIH1cbiAgICBzZXQgc3RhdGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc3RhdGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWFrZXMgc2lkZWJhciBsaXN0ZW4gdG8gbWVkaWEgcXVlcnkgZXZlbnRzIGFuZCBjaGFuZ2UgaXRzIGJlaGF2aW91clxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCByZXNwb25zaXZlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2l2ZTtcbiAgICB9XG4gICAgc2V0IHJlc3BvbnNpdmUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzcG9uc2l2ZSAhPT0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fcmVzcG9uc2l2ZSA9ICF0aGlzLnJlc3BvbnNpdmU7XG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmVWYWx1ZUNoYW5nZSQubmV4dCh0aGlzLnJlc3BvbnNpdmUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLnNpZGViYXJTZXJ2aWNlLm9uVG9nZ2xlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyB0YWcgfSkgPT4gIXRoaXMudGFnIHx8IHRoaXMudGFnID09PSB0YWcpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IGNvbXBhY3QgfSkgPT4gdGhpcy50b2dnbGUoY29tcGFjdCkpO1xuICAgICAgICB0aGlzLnNpZGViYXJTZXJ2aWNlLm9uRXhwYW5kKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyB0YWcgfSkgPT4gIXRoaXMudGFnIHx8IHRoaXMudGFnID09PSB0YWcpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuZXhwYW5kKCkpO1xuICAgICAgICB0aGlzLnNpZGViYXJTZXJ2aWNlLm9uQ29sbGFwc2UoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh7IHRhZyB9KSA9PiAhdGhpcy50YWcgfHwgdGhpcy50YWcgPT09IHRhZyksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jb2xsYXBzZSgpKTtcbiAgICAgICAgdGhpcy5zaWRlYmFyU2VydmljZS5vbkNvbXBhY3QoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh7IHRhZyB9KSA9PiAhdGhpcy50YWcgfHwgdGhpcy50YWcgPT09IHRhZyksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jb21wYWN0KCkpO1xuICAgICAgICBnZXRTaWRlYmFyU3RhdGUkXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHsgdGFnIH0pID0+ICF0aGlzLnRhZyB8fCB0aGlzLnRhZyA9PT0gdGFnKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoeyBvYnNlcnZlciB9KSA9PiBvYnNlcnZlci5uZXh0KHRoaXMuc3RhdGUpKTtcbiAgICAgICAgZ2V0U2lkZWJhclJlc3BvbnNpdmVTdGF0ZSRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyB0YWcgfSkgPT4gIXRoaXMudGFnIHx8IHRoaXMudGFnID09PSB0YWcpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCh7IG9ic2VydmVyIH0pID0+IG9ic2VydmVyLm5leHQodGhpcy5yZXNwb25zaXZlU3RhdGUpKTtcbiAgICAgICAgdGhpcy5yZXNwb25zaXZlVmFsdWVDaGFuZ2UkXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHJlc3BvbnNpdmUpID0+ICFyZXNwb25zaXZlKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmV4cGFuZCgpKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVUb01lZGlhUXVlcnlDaGFuZ2UoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIC8vIFRPRE86IHRoaXMgaXMgbW9yZSBvZiBhIHdvcmthcm91bmQsIHNob3VsZCBiZSBhIGJldHRlciB3YXkgdG8gbWFrZSBjb21wb25lbnRzIGNvbW11bmljYXRlIHRvIGVhY2ggb3RoZXJcbiAgICBvbkNsaWNrKGV2ZW50KSB7XG4gICAgICAgIGNvbnN0IG1lbnUgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCduYi1tZW51Jyk7XG4gICAgICAgIGlmIChtZW51ICYmIG1lbnUuY29udGFpbnMoZXZlbnQudGFyZ2V0KSkge1xuICAgICAgICAgICAgY29uc3QgbGluayA9IHRoaXMuZ2V0TWVudUxpbmsoZXZlbnQudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChsaW5rICYmIGxpbmsubmV4dEVsZW1lbnRTaWJsaW5nICYmIGxpbmsubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5jb250YWlucygnbWVudS1pdGVtcycpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaWRlYmFyU2VydmljZS5leHBhbmQodGhpcy50YWcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxhcHNlcyB0aGUgc2lkZWJhclxuICAgICAqL1xuICAgIGNvbGxhcHNlKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCdjb2xsYXBzZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRXhwYW5kcyB0aGUgc2lkZWJhclxuICAgICAqL1xuICAgIGV4cGFuZCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSgnZXhwYW5kZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29tcGFjdHMgdGhlIHNpZGViYXIgKG1pbmltaXplcylcbiAgICAgKi9cbiAgICBjb21wYWN0KCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVN0YXRlKCdjb21wYWN0ZWQnKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyBzaWRlYmFyIHN0YXRlIChleHBhbmRlZHxjb2xsYXBzZWR8Y29tcGFjdGVkKVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gY29tcGFjdCBJZiB0cnVlLCB0aGVuIHNpZGViYXIgc3RhdGUgd2lsbCBiZSBjaGFuZ2VkIGJldHdlZW4gZXhwYW5kZWQgJiBjb21wYWN0ZWQsXG4gICAgICogb3RoZXJ3aXNlIC0gYmV0d2VlbiBleHBhbmRlZCAmIGNvbGxhcHNlZC4gRmFsc2UgYnkgZGVmYXVsdC5cbiAgICAgKlxuICAgICAqIFRvZ2dsZSBzaWRlYmFyIHN0YXRlXG4gICAgICpcbiAgICAgKiBgYGB0c1xuICAgICAqIHRoaXMuc2lkZWJhci50b2dnbGUodHJ1ZSk7XG4gICAgICogYGBgXG4gICAgICovXG4gICAgdG9nZ2xlKGNvbXBhY3QgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5yZXNwb25zaXZlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXNwb25zaXZlU3RhdGUgPT09ICdtb2JpbGUnKSB7XG4gICAgICAgICAgICAgICAgY29tcGFjdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnN0YXRlID09PSAnY29tcGFjdGVkJyB8fCB0aGlzLnN0YXRlID09PSAnY29sbGFwc2VkJykge1xuICAgICAgICAgICAgdGhpcy51cGRhdGVTdGF0ZSgnZXhwYW5kZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3RhdGUoY29tcGFjdCA/ICdjb21wYWN0ZWQnIDogJ2NvbGxhcHNlZCcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZVRvTWVkaWFRdWVyeUNoYW5nZSgpIHtcbiAgICAgICAgY29tYmluZUxhdGVzdChbXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNpdmVWYWx1ZUNoYW5nZSQucGlwZShzdGFydFdpdGgodGhpcy5yZXNwb25zaXZlKSksXG4gICAgICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5vbk1lZGlhUXVlcnlDaGFuZ2UoKSxcbiAgICAgICAgXSlcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoW3Jlc3BvbnNpdmVdKSA9PiByZXNwb25zaXZlKSwgbWFwKChbLCBicmVha3BvaW50c10pID0+IGJyZWFrcG9pbnRzKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoW3ByZXYsIGN1cnJlbnRdKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpc0NvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkQnJlYWtwb2ludHMuaW5jbHVkZXMoY3VycmVudC5uYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IGlzQ29tcGFjdGVkID0gdGhpcy5jb21wYWN0ZWRCcmVha3BvaW50cy5pbmNsdWRlcyhjdXJyZW50Lm5hbWUpO1xuICAgICAgICAgICAgbGV0IG5ld1Jlc3BvbnNpdmVTdGF0ZTtcbiAgICAgICAgICAgIGlmIChpc0NvbXBhY3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZml4ZWQgPSB0aGlzLmNvbnRhaW5lckZpeGVkVmFsdWU7XG4gICAgICAgICAgICAgICAgdGhpcy5jb21wYWN0KCk7XG4gICAgICAgICAgICAgICAgbmV3UmVzcG9uc2l2ZVN0YXRlID0gJ3RhYmxldCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZpeGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbGxhcHNlKCk7XG4gICAgICAgICAgICAgICAgbmV3UmVzcG9uc2l2ZVN0YXRlID0gJ21vYmlsZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzQ29sbGFwc2VkICYmICFpc0NvbXBhY3RlZCAmJiAoIXByZXYud2lkdGggfHwgcHJldi53aWR0aCA8IGN1cnJlbnQud2lkdGgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHBhbmQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpeGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbmV3UmVzcG9uc2l2ZVN0YXRlID0gJ3BjJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChuZXdSZXNwb25zaXZlU3RhdGUgJiYgbmV3UmVzcG9uc2l2ZVN0YXRlICE9PSB0aGlzLnJlc3BvbnNpdmVTdGF0ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZVN0YXRlID0gbmV3UmVzcG9uc2l2ZVN0YXRlO1xuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2l2ZVN0YXRlQ2hhbmdlLmVtaXQodGhpcy5yZXNwb25zaXZlU3RhdGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXRNZW51TGluayhlbGVtZW50KSB7XG4gICAgICAgIGlmICghZWxlbWVudCB8fCBlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ25iLW1lbnUnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGVsZW1lbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnYScpIHtcbiAgICAgICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmdldE1lbnVMaW5rKGVsZW1lbnQucGFyZW50RWxlbWVudCk7XG4gICAgfVxuICAgIHVwZGF0ZVN0YXRlKHN0YXRlJCQxKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXRlICE9PSBzdGF0ZSQkMSkge1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IHN0YXRlJCQxO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZS5lbWl0KHRoaXMuc3RhdGUpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBAZGVwcmVjYXRlZCBVc2UgYHJlc3BvbnNpdmVgIHByb3BlcnR5IGluc3RlYWRcbiAgICAgKiBAYnJlYWtpbmctY2hhbmdlIFJlbW92ZSBAOC4wLjBcbiAgICAgKi9cbiAgICB0b2dnbGVSZXNwb25zaXZlKGVuYWJsZWQpIHtcbiAgICAgICAgdGhpcy5yZXNwb25zaXZlID0gZW5hYmxlZDtcbiAgICB9XG59XG4vKipcbiAqIEBkZXByZWNhdGVkIFVzZSBOYlNpZGViYXJTdGF0ZSB0eXBlIGluc3RlYWRcbiAqIEBicmVha2luZy1jaGFuZ2UgUmVtb3ZlIEA4LjAuMFxuICovXG5OYlNpZGViYXJDb21wb25lbnQuU1RBVEVfRVhQQU5ERUQgPSAnZXhwYW5kZWQnO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmJTaWRlYmFyU3RhdGUgdHlwZSBpbnN0ZWFkXG4gKiBAYnJlYWtpbmctY2hhbmdlIFJlbW92ZSBAOC4wLjBcbiAqL1xuTmJTaWRlYmFyQ29tcG9uZW50LlNUQVRFX0NPTExBUFNFRCA9ICdjb2xsYXBzZWQnO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmJTaWRlYmFyU3RhdGUgdHlwZSBpbnN0ZWFkXG4gKiBAYnJlYWtpbmctY2hhbmdlIFJlbW92ZSBAOC4wLjBcbiAqL1xuTmJTaWRlYmFyQ29tcG9uZW50LlNUQVRFX0NPTVBBQ1RFRCA9ICdjb21wYWN0ZWQnO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmJTaWRlYmFyUmVzcG9uc2l2ZVN0YXRlIHR5cGUgaW5zdGVhZFxuICogQGJyZWFraW5nLWNoYW5nZSBSZW1vdmUgQDguMC4wXG4gKi9cbk5iU2lkZWJhckNvbXBvbmVudC5SRVNQT05TSVZFX1NUQVRFX01PQklMRSA9ICdtb2JpbGUnO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmJTaWRlYmFyUmVzcG9uc2l2ZVN0YXRlIHR5cGUgaW5zdGVhZFxuICogQGJyZWFraW5nLWNoYW5nZSBSZW1vdmUgQDguMC4wXG4gKi9cbk5iU2lkZWJhckNvbXBvbmVudC5SRVNQT05TSVZFX1NUQVRFX1RBQkxFVCA9ICd0YWJsZXQnO1xuLyoqXG4gKiBAZGVwcmVjYXRlZCBVc2UgTmJTaWRlYmFyUmVzcG9uc2l2ZVN0YXRlIHR5cGUgaW5zdGVhZFxuICogQGJyZWFraW5nLWNoYW5nZSBSZW1vdmUgQDguMC4wXG4gKi9cbk5iU2lkZWJhckNvbXBvbmVudC5SRVNQT05TSVZFX1NUQVRFX1BDID0gJ3BjJztcbk5iU2lkZWJhckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2lkZWJhcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwibWFpbi1jb250YWluZXJcIlxuICAgICAgICAgW2NsYXNzLm1haW4tY29udGFpbmVyLWZpeGVkXT1cImNvbnRhaW5lckZpeGVkVmFsdWVcIj5cbiAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLXNpZGViYXItaGVhZGVyXCI+PC9uZy1jb250ZW50PlxuICAgICAgPGRpdiBjbGFzcz1cInNjcm9sbGFibGVcIiAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCI+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItc2lkZWJhci1mb290ZXJcIj48L25nLWNvbnRlbnQ+XG4gICAgPC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO292ZXJmbG93OmhpZGRlbjt6LWluZGV4OmF1dG87b3JkZXI6MH06aG9zdCAuc2Nyb2xsYWJsZXtvdmVyZmxvdy15OmF1dG87b3ZlcmZsb3cteDpoaWRkZW47ZmxleDoxfTpob3N0IC5tYWluLWNvbnRhaW5lcnt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn06aG9zdCAubWFpbi1jb250YWluZXItZml4ZWR7cG9zaXRpb246Zml4ZWR9Omhvc3QucmlnaHR7bWFyZ2luLXJpZ2h0OjA7bWFyZ2luLWxlZnQ6YXV0b31bZGlyPWx0cl0gOmhvc3QucmlnaHR7b3JkZXI6NH1bZGlyPXJ0bF0gOmhvc3QucmlnaHR7b3JkZXI6MH06aG9zdC5lbmR7b3JkZXI6NH1bZGlyPWx0cl0gOmhvc3QuZW5ke21hcmdpbi1yaWdodDowO21hcmdpbi1sZWZ0OmF1dG99W2Rpcj1ydGxdIDpob3N0LmVuZHttYXJnaW4tbGVmdDowO21hcmdpbi1yaWdodDphdXRvfTpob3N0LmZpeGVke3Bvc2l0aW9uOmZpeGVkO2hlaWdodDoxMDAlO3otaW5kZXg6OTk5O3RvcDowO2JvdHRvbTowO2xlZnQ6MH06aG9zdC5maXhlZC5yaWdodHtyaWdodDowfVtkaXI9bHRyXSA6aG9zdC5maXhlZC5zdGFydHtsZWZ0OjB9W2Rpcj1ydGxdIDpob3N0LmZpeGVkLnN0YXJ0e3JpZ2h0OjB9W2Rpcj1sdHJdIDpob3N0LmZpeGVkLmVuZHtyaWdodDowfVtkaXI9cnRsXSA6aG9zdC5maXhlZC5lbmR7bGVmdDowfTpob3N0IDo6bmctZGVlcCBuYi1zaWRlYmFyLWZvb3RlcnttYXJnaW4tdG9wOmF1dG87ZGlzcGxheTpibG9ja306aG9zdCA6Om5nLWRlZXAgbmItc2lkZWJhci1oZWFkZXJ7ZGlzcGxheTpibG9ja31cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJTaWRlYmFyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJTaWRlYmFyU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJUaGVtZVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH1cbl07XG5OYlNpZGViYXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZml4ZWRWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZml4ZWQnLF0gfV0sXG4gICAgcmlnaHRWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MucmlnaHQnLF0gfV0sXG4gICAgbGVmdFZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5sZWZ0JyxdIH1dLFxuICAgIHN0YXJ0VmFsdWU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXJ0JyxdIH1dLFxuICAgIGVuZFZhbHVlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5lbmQnLF0gfV0sXG4gICAgZXhwYW5kZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmV4cGFuZGVkJyxdIH1dLFxuICAgIGNvbGxhcHNlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuY29sbGFwc2VkJyxdIH1dLFxuICAgIGNvbXBhY3RlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuY29tcGFjdGVkJyxdIH1dLFxuICAgIHJpZ2h0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsZWZ0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGFydDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZW5kOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaXhlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY29udGFpbmVyRml4ZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICByZXNwb25zaXZlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWc6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbXBhY3RlZEJyZWFrcG9pbnRzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjb2xsYXBzZWRCcmVha3BvaW50czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhdGVDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICByZXNwb25zaXZlU3RhdGVDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgTkJfU0lERUJBUl9DT01QT05FTlRTID0gW1xuICAgIE5iU2lkZWJhckNvbXBvbmVudCxcbiAgICBOYlNpZGViYXJGb290ZXJDb21wb25lbnQsXG4gICAgTmJTaWRlYmFySGVhZGVyQ29tcG9uZW50LFxuXTtcbmNvbnN0IE5CX1NJREVCQVJfUFJPVklERVJTID0gW1xuICAgIE5iU2lkZWJhclNlcnZpY2UsXG5dO1xuY2xhc3MgTmJTaWRlYmFyTW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdCgpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYlNpZGViYXJNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAuLi5OQl9TSURFQkFSX1BST1ZJREVSUyxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJTaWRlYmFyTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX1NJREVCQVJfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfU0lERUJBUl9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBTcGVjaWZpYyB0YWIgY29udGFpbmVyLlxuICpcbiAqIGBgYHRzXG4gKiA8bmItdGFiIHRhYlRpdGxlPVwiVXNlcnNcIlxuICogICBiYWRnZVRleHQ9XCI5OStcIlxuICogICBiYWRnZVN0YXR1cz1cImRhbmdlclwiPlxuICogICA8cD5MaXN0IG9mIDxzdHJvbmc+dXNlcnM8L3N0cm9uZz4uPC9wPlxuICogPC9uYi10YWI+XG4gYGBgXG4gKi9cbmNsYXNzIE5iVGFiQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlc3BvbnNpdmVWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRpc2FibGVkVmFsdWUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJhZGdlIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiAncHJpbWFyeScsICdpbmZvJywgJ3N1Y2Nlc3MnLCAnd2FybmluZycsICdkYW5nZXInXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWxcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmFkZ2VTdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICB0aGlzLmluaXQgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXNlIGJhZGdlIGRvdCBtb2RlXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGJhZGdlRG90KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYmFkZ2VEb3Q7XG4gICAgfVxuICAgIHNldCBiYWRnZURvdCh2YWwpIHtcbiAgICAgICAgdGhpcy5fYmFkZ2VEb3QgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlbSBpcyBkaXNhYmxlZCBhbmQgY2Fubm90IGJlIG9wZW5lZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkVmFsdWU7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3cgb25seSBpY29ucyB3aGVuIHdpZHRoIGlzIHNtYWxsZXIgdGhhbiBgdGFicy1pY29uLW9ubHktbWF4LXdpZHRoYFxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCByZXNwb25zaXZlKHZhbCkge1xuICAgICAgICB0aGlzLnJlc3BvbnNpdmVWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgIH1cbiAgICBnZXQgcmVzcG9uc2l2ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzcG9uc2l2ZVZhbHVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgYWN0aXZlIHRhYlxuICAgICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBhY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZVZhbHVlO1xuICAgIH1cbiAgICBzZXQgYWN0aXZlKHZhbCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLmluaXQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExhenkgbG9hZCBjb250ZW50IGJlZm9yZSB0YWIgc2VsZWN0aW9uXG4gICAgICogVE9ETzogcmVuYW1lLCBhcyBsYXp5IGlzIGJ5IGRlZmF1bHQsIGFuZCB0aGlzIGlzIG1vcmUgYGluc3RhbnQgbG9hZGBcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBsYXp5TG9hZCh2YWwpIHtcbiAgICAgICAgdGhpcy5pbml0ID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxufVxuTmJUYWJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRhYicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaW5pdFwiPlxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIDwvbmctY29udGFpbmVyPlxuICBgXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iVGFiQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRhYlRpdGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWJJZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2VEb3Q6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhYkljb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWydkaXNhYmxlZCcsXSB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmRpc2FibGVkJyxdIH1dLFxuICAgIHJlc3BvbnNpdmU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJvdXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBhY3RpdmVWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuY29udGVudC1hY3RpdmUnLF0gfV0sXG4gICAgYWN0aXZlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsYXp5TG9hZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2VUZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBiYWRnZVN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2VQb3NpdGlvbjogW3sgdHlwZTogSW5wdXQgfV1cbn07XG4vLyBUT0RPOiBDb21iaW5lIHRhYnNldCB3aXRoIHJvdXRlLXRhYnNldCwgc28gdGhhdCB3ZSBjYW46XG4vLyAtIGhhdmUgc2ltaWxhciBpbnRlcmZhY2Vcbi8vIC0gZWFzeSB0byBtaWdyYXRlIGZyb20gb25lIHRvIGFub3RoZXJcbi8vIC0gY2FuIG1peCB0aGVtIGJvdGggKHJvdXRlL2NvbnRlbnQgdGFiKVxuLyoqXG4gKlxuICogRHluYW1pYyB0YWJzZXQgY29tcG9uZW50LlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgdGFic2V0L3RhYnNldC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQmFzaWMgdGFic2V0IGV4YW1wbGVcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItdGFic2V0PlxuICogIDxuYi10YWIgdGFiVGl0bGU9XCJTaW1wbGUgVGFiICMxXCI+XG4gKiAgICBUYWIgY29udGVudCAxXG4gKiAgPC9uYi10YWI+XG4gKiAgPG5iLXRhYiB0YWJUaXRsZT1cIlNpbXBsZSBUYWIgIzJcIj5cbiAqICAgIFRhYiBjb250ZW50IDJcbiAqICA8L25iLXRhYj5cbiAqIDwvbmItdGFic2V0PlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJUYWJzZXRNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVGFic2V0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNldCBhIGJhZGdlIHRvIGEgcGFydGljdWxhciB0YWI6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFRhYiBXaXRoIEJhZGdlLCB0YWJzZXQvdGFic2V0LWJhZGdlLmNvbXBvbmVudClcbiAqXG4gKiBhbmQgd2UgY2FuIHNldCBpdCB0byBmdWxsIGEgd2lkdGggb2YgYSBwYXJlbnQgY29tcG9uZW50XG4gKiBAc3RhY2tlZC1leGFtcGxlKEZ1bGwgV2lkdGgsIHRhYnNldC90YWJzZXQtd2lkdGguY29tcG9uZW50KVxuICpcbiAqIGB0YWJJY29uYCBzaG91bGQgYmUgdXNlZCB0byBhZGQgYW4gaWNvbiB0byB0aGUgdGFiLiBJY29uIGNhbiBhbHNvIGJlIGNvbWJpbmVkIHdpdGggdGl0bGUuXG4gKiBgcmVzcG9uc2l2ZWAgdGFiIHByb3BlcnR5IGlmIHNldCBhbGxvd3MgeW91IHRvIGhpZGUgdGhlIHRpdGxlIG9uIHNtYWxsZXIgc2NyZWVuc1xuICogKGB0YWJzLWljb24tb25seS1tYXgtd2lkdGhgIHByb3BlcnR5KSBmb3IgYmV0dGVyIHJlc3BvbnNpdmUgYmVoYXZpb3VyLiBZb3UgY2FuIG9wZW4gdGhlIGZvbGxvd2luZyBleGFtcGxlIGFuZCBtYWtlXG4gKiB5b3VyIHNjcmVlbiBzbWFsbGVyIC0gdGl0bGVzIHdpbGwgYmUgaGlkZGVuIGluIHRoZSBsYXN0IHRhYnNldCBpbiB0aGUgbGlzdDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEljb24sIHRhYnNldC90YWJzZXQtaWNvbi5jb21wb25lbnQpXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBkaXNhYmxlIGEgdGFiIHVzaW5nIGBkaXNhYmxlZGAgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKERpc2FibGVkIFRhYiwgdGFic2V0L3RhYnNldC1kaXNhYmxlZC5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRhYnNldC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LWJvcmRlci1yYWRpdXM6XG4gKiB0YWJzZXQtc2hhZG93OlxuICogdGFic2V0LXRhYi1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LXRhYi1wYWRkaW5nOlxuICogdGFic2V0LXRhYi10ZXh0LWNvbG9yOlxuICogdGFic2V0LXRhYi10ZXh0LWZvbnQtZmFtaWx5OlxuICogdGFic2V0LXRhYi10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRhYnNldC10YWItdGV4dC1mb250LXdlaWdodDpcbiAqIHRhYnNldC10YWItdGV4dC1saW5lLWhlaWdodDpcbiAqIHRhYnNldC10YWItdGV4dC10cmFuc2Zvcm06XG4gKiB0YWJzZXQtdGFiLXVuZGVybGluZS13aWR0aDpcbiAqIHRhYnNldC10YWItdW5kZXJsaW5lLWNvbG9yOlxuICogdGFic2V0LXRhYi1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhYnNldC10YWItYWN0aXZlLXRleHQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWFjdGl2ZS11bmRlcmxpbmUtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWZvY3VzLXRleHQtY29sb3I6XG4gKiB0YWJzZXQtdGFiLWZvY3VzLXVuZGVybGluZS1jb2xvcjpcbiAqIHRhYnNldC10YWItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhYnNldC10YWItaG92ZXItdGV4dC1jb2xvcjpcbiAqIHRhYnNldC10YWItaG92ZXItdW5kZXJsaW5lLWNvbG9yOlxuICogdGFic2V0LXRhYi1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LXRhYi1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogdGFic2V0LXRhYi1kaXNhYmxlZC11bmRlcmxpbmUtY29sb3I6XG4gKiB0YWJzZXQtZGl2aWRlci1jb2xvcjpcbiAqIHRhYnNldC1kaXZpZGVyLXN0eWxlOlxuICogdGFic2V0LWRpdmlkZXItd2lkdGg6XG4gKiB0YWJzZXQtY29udGVudC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFic2V0LWNvbnRlbnQtcGFkZGluZzpcbiAqIHRhYnNldC1jb250ZW50LXRleHQtY29sb3I6XG4gKiB0YWJzZXQtY29udGVudC10ZXh0LWZvbnQtZmFtaWx5OlxuICogdGFic2V0LWNvbnRlbnQtdGV4dC1mb250LXNpemU6XG4gKiB0YWJzZXQtY29udGVudC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdGFic2V0LWNvbnRlbnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIHRhYnNldC1zY3JvbGxiYXItY29sb3I6XG4gKiB0YWJzZXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWJzZXQtc2Nyb2xsYmFyLXdpZHRoOlxuICogdGFic2V0LXRhYi10ZXh0LWhpZGUtYnJlYWtwb2ludDpcbiAqL1xuY2xhc3MgTmJUYWJzZXRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJvdXRlLCBjaGFuZ2VEZXRlY3RvclJlZikge1xuICAgICAgICB0aGlzLnJvdXRlID0gcm91dGU7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYgPSBjaGFuZ2VEZXRlY3RvclJlZjtcbiAgICAgICAgdGhpcy5mdWxsV2lkdGhWYWx1ZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiB0YWIgaXMgc2VsZWN0ZWRcbiAgICAgICAgICogQHR5cGUgRXZlbnRFbWl0dGVyPGFueT5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhbmdlVGFiID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUYWtlIGZ1bGwgd2lkdGggb2YgYSBwYXJlbnRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IHZhbFxuICAgICAqL1xuICAgIHNldCBmdWxsV2lkdGgodmFsKSB7XG4gICAgICAgIHRoaXMuZnVsbFdpZHRoVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLy8gVE9ETzogcmVmYWN0b3JpbmcgdGhpcyBjb21wb25lbnQsIGF2b2lkIGNoYW5nZSBkZXRlY3Rpb24gbG9vcFxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5yb3V0ZS5wYXJhbXNcbiAgICAgICAgICAgIC5waXBlKG1hcCgocGFyYW1zKSA9PiB0aGlzLnRhYnMuZmluZCgodGFiKSA9PiB0aGlzLnJvdXRlUGFyYW0gPyB0YWIucm91dGUgPT09IHBhcmFtc1t0aGlzLnJvdXRlUGFyYW1dIDogdGFiLmFjdGl2ZSkpLCBkZWxheSgwKSwgbWFwKCh0YWIpID0+IHRhYiB8fCB0aGlzLnRhYnMuZmlyc3QpLCBmaWx0ZXIoKHRhYikgPT4gISF0YWIpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgodGFiVG9TZWxlY3QpID0+IHtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0VGFiKHRhYlRvU2VsZWN0KTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUT0RPOiBuYXZpZ2F0ZSB0byByb3V0ZVBhcmFtXG4gICAgc2VsZWN0VGFiKHNlbGVjdGVkVGFiKSB7XG4gICAgICAgIGlmICghc2VsZWN0ZWRUYWIuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMudGFicy5mb3JFYWNoKHRhYiA9PiB0YWIuYWN0aXZlID0gdGFiID09PSBzZWxlY3RlZFRhYik7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZVRhYi5lbWl0KHNlbGVjdGVkVGFiKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbk5iVGFic2V0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi10YWJzZXQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPHVsIGNsYXNzPVwidGFic2V0XCI+XG4gICAgICA8bGkgKm5nRm9yPVwibGV0IHRhYiBvZiB0YWJzXCJcbiAgICAgICAgICAoY2xpY2spPVwic2VsZWN0VGFiKHRhYilcIlxuICAgICAgICAgIChrZXl1cC5zcGFjZSk9XCJzZWxlY3RUYWIodGFiKVwiXG4gICAgICAgICAgKGtleXVwLmVudGVyKT1cInNlbGVjdFRhYih0YWIpXCJcbiAgICAgICAgICBbY2xhc3MucmVzcG9uc2l2ZV09XCJ0YWIucmVzcG9uc2l2ZVwiXG4gICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJ0YWIuYWN0aXZlXCJcbiAgICAgICAgICBbY2xhc3MuZGlzYWJsZWRdPVwidGFiLmRpc2FibGVkXCJcbiAgICAgICAgICBbYXR0ci50YWJpbmRleF09XCJ0YWIuZGlzYWJsZWQgPyAtMSA6IDBcIlxuICAgICAgICAgIFthdHRyLmRhdGEtdGFiLWlkXT1cInRhYi50YWJJZFwiXG4gICAgICAgICAgY2xhc3M9XCJ0YWJcIj5cbiAgICAgICAgPGEgaHJlZiAoY2xpY2spPVwiJGV2ZW50LnByZXZlbnREZWZhdWx0KClcIiB0YWJpbmRleD1cIi0xXCIgY2xhc3M9XCJ0YWItbGlua1wiPlxuICAgICAgICAgIDxuYi1pY29uICpuZ0lmPVwidGFiLnRhYkljb25cIiBbY29uZmlnXT1cInRhYi50YWJJY29uXCI+PC9uYi1pY29uPlxuICAgICAgICAgIDxzcGFuICpuZ0lmPVwidGFiLnRhYlRpdGxlXCIgY2xhc3M9XCJ0YWItdGV4dFwiPnt7IHRhYi50YWJUaXRsZSB9fTwvc3Bhbj5cbiAgICAgICAgPC9hPlxuICAgICAgICA8bmItYmFkZ2UgKm5nSWY9XCJ0YWIuYmFkZ2VUZXh0IHx8IHRhYi5iYWRnZURvdFwiXG4gICAgICAgICAgW3RleHRdPVwidGFiLmJhZGdlVGV4dFwiXG4gICAgICAgICAgW2RvdE1vZGVdPVwidGFiLmJhZGdlRG90XCJcbiAgICAgICAgICBbc3RhdHVzXT1cInRhYi5iYWRnZVN0YXR1c1wiXG4gICAgICAgICAgW3Bvc2l0aW9uXT1cInRhYi5iYWRnZVBvc2l0aW9uXCI+XG4gICAgICAgIDwvbmItYmFkZ2U+XG4gICAgICA8L2xpPlxuICAgIDwvdWw+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItdGFiXCI+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpibG9ja306aG9zdC5mdWxsLXdpZHRoIC50YWJzZXR7anVzdGlmeS1jb250ZW50OnNwYWNlLWFyb3VuZH06aG9zdCA6Om5nLWRlZXAgbmItdGFie2ZsZXg6MTstbXMtZmxleDoxIDEgYXV0bztvdmVyZmxvdzphdXRvO2Rpc3BsYXk6bm9uZX06aG9zdCA6Om5nLWRlZXAgbmItdGFiLmNvbnRlbnQtYWN0aXZle2Rpc3BsYXk6YmxvY2t9Omhvc3QgLnRhYnNldHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2xpc3Qtc3R5bGUtdHlwZTpub25lO21hcmdpbjowO3BhZGRpbmc6MH06aG9zdCAudGFic2V0IC50YWJ7bWFyZ2luLWJvdHRvbTotMXB4O3RleHQtYWxpZ246Y2VudGVyO3Bvc2l0aW9uOnJlbGF0aXZlfTpob3N0IC50YWJzZXQgLnRhYi5hY3RpdmUgYTo6YmVmb3Jle2Rpc3BsYXk6YmxvY2t9Omhvc3QgLnRhYnNldCAudGFiIGF7ZGlzcGxheTpmbGV4O3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtZGVjb3JhdGlvbjpub25lfTpob3N0IC50YWJzZXQgLnRhYiBhOjpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7Y29udGVudDonJzt3aWR0aDoxMDAlO2JvcmRlci1yYWRpdXM6M3B4O2JvdHRvbTotMnB4O2xlZnQ6MH06aG9zdCAudGFic2V0IC50YWIgYSBuYi1pY29ue3ZlcnRpY2FsLWFsaWduOm1pZGRsZX1bZGlyPWx0cl0gOmhvc3QgLnRhYnNldCAudGFiIGEgbmItaWNvbitzcGFue21hcmdpbi1sZWZ0Oi41cmVtfVtkaXI9cnRsXSA6aG9zdCAudGFic2V0IC50YWIgYSBuYi1pY29uK3NwYW57bWFyZ2luLXJpZ2h0Oi41cmVtfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRhYnNldENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEFjdGl2YXRlZFJvdXRlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9XG5dO1xuTmJUYWJzZXRDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdGFiczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJUYWJDb21wb25lbnQsXSB9XSxcbiAgICBmdWxsV2lkdGhWYWx1ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZnVsbC13aWR0aCcsXSB9XSxcbiAgICBmdWxsV2lkdGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJvdXRlUGFyYW06IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNoYW5nZVRhYjogW3sgdHlwZTogT3V0cHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9UQUJTRVRfQ09NUE9ORU5UUyA9IFtcbiAgICBOYlRhYnNldENvbXBvbmVudCxcbiAgICBOYlRhYkNvbXBvbmVudCxcbl07XG5jbGFzcyBOYlRhYnNldE1vZHVsZSB7XG59XG5OYlRhYnNldE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJCYWRnZU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX1RBQlNFVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9UQUJTRVRfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGNvbXBvbmVudCBzaG93aW5nIGEgdXNlciBhdmF0YXIgKHBpY3R1cmUpIHdpdGggYSB1c2VyIG5hbWUgb24gdGhlIHJpZ2h0LlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgdXNlci91c2VyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgYGB0c1xuICogICA8bmItdXNlciBuYW1lPVwiSm9obiBEb2VcIiB0aXRsZT1cIkVuZ2luZWVyXCI+PC9uYi11c2VyPlxuICogYGBgXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJVc2VyTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlVzZXJNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIEF2YWlsYWJsZSBpbiBtdWx0aXBsZSBzaXplczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXVsdGlwbGUgU2l6ZXMsIHVzZXIvdXNlci1zaXplcy5jb21wb25lbnQpXG4gKlxuICpcbiAqIFlvdSBjYW4gaGlkZSB1bm5lY2Vzc2FyeSBjYXB0aW9ucyAobmFtZSwgdGl0bGUgb3IgYm90aCk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEhpZGUgY2FwdGlvbnMgaW4gdXNlciBjb21wb25lbnQsIHVzZXIvdXNlci1oaWRlLWNhcHRpb25zLmNvbXBvbmVudClcbiAqXG4gKlxuICogWW91IGNhbiBzZXQgY3VzdG9tIGF2YXRhciBiYWNrZ3JvdW5kLWNvbG9yLCB1c2VyIGltYWdlIChhcyBsaW5rIG9yIEJBU0U2NCBzdHJpbmcpIGFuZCBkaXNhYmxlIHVzZXIgaW5pdGlhbHM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YXRhciBpbWFnZSBzZXR0aW5ncywgdXNlci91c2VyLWF2YXRhci1zZXR0aW5ncy5jb21wb25lbnQpXG4gKlxuICogQ29tcG9uZW50IHNoYXBlIGNvdWxkIGJlIGNvbnRyb2xsZWQgd2l0aCBgc2hhcGVgIGlucHV0LlxuICogQHN0YWNrZWQtZXhhbXBsZShTaGFwZXMsIHVzZXIvdXNlci1zaGFwZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHVzZXItcGljdHVyZS1ib3gtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHVzZXItcGljdHVyZS1ib3gtYm9yZGVyLWNvbG9yOlxuICogdXNlci1waWN0dXJlLWJveC1ib3JkZXItd2lkdGg6XG4gKiB1c2VyLWluaXRpYWxzLXRleHQtY29sb3I6XG4gKiB1c2VyLWluaXRpYWxzLXRleHQtZm9udC1mYW1pbHk6XG4gKiB1c2VyLWluaXRpYWxzLXRleHQtZm9udC13ZWlnaHQ6XG4gKiB1c2VyLW5hbWUtdGV4dC1jb2xvcjpcbiAqIHVzZXItbmFtZS10ZXh0LWZvbnQtZmFtaWx5OlxuICogdXNlci1uYW1lLXRleHQtZm9udC13ZWlnaHQ6XG4gKiB1c2VyLXRpdGxlLXRleHQtY29sb3I6XG4gKiB1c2VyLXRpdGxlLXRleHQtZm9udC1mYW1pbHk6XG4gKiB1c2VyLXRpdGxlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiB1c2VyLXJlY3RhbmdsZS1ib3JkZXItcmFkaXVzOlxuICogdXNlci1zZW1pLXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiB1c2VyLXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiB1c2VyLXRpbnktaGVpZ2h0OlxuICogdXNlci10aW55LXdpZHRoOlxuICogdXNlci10aW55LWluaXRpYWxzLXRleHQtZm9udC1zaXplOlxuICogdXNlci10aW55LWluaXRpYWxzLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLXRpbnktbmFtZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItdGlueS1uYW1lLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLXRpbnktdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXRpbnktdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItc21hbGwtaGVpZ2h0OlxuICogdXNlci1zbWFsbC13aWR0aDpcbiAqIHVzZXItc21hbGwtaW5pdGlhbHMtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXNtYWxsLWluaXRpYWxzLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLXNtYWxsLW5hbWUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXNtYWxsLW5hbWUtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItc21hbGwtdGl0bGUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLXNtYWxsLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLW1lZGl1bS1oZWlnaHQ6XG4gKiB1c2VyLW1lZGl1bS13aWR0aDpcbiAqIHVzZXItbWVkaXVtLWluaXRpYWxzLXRleHQtZm9udC1zaXplOlxuICogdXNlci1tZWRpdW0taW5pdGlhbHMtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItbWVkaXVtLW5hbWUtdGV4dC1mb250LXNpemU6XG4gKiB1c2VyLW1lZGl1bS1uYW1lLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLW1lZGl1bS10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItbWVkaXVtLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWxhcmdlLWhlaWdodDpcbiAqIHVzZXItbGFyZ2Utd2lkdGg6XG4gKiB1c2VyLWxhcmdlLWluaXRpYWxzLXRleHQtZm9udC1zaXplOlxuICogdXNlci1sYXJnZS1pbml0aWFscy10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1sYXJnZS1uYW1lLXRleHQtZm9udC1zaXplOlxuICogdXNlci1sYXJnZS1uYW1lLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB1c2VyLWxhcmdlLXRpdGxlLXRleHQtZm9udC1zaXplOlxuICogdXNlci1sYXJnZS10aXRsZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1naWFudC1oZWlnaHQ6XG4gKiB1c2VyLWdpYW50LXdpZHRoOlxuICogdXNlci1naWFudC1pbml0aWFscy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItZ2lhbnQtaW5pdGlhbHMtdGV4dC1saW5lLWhlaWdodDpcbiAqIHVzZXItZ2lhbnQtbmFtZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItZ2lhbnQtbmFtZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdXNlci1naWFudC10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHVzZXItZ2lhbnQtdGl0bGUtdGV4dC1saW5lLWhlaWdodDpcbiAqL1xuY2xhc3MgTmJVc2VyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3Rvcihkb21TYW5pdGl6ZXIpIHtcbiAgICAgICAgdGhpcy5kb21TYW5pdGl6ZXIgPSBkb21TYW5pdGl6ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGVjaWZpZXMgYSBuYW1lIHRvIGJlIHNob3duIG9uIHRoZSByaWdodCBvZiBhIHVzZXIgcGljdHVyZVxuICAgICAgICAgKiBAdHlwZSBzdHJpbmdcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubmFtZSA9ICdBbm9ueW1vdXMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2l6ZSBvZiB0aGUgY29tcG9uZW50LlxuICAgICAgICAgKiBQb3NzaWJsZSB2YWx1ZXM6IGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAgKGRlZmF1bHQpLCBgbGFyZ2VgLCAnZ2lhbnQnLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaGFwZSBvZiB0aGUgcGljdHVyZSBib3guXG4gICAgICAgICAqIFBvc3NpYmxlIHZhbHVlczogYHJlY3RhbmdsZWAsIGBzZW1pLXJvdW5kYCwgYHJvdW5kYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hhcGUgPSAncm91bmQnO1xuICAgICAgICB0aGlzLl9zaG93TmFtZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Nob3dUaXRsZSA9IHRydWU7XG4gICAgICAgIHRoaXMuX3Nob3dJbml0aWFscyA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBCYWRnZSBzdGF0dXMgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICAgICAgICogYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYFxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhZGdlU3RhdHVzID0gJ2Jhc2ljJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWJzb2x1dGUgcGF0aCB0byBhIHVzZXIgcGljdHVyZSBvciBiYXNlNjQgaW1hZ2UuXG4gICAgICogVXNlciBuYW1lIGluaXRpYWxzIHdpbGwgYmUgc2hvd24gaWYgbm8gcGljdHVyZSBzcGVjaWZpZWQgKEpEIGZvciBKb2huIERvZSkuXG4gICAgICogQHR5cGUgc3RyaW5nXG4gICAgICovXG4gICAgc2V0IHBpY3R1cmUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbWFnZUJhY2tncm91bmRTdHlsZSA9IHZhbHVlID8gdGhpcy5kb21TYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKGB1cmwoJHt2YWx1ZX0pYCkgOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHNob3cgYSB1c2VyIG5hbWUgb3Igbm90XG4gICAgICovXG4gICAgZ2V0IHNob3dOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2hvd05hbWU7XG4gICAgfVxuICAgIHNldCBzaG93TmFtZSh2YWwpIHtcbiAgICAgICAgdGhpcy5fc2hvd05hbWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0byBzaG93IGEgdXNlciB0aXRsZSBvciBub3RcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgZ2V0IHNob3dUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dUaXRsZTtcbiAgICB9XG4gICAgc2V0IHNob3dUaXRsZSh2YWwpIHtcbiAgICAgICAgdGhpcy5fc2hvd1RpdGxlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc2hvdyBhIHVzZXIgaW5pdGlhbHMgKGlmIG5vIHBpY3R1cmUgc3BlY2lmaWVkKSBvciBub3RcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgZ2V0IHNob3dJbml0aWFscygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbml0aWFscztcbiAgICB9XG4gICAgc2V0IHNob3dJbml0aWFscyh2YWwpIHtcbiAgICAgICAgdGhpcy5fc2hvd0luaXRpYWxzID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFdoZXRoZXIgdG8gc2hvdyBvbmx5IGEgcGljdHVyZSBvciBhbHNvIHNob3cgdGhlIG5hbWUgYW5kIHRpdGxlXG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqL1xuICAgIGdldCBvbmx5UGljdHVyZSgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLnNob3dOYW1lICYmICF0aGlzLnNob3dUaXRsZTtcbiAgICB9XG4gICAgc2V0IG9ubHlQaWN0dXJlKHZhbCkge1xuICAgICAgICB0aGlzLnNob3dOYW1lID0gdGhpcy5zaG93VGl0bGUgPSAhY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgfVxuICAgIGdldCB0aW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzbWFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IGdpYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbiAgICBnZXQgcmVjdGFuZ2xlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3JlY3RhbmdsZSc7XG4gICAgfVxuICAgIGdldCBzZW1pUm91bmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAnc2VtaS1yb3VuZCc7XG4gICAgfVxuICAgIGdldCByb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdyb3VuZCc7XG4gICAgfVxuICAgIGdldEluaXRpYWxzKCkge1xuICAgICAgICBpZiAodGhpcy5uYW1lKSB7XG4gICAgICAgICAgICBjb25zdCBuYW1lcyA9IHRoaXMubmFtZS5zcGxpdCgnICcpO1xuICAgICAgICAgICAgcmV0dXJuIG5hbWVzLm1hcChuID0+IG4uY2hhckF0KDApKS5zcGxpY2UoMCwgMikuam9pbignJykudG9VcHBlckNhc2UoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxufVxuTmJVc2VyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi11c2VyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJ1c2VyLWNvbnRhaW5lclxcXCI+XFxuICA8ZGl2ICpuZ0lmPVxcXCJpbWFnZUJhY2tncm91bmRTdHlsZVxcXCIgY2xhc3M9XFxcInVzZXItcGljdHVyZSBpbWFnZVxcXCIgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVxcXCJpbWFnZUJhY2tncm91bmRTdHlsZVxcXCI+XFxuICAgIDxuYi1iYWRnZSAqbmdJZj1cXFwiYmFkZ2VUZXh0XFxcIiBbdGV4dF09XFxcImJhZGdlVGV4dFxcXCIgW3N0YXR1c109XFxcImJhZGdlU3RhdHVzXFxcIiBbcG9zaXRpb25dPVxcXCJiYWRnZVBvc2l0aW9uXFxcIj48L25iLWJhZGdlPlxcbiAgPC9kaXY+XFxuICA8ZGl2ICpuZ0lmPVxcXCIhaW1hZ2VCYWNrZ3JvdW5kU3R5bGVcXFwiIGNsYXNzPVxcXCJ1c2VyLXBpY3R1cmUgaW5pdGlhbHNcXFwiIFtzdHlsZS5iYWNrZ3JvdW5kLWNvbG9yXT1cXFwiY29sb3JcXFwiPlxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzaG93SW5pdGlhbHNcXFwiPlxcbiAgICAgIHt7IGdldEluaXRpYWxzKCkgfX1cXG4gICAgPC9uZy1jb250YWluZXI+XFxuICAgIDxuYi1iYWRnZSAqbmdJZj1cXFwiYmFkZ2VUZXh0XFxcIiBbdGV4dF09XFxcImJhZGdlVGV4dFxcXCIgW3N0YXR1c109XFxcImJhZGdlU3RhdHVzXFxcIiBbcG9zaXRpb25dPVxcXCJiYWRnZVBvc2l0aW9uXFxcIj48L25iLWJhZGdlPlxcbiAgPC9kaXY+XFxuXFxuICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWNvbnRhaW5lclxcXCI+XFxuICAgIDxkaXYgKm5nSWY9XFxcInNob3dOYW1lICYmIG5hbWVcXFwiIGNsYXNzPVxcXCJ1c2VyLW5hbWVcXFwiPnt7IG5hbWUgfX08L2Rpdj5cXG4gICAgPGRpdiAqbmdJZj1cXFwic2hvd1RpdGxlICYmIHRpdGxlXFxcIiBjbGFzcz1cXFwidXNlci10aXRsZVxcXCI+e3sgdGl0bGUgfX08L2Rpdj5cXG4gIDwvZGl2PlxcbjwvZGl2PlxcblwiLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4fTpob3N0IC51c2VyLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfTpob3N0IC51c2VyLXBpY3R1cmV7cG9zaXRpb246cmVsYXRpdmU7ZmxleC1zaHJpbms6MH06aG9zdCAudXNlci1waWN0dXJlLmltYWdle2JhY2tncm91bmQtc2l6ZTpjb3ZlcjtiYWNrZ3JvdW5kLXJlcGVhdDpuby1yZXBlYXR9Omhvc3QgLnVzZXItcGljdHVyZS5pbml0aWFsc3tkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXJ9W2Rpcj1ydGxdIDpob3N0IC51c2VyLW5hbWUsW2Rpcj1ydGxdIDpob3N0IC51c2VyLXRpdGxle3RleHQtYWxpZ246cmlnaHR9W2Rpcj1sdHJdIDpob3N0IC5pbmZvLWNvbnRhaW5lcnttYXJnaW4tbGVmdDouNXJlbX1bZGlyPXJ0bF0gOmhvc3QgLmluZm8tY29udGFpbmVye21hcmdpbi1yaWdodDouNXJlbX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJVc2VyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRG9tU2FuaXRpemVyIH1cbl07XG5OYlVzZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbmFtZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGl0bGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBpY3R1cmU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbG9yOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaGFwZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hvd05hbWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dUaXRsZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hvd0luaXRpYWxzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvbmx5UGljdHVyZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2VUZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBiYWRnZVN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYmFkZ2VQb3NpdGlvbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNtYWxsOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXNtYWxsJyxdIH1dLFxuICAgIG1lZGl1bTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1tZWRpdW0nLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgZ2lhbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtZ2lhbnQnLF0gfV0sXG4gICAgcmVjdGFuZ2xlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaGFwZS1yZWN0YW5nbGUnLF0gfV0sXG4gICAgc2VtaVJvdW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaGFwZS1zZW1pLXJvdW5kJyxdIH1dLFxuICAgIHJvdW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaGFwZS1yb3VuZCcsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgTkJfVVNFUl9DT01QT05FTlRTID0gW1xuICAgIE5iVXNlckNvbXBvbmVudCxcbl07XG5jbGFzcyBOYlVzZXJNb2R1bGUge1xufVxuTmJVc2VyTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkJhZGdlTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX1VTRVJfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfVVNFUl9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBBY3Rpb24gaXRlbSwgZGlzcGxheSBhIGxpbmsgd2l0aCBhbiBpY29uLCBvciBhbnkgb3RoZXIgY29udGVudCBwcm92aWRlZCBpbnN0ZWFkLlxuICovXG5jbGFzcyBOYkFjdGlvbkNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPcHRpb25hbCB0aXRsZSBmb3IgbW91c2VvdmVyXG4gICAgICAgICAqIEB0eXBlIHN0cmluZ1xuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50aXRsZSA9ICcnO1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQmFkZ2Ugc3RhdHVzIChhZGRzIHNwZWNpZmljIHN0eWxlcyk6XG4gICAgICAgICAqICdiYXNpYycsICdwcmltYXJ5JywgJ2luZm8nLCAnc3VjY2VzcycsICd3YXJuaW5nJywgJ2RhbmdlcicsICdjb250cm9sJ1xuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJhZGdlU3RhdHVzID0gJ2Jhc2ljJztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmlzdWFsbHkgZGlzYWJsZXMgdGhlIGl0ZW1cbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICovXG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVzZSBiYWRnZSBkb3QgbW9kZVxuICAgICAqIEB0eXBlIGJvb2xlYW5cbiAgICAgKi9cbiAgICBnZXQgYmFkZ2VEb3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9iYWRnZURvdDtcbiAgICB9XG4gICAgc2V0IGJhZGdlRG90KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2JhZGdlRG90ID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG59XG5OYkFjdGlvbkNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYWN0aW9uJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpY29uOyBlbHNlIHByb2plY3RlZENvbnRlbnRcIj5cbiAgICAgIDxhIGNsYXNzPVwiaWNvbi1jb250YWluZXJcIlxuICAgICAgICAgW3JvdXRlckxpbmtdPVwibGlua1wiXG4gICAgICAgICBbdGl0bGVdPVwidGl0bGVcIlxuICAgICAgICAgKm5nSWY9XCJsaW5rXCI+XG4gICAgICAgIDxuYi1pY29uIFtjb25maWddPVwiaWNvblwiPjwvbmItaWNvbj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJiYWRnZVRlbXBsYXRlXCI+PC9uZy1jb250YWluZXI+XG4gICAgICA8L2E+XG4gICAgICA8YSBjbGFzcz1cImljb24tY29udGFpbmVyXCJcbiAgICAgICAgIFtocmVmXT1cImhyZWZcIlxuICAgICAgICAgW3RpdGxlXT1cInRpdGxlXCJcbiAgICAgICAgICpuZ0lmPVwiaHJlZiAmJiAhbGlua1wiPlxuICAgICAgICA8bmItaWNvbiBbY29uZmlnXT1cImljb25cIj48L25iLWljb24+XG4gICAgICAgIDxuZy1jb250YWluZXIgW25nVGVtcGxhdGVPdXRsZXRdPVwiYmFkZ2VUZW1wbGF0ZVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgPC9hPlxuICAgICAgPGEgY2xhc3M9XCJpY29uLWNvbnRhaW5lclwiXG4gICAgICAgICBocmVmPVwiI1wiXG4gICAgICAgICBbdGl0bGVdPVwidGl0bGVcIlxuICAgICAgICAgKm5nSWY9XCIhaHJlZiAmJiAhbGlua1wiXG4gICAgICAgICAoY2xpY2spPVwiJGV2ZW50LnByZXZlbnREZWZhdWx0KClcIj5cbiAgICAgICAgPG5iLWljb24gW2NvbmZpZ109XCJpY29uXCI+PC9uYi1pY29uPlxuICAgICAgICA8bmctY29udGFpbmVyIFtuZ1RlbXBsYXRlT3V0bGV0XT1cImJhZGdlVGVtcGxhdGVcIj48L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvYT5cbiAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgIDxuZy10ZW1wbGF0ZSAjcHJvamVjdGVkQ29udGVudD5cbiAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDxuZy1jb250YWluZXIgW25nVGVtcGxhdGVPdXRsZXRdPVwiYmFkZ2VUZW1wbGF0ZVwiPjwvbmctY29udGFpbmVyPlxuICAgIDwvbmctdGVtcGxhdGU+XG4gICAgPG5nLXRlbXBsYXRlICNiYWRnZVRlbXBsYXRlPlxuICAgICAgPG5iLWJhZGdlICpuZ0lmPVwiYmFkZ2VUZXh0IHx8IGJhZGdlRG90XCJcbiAgICAgICAgICAgICAgICBbdGV4dF09XCJiYWRnZVRleHRcIlxuICAgICAgICAgICAgICAgIFtkb3RNb2RlXT1cImJhZGdlRG90XCJcbiAgICAgICAgICAgICAgICBbc3RhdHVzXT1cImJhZGdlU3RhdHVzXCJcbiAgICAgICAgICAgICAgICBbcG9zaXRpb25dPVwiYmFkZ2VQb3NpdGlvblwiPlxuICAgICAgPC9uYi1iYWRnZT5cbiAgICA8L25nLXRlbXBsYXRlPlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7YmFja2dyb3VuZDp0cmFuc3BhcmVudDtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3Bvc2l0aW9uOnJlbGF0aXZlfTpob3N0KC5kaXNhYmxlZCl7Y3Vyc29yOm5vdC1hbGxvd2VkfTpob3N0KC5kaXNhYmxlZCkgYSw6aG9zdCguZGlzYWJsZWQpIG5iLWljb257Y3Vyc29yOm5vdC1hbGxvd2VkfTpob3N0LWNvbnRleHQobmItYWN0aW9ucy5mdWxsLXdpZHRoKXtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO3dpZHRoOjEwMCV9YS5pY29uLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZX1hLmljb24tY29udGFpbmVyOmhvdmVyLGEuaWNvbi1jb250YWluZXI6Zm9jdXN7dGV4dC1kZWNvcmF0aW9uOm5vbmV9bmItaWNvbjpob3ZlcntjdXJzb3I6cG9pbnRlcn1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJBY3Rpb25Db21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbGluazogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaHJlZjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGl0bGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGljb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmRpc2FibGVkJyxdIH1dLFxuICAgIGJhZGdlRG90OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBiYWRnZVRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGJhZGdlU3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBiYWRnZVBvc2l0aW9uOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcbi8qKlxuICogU2hvd3MgYSBob3Jpem9udGFsIGxpc3Qgb2YgYWN0aW9ucywgYXZhaWxhYmxlIGluIG11bHRpcGxlIHNpemVzLlxuICogQWxpZ25zIGl0ZW1zIHZlcnRpY2FsbHkuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgYWN0aW9uL2FjdGlvbi1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQmFzaWMgYWN0aW9ucyBzZXR1cDpcbiAqIGBgYGh0bWxcbiAqIDxuYi1hY3Rpb25zIHNpemU9XCJzbWFsbFwiPlxuICogICA8bmItYWN0aW9uIGljb249XCJuYi1zZWFyY2hcIj48L25iLWFjdGlvbj5cbiAqICAgPG5iLWFjdGlvbiBpY29uPVwibmItcG93ZXItY2lyY2xlZFwiPjwvbmItYWN0aW9uPlxuICogICA8bmItYWN0aW9uIGljb249XCJuYi1wZXJzb25cIj48L25iLWFjdGlvbj5cbiAqIDwvbmItYWN0aW9ucz5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJBY3Rpb25zTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkFjdGlvbnNNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIE11bHRpcGxlIHNpemVzIGV4YW1wbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKE11bHRpcGxlIFNpemVzLCBhY3Rpb24vYWN0aW9uLXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIHNwZWNpZnkgYSBgYmFkZ2VgIHZhbHVlOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQWN0aW9uIEJhZGdlLCBhY3Rpb24vYWN0aW9uLWJhZGdlLmNvbXBvbmVudClcbiAqXG4gKiBhbmQgd2UgY2FuIHNldCBpdCB0byBmdWxsIGEgd2lkdGggb2YgYSBwYXJlbnQgY29tcG9uZW50XG4gKiBAc3RhY2tlZC1leGFtcGxlKEZ1bGwgV2lkdGgsIGFjdGlvbi9hY3Rpb24td2lkdGguY29tcG9uZW50KVxuICpcbiAqIEFjdGlvbiBkb3QgbW9kZVxuICogQHN0YWNrZWQtZXhhbXBsZShBY3Rpb24gYmFkZ2UgaW4gZG90IG1vZGUsIGFjdGlvbi9hY3Rpb24tZG90LW1vZGUuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBhY3Rpb25zLWJhY2tncm91bmQtY29sb3I6XG4gKiBhY3Rpb25zLWRpdmlkZXItY29sb3I6XG4gKiBhY3Rpb25zLWRpdmlkZXItc3R5bGU6XG4gKiBhY3Rpb25zLWRpdmlkZXItd2lkdGg6XG4gKiBhY3Rpb25zLWljb24tY29sb3I6XG4gKiBhY3Rpb25zLXRleHQtY29sb3I6XG4gKiBhY3Rpb25zLXRleHQtZm9udC1mYW1pbHk6XG4gKiBhY3Rpb25zLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBhY3Rpb25zLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBhY3Rpb25zLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBhY3Rpb25zLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBhY3Rpb25zLXRpbnktaGVpZ2h0OlxuICogYWN0aW9ucy10aW55LWljb24taGVpZ2h0OlxuICogYWN0aW9ucy10aW55LXBhZGRpbmc6XG4gKiBhY3Rpb25zLXRpbnktdGV4dC1mb250LXNpemU6XG4gKiBhY3Rpb25zLXNtYWxsLWhlaWdodDpcbiAqIGFjdGlvbnMtc21hbGwtaWNvbi1oZWlnaHQ6XG4gKiBhY3Rpb25zLXNtYWxsLXBhZGRpbmc6XG4gKiBhY3Rpb25zLXNtYWxsLXRleHQtZm9udC1zaXplOlxuICogYWN0aW9ucy1tZWRpdW0taGVpZ2h0OlxuICogYWN0aW9ucy1tZWRpdW0taWNvbi1oZWlnaHQ6XG4gKiBhY3Rpb25zLW1lZGl1bS1wYWRkaW5nOlxuICogYWN0aW9ucy1tZWRpdW0tdGV4dC1mb250LXNpemU6XG4gKiBhY3Rpb25zLWxhcmdlLWhlaWdodDpcbiAqIGFjdGlvbnMtbGFyZ2UtaWNvbi1oZWlnaHQ6XG4gKiBhY3Rpb25zLWxhcmdlLXBhZGRpbmc6XG4gKiBhY3Rpb25zLWxhcmdlLXRleHQtZm9udC1zaXplOlxuICogYWN0aW9ucy1naWFudC1oZWlnaHQ6XG4gKiBhY3Rpb25zLWdpYW50LWljb24taGVpZ2h0OlxuICogYWN0aW9ucy1naWFudC1wYWRkaW5nOlxuICogYWN0aW9ucy1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqL1xuY2xhc3MgTmJBY3Rpb25zQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fc2l6ZSA9ICdzbWFsbCc7XG4gICAgICAgIHRoaXMuX2Z1bGxXaWR0aCA9IGZhbHNlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaXplIG9mIHRoZSBjb21wb25lbnQ6ICd0aW55JywgJ3NtYWxsJyAoZGVmYXVsdCksICdtZWRpdW0nLCAnbGFyZ2UnLCAnZ2lhbnQnXG4gICAgICovXG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zaXplO1xuICAgIH1cbiAgICBzZXQgc2l6ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9zaXplID0gdmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXBvbmVudCB3aWxsIGZpbGwgZnVsbCB3aWR0aCBvZiB0aGUgY29udGFpbmVyXG4gICAgICovXG4gICAgZ2V0IGZ1bGxXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGxXaWR0aDtcbiAgICB9XG4gICAgc2V0IGZ1bGxXaWR0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgdGlueSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3RpbnknO1xuICAgIH1cbiAgICBnZXQgc21hbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgfVxuICAgIGdldCBtZWRpdW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgIH1cbiAgICBnZXQgbGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gICAgfVxuICAgIGdldCBnaWFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICB9XG59XG5OYkFjdGlvbnNDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFjdGlvbnMnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItYWN0aW9uXCI+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJBY3Rpb25zQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZ1bGxXaWR0aDogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5mdWxsLXdpZHRoJyxdIH1dLFxuICAgIHRpbnk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtdGlueScsXSB9XSxcbiAgICBzbWFsbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1zbWFsbCcsXSB9XSxcbiAgICBtZWRpdW06IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbWVkaXVtJyxdIH1dLFxuICAgIGxhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIGdpYW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWdpYW50JyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9BQ1RJT05TX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJBY3Rpb25Db21wb25lbnQsXG4gICAgTmJBY3Rpb25zQ29tcG9uZW50LFxuXTtcbmNsYXNzIE5iQWN0aW9uc01vZHVsZSB7XG59XG5OYkFjdGlvbnNNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iQmFkZ2VNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9BQ1RJT05TX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX0FDVElPTlNfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU2VhcmNoIGNvbXBvbmVudCBzZXJ2aWNlLCBjb25uZWN0cyB5b3VyIGNvZGUgdG8gYSBwYWdlLWxldmVsIHNlYXJjaCBjb21wb25lbnQuXG4gKi9cbmNsYXNzIE5iU2VhcmNoU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoU3VibWl0dGluZ3MkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hBY3RpdmF0aW9ucyQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNlYXJjaERlYWN0aXZhdGlvbnMkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zZWFyY2hJbnB1dCQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICAvKioqXG4gICAgICogQWN0aXZhdGUgKG9wZW4pIHNlYXJjaCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoVHlwZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBhY3RpdmF0ZVNlYXJjaChzZWFyY2hUeXBlLCB0YWcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hBY3RpdmF0aW9ucyQubmV4dCh7IHNlYXJjaFR5cGUsIHRhZyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVhY3RpYmF0ZSAoY2xvc2UpIHNlYXJjaCBjb21wb25lbnRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoVHlwZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0YWdcbiAgICAgKi9cbiAgICBkZWFjdGl2YXRlU2VhcmNoKHNlYXJjaFR5cGUsIHRhZykge1xuICAgICAgICB0aGlzLnNlYXJjaERlYWN0aXZhdGlvbnMkLm5leHQoeyBzZWFyY2hUeXBlLCB0YWcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRyaWdnZXIgc2VhcmNoIHN1Ym1pdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXJtXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZ1xuICAgICAqL1xuICAgIHN1Ym1pdFNlYXJjaCh0ZXJtLCB0YWcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hTdWJtaXR0aW5ncyQubmV4dCh7IHRlcm0sIHRhZyB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJpZ2dlciBzZWFyY2ggc3VibWl0IGJ5IGlucHV0IGV2ZW50XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRlcm1cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGFnXG4gICAgICovXG4gICAgc2VhcmNoSW5wdXQodGVybSwgdGFnKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXQkLm5leHQoeyB0ZXJtLCB0YWcgfSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN1YnNjcmliZSB0byAnYWN0aXZhdGUnIGV2ZW50XG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZTx7c2VhcmNoVHlwZTogc3RyaW5nOyB0YWc/OiBzdHJpbmd9PlxuICAgICAqL1xuICAgIG9uU2VhcmNoQWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaEFjdGl2YXRpb25zJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gJ2RlYWN0aXZhdGUnIGV2ZW50XG4gICAgICogQHJldHVybnMgT2JzZXJ2YWJsZTx7c2VhcmNoVHlwZTogc3RyaW5nOyB0YWc/OiBzdHJpbmd9PlxuICAgICAqL1xuICAgIG9uU2VhcmNoRGVhY3RpdmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoRGVhY3RpdmF0aW9ucyQucGlwZShzaGFyZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU3Vic2NyaWJlIHRvICdzdWJtaXQnIGV2ZW50ICh3aGVuIHN1Ym1pdCBidXR0b24gY2xpY2tlZClcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHt0ZXJtOiBzdHJpbmc7IHRhZz86IHN0cmluZ30+XG4gICAgICovXG4gICAgb25TZWFyY2hTdWJtaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlYXJjaFN1Ym1pdHRpbmdzJC5waXBlKHNoYXJlKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdWJzY3JpYmUgdG8gaW5wdXQgZXZlbnRcbiAgICAgKiBAcmV0dXJucyBPYnNlcnZhYmxlPHt0ZXJtOiBzdHJpbmc7IHRhZz86IHN0cmluZ30+XG4gICAgICovXG4gICAgb25TZWFyY2hJbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoSW5wdXQkLnBpcGUoc2hhcmUoKSk7XG4gICAgfVxufVxuTmJTZWFyY2hTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogc2VhcmNoLWZpZWxkLWNvbXBvbmVudCBpcyB1c2VkIHVuZGVyIHRoZSBob29kIGJ5IG5iLXNlYXJjaCBjb21wb25lbnRcbiAqIGNhbid0IGJlIHVzZWQgaXRzZWxmXG4gKi9cbmNsYXNzIE5iU2VhcmNoRmllbGRDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNob3cgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWFyY2ggPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMuc2VhcmNoSW5wdXQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGdldCBzaG93Q2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3c7XG4gICAgfVxuICAgIGdldCBtb2RhbFpvb21pbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudC5UWVBFX01PREFMX1pPT01JTjtcbiAgICB9XG4gICAgZ2V0IHJvdGF0ZUxheW91dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudC5UWVBFX1JPVEFURV9MQVlPVVQ7XG4gICAgfVxuICAgIGdldCBtb2RhbE1vdmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9NT1ZFO1xuICAgIH1cbiAgICBnZXQgY3VydGFpbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gTmJTZWFyY2hGaWVsZENvbXBvbmVudC5UWVBFX0NVUlRBSU47XG4gICAgfVxuICAgIGdldCBjb2x1bW5DdXJ0YWluKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfQ09MVU1OX0NVUlRBSU47XG4gICAgfVxuICAgIGdldCBtb2RhbERyb3AoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9EUk9QO1xuICAgIH1cbiAgICBnZXQgbW9kYWxIYWxmKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09PSBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfTU9EQUxfSEFMRjtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoeyBzaG93IH0pIHtcbiAgICAgICAgY29uc3QgYmVjYW1lSGlkZGVuID0gIXNob3cuaXNGaXJzdENoYW5nZSgpICYmIHNob3cuY3VycmVudFZhbHVlID09PSBmYWxzZTtcbiAgICAgICAgaWYgKGJlY2FtZUhpZGRlbiAmJiB0aGlzLmlucHV0RWxlbWVudCkge1xuICAgICAgICAgICAgdGhpcy5pbnB1dEVsZW1lbnQubmF0aXZlRWxlbWVudC52YWx1ZSA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpO1xuICAgIH1cbiAgICBlbWl0Q2xvc2UoKSB7XG4gICAgICAgIHRoaXMuY2xvc2UuZW1pdCgpO1xuICAgIH1cbiAgICBzdWJtaXRTZWFyY2godGVybSkge1xuICAgICAgICBpZiAodGVybSkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2guZW1pdCh0ZXJtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbWl0U2VhcmNoSW5wdXQodGVybSkge1xuICAgICAgICB0aGlzLnNlYXJjaElucHV0LmVtaXQodGVybSk7XG4gICAgfVxuICAgIGZvY3VzSW5wdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3cgJiYgdGhpcy5pbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbk5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9aT09NSU4gPSAnbW9kYWwtem9vbWluJztcbk5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9ST1RBVEVfTEFZT1VUID0gJ3JvdGF0ZS1sYXlvdXQnO1xuTmJTZWFyY2hGaWVsZENvbXBvbmVudC5UWVBFX01PREFMX01PVkUgPSAnbW9kYWwtbW92ZSc7XG5OYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfQ1VSVEFJTiA9ICdjdXJ0YWluJztcbk5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9DT0xVTU5fQ1VSVEFJTiA9ICdjb2x1bW4tY3VydGFpbic7XG5OYlNlYXJjaEZpZWxkQ29tcG9uZW50LlRZUEVfTU9EQUxfRFJPUCA9ICdtb2RhbC1kcm9wJztcbk5iU2VhcmNoRmllbGRDb21wb25lbnQuVFlQRV9NT0RBTF9IQUxGID0gJ21vZGFsLWhhbGYnO1xuTmJTZWFyY2hGaWVsZENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2VhcmNoLWZpZWxkJyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJzZWFyY2hcIiAoa2V5dXAuZXNjKT1cImVtaXRDbG9zZSgpXCI+XG4gICAgICA8YnV0dG9uIChjbGljayk9XCJlbWl0Q2xvc2UoKVwiIG5iQnV0dG9uIGdob3N0IGNsYXNzPVwiY2xvc2UtYnV0dG9uXCI+XG4gICAgICAgIDxuYi1pY29uIGljb249XCJjbG9zZS1vdXRsaW5lXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiPjwvbmItaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGRpdiBjbGFzcz1cImZvcm0td3JhcHBlclwiPlxuICAgICAgICA8Zm9ybSBjbGFzcz1cImZvcm1cIiAoa2V5dXAuZW50ZXIpPVwic3VibWl0U2VhcmNoKHNlYXJjaElucHV0LnZhbHVlKVwiPlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJmb3JtLWNvbnRlbnRcIj5cbiAgICAgICAgICAgIDxpbnB1dCBjbGFzcz1cInNlYXJjaC1pbnB1dFwiXG4gICAgICAgICAgICAgICAgICAgI3NlYXJjaElucHV0XG4gICAgICAgICAgICAgICAgICAgKGlucHV0KT1cImVtaXRTZWFyY2hJbnB1dChzZWFyY2hJbnB1dC52YWx1ZSlcIlxuICAgICAgICAgICAgICAgICAgIGF1dG9jb21wbGV0ZT1cIm9mZlwiXG4gICAgICAgICAgICAgICAgICAgW2F0dHIucGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgIHRhYmluZGV4PVwiLTFcIlxuICAgICAgICAgICAgICAgICAgIChibHVyKT1cImZvY3VzSW5wdXQoKVwiLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cImluZm9cIj57eyBoaW50IH19PC9zcGFuPlxuICAgICAgICA8L2Zvcm0+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IGJ1dHRvbnttYXJnaW46MDtwYWRkaW5nOjA7Y3Vyc29yOnBvaW50ZXI7Ym9yZGVyOm5vbmU7YmFja2dyb3VuZDpub25lfTpob3N0IGJ1dHRvbjpmb2N1c3tib3gtc2hhZG93Om5vbmU7b3V0bGluZTpub25lfTpob3N0IGlucHV0e2JvcmRlci10b3A6MDtib3JkZXItcmlnaHQ6MDtib3JkZXItbGVmdDowO2JhY2tncm91bmQ6dHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czowO2xpbmUtaGVpZ2h0OjE7ZGlzcGxheTppbmxpbmUtYmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O3BhZGRpbmc6MC4wNXJlbSAwOy13ZWJraXQtYXBwZWFyYW5jZTpub25lfTpob3N0IGlucHV0OmZvY3Vze291dGxpbmU6bm9uZX06aG9zdCBpbnB1dDo6cGxhY2Vob2xkZXJ7b3BhY2l0eTowLjN9Omhvc3Qgc3Bhbntmb250LXNpemU6OTAlO2ZvbnQtd2VpZ2h0OmJvbGQ7ZGlzcGxheTpibG9jazt3aWR0aDo3NSU7bWFyZ2luOjAgYXV0bztwYWRkaW5nOjAuODVyZW0gMDt0ZXh0LWFsaWduOnJpZ2h0fTpob3N0Lm1vZGFsLXpvb21pbntkaXNwbGF5OmJsb2NrfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoe2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7cG9zaXRpb246Zml4ZWQ7ei1pbmRleDoxMDUwO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC41c306aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaDo6YmVmb3JlLDpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoOjphZnRlcntjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOmNhbGMoMTAwJSArIDE1cHgpO2hlaWdodDpjYWxjKDEwMCUgKyAxNXB4KTtwb2ludGVyLWV2ZW50czpub25lfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoOjpiZWZvcmV7dG9wOjA7bGVmdDowO2JvcmRlci1yaWdodC13aWR0aDowO2JvcmRlci1ib3R0b20td2lkdGg6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoLTE1cHgsIC0xNXB4LCAwKX06aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaDo6YWZ0ZXJ7cmlnaHQ6MDtib3R0b206MDtib3JkZXItdG9wLXdpZHRoOjA7Ym9yZGVyLWxlZnQtd2lkdGg6MDt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMTVweCwgMTVweCwgMCl9Omhvc3QubW9kYWwtem9vbWluIC5zZWFyY2ggYnV0dG9ue3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2ZvbnQtc2l6ZToyLjVyZW19W2Rpcj1sdHJdIDpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoIGJ1dHRvbntyaWdodDozcmVtfVtkaXI9cnRsXSA6aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0Lm1vZGFsLXpvb21pbiAuc2VhcmNoIGlucHV0e2ZvbnQtc2l6ZToxMHZ3O3dpZHRoOjc1JX06aG9zdC5tb2RhbC16b29taW4gLnNlYXJjaCBidXR0b257b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC41cywgdHJhbnNmb3JtIDAuNXN9Omhvc3QubW9kYWwtem9vbWluIC5zZWFyY2ggZm9ybXtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoe3BvaW50ZXItZXZlbnRzOmF1dG87b3BhY2l0eToxfTpob3N0Lm1vZGFsLXpvb21pbi5zaG93IC5zZWFyY2g6OmJlZm9yZSw6aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoOjphZnRlcnt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC16b29taW4uc2hvdyAuc2VhcmNoIGJ1dHRvbntvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9Omhvc3QubW9kYWwtem9vbWluLnNob3cgLnNlYXJjaCBmb3Jte29wYWNpdHk6MTt0cmFuc2Zvcm06c2NhbGUzZCgxLCAxLCAxKX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QubW9kYWwtem9vbWluIGZvcm17bWFyZ2luOjVyZW0gMCAxcmVtfTpob3N0Lm1vZGFsLXpvb21pbiBzcGFue3RleHQtYWxpZ246bGVmdH19XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5yb3RhdGUtbGF5b3V0e3Bvc2l0aW9uOmZpeGVkO292ZXJmbG93OmhpZGRlbjt3aWR0aDoxMDAlfTo6bmctZGVlcCBuYi1sYXlvdXQucm90YXRlLWxheW91dCAuc2Nyb2xsYWJsZS1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDoxMDAwMTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjVzIGN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSl9OjpuZy1kZWVwIG5iLWxheW91dC5yb3RhdGUtbGF5b3V0LndpdGgtc2VhcmNoIC5zY3JvbGxhYmxlLWNvbnRhaW5lcnt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjVzIGN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSk7dHJhbnNmb3JtLW9yaWdpbjo1MHZ3IDUwdmg7dHJhbnNmb3JtOnBlcnNwZWN0aXZlKDEwMDBweCkgdHJhbnNsYXRlM2QoMCwgNTB2aCwgMCkgcm90YXRlM2QoMSwgMCwgMCwgMzBkZWcpO3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3Qucm90YXRlLWxheW91dHtwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMHZ3O2hlaWdodDoxMDB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHk7dHJhbnNpdGlvbi1kZWxheTowLjRzfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaHtkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246Y29sdW1uO2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3RleHQtYWxpZ246Y2VudGVyO3otaW5kZXg6MTA1MDtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6NTB2aDtwb2ludGVyLWV2ZW50czpub25lO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC41czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjNyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfVtkaXI9bHRyXSA6aG9zdC5yb3RhdGUtbGF5b3V0IC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjNyZW19W2Rpcj1ydGxdIDpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0LnJvdGF0ZS1sYXlvdXQgLnNlYXJjaCBmb3Jte21hcmdpbjo1cmVtIDA7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuNywgMC43LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC41cywgdHJhbnNmb3JtIDAuNXM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKX06aG9zdC5yb3RhdGUtbGF5b3V0IC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjd2dzt3aWR0aDo3NSV9Omhvc3Qucm90YXRlLWxheW91dC5zaG93e29wYWNpdHk6MTt0cmFuc2l0aW9uLWRlbGF5OjBzfTpob3N0LnJvdGF0ZS1sYXlvdXQuc2hvdyAuc2VhcmNoe3BvaW50ZXItZXZlbnRzOmF1dG87b3BhY2l0eToxfTpob3N0LnJvdGF0ZS1sYXlvdXQuc2hvdyAuc2VhcmNoIGJ1dHRvbntvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9Omhvc3Qucm90YXRlLWxheW91dC5zaG93IC5zZWFyY2ggZm9ybXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMSwgMSl9XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5tb2RhbC1tb3ZlIC5sYXlvdXR7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC41c306Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLW1vdmUud2l0aC1zZWFyY2ggLmxheW91dHt0cmFuc2Zvcm06c2NhbGUzZCgwLjgsIDAuOCwgMSk7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1tb3ZlIC5zZWFyY2h7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMHZoO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzfTpob3N0Lm1vZGFsLW1vdmUgLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjNyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXN9W2Rpcj1sdHJdIDpob3N0Lm1vZGFsLW1vdmUgLnNlYXJjaCBidXR0b257cmlnaHQ6M3JlbX1bZGlyPXJ0bF0gOmhvc3QubW9kYWwtbW92ZSAuc2VhcmNoIGJ1dHRvbntsZWZ0OjNyZW19Omhvc3QubW9kYWwtbW92ZSAuc2VhcmNoIGZvcm17bWFyZ2luOjVyZW0gMDtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC44LCAwLjgsIDEpO3RyYW5zaXRpb246b3BhY2l0eSAwLjVzLCB0cmFuc2Zvcm0gMC41c306aG9zdC5tb2RhbC1tb3ZlIC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjEwdnc7d2lkdGg6NzUlO3RyYW5zZm9ybTpzY2FsZTNkKDAsIDEsIDEpO3RyYW5zZm9ybS1vcmlnaW46MCA1MCU7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zc306aG9zdC5tb2RhbC1tb3ZlLnNob3cgLnNlYXJjaHtwb2ludGVyLWV2ZW50czphdXRvO29wYWNpdHk6MX06aG9zdC5tb2RhbC1tb3ZlLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxfTpob3N0Lm1vZGFsLW1vdmUuc2hvdyAuc2VhcmNoIGZvcm17b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0Lm1vZGFsLW1vdmUuc2hvdyAuc2VhcmNoIGlucHV0e3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpO3RyYW5zaXRpb24tZHVyYXRpb246MC41c31AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QubW9kYWwtbW92ZSBzcGFue3RleHQtYWxpZ246bGVmdH19XFxuXCIsIFwiOmhvc3QuY3VydGFpbiAuc2VhcmNoe3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6MTA1MDt0b3A6MDtsZWZ0OjEwMCU7b3ZlcmZsb3c6aGlkZGVuO2hlaWdodDoxMDB2aDt3aWR0aDoxMDAlO3BhZGRpbmc6M3JlbTtwb2ludGVyLWV2ZW50czpub25lO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuM3M7dHJhbnNpdGlvbi1kZWxheTowLjRzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTpob3N0LmN1cnRhaW4gLnNlYXJjaDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTpob3N0LmN1cnRhaW4gLnNlYXJjaCBidXR0b257Zm9udC1zaXplOjIuNXJlbTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6M3JlbTt0cmFuc2l0aW9uOm9wYWNpdHkgMC4xczt0cmFuc2l0aW9uLWRlbGF5OjAuM3N9W2Rpcj1sdHJdIDpob3N0LmN1cnRhaW4gLnNlYXJjaCBidXR0b257cmlnaHQ6M3JlbX1bZGlyPXJ0bF0gOmhvc3QuY3VydGFpbiAuc2VhcmNoIGJ1dHRvbntsZWZ0OjNyZW19Omhvc3QuY3VydGFpbiAuc2VhcmNoIGZvcm17d2lkdGg6NTAlO29wYWNpdHk6MDt0cmFuc2Zvcm06c2NhbGUzZCgwLjgsIDAuOCwgMSk7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXMsIHRyYW5zZm9ybSAwLjVzfTpob3N0LmN1cnRhaW4gLnNlYXJjaCBpbnB1dHt3aWR0aDoxMDAlO2ZvbnQtc2l6ZTo2dnd9Omhvc3QuY3VydGFpbi5zaG93IC5zZWFyY2h7d2lkdGg6MTAwJTtwb2ludGVyLWV2ZW50czphdXRvO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTAwJSwgMCwgMCk7dHJhbnNpdGlvbi1kZWxheTowc306aG9zdC5jdXJ0YWluLnNob3cgLnNlYXJjaDo6YWZ0ZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDEwMCUsIDAsIDApO3RyYW5zaXRpb24tZGVsYXk6MC40c306aG9zdC5jdXJ0YWluLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0LmN1cnRhaW4uc2hvdyAuc2VhcmNoIGZvcm17b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDQwZW0pezpob3N0LmN1cnRhaW4gc3Bhbnt3aWR0aDo5MCV9Omhvc3QuY3VydGFpbiBpbnB1dHtmb250LXNpemU6MmVtO3dpZHRoOjkwJX19OjpuZy1kZWVwIG5iLWxheW91dC5jdXJ0YWluIC5zY3JvbGxhYmxlLWNvbnRhaW5lcntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4OjB9XFxuXCIsIFwiOjpuZy1kZWVwIG5iLWxheW91dC5jb2x1bW4tY3VydGFpbi53aXRoLXNlYXJjaCAubGF5b3V0e3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QuY29sdW1uLWN1cnRhaW57ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDo1MCU7b3ZlcmZsb3c6aGlkZGVuO3dpZHRoOjUwJTtoZWlnaHQ6MTAwdmg7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5jb2x1bW4tY3VydGFpbjo6YmVmb3Jle2NvbnRlbnQ6Jyc7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dHJhbnNmb3JtOnNjYWxlM2QoMCwgMSwgMSk7dHJhbnNmb3JtLW9yaWdpbjowIDUwJTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjNzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjg2LCAwLCAwLjA3LCAxKX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoe3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6Mi41cmVtIDEuNXJlbSAwO2JhY2tncm91bmQ6dHJhbnNwYXJlbnR9Omhvc3QuY29sdW1uLWN1cnRhaW4gLnNlYXJjaCBidXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjJyZW07Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNXN9W2Rpcj1sdHJdIDpob3N0LmNvbHVtbi1jdXJ0YWluIC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjJyZW19W2Rpcj1ydGxdIDpob3N0LmNvbHVtbi1jdXJ0YWluIC5zZWFyY2ggYnV0dG9ue2xlZnQ6MnJlbX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIGZvcm17d2lkdGg6ODUlO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgtMTUwJSwgMCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC4zc306aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIGlucHV0e2ZvbnQtc2l6ZToyLjVyZW07d2lkdGg6MTAwJX06aG9zdC5jb2x1bW4tY3VydGFpbiAuc2VhcmNoIHNwYW57Zm9udC1zaXplOjg1JX06aG9zdC5jb2x1bW4tY3VydGFpbi5zaG93e3BvaW50ZXItZXZlbnRzOmF1dG99Omhvc3QuY29sdW1uLWN1cnRhaW4uc2hvdzo6YmVmb3Jle3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0LmNvbHVtbi1jdXJ0YWluLnNob3cgLnNlYXJjaCBmb3Jte3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAwLCAwKTt0cmFuc2l0aW9uLWRlbGF5OjAuMTVzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjg2LCAwLCAwLjA3LCAxKX06aG9zdC5jb2x1bW4tY3VydGFpbi5zaG93IC5zZWFyY2ggYnV0dG9ue29wYWNpdHk6MTt6LWluZGV4OjEwMH1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiA0MHJlbSl7Omhvc3QuY29sdW1uLWN1cnRhaW4gc3Bhbnt3aWR0aDo5MCV9Omhvc3QuY29sdW1uLWN1cnRhaW4gaW5wdXR7Zm9udC1zaXplOjJyZW07d2lkdGg6OTAlfX1cXG5cIiwgXCI6Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLWRyb3AgLmxheW91dHtwb3NpdGlvbjpyZWxhdGl2ZTt0cmFuc2l0aW9uOnRyYW5zZm9ybSAwLjRzLCBvcGFjaXR5IDAuNHM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuNCwgMCwgMC4yLCAxKX06Om5nLWRlZXAgbmItbGF5b3V0Lm1vZGFsLWRyb3Aud2l0aC1zZWFyY2ggLmxheW91dHtvcGFjaXR5OjA7dHJhbnNmb3JtOnNjYWxlM2QoMC45LCAwLjksIDEpO3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QubW9kYWwtZHJvcCAuc2VhcmNoe2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7dGV4dC1hbGlnbjpjZW50ZXI7ei1pbmRleDoxMDUwO3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2g6OmJlZm9yZXtjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO3JpZ2h0OjA7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTtvcGFjaXR5OjA7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNHN9Omhvc3QubW9kYWwtZHJvcCAuc2VhcmNoIGJ1dHRvbntmb250LXNpemU6Mi41cmVtO3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2Rpc3BsYXk6YmxvY2s7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjRzfVtkaXI9bHRyXSA6aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggYnV0dG9ue3JpZ2h0OjNyZW19W2Rpcj1ydGxdIDpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCBidXR0b257bGVmdDozcmVtfTpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCBmb3Jte3Bvc2l0aW9uOnJlbGF0aXZlO21hcmdpbjo1cmVtIDAgMnJlbX06aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggaW5wdXR7Zm9udC1zaXplOjZ2dzt3aWR0aDo2MCU7cGFkZGluZzowLjI1cmVtO3RleHQtYWxpZ246Y2VudGVyO29wYWNpdHk6MDt0cmFuc2l0aW9uOm9wYWNpdHkgMC40c306aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggc3Bhbntwb3NpdGlvbjpyZWxhdGl2ZTt6LWluZGV4Ojk7ZGlzcGxheTpibG9jazt3aWR0aDo2MCU7cGFkZGluZzowLjg1cmVtIDA7b3BhY2l0eTowO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAtNTBweCwgMCk7dHJhbnNpdGlvbjpvcGFjaXR5IDAuNHMsIHRyYW5zZm9ybSAwLjRzfTpob3N0Lm1vZGFsLWRyb3AgLnNlYXJjaCAuZm9ybS1jb250ZW50e3Bvc2l0aW9uOnJlbGF0aXZlO3otaW5kZXg6MTA7b3ZlcmZsb3c6aGlkZGVuO3RyYW5zZm9ybTp0cmFuc2xhdGUzZCgwLCAtNTBweCwgMCk7dHJhbnNpdGlvbjp0cmFuc2Zvcm0gMC40c306aG9zdC5tb2RhbC1kcm9wIC5zZWFyY2ggLmZvcm0tY29udGVudDo6YWZ0ZXJ7Y29udGVudDonJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtsZWZ0OjIwJTt3aWR0aDo2MCU7aGVpZ2h0OjEwNSU7b3BhY2l0eTowO3RyYW5zZm9ybS1vcmlnaW46NTAlIDB9Omhvc3QubW9kYWwtZHJvcC5zaG93IC5zZWFyY2h7cG9pbnRlci1ldmVudHM6YXV0b306aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaDo6YmVmb3Jle29wYWNpdHk6MX06aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxfTpob3N0Lm1vZGFsLWRyb3Auc2hvdyAuc2VhcmNoIC5mb3JtLWNvbnRlbnR7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsIDAsIDApO3RyYW5zaXRpb246bm9uZX06aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCAuZm9ybS1jb250ZW50OjphZnRlcnthbmltYXRpb246c2NhbGVVcERvd24gMC44cyBjdWJpYy1iZXppZXIoMC40LCAwLCAwLjIsIDEpIGZvcndhcmRzfTpob3N0Lm1vZGFsLWRyb3Auc2hvdyAuc2VhcmNoIGlucHV0e29wYWNpdHk6MTt0cmFuc2l0aW9uOm9wYWNpdHkgMHMgMC40c306aG9zdC5tb2RhbC1kcm9wLnNob3cgLnNlYXJjaCBzcGFue29wYWNpdHk6MTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgMCwgMCk7dHJhbnNpdGlvbi1kZWxheTowLjRzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fUBrZXlmcmFtZXMgc2NhbGVVcERvd257MCV7b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDAsIDEpfTUwJXt0cmFuc2Zvcm06c2NhbGUzZCgxLCAxLCAxKTt0cmFuc2Zvcm0tb3JpZ2luOjUwJSAwO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2Utb3V0fTUwLjEle3RyYW5zZm9ybS1vcmlnaW46NTAlIDEwMCU7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1vdXR9MTAwJXtvcGFjaXR5OjE7dHJhbnNmb3JtOnNjYWxlM2QoMSwgMCwgMSk7dHJhbnNmb3JtLW9yaWdpbjo1MCUgMTAwJTt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjplYXNlLW91dH19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNDByZW0pezpob3N0Lm1vZGFsLWRyb3AgZm9ybXttYXJnaW46MnJlbSAwfTpob3N0Lm1vZGFsLWRyb3AgaW5wdXR7d2lkdGg6MTAwJTtsZWZ0OjB9fVxcblwiLCBcIjo6bmctZGVlcCBuYi1sYXlvdXQubW9kYWwtaGFsZiAubGF5b3V0e3RyYW5zaXRpb246dHJhbnNmb3JtIDAuNnMsIG9wYWNpdHkgMC42czt0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4yLCAxLCAwLjMsIDEpfTo6bmctZGVlcCBuYi1sYXlvdXQubW9kYWwtaGFsZi53aXRoLXNlYXJjaCAubGF5b3V0e3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTtwb2ludGVyLWV2ZW50czpub25lfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaHt0ZXh0LWFsaWduOmNlbnRlcjtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNTA7dG9wOjA7bGVmdDowO292ZXJmbG93OmhpZGRlbjt3aWR0aDoxMDAlO2hlaWdodDoxMDB2aDtiYWNrZ3JvdW5kOm5vbmU7cG9pbnRlci1ldmVudHM6bm9uZX06aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2g6OmJlZm9yZXtjb250ZW50OicnO3Bvc2l0aW9uOmFic29sdXRlO3RvcDowO2xlZnQ6MDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO3BvaW50ZXItZXZlbnRzOm5vbmU7b3BhY2l0eTowO3RyYW5zaXRpb246b3BhY2l0eSAwLjZzO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmN1YmljLWJlemllcigwLjIsIDEsIDAuMywgMSl9Omhvc3QubW9kYWwtaGFsZiAuc2VhcmNoIGJ1dHRvbntmb250LXNpemU6Mi41cmVtO3Bvc2l0aW9uOmFic29sdXRlO3RvcDozcmVtO2Rpc3BsYXk6YmxvY2s7ei1pbmRleDoxMDA7b3BhY2l0eTowO3RyYW5zZm9ybTpzY2FsZTNkKDAuOCwgMC44LCAxKTt0cmFuc2l0aW9uOm9wYWNpdHkgMC42cywgdHJhbnNmb3JtIDAuNnM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKX1bZGlyPWx0cl0gOmhvc3QubW9kYWwtaGFsZiAuc2VhcmNoIGJ1dHRvbntyaWdodDozcmVtfVtkaXI9cnRsXSA6aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2ggYnV0dG9ue2xlZnQ6M3JlbX06aG9zdC5tb2RhbC1oYWxmIC5zZWFyY2ggLmZvcm0td3JhcHBlcntwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7d2lkdGg6MTAwJTtoZWlnaHQ6NTAlO3RyYW5zaXRpb246dHJhbnNmb3JtIDAuNnM7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246Y3ViaWMtYmV6aWVyKDAuMiwgMSwgMC4zLCAxKTt0cmFuc2Zvcm06dHJhbnNsYXRlM2QoMCwgLTEwMCUsIDApfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaCBmb3Jte3dpZHRoOjc1JTttYXJnaW46MCBhdXRvfTpob3N0Lm1vZGFsLWhhbGYgLnNlYXJjaCBpbnB1dHtmb250LXNpemU6N3Z3O3dpZHRoOjEwMCV9Omhvc3QubW9kYWwtaGFsZi5zaG93IC5zZWFyY2h7cG9pbnRlci1ldmVudHM6YXV0b306aG9zdC5tb2RhbC1oYWxmLnNob3cgLnNlYXJjaDo6YmVmb3Jle29wYWNpdHk6MX06aG9zdC5tb2RhbC1oYWxmLnNob3cgLnNlYXJjaCBidXR0b257b3BhY2l0eToxO3RyYW5zZm9ybTpzY2FsZTNkKDEsIDEsIDEpfTpob3N0Lm1vZGFsLWhhbGYuc2hvdyAuc2VhcmNoIC5mb3JtLXdyYXBwZXJ7dHJhbnNmb3JtOnRyYW5zbGF0ZTNkKDAsIDAsIDApfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlNlYXJjaEZpZWxkQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHR5cGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBsYWNlaG9sZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBoaW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjbG9zZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHNlYXJjaDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHNlYXJjaElucHV0OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgaW5wdXRFbGVtZW50OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnc2VhcmNoSW5wdXQnLF0gfV0sXG4gICAgc2hvd0NsYXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaG93JyxdIH1dLFxuICAgIG1vZGFsWm9vbWluOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5tb2RhbC16b29taW4nLF0gfV0sXG4gICAgcm90YXRlTGF5b3V0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5yb3RhdGUtbGF5b3V0JyxdIH1dLFxuICAgIG1vZGFsTW92ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubW9kYWwtbW92ZScsXSB9XSxcbiAgICBjdXJ0YWluOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5jdXJ0YWluJyxdIH1dLFxuICAgIGNvbHVtbkN1cnRhaW46IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmNvbHVtbi1jdXJ0YWluJyxdIH1dLFxuICAgIG1vZGFsRHJvcDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubW9kYWwtZHJvcCcsXSB9XSxcbiAgICBtb2RhbEhhbGY6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm1vZGFsLWhhbGYnLF0gfV1cbn07XG4vKipcbiAqIEJlYXV0aWZ1bCBmdWxsLXBhZ2Ugc2VhcmNoIGNvbnRyb2wuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgc2VhcmNoL3NlYXJjaC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogQmFzaWMgc2V0dXA6XG4gKlxuICogYGBgdHNcbiAqICA8bmItc2VhcmNoIHR5cGU9XCJyb3RhdGUtbGF5b3V0XCI+PC9uYi1zZWFyY2g+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iU2VhcmNoTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlNlYXJjaE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogU2V2ZXJhbCBhbmltYXRpb24gdHlwZXMgYXJlIGF2YWlsYWJsZTpcbiAqIG1vZGFsLXpvb21pbiwgcm90YXRlLWxheW91dCwgbW9kYWwtbW92ZSwgY3VydGFpbiwgY29sdW1uLWN1cnRhaW4sIG1vZGFsLWRyb3AsIG1vZGFsLWhhbGZcbiAqXG4gKiBJdCBpcyBhbHNvIHBvc3NpYmxlIHRvIGhhbmRsZSBzZWFyY2ggZXZlbnQgdXNpbmcgYE5iU2VhcmNoU2VydmljZWA6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTZWFyY2ggRXZlbnQsIHNlYXJjaC9zZWFyY2gtZXZlbnQuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBzZWFyY2gtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlYXJjaC1kaXZpZGVyLWNvbG9yOlxuICogc2VhcmNoLWRpdmlkZXItc3R5bGU6XG4gKiBzZWFyY2gtZGl2aWRlci13aWR0aDpcbiAqIHNlYXJjaC1leHRyYS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VhcmNoLXRleHQtY29sb3I6XG4gKiBzZWFyY2gtdGV4dC1mb250LWZhbWlseTpcbiAqIHNlYXJjaC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlYXJjaC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VhcmNoLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzZWFyY2gtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlYXJjaC1pbmZvLXRleHQtY29sb3I6XG4gKiBzZWFyY2gtaW5mby10ZXh0LWZvbnQtZmFtaWx5OlxuICogc2VhcmNoLWluZm8tdGV4dC1mb250LXNpemU6XG4gKiBzZWFyY2gtaW5mby10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VhcmNoLWluZm8tdGV4dC1saW5lLWhlaWdodDpcbiAqL1xuY2xhc3MgTmJTZWFyY2hDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNlYXJjaFNlcnZpY2UsIHRoZW1lU2VydmljZSwgcm91dGVyLCBvdmVybGF5U2VydmljZSwgY2hhbmdlRGV0ZWN0b3IpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hTZXJ2aWNlID0gc2VhcmNoU2VydmljZTtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2UgPSB0aGVtZVNlcnZpY2U7XG4gICAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgICB0aGlzLm92ZXJsYXlTZXJ2aWNlID0gb3ZlcmxheVNlcnZpY2U7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IgPSBjaGFuZ2VEZXRlY3RvcjtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuc2hvd1NlYXJjaEZpZWxkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWFyY2ggaW5wdXQgcGxhY2Vob2xkZXJcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGxhY2Vob2xkZXIgPSAnU2VhcmNoLi4uJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhpbnQgc2hvd2luZyB1bmRlciB0aGUgaW5wdXQgZmllbGQgdG8gaW1wcm92ZSB1c2VyIGV4cGVyaWVuY2VcbiAgICAgICAgICpcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGludCA9ICdIaXQgZW50ZXIgdG8gc2VhcmNoJztcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMucm91dGVyLmV2ZW50c1xuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGV2ZW50ID0+IGV2ZW50IGluc3RhbmNlb2YgTmF2aWdhdGlvbkVuZCksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5oaWRlU2VhcmNoKCkpO1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2Uub25TZWFyY2hBY3RpdmF0ZSgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZGF0YSA9PiAhdGhpcy50YWcgfHwgZGF0YS50YWcgPT09IHRoaXMudGFnKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLm9wZW5TZWFyY2goKSk7XG4gICAgICAgIHRoaXMuc2VhcmNoU2VydmljZS5vblNlYXJjaERlYWN0aXZhdGUoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKGRhdGEgPT4gIXRoaXMudGFnIHx8IGRhdGEudGFnID09PSB0aGlzLnRhZyksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5oaWRlU2VhcmNoKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVJlZiAmJiB0aGlzLm92ZXJsYXlSZWYuaGFzQXR0YWNoZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVMYXlvdXRDbGFzc2VzKCk7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuZGV0YWNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgb3BlblNlYXJjaCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm92ZXJsYXlSZWYpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZiA9IHRoaXMub3ZlcmxheVNlcnZpY2UuY3JlYXRlKCk7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuYXR0YWNoKHRoaXMuc2VhcmNoRmllbGRQb3J0YWwpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGhlbWVTZXJ2aWNlLmFwcGVuZExheW91dENsYXNzKHRoaXMudHlwZSk7XG4gICAgICAgIG9mKG51bGwpLnBpcGUoZGVsYXkoMCkpLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRoZW1lU2VydmljZS5hcHBlbmRMYXlvdXRDbGFzcygnd2l0aC1zZWFyY2gnKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1NlYXJjaEZpZWxkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaGlkZVNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVMYXlvdXRDbGFzc2VzKCk7XG4gICAgICAgIHRoaXMuc2hvd1NlYXJjaEZpZWxkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICB0aGlzLnNlYXJjaEJ1dHRvbi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgfVxuICAgIHNlYXJjaCh0ZXJtKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoU2VydmljZS5zdWJtaXRTZWFyY2godGVybSwgdGhpcy50YWcpO1xuICAgICAgICB0aGlzLmhpZGVTZWFyY2goKTtcbiAgICB9XG4gICAgZW1pdElucHV0KHRlcm0pIHtcbiAgICAgICAgdGhpcy5zZWFyY2hTZXJ2aWNlLnNlYXJjaElucHV0KHRlcm0sIHRoaXMudGFnKTtcbiAgICB9XG4gICAgZW1pdEFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2UuYWN0aXZhdGVTZWFyY2godGhpcy50eXBlLCB0aGlzLnRhZyk7XG4gICAgfVxuICAgIGVtaXREZWFjdGl2YXRlKCkge1xuICAgICAgICB0aGlzLnNlYXJjaFNlcnZpY2UuZGVhY3RpdmF0ZVNlYXJjaCh0aGlzLnR5cGUsIHRoaXMudGFnKTtcbiAgICB9XG4gICAgcmVtb3ZlTGF5b3V0Q2xhc3NlcygpIHtcbiAgICAgICAgdGhpcy50aGVtZVNlcnZpY2UucmVtb3ZlTGF5b3V0Q2xhc3MoJ3dpdGgtc2VhcmNoJyk7XG4gICAgICAgIG9mKG51bGwpLnBpcGUoZGVsYXkoNTAwKSkuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGhlbWVTZXJ2aWNlLnJlbW92ZUxheW91dENsYXNzKHRoaXMudHlwZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cbk5iU2VhcmNoQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zZWFyY2gnLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGJ1dHRvbiAjc2VhcmNoQnV0dG9uIGNsYXNzPVwic3RhcnQtc2VhcmNoXCIgKGNsaWNrKT1cImVtaXRBY3RpdmF0ZSgpXCIgbmJCdXR0b24gZ2hvc3Q+XG4gICAgICA8bmItaWNvbiBpY29uPVwic2VhcmNoLW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCI+PC9uYi1pY29uPlxuICAgIDwvYnV0dG9uPlxuICAgIDxuYi1zZWFyY2gtZmllbGRcbiAgICAgICpuYlBvcnRhbFxuICAgICAgW3Nob3ddPVwic2hvd1NlYXJjaEZpZWxkXCJcbiAgICAgIFt0eXBlXT1cInR5cGVcIlxuICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgIFtoaW50XT1cImhpbnRcIlxuICAgICAgKHNlYXJjaCk9XCJzZWFyY2goJGV2ZW50KVwiXG4gICAgICAoc2VhcmNoSW5wdXQpPVwiZW1pdElucHV0KCRldmVudClcIlxuICAgICAgKGNsb3NlKT1cImVtaXREZWFjdGl2YXRlKClcIj5cbiAgICA8L25iLXNlYXJjaC1maWVsZD5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IGJ1dHRvbntmb250LXNpemU6MnJlbTttYXJnaW46MCBhdXRvO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6bm9uZTtiYWNrZ3JvdW5kOm5vbmV9Omhvc3QgYnV0dG9uOmZvY3Vze2JveC1zaGFkb3c6bm9uZTtvdXRsaW5lOm5vbmV9OjpuZy1kZWVwIG5iLWxheW91dC53aXRoLXNlYXJjaCAuc2Nyb2xsYWJsZS1jb250YWluZXJ7cG9zaXRpb246cmVsYXRpdmU7ei1pbmRleDowfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlNlYXJjaENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU2VhcmNoU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJUaGVtZVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFJvdXRlciB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5U2VydmljZSB9LFxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfVxuXTtcbk5iU2VhcmNoQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRhZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcGxhY2Vob2xkZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGhpbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHR5cGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlYXJjaEZpZWxkUG9ydGFsOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtOYlBvcnRhbERpcmVjdGl2ZSxdIH1dLFxuICAgIHNlYXJjaEJ1dHRvbjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbJ3NlYXJjaEJ1dHRvbicsIHsgcmVhZDogRWxlbWVudFJlZiB9LF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iU2VhcmNoTW9kdWxlIHtcbn1cbk5iU2VhcmNoTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYk92ZXJsYXlNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJCdXR0b25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTZWFyY2hDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iU2VhcmNoRmllbGRDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2VhcmNoQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2VhcmNoU2VydmljZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW1xuICAgICAgICAgICAgICAgICAgICBOYlNlYXJjaEZpZWxkQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBTdHlsZWQgY2hlY2tib3ggY29tcG9uZW50XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgY2hlY2tib3gvY2hlY2tib3gtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2hlY2tib3hDb21wb25lbnRgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2hlY2tib3hNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIENoZWNrYm94IGlzIGF2YWlsYWJsZSBpbiBtdWx0aXBsZSBjb2xvcnMgdXNpbmcgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2hlY2tib3hlcywgY2hlY2tib3gvY2hlY2tib3gtc3RhdHVzLmNvbXBvbmVudClcbiAqXG4gKiBJbmRldGVybWluYXRlIHN0YXRlIGlzIGFsc28gc3VwcG9ydGVkOlxuICogQHN0YWNrZWQtZXhhbXBsZShJbmRldGVybWluYXRlIENoZWNrYm94LCBjaGVja2JveC9jaGVja2JveC1pbmRldGVybWluYXRlLmNvbXBvbmVudClcbiAqXG4gKiBDaGVja2JveCBjYW4gYmUgZGlzYWJsZWQgdmlhIGBkaXNhYmxlZGAgYXR0cmlidXRlLlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCBDaGVja2JveCwgY2hlY2tib3gvY2hlY2tib3gtZGlzYWJsZWQuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBjaGVja2JveC1oZWlnaHQ6XG4gKiBjaGVja2JveC13aWR0aDpcbiAqIGNoZWNrYm94LWJvcmRlci1zdHlsZTpcbiAqIGNoZWNrYm94LWJvcmRlci13aWR0aDpcbiAqIGNoZWNrYm94LWJvcmRlci1yYWRpdXM6XG4gKiBjaGVja2JveC1vdXRsaW5lLXdpZHRoOlxuICogY2hlY2tib3gtb3V0bGluZS1jb2xvcjpcbiAqIGNoZWNrYm94LXRleHQtZm9udC1mYW1pbHk6XG4gKiBjaGVja2JveC10ZXh0LWZvbnQtc2l6ZTpcbiAqIGNoZWNrYm94LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjaGVja2JveC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogY2hlY2tib3gtdGV4dC1zcGFjZTpcbiAqIGNoZWNrYm94LXBhZGRpbmc6XG4gKiBjaGVja2JveC1mb2N1cy1pbnNldC1zaGFkb3ctbGVuZ3RoOlxuICogY2hlY2tib3gtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWNoZWNrZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaW5kZXRlcm1pbmF0ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtaW5kZXRlcm1pbmF0ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1pbmRldGVybWluYXRlLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1iYXNpYy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZGlzYWJsZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LWJhc2ljLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaW5kZXRlcm1pbmF0ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1pbmRldGVybWluYXRlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWhvdmVyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYWN0aXZlLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtcHJpbWFyeS1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1wcmltYXJ5LWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXByaW1hcnktZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWNoZWNrZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1pbmRldGVybWluYXRlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWluZGV0ZXJtaW5hdGUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1pbmRldGVybWluYXRlLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXN1Y2Nlc3MtZGlzYWJsZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtc3VjY2Vzcy1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tY2hlY2tlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWluZGV0ZXJtaW5hdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8taW5kZXRlcm1pbmF0ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWluZGV0ZXJtaW5hdGUtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWZvY3VzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8taG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWFjdGl2ZS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtaW5mby1kaXNhYmxlZC1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1pbmZvLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1jaGVja2VkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaW5kZXRlcm1pbmF0ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1pbmRldGVybWluYXRlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaW5kZXRlcm1pbmF0ZS1jaGVja21hcmstY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWhvdmVyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYWN0aXZlLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtd2FybmluZy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC13YXJuaW5nLWRpc2FibGVkLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGNoZWNrYm94LXdhcm5pbmctZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWNoZWNrZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWluZGV0ZXJtaW5hdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1pbmRldGVybWluYXRlLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1pbmRldGVybWluYXRlLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWhvdmVyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItYWN0aXZlLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZGlzYWJsZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBjaGVja2JveC1kYW5nZXItZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWNoZWNrZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1pbmRldGVybWluYXRlLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWluZGV0ZXJtaW5hdGUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1pbmRldGVybWluYXRlLWNoZWNrbWFyay1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtaG92ZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1hY3RpdmUtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGVja2JveC1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGNoZWNrYm94LWNvbnRyb2wtZGlzYWJsZWQtY2hlY2ttYXJrLWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogY2hlY2tib3gtY29udHJvbC1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbmNsYXNzIE5iQ2hlY2tib3hDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGNoYW5nZURldGVjdG9yLCByZW5kZXJlciwgaG9zdEVsZW1lbnQsIHpvbmUsIHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvciA9IGNoYW5nZURldGVjdG9yO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuX2NoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENoZWNrYm94IHN0YXR1cy5cbiAgICAgICAgICogUG9zc2libGUgdmFsdWVzIGFyZTogYGJhc2ljYCwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBpbmZvYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICB0aGlzLl9pbmRldGVybWluYXRlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPdXRwdXQgd2hlbiBjaGVja2VkIHN0YXRlIGlzIGNoYW5nZWQgYnkgYSB1c2VyXG4gICAgICAgICAqIEB0eXBlIEV2ZW50RW1pdHRlcjxib29sZWFuPlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBnZXQgY2hlY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrZWQ7XG4gICAgfVxuICAgIHNldCBjaGVja2VkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb250cm9scyBpbnB1dCBkaXNhYmxlZCBzdGF0ZVxuICAgICAqL1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb250cm9scyBjaGVja2JveCBpbmRldGVybWluYXRlIHN0YXRlXG4gICAgICovXG4gICAgZ2V0IGluZGV0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbmRldGVybWluYXRlO1xuICAgIH1cbiAgICBzZXQgaW5kZXRlcm1pbmF0ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9pbmRldGVybWluYXRlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCB3YXJuaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICB9XG4gICAgZ2V0IGRhbmdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgICB9XG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgd3JpdGVWYWx1ZSh2YWwpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tlZCA9IHZhbDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWRTdGF0ZSh2YWwpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICBzZXRUb3VjaGVkKCkge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIH1cbiAgICB1cGRhdGVWYWx1ZUFuZEluZGV0ZXJtaW5hdGUoZXZlbnQpIHtcbiAgICAgICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQ7XG4gICAgICAgIHRoaXMuY2hlY2tlZCA9IGlucHV0LmNoZWNrZWQ7XG4gICAgICAgIHRoaXMuY2hlY2tlZENoYW5nZS5lbWl0KHRoaXMuY2hlY2tlZCk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UodGhpcy5jaGVja2VkKTtcbiAgICAgICAgdGhpcy5pbmRldGVybWluYXRlID0gaW5wdXQuaW5kZXRlcm1pbmF0ZTtcbiAgICB9XG59XG5OYkNoZWNrYm94Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGVja2JveCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bGFiZWwgY2xhc3M9XCJsYWJlbFwiPlxuICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwibmF0aXZlLWlucHV0IHZpc3VhbGx5LWhpZGRlblwiXG4gICAgICAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgICAgICBbY2hlY2tlZF09XCJjaGVja2VkXCJcbiAgICAgICAgICAgICAoY2hhbmdlKT1cInVwZGF0ZVZhbHVlQW5kSW5kZXRlcm1pbmF0ZSgkZXZlbnQpXCJcbiAgICAgICAgICAgICAoYmx1cik9XCJzZXRUb3VjaGVkKClcIlxuICAgICAgICAgICAgIChjbGljayk9XCIkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcIlxuICAgICAgICAgICAgIFtpbmRldGVybWluYXRlXT1cImluZGV0ZXJtaW5hdGVcIj5cbiAgICAgIDxzcGFuIFtjbGFzcy5pbmRldGVybWluYXRlXT1cImluZGV0ZXJtaW5hdGVcIiBbY2xhc3MuY2hlY2tlZF09XCJjaGVja2VkXCIgY2xhc3M9XCJjdXN0b20tY2hlY2tib3hcIj5cbiAgICAgICAgPG5iLWljb24gKm5nSWY9XCJpbmRldGVybWluYXRlXCIgaWNvbj1cIm1pbnVzLWJvbGQtb3V0bGluZVwiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgICAgIDxuYi1pY29uICpuZ0lmPVwiY2hlY2tlZCAmJiAhaW5kZXRlcm1pbmF0ZVwiIGljb249XCJjaGVja21hcmstYm9sZC1vdXRsaW5lXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiPjwvbmItaWNvbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwidGV4dFwiPlxuICAgICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgICA8L3NwYW4+XG4gICAgPC9sYWJlbD5cbiAgYCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5iQ2hlY2tib3hDb21wb25lbnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QgLmxhYmVse3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO21hcmdpbjowO21pbi1oZWlnaHQ6aW5oZXJpdH06aG9zdCAuY3VzdG9tLWNoZWNrYm94e2ZsZXgtc2hyaW5rOjB9Omhvc3QoLm5iLXRyYW5zaXRpb24pIC5jdXN0b20tY2hlY2tib3h7dHJhbnNpdGlvbi1kdXJhdGlvbjowLjE1czt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsYm9yZGVyLGJveC1zaGFkb3c7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbn06aG9zdCgubmItdHJhbnNpdGlvbikgLnRleHR7dHJhbnNpdGlvbi1kdXJhdGlvbjowLjE1czt0cmFuc2l0aW9uLXByb3BlcnR5OmNvbG9yO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2hlY2tib3hDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJDaGVja2JveENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBjaGVja2VkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBpbmRldGVybWluYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjaGVja2VkQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGluZm86IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1pbmZvJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNoZWNrYm94TW9kdWxlIHtcbn1cbk5iQ2hlY2tib3hNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iQ2hlY2tib3hDb21wb25lbnRdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYkNoZWNrYm94Q29tcG9uZW50XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG5jbGFzcyBOYkR5bmFtaWNPdmVybGF5IHtcbiAgICBjb25zdHJ1Y3RvcihvdmVybGF5LCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHpvbmUsIG92ZXJsYXlDb250YWluZXIpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgPSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lciA9IG92ZXJsYXlDb250YWluZXI7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICB0aGlzLm92ZXJsYXlDb25maWcgPSB7fTtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5Q2hhbmdlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuaXNTaG93biQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMub3ZlcmxheURlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICB9XG4gICAgZ2V0IGlzQXR0YWNoZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZiAmJiB0aGlzLnJlZi5oYXNBdHRhY2hlZCgpO1xuICAgIH1cbiAgICBnZXQgaXNTaG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNTaG93biQucGlwZShkaXN0aW5jdFVudGlsQ2hhbmdlZCgpKTtcbiAgICB9XG4gICAgY3JlYXRlKGNvbXBvbmVudFR5cGUsIGNvbnRlbnQsIGNvbnRleHQsIHBvc2l0aW9uU3RyYXRlZ3ksIG92ZXJsYXlDb25maWcgPSB7fSkge1xuICAgICAgICB0aGlzLnNldENvbnRlbnRBbmRDb250ZXh0KGNvbnRlbnQsIGNvbnRleHQpO1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudChjb21wb25lbnRUeXBlKTtcbiAgICAgICAgdGhpcy5zZXRQb3NpdGlvblN0cmF0ZWd5KHBvc2l0aW9uU3RyYXRlZ3kpO1xuICAgICAgICB0aGlzLnNldE92ZXJsYXlDb25maWcob3ZlcmxheUNvbmZpZyk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRDb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcbiAgICAgICAgaWYgKHRoaXMuY29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRleHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVBvc2l0aW9uKCk7XG4gICAgfVxuICAgIHNldENvbnRleHQoY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICB9XG4gICAgc2V0Q29udGVudEFuZENvbnRleHQoY29udGVudCwgY29udGV4dCkge1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICAgICAgICBpZiAodGhpcy5jb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udGV4dCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlUG9zaXRpb24oKTtcbiAgICB9XG4gICAgc2V0Q29tcG9uZW50KGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRUeXBlID0gY29tcG9uZW50VHlwZTtcbiAgICAgICAgLy8gaW4gY2FzZSB0aGUgY29tcG9uZW50IGlzIHNob3duIHdlIHJlY3JlYXRlIGl0IGFuZCBzaG93IGl0IGJhY2tcbiAgICAgICAgY29uc3Qgd2FzQXR0YWNoZWQgPSB0aGlzLmlzQXR0YWNoZWQ7XG4gICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgaWYgKHdhc0F0dGFjaGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRQb3NpdGlvblN0cmF0ZWd5KHBvc2l0aW9uU3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5Q2hhbmdlJC5uZXh0KCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneSA9IHBvc2l0aW9uU3RyYXRlZ3k7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneS5wb3NpdGlvbkNoYW5nZVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+ICEhdGhpcy5jb250YWluZXIpLCB0YWtlVW50aWwobWVyZ2UodGhpcy5wb3NpdGlvblN0cmF0ZWd5Q2hhbmdlJCwgdGhpcy5kZXN0cm95JCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgocG9zaXRpb24pID0+IHtcbiAgICAgICAgICAgIHRoaXMubGFzdEFwcGxpZWRQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgcGF0Y2godGhpcy5jb250YWluZXIsIHsgcG9zaXRpb24gfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAodGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVmLnVwZGF0ZVBvc2l0aW9uU3RyYXRlZ3kodGhpcy5wb3NpdGlvblN0cmF0ZWd5KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRPdmVybGF5Q29uZmlnKG92ZXJsYXlDb25maWcpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29uZmlnID0gb3ZlcmxheUNvbmZpZztcbiAgICAgICAgY29uc3Qgd2FzQXR0YWNoZWQgPSB0aGlzLmlzQXR0YWNoZWQ7XG4gICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgaWYgKHdhc0F0dGFjaGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93KCkge1xuICAgICAgICBpZiAoIXRoaXMucmVmKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlckNvbnRhaW5lcigpO1xuICAgICAgICBpZiAoIXRoaXMuaGFzT3ZlcmxheUluQ29udGFpbmVyKCkpIHtcbiAgICAgICAgICAgIC8vIERpc3Bvc2Ugb3ZlcmxheSByZWYgYXMgaXQgcmVmZXJzIHRvIHRoZSBvbGQgb3ZlcmxheSBjb250YWluZXIgYW5kIGNyZWF0ZSBuZXcgYnkgY2FsbGluZyBgc2hvd2BcbiAgICAgICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3coKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzU2hvd24kLm5leHQodHJ1ZSk7XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIGlmICghdGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZi5kZXRhY2goKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBudWxsO1xuICAgICAgICB0aGlzLmlzU2hvd24kLm5leHQoZmFsc2UpO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuZGlzcG9zZU92ZXJsYXlSZWYoKTtcbiAgICAgICAgdGhpcy5pc1Nob3duJC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3lDaGFuZ2UkLmNvbXBsZXRlKCk7XG4gICAgICAgIHRoaXMub3ZlcmxheURlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xuICAgIH1cbiAgICBjcmVhdGVPdmVybGF5KCkge1xuICAgICAgICB0aGlzLnJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoT2JqZWN0LmFzc2lnbih7IHBvc2l0aW9uU3RyYXRlZ3k6IHRoaXMucG9zaXRpb25TdHJhdGVneSwgc2Nyb2xsU3RyYXRlZ3k6IHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLnJlcG9zaXRpb24oKSB9LCB0aGlzLm92ZXJsYXlDb25maWcpKTtcbiAgICAgICAgdGhpcy51cGRhdGVQb3NpdGlvbldoZW5TdGFibGUodGhpcy5yZWYpO1xuICAgIH1cbiAgICByZW5kZXJDb250YWluZXIoKSB7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lckNvbnRleHQgPSB0aGlzLmNyZWF0ZUNvbnRhaW5lckNvbnRleHQoKTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBjcmVhdGVDb250YWluZXIodGhpcy5yZWYsIHRoaXMuY29tcG9uZW50VHlwZSwgY29udGFpbmVyQ29udGV4dCwgdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmluc3RhbmNlLnJlbmRlckNvbnRlbnQoKTtcbiAgICB9XG4gICAgdXBkYXRlQ29udGV4dCgpIHtcbiAgICAgICAgY29uc3QgY29udGFpbmVyQ29udGV4dCA9IHRoaXMuY3JlYXRlQ29udGFpbmVyQ29udGV4dCgpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMuY29udGFpbmVyLmluc3RhbmNlLCBjb250YWluZXJDb250ZXh0KTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaW5zdGFuY2UucmVuZGVyQ29udGVudCgpO1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIGNyZWF0ZUNvbnRhaW5lckNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBjb250ZW50OiB0aGlzLmNvbnRlbnQsXG4gICAgICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgICAgICBjZnI6IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLFxuICAgICAgICAgICAgcG9zaXRpb246IHRoaXMubGFzdEFwcGxpZWRQb3NpdGlvbixcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGltZW5zaW9ucyBvZiB0aGUgY29udGFpbmVyIG1heSBjaGFuZ2UgYWZ0ZXIgY29udGVudCB1cGRhdGUuIFNvIHdlIGxpc3RlbiB0byB6b25lLnN0YWJsZSBldmVudCB0b1xuICAgICAqIHJlcG9zaXRpb24gdGhlIGNvbnRhaW5lci5cbiAgICAgKi9cbiAgICB1cGRhdGVQb3NpdGlvbldoZW5TdGFibGUob3ZlcmxheSkge1xuICAgICAgICBjb25zdCBvdmVybGF5RGVzdHJveSQgPSB0aGlzLm92ZXJsYXlEZXN0cm95JC5waXBlKGZpbHRlcigoZGVzdHJveWVkT3ZlcmxheSkgPT4gZGVzdHJveWVkT3ZlcmxheSA9PT0gb3ZlcmxheSkpO1xuICAgICAgICB0aGlzLnpvbmUub25TdGFibGVcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbChtZXJnZSh0aGlzLmRlc3Ryb3kkLCBvdmVybGF5RGVzdHJveSQpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy51cGRhdGVQb3NpdGlvbigpKTtcbiAgICB9XG4gICAgdXBkYXRlUG9zaXRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYudXBkYXRlUG9zaXRpb24oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYXNPdmVybGF5SW5Db250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlDb250YWluZXIuZ2V0Q29udGFpbmVyRWxlbWVudCgpLmNvbnRhaW5zKHRoaXMucmVmLmhvc3RFbGVtZW50KTtcbiAgICB9XG4gICAgZGlzcG9zZU92ZXJsYXlSZWYoKSB7XG4gICAgICAgIGlmICh0aGlzLnJlZikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5RGVzdHJveSQubmV4dCh0aGlzLnJlZik7XG4gICAgICAgICAgICB0aGlzLnJlZiA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5OYkR5bmFtaWNPdmVybGF5LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYkR5bmFtaWNPdmVybGF5LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJPdmVybGF5U2VydmljZSB9LFxuICAgIHsgdHlwZTogQ29tcG9uZW50RmFjdG9yeVJlc29sdmVyIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheUNvbnRhaW5lciB9XG5dO1xuXG5jbGFzcyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlIGV4dGVuZHMgU2ltcGxlQ2hhbmdlIHtcbiAgICBjb25zdHJ1Y3RvcihwcmV2aW91c1ZhbHVlLCBjdXJyZW50VmFsdWUsIGZpcnN0Q2hhbmdlID0gZmFsc2UpIHtcbiAgICAgICAgc3VwZXIocHJldmlvdXNWYWx1ZSwgY3VycmVudFZhbHVlLCBmaXJzdENoYW5nZSk7XG4gICAgfVxuICAgIGlzQ2hhbmdlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFZhbHVlICE9PSB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxufVxuY2xhc3MgTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgZHluYW1pY092ZXJsYXlTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXIgPSB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5U2VydmljZSA9IGR5bmFtaWNPdmVybGF5U2VydmljZTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IHt9O1xuICAgICAgICB0aGlzLl90cmlnZ2VyID0gTmJUcmlnZ2VyLk5PT1A7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gTmJQb3NpdGlvbi5UT1A7XG4gICAgICAgIHRoaXMuX2FkanVzdG1lbnQgPSBOYkFkanVzdG1lbnQuTk9PUDtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gMTU7XG4gICAgICAgIHRoaXMuX292ZXJsYXlDb25maWcgPSB7fTtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0ge307XG4gICAgfVxuICAgIGhvc3QoaG9zdCkge1xuICAgICAgICB0aGlzLmNoYW5nZXMuaG9zdCA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX2hvc3QsIGhvc3QpO1xuICAgICAgICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHRyaWdnZXIodHJpZ2dlciQkMSkge1xuICAgICAgICB0aGlzLmNoYW5nZXMudHJpZ2dlciA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX3RyaWdnZXIsIHRyaWdnZXIkJDEpO1xuICAgICAgICB0aGlzLl90cmlnZ2VyID0gdHJpZ2dlciQkMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHBvc2l0aW9uKHBvc2l0aW9uKSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5wb3NpdGlvbiA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX3Bvc2l0aW9uLCBwb3NpdGlvbik7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBhZGp1c3RtZW50KGFkanVzdG1lbnQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmFkanVzdG1lbnQgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9hZGp1c3RtZW50LCBhZGp1c3RtZW50KTtcbiAgICAgICAgdGhpcy5fYWRqdXN0bWVudCA9IGFkanVzdG1lbnQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb21wb25lbnRUeXBlKGNvbXBvbmVudFR5cGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmNvbXBvbmVudFR5cGUgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9jb21wb25lbnRUeXBlLCBjb21wb25lbnRUeXBlKTtcbiAgICAgICAgdGhpcy5fY29tcG9uZW50VHlwZSA9IGNvbXBvbmVudFR5cGU7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb250ZW50KGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmNvbnRlbnQgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9jb250ZW50LCBjb250ZW50KTtcbiAgICAgICAgdGhpcy5fY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBjb250ZXh0KGNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzLmNvbnRleHQgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9jb250ZXh0LCBjb250ZXh0KTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBvZmZzZXQob2Zmc2V0KSB7XG4gICAgICAgIHRoaXMuY2hhbmdlcy5vZmZzZXQgPSBuZXcgTmJEeW5hbWljT3ZlcmxheUNoYW5nZSh0aGlzLl9vZmZzZXQsIG9mZnNldCk7XG4gICAgICAgIHRoaXMuX29mZnNldCA9IG9mZnNldDtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG92ZXJsYXlDb25maWcob3ZlcmxheUNvbmZpZykge1xuICAgICAgICB0aGlzLmNoYW5nZXMub3ZlcmxheUNvbmZpZyA9IG5ldyBOYkR5bmFtaWNPdmVybGF5Q2hhbmdlKHRoaXMuX292ZXJsYXlDb25maWcsIG92ZXJsYXlDb25maWcpO1xuICAgICAgICB0aGlzLl9vdmVybGF5Q29uZmlnID0gb3ZlcmxheUNvbmZpZztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGJ1aWxkKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2NvbXBvbmVudFR5cGUgfHwgIXRoaXMuX2hvc3QpIHtcbiAgICAgICAgICAgIHRocm93IEVycm9yKGBOYkR5bmFtaWNPdmVybGF5SGFuZGxlcjogYXQgbGVhc3QgJ2NvbXBvbmVudFR5cGUnIGFuZCAnaG9zdCcgc2hvdWxkIGJlXG4gICAgICBwYXNzZWQgYmVmb3JlIGJ1aWxkaW5nIGEgZHluYW1pYyBvdmVybGF5LmApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmR5bmFtaWNPdmVybGF5U2VydmljZS5jcmVhdGUodGhpcy5fY29tcG9uZW50VHlwZSwgdGhpcy5fY29udGVudCwgdGhpcy5fY29udGV4dCwgdGhpcy5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5KCksIHRoaXMuX292ZXJsYXlDb25maWcpO1xuICAgICAgICB0aGlzLmNvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5jbGVhckNoYW5nZXMoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHluYW1pY092ZXJsYXk7XG4gICAgfVxuICAgIHJlYnVpbGQoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiB3ZSBzaG91bGQgbm90IHRocm93IGhlcmVcbiAgICAgICAgICogYXMgd2UgdXNlIHJlYnVpbHQgaW4gbGlmZWN5Y2xlIGhvb2tzXG4gICAgICAgICAqIHdoaWNoIGl0IGNvdWxkIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGJ1aWxkXG4gICAgICAgICAqIHNvIHdlIGp1c3QgaWdub3JlIHRoaXMgY2FsbFxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKCF0aGlzLmR5bmFtaWNPdmVybGF5KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNQb3NpdGlvblN0cmF0ZWd5VXBkYXRlUmVxdWlyZWQoKSkge1xuICAgICAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5zZXRQb3NpdGlvblN0cmF0ZWd5KHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5pc1RyaWdnZXJTdHJhdGVneVVwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29udGFpbmVyUmVyZW5kZXJSZXF1aXJlZCgpKSB7XG4gICAgICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnNldENvbnRlbnRBbmRDb250ZXh0KHRoaXMuX2NvbnRlbnQsIHRoaXMuX2NvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzQ29tcG9uZW50VHlwZVVwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2V0Q29tcG9uZW50KHRoaXMuX2NvbXBvbmVudFR5cGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzT3ZlcmxheUNvbmZpZ1VwZGF0ZVJlcXVpcmVkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2V0T3ZlcmxheUNvbmZpZyh0aGlzLl9vdmVybGF5Q29uZmlnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNsZWFyQ2hhbmdlcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheTtcbiAgICB9XG4gICAgY29ubmVjdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmR5bmFtaWNPdmVybGF5KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5iRHluYW1pY092ZXJsYXlIYW5kbGVyOiBjYW5ub3QgY29ubmVjdCB0byBEeW5hbWljT3ZlcmxheVxuICAgICAgYXMgaXQgaXMgbm90IGNyZWF0ZWQgeWV0LiBDYWxsIGJ1aWxkKCkgZmlyc3RgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPblRyaWdnZXJzKHRoaXMuZHluYW1pY092ZXJsYXkpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0KCkge1xuICAgICAgICBpZiAodGhpcy50cmlnZ2VyU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5jbGVhckNoYW5nZXMoKTtcbiAgICAgICAgaWYgKHRoaXMuZHluYW1pY092ZXJsYXkpIHtcbiAgICAgICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmNvbm5lY3RlZFRvKHRoaXMuX2hvc3QpXG4gICAgICAgICAgICAucG9zaXRpb24odGhpcy5fcG9zaXRpb24pXG4gICAgICAgICAgICAuYWRqdXN0bWVudCh0aGlzLl9hZGp1c3RtZW50KVxuICAgICAgICAgICAgLm9mZnNldCh0aGlzLl9vZmZzZXQpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPblRyaWdnZXJzKGR5bmFtaWNPdmVybGF5KSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyXG4gICAgICAgICAgICAudHJpZ2dlcih0aGlzLl90cmlnZ2VyKVxuICAgICAgICAgICAgLmhvc3QodGhpcy5faG9zdC5uYXRpdmVFbGVtZW50KVxuICAgICAgICAgICAgLmNvbnRhaW5lcigoKSA9PiBkeW5hbWljT3ZlcmxheS5nZXRDb250YWluZXIoKSlcbiAgICAgICAgICAgIC5idWlsZCgpO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneS5zaG93JC5zdWJzY3JpYmUoKCkgPT4gZHluYW1pY092ZXJsYXkuc2hvdygpKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuaGlkZSQuc3Vic2NyaWJlKCgpID0+IGR5bmFtaWNPdmVybGF5LmhpZGUoKSk7XG4gICAgfVxuICAgIGlzQ29udGFpbmVyUmVyZW5kZXJSZXF1aXJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNDb250ZW50VXBkYXRlZCgpXG4gICAgICAgICAgICB8fCB0aGlzLmlzQ29udGV4dFVwZGF0ZWQoKVxuICAgICAgICAgICAgfHwgdGhpcy5pc1Bvc2l0aW9uU3RyYXRlZ3lVcGRhdGVSZXF1aXJlZCgpO1xuICAgIH1cbiAgICBpc1Bvc2l0aW9uU3RyYXRlZ3lVcGRhdGVSZXF1aXJlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNBZGp1c3RtZW50VXBkYXRlZCgpIHx8IHRoaXMuaXNQb3NpdGlvblVwZGF0ZWQoKSB8fCB0aGlzLmlzT2Zmc2V0VXBkYXRlZCgpIHx8IHRoaXMuaXNIb3N0VXBkYXRlZCgpO1xuICAgIH1cbiAgICBpc1RyaWdnZXJTdHJhdGVneVVwZGF0ZVJlcXVpcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc1RyaWdnZXJVcGRhdGVkKCkgfHwgdGhpcy5pc0hvc3RVcGRhdGVkKCk7XG4gICAgfVxuICAgIGlzQ29tcG9uZW50VHlwZVVwZGF0ZVJlcXVpcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0NvbXBvbmVudFR5cGVVcGRhdGVkKCk7XG4gICAgfVxuICAgIGlzT3ZlcmxheUNvbmZpZ1VwZGF0ZVJlcXVpcmVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc092ZXJsYXlDb25maWdVcGRhdGVkKCk7XG4gICAgfVxuICAgIGlzQ29tcG9uZW50VHlwZVVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuY29tcG9uZW50VHlwZSAmJiB0aGlzLmNoYW5nZXMuY29tcG9uZW50VHlwZS5pc0NoYW5nZWQoKTtcbiAgICB9XG4gICAgaXNDb250ZW50VXBkYXRlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5jb250ZW50ICYmIHRoaXMuY2hhbmdlcy5jb250ZW50LmlzQ2hhbmdlZCgpO1xuICAgIH1cbiAgICBpc0NvbnRleHRVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmNvbnRleHQgJiYgdGhpcy5jaGFuZ2VzLmNvbnRleHQuaXNDaGFuZ2VkKCk7XG4gICAgfVxuICAgIGlzQWRqdXN0bWVudFVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMuYWRqdXN0bWVudCAmJiB0aGlzLmNoYW5nZXMuYWRqdXN0bWVudC5pc0NoYW5nZWQoKTtcbiAgICB9XG4gICAgaXNQb3NpdGlvblVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMucG9zaXRpb24gJiYgdGhpcy5jaGFuZ2VzLnBvc2l0aW9uLmlzQ2hhbmdlZCgpO1xuICAgIH1cbiAgICBpc0hvc3RVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmhvc3QgJiYgdGhpcy5jaGFuZ2VzLmhvc3QuaXNDaGFuZ2VkKCk7XG4gICAgfVxuICAgIGlzVHJpZ2dlclVwZGF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5nZXMudHJpZ2dlciAmJiB0aGlzLmNoYW5nZXMudHJpZ2dlci5pc0NoYW5nZWQoKTtcbiAgICB9XG4gICAgaXNPZmZzZXRVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLm9mZnNldCAmJiB0aGlzLmNoYW5nZXMub2Zmc2V0LmlzQ2hhbmdlZCgpO1xuICAgIH1cbiAgICBpc092ZXJsYXlDb25maWdVcGRhdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLm92ZXJsYXlDb25maWcgJiYgdGhpcy5jaGFuZ2VzLm92ZXJsYXlDb25maWcuaXNDaGFuZ2VkKCk7XG4gICAgfVxuICAgIGNsZWFyQ2hhbmdlcygpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VzID0ge307XG4gICAgfVxufVxuTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iRHluYW1pY092ZXJsYXlIYW5kbGVyLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJQb3NpdGlvbkJ1aWxkZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYkR5bmFtaWNPdmVybGF5IH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogT3ZlcmxheSBjb250YWluZXIuXG4gKiBSZW5kZXJzIHByb3ZpZGVkIGNvbnRlbnQgaW5zaWRlLlxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBwb3BvdmVyLXRleHQtY29sb3I6XG4gKiBwb3BvdmVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBwb3BvdmVyLXRleHQtZm9udC1zaXplOlxuICogcG9wb3Zlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcG9wb3Zlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcG9wb3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcG9wb3Zlci1ib3JkZXItd2lkdGg6XG4gKiBwb3BvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHBvcG92ZXItYm9yZGVyLXJhZGl1czpcbiAqIHBvcG92ZXItc2hhZG93OlxuICogcG9wb3Zlci1hcnJvdy1zaXplOlxuICogcG9wb3Zlci1wYWRkaW5nOlxuICogKi9cbmNsYXNzIE5iUG9wb3ZlckNvbXBvbmVudCBleHRlbmRzIE5iUG9zaXRpb25lZENvbnRhaW5lckNvbXBvbmVudCB7XG4gICAgcmVuZGVyQ29udGVudCgpIHtcbiAgICAgICAgdGhpcy5kZXRhY2hDb250ZW50KCk7XG4gICAgICAgIHRoaXMuYXR0YWNoQ29udGVudCgpO1xuICAgIH1cbiAgICBkZXRhY2hDb250ZW50KCkge1xuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXIuZGV0YWNoKCk7XG4gICAgfVxuICAgIGF0dGFjaENvbnRlbnQoKSB7XG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hUZW1wbGF0ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHRoaXMuY29udGVudCBpbnN0YW5jZW9mIFR5cGUpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ29tcG9uZW50KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFN0cmluZygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaFRlbXBsYXRlKCkge1xuICAgICAgICB0aGlzLm92ZXJsYXlDb250YWluZXJcbiAgICAgICAgICAgIC5hdHRhY2hUZW1wbGF0ZVBvcnRhbChuZXcgTmJUZW1wbGF0ZVBvcnRhbCh0aGlzLmNvbnRlbnQsIG51bGwsIHsgJGltcGxpY2l0OiB0aGlzLmNvbnRleHQgfSkpO1xuICAgIH1cbiAgICBhdHRhY2hDb21wb25lbnQoKSB7XG4gICAgICAgIGNvbnN0IHBvcnRhbCA9IG5ldyBOYkNvbXBvbmVudFBvcnRhbCh0aGlzLmNvbnRlbnQsIG51bGwsIG51bGwsIHRoaXMuY2ZyKTtcbiAgICAgICAgY29uc3QgcmVmID0gdGhpcy5vdmVybGF5Q29udGFpbmVyLmF0dGFjaENvbXBvbmVudFBvcnRhbChwb3J0YWwsIHRoaXMuY29udGV4dCk7XG4gICAgICAgIHJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIGF0dGFjaFN0cmluZygpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGFpbmVyLmF0dGFjaFN0cmluZ0NvbnRlbnQodGhpcy5jb250ZW50KTtcbiAgICB9XG59XG5OYlBvcG92ZXJDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXBvcG92ZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPHNwYW4gY2xhc3M9XCJhcnJvd1wiPjwvc3Bhbj5cbiAgICA8bmItb3ZlcmxheS1jb250YWluZXI+PC9uYi1vdmVybGF5LWNvbnRhaW5lcj5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0IC5hcnJvd3twb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDowO2hlaWdodDowfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlBvcG92ZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgb3ZlcmxheUNvbnRhaW5lcjogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LF0gfV0sXG4gICAgY29udGVudDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY29udGV4dDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY2ZyOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBQb3dlcmZ1bCBwb3BvdmVyIGRpcmVjdGl2ZSwgd2hpY2ggcHJvdmlkZXMgdGhlIGJlc3QgVVggZm9yIHlvdXIgdXNlcnMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgcG9wb3Zlci9wb3BvdmVyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBQb3BvdmVyIGNhbiBhY2NlcHQgZGlmZmVyZW50IGNvbnRlbnQgc3VjaCBhczpcbiAqIFRlbXBsYXRlUmVmXG4gKlxuICogYGBgaHRtbFxuICogPGJ1dHRvbiBbbmJQb3BvdmVyXT1cInRlbXBsYXRlUmVmXCI+PC9idXR0b24+XG4gKiA8bmctdGVtcGxhdGUgI3RlbXBsYXRlUmVmPlxuICogICA8c3Bhbj5IZWxsbywgUG9wb3ZlciE8L3NwYW4+XG4gKiA8L25nLXRlbXBsYXRlPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlBvcG92ZXJNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iUG9wb3Zlck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQ3VzdG9tIGNvbXBvbmVudHNcbiAqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uIFtuYlBvcG92ZXJdPVwiTXlQb3BvdmVyQ29tcG9uZW50XCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBCb3RoIGN1c3RvbSBjb21wb25lbnRzIGFuZCB0ZW1wbGF0ZVJlZiBwb3BvdmVycyBjYW4gcmVjZWl2ZSAqY29udGVudENvbnRleHQqIHByb3BlcnR5XG4gKiB0aGF0IHdpbGwgYmUgcGFzc2VkIHRvIHRoZSBjb250ZW50IHByb3BzLlxuICpcbiAqIFByaW1pdGl2ZSB0eXBlc1xuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gbmJQb3BvdmVyPVwiSGVsbG8sIFBvcG92ZXIhXCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBQb3BvdmVyIGhhcyBkaWZmZXJlbnQgcGxhY2VtZW50cywgc3VjaCBhczogdG9wLCBib3R0b20sIGxlZnQsIHJpZ2h0LCBzdGFydCBhbmQgZW5kXG4gKiB3aGljaCBjYW4gYmUgdXNlZCBhcyBmb2xsb3dpbmc6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQbGFjZW1lbnRzLCBwb3BvdmVyL3BvcG92ZXItcGxhY2VtZW50cy5jb21wb25lbnQpXG4gKlxuICogQnkgZGVmYXVsdCBwb3BvdmVyIHdpbGwgdHJ5IHRvIGFkanVzdCBpdHNlbGYgdG8gbWF4aW1hbGx5IGZpdCB2aWV3cG9ydFxuICogYW5kIHByb3ZpZGUgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLiBJdCB3aWxsIHRyeSB0byBjaGFuZ2UgcG9zaXRpb24gb2YgdGhlIHBvcG92ZXIgY29udGFpbmVyLlxuICogSWYgeW91IHdhbnQgdG8gZGlzYWJsZSB0aGlzIGJlaGF2aW91ciBzZXQgaXQgYG5vb3BgLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gbmJQb3BvdmVyPVwiSGVsbG8sIFBvcG92ZXIhXCIgbmJQb3BvdmVyQWRqdXN0bWVudD1cIm5vb3BcIj48L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIFBvcG92ZXIgaGFzIGEgbnVtYmVyIG9mIHRyaWdnZXJzIHdoaWNoIHByb3ZpZGVzIGFuIGFiaWxpdHkgdG8gc2hvdyBhbmQgaGlkZSB0aGUgY29tcG9uZW50IGluIGRpZmZlcmVudCB3YXlzOlxuICpcbiAqIC0gQ2xpY2sgbW9kZSBzaG93cyB0aGUgY29tcG9uZW50IHdoZW4gYSB1c2VyIGNsaWNrcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBoaWRlcyB3aGVuIHRoZSB1c2VyIGNsaWNrc1xuICogc29tZXdoZXJlIG9uIHRoZSBkb2N1bWVudCBvdXRzaWRlIHRoZSBjb21wb25lbnQuXG4gKiAtIEhpbnQgcHJvdmlkZXMgY2FwYWJpbGl0eSB0byBzaG93IHRoZSBjb21wb25lbnQgd2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50XG4gKiBhbmQgaGlkZSB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdXQgb2YgdGhlIGhvc3QuXG4gKiAtIEhvdmVyIHdvcmtzIGxpa2UgaGludCBtb2RlIHdpdGggb25lIGV4Y2VwdGlvbiAtIHdoZW4gdGhlIHVzZXIgbW92ZXMgbW91c2UgZnJvbSBob3N0IGVsZW1lbnQgdG9cbiAqIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGUgY29tcG9uZW50IHJlbWFpbnMgb3Blbiwgc28gdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBpbnRlcmFjdCB3aXRoIGl0IGNvbnRlbnQuXG4gKiAtIEZvY3VzIG1vZGUgaXMgYXBwbGllZCB3aGVuIHVzZXIgZm9jdXNlcyB0aGUgZWxlbWVudC5cbiAqIC0gTm9vcCBtb2RlIC0gdGhlIGNvbXBvbmVudCB3b24ndCByZWFjdCB0byB0aGUgdXNlciBpbnRlcmFjdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUcmlnZ2VycywgcG9wb3Zlci9wb3BvdmVyLW1vZGVzLmNvbXBvbmVudC5odG1sKVxuICpcbiAqIE5vb3AgbW9kZSBpcyBlc3BlY2lhbGx5IHVzZWZ1bCB3aGVuIHlvdSBuZWVkIHRvIGNvbnRyb2wgUG9wb3ZlciBwcm9ncmFtbWF0aWNhbGx5LCBmb3IgZXhhbXBsZSBzaG93L2hpZGVcbiAqIGFzIGEgcmVzdWx0IG9mIHNvbWUgdGhpcmQtcGFydHkgYWN0aW9uLCBsaWtlIEhUVFAgcmVxdWVzdCBvciB2YWxpZGF0aW9uIGNoZWNrOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWFudWFsIENvbnRyb2wsIHBvcG92ZXIvcG9wb3Zlci1ub29wLmNvbXBvbmVudClcbiAqXG4gKiBCZWxvdyBhcmUgZXhhbXBsZXMgZm9yIG1hbnVhbCBwb3BvdmVyIHNldHRpbmdzIGNvbnRyb2wsIGJvdGggdmlhIHRlbXBsYXRlIGJpbmRpbmcgYW5kIGNvZGUuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFBvcG92ZXIgU2V0dGluZ3MsIHBvcG92ZXIvcG9wb3Zlci1keW5hbWljLmNvbXBvbmVudClcbiAqXG4gKiBQbGVhc2Ugbm90ZSwgd2hpbGUgbWFuaXB1bGF0aW5nIFBvcG92ZXIgc2V0dGluZyB2aWEgY29kZSwgeW91IG5lZWQgdG8gY2FsbCBgcmVidWlsZCgpYCBtZXRob2QgdG8gYXBwbHkgdGhlIHNldHRpbmdzXG4gKiBjaGFuZ2VkLlxuICogQHN0YWNrZWQtZXhhbXBsZShQb3BvdmVyIFNldHRpbmdzIENvZGUsIHBvcG92ZXIvcG9wb3Zlci1keW5hbWljLWNvZGUuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoVGVtcGxhdGUgUmVmLCBwb3BvdmVyL3BvcG92ZXItdGVtcGxhdGUtcmVmLmNvbXBvbmVudClcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoQ3VzdG9tIENvbXBvbmVudCwgcG9wb3Zlci9wb3BvdmVyLWN1c3RvbS1jb21wb25lbnQuY29tcG9uZW50KVxuICogKi9cbmNsYXNzIE5iUG9wb3ZlckRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoaG9zdFJlZiwgZHluYW1pY092ZXJsYXlIYW5kbGVyKSB7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyID0gZHluYW1pY092ZXJsYXlIYW5kbGVyO1xuICAgICAgICB0aGlzLnBvcG92ZXJDb21wb25lbnQgPSBOYlBvcG92ZXJDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udGFpbmVyIGNvbnRlbnQgY29udGV4dC4gV2lsbCBiZSBhcHBsaWVkIHRvIHRoZSByZW5kZXJlZCBjb21wb25lbnQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUG9zaXRpb24gd2lsbCBiZSBjYWxjdWxhdGVkIHJlbGF0aXZlbHkgaG9zdCBlbGVtZW50IGJhc2VkIG9uIHRoZSBwb3NpdGlvbi5cbiAgICAgICAgICogQ2FuIGJlIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgc3RhcnQgb3IgZW5kLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gTmJQb3NpdGlvbi5UT1A7XG4gICAgICAgIHRoaXMuX2FkanVzdG1lbnQgPSBOYkFkanVzdG1lbnQuQ0xPQ0tXSVNFO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzY3JpYmVzIHdoZW4gdGhlIGNvbnRhaW5lciB3aWxsIGJlIHNob3duLlxuICAgICAgICAgKiBBdmFpbGFibGUgb3B0aW9uczogYGNsaWNrYCwgYGhvdmVyYCwgYGhpbnRgLCBgZm9jdXNgIGFuZCBgbm9vcGBcbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyID0gTmJUcmlnZ2VyLkNMSUNLO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2V0cyBwb3BvdmVyIG9mZnNldFxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLm9mZnNldCA9IDE1O1xuICAgICAgICB0aGlzLl9wb3BvdmVyQ2xhc3MgPSAnJztcbiAgICAgICAgdGhpcy5uYlBvcG92ZXJTaG93U3RhdGVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbmZpZyA9IHsgcGFuZWxDbGFzczogdGhpcy5wb3BvdmVyQ2xhc3MgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udGFpbmVyIHBvc2l0aW9uIHdpbGwgYmUgY2hhbmdlcyBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoaXMgc3RyYXRlZ3kgaWYgY29udGFpbmVyIGNhbid0IGZpdCB2aWV3IHBvcnQuXG4gICAgICogU2V0IHRoaXMgcHJvcGVydHkgdG8gYG5vb3BgIHZhbHVlIGlmIHlvdSB3YW50IHRvIGRpc2FibGUgYXV0b21hdGljYWxseSBhZGp1c3RtZW50LlxuICAgICAqIEF2YWlsYWJsZSB2YWx1ZXM6IGBjbG9ja3dpc2VgIChkZWZhdWx0KSwgYGNvdW50ZXJjbG9ja3dpc2VgLCBgdmVydGljYWxgLCBgaG9yaXpvbnRhbGAsIGBub29wYC5cbiAgICAgKiAqL1xuICAgIGdldCBhZGp1c3RtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRqdXN0bWVudDtcbiAgICB9XG4gICAgc2V0IGFkanVzdG1lbnQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYWRqdXN0bWVudCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgcG9wb3ZlckNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9wb3ZlckNsYXNzO1xuICAgIH1cbiAgICBzZXQgcG9wb3ZlckNsYXNzKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5wb3BvdmVyQ2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMuX3BvcG92ZXJDbGFzcyA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29uZmlnID0geyBwYW5lbENsYXNzOiB0aGlzLnBvcG92ZXJDbGFzcyB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBpc1Nob3duKCkge1xuICAgICAgICByZXR1cm4gISEodGhpcy5keW5hbWljT3ZlcmxheSAmJiB0aGlzLmR5bmFtaWNPdmVybGF5LmlzQXR0YWNoZWQpO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5ob3N0KHRoaXMuaG9zdFJlZilcbiAgICAgICAgICAgIC5jb21wb25lbnRUeXBlKHRoaXMucG9wb3ZlckNvbXBvbmVudCk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKCkge1xuICAgICAgICB0aGlzLnJlYnVpbGQoKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5ID0gdGhpcy5jb25maWd1cmVEeW5hbWljT3ZlcmxheSgpXG4gICAgICAgICAgICAuYnVpbGQoKTtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5pc1Nob3duXG4gICAgICAgICAgICAucGlwZShza2lwKDEpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChpc1Nob3duKSA9PiB0aGlzLm5iUG9wb3ZlclNob3dTdGF0ZUNoYW5nZS5lbWl0KHsgaXNTaG93biB9KSk7XG4gICAgfVxuICAgIHJlYnVpbGQoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KClcbiAgICAgICAgICAgIC5yZWJ1aWxkKCk7XG4gICAgfVxuICAgIHNob3coKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuc2hvdygpO1xuICAgIH1cbiAgICBoaWRlKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LmhpZGUoKTtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LnRvZ2dsZSgpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXIuZGVzdHJveSgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICBjb25maWd1cmVEeW5hbWljT3ZlcmxheSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAucG9zaXRpb24odGhpcy5wb3NpdGlvbilcbiAgICAgICAgICAgIC50cmlnZ2VyKHRoaXMudHJpZ2dlcilcbiAgICAgICAgICAgIC5vZmZzZXQodGhpcy5vZmZzZXQpXG4gICAgICAgICAgICAuYWRqdXN0bWVudCh0aGlzLmFkanVzdG1lbnQpXG4gICAgICAgICAgICAuY29udGVudCh0aGlzLmNvbnRlbnQpXG4gICAgICAgICAgICAuY29udGV4dCh0aGlzLmNvbnRleHQpXG4gICAgICAgICAgICAub3ZlcmxheUNvbmZpZyh0aGlzLm92ZXJsYXlDb25maWcpO1xuICAgIH1cbn1cbk5iUG9wb3ZlckRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iUG9wb3Zlcl0nLFxuICAgICAgICAgICAgICAgIGV4cG9ydEFzOiAnbmJQb3BvdmVyJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtOYkR5bmFtaWNPdmVybGF5SGFuZGxlciwgTmJEeW5hbWljT3ZlcmxheV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iUG9wb3ZlckRpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iRHluYW1pY092ZXJsYXlIYW5kbGVyIH1cbl07XG5OYlBvcG92ZXJEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29udGVudDogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJQb3BvdmVyJyxdIH1dLFxuICAgIGNvbnRleHQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iUG9wb3ZlckNvbnRleHQnLF0gfV0sXG4gICAgcG9zaXRpb246IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iUG9wb3ZlclBsYWNlbWVudCcsXSB9XSxcbiAgICBhZGp1c3RtZW50OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlBvcG92ZXJBZGp1c3RtZW50JyxdIH1dLFxuICAgIHRyaWdnZXI6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iUG9wb3ZlclRyaWdnZXInLF0gfV0sXG4gICAgb2Zmc2V0OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlBvcG92ZXJPZmZzZXQnLF0gfV0sXG4gICAgcG9wb3ZlckNsYXNzOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlBvcG92ZXJDbGFzcycsXSB9XSxcbiAgICBuYlBvcG92ZXJTaG93U3RhdGVDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJQb3BvdmVyTW9kdWxlIHtcbn1cbk5iUG9wb3Zlck1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iT3ZlcmxheU1vZHVsZV0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJQb3BvdmVyRGlyZWN0aXZlLCBOYlBvcG92ZXJDb21wb25lbnRdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYlBvcG92ZXJEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW05iUG9wb3ZlckNvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDb250ZXh0IG1lbnUgY29tcG9uZW50IHVzZWQgYXMgY29udGVudCB3aXRoaW4gTmJDb250ZXh0TWVudURpcmVjdGl2ZS5cbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY29udGV4dC1tZW51LWJhY2tncm91bmQtY29sb3I6XG4gKiBjb250ZXh0LW1lbnUtYm9yZGVyLWNvbG9yOlxuICogY29udGV4dC1tZW51LWJvcmRlci1zdHlsZTpcbiAqIGNvbnRleHQtbWVudS1ib3JkZXItd2lkdGg6XG4gKiBjb250ZXh0LW1lbnUtYm9yZGVyLXJhZGl1czpcbiAqIGNvbnRleHQtbWVudS10ZXh0LWFsaWduOlxuICogY29udGV4dC1tZW51LW1pbi13aWR0aDpcbiAqIGNvbnRleHQtbWVudS1tYXgtd2lkdGg6XG4gKiBjb250ZXh0LW1lbnUtc2hhZG93OlxuICogKi9cbmNsYXNzIE5iQ29udGV4dE1lbnVDb21wb25lbnQgZXh0ZW5kcyBOYlBvc2l0aW9uZWRDb250YWluZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHsgaXRlbXM6IFtdIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgaXMgZW1wdHkgc2luY2Ugd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBhZGRpdGlvbmFsbHlcbiAgICAgKiByZW5kZXIgaXMgaGFuZGxlZCBieSBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAgICovXG4gICAgcmVuZGVyQ29udGVudCgpIHsgfVxufVxuTmJDb250ZXh0TWVudUNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY29udGV4dC1tZW51JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYi1tZW51IGNsYXNzPVwiY29udGV4dC1tZW51XCIgW2l0ZW1zXT1cImNvbnRleHQuaXRlbXNcIiBbdGFnXT1cImNvbnRleHQudGFnXCI+PC9uYi1tZW51PlxuICBgXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ29udGV4dE1lbnVDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgaXRlbXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY29udGV4dDogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogRnVsbCBmZWF0dXJlZCBjb250ZXh0IG1lbnUgZGlyZWN0aXZlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGNvbnRleHQtbWVudS9jb250ZXh0LW1lbnUtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEp1c3QgcGFzcyBtZW51IGl0ZW1zIGFycmF5OlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gW25iQ29udGV4dE1lbnVdPVwiaXRlbXNcIj48L2J1dHRvbj5cbiAqIC4uLlxuICogaXRlbXMgPSBbeyB0aXRsZTogJ1Byb2ZpbGUnIH0sIHsgdGl0bGU6ICdMb2cgb3V0JyB9XTtcbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJDb250ZXh0TWVudU1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDb250ZXh0TWVudU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogQWxzbyBtYWtlIHN1cmUgYE5iTWVudU1vZHVsZWAgaXMgaW1wb3J0ZWQgdG8geW91ciBgYXBwLm1vZHVsZWAuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iTWVudU1vZHVsZS5mb3JSb290KCksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIElmIHlvdSB3YW50IHRvIGhhbmRsZSBjb250ZXh0IG1lbnUgY2xpY2tzIHlvdSBoYXZlIHRvIHBhc3MgYG5iQ29udGV4dE1lbnVUYWdgXG4gKiBwYXJhbSBhbmQgcmVnaXN0ZXIgdG8gZXZlbnRzIHVzaW5nIE5iTWVudVNlcnZpY2UuXG4gKiBgTmJDb250ZXh0TWVudWAgcmVuZGVycyBwbGFpbiBgTmJNZW51YCBpbnNpZGUsIHNvXG4gKiB5b3UgaGF2ZSB0byB3b3JrIHdpdGggaXQganVzdCBsaWtlIHdpdGggYE5iTWVudWAgY29tcG9uZW50OlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWVudSBpdGVtIGNsaWNrLCBjb250ZXh0LW1lbnUvY29udGV4dC1tZW51LWNsaWNrLmNvbXBvbmVudClcbiAqXG4gKiBDb250ZXh0IG1lbnUgaGFzIGRpZmZlcmVudCBwbGFjZW1lbnRzLCBzdWNoIGFzOiB0b3AsIGJvdHRvbSwgbGVmdCBhbmQgcmlnaHRcbiAqIHdoaWNoIGNhbiBiZSB1c2VkIGFzIGZvbGxvd2luZzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uIFtuYkNvbnRleHRNZW51XT1cIml0ZW1zXCIgbmJDb250ZXh0TWVudVBsYWNlbWVudD1cInJpZ2h0XCI+PC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBgYGB0c1xuICogaXRlbXMgPSBbeyB0aXRsZTogJ1Byb2ZpbGUnIH0sIHsgdGl0bGU6ICdMb2cgb3V0JyB9XTtcbiAqIGBgYFxuICpcbiAqIEJ5IGRlZmF1bHQgY29udGV4dCBtZW51IHdpbGwgdHJ5IHRvIGFkanVzdCBpdHNlbGYgdG8gbWF4aW1hbGx5IGZpdCB2aWV3cG9ydFxuICogYW5kIHByb3ZpZGUgdGhlIGJlc3QgdXNlciBleHBlcmllbmNlLiBJdCB3aWxsIHRyeSB0byBjaGFuZ2UgcG9zaXRpb24gb2YgdGhlIGNvbnRleHQgbWVudS5cbiAqIElmIHlvdSB3YW5uYSBkaXNhYmxlIHRoaXMgYmVoYXZpb3VyIGp1c3Qgc2V0IGl0IGZhbHN5IHZhbHVlLlxuICpcbiAqIGBgYGh0bWxcbiAqIDxidXR0b24gW25iQ29udGV4dE1lbnVdPVwiaXRlbXNcIiBuYkNvbnRleHRNZW51QWRqdXN0bWVudD1cImNvdW50ZXJjbG9ja3dpc2VcIj48L2J1dHRvbj5cbiAqIGBgYFxuICpcbiAqIGBgYHRzXG4gKiBpdGVtcyA9IFt7IHRpdGxlOiAnUHJvZmlsZScgfSwgeyB0aXRsZTogJ0xvZyBvdXQnIH1dO1xuICogYGBgXG4gKiBDb250ZXh0IG1lbnUgaGFzIGEgbnVtYmVyIG9mIHRyaWdnZXJzIHdoaWNoIHByb3ZpZGVzIGFuIGFiaWxpdHkgdG8gc2hvdyBhbmQgaGlkZSB0aGUgY29tcG9uZW50IGluIGRpZmZlcmVudCB3YXlzOlxuICpcbiAqIC0gQ2xpY2sgbW9kZSBzaG93cyB0aGUgY29tcG9uZW50IHdoZW4gYSB1c2VyIGNsaWNrcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBoaWRlcyB3aGVuIHRoZSB1c2VyIGNsaWNrc1xuICogc29tZXdoZXJlIG9uIHRoZSBkb2N1bWVudCBvdXRzaWRlIHRoZSBjb21wb25lbnQuXG4gKiAtIEhpbnQgcHJvdmlkZXMgY2FwYWJpbGl0eSB0byBzaG93IHRoZSBjb21wb25lbnQgd2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50XG4gKiBhbmQgaGlkZSB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdXQgb2YgdGhlIGhvc3QuXG4gKiAtIEhvdmVyIHdvcmtzIGxpa2UgaGludCBtb2RlIHdpdGggb25lIGV4Y2VwdGlvbiAtIHdoZW4gdGhlIHVzZXIgbW92ZXMgbW91c2UgZnJvbSBob3N0IGVsZW1lbnQgdG9cbiAqIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGUgY29tcG9uZW50IHJlbWFpbnMgb3Blbiwgc28gdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBpbnRlcmFjdCB3aXRoIGl0IGNvbnRlbnQuXG4gKiAtIEZvY3VzIG1vZGUgaXMgYXBwbGllZCB3aGVuIHVzZXIgZm9jdXNlcyB0aGUgZWxlbWVudC5cbiAqIC0gTm9vcCBtb2RlIC0gdGhlIGNvbXBvbmVudCB3b24ndCByZWFjdCB0byB0aGUgdXNlciBpbnRlcmFjdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUcmlnZ2VycywgY29udGV4dC1tZW51L2NvbnRleHQtbWVudS1tb2Rlcy5jb21wb25lbnQuaHRtbClcbiAqXG4gKiBOb29wIG1vZGUgaXMgZXNwZWNpYWxseSB1c2VmdWwgd2hlbiB5b3UgbmVlZCB0byBjb250cm9sIFBvcG92ZXIgcHJvZ3JhbW1hdGljYWxseSwgZm9yIGV4YW1wbGUgc2hvdy9oaWRlXG4gKiBhcyBhIHJlc3VsdCBvZiBzb21lIHRoaXJkLXBhcnR5IGFjdGlvbiwgbGlrZSBIVFRQIHJlcXVlc3Qgb3IgdmFsaWRhdGlvbiBjaGVjazpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKE1hbnVhbCBDb250cm9sLCBjb250ZXh0LW1lbnUvY29udGV4dC1tZW51LW5vb3AuY29tcG9uZW50KVxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTWFudWFsIENvbnRyb2wsIGNvbnRleHQtbWVudS9jb250ZXh0LW1lbnUtcmlnaHQtY2xpY2suY29tcG9uZW50KVxuICogKi9cbmNsYXNzIE5iQ29udGV4dE1lbnVEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RSZWYsIG1lbnVTZXJ2aWNlLCBkeW5hbWljT3ZlcmxheUhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5tZW51U2VydmljZSA9IG1lbnVTZXJ2aWNlO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5SGFuZGxlciA9IGR5bmFtaWNPdmVybGF5SGFuZGxlcjtcbiAgICAgICAgdGhpcy5jb250ZXh0TWVudUhvc3QgPSB0cnVlO1xuICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IE5iUG9zaXRpb24uQk9UVE9NO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29udGFpbmVyIHBvc2l0aW9uIHdpbGwgYmUgY2hhbmdlcyBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoaXMgc3RyYXRlZ3kgaWYgY29udGFpbmVyIGNhbid0IGZpdCB2aWV3IHBvcnQuXG4gICAgICAgICAqIFNldCB0aGlzIHByb3BlcnR5IHRvIGFueSBmYWxzeSB2YWx1ZSBpZiB5b3Ugd2FudCB0byBkaXNhYmxlIGF1dG9tYXRpY2FsbHkgYWRqdXN0bWVudC5cbiAgICAgICAgICogQXZhaWxhYmxlIHZhbHVlczogY2xvY2t3aXNlLCBjb3VudGVyY2xvY2t3aXNlLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmFkanVzdG1lbnQgPSBOYkFkanVzdG1lbnQuQ0xPQ0tXSVNFO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGVzY3JpYmVzIHdoZW4gdGhlIGNvbnRhaW5lciB3aWxsIGJlIHNob3duLlxuICAgICAgICAgKiBBdmFpbGFibGUgb3B0aW9uczogYGNsaWNrYCwgYGhvdmVyYCwgYGhpbnRgLCBgZm9jdXNgIGFuZCBgbm9vcGBcbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy50cmlnZ2VyID0gTmJUcmlnZ2VyLkNMSUNLO1xuICAgICAgICB0aGlzLl9jb250ZXh0TWVudUNsYXNzID0gJyc7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbmZpZyA9IHsgcGFuZWxDbGFzczogdGhpcy5jb250ZXh0TWVudUNsYXNzIH07XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbnRleHQgPSB7IGl0ZW1zOiB0aGlzLml0ZW1zLCB0YWc6IHRoaXMudGFnLCBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiB9O1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUG9zaXRpb24gd2lsbCBiZSBjYWxjdWxhdGVkIHJlbGF0aXZlbHkgaG9zdCBlbGVtZW50IGJhc2VkIG9uIHRoZSBwb3NpdGlvbi5cbiAgICAgKiBDYW4gYmUgdG9wLCByaWdodCwgYm90dG9tIGFuZCBsZWZ0LlxuICAgICAqICovXG4gICAgZ2V0IHBvc2l0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcG9zaXRpb247XG4gICAgfVxuICAgIHNldCBwb3NpdGlvbih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMucG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuX3Bvc2l0aW9uID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU92ZXJsYXlDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IE5iTWVudSB0YWcsIHdoaWNoIGhlbHBzIGlkZW50aWZ5IG1lbnUgd2hlbiB3b3JraW5nIHdpdGggTmJNZW51U2VydmljZS5cbiAgICAgKiAqL1xuICAgIGdldCB0YWcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90YWc7XG4gICAgfVxuICAgIHNldCB0YWcodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnRhZykge1xuICAgICAgICAgICAgdGhpcy5fdGFnID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU92ZXJsYXlDb250ZXh0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQmFzaWMgbWVudSBpdGVtcywgd2lsbCBiZSBwYXNzZWQgdG8gdGhlIGludGVybmFsIE5iTWVudUNvbXBvbmVudC5cbiAgICAgKiAqL1xuICAgIGdldCBpdGVtcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2l0ZW1zO1xuICAgIH1cbiAgICBzZXQgaXRlbXMoaXRlbXMpIHtcbiAgICAgICAgdGhpcy52YWxpZGF0ZUl0ZW1zKGl0ZW1zKTtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy51cGRhdGVPdmVybGF5Q29udGV4dCgpO1xuICAgIH1cbiAgICA7XG4gICAgZ2V0IGNvbnRleHRNZW51Q2xhc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jb250ZXh0TWVudUNsYXNzO1xuICAgIH1cbiAgICBzZXQgY29udGV4dE1lbnVDbGFzcyh2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgIT09IHRoaXMuY29udGV4dE1lbnVDbGFzcykge1xuICAgICAgICAgICAgdGhpcy5fY29udGV4dE1lbnVDbGFzcyA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29uZmlnID0geyBwYW5lbENsYXNzOiB0aGlzLmNvbnRleHRNZW51Q2xhc3MgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5ob3N0KHRoaXMuaG9zdFJlZilcbiAgICAgICAgICAgIC5jb21wb25lbnRUeXBlKE5iQ29udGV4dE1lbnVDb21wb25lbnQpO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcygpIHtcbiAgICAgICAgdGhpcy5yZWJ1aWxkKCk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25JdGVtQ2xpY2soKTtcbiAgICB9XG4gICAgcmVidWlsZCgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLnJlYnVpbGQoKTtcbiAgICB9XG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5zaG93KCk7XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuaGlkZSgpO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkudG9nZ2xlKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5SGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5wb3NpdGlvbih0aGlzLnBvc2l0aW9uKVxuICAgICAgICAgICAgLnRyaWdnZXIodGhpcy50cmlnZ2VyKVxuICAgICAgICAgICAgLmFkanVzdG1lbnQodGhpcy5hZGp1c3RtZW50KVxuICAgICAgICAgICAgLmNvbnRleHQodGhpcy5vdmVybGF5Q29udGV4dClcbiAgICAgICAgICAgIC5vdmVybGF5Q29uZmlnKHRoaXMub3ZlcmxheUNvbmZpZyk7XG4gICAgfVxuICAgIC8qXG4gICAgICogTmJNZW51Q29tcG9uZW50IHdpbGwgY3Jhc2ggaWYgZG9uJ3QgcGFzcyBtZW51IGl0ZW1zIHRvIGl0LlxuICAgICAqIFNvLCB3ZSBqdXN0IHZhbGlkYXRpbmcgdGhlbSBhbmQgdGhyb3cgY3VzdG9tIG9idmlvdXMgZXJyb3IuXG4gICAgICogKi9cbiAgICB2YWxpZGF0ZUl0ZW1zKGl0ZW1zKSB7XG4gICAgICAgIGlmICghaXRlbXMgfHwgIWl0ZW1zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYExpc3Qgb2YgbWVudSBpdGVtcyBleHBlY3RlZCwgYnV0IGdpdmVuOiAke2l0ZW1zfWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHN1YnNjcmliZU9uSXRlbUNsaWNrKCkge1xuICAgICAgICB0aGlzLm1lbnVTZXJ2aWNlLm9uSXRlbUNsaWNrKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyB0YWcgfSkgPT4gdGFnID09PSB0aGlzLnRhZyksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5oaWRlKCkpO1xuICAgIH1cbiAgICB1cGRhdGVPdmVybGF5Q29udGV4dCgpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5Q29udGV4dCA9IHsgaXRlbXM6IHRoaXMuaXRlbXMsIHBvc2l0aW9uOiB0aGlzLnBvc2l0aW9uLCB0YWc6IHRoaXMudGFnIH07XG4gICAgfVxufVxuTmJDb250ZXh0TWVudURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iQ29udGV4dE1lbnVdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtOYkR5bmFtaWNPdmVybGF5SGFuZGxlciwgTmJEeW5hbWljT3ZlcmxheV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ29udGV4dE1lbnVEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBOYk1lbnVTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYkR5bmFtaWNPdmVybGF5SGFuZGxlciB9XG5dO1xuTmJDb250ZXh0TWVudURpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBjb250ZXh0TWVudUhvc3Q6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmNvbnRleHQtbWVudS1ob3N0JyxdIH1dLFxuICAgIHBvc2l0aW9uOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYkNvbnRleHRNZW51UGxhY2VtZW50JyxdIH1dLFxuICAgIGFkanVzdG1lbnQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iQ29udGV4dE1lbnVBZGp1c3RtZW50JyxdIH1dLFxuICAgIHRhZzogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJDb250ZXh0TWVudVRhZycsXSB9XSxcbiAgICBpdGVtczogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJDb250ZXh0TWVudScsXSB9XSxcbiAgICB0cmlnZ2VyOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYkNvbnRleHRNZW51VHJpZ2dlcicsXSB9XSxcbiAgICBjb250ZXh0TWVudUNsYXNzOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYkNvbnRleHRNZW51Q2xhc3MnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQ29udGV4dE1lbnVNb2R1bGUge1xufVxuTmJDb250ZXh0TWVudU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTmJPdmVybGF5TW9kdWxlLCBOYk1lbnVNb2R1bGVdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYkNvbnRleHRNZW51RGlyZWN0aXZlXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYkNvbnRleHRNZW51RGlyZWN0aXZlLCBOYkNvbnRleHRNZW51Q29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtOYkNvbnRleHRNZW51Q29tcG9uZW50XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFByb2dyZXNzIEJhciBpcyBhIGNvbXBvbmVudCBmb3IgaW5kaWNhdGluZyBwcm9ncmVzcy5cbiAqXG4gKiBTaW1wbGUgdXNhZ2U6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLXByb2dyZXNzLWJhciBbdmFsdWVdPVwiNTBcIj48L25iLXByb2dyZXNzLWJhcj5cbiAqIGBgYFxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJQcm9ncmVzc0Jhck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJQcm9ncmVzc0Jhck1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogUHJvZ3Jlc3MgYmFyIGFjY2VwdHMgcHJvcGVydHkgYHZhbHVlYCBpbiByYW5nZSAwLTEwMFxuICogQHN0YWNrZWQtZXhhbXBsZShQcm9ncmVzcyBiYXIsIHByb2dyZXNzLWJhci9wcm9ncmVzcy1iYXItc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIFByb2dyZXNzIGJhciBiYWNrZ3JvdW5kIGNvdWxkIGJlIGNvbmZpZ3VyZWQgYnkgcHJvdmlkaW5nIGEgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFByb2dyZXNzIGJhciBzdGF0dXMsIHByb2dyZXNzLWJhci9wcm9ncmVzcy1iYXItc3RhdHVzLmNvbXBvbmVudClcbiAqXG4gKiBQcm9ncmVzcyBiYXIgc2l6ZSAoaGVpZ2h0IGFuZCBmb250LXNpemUpIGNvdWxkIGJlIGNvbmZpZ3VyZWQgYnkgcHJvdmlkaW5nIGEgYHNpemVgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShQcm9ncmVzcyBiYXIgc2l6ZSwgcHJvZ3Jlc3MtYmFyL3Byb2dyZXNzLWJhci1zaXplLmNvbXBvbmVudClcbiAqXG4gKiBgZGlzcGxheVZhbHVlYCBwcm9wZXJ0eSBzaG93cyBjdXJyZW50IHZhbHVlIGluc2lkZSBwcm9ncmVzcyBiYXIuIEl0J3MgYWxzbyBwb3NzaWJsZSB0byBhZGQgY3VzdG9tIHRleHQgaW5zaWRlOlxuICogQHN0YWNrZWQtZXhhbXBsZShQcm9ncmVzcyBiYXIgdmFsdWUsIHByb2dyZXNzLWJhci9wcm9ncmVzcy1iYXItdmFsdWUuY29tcG9uZW50KVxuICpcbiAqIFByb2dyZXNzIGJhciBzdXBwb3J0cyBgd2lkdGhgIGFuZCBgYmFja2dyb3VuZC1jb2xvcmAgdHJhbnNpdGlvbjpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUHJvZ3Jlc3MgYmFyIGludGVyYWN0aXZlLCBwcm9ncmVzcy1iYXIvcHJvZ3Jlc3MtYmFyLWludGVyYWN0aXZlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogcHJvZ3Jlc3MtYmFyLWFuaW1hdGlvbi1kdXJhdGlvbjpcbiAqIHByb2dyZXNzLWJhci1ib3JkZXItcmFkaXVzOlxuICogcHJvZ3Jlc3MtYmFyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBwcm9ncmVzcy1iYXItdGlueS1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItdGlueS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHByb2dyZXNzLWJhci10aW55LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItdGlueS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLXNtYWxsLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1zbWFsbC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHByb2dyZXNzLWJhci1zbWFsbC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLXNtYWxsLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItbWVkaXVtLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1tZWRpdW0tdGV4dC1mb250LXNpemU6XG4gKiBwcm9ncmVzcy1iYXItbWVkaXVtLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItbWVkaXVtLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItbGFyZ2UtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLWxhcmdlLXRleHQtZm9udC1zaXplOlxuICogcHJvZ3Jlc3MtYmFyLWxhcmdlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItbGFyZ2UtdGV4dC1saW5lLWhlaWdodDpcbiAqIHByb2dyZXNzLWJhci1naWFudC1oZWlnaHQ6XG4gKiBwcm9ncmVzcy1iYXItZ2lhbnQtdGV4dC1mb250LXNpemU6XG4gKiBwcm9ncmVzcy1iYXItZ2lhbnQtdGV4dC1mb250LXdlaWdodDpcbiAqIHByb2dyZXNzLWJhci1naWFudC10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcHJvZ3Jlc3MtYmFyLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItYmFzaWMtZmlsbGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItcHJpbWFyeS1maWxsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLXN1Y2Nlc3MtZmlsbGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1pbmZvLWZpbGxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWluZm8tdGV4dC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItd2FybmluZy1maWxsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBwcm9ncmVzcy1iYXItZGFuZ2VyLWZpbGxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWRhbmdlci10ZXh0LWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHByb2dyZXNzLWJhci1jb250cm9sLWZpbGxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcHJvZ3Jlc3MtYmFyLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJQcm9ncmVzc0JhckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvZ3Jlc3MgYmFyIHZhbHVlIGluIHBlcmNlbnQgKDAgLSAxMDApXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZhbHVlID0gMDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFByb2dyZXNzIGJhciBiYWNrZ3JvdW5kIChgYmFzaWNgIChkZWZhdWx0KSwgYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogUHJvZ3Jlc3MgYmFyIHNpemUgKGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAgKGRlZmF1bHQpLCBgbGFyZ2VgLCBgZ2lhbnRgKVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEaXNwbGF5cyB2YWx1ZSBpbnNpZGUgcHJvZ3Jlc3MgYmFyXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgdGlueSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3RpbnknO1xuICAgIH1cbiAgICBnZXQgc21hbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgfVxuICAgIGdldCBtZWRpdW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdtZWRpdW0nO1xuICAgIH1cbiAgICBnZXQgbGFyZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdsYXJnZSc7XG4gICAgfVxuICAgIGdldCBnaWFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59XG5OYlByb2dyZXNzQmFyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1wcm9ncmVzcy1iYXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWNvbnRhaW5lclwiPlxuICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLXZhbHVlXCIgW3N0eWxlLndpZHRoLiVdPVwidmFsdWVcIj5cbiAgICAgICAgPHNwYW4gKm5nSWY9XCJkaXNwbGF5VmFsdWVcIj57eyB2YWx1ZSB9fSU8L3NwYW4+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpibG9ja30ucHJvZ3Jlc3MtY29udGFpbmVye292ZXJmbG93OmhpZGRlbn0ucHJvZ3Jlc3MtdmFsdWV7aGVpZ2h0OjEwMCU7dGV4dC1hbGlnbjpjZW50ZXI7b3ZlcmZsb3c6aGlkZGVufVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlByb2dyZXNzQmFyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlByb2dyZXNzQmFyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGF0dXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc3BsYXlWYWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNtYWxsOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXNtYWxsJyxdIH1dLFxuICAgIG1lZGl1bTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1tZWRpdW0nLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgZ2lhbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtZ2lhbnQnLF0gfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlByb2dyZXNzQmFyTW9kdWxlIHtcbn1cbk5iUHJvZ3Jlc3NCYXJNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYlByb2dyZXNzQmFyQ29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJQcm9ncmVzc0JhckNvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBBbGVydCBjb21wb25lbnQuXG4gKlxuICogQmFzaWMgYWxlcnQgZXhhbXBsZTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGFsZXJ0L2FsZXJ0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBBbGVydCBjb25maWd1cmF0aW9uOlxuICpcbiAqIGBgYGh0bWxcbiAqIDxuYi1hbGVydCBzdGF0dXM9XCJzdWNjZXNzXCI+XG4gKiAgIFlvdSBoYXZlIGJlZW4gc3VjY2Vzc2Z1bGx5IGF1dGhlbnRpY2F0ZWQhXG4gKiA8L25iLWFsZXJ0PlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkFsZXJ0TW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkFsZXJ0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBbGVydCBjb3VsZCBhZGRpdGlvbmFsbHkgaGF2ZSBhIGBjbG9zZWAgYnV0dG9uIHdoZW4gYGNsb3NhYmxlYCBwcm9wZXJ0eSBpcyBzZXQ6XG4gKiBgYGBodG1sXG4gKiA8bmItYWxlcnQgc3RhdHVzPVwic3VjY2Vzc1wiIGNsb3NhYmxlIChjbG9zZSk9XCJvbkNsb3NlKClcIj5cbiAqICAgWW91IGhhdmUgYmVlbiBzdWNjZXNzZnVsbHkgYXV0aGVudGljYXRlZCFcbiAqIDwvbmItYWxlcnQ+XG4gKiBgYGBcbiAqXG4gKiBDb2xvcmVkIGFsZXJ0cyBjb3VsZCBiZSBzaW1wbHkgY29uZmlndXJlZCBieSBwcm92aWRpbmcgYSBgc3RhdHVzYCBwcm9wZXJ0eTpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQWxlcnQgc3RhdHVzLCBhbGVydC9hbGVydC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIEl0IGlzIGFsc28gcG9zc2libGUgdG8gYXNzaWduIGFuIGBhY2NlbnRgIHByb3BlcnR5IGZvciBhIHNsaWdodCBhbGVydCBoaWdobGlnaHRcbiAqIGFzIHdlbGwgYXMgY29tYmluZSBpdCB3aXRoIGBzdGF0dXNgOlxuICogQHN0YWNrZWQtZXhhbXBsZShBbGVydCBhY2NlbnQsIGFsZXJ0L2FsZXJ0LWFjY2VudHMuY29tcG9uZW50KVxuICpcbiAqIEFuZCBgb3V0bGluZWAgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKE91dGxpbmUgQWxlcnQsIGFsZXJ0L2FsZXJ0LW91dGxpbmUuY29tcG9uZW50KVxuICpcbiAqIEBhZGRpdGlvbmFsLWV4YW1wbGUoTXVsdGlwbGUgU2l6ZXMsIGFsZXJ0L2FsZXJ0LXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYWxlcnQtYm9yZGVyLXJhZGl1czpcbiAqIGFsZXJ0LWJvdHRvbS1tYXJnaW46XG4gKiBhbGVydC1wYWRkaW5nOlxuICogYWxlcnQtc2Nyb2xsYmFyLWNvbG9yOlxuICogYWxlcnQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1zY3JvbGxiYXItd2lkdGg6XG4gKiBhbGVydC1zaGFkb3c6XG4gKiBhbGVydC10ZXh0LWZvbnQtZmFtaWx5OlxuICogYWxlcnQtdGV4dC1mb250LXNpemU6XG4gKiBhbGVydC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWxlcnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGFsZXJ0LWNsb3NhYmxlLXN0YXJ0LXBhZGRpbmc6XG4gKiBhbGVydC10aW55LWhlaWdodDpcbiAqIGFsZXJ0LXNtYWxsLWhlaWdodDpcbiAqIGFsZXJ0LW1lZGl1bS1oZWlnaHQ6XG4gKiBhbGVydC1tZWRpdW0tcGFkZGluZzpcbiAqIGFsZXJ0LWxhcmdlLWhlaWdodDpcbiAqIGFsZXJ0LWdpYW50LWhlaWdodDpcbiAqIGFsZXJ0LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1iYXNpYy10ZXh0LWNvbG9yOlxuICogYWxlcnQtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogYWxlcnQtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogYWxlcnQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtaW5mby10ZXh0LWNvbG9yOlxuICogYWxlcnQtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogYWxlcnQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogYWxlcnQtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBhbGVydC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGFsZXJ0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGFsZXJ0LWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1iYXNpYy1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1wcmltYXJ5LWNvbG9yOlxuICogYWxlcnQtYWNjZW50LWluZm8tY29sb3I6XG4gKiBhbGVydC1hY2NlbnQtc3VjY2Vzcy1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC13YXJuaW5nLWNvbG9yOlxuICogYWxlcnQtYWNjZW50LWRhbmdlci1jb2xvcjpcbiAqIGFsZXJ0LWFjY2VudC1jb250cm9sLWNvbG9yOlxuICogYWxlcnQtb3V0bGluZS13aWR0aDpcbiAqIGFsZXJ0LW91dGxpbmUtYmFzaWMtY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXByaW1hcnktY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLWluZm8tY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXN1Y2Nlc3MtY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLXdhcm5pbmctY29sb3I6XG4gKiBhbGVydC1vdXRsaW5lLWRhbmdlci1jb2xvcjpcbiAqIGFsZXJ0LW91dGxpbmUtY29udHJvbC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJBbGVydENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgc2l6ZSwgYXZhaWxhYmxlIHNpemVzOlxuICAgICAgICAgKiBgdGlueWAsIGBzbWFsbGAsIGBtZWRpdW1gLCBgbGFyZ2VgLCBgZ2lhbnRgXG4gICAgICAgICAqIFVuc2V0IGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNpemUgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFsZXJ0IHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgYmFzaWNgIChkZWZhdWx0KSwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGBpbmZvYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQWxlcnQgYWNjZW50IChjb2xvciBvZiB0aGUgdG9wIGJvcmRlcik6XG4gICAgICAgICAqIGBiYXNpY2AsIGBwcmltYXJ5YCwgYHN1Y2Nlc3NgLCBgaW5mb2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYC5cbiAgICAgICAgICogVW5zZXQgYnkgZGVmYXVsdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYWNjZW50ID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGVydCBvdXRsaW5lIChjb2xvciBvZiB0aGUgYm9yZGVyKTpcbiAgICAgICAgICogYGJhc2ljYCwgYHByaW1hcnlgLCBgc3VjY2Vzc2AsIGBpbmZvYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKiBVbnNldCBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vdXRsaW5lID0gJyc7XG4gICAgICAgIHRoaXMuX2Nsb3NhYmxlID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIGNoaXAgaXMgcmVtb3ZlZFxuICAgICAgICAgKiBAdHlwZSBFdmVudEVtaXR0ZXI8YW55PlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbG9zZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvd3MgYGNsb3NlYCBpY29uXG4gICAgICovXG4gICAgZ2V0IGNsb3NhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY2xvc2FibGU7XG4gICAgfVxuICAgIHNldCBjbG9zYWJsZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jbG9zYWJsZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIHRoZSByZW1vdmVkIGNoaXAgZXZlbnRcbiAgICAgKi9cbiAgICBvbkNsb3NlKCkge1xuICAgICAgICB0aGlzLmNsb3NlLmVtaXQoKTtcbiAgICB9XG4gICAgZ2V0IHRpbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICB9XG4gICAgZ2V0IHNtYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgIH1cbiAgICBnZXQgbWVkaXVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgZ2V0IGxhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgIH1cbiAgICBnZXQgZ2lhbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgfVxuICAgIGdldCBwcmltYXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgfVxuICAgIGdldCB3YXJuaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICB9XG4gICAgZ2V0IGRhbmdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGJhc2ljKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgfVxuICAgIGdldCBjb250cm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IHByaW1hcnlBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgc3VjY2Vzc0FjY2VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjZW50ID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCBpbmZvQWNjZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHdhcm5pbmdBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyQWNjZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hY2NlbnQgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWNBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2xBY2NlbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY2VudCA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeU91dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdwcmltYXJ5JztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3NPdXRsaW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsaW5lID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCBpbmZvT3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0bGluZSA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgd2FybmluZ091dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICd3YXJuaW5nJztcbiAgICB9XG4gICAgZ2V0IGRhbmdlck91dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdkYW5nZXInO1xuICAgIH1cbiAgICBnZXQgYmFzaWNPdXRsaW5lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRsaW5lID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbE91dGxpbmUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm91dGxpbmUgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuTmJBbGVydENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYWxlcnQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGJ1dHRvbiAqbmdJZj1cImNsb3NhYmxlXCIgdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2VcIiBhcmlhLWxhYmVsPVwiQ2xvc2VcIiAoY2xpY2spPVwib25DbG9zZSgpXCI+XG4gICAgICA8c3BhbiBhcmlhLWhpZGRlbj1cInRydWVcIj4mdGltZXM7PC9zcGFuPlxuICAgIDwvYnV0dG9uPlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246cmVsYXRpdmV9W2Rpcj1sdHJdIDpob3N0IC5jbG9zZXtyaWdodDowfVtkaXI9cnRsXSA6aG9zdCAuY2xvc2V7bGVmdDowfS5jbG9zZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtjb2xvcjppbmhlcml0O2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQ7Ym9yZGVyOjA7YXBwZWFyYW5jZTpub25lfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkFsZXJ0Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYkFsZXJ0Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYWNjZW50OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvdXRsaW5lOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjbG9zYWJsZTogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5jbG9zYWJsZScsXSB9XSxcbiAgICBjbG9zZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHRpbnk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtdGlueScsXSB9XSxcbiAgICBzbWFsbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1zbWFsbCcsXSB9XSxcbiAgICBtZWRpdW06IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbWVkaXVtJyxdIH1dLFxuICAgIGxhcmdlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWxhcmdlJyxdIH1dLFxuICAgIGdpYW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWdpYW50JyxdIH1dLFxuICAgIHByaW1hcnk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyxdIH1dLFxuICAgIHN1Y2Nlc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyxdIH1dLFxuICAgIGluZm86IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1pbmZvJyxdIH1dLFxuICAgIHdhcm5pbmc6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyxdIH1dLFxuICAgIGRhbmdlcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWRhbmdlcicsXSB9XSxcbiAgICBiYXNpYzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWJhc2ljJyxdIH1dLFxuICAgIGNvbnRyb2w6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1jb250cm9sJyxdIH1dLFxuICAgIHByaW1hcnlBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1wcmltYXJ5JyxdIH1dLFxuICAgIHN1Y2Nlc3NBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1zdWNjZXNzJyxdIH1dLFxuICAgIGluZm9BY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1pbmZvJyxdIH1dLFxuICAgIHdhcm5pbmdBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC13YXJuaW5nJyxdIH1dLFxuICAgIGRhbmdlckFjY2VudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYWNjZW50LWRhbmdlcicsXSB9XSxcbiAgICBiYXNpY0FjY2VudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYWNjZW50LWJhc2ljJyxdIH1dLFxuICAgIGNvbnRyb2xBY2NlbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjY2VudC1jb250cm9sJyxdIH1dLFxuICAgIHByaW1hcnlPdXRsaW5lOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5vdXRsaW5lLXByaW1hcnknLF0gfV0sXG4gICAgc3VjY2Vzc091dGxpbmU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm91dGxpbmUtc3VjY2VzcycsXSB9XSxcbiAgICBpbmZvT3V0bGluZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Mub3V0bGluZS1pbmZvJyxdIH1dLFxuICAgIHdhcm5pbmdPdXRsaW5lOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5vdXRsaW5lLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyT3V0bGluZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Mub3V0bGluZS1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWNPdXRsaW5lOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5vdXRsaW5lLWJhc2ljJyxdIH1dLFxuICAgIGNvbnRyb2xPdXRsaW5lOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5vdXRsaW5lLWNvbnRyb2wnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkFsZXJ0TW9kdWxlIHtcbn1cbk5iQWxlcnRNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTaGFyZWRNb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJBbGVydENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJBbGVydENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ2hhdCBmb3JtIGNvbXBvbmVudC5cbiAqXG4gKiBTaG93IGEgbWVzc2FnZSBmb3JtIHdpdGggYSBzZW5kIG1lc3NhZ2UgYnV0dG9uLlxuICpcbiAqIGBgYHRzXG4gKiA8bmItY2hhdC1mb3JtIHNob3dCdXR0b249XCJ0cnVlXCIgYnV0dG9uSWNvbj1cIm5iLXNlbmRcIj5cbiAqIDwvbmItY2hhdC1mb3JtPlxuICogYGBgXG4gKlxuICogV2hlbiBgW2Ryb3BGaWxlc109XCJ0cnVlXCJgIGhhbmRsZXMgZmlsZXMgZHJhZyZkcm9wIHdpdGggYSBmaWxlIHByZXZpZXcuXG4gKlxuICogRHJhZyAmIGRyb3AgYXZhaWxhYmxlIGZvciBmaWxlcyBhbmQgaW1hZ2VzOlxuICogQHN0YWNrZWQtZXhhbXBsZShEcmFnICYgRHJvcCBDaGF0LCBjaGF0L2NoYXQtZHJvcC5jb21wb25lbnQpXG4gKlxuICogTmV3IG1lc3NhZ2UgY291bGQgYmUgdHJhY2tlZCBvdXRzaWRlIGJ5IHVzaW5nIGAoc2VuZClgIG91dHB1dC5cbiAqXG4gKiBgYGB0c1xuICogPG5iLWNoYXQtZm9ybSAoc2VuZCk9XCJvbk5ld01lc3NhZ2UoJGV2ZW50KVwiPlxuICogPC9uYi1jaGF0LWZvcm0+XG4gKlxuICogLy8gLi4uXG4gKlxuICogb25OZXdNZXNzYWdlKHsgbWVzc2FnZTogc3RyaW5nLCBmaWxlczogYW55W10gfSkge1xuICogICB0aGlzLnNlcnZpY2Uuc2VuZFRvU2VydmVyKG1lc3NhZ2UsIGZpbGVzKTtcbiAqIH1cbiAqIGBgYFxuICovXG5jbGFzcyBOYkNoYXRGb3JtQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZCwgZG9tU2FuaXRpemVyKSB7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kb21TYW5pdGl6ZXIgPSBkb21TYW5pdGl6ZXI7XG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy5pbnB1dEZvY3VzID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW5wdXRIb3ZlciA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRyb3BwZWRGaWxlcyA9IFtdO1xuICAgICAgICB0aGlzLmltZ0Ryb3BUeXBlcyA9IFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvZ2lmJ107XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQcmVkZWZpbmVkIG1lc3NhZ2UgdGV4dFxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tZXNzYWdlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIHBsYWNlaG9sZGVyIHRleHRcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubWVzc2FnZVBsYWNlaG9sZGVyID0gJ1R5cGUgYSBtZXNzYWdlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbmQgYnV0dG9uIHRpdGxlXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1dHRvblRpdGxlID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZW5kIGJ1dHRvbiBpY29uLCBzaG93biBpZiBgYnV0dG9uVGl0bGVgIGlzIGVtcHR5XG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1dHRvbkljb24gPSAncGFwZXItcGxhbmUtb3V0bGluZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTaG93IHNlbmQgYnV0dG9uXG4gICAgICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaG93QnV0dG9uID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNob3cgc2VuZCBidXR0b25cbiAgICAgICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyb3BGaWxlcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlsZSBkcm9wIHBsYWNlaG9sZGVyIHRleHRcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZHJvcEZpbGVQbGFjZWhvbGRlciA9ICdEcm9wIGZpbGUgdG8gc2VuZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7RXZlbnRFbWl0dGVyPHsgbWVzc2FnZTogc3RyaW5nLCBmaWxlczogRmlsZVtdIH0+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zZW5kID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiBtZXNzYWdlIGlucHV0IHZhbHVlIGhhcyBiZWVuIGNoYW5nZWRcbiAgICAgICAgICogQHR5cGUge0V2ZW50RW1pdHRlcjxzdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbklucHV0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmZpbGVPdmVyID0gZmFsc2U7XG4gICAgfVxuICAgIG9uRHJvcChldmVudCkge1xuICAgICAgICBpZiAodGhpcy5kcm9wRmlsZXMpIHtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHRoaXMuZmlsZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLmZpbGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBmaWxlIG9mIGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBmaWxlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5pbWdEcm9wVHlwZXMuaW5jbHVkZXMoZmlsZS50eXBlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZnIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZnIub25sb2FkID0gKGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXMuc3JjID0gZS50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcy51cmxTdHlsZSA9IHRoaXMuZG9tU2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RTdHlsZShgdXJsKCR7cmVzLnNyY30pYCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgZnIucmVhZEFzRGF0YVVSTChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRyb3BwZWRGaWxlcy5wdXNoKHJlcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUZpbGUoZmlsZSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuZHJvcHBlZEZpbGVzLmluZGV4T2YoZmlsZSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmRyb3BwZWRGaWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRHJhZ092ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLmRyb3BGaWxlcykge1xuICAgICAgICAgICAgdGhpcy5maWxlT3ZlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb25EcmFnTGVhdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLmRyb3BGaWxlcykge1xuICAgICAgICAgICAgdGhpcy5maWxlT3ZlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNlbmRNZXNzYWdlKCkge1xuICAgICAgICBpZiAodGhpcy5kcm9wcGVkRmlsZXMubGVuZ3RoIHx8IFN0cmluZyh0aGlzLm1lc3NhZ2UpLnRyaW0oKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuc2VuZC5lbWl0KHsgbWVzc2FnZTogdGhpcy5tZXNzYWdlLCBmaWxlczogdGhpcy5kcm9wcGVkRmlsZXMgfSk7XG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnJztcbiAgICAgICAgICAgIHRoaXMuZHJvcHBlZEZpbGVzID0gW107XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0U3RhdHVzKHN0YXR1cykge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXMgIT09IHN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRJbnB1dFN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuZmlsZU92ZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEhpZ2hsaWdodFN0YXR1cygpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlucHV0Rm9jdXMgfHwgdGhpcy5pbnB1dEhvdmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICdiYXNpYyc7XG4gICAgfVxuICAgIGdldEJ1dHRvblN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SGlnaGxpZ2h0U3RhdHVzKCk7XG4gICAgfVxuICAgIGdldEhpZ2hsaWdodFN0YXR1cygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAnYmFzaWMnIHx8IHRoaXMuc3RhdHVzID09PSAnY29udHJvbCcpIHtcbiAgICAgICAgICAgIHJldHVybiAncHJpbWFyeSc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xuICAgIH1cbiAgICBvbk1vZGVsQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMub25JbnB1dENoYW5nZS5lbWl0KHZhbHVlKTtcbiAgICB9XG59XG5OYkNoYXRGb3JtQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LWZvcm0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGRpdiBjbGFzcz1cImRyb3BwZWQtZmlsZXNcIiAqbmdJZj1cImRyb3BwZWRGaWxlcz8ubGVuZ3RoXCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBmaWxlIG9mIGRyb3BwZWRGaWxlc1wiPlxuICAgICAgICA8ZGl2ICpuZ0lmPVwiZmlsZS51cmxTdHlsZVwiIFtzdHlsZS5iYWNrZ3JvdW5kLWltYWdlXT1cImZpbGUudXJsU3R5bGVcIj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlbW92ZVwiIChjbGljayk9XCJyZW1vdmVGaWxlKGZpbGUpXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiAqbmdJZj1cIiFmaWxlLnVybFN0eWxlXCI+XG4gICAgICAgICAgPG5iLWljb24gaWNvbj1cImZpbGUtdGV4dC1vdXRsaW5lXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiPjwvbmItaWNvbj5cbiAgICAgICAgICA8c3BhbiBjbGFzcz1cInJlbW92ZVwiIChjbGljayk9XCJyZW1vdmVGaWxlKGZpbGUpXCI+JnRpbWVzOzwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZS1yb3dcIj5cbiAgICAgIDxpbnB1dCBuYklucHV0XG4gICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICAgW3N0YXR1c109XCJnZXRJbnB1dFN0YXR1cygpXCJcbiAgICAgICAgICAgICAoZm9jdXMpPVwiaW5wdXRGb2N1cyA9IHRydWVcIlxuICAgICAgICAgICAgIChibHVyKT1cImlucHV0Rm9jdXMgPSBmYWxzZVwiXG4gICAgICAgICAgICAgKG1vdXNlZW50ZXIpPVwiaW5wdXRIb3ZlciA9IHRydWVcIlxuICAgICAgICAgICAgIChtb3VzZWxlYXZlKT1cImlucHV0SG92ZXIgPSBmYWxzZVwiXG4gICAgICAgICAgICAgWyhuZ01vZGVsKV09XCJtZXNzYWdlXCJcbiAgICAgICAgICAgICAobmdNb2RlbENoYW5nZSk9XCJvbk1vZGVsQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgIFtjbGFzcy53aXRoLWJ1dHRvbl09XCJzaG93QnV0dG9uXCJcbiAgICAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJ7eyBmaWxlT3ZlciA/IGRyb3BGaWxlUGxhY2Vob2xkZXIgOiBtZXNzYWdlUGxhY2Vob2xkZXIgfX1cIlxuICAgICAgICAgICAgIChrZXl1cC5lbnRlcik9XCJzZW5kTWVzc2FnZSgpXCI+XG4gICAgICA8YnV0dG9uIG5iQnV0dG9uXG4gICAgICAgICAgICAgIFtzdGF0dXNdPVwiZ2V0QnV0dG9uU3RhdHVzKClcIlxuICAgICAgICAgICAgICAqbmdJZj1cInNob3dCdXR0b25cIlxuICAgICAgICAgICAgICBbY2xhc3Mud2l0aC1pY29uXT1cIiFidXR0b25UaXRsZVwiXG4gICAgICAgICAgICAgIChjbGljayk9XCJzZW5kTWVzc2FnZSgpXCJcbiAgICAgICAgICAgICAgY2xhc3M9XCJzZW5kLWJ1dHRvblwiPlxuICAgICAgICA8bmItaWNvbiAqbmdJZj1cIiFidXR0b25UaXRsZTsgZWxzZSB0aXRsZVwiIFtpY29uXT1cImJ1dHRvbkljb25cIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCI+PC9uYi1pY29uPlxuICAgICAgICA8bmctdGVtcGxhdGUgI3RpdGxlPnt7IGJ1dHRvblRpdGxlIH19PC9uZy10ZW1wbGF0ZT5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2hhdEZvcm1Db21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogRG9tU2FuaXRpemVyIH1cbl07XG5OYkNoYXRGb3JtQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG1lc3NhZ2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG1lc3NhZ2VQbGFjZWhvbGRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYnV0dG9uVGl0bGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGJ1dHRvbkljb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNob3dCdXR0b246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRyb3BGaWxlczogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZHJvcEZpbGVQbGFjZWhvbGRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VuZDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG9uSW5wdXRDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBmaWxlT3ZlcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZmlsZS1vdmVyJyxdIH1dLFxuICAgIG9uRHJvcDogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2Ryb3AnLCBbJyRldmVudCddLF0gfV0sXG4gICAgb25EcmFnT3ZlcjogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2RyYWdvdmVyJyxdIH1dLFxuICAgIG9uRHJhZ0xlYXZlOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnZHJhZ2xlYXZlJyxdIH1dXG59O1xuXG4vKipcbiAqIGBOYkN1c3RvbU1lc3NhZ2VTZXJ2aWNlYCBpcyB1c2VkIHRvIHN0b3JlIGluc3RhbmNlcyBvZiBgTmJDaGF0Q3VzdG9tTWVzc2FnZURpcmVjdGl2ZWBzIHdoaWNoXG4gKiB3ZXJlIHByb3ZpZGVkIGluIHRoZSBjaGF0IGNvbXBvbmVudC5cbiAqL1xuY2xhc3MgTmJDdXN0b21NZXNzYWdlU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZXMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHR5cGUsIGluc3RhbmNlKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZXMuc2V0KHR5cGUsIGluc3RhbmNlKTtcbiAgICB9XG4gICAgdW5yZWdpc3Rlcih0eXBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1c3RvbU1lc3NhZ2VzLmRlbGV0ZSh0eXBlKTtcbiAgICB9XG4gICAgZ2V0SW5zdGFuY2UodHlwZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21NZXNzYWdlcy5nZXQodHlwZSk7XG4gICAgfVxufVxuTmJDdXN0b21NZXNzYWdlU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKlxuICogTXVsdGlwbGUgbWVzc2FnZSB0eXBlcyBhcmUgYXZhaWxhYmxlIHRocm91Z2ggYSBgdHlwZWAgcHJvcGVydHksIHN1Y2ggYXNcbiAqIC0gdGV4dCAtIHNpbXBsZSB0ZXh0IG1lc3NhZ2VcbiAqIC0gZmlsZSAtIGNvdWxkIGJlIGEgZmlsZSBwcmV2aWV3IG9yIGEgZmlsZSBpY29uXG4gKiBpZiBtdWx0aXBsZSBmaWxlcyBhcmUgcHJvdmlkZWQgZ3JvdXBlZCBmaWxlcyBhcmUgc2hvd25cbiAqIC0gcXVvdGUgLSBxdW90ZXMgYSBtZXNzYWdlIHdpdGggc3BlY2lmaWMgcXVvdGUgc3R5bGVzXG4gKiAtIG1hcCAtIHNob3dzIGEgZ29vZ2xlIG1hcCBwaWN0dXJlIGJ5IHByb3ZpZGVkIFtsYXRpdHVkZV0gYW5kIFtsb25naXR1ZGVdIHByb3BlcnRpZXNcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF2YWlsYWJsZSBUeXBlcywgY2hhdC9jaGF0LW1lc3NhZ2UtdHlwZXMtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIE1lc3NhZ2Ugd2l0aCBhdHRhY2hlZCBmaWxlczpcbiAqIGBgYGh0bWxcbiAqIDxuYi1jaGF0LW1lc3NhZ2VcbiAqICAgdHlwZT1cImZpbGVcIlxuICogICBbZmlsZXNdPVwiWyB7IHVybDogJy4uLicgfSBdXCJcbiAqICAgbWVzc2FnZT1cIkhlbGxvIHdvcmxkIVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiBgYGBcbiAqXG4gKiBNYXAgbWVzc2FnZTpcbiAqIGBgYGh0bWxcbiAqIDxuYi1jaGF0LW1lc3NhZ2VcbiAqICAgdHlwZT1cIm1hcFwiXG4gKiAgIFtsYXRpdHVkZV09XCI1My45MTRcIlxuICogICBbbG9uZ2l0dWRlXT1cIjI3LjU5XCJcbiAqICAgbWVzc2FnZT1cIkhlcmUgSSBhbVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiBgYGBcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogY2hhdC1tZXNzYWdlLWJhY2tncm91bmQ6XG4gKiBjaGF0LW1lc3NhZ2UtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1yZXBseS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLXJlcGx5LXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtYXZhdGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2Utc2VuZGVyLXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtcXVvdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1xdW90ZS10ZXh0LWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLWZpbGUtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1maWxlLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbmNsYXNzIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGRvbVNhbml0aXplciwgY3VzdG9tTWVzc2FnZVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5kb21TYW5pdGl6ZXIgPSBkb21TYW5pdGl6ZXI7XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZVNlcnZpY2UgPSBjdXN0b21NZXNzYWdlU2VydmljZTtcbiAgICAgICAgdGhpcy5idWlsdEluTWVzc2FnZVR5cGVzID0gWyd0ZXh0JywgJ2ZpbGUnLCAnbWFwJywgJ3F1b3RlJ107XG4gICAgICAgIHRoaXMuX3JlcGx5ID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBfYWRkUmVwbHlDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FyZURlZmF1bHRTdHlsZXNFbmFibGVkKCkgJiYgdGhpcy5yZXBseTtcbiAgICB9XG4gICAgZ2V0IF9hZGROb3RSZXBseUNsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYXJlRGVmYXVsdFN0eWxlc0VuYWJsZWQoKSAmJiB0aGlzLm5vdFJlcGx5O1xuICAgIH1cbiAgICBnZXQgX2FkZE5vU3BhY2VDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FyZURlZmF1bHRTdHlsZXNFbmFibGVkKCkgJiYgIXRoaXMubWVzc2FnZTtcbiAgICB9XG4gICAgZ2V0IGZseUluT3V0KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IG5vdFJlcGx5KCkge1xuICAgICAgICByZXR1cm4gIXRoaXMucmVwbHk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBtZXNzYWdlIGlzIGEgcmVwbHlcbiAgICAgKi9cbiAgICBnZXQgcmVwbHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXBseTtcbiAgICB9XG4gICAgc2V0IHJlcGx5KHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3JlcGx5ID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTWVzc2FnZSBzZW5kIGF2YXRhclxuICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICovXG4gICAgc2V0IGF2YXRhcih2YWx1ZSkge1xuICAgICAgICB0aGlzLmF2YXRhclN0eWxlID0gdmFsdWUgPyB0aGlzLmRvbVNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0U3R5bGUoYHVybCgke3ZhbHVlfSlgKSA6IG51bGw7XG4gICAgfVxuICAgIGdldEluaXRpYWxzKCkge1xuICAgICAgICBpZiAodGhpcy5zZW5kZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IG5hbWVzID0gdGhpcy5zZW5kZXIuc3BsaXQoJyAnKTtcbiAgICAgICAgICAgIHJldHVybiBuYW1lcy5tYXAobiA9PiBuLmNoYXJBdCgwKSkuc3BsaWNlKDAsIDIpLmpvaW4oJycpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICBfaXNCdWlsdEluTWVzc2FnZVR5cGUoKSB7XG4gICAgICAgIC8vIFVuc2V0IHR5cGUgZGVmYXVsdHMgdG8gXCJ0ZXh0XCIgdHlwZVxuICAgICAgICByZXR1cm4gdGhpcy50eXBlID09IG51bGwgfHwgdGhpcy5idWlsdEluTWVzc2FnZVR5cGVzLmluY2x1ZGVzKHRoaXMudHlwZSk7XG4gICAgfVxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tTWVzc2FnZSA9IHRoaXMuZ2V0Q3VzdG9tTWVzc2FnZSh0aGlzLnR5cGUpO1xuICAgICAgICByZXR1cm4gY3VzdG9tTWVzc2FnZS50ZW1wbGF0ZVJlZjtcbiAgICB9XG4gICAgX2dldFRlbXBsYXRlQ29udGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHsgJGltcGxpY2l0OiB0aGlzLmN1c3RvbU1lc3NhZ2VEYXRhLCBpc1JlcGx5OiB0aGlzLnJlcGx5IH07XG4gICAgfVxuICAgIF9hcmVEZWZhdWx0U3R5bGVzRW5hYmxlZCgpIHtcbiAgICAgICAgY29uc3QgY3VzdG9tTWVzc2FnZURpcmVjdGl2ZSA9IHRoaXMuZ2V0Q3VzdG9tTWVzc2FnZSh0aGlzLnR5cGUpO1xuICAgICAgICByZXR1cm4gIWN1c3RvbU1lc3NhZ2VEaXJlY3RpdmUubm9TdHlsZXM7XG4gICAgfVxuICAgIGdldEN1c3RvbU1lc3NhZ2UodHlwZSkge1xuICAgICAgICBjb25zdCBjdXN0b21NZXNzYWdlRGlyZWN0aXZlID0gdGhpcy5jdXN0b21NZXNzYWdlU2VydmljZS5nZXRJbnN0YW5jZSh0eXBlKTtcbiAgICAgICAgaWYgKCFjdXN0b21NZXNzYWdlRGlyZWN0aXZlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYG5iLWNoYXQ6IENhbid0IGZpbmQgdGVtcGxhdGUgZm9yIGN1c3RvbSB0eXBlICcke3R5cGV9Jy4gYCArXG4gICAgICAgICAgICAgICAgYE1ha2Ugc3VyZSB5b3UgcHJvdmlkZSBpdCBpbiB0aGUgY2hhdCBjb21wb25lbnQgd2l0aCAqbmJDdXN0b21NZXNzYWdlPScke3R5cGV9Jy5gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY3VzdG9tTWVzc2FnZURpcmVjdGl2ZTtcbiAgICB9XG59XG5OYkNoYXRNZXNzYWdlQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LW1lc3NhZ2UnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5iLWNoYXQtYXZhdGFyICpuZ0lmPVwibm90UmVwbHlcIlxuICAgICAgICAgICAgICAgICAgICBbaW5pdGlhbHNdPVwiZ2V0SW5pdGlhbHMoKVwiXG4gICAgICAgICAgICAgICAgICAgIFthdmF0YXJTdHlsZV09XCJhdmF0YXJTdHlsZVwiPlxuICAgIDwvbmItY2hhdC1hdmF0YXI+XG5cbiAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZVwiPlxuICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwidHlwZVwiICpuZ0lmPVwiX2lzQnVpbHRJbk1lc3NhZ2VUeXBlKCk7IGVsc2UgY3VzdG9tVGVtcGxhdGVcIj5cbiAgICAgICAgPG5iLWNoYXQtbWVzc2FnZS1maWxlICpuZ1N3aXRjaENhc2U9XCInZmlsZSdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlbmRlcl09XCJzZW5kZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RhdGVdPVwiZGF0ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZUZvcm1hdF09XCJkYXRlRm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cIm1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbGVzXT1cImZpbGVzXCI+XG4gICAgICAgIDwvbmItY2hhdC1tZXNzYWdlLWZpbGU+XG5cbiAgICAgICAgPG5iLWNoYXQtbWVzc2FnZS1xdW90ZSAqbmdTd2l0Y2hDYXNlPVwiJ3F1b3RlJ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NlbmRlcl09XCJzZW5kZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlRm9ybWF0XT1cImRhdGVGb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cIm1lc3NhZ2VcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtxdW90ZV09XCJxdW90ZVwiPlxuICAgICAgICA8L25iLWNoYXQtbWVzc2FnZS1xdW90ZT5cblxuICAgICAgICA8bmItY2hhdC1tZXNzYWdlLW1hcCAqbmdTd2l0Y2hDYXNlPVwiJ21hcCdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2VuZGVyXT1cInNlbmRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cImRhdGVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZV09XCJtZXNzYWdlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xhdGl0dWRlXT1cImxhdGl0dWRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2xvbmdpdHVkZV09XCJsb25naXR1ZGVcIj5cbiAgICAgICAgPC9uYi1jaGF0LW1lc3NhZ2UtbWFwPlxuXG4gICAgICAgIDxuYi1jaGF0LW1lc3NhZ2UtdGV4dCAqbmdTd2l0Y2hEZWZhdWx0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc2VuZGVyXT1cInNlbmRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZV09XCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlRm9ybWF0XT1cImRhdGVGb3JtYXRcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21lc3NhZ2VdPVwibWVzc2FnZVwiPlxuICAgICAgICA8L25iLWNoYXQtbWVzc2FnZS10ZXh0PlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9kaXY+XG5cbiAgICA8bmctdGVtcGxhdGUgI2N1c3RvbVRlbXBsYXRlPlxuICAgICAgPG5iLWNoYXQtbWVzc2FnZS10ZXh0IFtzZW5kZXJdPVwic2VuZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZV09XCJkYXRlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGF0ZUZvcm1hdF09XCJkYXRlRm9ybWF0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWVzc2FnZV09XCJtZXNzYWdlXCI+XG4gICAgICA8L25iLWNoYXQtbWVzc2FnZS10ZXh0PlxuICAgICAgPGRpdiBbY2xhc3MubmItY3VzdG9tLW1lc3NhZ2VdPVwiX2FyZURlZmF1bHRTdHlsZXNFbmFibGVkKClcIlxuICAgICAgICAgICBbY2xhc3MubmItY3VzdG9tLW1lc3NhZ2Utbm8tc3BhY2VdPVwiX2FkZE5vU3BhY2VDbGFzc1wiXG4gICAgICAgICAgIFtjbGFzcy5uYi1jdXN0b20tbWVzc2FnZS1yZXBseV09XCJfYWRkUmVwbHlDbGFzc1wiXG4gICAgICAgICAgIFtjbGFzcy5uYi1jdXN0b20tbWVzc2FnZS1ub3QtcmVwbHldPVwiX2FkZE5vdFJlcGx5Q2xhc3NcIlxuICAgICAgICAgICBbY2xhc3MubmItY3VzdG9tLW1lc3NhZ2UtZnVsbC13aWR0aF09XCIhX2FyZURlZmF1bHRTdHlsZXNFbmFibGVkKClcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdUZW1wbGF0ZU91dGxldF09XCJfZ2V0VGVtcGxhdGUoKVwiXG4gICAgICAgICAgICAgICAgICAgICAgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cIl9nZXRUZW1wbGF0ZUNvbnRleHQoKVwiPlxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctdGVtcGxhdGU+XG4gIGAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCdmbHlJbk91dCcsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlKCdpbicsIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgwKScgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbigndm9pZCA9PiAqJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlKHsgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtMTAwJSknIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGUoODApLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZSg4MCwgc3R5bGUoeyB0cmFuc2Zvcm06ICd0cmFuc2xhdGVYKDEwMCUpJyB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNoYXRNZXNzYWdlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRG9tU2FuaXRpemVyIH0sXG4gICAgeyB0eXBlOiBOYkN1c3RvbU1lc3NhZ2VTZXJ2aWNlIH1cbl07XG5OYkNoYXRNZXNzYWdlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGZseUluT3V0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydAZmx5SW5PdXQnLF0gfV0sXG4gICAgbm90UmVwbHk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5vdC1yZXBseScsXSB9XSxcbiAgICByZXBseTogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5yZXBseScsXSB9XSxcbiAgICBtZXNzYWdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZW5kZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGVGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbGVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBxdW90ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbGF0aXR1ZGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxvbmdpdHVkZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYXZhdGFyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0eXBlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjdXN0b21NZXNzYWdlRGF0YTogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ29udmVyc2F0aW9uYWwgVUkgY29sbGVjdGlvbiAtIGEgc2V0IG9mIGNvbXBvbmVudHMgZm9yIGNoYXQtbGlrZSBVSSBjb25zdHJ1Y3Rpb24uXG4gKlxuICogTWFpbiBmZWF0dXJlczpcbiAqIC0gZGlmZmVyZW50IG1lc3NhZ2UgdHlwZXMgc3VwcG9ydCAodGV4dCwgaW1hZ2UsIGZpbGUsIGZpbGUgZ3JvdXAsIG1hcCwgZXRjKVxuICogLSBkcmFnICYgZHJvcCBmb3IgaW1hZ2VzIGFuZCBmaWxlcyB3aXRoIHByZXZpZXdcbiAqIC0gZGlmZmVyZW50IFVJIHN0eWxlc1xuICogLSBjdXN0b20gYWN0aW9uIGJ1dHRvbnMgKGNvbWluZyBzb29uKVxuICpcbiAqIEhlcmUncyBhIGNvbXBsZXRlIGV4YW1wbGUgYnVpbGQgaW4gYSBib3QtbGlrZSBhcHAuIFR5cGUgYGhlbHBgIHRvIGJlIGFibGUgdG8gcmVjZWl2ZSBkaWZmZXJlbnQgbWVzc2FnZSB0eXBlcy5cbiAqIEVuam95IHRoZSBjb252ZXJzYXRpb24gYW5kIHRoZSBiZWF1dGlmdWwgVUkuXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBjaGF0L2NoYXQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEJhc2ljIGNoYXQgY29uZmlndXJhdGlvbiBhbmQgdXNhZ2U6XG4gKiBgYGB0c1xuICogPG5iLWNoYXQgdGl0bGU9XCJOZWJ1bGFyIENvbnZlcnNhdGlvbmFsIFVJXCI+XG4gKiAgICAgICA8bmItY2hhdC1tZXNzYWdlICpuZ0Zvcj1cImxldCBtc2cgb2YgbWVzc2FnZXNcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbdHlwZV09XCJtc2cudHlwZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFttZXNzYWdlXT1cIm1zZy50ZXh0XCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW3JlcGx5XT1cIm1zZy5yZXBseVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtzZW5kZXJdPVwibXNnLnVzZXIubmFtZVwiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtkYXRlXT1cIm1zZy5kYXRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2ZpbGVzXT1cIm1zZy5maWxlc1wiXG4gKiAgICAgICAgICAgICAgICAgICAgICAgIFtxdW90ZV09XCJtc2cucXVvdGVcIlxuICogICAgICAgICAgICAgICAgICAgICAgICBbbGF0aXR1ZGVdPVwibXNnLmxhdGl0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2xvbmdpdHVkZV09XCJtc2cubG9uZ2l0dWRlXCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgW2F2YXRhcl09XCJtc2cudXNlci5hdmF0YXJcIj5cbiAqICAgPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKlxuICogICA8bmItY2hhdC1mb3JtIChzZW5kKT1cInNlbmRNZXNzYWdlKCRldmVudClcIiBbZHJvcEZpbGVzXT1cInRydWVcIj5cbiAqICAgPC9uYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQ2hhdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJDaGF0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogSWYgeW91IG5lZWQgdG8gcHJvdmlkZSBhbiBBUEkga2V5IGZvciBhIGBtYXBgIG1lc3NhZ2UgdHlwZSAod2hpY2ggaXMgcmVxdWlyZWQgYnkgR29vZ2xlIE1hcHMpXG4gKiB5b3UgbWF5IHVzZSBgTmJDaGF0TW9kdWxlLmZvclJvb3QoeyAuLi4gfSlgIGNhbGwgaWYgdGhpcyBpcyBhIGdsb2JhbCBhcHAgY29uZmlndXJhdGlvblxuICogb3IgYE5iQ2hhdE1vZHVsZS5mb3JDaGlsZCh7IC4uLiB9KWAgZm9yIGEgZmVhdHVyZSBtb2R1bGUgY29uZmlndXJhdGlvbjpcbiAqXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iQ2hhdE1vZHVsZS5mb3JSb290KHsgbWVzc2FnZUdvb2dsZU1hcEtleTogJ01BUF9LRVknIH0pLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgbWFpbiBjb21wb25lbnRzOlxuICogYGBgdHNcbiAqIDxuYi1jaGF0PlxuICogPC9uYi1jaGF0PiAvLyBjaGF0IGNvbnRhaW5lclxuICpcbiAqIDxuYi1jaGF0LWZvcm0+XG4gKiA8L25iLWNoYXQtZm9ybT4gLy8gY2hhdCBmb3JtIHdpdGggZHJhZyZkcm9wIGZpbGVzIGZlYXR1cmVcbiAqXG4gKiA8bmItY2hhdC1tZXNzYWdlPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+IC8vIGNoYXQgbWVzc2FnZSwgYXZhaWxhYmxlIG11bHRpcGxlIHR5cGVzXG4gKiBgYGBcbiAqXG4gKiBUd28gdXNlcnMgY29udmVyc2F0aW9uIHNob3djYXNlOlxuICogQHN0YWNrZWQtZXhhbXBsZShDb252ZXJzYXRpb24sIGNoYXQvY2hhdC1jb252ZXJzYXRpb24tc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIENoYXQgVUkgaXMgYWxzbyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IGNvbG9ycyBieSBzcGVjaWZ5aW5nIGEgYFtzdGF0dXNdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgQ2hhdCwgY2hhdC9jaGF0LWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogQWxzbyBpdCBpcyBwb3NzaWJsZSB0byBjb25maWd1cmUgc2l6ZXMgdGhyb3VnaCBgW3NpemVdYCBpbnB1dDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENoYXQgU2l6ZXMsIGNoYXQvY2hhdC1zaXplcy5jb21wb25lbnQpXG4gKlxuICogIyBDdXN0b20gbWVzc2FnZSB0eXBlc1xuICpcbiAqIEJlc2lkZXMgYnVpbHQtaW4gbWVzc2FnZSB0eXBlcywgeW91IGNvdWxkIHByb3ZpZGUgY3VzdG9tIG9uZXMgd2l0aCB0aGVpciBvd24gdGVtcGxhdGUgdG8gcmVuZGVyLlxuICogQXMgYW4gZXhhbXBsZSwgbGV0J3MgYWRkIHRoZSBgbGlua2AgbWVzc2FnZSB0eXBlLlxuICogPGJyPlxuICogRmlyc3QsIHlvdSBuZWVkIHRvIHByb3ZpZGUgYSB0ZW1wbGF0ZSBmb3IgdGhlIGBsaW5rYCBtZXNzYWdlIHR5cGU6XG4gKiBgYGBodG1sXG4gKiA8bmItY2hhdD5cbiAqICAgPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJ1wiIGhyZWY9XCJodHRwczovL2V4YW1wbGUuY29tXCI+ZXhhbXBsZS5jb208L2E+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqIFRoZW4sIGFkZCB0aGUgYG5iLWNoYXQtbWVzc2FnZWAgY29tcG9uZW50IHdpdGggdGhlIGBsaW5rYCB0eXBlOlxuICogYGBgaHRtbFxuICogPG5iLWNoYXQ+XG4gKiAgIDxhICpuYkN1c3RvbU1lc3NhZ2U9XCInbGluaydcIiBocmVmPVwiaHR0cHM6Ly9leGFtcGxlLmNvbVwiPmV4YW1wbGUuY29tPC9hPlxuICogICA8bmItY2hhdC1tZXNzYWdlIHR5cGU9XCJsaW5rXCI+PC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiA8L25iLWNoYXQ+XG4gKiBgYGBcbiAqXG4gKiA8ZGl2IGNsYXNzPVwibm90ZSBub3RlLXdhcm5pbmdcIj5cbiAqICAgPGRpdiBjbGFzcz1cIm5vdGUtdGl0bGVcIj5JbXBvcnRhbnQhPC9kaXY+XG4gKiAgIDxkaXYgY2xhc3M9XCJub3RlLWJvZHlcIj5cbiAqICAgICBDdXN0b20gY2hhdCBtZXNzYWdlcyBtdXN0IGJlIGRlZmluZWQgYmVmb3JlIHRoZSBgbmItY2hhdC1tZXNzYWdlYC5cbiAqICAgPC9kaXY+XG4gKiA8L2Rpdj5cbiAqXG4gKiBDdXN0b20gbWVzc2FnZSB0ZW1wbGF0ZXMgY291bGQgaGF2ZSBhcmJpdHJhcnkgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhlbS4gTGV0J3MgZXh0cmFjdCBoYXJkY29kZWQgbGlua1xuICogaHJlZiBhbmQgdGV4dC4gVG8gcGFzcyBzb21lIGRhdGEgdG8gdGhlIGN1c3RvbSBtZXNzYWdlIHRlbXBsYXRlLCB1c2UgdGhlIGBjdXN0b21NZXNzYWdlRGF0YWAgaW5wdXRcbiAqIG9mIHRoZSBgbmItY2hhdC1tZXNzYWdlYCBjb21wb25lbnQ6XG4gKiBgYGBodG1sXG4gKiAuLi5cbiAqIDxuYi1jaGF0LW1lc3NhZ2UgdHlwZT1cImxpbmtcIiBbY3VzdG9tTWVzc2FnZURhdGFdPVwieyBocmVmOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsIHRleHQ6ICdleGFtcGxlLmNvbScgfVwiPlxuICogPC9uYi1jaGF0LW1lc3NhZ2U+XG4gKiAuLi5cbiAqIGBgYFxuICogV2hlbiBgY3VzdG9tTWVzc2FnZURhdGFgIGlzIHNldCwgdGhpcyBvYmplY3Qgd291bGQgYmVjb21lIGEgdGVtcGxhdGUgY29udGV4dCBhbmQgeW91J2xsIGJlIGFibGVcbiAqIHRvIHJlZmVyZW5jZSBpdCB2aWEgYGxldCB2YXJOYW1lYCBzeW50YXg6XG4gKiBgYGBodG1sXG4gKiA8YSAqbmJDdXN0b21NZXNzYWdlPVwiJ2xpbmsnOyBsZXQgZGF0YVwiIFtocmVmXT1cImRhdGEuaHJlZlwiPnt7IGRhdGEudGV4dCB9fTwvYT5cbiAqIGBgYFxuICpcbiAqIFRoYXQncyBpdCwgZnVsbCBleGFtcGxlIHdpbGwgbG9vayBsaWtlIHRoaXM6XG4gKiBgYGBodG1sXG4gKiA8bmItY2hhdCB0aXRsZT1cIk5lYnVsYXIgQ29udmVyc2F0aW9uYWwgVUlcIj5cbiAqICAgPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJzsgbGV0IGRhdGFcIiBbaHJlZl09XCJkYXRhLmhyZWZcIj57eyBkYXRhLnRleHQgfX08L2E+XG4gKiAgIDxuYi1jaGF0LW1lc3NhZ2UgdHlwZT1cImxpbmtcIiBbY3VzdG9tTWVzc2FnZURhdGFdPVwieyBocmVmOiAnaHR0cHM6Ly9leGFtcGxlLmNvbScsIHRleHQ6ICdleGFtcGxlLmNvbScgfVwiPlxuICogICA8L25iLWNoYXQtbWVzc2FnZT5cbiAqIDwvbmItY2hhdD5cbiAqIGBgYFxuICpcbiAqIElmIHlvdSB3YW50IHRvIHN0eWxlIHlvdXIgY3VzdG9tIHRlbXBsYXRlIGZyb20gdGhlIGdyb3VuZCB1cCB5b3UgY291bGQgdHVybiBvZmYgZ2VuZXJpYyBtZXNzYWdlIHN0eWxpbmdcbiAqIChzdWNoIGFzIHJvdW5kIGJvcmRlcnMsIGNvbG9yLCBiYWNrZ3JvdW5kLCBldGMuKSB2aWEgdGhlIGBub1N0eWxlc2AgaW5wdXQ6XG4gKiBgYGBodG1sXG4gKiAgIDxkaXYgKm5iQ3VzdG9tTWVzc2FnZT1cIidteS1jdXN0b20tdHlwZSc7IG5vU3R5bGVzOiB0cnVlXCI+Li4uPC9kaXY+XG4gKiBgYGBcbiAqIFdoZW4geW91IGRlY2lkZSB0byB1c2UgeW91ciBvd24gc3R5bGVzLCB0aGUgYGlzUmVwbHlgIHByb3BlcnR5IG9mIHRoZSBjdXN0b20gbWVzc2FnZSB0ZW1wbGF0ZSBjb250ZXh0XG4gKiB3b3VsZCBjb21lIGluIGhhbmR5LiBUaGlzIHByb3BlcnR5IGFsbG93cyB5b3UgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIG1lc3NhZ2UgaXMgYSByZXBseSBvciBub3QuXG4gKiBGb3IgZXhhbXBsZSwgdG8gY2hhbmdlIGxpbmsgdGV4dCBjb2xvciAoYXMgcmVwbGllcyBoYXZlIGEgZGlmZmVyZW50IGJhY2tncm91bmQpOlxuICogYGBgaHRtbFxuICogPGEgKm5iQ3VzdG9tTWVzc2FnZT1cIidsaW5rJzsgbGV0IGRhdGE7IGxldCBpc1JlcGx5PWlzUmVwbHlcIlxuICogICAgW2hyZWZdPVwiZGF0YS5ocmVmXCJcbiAqICAgIFtjbGFzcy5saW5rLWNvbnRyb2xdPVwiIWlzUmVwbHlcIj5cbiAqICAge3sgZGF0YS5sYWJlbCB9fVxuICogPC9hPlxuICogYGBgXG4gKlxuICogQmVsb3csIHlvdSBjb3VsZCBmaW5kIGEgbW9yZSBjb21wbGV4IGV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjdXN0b20gbWVzc2FnZSB0eXBlczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQ3VzdG9tIG1lc3NhZ2UsIGNoYXQvY2hhdC1jdXN0b20tbWVzc2FnZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIGNoYXQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtYm9yZGVyOlxuICogY2hhdC1ib3JkZXItcmFkaXVzOlxuICogY2hhdC1zaGFkb3c6XG4gKiBjaGF0LXBhZGRpbmc6XG4gKiBjaGF0LXNjcm9sbGJhci1jb2xvcjpcbiAqIGNoYXQtc2Nyb2xsYmFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXNjcm9sbGJhci13aWR0aDpcbiAqIGNoYXQtdGV4dC1jb2xvcjpcbiAqIGNoYXQtdGV4dC1mb250LWZhbWlseTpcbiAqIGNoYXQtdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LXRleHQtZm9udC13ZWlnaHQ6XG4gKiBjaGF0LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogY2hhdC1oZWFkZXItdGV4dC1mb250LXNpemU6XG4gKiBjaGF0LWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogY2hhdC1oZWFkZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIGNoYXQtdGlueS1oZWlnaHQ6XG4gKiBjaGF0LXNtYWxsLWhlaWdodDpcbiAqIGNoYXQtbWVkaXVtLWhlaWdodDpcbiAqIGNoYXQtbGFyZ2UtaGVpZ2h0OlxuICogY2hhdC1naWFudC1oZWlnaHQ6XG4gKiBjaGF0LWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LWJhc2ljLXRleHQtY29sb3I6XG4gKiBjaGF0LXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogY2hhdC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGNoYXQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1pbmZvLXRleHQtY29sb3I6XG4gKiBjaGF0LXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogY2hhdC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBjaGF0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLWNvbG9yOlxuICogY2hhdC1kaXZpZGVyLXN0eWxlOlxuICogY2hhdC1kaXZpZGVyLXdpZHRoOlxuICogY2hhdC1tZXNzYWdlLWJhY2tncm91bmQ6XG4gKiBjaGF0LW1lc3NhZ2UtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1yZXBseS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLXJlcGx5LXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtYXZhdGFyLWJhY2tncm91bmQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2Utc2VuZGVyLXRleHQtY29sb3I6XG4gKiBjaGF0LW1lc3NhZ2UtcXVvdGUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1xdW90ZS10ZXh0LWNvbG9yOlxuICogY2hhdC1tZXNzYWdlLWZpbGUtdGV4dC1jb2xvcjpcbiAqIGNoYXQtbWVzc2FnZS1maWxlLWJhY2tncm91bmQtY29sb3I6XG4gKi9cbmNsYXNzIE5iQ2hhdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2hhdCBzdGF0dXMgY29sb3IgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICAgICAgICogYGJhc2ljYCAoZGVmYXVsdCksIGBwcmltYXJ5YCwgYHN1Y2Nlc3NgLCBgaW5mb2AsIGB3YXJuaW5nYCwgYGRhbmdlcmAsIGBjb250cm9sYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgdGhpcy5ub01lc3NhZ2VzUGxhY2Vob2xkZXIgPSAnTm8gbWVzc2FnZXMgeWV0Lic7XG4gICAgICAgIHRoaXMuX3Njcm9sbEJvdHRvbSA9IHRydWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNjcm9sbCBjaGF0IHRvIHRoZSBib3R0b20gb2YgdGhlIGxpc3Qgd2hlbiBhIG5ldyBtZXNzYWdlIGFycml2ZXNcbiAgICAgKi9cbiAgICBnZXQgc2Nyb2xsQm90dG9tKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2Nyb2xsQm90dG9tO1xuICAgIH1cbiAgICBzZXQgc2Nyb2xsQm90dG9tKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3Njcm9sbEJvdHRvbSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgaWYgKCdzdGF0dXMnIGluIGNoYW5nZXMpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlRm9ybVN0YXR1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy51cGRhdGVGb3JtU3RhdHVzKCk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlcy5jaGFuZ2VzXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChtZXNzYWdlcykgPT4ge1xuICAgICAgICAgICAgdGhpcy5tZXNzYWdlcyA9IG1lc3NhZ2VzO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVWaWV3KCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpZXcoKTtcbiAgICB9XG4gICAgdXBkYXRlVmlldygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsQm90dG9tKSB7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbExpc3RCb3R0b20oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzY3JvbGxMaXN0Qm90dG9tKCkge1xuICAgICAgICB0aGlzLnNjcm9sbGFibGUubmF0aXZlRWxlbWVudC5zY3JvbGxUb3AgPSB0aGlzLnNjcm9sbGFibGUubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHQ7XG4gICAgfVxuICAgIHVwZGF0ZUZvcm1TdGF0dXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmNoYXRGb3JtKSB7XG4gICAgICAgICAgICB0aGlzLmNoYXRGb3JtLnNldFN0YXR1cyh0aGlzLnN0YXR1cyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHRpbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICB9XG4gICAgZ2V0IHNtYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgIH1cbiAgICBnZXQgbWVkaXVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgZ2V0IGxhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgIH1cbiAgICBnZXQgZ2lhbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgfVxuICAgIGdldCBwcmltYXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnaW5mbyc7XG4gICAgfVxuICAgIGdldCB3YXJuaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICB9XG4gICAgZ2V0IGRhbmdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGJhc2ljKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdiYXNpYyc7XG4gICAgfVxuICAgIGdldCBjb250cm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxufVxuTmJDaGF0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJcIj57eyB0aXRsZSB9fTwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJzY3JvbGxhYmxlXCIgI3Njcm9sbGFibGU+XG4gICAgICA8ZGl2IGNsYXNzPVwibWVzc2FnZXNcIj5cbiAgICAgICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItY2hhdC1tZXNzYWdlXCI+PC9uZy1jb250ZW50PlxuICAgICAgICA8cCBjbGFzcz1cIm5vLW1lc3NhZ2VzXCIgKm5nSWY9XCIhbWVzc2FnZXM/Lmxlbmd0aFwiPnt7IG5vTWVzc2FnZXNQbGFjZWhvbGRlciB9fTwvcD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJmb3JtXCI+XG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1jaGF0LWZvcm1cIj48L25nLWNvbnRlbnQ+XG4gICAgPC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iQ3VzdG9tTWVzc2FnZVNlcnZpY2UsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpjb2x1bW47cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjEwMCV9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2hhdENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJDaGF0Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRpdGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGF0dXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG5vTWVzc2FnZXNQbGFjZWhvbGRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2Nyb2xsQm90dG9tOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzY3JvbGxhYmxlOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsnc2Nyb2xsYWJsZScsXSB9XSxcbiAgICBtZXNzYWdlczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJDaGF0TWVzc2FnZUNvbXBvbmVudCxdIH1dLFxuICAgIGNoYXRGb3JtOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtOYkNoYXRGb3JtQ29tcG9uZW50LF0gfV0sXG4gICAgdGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNtYWxsOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXNtYWxsJyxdIH1dLFxuICAgIG1lZGl1bTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1tZWRpdW0nLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgZ2lhbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtZ2lhbnQnLF0gfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkNoYXRPcHRpb25zIHtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDaGF0IG1lc3NhZ2UgY29tcG9uZW50LlxuICovXG5jbGFzcyBOYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIHNlbmQgZGF0ZSBmb3JtYXQsIGRlZmF1bHQgJ3Nob3J0VGltZSdcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdzaG9ydFRpbWUnO1xuICAgICAgICB0aGlzLm1hcEtleSA9IG9wdGlvbnMubWVzc2FnZUdvb2dsZU1hcEtleTtcbiAgICB9XG4gICAgZ2V0IGZpbGUoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAvLyB0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6bWF4LWxpbmUtbGVuZ3RoXG4gICAgICAgICAgICB1cmw6IGBodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvc3RhdGljbWFwP2NlbnRlcj0ke3RoaXMubGF0aXR1ZGV9LCR7dGhpcy5sb25naXR1ZGV9Jnpvb209MTImc2l6ZT00MDB4NDAwJmtleT0ke3RoaXMubWFwS2V5fWAsXG4gICAgICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICAgIGljb246ICdsb2NhdGlvbicsXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2hhdC1tZXNzYWdlLW1hcCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmItY2hhdC1tZXNzYWdlLWZpbGUgW2ZpbGVzXT1cIltmaWxlXVwiIFttZXNzYWdlXT1cIm1lc3NhZ2VcIiBbc2VuZGVyXT1cInNlbmRlclwiIFtkYXRlXT1cImRhdGVcIlxuICAgICBbZGF0ZUZvcm1hdF09XCJkYXRlRm9ybWF0XCI+PC9uYi1jaGF0LW1lc3NhZ2UtZmlsZT5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNoYXRNZXNzYWdlTWFwQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJDaGF0T3B0aW9ucyB9XG5dO1xuTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBtZXNzYWdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZW5kZXI6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRhdGVGb3JtYXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxhdGl0dWRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsb25naXR1ZGU6IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKi9cbmNsYXNzIE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZCwgZG9tU2FuaXRpemVyKSB7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kb21TYW5pdGl6ZXIgPSBkb21TYW5pdGl6ZXI7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNZXNzYWdlIHNlbmQgZGF0ZSBmb3JtYXQsIGRlZmF1bHQgJ3Nob3J0VGltZSdcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0ZUZvcm1hdCA9ICdzaG9ydFRpbWUnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlIGZpbGUgcGF0aFxuICAgICAqIEB0eXBlIHtEYXRlfVxuICAgICAqL1xuICAgIHNldCBmaWxlcyhmaWxlcykge1xuICAgICAgICB0aGlzLnJlYWR5RmlsZXMgPSAoZmlsZXMgfHwgW10pLm1hcCgoZmlsZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNJbWFnZSA9IHRoaXMuaXNJbWFnZShmaWxlKTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGZpbGUpLCB7IHVybFN0eWxlOiBpc0ltYWdlICYmIHRoaXMuZG9tU2FuaXRpemVyLmJ5cGFzc1NlY3VyaXR5VHJ1c3RTdHlsZShgdXJsKCR7ZmlsZS51cmx9KWApLCBpc0ltYWdlOiBpc0ltYWdlIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgfVxuICAgIGlzSW1hZ2UoZmlsZSkge1xuICAgICAgICBjb25zdCB0eXBlID0gZmlsZS50eXBlO1xuICAgICAgICBpZiAodHlwZSkge1xuICAgICAgICAgICAgcmV0dXJuIFsnaW1hZ2UvcG5nJywgJ2ltYWdlL2pwZWcnLCAnaW1hZ2UvZ2lmJ10uaW5jbHVkZXModHlwZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbk5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LW1lc3NhZ2UtZmlsZScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmItY2hhdC1tZXNzYWdlLXRleHQgW3NlbmRlcl09XCJzZW5kZXJcIiBbZGF0ZV09XCJkYXRlXCIgW2RhdGVGb3JtYXRdPVwiZGF0ZUZvcm1hdFwiIFttZXNzYWdlXT1cIm1lc3NhZ2VcIj5cbiAgICAgIHt7IG1lc3NhZ2UgfX1cbiAgICA8L25iLWNoYXQtbWVzc2FnZS10ZXh0PlxuXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJlYWR5RmlsZXM/Lmxlbmd0aCA+IDFcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJtZXNzYWdlLWNvbnRlbnQtZ3JvdXBcIj5cbiAgICAgICAgPGEgKm5nRm9yPVwibGV0IGZpbGUgb2YgcmVhZHlGaWxlc1wiIFtocmVmXT1cImZpbGUudXJsXCIgdGFyZ2V0PVwiX2JsYW5rXCI+XG4gICAgICAgICAgPG5iLWljb24gW2ljb25dPVwiZmlsZS5pY29uXCIgKm5nSWY9XCIhZmlsZS51cmxTdHlsZSAmJiBmaWxlLmljb25cIj48L25iLWljb24+XG4gICAgICAgICAgPGRpdiAqbmdJZj1cImZpbGUudXJsU3R5bGVcIiBbc3R5bGUuYmFja2dyb3VuZC1pbWFnZV09XCJmaWxlLnVybFN0eWxlXCI+PC9kaXY+XG4gICAgICAgIDwvYT5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInJlYWR5RmlsZXM/Lmxlbmd0aCA9PT0gMVwiPlxuICAgICAgPGEgW2hyZWZdPVwicmVhZHlGaWxlc1swXS51cmxcIiB0YXJnZXQ9XCJfYmxhbmtcIj5cbiAgICAgICAgPG5iLWljb24gW2ljb25dPVwicmVhZHlGaWxlc1swXS5pY29uXCIgKm5nSWY9XCIhcmVhZHlGaWxlc1swXS51cmxTdHlsZSAmJiByZWFkeUZpbGVzWzBdLmljb25cIj48L25iLWljb24+XG4gICAgICAgIDxkaXYgKm5nSWY9XCJyZWFkeUZpbGVzWzBdLnVybFN0eWxlXCIgW3N0eWxlLmJhY2tncm91bmQtaW1hZ2VdPVwicmVhZHlGaWxlc1swXS51cmxTdHlsZVwiPjwvZGl2PlxuICAgICAgPC9hPlxuICAgIDwvbmctY29udGFpbmVyPlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfSxcbiAgICB7IHR5cGU6IERvbVNhbml0aXplciB9XG5dO1xuTmJDaGF0TWVzc2FnZUZpbGVDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbWVzc2FnZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VuZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlRm9ybWF0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWxlczogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ2hhdCBtZXNzYWdlIGNvbXBvbmVudC5cbiAqL1xuY2xhc3MgTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAgKiBNZXNzYWdlIHNlbmQgZGF0ZSBmb3JtYXQsIGRlZmF1bHQgJ3Nob3J0VGltZSdcbiAgICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gJ3Nob3J0VGltZSc7XG4gICAgfVxufVxuTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jaGF0LW1lc3NhZ2UtcXVvdGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPHAgY2xhc3M9XCJzZW5kZXJcIiAqbmdJZj1cInNlbmRlciB8fCBkYXRlXCI+e3sgc2VuZGVyIH19IDx0aW1lPnt7IGRhdGUgfCBkYXRlOiBkYXRlRm9ybWF0IH19PC90aW1lPjwvcD5cbiAgICA8cCBjbGFzcz1cInF1b3RlXCI+XG4gICAgICB7eyBxdW90ZSB9fVxuICAgIDwvcD5cbiAgICA8bmItY2hhdC1tZXNzYWdlLXRleHQgW21lc3NhZ2VdPVwibWVzc2FnZVwiPlxuICAgICAge3sgbWVzc2FnZSB9fVxuICAgIDwvbmItY2hhdC1tZXNzYWdlLXRleHQ+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDaGF0TWVzc2FnZVF1b3RlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG1lc3NhZ2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbmRlcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGF0ZUZvcm1hdDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcXVvdGU6IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIENoYXQgbWVzc2FnZSBjb21wb25lbnQuXG4gKi9cbmNsYXNzIE5iQ2hhdE1lc3NhZ2VUZXh0Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE1lc3NhZ2Ugc2VuZCBkYXRlIGZvcm1hdCwgZGVmYXVsdCAnc2hvcnRUaW1lJ1xuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRlRm9ybWF0ID0gJ3Nob3J0VGltZSc7XG4gICAgfVxufVxuTmJDaGF0TWVzc2FnZVRleHRDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWNoYXQtbWVzc2FnZS10ZXh0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxwIGNsYXNzPVwic2VuZGVyXCIgKm5nSWY9XCJzZW5kZXIgfHwgZGF0ZVwiPnt7IHNlbmRlciB9fSA8dGltZT57eyBkYXRlICB8IGRhdGU6IGRhdGVGb3JtYXQgfX08L3RpbWU+PC9wPlxuICAgIDxwIGNsYXNzPVwidGV4dFwiICpuZ0lmPVwibWVzc2FnZVwiPnt7IG1lc3NhZ2UgfX08L3A+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2hcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDaGF0TWVzc2FnZVRleHRDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2VuZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBtZXNzYWdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkYXRlRm9ybWF0OiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLypcbiAqIENsYXNzIHVzZWQgYXMgaW5qZWN0aW9uIHRva2VuIHRvIHByb3ZpZGUgZm9ybSBlbGVtZW50LlxuICoqL1xuY2xhc3MgTmJGb3JtRmllbGRDb250cm9sIHtcbn1cbk5iRm9ybUZpZWxkQ29udHJvbC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuLypcbiAqIE9wdGlvbmFsIGNvbmZpZyB0byBiZSBwcm92aWRlZCBvbiBOYkZvcm1GaWVsZENvbnRyb2wgdG8gYWx0ZXIgZGVmYXVsdCBzZXR0aW5ncy5cbiAqKi9cbmNsYXNzIE5iRm9ybUZpZWxkQ29udHJvbENvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3VwcG9ydHNQcmVmaXggPSB0cnVlO1xuICAgICAgICB0aGlzLnN1cHBvcnRzU3VmZml4ID0gdHJ1ZTtcbiAgICB9XG59XG5OYkZvcm1GaWVsZENvbnRyb2xDb25maWcuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBCYXNpYyBpbnB1dCBkaXJlY3RpdmUuXG4gKlxuICogYGBgaHRtbFxuICogPGlucHV0IG5iSW5wdXQ+PC9pbnB1dD5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iSW5wdXRNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iSW5wdXRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIERlZmF1bHQgaW5wdXQgc2l6ZSBpcyBgbWVkaXVtYDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGlucHV0L2lucHV0LXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBJbnB1dHMgYXJlIGF2YWlsYWJsZSBpbiBtdWx0aXBsZSBjb2xvcnMgdXNpbmcgYHN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKElucHV0IENvbG9ycywgaW5wdXQvaW5wdXQtY29sb3JzLmNvbXBvbmVudClcbiAqXG4gKiBUaGVyZSBhcmUgdGhyZWUgaW5wdXQgc2l6ZXM6XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShJbnB1dCBTaXplcywgaW5wdXQvaW5wdXQtc2l6ZXMuY29tcG9uZW50KVxuICpcbiAqIElucHV0cyBhdmFpbGFibGUgaW4gZGlmZmVyZW50IHNoYXBlcywgd2hpY2ggY291bGQgYmUgY29tYmluZWQgd2l0aCB0aGUgb3RoZXIgcHJvcGVydGllczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5wdXQgU2hhcGVzLCBpbnB1dC9pbnB1dC1zaGFwZXMuY29tcG9uZW50KVxuICpcbiAqIGBuYklucHV0YCBjb3VsZCBiZSBhcHBsaWVkIHRvIHRoZSBmb2xsb3dpbmcgc2VsZWN0b3JzIC0gYGlucHV0YCwgYHRleHRhcmVhYDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5wdXQgRWxlbWVudHMsIGlucHV0L2lucHV0LXR5cGVzLmNvbXBvbmVudClcbiAqXG4gKiBZb3UgY2FuIGFkZCBgZnVsbFdpZHRoYCBhdHRyaWJ1dGUgdG8gbWFrZSBlbGVtZW50IGZpbGwgY29udGFpbmVyOlxuICogQHN0YWNrZWQtZXhhbXBsZShGdWxsIHdpZHRoIGlucHV0cywgaW5wdXQvaW5wdXQtZnVsbC13aWR0aC5jb21wb25lbnQpXG4gKlxuICogT3IgeW91IGNhbiBiaW5kIGNvbnRyb2wgd2l0aCBmb3JtIGNvbnRyb2xzIG9yIG5nTW9kZWw6XG4gKiBAc3RhY2tlZC1leGFtcGxlKElucHV0IGZvcm0gYmluZGluZywgaW5wdXQvaW5wdXQtZm9ybS5jb21wb25lbnQpXG4gKlxuICogVXNlIGA8bmItZm9ybS1maWVsZD5gIHRvIGFkZCBjdXN0b20gY29udGVudCB0byB0aGUgaW5wdXQgZmllbGQuXG4gKiBGaXJzdCBpbXBvcnQgYE5iRm9ybUZpZWxkTW9kdWxlYC4gVGhlbiBwdXQgdGhlIGlucHV0IGZpZWxkIGFuZCBjdXN0b20gY29udGVudCBpbnRvXG4gKiBgPG5iLWZvcm0tZmllbGQ+YCBhbmQgYWRkIGBuYlByZWZpeGAgb3IgYG5iU3VmZml4YCBkaXJlY3RpdmUgdG8gdGhlIGN1c3RvbSBjb250ZW50LlxuICogYG5iUHJlZml4YCBwdXRzIGNvbnRlbnQgYmVmb3JlIGlucHV0IGFuZCBgbmJTdWZmaXhgIGFmdGVyLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5wdXQgd2l0aCBpY29uLCBmb3JtLWZpZWxkL2Zvcm0tZmllbGQtaW5wdXQuY29tcG9uZW50KVxuICogQHN0YWNrZWQtZXhhbXBsZShJbnB1dCB3aXRoIGJ1dHRvbiwgZm9ybS1maWVsZC9mb3JtLWZpZWxkLXBhc3N3b3JkLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogaW5wdXQtYm9yZGVyLXN0eWxlOlxuICogaW5wdXQtYm9yZGVyLXdpZHRoOlxuICogaW5wdXQtb3V0bGluZS1jb2xvcjpcbiAqIGlucHV0LW91dGxpbmUtd2lkdGg6XG4gKiBpbnB1dC1wbGFjZWhvbGRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogaW5wdXQtdGV4dC1mb250LWZhbWlseTpcbiAqIGlucHV0LWJhc2ljLXRleHQtY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC1iYXNpYy1kaXNhYmxlZC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtcHJpbWFyeS1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC1wcmltYXJ5LWRpc2FibGVkLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtc3VjY2Vzcy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGlucHV0LXN1Y2Nlc3MtZGlzYWJsZWQtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWluZm8tdGV4dC1jb2xvcjpcbiAqIGlucHV0LWluZm8tcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWluZm8tYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtaW5mby1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1pbmZvLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogaW5wdXQtaW5mby1kaXNhYmxlZC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtd2FybmluZy10ZXh0LWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtd2FybmluZy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC13YXJuaW5nLWRpc2FibGVkLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWRhbmdlci1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtZGFuZ2VyLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBpbnB1dC1kYW5nZXItZGlzYWJsZWQtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBpbnB1dC1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIGlucHV0LWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogaW5wdXQtY29udHJvbC1kaXNhYmxlZC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogaW5wdXQtcmVjdGFuZ2xlLWJvcmRlci1yYWRpdXM6XG4gKiBpbnB1dC1zZW1pLXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiBpbnB1dC1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogaW5wdXQtdGlueS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LXRpbnktdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LXRpbnktdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LXRpbnktcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC10aW55LXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBpbnB1dC10aW55LXBsYWNlaG9sZGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC10aW55LXBhZGRpbmc6XG4gKiBpbnB1dC10aW55LW1heC13aWR0aDpcbiAqIGlucHV0LXNtYWxsLXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtc21hbGwtdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LXNtYWxsLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1zbWFsbC1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LXNtYWxsLXBsYWNlaG9sZGVyLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBpbnB1dC1zbWFsbC1wbGFjZWhvbGRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaW5wdXQtc21hbGwtcGFkZGluZzpcbiAqIGlucHV0LXNtYWxsLW1heC13aWR0aDpcbiAqIGlucHV0LW1lZGl1bS10ZXh0LWZvbnQtc2l6ZTpcbiAqIGlucHV0LW1lZGl1bS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtbWVkaXVtLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1tZWRpdW0tcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1tZWRpdW0tcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LW1lZGl1bS1wbGFjZWhvbGRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogaW5wdXQtbWVkaXVtLXBhZGRpbmc6XG4gKiBpbnB1dC1tZWRpdW0tbWF4LXdpZHRoOlxuICogaW5wdXQtbGFyZ2UtdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1sYXJnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtbGFyZ2UtdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LWxhcmdlLXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtbGFyZ2UtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LWxhcmdlLXBsYWNlaG9sZGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1sYXJnZS1wYWRkaW5nOlxuICogaW5wdXQtbGFyZ2UtbWF4LXdpZHRoOlxuICogaW5wdXQtZ2lhbnQtdGV4dC1mb250LXNpemU6XG4gKiBpbnB1dC1naWFudC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogaW5wdXQtZ2lhbnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIGlucHV0LWdpYW50LXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogaW5wdXQtZ2lhbnQtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIGlucHV0LWdpYW50LXBsYWNlaG9sZGVyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBpbnB1dC1naWFudC1wYWRkaW5nOlxuICogaW5wdXQtZ2lhbnQtbWF4LXdpZHRoOlxuICovXG5jbGFzcyBOYklucHV0RGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50UmVmLCBmb2N1c01vbml0b3IsIHJlbmRlcmVyLCB6b25lLCBzdGF0dXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XG4gICAgICAgIHRoaXMuZm9jdXNNb25pdG9yID0gZm9jdXNNb25pdG9yO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMuc3RhdHVzU2VydmljZSA9IHN0YXR1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmllbGQgc2l6ZSBtb2RpZmljYXRpb25zLiBQb3NzaWJsZSB2YWx1ZXM6IGBzbWFsbGAsIGBtZWRpdW1gIChkZWZhdWx0KSwgYGxhcmdlYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZmllbGRTaXplID0gJ21lZGl1bSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaWVsZCBzdGF0dXMgKGFkZHMgc3BlY2lmaWMgc3R5bGVzKTpcbiAgICAgICAgICogYGJhc2ljYCwgYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGaWVsZCBzaGFwZXMgbW9kaWZpY2F0aW9ucy4gUG9zc2libGUgdmFsdWVzOiBgcmVjdGFuZ2xlYCAoZGVmYXVsdCksIGByb3VuZGAsIGBzZW1pLXJvdW5kYC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hhcGUgPSAncmVjdGFuZ2xlJztcbiAgICAgICAgdGhpcy5fZnVsbFdpZHRoID0gZmFsc2U7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLnN0YXR1cyQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuc3RhdHVzKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuc2l6ZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuZmllbGRTaXplKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuZm9jdXNlZCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdChmYWxzZSk7XG4gICAgICAgIC8qXG4gICAgICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLmZ1bGxXaWR0aCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KHRoaXMuZnVsbFdpZHRoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgc2V0IGVsZW1lbnQgd2lsbCBmaWxsIGNvbnRhaW5lci4gYGZhbHNlYCBieSBkZWZhdWx0LlxuICAgICAqL1xuICAgIGdldCBmdWxsV2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mdWxsV2lkdGg7XG4gICAgfVxuICAgIHNldCBmdWxsV2lkdGgodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZnVsbFdpZHRoID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIG5nRG9DaGVjaygpIHtcbiAgICAgICAgY29uc3QgaXNEaXNhYmxlZCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmRpc2FibGVkO1xuICAgICAgICBpZiAoaXNEaXNhYmxlZCAhPT0gdGhpcy5kaXNhYmxlZCQudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuZGlzYWJsZWQkLm5leHQoaXNEaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoeyBzdGF0dXMsIGZpZWxkU2l6ZSwgZnVsbFdpZHRoIH0pIHtcbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMkLm5leHQodGhpcy5zdGF0dXMpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZFNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSQubmV4dCh0aGlzLmZpZWxkU2l6ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZ1bGxXaWR0aCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsV2lkdGgkLm5leHQodGhpcy5mdWxsV2lkdGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmZvY3VzTW9uaXRvci5tb25pdG9yKHRoaXMuZWxlbWVudFJlZilcbiAgICAgICAgICAgIC5waXBlKG1hcChvcmlnaW4gPT4gISFvcmlnaW4pLCBmaW5hbGl6ZSgoKSA9PiB0aGlzLmZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyh0aGlzLmVsZW1lbnRSZWYpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZvY3VzZWQkKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnbmItdHJhbnNpdGlvbicpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB9XG4gICAgZ2V0IHRpbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkU2l6ZSA9PT0gJ3RpbnknO1xuICAgIH1cbiAgICBnZXQgc21hbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpZWxkU2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRTaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgZ2V0IGxhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWVsZFNpemUgPT09ICdsYXJnZSc7XG4gICAgfVxuICAgIGdldCBnaWFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRTaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgfVxuICAgIGdldCBkYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgfVxuICAgIGdldCByZWN0YW5nbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncmVjdGFuZ2xlJztcbiAgICB9XG4gICAgZ2V0IHNlbWlSb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdzZW1pLXJvdW5kJztcbiAgICB9XG4gICAgZ2V0IHJvdW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3JvdW5kJztcbiAgICB9XG59XG5OYklucHV0RGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdpbnB1dFtuYklucHV0XSx0ZXh0YXJlYVtuYklucHV0XScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJGb3JtRmllbGRDb250cm9sLCB1c2VFeGlzdGluZzogTmJJbnB1dERpcmVjdGl2ZSB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iSW5wdXREaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBOYkZvY3VzTW9uaXRvciB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJJbnB1dERpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBmaWVsZFNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hhcGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZ1bGxXaWR0aDogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5pbnB1dC1mdWxsLXdpZHRoJyxdIH1dLFxuICAgIGFkZGl0aW9uYWxDbGFzc2VzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcycsXSB9XSxcbiAgICB0aW55OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXRpbnknLF0gfV0sXG4gICAgc21hbGw6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtc21hbGwnLF0gfV0sXG4gICAgbWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBsYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBnaWFudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1naWFudCcsXSB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBpbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICByZWN0YW5nbGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNoYXBlLXJlY3RhbmdsZScsXSB9XSxcbiAgICBzZW1pUm91bmQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNoYXBlLXNlbWktcm91bmQnLF0gfV0sXG4gICAgcm91bmQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNoYXBlLXJvdW5kJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9JTlBVVF9DT01QT05FTlRTID0gW1xuICAgIE5iSW5wdXREaXJlY3RpdmUsXG5dO1xuY2xhc3MgTmJJbnB1dE1vZHVsZSB7XG59XG5OYklucHV0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbTmJTaGFyZWRNb2R1bGVdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogTkJfSU5QVVRfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBOQl9JTlBVVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbmNsYXNzIE5iQ2hhdEF2YXRhckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYXZhdGFyQ2xhc3MgPSB0cnVlO1xuICAgIH1cbn1cbk5iQ2hhdEF2YXRhckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItY2hhdC1hdmF0YXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFhdmF0YXJTdHlsZVwiPlxuICAgICAge3sgaW5pdGlhbHMgfX1cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkNoYXRBdmF0YXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgaW5pdGlhbHM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGF2YXRhclN0eWxlOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ3N0eWxlLmJhY2tncm91bmQtaW1hZ2UnLF0gfV0sXG4gICAgYXZhdGFyQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmF2YXRhcicsXSB9XVxufTtcblxuZnVuY3Rpb24gdGhyb3dDdXN0b21NZXNzYWdlVHlwZUlzUmVxdWlyZWQoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdbbmJDdXN0b21NZXNzYWdlXTogY3VzdG9tIG1lc3NhZ2UgdHlwZSBpcyByZXF1aXJlZC4nKTtcbn1cbi8qKlxuICogYFtuYkN1c3RvbU1lc3NhZ2VdYCBkaXJlY3RpdmUgc2hvdWxkIGJlIHVzZWQgYXMgYSBzdHJ1Y3R1cmFsIGRpcmVjdGl2ZSBvciBzaG91bGQgYmUgYXBwbGllZCB0byB0aGUgYG5nLXRlbXBsYXRlYDpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZGl2ICpuYkN1c3RvbU1lc3NhZ2U9XCInbXktY3VzdG9tLXR5cGUnOyBsZXQgZGF0YVwiPlxuICogICA8IS0tIGN1c3RvbSBtZXNzYWdlIC0tPlxuICogPC9kaXY+XG4gKiBgYGBcbiAqIG9yXG4gKiBgYGBodG1sXG4gKiA8bmctdGVtcGxhdGUgbmJDdXN0b21NZXNzYWdlPSdteS1jdXN0b20tdHlwZScgbGV0LWRhdGE+XG4gKiAgIDwhLS0gY3VzdG9tIG1lc3NhZ2UgLS0+XG4gKiA8L25nLXRlbXBsYXRlPlxuICogYGBgXG4gKi9cbmNsYXNzIE5iQ2hhdEN1c3RvbU1lc3NhZ2VEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlUmVmLCBjdXN0b21NZXNzYWdlU2VydmljZSkge1xuICAgICAgICB0aGlzLnRlbXBsYXRlUmVmID0gdGVtcGxhdGVSZWY7XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZVNlcnZpY2UgPSBjdXN0b21NZXNzYWdlU2VydmljZTtcbiAgICAgICAgdGhpcy5fbm9TdHlsZXMgPSBmYWxzZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVmaW5lcyBhIG1lc3NhZ2UgdHlwZSB3aGljaCBzaG91bGQgcmVuZGVyZWQgd2l0aCB0aGUgY3VzdG9tIG1lc3NhZ2UgdGVtcGxhdGUuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXQgbmJDdXN0b21NZXNzYWdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgICB9XG4gICAgc2V0IG5iQ3VzdG9tTWVzc2FnZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90eXBlID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgZ2VuZXJpYyBtZXNzYWdlIHN0eWxlcywgc3VjaCBhcyByb3VuZCBjb3JuZXJzLCB0ZXh0IGNvbG9yLCBiYWNrZ3JvdW5kLCBldGMuLFxuICAgICAqIHNvIGEgY3VzdG9tIG1lc3NhZ2UgY291bGQgYmUgc3R5bGVkIGZyb20gdGhlIGdyb3VuZCB1cC5cbiAgICAgKlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIHNldCBuYkN1c3RvbU1lc3NhZ2VOb1N0eWxlcyh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9ub1N0eWxlcyA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBuYkN1c3RvbU1lc3NhZ2VOb1N0eWxlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25vU3R5bGVzO1xuICAgIH1cbiAgICBnZXQgbm9TdHlsZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm5iQ3VzdG9tTWVzc2FnZU5vU3R5bGVzO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLl90eXBlKSB7XG4gICAgICAgICAgICB0aHJvd0N1c3RvbU1lc3NhZ2VUeXBlSXNSZXF1aXJlZCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZVNlcnZpY2UucmVnaXN0ZXIodGhpcy50eXBlLCB0aGlzKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuY3VzdG9tTWVzc2FnZVNlcnZpY2UudW5yZWdpc3Rlcih0aGlzLnR5cGUpO1xuICAgIH1cbn1cbk5iQ2hhdEN1c3RvbU1lc3NhZ2VEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogYFtuYkN1c3RvbU1lc3NhZ2VdYCxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJDaGF0Q3VzdG9tTWVzc2FnZURpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IFRlbXBsYXRlUmVmIH0sXG4gICAgeyB0eXBlOiBOYkN1c3RvbU1lc3NhZ2VTZXJ2aWNlIH1cbl07XG5OYkNoYXRDdXN0b21NZXNzYWdlRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG5iQ3VzdG9tTWVzc2FnZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbmJDdXN0b21NZXNzYWdlTm9TdHlsZXM6IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9DSEFUX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJDaGF0Q29tcG9uZW50LFxuICAgIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQsXG4gICAgTmJDaGF0Rm9ybUNvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlVGV4dENvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlRmlsZUNvbXBvbmVudCxcbiAgICBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQsXG4gICAgTmJDaGF0TWVzc2FnZU1hcENvbXBvbmVudCxcbiAgICBOYkNoYXRBdmF0YXJDb21wb25lbnQsXG5dO1xuY29uc3QgTkJfQ0hBVF9ESVJFQ1RJVkVTID0gW1xuICAgIE5iQ2hhdEN1c3RvbU1lc3NhZ2VEaXJlY3RpdmUsXG5dO1xuY2xhc3MgTmJDaGF0TW9kdWxlIHtcbiAgICBzdGF0aWMgZm9yUm9vdChvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJDaGF0TW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYkNoYXRPcHRpb25zLCB1c2VWYWx1ZTogb3B0aW9ucyB8fCB7fSB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZvckNoaWxkKG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYkNoYXRNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iQ2hhdE9wdGlvbnMsIHVzZVZhbHVlOiBvcHRpb25zIHx8IHt9IH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbk5iQ2hhdE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJJY29uTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYklucHV0TW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkJ1dHRvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9DSEFUX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgICAgIC4uLk5CX0NIQVRfRElSRUNUSVZFUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfQ0hBVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgICAgICAuLi5OQl9DSEFUX0RJUkVDVElWRVMsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFN0eWxlZCBzcGlubmVyIGNvbXBvbmVudFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBzcGlubmVyLXRleHQtY29sb3I6XG4gKiBzcGlubmVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBzcGlubmVyLXRleHQtZm9udC1zaXplOlxuICogc3Bpbm5lci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc3Bpbm5lci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogc3Bpbm5lci1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3Bpbm5lci1iYXNpYy1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci1iYXNpYy1jaXJjbGUtZW1wdHktY29sb3I6XG4gKiBzcGlubmVyLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNwaW5uZXItcHJpbWFyeS1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci1wcmltYXJ5LWNpcmNsZS1lbXB0eS1jb2xvcjpcbiAqIHNwaW5uZXItaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc3Bpbm5lci1pbmZvLWNpcmNsZS1maWxsZWQtY29sb3I6XG4gKiBzcGlubmVyLWluZm8tY2lyY2xlLWVtcHR5LWNvbG9yOlxuICogc3Bpbm5lci1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzcGlubmVyLXN1Y2Nlc3MtY2lyY2xlLWZpbGxlZC1jb2xvcjpcbiAqIHNwaW5uZXItc3VjY2Vzcy1jaXJjbGUtZW1wdHktY29sb3I6XG4gKiBzcGlubmVyLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNwaW5uZXItd2FybmluZy1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci13YXJuaW5nLWNpcmNsZS1lbXB0eS1jb2xvcjpcbiAqIHNwaW5uZXItZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzcGlubmVyLWRhbmdlci1jaXJjbGUtZmlsbGVkLWNvbG9yOlxuICogc3Bpbm5lci1kYW5nZXItY2lyY2xlLWVtcHR5LWNvbG9yOlxuICogc3Bpbm5lci1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiBzcGlubmVyLWNvbnRyb2wtY2lyY2xlLWZpbGxlZC1jb2xvcjpcbiAqIHNwaW5uZXItY29udHJvbC1jaXJjbGUtZW1wdHktY29sb3I6XG4gKiBzcGlubmVyLWhlaWdodC10aW55OlxuICogc3Bpbm5lci1oZWlnaHQtc21hbGw6XG4gKiBzcGlubmVyLWhlaWdodC1tZWRpdW06XG4gKiBzcGlubmVyLWhlaWdodC1sYXJnZTpcbiAqIHNwaW5uZXItaGVpZ2h0LWdpYW50OlxuICovXG5jbGFzcyBOYlNwaW5uZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExvYWRpbmcgdGV4dCB0aGF0IGlzIHNob3duIG5lYXIgdGhlIGljb25cbiAgICAgICAgICogQHR5cGUgc3RyaW5nXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm1lc3NhZ2UgPSAnTG9hZGluZy4uLic7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGlubmVyIHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogdGlueSwgc21hbGwsIG1lZGl1bSwgbGFyZ2UsIGdpYW50XG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTcGlubmVyIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgfVxuICAgIGdldCB0aW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzbWFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IGdpYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgfVxuICAgIGdldCBkYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgfVxuICAgIGdldCBhZGRpdGlvbmFsQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzU2VydmljZS5pc0N1c3RvbVN0YXR1cyh0aGlzLnN0YXR1cykpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5zdGF0dXNTZXJ2aWNlLmdldFN0YXR1c0NsYXNzKHRoaXMuc3RhdHVzKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn1cbk5iU3Bpbm5lckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc3Bpbm5lcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8c3BhbiBjbGFzcz1cInNwaW4tY2lyY2xlXCI+PC9zcGFuPlxuICAgIDxzcGFuIGNsYXNzPVwibWVzc2FnZVwiICpuZ0lmPVwibWVzc2FnZVwiPnt7IG1lc3NhZ2UgfX08L3NwYW4+XG4gIGAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtvcGFjaXR5OjE7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXJhZGl1czppbmhlcml0O3RvcDowO3JpZ2h0OjA7bGVmdDowO2JvdHRvbTowO292ZXJmbG93OmhpZGRlbjt6LWluZGV4Ojk5OTk7ZGlzcGxheTpmbGV4O2p1c3RpZnktY29udGVudDpjZW50ZXI7YWxpZ24taXRlbXM6Y2VudGVyO3Zpc2liaWxpdHk6dmlzaWJsZX06aG9zdCAuc3Bpbi1jaXJjbGV7YW5pbWF0aW9uOnNwaW4gMC44cyBpbmZpbml0ZSBsaW5lYXI7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci13aWR0aDowLjEyNWVtO3dpZHRoOjFlbTtoZWlnaHQ6MWVtfTpob3N0IC5tZXNzYWdle21hcmdpbi1sZWZ0OjAuNXJlbX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJTcGlubmVyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlNwaW5uZXJDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgbWVzc2FnZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0aW55OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXRpbnknLF0gfV0sXG4gICAgc21hbGw6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtc21hbGwnLF0gfV0sXG4gICAgbWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBsYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBnaWFudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1naWFudCcsXSB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBpbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU3R5bGVkIHNwaW5uZXIgZGlyZWN0aXZlXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIFNob3djYXNlLCBzcGlubmVyL3NwaW5uZXItY2FyZC5jb21wb25lbnQpXG4gKlxuICpcbiAqIGBgYHRzXG4gKiA8bmItY2FyZCBbbmJTcGlubmVyXT1cImxvYWRpbmdcIiBuYlNwaW5uZXJTdGF0dXM9XCJkYW5nZXJcIj5cbiAqICAgPG5iLWNhcmQtYm9keT5DYXJkIENvbnRlbnQ8L25iLWNhcmQtYm9keT5cbiAqIDwvbmItY2FyZD5cbiAqIGBgYFxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iU3Bpbm5lck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJTcGlubmVyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDb3VsZCBiZSBjb2xvcmVkIHVzaW5nIGBzdGF0dXNgIHByb3BlcnR5XG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIENvbG9ycywgc3Bpbm5lci9zcGlubmVyLWNvbG9ycy5jb21wb25lbnQpXG4gKlxuICogQXZhaWxhYmxlIGluIGRpZmZlcmVudCBzaXplcyB3aXRoIGBzaXplYCBwcm9wZXJ0eTpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNwaW5uZXIgU2l6ZXMsIHNwaW5uZXIvc3Bpbm5lci1zaXplcy5jb21wb25lbnQpXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBwbGFjZSBpdCBpbnRvIHRoZSBidXR0b246XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbnMgd2l0aCBzcGlubmVyLCBzcGlubmVyL3NwaW5uZXItYnV0dG9uLmNvbXBvbmVudClcbiAqXG4gKiBPciB0YWJzOlxuICogQHN0YWNrZWQtZXhhbXBsZShTcGlubmVyIGluIHRhYnMsIHNwaW5uZXIvc3Bpbm5lci10YWJzLmNvbXBvbmVudClcbiAqL1xuY2xhc3MgTmJTcGlubmVyRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihkaXJlY3RpdmVWaWV3LCBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIHJlbmRlcmVyLCBkaXJlY3RpdmVFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuZGlyZWN0aXZlVmlldyA9IGRpcmVjdGl2ZVZpZXc7XG4gICAgICAgIHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyID0gY29tcG9uZW50RmFjdG9yeVJlc29sdmVyO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuZGlyZWN0aXZlRWxlbWVudCA9IGRpcmVjdGl2ZUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuc2hvdWxkU2hvdyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3Bpbm5lciBzdGF0dXMgY29sb3JcbiAgICAgICAgICogYGJhc2ljYCwgYHByaW1hcnlgLCBgaW5mb2AsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGNvbnRyb2xgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zcGlubmVyU3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNwaW5uZXIgc2l6ZS4gUG9zc2libGUgdmFsdWVzOiBgdGlueWAsIGBzbWFsbGAsIGBtZWRpdW1gIChkZWZhdWx0KSwgYGxhcmdlYCwgYGdpYW50YFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zcGlubmVyU2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICB0aGlzLmlzU3Bpbm5lckV4aXN0ID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpcmVjdGl2ZSB2YWx1ZSAtIHNob3cgb3IgaGlkZSBzcGlubmVyXG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWxcbiAgICAgKi9cbiAgICBzZXQgbmJTcGlubmVyKHZhbCkge1xuICAgICAgICBpZiAodGhpcy5jb21wb25lbnRGYWN0b3J5KSB7XG4gICAgICAgICAgICBpZiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc2hvdWxkU2hvdyA9IHZhbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5jb21wb25lbnRGYWN0b3J5ID0gdGhpcy5jb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIucmVzb2x2ZUNvbXBvbmVudEZhY3RvcnkoTmJTcGlubmVyQ29tcG9uZW50KTtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkU2hvdykge1xuICAgICAgICAgICAgdGhpcy5zaG93KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGlkZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTcGlubmVyRXhpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuZGlyZWN0aXZlVmlldy5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNTcGlubmVyRXhpc3QgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93KCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNTcGlubmVyRXhpc3QpIHtcbiAgICAgICAgICAgIHRoaXMuc3Bpbm5lciA9IHRoaXMuZGlyZWN0aXZlVmlldy5jcmVhdGVDb21wb25lbnQodGhpcy5jb21wb25lbnRGYWN0b3J5KTtcbiAgICAgICAgICAgIHRoaXMuc2V0SW5zdGFuY2VJbnB1dHModGhpcy5zcGlubmVyLmluc3RhbmNlKTtcbiAgICAgICAgICAgIHRoaXMuc3Bpbm5lci5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFwcGVuZENoaWxkKHRoaXMuZGlyZWN0aXZlRWxlbWVudC5uYXRpdmVFbGVtZW50LCB0aGlzLnNwaW5uZXIubG9jYXRpb24ubmF0aXZlRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmlzU3Bpbm5lckV4aXN0ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRJbnN0YW5jZUlucHV0cyhpbnN0YW5jZSkge1xuICAgICAgICBpbnN0YW5jZS5tZXNzYWdlID0gdGhpcy5zcGlubmVyTWVzc2FnZTtcbiAgICAgICAgdHlwZW9mIHRoaXMuc3Bpbm5lclN0YXR1cyAhPT0gJ3VuZGVmaW5lZCcgJiYgKGluc3RhbmNlLnN0YXR1cyA9IHRoaXMuc3Bpbm5lclN0YXR1cyk7XG4gICAgICAgIHR5cGVvZiB0aGlzLnNwaW5uZXJTaXplICE9PSAndW5kZWZpbmVkJyAmJiAoaW5zdGFuY2Uuc2l6ZSA9IHRoaXMuc3Bpbm5lclNpemUpO1xuICAgIH1cbn1cbk5iU3Bpbm5lckRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1tuYlNwaW5uZXJdJyB9LF0gfVxuXTtcbk5iU3Bpbm5lckRpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IFZpZXdDb250YWluZXJSZWYgfSxcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG5OYlNwaW5uZXJEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc3Bpbm5lck1lc3NhZ2U6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iU3Bpbm5lck1lc3NhZ2UnLF0gfV0sXG4gICAgc3Bpbm5lclN0YXR1czogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJTcGlubmVyU3RhdHVzJyxdIH1dLFxuICAgIHNwaW5uZXJTaXplOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlNwaW5uZXJTaXplJyxdIH1dLFxuICAgIG5iU3Bpbm5lcjogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJTcGlubmVyJyxdIH1dLFxuICAgIGlzU3Bpbm5lckV4aXN0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5uYi1zcGlubmVyLWNvbnRhaW5lcicsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJTcGlubmVyTW9kdWxlIHtcbn1cbk5iU3Bpbm5lck1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYlNwaW5uZXJDb21wb25lbnQsIE5iU3Bpbm5lckRpcmVjdGl2ZV0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJTcGlubmVyQ29tcG9uZW50LCBOYlNwaW5uZXJEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW05iU3Bpbm5lckNvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuY29uc3QgTkJfU1RFUFBFUiA9IG5ldyBJbmplY3Rpb25Ub2tlbignTmVidWxhciBTdGVwcGVyIENvbXBvbmVudCcpO1xuXG4vKipcbiAqIENvbXBvbmVudCBpbnRlbmRlZCB0byBiZSB1c2VkIHdpdGhpbiAgdGhlIGA8bmItc3RlcHBlcj5gIGNvbXBvbmVudC5cbiAqIENvbnRhaW5lciBmb3IgYSBzdGVwXG4gKi9cbmNsYXNzIE5iU3RlcENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Ioc3RlcHBlcikge1xuICAgICAgICB0aGlzLl9oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fY29tcGxldGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaW50ZXJhY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnN0ZXBwZXIgPSBzdGVwcGVyO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHN0ZXAgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gd2l6YXJkXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgaGlkZGVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faGlkZGVuO1xuICAgIH1cbiAgICBzZXQgaGlkZGVuKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2hpZGRlbiA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoZWNrIHRoYXQgbGFiZWwgaXMgYSBUZW1wbGF0ZVJlZi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4gYm9vbGVhblxuICAgICAqICovXG4gICAgZ2V0IGlzTGFiZWxUZW1wbGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWwgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciBzdGVwIGlzIG1hcmtlZCBhcyBjb21wbGV0ZWQuXG4gICAgICpcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgY29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fY29tcGxldGVkIHx8IHRoaXMuaXNDb21wbGV0ZWQ7XG4gICAgfVxuICAgIHNldCBjb21wbGV0ZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fY29tcGxldGVkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGlzQ29tcGxldGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGVwQ29udHJvbCA/IHRoaXMuc3RlcENvbnRyb2wudmFsaWQgJiYgdGhpcy5pbnRlcmFjdGVkIDogdGhpcy5pbnRlcmFjdGVkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrIHN0ZXAgYXMgc2VsZWN0ZWRcbiAgICAgKiAqL1xuICAgIHNlbGVjdCgpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyLnNlbGVjdGVkID0gdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXQgc3RlcCBhbmQgc3RlcENvbnRyb2wgc3RhdGVcbiAgICAgKiAqL1xuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmludGVyYWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMuc3RlcENvbnRyb2wpIHtcbiAgICAgICAgICAgIHRoaXMuc3RlcENvbnRyb2wucmVzZXQoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbk5iU3RlcENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc3RlcCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctdGVtcGxhdGU+XG4gICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgYFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlN0ZXBDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX1NURVBQRVIsXSB9XSB9XG5dO1xuTmJTdGVwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbnRlbnQ6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW1RlbXBsYXRlUmVmLCB7IHN0YXRpYzogdHJ1ZSB9LF0gfV0sXG4gICAgc3RlcENvbnRyb2w6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxhYmVsOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBoaWRkZW46IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbXBsZXRlZDogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU3RlcHBlciBjb21wb25lbnRcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBzdGVwcGVyL3N0ZXBwZXItc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iU3RlcHBlck1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJTdGVwcGVyTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBJZiBzdGVwIGxhYmVsIGlzIHN0cmluZyB5b3UgY2FuIHBhc3MgaXQgYXMgYGxhYmVsYCBhdHRyaWJ1dGUuIE90aGVyd2lzZSBuZy10ZW1wbGF0ZSBzaG91bGQgYmUgdXNlZDpcbiAqIGBgYGh0bWxcbiAqIC8vIC4uLlxuICogPG5iLXN0ZXBwZXIgb3JpZW50YXRpb249XCJob3Jpem9udGFsXCI+XG4gKiAgIDxuYi1zdGVwIGxhYmVsPVwic3RlcCBudW1iZXIgb25lXCI+XG4gKiAgICAgICAvLyAuLi4gc3RlcCBjb250ZW50IGhlcmVcbiAqICAgPC9uYi1zdGVwPlxuICogICA8bmItc3RlcCBsYWJlbD1cInN0ZXBMYWJlbFwiPlxuICogICAgICAgPG5nLXRlbXBsYXRlICNzdGVwTGFiZWw+XG4gKiAgICAgICAgICAgPGRpdj5cbiAqICAgICAgICAgICAgICAgc3RlcCBudW1iZXIgdHdvXG4gKiAgICAgICAgICAgPC9kaXY+XG4gKiAgICAgICA8L25nLXRlbXBsYXRlPlxuICogICAgICAgLy8gLi4uIHN0ZXAgY29udGVudCBoZXJlXG4gKiAgIDwvbmItc3RlcD5cbiAqIDwvbmItc3RlcHBlcj5cbiAqIGBgYFxuICpcbiAqIFdoZW4gbGluZWFyIG1vZGUgZW5hYmxlZCB1c2VyIGNhbid0IG1vdmUgZm9yd2FyZCB1bmxlc3MgY3VycmVudCBzdGVwIGlzIGNvbXBsZXRlLlxuICogQHN0YWNrZWQtZXhhbXBsZShMaW5lYXIsIHN0ZXBwZXIvc3RlcHBlci1saW5lYXIuY29tcG9uZW50KVxuICpcbiAqIFNwZWNpZnkgYFtzdGVwQ29udHJvbF09XCJmb3JtXCJgIGFuZCBzdGVwcGVyIGFsbG93IGdvIHRvIHRoZSBuZXh0IHN0ZXAgb25seSBpZiBmb3JtIGlzIHZhbGlkLlxuICogWW91IGNhbiBkaXNhYmxlIGl0IHZpYSBgbGluZWFyYCBtb2RlIHNldHRpbmcuXG4gKiBgYGBodG1sXG4gKiAvLyAuLi5cbiAqIDxuYi1zdGVwcGVyICBvcmllbnRhdGlvbj1cImhvcml6b250YWxcIj5cbiAqICAgPG5iLXN0ZXAgbGFiZWw9XCJzdGVwIG51bWJlciBvbmVcIiBbc3RlcENvbnRyb2xdPVwiZm9ybVwiPlxuICogICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiZm9ybVwiPlxuICogICAgICAgLy8gLi4uXG4gKiAgICAgPC9mb3JtPlxuICogICA8L25iLXN0ZXA+XG4gKiAgICAvLyAuLi5cbiAqIDwvbmItc3RlcHBlcj5cbiAqIGBgYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVmFsaWRhdGlvbiwgc3RlcHBlci9zdGVwcGVyLXZhbGlkYXRpb24uY29tcG9uZW50KVxuICpcbiAqIFN0ZXBwZXIgY29tcG9uZW50IGhhcyB0d28gbGF5b3V0IG9wdGlvbnMgLSBgdmVydGljYWxgICYgYGhvcml6b250YWxgXG4gKiBAc3RhY2tlZC1leGFtcGxlKFZlcnRpY2FsLCBzdGVwcGVyL3N0ZXBwZXItdmVydGljYWwuY29tcG9uZW50KVxuICpcbiAqIGBkaXNhYmxlU3RlcE5hdmlnYXRpb25gIGRpc2FibGVzIG5hdmlnYXRpb24gYnkgY2xpY2tpbmcgb24gc3RlcHMsIHNvIHVzZXIgY2FuIG5hdmlnYXRlIG9ubHkgdXNpbmdcbiAqICduYlN0ZXBwZXJQcmV2aW91cycgYW5kICduYlN0ZXBwZXJOZXh0JyBidXR0b25zLlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCBzdGVwcyBuYXZpZ2F0aW9uLCBzdGVwcGVyL3N0ZXBwZXItZGlzYWJsZWQtc3RlcC1uYXYuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBzdGVwcGVyLXN0ZXAtdGV4dC1jb2xvcjpcbiAqIHN0ZXBwZXItc3RlcC10ZXh0LWZvbnQtZmFtaWx5OlxuICogc3RlcHBlci1zdGVwLXRleHQtZm9udC1zaXplOlxuICogc3RlcHBlci1zdGVwLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzdGVwcGVyLXN0ZXAtdGV4dC1saW5lLWhlaWdodDpcbiAqIHN0ZXBwZXItc3RlcC1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHN0ZXBwZXItc3RlcC1jb21wbGV0ZWQtdGV4dC1jb2xvcjpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC1ib3JkZXItY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtYm9yZGVyLXN0eWxlOlxuICogc3RlcHBlci1zdGVwLWluZGV4LWJvcmRlci13aWR0aDpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC1ib3JkZXItcmFkaXVzOlxuICogc3RlcHBlci1zdGVwLWluZGV4LXdpZHRoOlxuICogc3RlcHBlci1zdGVwLWluZGV4LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtY29tcGxldGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzdGVwcGVyLXN0ZXAtaW5kZXgtY29tcGxldGVkLWJvcmRlci1jb2xvcjpcbiAqIHN0ZXBwZXItc3RlcC1pbmRleC1jb21wbGV0ZWQtdGV4dC1jb2xvcjpcbiAqIHN0ZXBwZXItY29ubmVjdG9yLWJhY2tncm91bmQtY29sb3I6XG4gKiBzdGVwcGVyLWNvbm5lY3Rvci1jb21wbGV0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHN0ZXBwZXItaG9yaXpvbnRhbC1jb25uZWN0b3ItbWFyZ2luOlxuICogc3RlcHBlci12ZXJ0aWNhbC1jb25uZWN0b3ItbWFyZ2luOlxuICogc3RlcHBlci1zdGVwLWNvbnRlbnQtcGFkZGluZzpcbiAqL1xuY2xhc3MgTmJTdGVwcGVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRJbmRleCA9IDA7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVTdGVwTmF2aWdhdGlvbiA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU3RlcHBlciBvcmllbnRhdGlvbiAtIGBob3Jpem9udGFsYHxgdmVydGljYWxgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9yaWVudGF0aW9uID0gJ2hvcml6b250YWwnO1xuICAgICAgICB0aGlzLl9saW5lYXIgPSB0cnVlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3RlZCBzdGVwIGluZGV4XG4gICAgICovXG4gICAgZ2V0IHNlbGVjdGVkSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZWxlY3RlZEluZGV4O1xuICAgIH1cbiAgICBzZXQgc2VsZWN0ZWRJbmRleChpbmRleCkge1xuICAgICAgICBpZiAoIXRoaXMuc3RlcHMpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hcmtDdXJyZW50U3RlcEludGVyYWN0ZWQoKTtcbiAgICAgICAgaWYgKHRoaXMuY2FuQmVTZWxlY3RlZChpbmRleCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSBpbmRleDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBEaXNhYmxlcyBuYXZpZ2F0aW9uIGJ5IGNsaWNraW5nIG9uIHN0ZXBzLiBGYWxzZSBieSBkZWZhdWx0XG4gICAgICogQHBhcmFtIHtib29sZWFufSB2YWx1ZVxuICAgICAqL1xuICAgIHNldCBkaXNhYmxlU3RlcE5hdmlnYXRpb24odmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZGlzYWJsZVN0ZXBOYXZpZ2F0aW9uID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVTdGVwTmF2aWdhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVTdGVwTmF2aWdhdGlvbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VsZWN0ZWQgc3RlcCBjb21wb25lbnRcbiAgICAgKi9cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0ZXBzID8gdGhpcy5zdGVwcy50b0FycmF5KClbdGhpcy5zZWxlY3RlZEluZGV4XSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgc2V0IHNlbGVjdGVkKHN0ZXApIHtcbiAgICAgICAgaWYgKCF0aGlzLnN0ZXBzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gdGhpcy5zdGVwcy50b0FycmF5KCkuaW5kZXhPZihzdGVwKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWxsb3cgbW92aW5nIGZvcndhcmQgb25seSBpZiB0aGUgY3VycmVudCBzdGVwIGlzIGNvbXBsZXRlXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxuICAgICAqL1xuICAgIHNldCBsaW5lYXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbGluZWFyID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGxpbmVhcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xpbmVhcjtcbiAgICB9XG4gICAgZ2V0IHZlcnRpY2FsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vcmllbnRhdGlvbiA9PT0gJ3ZlcnRpY2FsJztcbiAgICB9XG4gICAgZ2V0IGhvcml6b250YWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9yaWVudGF0aW9uID09PSAnaG9yaXpvbnRhbCc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIG5leHQgc3RlcFxuICAgICAqICovXG4gICAgbmV4dCgpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEluZGV4ID0gTWF0aC5taW4odGhpcy5zZWxlY3RlZEluZGV4ICsgMSwgdGhpcy5zdGVwcy5sZW5ndGggLSAxKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTmF2aWdhdGUgdG8gcHJldmlvdXMgc3RlcFxuICAgICAqICovXG4gICAgcHJldmlvdXMoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRJbmRleCA9IE1hdGgubWF4KHRoaXMuc2VsZWN0ZWRJbmRleCAtIDEsIDApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldCBzdGVwcGVyIGFuZCBzdGVwQ29udHJvbHMgdG8gaW5pdGlhbCBzdGF0ZVxuICAgICAqICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkSW5kZXggPSAwO1xuICAgICAgICB0aGlzLnN0ZXBzLmZvckVhY2goc3RlcCA9PiBzdGVwLnJlc2V0KCkpO1xuICAgIH1cbiAgICBpc1N0ZXBTZWxlY3RlZChzdGVwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGVkID09PSBzdGVwO1xuICAgIH1cbiAgICAvKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiovXG4gICAgZ2V0U3RlcFRlbXBsYXRlKHN0ZXApIHtcbiAgICAgICAgaWYgKHN0ZXAuaXNMYWJlbFRlbXBsYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RlcC5sYWJlbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNTdGVwVmFsaWQoaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RlcHMudG9BcnJheSgpW2luZGV4XS5jb21wbGV0ZWQ7XG4gICAgfVxuICAgIGNhbkJlU2VsZWN0ZWQoaW5kZXhUb0NoZWNrKSB7XG4gICAgICAgIGNvbnN0IG5vU3RlcHMgPSAhdGhpcy5zdGVwcyB8fCB0aGlzLnN0ZXBzLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgaWYgKG5vU3RlcHMgfHwgaW5kZXhUb0NoZWNrIDwgMCB8fCBpbmRleFRvQ2hlY2sgPj0gdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5kZXhUb0NoZWNrIDw9IHRoaXMuc2VsZWN0ZWRJbmRleCB8fCAhdGhpcy5saW5lYXIpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBpc0FsbFN0ZXBzVmFsaWQgPSB0cnVlO1xuICAgICAgICBmb3IgKGxldCBpID0gdGhpcy5zZWxlY3RlZEluZGV4OyBpIDwgaW5kZXhUb0NoZWNrOyBpKyspIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1N0ZXBWYWxpZChpKSkge1xuICAgICAgICAgICAgICAgIGlzQWxsU3RlcHNWYWxpZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpc0FsbFN0ZXBzVmFsaWQ7XG4gICAgfVxuICAgIG1hcmtDdXJyZW50U3RlcEludGVyYWN0ZWQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkLmludGVyYWN0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJTdGVwcGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1zdGVwcGVyJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8bmctdGVtcGxhdGU+PG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJuYi1zdGVwXFxcIj48L25nLWNvbnRlbnQ+PC9uZy10ZW1wbGF0ZT5cXG48ZGl2IGNsYXNzPVxcXCJoZWFkZXJcXFwiPlxcbiAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XFxcImxldCBzdGVwIG9mIHN0ZXBzOyBsZXQgaW5kZXggPSBpbmRleDsgbGV0IGZpcnN0ID0gZmlyc3RcXFwiPlxcblxcbiAgICA8ZGl2ICpuZ0lmPVxcXCIhZmlyc3QgJiYgIXN0ZXAuaGlkZGVuXFxcIlxcbiAgICAgICAgIFtjbGFzcy5jb25uZWN0b3ItcGFzdF09XFxcImluZGV4IDw9IHNlbGVjdGVkSW5kZXhcXFwiXFxuICAgICAgICAgY2xhc3M9XFxcImNvbm5lY3RvclxcXCI+PC9kaXY+XFxuXFxuICAgIDxkaXYgKm5nSWY9XFxcIiFzdGVwLmhpZGRlblxcXCIgY2xhc3M9XFxcInN0ZXBcXFwiXFxuICAgICAgICAgW2NsYXNzLnNlbGVjdGVkXT1cXFwiaXNTdGVwU2VsZWN0ZWQoc3RlcClcXFwiXFxuICAgICAgICAgW2NsYXNzLmNvbXBsZXRlZF09XFxcIiFpc1N0ZXBTZWxlY3RlZChzdGVwKSAmJiBzdGVwLmNvbXBsZXRlZFxcXCJcXG4gICAgICAgICBbY2xhc3Mubm9uaW50ZXJhY3RpdmVdPVxcXCJkaXNhYmxlU3RlcE5hdmlnYXRpb25cXFwiXFxuICAgICAgICAgKGNsaWNrKT1cXFwiIWRpc2FibGVTdGVwTmF2aWdhdGlvbiAmJiBzdGVwLnNlbGVjdCgpXFxcIj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJsYWJlbC1pbmRleFxcXCI+XFxuICAgICAgICA8c3BhbiAqbmdJZj1cXFwiIXN0ZXAuY29tcGxldGVkIHx8IGlzU3RlcFNlbGVjdGVkKHN0ZXApXFxcIj57eyBpbmRleCArIDEgfX08L3NwYW4+XFxuICAgICAgICA8bmItaWNvbiAqbmdJZj1cXFwiIWlzU3RlcFNlbGVjdGVkKHN0ZXApICYmIHN0ZXAuY29tcGxldGVkXFxcIiBpY29uPVxcXCJjaGVja21hcmstb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIj5cXG4gICAgICAgIDwvbmItaWNvbj5cXG4gICAgICA8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJsYWJlbFxcXCI+XFxuICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzdGVwLmlzTGFiZWxUZW1wbGF0ZVxcXCI+XFxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XFxcImdldFN0ZXBUZW1wbGF0ZShzdGVwKVxcXCI+PC9uZy1jb250YWluZXI+XFxuICAgICAgICA8L25nLWNvbnRhaW5lcj5cXG4gICAgICAgIDxzcGFuICpuZ0lmPVxcXCIhc3RlcC5pc0xhYmVsVGVtcGxhdGVcXFwiPnt7IHN0ZXAubGFiZWwgfX08L3NwYW4+XFxuICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgPC9uZy1jb250YWluZXI+XFxuPC9kaXY+XFxuPGRpdiBjbGFzcz1cXFwic3RlcC1jb250ZW50XFxcIj5cXG4gIDxuZy1jb250YWluZXIgW25nVGVtcGxhdGVPdXRsZXRdPVxcXCJzZWxlY3RlZD8uY29udGVudFxcXCI+PC9uZy1jb250YWluZXI+XFxuPC9kaXY+XFxuXCIsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOQl9TVEVQUEVSLCB1c2VFeGlzdGluZzogTmJTdGVwcGVyQ29tcG9uZW50IH1dLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3QoLmhvcml6b250YWwpIC5oZWFkZXIgLnN0ZXB7ZmxleC1kaXJlY3Rpb246Y29sdW1ufTpob3N0KC5ob3Jpem9udGFsKSAuaGVhZGVyIC5jb25uZWN0b3J7aGVpZ2h0OjJweH06aG9zdCguaG9yaXpvbnRhbCkgLmxhYmVsLWluZGV4e21hcmdpbi1ib3R0b206MTBweH06aG9zdCgudmVydGljYWwpe2Rpc3BsYXk6ZmxleDtoZWlnaHQ6MTAwJX06aG9zdCgudmVydGljYWwpIC5oZWFkZXJ7ZmxleC1kaXJlY3Rpb246Y29sdW1ufTpob3N0KC52ZXJ0aWNhbCkgLmhlYWRlciAubGFiZWx7bWFyZ2luOjAgMTBweH06aG9zdCgudmVydGljYWwpIC5oZWFkZXIgLmNvbm5lY3Rvcnt3aWR0aDoycHh9LmhlYWRlcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6ZmxleC1zdGFydDttYXJnaW4tYm90dG9tOjEwcHh9LmhlYWRlciAuY29ubmVjdG9ye2ZsZXg6YXV0b30uaGVhZGVyIC5zdGVwe2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7Y3Vyc29yOnBvaW50ZXJ9LmhlYWRlciAuc3RlcC5ub25pbnRlcmFjdGl2ZXtjdXJzb3I6ZGVmYXVsdH0uaGVhZGVyIC5sYWJlbC1pbmRleHtkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXJ9LmhlYWRlciAubGFiZWx7d2lkdGg6bWF4LWNvbnRlbnR9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iU3RlcHBlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBzZWxlY3RlZEluZGV4OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlU3RlcE5hdmlnYXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvcmllbnRhdGlvbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgbGluZWFyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2ZXJ0aWNhbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MudmVydGljYWwnLF0gfV0sXG4gICAgaG9yaXpvbnRhbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuaG9yaXpvbnRhbCcsXSB9XSxcbiAgICBzdGVwczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJTdGVwQ29tcG9uZW50LF0gfV1cbn07XG5cbmNsYXNzIE5iU3RlcHBlck5leHREaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKHN0ZXBwZXIpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyID0gc3RlcHBlcjtcbiAgICAgICAgdGhpcy50eXBlID0gJ3N1Ym1pdCc7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuc3RlcHBlci5uZXh0KCk7XG4gICAgfVxufVxuTmJTdGVwcGVyTmV4dERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnYnV0dG9uW25iU3RlcHBlck5leHRdJyxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJTdGVwcGVyTmV4dERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU3RlcHBlckNvbXBvbmVudCB9XG5dO1xuTmJTdGVwcGVyTmV4dERpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICB0eXBlOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIudHlwZScsXSB9XSxcbiAgICBvbkNsaWNrOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLF0gfV1cbn07XG5jbGFzcyBOYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3Ioc3RlcHBlcikge1xuICAgICAgICB0aGlzLnN0ZXBwZXIgPSBzdGVwcGVyO1xuICAgICAgICB0aGlzLnR5cGUgPSAnYnV0dG9uJztcbiAgICB9XG4gICAgb25DbGljaygpIHtcbiAgICAgICAgdGhpcy5zdGVwcGVyLnByZXZpb3VzKCk7XG4gICAgfVxufVxuTmJTdGVwcGVyUHJldmlvdXNEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2J1dHRvbltuYlN0ZXBwZXJQcmV2aW91c10nLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlN0ZXBwZXJQcmV2aW91c0RpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU3RlcHBlckNvbXBvbmVudCB9XG5dO1xuTmJTdGVwcGVyUHJldmlvdXNEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdHlwZTogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLnR5cGUnLF0gfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlN0ZXBwZXJNb2R1bGUge1xufVxuTmJTdGVwcGVyTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iU2hhcmVkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJTdGVwcGVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYlN0ZXBDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iU3RlcHBlck5leHREaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgIE5iU3RlcHBlclByZXZpb3VzRGlyZWN0aXZlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYlN0ZXBwZXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iU3RlcENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJTdGVwcGVyTmV4dERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgTmJTdGVwcGVyUHJldmlvdXNEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIEFuIGFjY29yZGlvbiBhbGxvd3MgdG8gdG9nZ2xlIHRoZSBkaXNwbGF5IG9mIHNlY3Rpb25zIG9mIGNvbnRlbnRcbiAqXG4gKiBCYXNpYyBleGFtcGxlXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCBhY2NvcmRpb24vYWNjb3JkaW9uLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgYGB0c1xuICogPG5iLWFjY29yZGlvbj5cbiAqICA8bmItYWNjb3JkaW9uLWl0ZW0+XG4gKiAgIDxuYi1hY2NvcmRpb24taXRlbS1oZWFkZXI+UHJvZHVjdCBEZXRhaWxzPC9uYi1hY2NvcmRpb24taXRlbS1oZWFkZXI+XG4gKiAgIDxuYi1hY2NvcmRpb24taXRlbS1ib2R5PlxuICogICAgIEl0ZW0gQ29udGVudFxuICogICA8L25iLWFjY29yZGlvbi1pdGVtLWJvZHk+XG4gKiAgPC9uYi1hY2NvcmRpb24taXRlbT5cbiAqIDwvbmItYWNjb3JkaW9uPlxuICogYGBgXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYkFjY29yZGlvbk1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJBY2NvcmRpb25Nb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqICMjIyBVc2FnZVxuICpcbiAqIFdpdGggYG11bHRpYCBtb2RlIGFjY29yZGlvbiBjYW4gaGF2ZSBtdWx0aXBsZSBpdGVtcyBleHBhbmRlZDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXVsdGlwbGUgZXhwYW5kZWQgaXRlbXMsIGFjY29yZGlvbi9hY2NvcmRpb24tbXVsdGkuY29tcG9uZW50KVxuICpcbiAqIGBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnRgIGhhcyBzZXZlcmFsIG1ldGhvZHMsIGZvciBleGFtcGxlIGl0IGlzIHBvc3NpYmxlIHRvIHRyaWdnZXIgaXRlbSBjbGljay90b2dnbGU6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEV4cGFuZCBBUEksIGFjY29yZGlvbi9hY2NvcmRpb24tdG9nZ2xlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYWNjb3JkaW9uLWJvcmRlci1yYWRpdXM6XG4gKiBhY2NvcmRpb24tcGFkZGluZzpcbiAqIGFjY29yZGlvbi1zaGFkb3c6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtY29sb3I6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiBhY2NvcmRpb24taGVhZGVyLXRleHQtZm9udC1zaXplOlxuICogYWNjb3JkaW9uLWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWNjb3JkaW9uLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogYWNjb3JkaW9uLWhlYWRlci1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogYWNjb3JkaW9uLWhlYWRlci1ib3JkZXItY29sb3I6XG4gKiBhY2NvcmRpb24taGVhZGVyLWJvcmRlci1zdHlsZTpcbiAqIGFjY29yZGlvbi1oZWFkZXItYm9yZGVyLXdpZHRoOlxuICogYWNjb3JkaW9uLWl0ZW0tYmFja2dyb3VuZC1jb2xvcjpcbiAqIGFjY29yZGlvbi1pdGVtLXRleHQtY29sb3I6XG4gKiBhY2NvcmRpb24taXRlbS10ZXh0LWZvbnQtZmFtaWx5OlxuICogYWNjb3JkaW9uLWl0ZW0tdGV4dC1mb250LXNpemU6XG4gKiBhY2NvcmRpb24taXRlbS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogYWNjb3JkaW9uLWl0ZW0tdGV4dC1saW5lLWhlaWdodDpcbiAqL1xuY2xhc3MgTmJBY2NvcmRpb25Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9wZW5DbG9zZUl0ZW1zID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5tdWx0aVZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqICBBbGxvdyBtdWx0aXBsZSBpdGVtcyB0byBiZSBleHBhbmRlZCBhdCB0aGUgc2FtZSB0aW1lLlxuICAgICAqIEB0eXBlIHtib29sZWFufVxuICAgICAqL1xuICAgIGdldCBtdWx0aSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlWYWx1ZTtcbiAgICB9XG4gICAgc2V0IG11bHRpKHZhbCkge1xuICAgICAgICB0aGlzLm11bHRpVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgYWxsIGVuYWJsZWQgYWNjb3JkaW9uIGl0ZW1zLlxuICAgICAqL1xuICAgIG9wZW5BbGwoKSB7XG4gICAgICAgIGlmICh0aGlzLm11bHRpKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5DbG9zZUl0ZW1zLm5leHQoZmFsc2UpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyBhbGwgZW5hYmxlZCBhY2NvcmRpb24gaXRlbXMuXG4gICAgICovXG4gICAgY2xvc2VBbGwoKSB7XG4gICAgICAgIHRoaXMub3BlbkNsb3NlSXRlbXMubmV4dCh0cnVlKTtcbiAgICB9XG59XG5OYkFjY29yZGlvbkNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItYWNjb3JkaW9uJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWFjY29yZGlvbi1pdGVtXCI+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQWNjb3JkaW9uQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG11bHRpOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWydtdWx0aScsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gYDxuYi1hY2NvcmRpb24+YCBjb21wb25lbnRcbiAqL1xuY2xhc3MgTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhY2NvcmRpb24sIGNkKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uID0gYWNjb3JkaW9uO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuZXZlciB0aGUgZXhwYW5kZWQgc3RhdGUgb2YgdGhlIGFjY29yZGlvbiBjaGFuZ2VzLlxuICAgICAgICAgKiBQcmltYXJpbHkgdXNlZCB0byBmYWNpbGl0YXRlIHR3by13YXkgYmluZGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29sbGFwc2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRWYWx1ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuZGlzYWJsZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlbSBpcyBjb2xsYXBzZSAoYHRydWVgIGJ5IGRlZmF1bHQpXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGNvbGxhcHNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkVmFsdWU7XG4gICAgfVxuICAgIHNldCBjb2xsYXBzZWQodmFsKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRDaGFuZ2UuZW1pdCh0aGlzLmNvbGxhcHNlZFZhbHVlKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEl0ZW0gaXMgZXhwYW5kZWQgKGBmYWxzZWAgYnkgZGVmYXVsdClcbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgZXhwYW5kZWQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jb2xsYXBzZWQ7XG4gICAgfVxuICAgIHNldCBleHBhbmRlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRWYWx1ZSA9ICFjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlbSBpcyBkaXNhYmxlZCBhbmQgY2Fubm90IGJlIG9wZW5lZC5cbiAgICAgKiBAdHlwZSB7Ym9vbGVhbn1cbiAgICAgKi9cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkVmFsdWU7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWwpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbCk7XG4gICAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVuL2Nsb3NlIHRoZSBpdGVtXG4gICAgICovXG4gICAgdG9nZ2xlKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdGhpcyB0ZW1wb3JhcnkgdmFyaWFibGUgYXMgYG9wZW5DbG9zZUl0ZW1zLm5leHRgIHdpbGwgY2hhbmdlIGN1cnJlbnQgdmFsdWUgd2UgbmVlZCB0byBzYXZlXG4gICAgICAgICAgICBjb25zdCB3aWxsU2V0ID0gIXRoaXMuY29sbGFwc2VkO1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFjY29yZGlvbi5tdWx0aSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjb3JkaW9uLm9wZW5DbG9zZUl0ZW1zLm5leHQodHJ1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlZCA9IHdpbGxTZXQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbiB0aGUgaXRlbS5cbiAgICAgKi9cbiAgICBvcGVuKCkge1xuICAgICAgICAhdGhpcy5kaXNhYmxlZCAmJiAodGhpcy5jb2xsYXBzZWQgPSBmYWxzZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbGxhcHNlIHRoZSBpdGVtLlxuICAgICAqL1xuICAgIGNsb3NlKCkge1xuICAgICAgICAhdGhpcy5kaXNhYmxlZCAmJiAodGhpcy5jb2xsYXBzZWQgPSB0cnVlKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uLm9wZW5DbG9zZUl0ZW1zXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGNvbGxhcHNlZCA9PiB7XG4gICAgICAgICAgICAhdGhpcy5kaXNhYmxlZCAmJiAodGhpcy5jb2xsYXBzZWQgPSBjb2xsYXBzZWQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlcykge1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlLm5leHQodHJ1ZSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGludmFsaWRhdGUoKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbUludmFsaWRhdGUubmV4dCh0cnVlKTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG59XG5OYkFjY29yZGlvbkl0ZW1Db21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWFjY29yZGlvbi1pdGVtJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWFjY29yZGlvbi1pdGVtLWhlYWRlclwiPjwvbmctY29udGVudD5cbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1hY2NvcmRpb24taXRlbS1ib2R5XCI+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJBY2NvcmRpb25JdGVtQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJBY2NvcmRpb25Db21wb25lbnQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEhvc3QgfV0gfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH1cbl07XG5OYkFjY29yZGlvbkl0ZW1Db21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29sbGFwc2VkOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWydjb2xsYXBzZWQnLF0gfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5jb2xsYXBzZWQnLF0gfV0sXG4gICAgZXhwYW5kZWQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ2V4cGFuZGVkJyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZXhwYW5kZWQnLF0gfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ2Rpc2FibGVkJyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZGlzYWJsZWQnLF0gfV0sXG4gICAgY29sbGFwc2VkQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IGFjY29yZGlvbkl0ZW1Cb2R5VHJpZ2dlciA9IHRyaWdnZXIoJ2FjY29yZGlvbkl0ZW1Cb2R5JywgW1xuICAgIHN0YXRlKCdjb2xsYXBzZWQnLCBzdHlsZSh7XG4gICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgdmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgICAgIGhlaWdodDogMCxcbiAgICB9KSksXG4gICAgc3RhdGUoJ2V4cGFuZGVkJywgc3R5bGUoe1xuICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgIHZpc2liaWxpdHk6ICd2aXNpYmxlJyxcbiAgICB9KSksXG4gICAgdHJhbnNpdGlvbignY29sbGFwc2VkID0+IGV4cGFuZGVkJywgYW5pbWF0ZSgnMTAwbXMgZWFzZS1pbicpKSxcbiAgICB0cmFuc2l0aW9uKCdleHBhbmRlZCA9PiBjb2xsYXBzZWQnLCBhbmltYXRlKCcxMDBtcyBlYXNlLW91dCcpKSxcbl0pO1xuLyoqXG4gKiBDb21wb25lbnQgaW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoaW4gYDxuYi1hY2NvcmRpb24taXRlbT5gIGNvbXBvbmVudFxuICovXG5jbGFzcyBOYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhY2NvcmRpb25JdGVtLCBjZCkge1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW0gPSBhY2NvcmRpb25JdGVtO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICBnZXQgc3RhdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbkl0ZW0uY29sbGFwc2VkID8gJ2NvbGxhcHNlZCcgOiAnZXhwYW5kZWQnO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5hY2NvcmRpb25JdGVtLmFjY29yZGlvbkl0ZW1JbnZhbGlkYXRlXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuY2QubWFya0ZvckNoZWNrKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG59XG5OYkFjY29yZGlvbkl0ZW1Cb2R5Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1hY2NvcmRpb24taXRlbS1ib2R5JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgW0BhY2NvcmRpb25JdGVtQm9keV09XCJ7IHZhbHVlOiBzdGF0ZSB9XCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiaXRlbS1ib2R5XCI+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIGFuaW1hdGlvbnM6IFthY2NvcmRpb25JdGVtQm9keVRyaWdnZXJdLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQWNjb3JkaW9uSXRlbUJvZHlDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEhvc3QgfV0gfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ29tcG9uZW50IGludGVuZGVkIHRvIGJlIHVzZWQgd2l0aGluIGA8bmItYWNjb3JkaW9uLWl0ZW0+YCBjb21wb25lbnRcbiAqL1xuY2xhc3MgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihhY2NvcmRpb25JdGVtLCBjZCkge1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW0gPSBhY2NvcmRpb25JdGVtO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgIH1cbiAgICBnZXQgaXNDb2xsYXBzZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFjY29yZGlvbkl0ZW0uY29sbGFwc2VkO1xuICAgIH1cbiAgICBnZXQgZXhwYW5kZWQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5hY2NvcmRpb25JdGVtLmNvbGxhcHNlZDtcbiAgICB9XG4gICAgLy8gaXNzdWUgIzc5NFxuICAgIGdldCB0YWJiYWJsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbS5kaXNhYmxlZCA/ICctMScgOiAnMCc7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYWNjb3JkaW9uSXRlbS5kaXNhYmxlZDtcbiAgICB9XG4gICAgdG9nZ2xlKCkge1xuICAgICAgICB0aGlzLmFjY29yZGlvbkl0ZW0udG9nZ2xlKCk7XG4gICAgfVxuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNDb2xsYXBzZWQpIHtcbiAgICAgICAgICAgIHJldHVybiAnY29sbGFwc2VkJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5leHBhbmRlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdleHBhbmRlZCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uSXRlbS5hY2NvcmRpb25JdGVtSW52YWxpZGF0ZVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNkLm1hcmtGb3JDaGVjaygpKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxufVxuTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1hY2NvcmRpb24taXRlbS1oZWFkZXInLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItYWNjb3JkaW9uLWl0ZW0tdGl0bGVcIj48L25nLWNvbnRlbnQ+XG4gICAgPG5nLWNvbnRlbnQgc2VsZWN0PVwibmItYWNjb3JkaW9uLWl0ZW0tZGVzY3JpcHRpb25cIj48L25nLWNvbnRlbnQ+XG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIDxuYi1pY29uIGljb249XCJjaGV2cm9uLWRvd24tb3V0bGluZVwiXG4gICAgICAgICAgICAgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiXG4gICAgICAgICAgICAgW0BleHBhbnNpb25JbmRpY2F0b3JdPVwic3RhdGVcIlxuICAgICAgICAgICAgICpuZ0lmPVwiIWRpc2FibGVkXCJcbiAgICAgICAgICAgICBjbGFzcz1cImV4cGFuc2lvbi1pbmRpY2F0b3JcIj5cbiAgICA8L25iLWljb24+XG4gIGAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCdleHBhbnNpb25JbmRpY2F0b3InLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSgnZXhwYW5kZWQnLCBzdHlsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiAncm90YXRlKDE4MGRlZyknLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbignY29sbGFwc2VkID0+IGV4cGFuZGVkJywgYW5pbWF0ZSgnMTAwbXMgZWFzZS1pbicpKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ2V4cGFuZGVkID0+IGNvbGxhcHNlZCcsIGFuaW1hdGUoJzEwMG1zIGVhc2Utb3V0JykpLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtjdXJzb3I6cG9pbnRlcn06aG9zdDpmb2N1c3tvdXRsaW5lOjB9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iQWNjb3JkaW9uSXRlbUNvbXBvbmVudCwgZGVjb3JhdG9yczogW3sgdHlwZTogSG9zdCB9XSB9LFxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfVxuXTtcbk5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBpc0NvbGxhcHNlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYWNjb3JkaW9uLWl0ZW0taGVhZGVyLWNvbGxhcHNlZCcsXSB9XSxcbiAgICBleHBhbmRlZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYWNjb3JkaW9uLWl0ZW0taGVhZGVyLWV4cGFuZGVkJyxdIH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5hcmlhLWV4cGFuZGVkJyxdIH1dLFxuICAgIHRhYmJhYmxlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLnRhYmluZGV4JyxdIH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLmFyaWEtZGlzYWJsZWQnLF0gfV0sXG4gICAgdG9nZ2xlOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLF0gfSwgeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsna2V5ZG93bi5zcGFjZScsXSB9LCB7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmVudGVyJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9BQ0NPUkRJT05fQ09NUE9ORU5UUyA9IFtcbiAgICBOYkFjY29yZGlvbkNvbXBvbmVudCxcbiAgICBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQsXG4gICAgTmJBY2NvcmRpb25JdGVtSGVhZGVyQ29tcG9uZW50LFxuICAgIE5iQWNjb3JkaW9uSXRlbUJvZHlDb21wb25lbnQsXG5dO1xuY2xhc3MgTmJBY2NvcmRpb25Nb2R1bGUge1xufVxuTmJBY2NvcmRpb25Nb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIE5iSWNvbk1vZHVsZV0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogWy4uLk5CX0FDQ09SRElPTl9DT01QT05FTlRTXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFsuLi5OQl9BQ0NPUkRJT05fQ09NUE9ORU5UU10sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIGBbbmJCdXR0b25Ub2dnbGVdYCBpcyBhIGRpcmVjdGl2ZSB0byBhZGQgYSBgcHJlc3NlZGAgc3RhdGUgdG8gYSBidXR0b24uXG4gKi9cbmNsYXNzIE5iQnV0dG9uVG9nZ2xlRGlyZWN0aXZlIGV4dGVuZHMgTmJCdXR0b24ge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBob3N0RWxlbWVudCwgY2QsIHpvbmUsIHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIocmVuZGVyZXIsIGhvc3RFbGVtZW50LCBjZCwgem9uZSwgc3RhdHVzU2VydmljZSk7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50O1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMuc3RhdHVzU2VydmljZSA9IHN0YXR1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX3ByZXNzZWRDaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ2ZpbGxlZCc7XG4gICAgICAgIHRoaXMuX3ByZXNzZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW5ldmVyIGJ1dHRvbiBwcmVzc2VkIHN0YXRlIGNoYW5nZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMucHJlc3NlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgZ2V0IHByZXNzZWRDaGFuZ2UkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJlc3NlZENoYW5nZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRyb2xzIGJ1dHRvbiBwcmVzc2VkIHN0YXRlXG4gICAgICoqL1xuICAgIGdldCBwcmVzc2VkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcHJlc3NlZDtcbiAgICB9XG4gICAgc2V0IHByZXNzZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMucHJlc3NlZCAhPT0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fcHJlc3NlZCA9ICF0aGlzLnByZXNzZWQ7XG4gICAgICAgICAgICB0aGlzLnByZXNzZWRDaGFuZ2UuZW1pdCh0aGlzLnByZXNzZWQpO1xuICAgICAgICAgICAgdGhpcy5fcHJlc3NlZENoYW5nZSQubmV4dCh7IHNvdXJjZTogdGhpcywgcHJlc3NlZDogdGhpcy5wcmVzc2VkIH0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgLy8gQnkgZGVzaWduLCBhbGwgdG9nZ2xlIGJ1dHRvbnMgc2hvdWxkIGhhdmUgYSBgYmFzaWNgIHN0YXR1cyB3aGVuIG5vdCBwcmVzc2VkLlxuICAgICAgICByZXR1cm4gIXRoaXMucHJlc3NlZDtcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXNzZWQgJiYgKHRoaXMuc3RhdHVzID09PSAnYmFzaWMnIHx8IHRoaXMuc3RhdHVzID09PSAncHJpbWFyeScpO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlc3NlZCAmJiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlc3NlZCAmJiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJlc3NlZCAmJiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcmVzc2VkICYmIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXNzZWQgJiYgdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMucHJlc3NlZCA9ICF0aGlzLnByZXNzZWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKi9cbiAgICBfdXBkYXRlUHJlc3NlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLnByZXNzZWQgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG59XG5OYkJ1dHRvblRvZ2dsZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnYnV0dG9uW25iQnV0dG9uVG9nZ2xlXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJCdXR0b24sIHVzZUV4aXN0aW5nOiBOYkJ1dHRvblRvZ2dsZURpcmVjdGl2ZSB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0QXM6ICduYkJ1dHRvblRvZ2dsZScsXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQnV0dG9uVG9nZ2xlRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iQnV0dG9uVG9nZ2xlRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGFwcGVhcmFuY2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHZhbHVlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBwcmVzc2VkOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1wcmVzc2VkJyxdIH1dLFxuICAgIHByZXNzZWRDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBiYXNpYzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWJhc2ljJyxdIH1dLFxuICAgIHByaW1hcnk6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1wcmltYXJ5JyxdIH1dLFxuICAgIHN1Y2Nlc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyxdIH1dLFxuICAgIGluZm86IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1pbmZvJyxdIH1dLFxuICAgIHdhcm5pbmc6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy13YXJuaW5nJyxdIH1dLFxuICAgIGRhbmdlcjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWRhbmdlcicsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIGA8bmItYnV0dG9uLWdyb3VwPmAgdmlzdWFsbHkgZ3JvdXBzIGJ1dHRvbnMgdG9nZXRoZXIgYW5kIGFsbG93IHRvIGNvbnRyb2wgYnV0dG9ucyBwcm9wZXJ0aWVzIGFuZCB0aGUgc3RhdGUgYXMgYVxuICogZ3JvdXAuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBHcm91cCBTaG93Y2FzZSwgYnV0dG9uLWdyb3VwL2J1dHRvbi1ncm91cC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJCdXR0b25Hcm91cE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJCdXR0b25Hcm91cE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIFlvdSBjYW4gdXNlIGA8bmItYnV0dG9uLWdyb3VwPmAgdG8gZ3JvdXAgYSBzZXJpZXMgb2YgYFtuYkJ1dHRvbl1gIG9yIGBbbmJCdXR0b25Ub2dnbGVdYCBjb21wb25lbnRzLlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gYW5kIEJ1dHRvbiBUb2dnbGUgR3JvdXBzLCBidXR0b24tZ3JvdXAvYnV0dG9uLWFuZC1idXR0b24tdG9nZ2xlLWdyb3Vwcy5jb21wb25lbnQpXG4gKlxuICogRm9yIGEgZ3JvdXAgb2YgbXVsdGlwbGUgYFtuYkJ1dHRvblRvZ2dsZV1gIHlvdSBhbHNvIGNhbiBjb250cm9sIG11bHRpLXNlbGVjdGlvbiBiZWhhdmlvci4gQnkgZGVmYXVsdCwgdGhlIGdyb3VwXG4gKiBjb21wb25lbnQgYWxsb3dzIG9ubHkgb25lIHByZXNzZWQgYnV0dG9uIHRvZ2dsZSBhdCBhIHRpbWUgKHNpbWlsYXIgdG8gdGhlIHJhZGlvIGdyb3VwKS4gVG8gYmUgYWJsZSB0byBrZWVwIG11bHRpcGxlXG4gKiB0b2dnbGVzIHByZXNzZWQsIHlvdSBuZWVkIHRvIGFkZCBgbXVsdGlwbGVgIGF0dHJpYnV0ZXMgdG8gdGhlIGA8bmItYnV0dG9uLXRvZ2dsZT5gLlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gR3JvdXAgTXVsdGlwbGUsIGJ1dHRvbi1ncm91cC9idXR0b24tZ3JvdXAtbXVsdGlwbGUuY29tcG9uZW50KVxuICpcbiAqIFRvIGtub3cgd2hpY2ggYnV0dG9ucyBhcmUgY3VycmVudGx5IHByZXNzZWQgbGlzdGVuIHRvIGAodmFsdWVDaGFuZ2UpYCBvbiB0aGUgYG5iLWJ1dHRvbi1ncm91cGAuIEV2ZW50XG4gKiBjb250YWlucyBhbiBhcnJheSBvZiB2YWx1ZXMgb2YgY3VycmVudGx5IHByZXNzZWQgYnV0dG9uIHRvZ2dsZXMuIFlvdSBjYW4gYXNzaWduIGEgdmFsdWUgdG8gdGhlXG4gKiBgW25iQnV0dG9uVG9nZ2xlXWAgdmlhIHRoZSBgdmFsdWVgIGlucHV0LlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gR3JvdXAgVmFsdWUgQ2hhbmdlLCBidXR0b24tZ3JvdXAvYnV0dG9uLWdyb3VwLXZhbHVlLWNoYW5nZS5jb21wb25lbnQpXG4gKlxuICogVG8gZGlzYWJsZSBhIGdyb3VwIG9mIGJ1dHRvbnMsIGFkZCBhIGBkaXNhYmxlZGAgYXR0cmlidXRlIHRvIHRoZSBgPG5iLWJ1dHRvbi1ncm91cD5gLlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gR3JvdXAgRGlzYWJsZWQsIGJ1dHRvbi1ncm91cC9idXR0b24tZ3JvdXAtZGlzYWJsZWQuY29tcG9uZW50KVxuICpcbiAqIFRoZSBncm91cCBjb21wb25lbnQgY29udHJvbHMgYWxsIHZpc3VhbCBhdHRyaWJ1dGVzIG9mIGJ1dHRvbnMgc3VjaCBhcyBgYXBwZWFyYW5jZWAsIGBzdGF0dXNgLCBgc2l6ZWAsIGBzaGFwZWAuXG4gKiBZb3UgY2FuIGNoYW5nZSBpdCB2aWEgdGhlIGFwcHJvcHJpYXRlIGF0dHJpYnV0ZXMuXG4gKlxuICogQnV0dG9uIGdyb3VwIGFwcGVhcmFuY2VzOlxuICogQHN0YWNrZWQtZXhhbXBsZShCdXR0b24gR3JvdXAgQXBwZWFyYW5jZXMsIGJ1dHRvbi1ncm91cC9idXR0b24tZ3JvdXAtYXBwZWFyYW5jZXMuY29tcG9uZW50KVxuICpcbiAqIEJ1dHRvbiBncm91cCBzdGF0dXNlczpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQnV0dG9uIEdyb3VwIFN0YXR1c2VzLCBidXR0b24tZ3JvdXAvYnV0dG9uLWdyb3VwLXN0YXR1c2VzLmNvbXBvbmVudClcbiAqXG4gKiBCdXR0b24gZ3JvdXAgc2l6ZXM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKEJ1dHRvbiBHcm91cCBTaXplcywgYnV0dG9uLWdyb3VwL2J1dHRvbi1ncm91cC1zaXplcy5jb21wb25lbnQpXG4gKlxuICogQnV0dG9ucyBncm91cCBzaGFwZXM6XG4gKiBAYWRkaXRpb25hbC1leGFtcGxlKEJ1dHRvbiBHcm91cCBTaGFwZXMsIGJ1dHRvbi1ncm91cC9idXR0b24tZ3JvdXAtc2hhcGVzLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC1idXR0b24tYmFzaWMtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtYnV0dG9uLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtYnV0dG9uLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtYnV0dG9uLWluZm8tdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtYnV0dG9uLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtYnV0dG9uLWRhbmdlci10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC1idXR0b24tY29udHJvbC10ZXh0LWNvbG9yOlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC1iYXNpYy1kaXZpZGVyLWNvbG9yOlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC1wcmltYXJ5LWRpdmlkZXItY29sb3I6XG4gKiBidXR0b24tZ3JvdXAtZmlsbGVkLXN1Y2Nlc3MtZGl2aWRlci1jb2xvcjpcbiAqIGJ1dHRvbi1ncm91cC1maWxsZWQtaW5mby1kaXZpZGVyLWNvbG9yOlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC13YXJuaW5nLWRpdmlkZXItY29sb3I6XG4gKiBidXR0b24tZ3JvdXAtZmlsbGVkLWRhbmdlci1kaXZpZGVyLWNvbG9yOlxuICogYnV0dG9uLWdyb3VwLWZpbGxlZC1jb250cm9sLWRpdmlkZXItY29sb3I6XG4gKiBidXR0b24tZ3JvdXAtZ2hvc3QtZGl2aWRlci1jb2xvcjpcbiAqKi9cbmNsYXNzIE5iQnV0dG9uR3JvdXBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGNkLCBzdGF0dXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5sYXN0RW1pdHRlZFZhbHVlID0gW107XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmJ1dHRvbnNDaGFuZ2UkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBncm91cCBzaXplLCBhdmFpbGFibGUgc2l6ZXM6XG4gICAgICAgICAqIGB0aW55YCwgYHNtYWxsYCwgYG1lZGl1bWAsIGBsYXJnZWAsIGBnaWFudGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICAvKipcbiAgICAgICAgICogQnV0dG9uIGdyb3VwIHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBncm91cCBzaGFwZXM6IGByZWN0YW5nbGVgLCBgcm91bmRgLCBgc2VtaS1yb3VuZGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hhcGUgPSAncmVjdGFuZ2xlJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEJ1dHRvbiBncm91cCBhcHBlYXJhbmNlOiBgZmlsbGVkYCwgYG91dGxpbmVgLCBgZ2hvc3RgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZmlsbGVkJztcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gYG5iQnV0dG9uVG9nZ2xlYCBwcmVzc2VkIHN0YXRlIGNoYW5nZS4gYCRldmVudGAgY29udGFpbnMgYW4gYXJyYXkgb2YgdGhlIGN1cnJlbnRseSBwcmVzc2VkIGJ1dHRvblxuICAgICAgICAgKiB0b2dnbGVzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5yb2xlID0gJ2dyb3VwJztcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5kaXNhYmxlZCAhPT0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSAhdGhpcy5kaXNhYmxlZDtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbGxvd3MgdG8ga2VlcCBtdWx0aXBsZSBidXR0b24gdG9nZ2xlcyBwcmVzc2VkLiBPZmYgYnkgZGVmYXVsdC5cbiAgICAgKi9cbiAgICBnZXQgbXVsdGlwbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdWx0aXBsZTtcbiAgICB9XG4gICAgc2V0IG11bHRpcGxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX211bHRpcGxlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBgZmlsbGVkYCBhcHBlYXJhbmNlXG4gICAgICovXG4gICAgZ2V0IGZpbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2ZpbGxlZCc7XG4gICAgfVxuICAgIHNldCBmaWxsZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdmaWxsZWQnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYG91dGxpbmVgIGFwcGVhcmFuY2VcbiAgICAgKi9cbiAgICBnZXQgb3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ291dGxpbmUnO1xuICAgIH1cbiAgICBzZXQgb3V0bGluZSh2YWx1ZSkge1xuICAgICAgICBpZiAoY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ291dGxpbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgYGdob3N0YCBhcHBlYXJhbmNlXG4gICAgICovXG4gICAgZ2V0IGdob3N0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlYXJhbmNlID09PSAnZ2hvc3QnO1xuICAgIH1cbiAgICBzZXQgZ2hvc3QodmFsdWUpIHtcbiAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdnaG9zdCc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKHsgc2l6ZSwgc3RhdHVzLCBzaGFwZSwgbXVsdGlwbGUsIGZpbGxlZCwgb3V0bGluZSwgZ2hvc3QsIGRpc2FibGVkIH0pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBpZiAoc2l6ZSB8fCBzdGF0dXMgfHwgc2hhcGUgfHwgbXVsdGlwbGUgfHwgZmlsbGVkIHx8IG91dGxpbmUgfHwgZ2hvc3QgfHwgZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3luY0J1dHRvbnNQcm9wZXJ0aWVzKCgoX2EgPSB0aGlzLmJ1dHRvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0FycmF5KCkpIHx8IFtdKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuYnV0dG9uc0NoYW5nZSRcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGJ1dHRvbnMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubGlzdGVuQnV0dG9uUHJlc3NlZFN0YXRlKGJ1dHRvbnMpO1xuICAgICAgICAgICAgdGhpcy5zeW5jQnV0dG9uc1Byb3BlcnRpZXMoYnV0dG9ucyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmJ1dHRvbnMuY2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgIC8vIGBidXR0b25zLmNoYW5nZXNgIGVtaXQgZHVyaW5nIGNoYW5nZSBkZXRlY3Rpb24gcnVuIGFmdGVyIHByb2plY3RlZCBjb250ZW50IGFscmVhZHkgd2FzIGluaXRpYWxpemVkLlxuICAgICAgICAvLyBTbyBhdCB0aGlzIHRpbWUsIGl0J3MgdG9vIGxhdGUgdG8gdXBkYXRlIHByb2plY3RlZCBidXR0b25zIHByb3BlcnRpZXMgYXMgdXBkYXRpbmcgYmluZGluZ3MgYWZ0ZXJcbiAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24gZG9lc24ndCBtYWtlIHNlbnNlLiBDaGFuZ2VzIHdvbid0IGJlIHBpY2tlZCB1cCBhbmQgc2hvdWxkIGNhdXNlIGFuIFwiZXhwcmVzc2lvbiBjaGFuZ2VkXCIgZXJyb3IuXG4gICAgICAgIC8vIEluc3RlYWQsIHdlIHdyYXAgdGhlIG5ldyBidXR0b25zIGxpc3QgaW50byBhIHByb21pc2UgdG8gZGVmZXIgdXBkYXRlIHRvIHRoZSBmb2xsb3dpbmcgbWljcm90YXNrIGFuZCBhbHNvIHRvXG4gICAgICAgIC8vIHRyaWdnZXIgY2hhbmdlIGRldGVjdGlvbiBvbmUgbW9yZSB0aW1lLlxuICAgICAgICBzd2l0Y2hNYXAoKGJ1dHRvbnMpID0+IGZyb20oUHJvbWlzZS5yZXNvbHZlKGJ1dHRvbnMudG9BcnJheSgpKSkpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHRoaXMuYnV0dG9uc0NoYW5nZSQpO1xuICAgICAgICB0aGlzLmJ1dHRvbnNDaGFuZ2UkLm5leHQodGhpcy5idXR0b25zLnRvQXJyYXkoKSk7XG4gICAgfVxuICAgIGxpc3RlbkJ1dHRvblByZXNzZWRTdGF0ZShidXR0b25zKSB7XG4gICAgICAgIGNvbnN0IHRvZ2dsZUJ1dHRvbnMgPSBidXR0b25zLmZpbHRlcigoYnV0dG9uKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gYnV0dG9uIGluc3RhbmNlb2YgTmJCdXR0b25Ub2dnbGVEaXJlY3RpdmU7XG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXRvZ2dsZUJ1dHRvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgYnV0dG9uc1ByZXNzZWRDaGFuZ2UkID0gdG9nZ2xlQnV0dG9uc1xuICAgICAgICAgICAgLm1hcCgoYnV0dG9uKSA9PiBidXR0b24ucHJlc3NlZENoYW5nZSQpO1xuICAgICAgICBtZXJnZSguLi5idXR0b25zUHJlc3NlZENoYW5nZSQpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHsgcHJlc3NlZCB9KSA9PiAhdGhpcy5tdWx0aXBsZSAmJiBwcmVzc2VkKSwgdGFrZVVudGlsKG1lcmdlKHRoaXMuYnV0dG9uc0NoYW5nZSQsIHRoaXMuZGVzdHJveSQpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHsgc291cmNlIH0pID0+IHtcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbnNcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChidXR0b24pID0+IGJ1dHRvbiAhPT0gc291cmNlKVxuICAgICAgICAgICAgICAgIC5mb3JFYWNoKChidXR0b24pID0+IGJ1dHRvbi5fdXBkYXRlUHJlc3NlZChmYWxzZSkpO1xuICAgICAgICB9KTtcbiAgICAgICAgbWVyZ2UoLi4uYnV0dG9uc1ByZXNzZWRDaGFuZ2UkKVxuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgIC8vIFVzZSBzdGFydFdpdGggdG8gZW1pdCBpZiBzb21lIGJ1dHRvbnMgYXJlIGluaXRpYWxseSBwcmVzc2VkLlxuICAgICAgICBzdGFydFdpdGgoJycpLCBcbiAgICAgICAgLy8gVXNlIGRlYm91bmNlIHRvIGVtaXQgY2hhbmdlIG9uY2Ugd2hlbiBwcmVzc2VkIHN0YXRlIGNoYW5nZSBpbiBtdWx0aXBsZSBidXR0b24gdG9nZ2xlcy5cbiAgICAgICAgZGVib3VuY2VUaW1lKDApLCB0YWtlVW50aWwobWVyZ2UodGhpcy5idXR0b25zQ2hhbmdlJCwgdGhpcy5kZXN0cm95JCkpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmVtaXRDdXJyZW50VmFsdWUodG9nZ2xlQnV0dG9ucykpO1xuICAgIH1cbiAgICBzeW5jQnV0dG9uc1Byb3BlcnRpZXMoYnV0dG9ucykge1xuICAgICAgICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4ge1xuICAgICAgICAgICAgYnV0dG9uLnVwZGF0ZVByb3BlcnRpZXMoe1xuICAgICAgICAgICAgICAgIGFwcGVhcmFuY2U6IHRoaXMuYXBwZWFyYW5jZSxcbiAgICAgICAgICAgICAgICBzaXplOiB0aGlzLnNpemUsXG4gICAgICAgICAgICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBzaGFwZTogdGhpcy5zaGFwZSxcbiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgZW1pdEN1cnJlbnRWYWx1ZSh0b2dnbGVCdXR0b25zKSB7XG4gICAgICAgIGNvbnN0IHByZXNzZWRUb2dnbGVWYWx1ZXMgPSB0b2dnbGVCdXR0b25zXG4gICAgICAgICAgICAuZmlsdGVyKChiKSA9PiBiLnByZXNzZWQgJiYgdHlwZW9mIGIudmFsdWUgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgLm1hcCgoYikgPT4gYi52YWx1ZSk7XG4gICAgICAgIC8vIFByZXZlbnQgbXVsdGlwbGUgZW1pc3Npb25zIG9mIGVtcHR5IHZhbHVlLlxuICAgICAgICBpZiAocHJlc3NlZFRvZ2dsZVZhbHVlcy5sZW5ndGggPT09IDAgJiYgdGhpcy5sYXN0RW1pdHRlZFZhbHVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChwcmVzc2VkVG9nZ2xlVmFsdWVzKTtcbiAgICAgICAgdGhpcy5sYXN0RW1pdHRlZFZhbHVlID0gcHJlc3NlZFRvZ2dsZVZhbHVlcztcbiAgICB9XG59XG5OYkJ1dHRvbkdyb3VwQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1idXR0b24tZ3JvdXAnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQnV0dG9uR3JvdXBDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYkJ1dHRvbkdyb3VwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGJ1dHRvbnM6IFt7IHR5cGU6IENvbnRlbnRDaGlsZHJlbiwgYXJnczogW05iQnV0dG9uLF0gfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhdHVzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaGFwZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYXBwZWFyYW5jZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG11bHRpcGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBmaWxsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG91dGxpbmU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGdob3N0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZUNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHJvbGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIucm9sZScsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iQnV0dG9uR3JvdXBNb2R1bGUge1xufVxuTmJCdXR0b25Hcm91cE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJCdXR0b25Hcm91cENvbXBvbmVudCwgTmJCdXR0b25Ub2dnbGVEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYkJ1dHRvbkdyb3VwQ29tcG9uZW50LCBOYkJ1dHRvblRvZ2dsZURpcmVjdGl2ZV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBMaXN0IGlzIGEgY29udGFpbmVyIGNvbXBvbmVudCB0aGF0IHdyYXBzIGBuYi1saXN0LWl0ZW1gIGNvbXBvbmVudC5cbiAqXG4gKiBCYXNpYyBleGFtcGxlOlxuICogQHN0YWNrZWQtZXhhbXBsZShTaW1wbGUgbGlzdCwgbGlzdC9zaW1wbGUtbGlzdC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogYG5iLWxpc3QtaXRlbWAgYWNjZXB0cyBhcmJpdHJhcnkgY29udGVudCwgc28geW91IGNhbiBjcmVhdGUgYSBsaXN0IG9mIGFueSBjb21wb25lbnRzLlxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iTGlzdE1vZHVsZWAgdG8geW91ciBmZWF0dXJlIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJMaXN0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBMaXN0IG9mIHVzZXJzOlxuICogQHN0YWNrZWQtZXhhbXBsZShVc2VycyBsaXN0LCBsaXN0L3VzZXJzLWxpc3Qtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBsaXN0LWl0ZW0tZGl2aWRlci1jb2xvcjpcbiAqIGxpc3QtaXRlbS1kaXZpZGVyLXN0eWxlOlxuICogbGlzdC1pdGVtLWRpdmlkZXItd2lkdGg6XG4gKiBsaXN0LWl0ZW0tcGFkZGluZzpcbiAqIGxpc3QtaXRlbS10ZXh0LWNvbG9yOlxuICogbGlzdC1pdGVtLWZvbnQtZmFtaWx5OlxuICogbGlzdC1pdGVtLWZvbnQtc2l6ZTpcbiAqIGxpc3QtaXRlbS1mb250LXdlaWdodDpcbiAqIGxpc3QtaXRlbS1saW5lLWhlaWdodDpcbiAqL1xuY2xhc3MgTmJMaXN0Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvbGUgYXR0cmlidXRlIHZhbHVlXG4gICAgICAgICAqXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJvbGUgPSAnbGlzdCc7XG4gICAgfVxufVxuTmJMaXN0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1saXN0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYDxuZy1jb250ZW50IHNlbGVjdD1cIm5iLWxpc3QtaXRlbVwiPjwvbmctY29udGVudD5gLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtmbGV4OjEgMSBhdXRvO292ZXJmbG93OmF1dG99XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iTGlzdENvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICByb2xlOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIucm9sZScsXSB9XVxufTtcbi8qKlxuICogTGlzdCBpdGVtIGNvbXBvbmVudCBpcyBhIGdyb3VwaW5nIGNvbXBvbmVudCB0aGF0IGFjY2VwdHMgYXJiaXRyYXJ5IGNvbnRlbnQuXG4gKiBJdCBzaG91bGQgYmUgZGlyZWN0IGNoaWxkIG9mIGBuYi1saXN0YCBjb21wb25ldC5cbiAqL1xuY2xhc3MgTmJMaXN0SXRlbUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb2xlIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAgICAgKlxuICAgICAgICAgKiBAdHlwZSB7c3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yb2xlID0gJ2xpc3RpdGVtJztcbiAgICB9XG59XG5OYkxpc3RJdGVtQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1saXN0LWl0ZW0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PmAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO2ZsZXgtc2hyaW5rOjB9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iTGlzdEl0ZW1Db21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgcm9sZTogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLnJvbGUnLF0gfV1cbn07XG5cbi8qKlxuICogTGlzdCBwYWdlciBkaXJlY3RpdmVcbiAqXG4gKiBEaXJlY3RpdmUgYWxsb3dzIHlvdSB0byBkZXRlcm1pbmUgcGFnZSBvZiBjdXJyZW50bHkgdmlld2luZyBpdGVtcy5cbiAqXG4gKi9cbmNsYXNzIE5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBQYWdlIHRvIHN0YXJ0IGNvdW50aW5nIHdpdGguXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0UGFnZSA9IDE7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIGFub3RoZXIgcGFnZSBiZWNvbWUgdmlzaWJsZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFnZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihlbnRyaWVzID0+IHRoaXMuY2hlY2tGb3JQYWdlQ2hhbmdlKGVudHJpZXMpLCB7IHRocmVzaG9sZDogMC41IH0pO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmxpc3RJdGVtcyAmJiB0aGlzLmxpc3RJdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZUl0ZW1zKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5saXN0SXRlbXMuY2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLm9ic2VydmVJdGVtcygpKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIuZGlzY29ubmVjdCAmJiB0aGlzLm9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICB9XG4gICAgb2JzZXJ2ZUl0ZW1zKCkge1xuICAgICAgICB0aGlzLmxpc3RJdGVtcy5mb3JFYWNoKGkgPT4gdGhpcy5vYnNlcnZlci5vYnNlcnZlKGkubmF0aXZlRWxlbWVudCkpO1xuICAgIH1cbiAgICBjaGVja0ZvclBhZ2VDaGFuZ2UoZW50cmllcykge1xuICAgICAgICBjb25zdCBtb3N0VmlzaWJsZVBhZ2UgPSB0aGlzLmZpbmRNb3N0VmlzaWJsZVBhZ2UoZW50cmllcyk7XG4gICAgICAgIGlmIChtb3N0VmlzaWJsZVBhZ2UgJiYgdGhpcy5jdXJyZW50UGFnZSAhPT0gbW9zdFZpc2libGVQYWdlKSB7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gbW9zdFZpc2libGVQYWdlO1xuICAgICAgICAgICAgdGhpcy5wYWdlQ2hhbmdlLmVtaXQodGhpcy5jdXJyZW50UGFnZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmluZE1vc3RWaXNpYmxlUGFnZShlbnRyaWVzKSB7XG4gICAgICAgIGNvbnN0IGludGVyc2VjdGlvblJhdGlvQnlQYWdlID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIGVudHJpZXMpIHtcbiAgICAgICAgICAgIGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA8IDAuNSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZWxlbWVudEluZGV4ID0gdGhpcy5lbGVtZW50SW5kZXgoZW50cnkudGFyZ2V0KTtcbiAgICAgICAgICAgIGlmIChlbGVtZW50SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYWdlID0gdGhpcy5zdGFydFBhZ2UgKyBNYXRoLmZsb29yKGVsZW1lbnRJbmRleCAvIHRoaXMucGFnZVNpemUpO1xuICAgICAgICAgICAgbGV0IHJhdGlvID0gZW50cnkuaW50ZXJzZWN0aW9uUmF0aW87XG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2UuaGFzKHBhZ2UpKSB7XG4gICAgICAgICAgICAgICAgcmF0aW8gKz0gaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2UuZ2V0KHBhZ2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW50ZXJzZWN0aW9uUmF0aW9CeVBhZ2Uuc2V0KHBhZ2UsIHJhdGlvKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWF4UmF0aW8gPSAwO1xuICAgICAgICBsZXQgbW9zdFZpc2libGVQYWdlO1xuICAgICAgICBpbnRlcnNlY3Rpb25SYXRpb0J5UGFnZS5mb3JFYWNoKChyYXRpbywgcGFnZSkgPT4ge1xuICAgICAgICAgICAgaWYgKHJhdGlvID4gbWF4UmF0aW8pIHtcbiAgICAgICAgICAgICAgICBtYXhSYXRpbyA9IHJhdGlvO1xuICAgICAgICAgICAgICAgIG1vc3RWaXNpYmxlUGFnZSA9IHBhZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbW9zdFZpc2libGVQYWdlO1xuICAgIH1cbiAgICBlbGVtZW50SW5kZXgoZWxlbWVudCkge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5wYXJlbnRFbGVtZW50ICYmIGVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlblxuICAgICAgICAgICAgPyBBcnJheS5mcm9tKGVsZW1lbnQucGFyZW50RWxlbWVudC5jaGlsZHJlbikuaW5kZXhPZihlbGVtZW50KVxuICAgICAgICAgICAgOiAtMTtcbiAgICB9XG59XG5OYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iTGlzdFBhZ2VUcmFja2VyXScsXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iTGlzdFBhZ2VUcmFja2VyRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW107XG5OYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBwYWdlU2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RhcnRQYWdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBwYWdlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgbGlzdEl0ZW1zOiBbeyB0eXBlOiBDb250ZW50Q2hpbGRyZW4sIGFyZ3M6IFtOYkxpc3RJdGVtQ29tcG9uZW50LCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSxdIH1dXG59O1xuXG5jbGFzcyBOYlNjcm9sbGFibGVDb250YWluZXJEaW1lbnRpb25zIHtcbn1cbi8qKlxuICogSW5maW5pdGUgTGlzdCBEaXJlY3RpdmVcbiAqXG4gKiBgYGBodG1sXG4gKiAgPG5iLWxpc3QgbmJJbmZpbml0ZUxpc3QgW3RocmVzaG9sZF09XCI1MDBcIiAoYm90dG9tVGhyZXNob2xkKT1cImxvYWROZXh0KClcIj5cbiAqICAgIDxuYi1saXN0LWl0ZW0gKm5nRm9yPVwibGV0IGl0ZW0gb2YgaXRlbXNcIj48L25iLWxpc3QtaXRlbT5cbiAqICA8L25iLWxpc3Q+XG4gKiBgYGBcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNpbXBsZSBpbmZpbml0ZSBsaXN0LCBpbmZpbml0ZS1saXN0L2luZmluaXRlLWxpc3Qtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIERpcmVjdGl2ZSB3aWxsIG5vdGlmeSB3aGVuIGxpc3Qgc2Nyb2xsZWQgdXAgb3IgZG93biB0byBhIGdpdmVuIHRocmVzaG9sZC5cbiAqIEJ5IGRlZmF1bHQgaXQgbGlzdGVuIHRvIHNjcm9sbCBvZiBsaXN0IG9uIHdoaWNoIGFwcGxpZWQsIGJ1dCBhbHNvIGNhbiBiZSBzZXQgdG8gbGlzdGVuIHRvIHdpbmRvdyBzY3JvbGwuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTY3JvbGwgbW9kZXMsIGluZmluaXRlLWxpc3QvaW5maW5pdGUtbGlzdC1zY3JvbGwtbW9kZXMuY29tcG9uZW50KVxuICpcbiAqIFRvIGltcHJvdmUgVVggb2YgaW5maW5pdGUgbGlzdHMsIGl0J3MgYmV0dGVyIHRvIGtlZXAgY3VycmVudCBwYWdlIGluIHVybCxcbiAqIHNvIHVzZXIgYWJsZSB0byByZXR1cm4gdG8gdGhlIGxhc3Qgdmlld2VkIHBhZ2Ugb3IgdG8gc2hhcmUgYSBsaW5rIHRvIHRoaXMgcGFnZS5cbiAqIGBuYkxpc3RQYWdlVHJhY2tlcmAgZGlyZWN0aXZlIHdpbGwgaGVscCB5b3UgdG8ga25vdywgd2hhdCBwYWdlIHVzZXIgY3VycmVudGx5IHZpZXdpbmcuXG4gKiBKdXN0IHB1dCBpdCBvbiBhIGxpc3QsIHNldCBwYWdlIHNpemUgYW5kIGl0IHdpbGwgY2FsY3VsYXRlIHBhZ2UgdGhhdCBjdXJyZW50bHkgaW4gdmlld3BvcnQuXG4gKiBZb3UgY2FuIFtvcGVuIHRoZSBleGFtcGxlXShleGFtcGxlL2luZmluaXRlLWxpc3QvaW5maW5pdGUtbmV3cy1saXN0LmNvbXBvbmVudClcbiAqIGluIGEgbmV3IHRhYiB0byBjaGVjayBvdXQgdGhpcyBmZWF0dXJlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoSW5maW5pdGUgbGlzdCB3aXRoIHBhZ2VyLCBpbmZpbml0ZS1saXN0L2luZmluaXRlLW5ld3MtbGlzdC5jb21wb25lbnQpXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShJbmZpbml0ZSBsaXN0IHdpdGggcGxhY2Vob2xkZXJzIGF0IHRoZSB0b3AsIGluZmluaXRlLWxpc3QvaW5maW5pdGUtbGlzdC1wbGFjZWhvbGRlcnMuY29tcG9uZW50KVxuICpcbiAqL1xuY2xhc3MgTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGVsZW1lbnRSZWYsIHNjcm9sbFNlcnZpY2UsIGRpbWVuc2lvbnNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZWxlbWVudFJlZiA9IGVsZW1lbnRSZWY7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZSA9IHNjcm9sbFNlcnZpY2U7XG4gICAgICAgIHRoaXMuZGltZW5zaW9uc1NlcnZpY2UgPSBkaW1lbnNpb25zU2VydmljZTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMud2luZG93U2Nyb2xsID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIGRpc3RhbmNlIGJldHdlZW4gbGlzdCBib3R0b20gYW5kIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uIGlzIGxlc3MgdGhhbiB0aHJlc2hvbGQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJvdHRvbVRocmVzaG9sZCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBFbWl0cyB3aGVuIGRpc3RhbmNlIGJldHdlZW4gbGlzdCB0b3AgYW5kIGN1cnJlbnQgc2Nyb2xsIHBvc2l0aW9uIGlzIGxlc3MgdGhhbiB0aHJlc2hvbGQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvcFRocmVzaG9sZCA9IG5ldyBFdmVudEVtaXR0ZXIodHJ1ZSk7XG4gICAgfVxuICAgIGdldCBlbGVtZW50U2Nyb2xsKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMud2luZG93U2Nyb2xsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCeSBkZWZhdWx0IGNvbXBvbmVudCBvYnNlcnZlcyBsaXN0IHNjcm9sbCBwb3NpdGlvbi5cbiAgICAgKiBJZiBzZXQgdG8gYHRydWVgLCBjb21wb25lbnQgd2lsbCBvYnNlcnZlIHBvc2l0aW9uIG9mIHBhZ2Ugc2Nyb2xsIGluc3RlYWQuXG4gICAgICovXG4gICAgc2V0IGxpc3RlbldpbmRvd1Njcm9sbCh2YWx1ZSkge1xuICAgICAgICB0aGlzLndpbmRvd1Njcm9sbCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIG9uRWxlbWVudFNjcm9sbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFNjcm9sbCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja1Bvc2l0aW9uKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU2VydmljZS5vblNjcm9sbCgpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy53aW5kb3dTY3JvbGwpLCBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5nZXRDb250YWluZXJEaW1lbnNpb25zKCkpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKGRpbWVudGlvbnMgPT4gdGhpcy5jaGVja1Bvc2l0aW9uKGRpbWVudGlvbnMpKTtcbiAgICAgICAgdGhpcy5saXN0SXRlbXMuY2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUoXG4gICAgICAgIC8vIEZvciBzb21lIHJlYXNvbiwgY2hhbmdlcyBhcmUgZW1pdHRlZCBiZWZvcmUgbGlzdCBpdGVtIHJlbW92ZWQgZnJvbSBkb20sXG4gICAgICAgIC8vIHNvIGRpbWVuc2lvbnMgd2lsbCBiZSBpbmNvcnJlY3QuXG4gICAgICAgIC8vIENoZWNrIGV2ZXJ5IDUwbXMgZm9yIGEgc2Vjb25kIGlmIGRvbSBhbmQgcXVlcnkgYXJlIGluIHN5bmMuXG4gICAgICAgIC8vIE9uY2UgdGhleSBzeW5jaHJvbml6ZWQsIHdlIGNhbiBnZXQgcHJvcGVyIGRpbWVuc2lvbnMuXG4gICAgICAgIHN3aXRjaE1hcCgoKSA9PiBpbnRlcnZhbCg1MCkucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pblN5bmNXaXRoRG9tKCkpLCB0YWtlKDEpLCB0YWtlVW50aWwodGltZXIoMTAwMCkpKSksIHN3aXRjaE1hcCgoKSA9PiB0aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoZGltZW50aW9ucyA9PiB0aGlzLmNoZWNrUG9zaXRpb24oZGltZW50aW9ucykpO1xuICAgICAgICB0aGlzLmdldENvbnRhaW5lckRpbWVuc2lvbnMoKS5zdWJzY3JpYmUoZGltZW50aW9ucyA9PiB0aGlzLmNoZWNrUG9zaXRpb24oZGltZW50aW9ucykpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgY2hlY2tQb3NpdGlvbih7IHNjcm9sbEhlaWdodCwgc2Nyb2xsVG9wLCBjbGllbnRIZWlnaHQgfSkge1xuICAgICAgICBjb25zdCBpbml0aWFsQ2hlY2sgPSB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbiA9PSBudWxsO1xuICAgICAgICBjb25zdCBtYW51YWxDaGVjayA9IHRoaXMubGFzdFNjcm9sbFBvc2l0aW9uID09PSBzY3JvbGxUb3A7XG4gICAgICAgIGNvbnN0IHNjcm9sbFVwID0gc2Nyb2xsVG9wIDwgdGhpcy5sYXN0U2Nyb2xsUG9zaXRpb247XG4gICAgICAgIGNvbnN0IHNjcm9sbERvd24gPSBzY3JvbGxUb3AgPiB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbjtcbiAgICAgICAgY29uc3QgZGlzdGFuY2VUb0JvdHRvbSA9IHNjcm9sbEhlaWdodCAtIHNjcm9sbFRvcCAtIGNsaWVudEhlaWdodDtcbiAgICAgICAgaWYgKChpbml0aWFsQ2hlY2sgfHwgbWFudWFsQ2hlY2sgfHwgc2Nyb2xsRG93bikgJiYgZGlzdGFuY2VUb0JvdHRvbSA8PSB0aGlzLnRocmVzaG9sZCkge1xuICAgICAgICAgICAgdGhpcy5ib3R0b21UaHJlc2hvbGQuZW1pdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICgoaW5pdGlhbENoZWNrIHx8IHNjcm9sbFVwKSAmJiBzY3JvbGxUb3AgPD0gdGhpcy50aHJlc2hvbGQpIHtcbiAgICAgICAgICAgIHRoaXMudG9wVGhyZXNob2xkLmVtaXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RTY3JvbGxQb3NpdGlvbiA9IHNjcm9sbFRvcDtcbiAgICB9XG4gICAgZ2V0Q29udGFpbmVyRGltZW5zaW9ucygpIHtcbiAgICAgICAgaWYgKHRoaXMuZWxlbWVudFNjcm9sbCkge1xuICAgICAgICAgICAgY29uc3QgeyBzY3JvbGxUb3AsIHNjcm9sbEhlaWdodCwgY2xpZW50SGVpZ2h0IH0gPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiBvZih7IHNjcm9sbFRvcCwgc2Nyb2xsSGVpZ2h0LCBjbGllbnRIZWlnaHQgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZvcmtKb2luKFt0aGlzLnNjcm9sbFNlcnZpY2UuZ2V0UG9zaXRpb24oKSwgdGhpcy5kaW1lbnNpb25zU2VydmljZS5nZXREaW1lbnNpb25zKCldKVxuICAgICAgICAgICAgLnBpcGUobWFwKChbc2Nyb2xsUG9zaXRpb24sIGRpbWVuc2lvbnNdKSA9PiAoe1xuICAgICAgICAgICAgc2Nyb2xsVG9wOiBzY3JvbGxQb3NpdGlvbi55LFxuICAgICAgICAgICAgc2Nyb2xsSGVpZ2h0OiBkaW1lbnNpb25zLnNjcm9sbEhlaWdodCxcbiAgICAgICAgICAgIGNsaWVudEhlaWdodDogZGltZW5zaW9ucy5jbGllbnRIZWlnaHQsXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIGluU3luY1dpdGhEb20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jaGlsZHJlbi5sZW5ndGggPT09IHRoaXMubGlzdEl0ZW1zLmxlbmd0aDtcbiAgICB9XG59XG5OYkluZmluaXRlTGlzdERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iSW5maW5pdGVMaXN0XScsXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmJMYXlvdXRTY3JvbGxTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYkxheW91dFJ1bGVyU2VydmljZSB9XG5dO1xuTmJJbmZpbml0ZUxpc3REaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdGhyZXNob2xkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBsaXN0ZW5XaW5kb3dTY3JvbGw6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGJvdHRvbVRocmVzaG9sZDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIHRvcFRocmVzaG9sZDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG9uRWxlbWVudFNjcm9sbDogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ3Njcm9sbCcsXSB9XSxcbiAgICBsaXN0SXRlbXM6IFt7IHR5cGU6IENvbnRlbnRDaGlsZHJlbiwgYXJnczogW05iTGlzdEl0ZW1Db21wb25lbnQsXSB9XVxufTtcblxuY29uc3QgY29tcG9uZW50cyA9IFtcbiAgICBOYkxpc3RDb21wb25lbnQsXG4gICAgTmJMaXN0SXRlbUNvbXBvbmVudCxcbiAgICBOYkxpc3RQYWdlVHJhY2tlckRpcmVjdGl2ZSxcbiAgICBOYkluZmluaXRlTGlzdERpcmVjdGl2ZSxcbl07XG5jbGFzcyBOYkxpc3RNb2R1bGUge1xufVxuTmJMaXN0TW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IGNvbXBvbmVudHMsXG4gICAgICAgICAgICAgICAgZXhwb3J0czogY29tcG9uZW50cyxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG5jbGFzcyBOYkRpcmVjdGlvbmFsaXR5IGV4dGVuZHMgRGlyZWN0aW9uYWxpdHkge1xufVxuTmJEaXJlY3Rpb25hbGl0eS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuXG5jbGFzcyBOYkJpZGlNb2R1bGUgZXh0ZW5kcyBCaWRpTW9kdWxlIHtcbn1cbk5iQmlkaU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJEaXJlY3Rpb25hbGl0eSwgdXNlRXhpc3Rpbmc6IERpcmVjdGlvbmFsaXR5IH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JuYmlvbi5cbiAqL1xuLyoqXG4gKiBDZWxsIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGRhdGEgcm93IGNlbGwgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbmNsYXNzIE5iQ2VsbERlZkRpcmVjdGl2ZSBleHRlbmRzIENka0NlbGxEZWYge1xufVxuTmJDZWxsRGVmRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJDZWxsRGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtDZWxsRGVmLCB1c2VFeGlzdGluZzogTmJDZWxsRGVmRGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIEhlYWRlciBjZWxsIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGhlYWRlciBjZWxsIGFuZCBhcyB3ZWxsIGFzIGNlbGwtc3BlY2lmaWMgcHJvcGVydGllcy5cbiAqL1xuY2xhc3MgTmJIZWFkZXJDZWxsRGVmRGlyZWN0aXZlIGV4dGVuZHMgQ2RrSGVhZGVyQ2VsbERlZiB7XG59XG5OYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkhlYWRlckNlbGxEZWZdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IENka0hlYWRlckNlbGxEZWYsIHVzZUV4aXN0aW5nOiBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbi8qKlxuICogRm9vdGVyIGNlbGwgZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogQ2FwdHVyZXMgdGhlIHRlbXBsYXRlIG9mIGEgY29sdW1uJ3MgZm9vdGVyIGNlbGwgYW5kIGFzIHdlbGwgYXMgY2VsbC1zcGVjaWZpYyBwcm9wZXJ0aWVzLlxuICovXG5jbGFzcyBOYkZvb3RlckNlbGxEZWZEaXJlY3RpdmUgZXh0ZW5kcyBDZGtGb290ZXJDZWxsRGVmIHtcbn1cbk5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iRm9vdGVyQ2VsbERlZl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrRm9vdGVyQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuY29uc3QgTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRiA9IG5ldyBJbmplY3Rpb25Ub2tlbignTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRicpO1xuLyoqXG4gKiBDb2x1bW4gZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogRGVmaW5lcyBhIHNldCBvZiBjZWxscyBhdmFpbGFibGUgZm9yIGEgdGFibGUgY29sdW1uLlxuICovXG5jbGFzcyBOYkNvbHVtbkRlZkRpcmVjdGl2ZSBleHRlbmRzIENka0NvbHVtbkRlZiB7XG4gICAgLyoqIFVuaXF1ZSBuYW1lIGZvciB0aGlzIGNvbHVtbi4gKi9cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX25hbWU7XG4gICAgfVxuICAgIHNldCBuYW1lKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3NldE5hbWVJbnB1dCh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgY29sdW1uIHNob3VsZCBiZSBzdGlja3kgcG9zaXRpb25lZCBvbiB0aGUgZW5kIG9mIHRoZSByb3cgKi9cbiAgICBnZXQgc3RpY2t5RW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3RpY2t5RW5kO1xuICAgIH1cbiAgICBzZXQgc3RpY2t5RW5kKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IHByZXZWYWx1ZSA9IHRoaXMuX3N0aWNreUVuZDtcbiAgICAgICAgdGhpcy5fc3RpY2t5RW5kID0gY29lcmNlQm9vbGVhblByb3BlcnR5KHZhbHVlKTtcbiAgICAgICAgdGhpcy5faGFzU3RpY2t5Q2hhbmdlZCA9IHByZXZWYWx1ZSAhPT0gdGhpcy5fc3RpY2t5RW5kO1xuICAgIH1cbn1cbk5iQ29sdW1uRGVmRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJDb2x1bW5EZWZdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBwcm92aWRlOiBDZGtDb2x1bW5EZWYsIHVzZUV4aXN0aW5nOiBOYkNvbHVtbkRlZkRpcmVjdGl2ZSB9LFxuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1NPUlRfSEVBREVSX0NPTFVNTl9ERUYsIHVzZUV4aXN0aW5nOiBOYkNvbHVtbkRlZkRpcmVjdGl2ZSB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ29sdW1uRGVmRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG5hbWU6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iQ29sdW1uRGVmJyxdIH1dLFxuICAgIHN0aWNreTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc3RpY2t5RW5kOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcbi8qKiBIZWFkZXIgY2VsbCB0ZW1wbGF0ZSBjb250YWluZXIgdGhhdCBhZGRzIHRoZSByaWdodCBjbGFzc2VzIGFuZCByb2xlLiAqL1xuY2xhc3MgTmJIZWFkZXJDZWxsRGlyZWN0aXZlIGV4dGVuZHMgQ2RrSGVhZGVyQ2VsbCB7XG4gICAgY29uc3RydWN0b3IoY29sdW1uRGVmLCBlbGVtZW50UmVmKSB7XG4gICAgICAgIHN1cGVyKGNvbHVtbkRlZiwgZWxlbWVudFJlZik7XG4gICAgICAgIGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGBuYi1jb2x1bW4tJHtjb2x1bW5EZWYuY3NzQ2xhc3NGcmllbmRseU5hbWV9YCk7XG4gICAgfVxufVxuTmJIZWFkZXJDZWxsRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1oZWFkZXItY2VsbCwgdGhbbmJIZWFkZXJDZWxsXScsXG4gICAgICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmItaGVhZGVyLWNlbGwnLFxuICAgICAgICAgICAgICAgICAgICAncm9sZSc6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iSGVhZGVyQ2VsbERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG4vKiogRm9vdGVyIGNlbGwgdGVtcGxhdGUgY29udGFpbmVyIHRoYXQgYWRkcyB0aGUgcmlnaHQgY2xhc3NlcyBhbmQgcm9sZS4gKi9cbmNsYXNzIE5iRm9vdGVyQ2VsbERpcmVjdGl2ZSBleHRlbmRzIENka0Zvb3RlckNlbGwge1xuICAgIGNvbnN0cnVjdG9yKGNvbHVtbkRlZiwgZWxlbWVudFJlZikge1xuICAgICAgICBzdXBlcihjb2x1bW5EZWYsIGVsZW1lbnRSZWYpO1xuICAgICAgICBlbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChgbmItY29sdW1uLSR7Y29sdW1uRGVmLmNzc0NsYXNzRnJpZW5kbHlOYW1lfWApO1xuICAgIH1cbn1cbk5iRm9vdGVyQ2VsbERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZm9vdGVyLWNlbGwsIHRkW25iRm9vdGVyQ2VsbF0nLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLWZvb3Rlci1jZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAnZ3JpZGNlbGwnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iRm9vdGVyQ2VsbERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG4vKiogQ2VsbCB0ZW1wbGF0ZSBjb250YWluZXIgdGhhdCBhZGRzIHRoZSByaWdodCBjbGFzc2VzIGFuZCByb2xlLiAqL1xuY2xhc3MgTmJDZWxsRGlyZWN0aXZlIGV4dGVuZHMgQ2RrQ2VsbCB7XG4gICAgY29uc3RydWN0b3IoY29sdW1uRGVmLCBlbGVtZW50UmVmKSB7XG4gICAgICAgIHN1cGVyKGNvbHVtbkRlZiwgZWxlbWVudFJlZik7XG4gICAgICAgIGVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKGBuYi1jb2x1bW4tJHtjb2x1bW5EZWYuY3NzQ2xhc3NGcmllbmRseU5hbWV9YCk7XG4gICAgfVxufVxuTmJDZWxsRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1jZWxsLCB0ZFtuYkNlbGxdJyxcbiAgICAgICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi1jZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAnZ3JpZGNlbGwnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQ2VsbERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH1cbl07XG5cbmNsYXNzIE5iRGF0YVNvdXJjZSBleHRlbmRzIERhdGFTb3VyY2Uge1xufVxuXG5jbGFzcyBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmUgZXh0ZW5kcyBEYXRhUm93T3V0bGV0IHtcbn1cbk5iRGF0YVJvd091dGxldERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iUm93T3V0bGV0XScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBEYXRhUm93T3V0bGV0LCB1c2VFeGlzdGluZzogTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5jbGFzcyBOYkhlYWRlclJvd091dGxldERpcmVjdGl2ZSBleHRlbmRzIEhlYWRlclJvd091dGxldCB7XG59XG5OYkhlYWRlclJvd091dGxldERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iSGVhZGVyUm93T3V0bGV0XScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBIZWFkZXJSb3dPdXRsZXQsIHVzZUV4aXN0aW5nOiBOYkhlYWRlclJvd091dGxldERpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuY2xhc3MgTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmUgZXh0ZW5kcyBGb290ZXJSb3dPdXRsZXQge1xufVxuTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkZvb3RlclJvd091dGxldF0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogRm9vdGVyUm93T3V0bGV0LCB1c2VFeGlzdGluZzogTmJGb290ZXJSb3dPdXRsZXREaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbmNsYXNzIE5iTm9EYXRhUm93T3V0bGV0RGlyZWN0aXZlIGV4dGVuZHMgTm9EYXRhUm93T3V0bGV0IHtcbn1cbk5iTm9EYXRhUm93T3V0bGV0RGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJOb0RhdGFSb3dPdXRsZXRdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5vRGF0YVJvd091dGxldCwgdXNlRXhpc3Rpbmc6IE5iTm9EYXRhUm93T3V0bGV0RGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5jbGFzcyBOYkNlbGxPdXRsZXREaXJlY3RpdmUgZXh0ZW5kcyBDZGtDZWxsT3V0bGV0IHtcbn1cbk5iQ2VsbE91dGxldERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iQ2VsbE91dGxldF0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrQ2VsbE91dGxldCwgdXNlRXhpc3Rpbmc6IE5iQ2VsbE91dGxldERpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuLyoqXG4gKiBIZWFkZXIgcm93IGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSBoZWFkZXIgcm93J3MgdGVtcGxhdGUgYW5kIG90aGVyIGhlYWRlciBwcm9wZXJ0aWVzIHN1Y2ggYXMgdGhlIGNvbHVtbnMgdG8gZGlzcGxheS5cbiAqL1xuY2xhc3MgTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUgZXh0ZW5kcyBDZGtIZWFkZXJSb3dEZWYge1xufVxuTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkhlYWRlclJvd0RlZl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrSGVhZGVyUm93RGVmLCB1c2VFeGlzdGluZzogTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iSGVhZGVyUm93RGVmRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbHVtbnM6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iSGVhZGVyUm93RGVmJyxdIH1dLFxuICAgIHN0aWNreTogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJIZWFkZXJSb3dEZWZTdGlja3knLF0gfV1cbn07XG4vKipcbiAqIEZvb3RlciByb3cgZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogQ2FwdHVyZXMgdGhlIGZvb3RlciByb3cncyB0ZW1wbGF0ZSBhbmQgb3RoZXIgZm9vdGVyIHByb3BlcnRpZXMgc3VjaCBhcyB0aGUgY29sdW1ucyB0byBkaXNwbGF5LlxuICovXG5jbGFzcyBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSBleHRlbmRzIENka0Zvb3RlclJvd0RlZiB7XG59XG5OYkZvb3RlclJvd0RlZkRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iRm9vdGVyUm93RGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtGb290ZXJSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJGb290ZXJSb3dEZWZEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29sdW1uczogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJGb290ZXJSb3dEZWYnLF0gfV0sXG4gICAgc3RpY2t5OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYkZvb3RlclJvd0RlZlN0aWNreScsXSB9XVxufTtcbi8qKlxuICogRGF0YSByb3cgZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogQ2FwdHVyZXMgdGhlIGRhdGEgcm93J3MgdGVtcGxhdGUgYW5kIG90aGVyIHByb3BlcnRpZXMgc3VjaCBhcyB0aGUgY29sdW1ucyB0byBkaXNwbGF5IGFuZFxuICogYSB3aGVuIHByZWRpY2F0ZSB0aGF0IGRlc2NyaWJlcyB3aGVuIHRoaXMgcm93IHNob3VsZCBiZSB1c2VkLlxuICovXG5jbGFzcyBOYlJvd0RlZkRpcmVjdGl2ZSBleHRlbmRzIENka1Jvd0RlZiB7XG59XG5OYlJvd0RlZkRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iUm93RGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYlJvd0RlZkRpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJSb3dEZWZEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29sdW1uczogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJSb3dEZWZDb2x1bW5zJyxdIH1dLFxuICAgIHdoZW46IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iUm93RGVmV2hlbicsXSB9XVxufTtcbi8qKiBGb290ZXIgdGVtcGxhdGUgY29udGFpbmVyIHRoYXQgY29udGFpbnMgdGhlIGNlbGwgb3V0bGV0LiBBZGRzIHRoZSByaWdodCBjbGFzcyBhbmQgcm9sZS4gKi9cbmNsYXNzIE5iSGVhZGVyUm93Q29tcG9uZW50IGV4dGVuZHMgQ2RrSGVhZGVyUm93IHtcbn1cbk5iSGVhZGVyUm93Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1oZWFkZXItcm93LCB0cltuYkhlYWRlclJvd10nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5nLWNvbnRhaW5lciBuYkNlbGxPdXRsZXQ+PC9uZy1jb250YWluZXI+YCxcbiAgICAgICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi1oZWFkZXItcm93JyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAncm93JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogQ2RrSGVhZGVyUm93LCB1c2VFeGlzdGluZzogTmJIZWFkZXJSb3dDb21wb25lbnQgfV1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuLyoqIEZvb3RlciB0ZW1wbGF0ZSBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGUgY2VsbCBvdXRsZXQuIEFkZHMgdGhlIHJpZ2h0IGNsYXNzIGFuZCByb2xlLiAqL1xuY2xhc3MgTmJGb290ZXJSb3dDb21wb25lbnQgZXh0ZW5kcyBDZGtGb290ZXJSb3cge1xufVxuTmJGb290ZXJSb3dDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLWZvb3Rlci1yb3csIHRyW25iRm9vdGVyUm93XScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5gLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLWZvb3Rlci1yb3cnLFxuICAgICAgICAgICAgICAgICAgICAncm9sZSc6ICdyb3cnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBDZGtGb290ZXJSb3csIHVzZUV4aXN0aW5nOiBOYkZvb3RlclJvd0NvbXBvbmVudCB9XVxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKiogRGF0YSByb3cgdGVtcGxhdGUgY29udGFpbmVyIHRoYXQgY29udGFpbnMgdGhlIGNlbGwgb3V0bGV0LiBBZGRzIHRoZSByaWdodCBjbGFzcyBhbmQgcm9sZS4gKi9cbmNsYXNzIE5iUm93Q29tcG9uZW50IGV4dGVuZHMgQ2RrUm93IHtcbn1cbk5iUm93Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1yb3csIHRyW25iUm93XScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5gLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXJvdycsXG4gICAgICAgICAgICAgICAgICAgICdyb2xlJzogJ3JvdycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IENka1JvdywgdXNlRXhpc3Rpbmc6IE5iUm93Q29tcG9uZW50IH1dXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuY29uc3QgTmJDZGtSb3dEZWYgPSBDZGtSb3dEZWY7XG5jb25zdCBOYkNka1JvdyA9IENka1JvdztcbmNvbnN0IE5iQ2RrQ2VsbERlZiA9IENka0NlbGxEZWY7XG5jb25zdCBOYkNka0hlYWRlclJvd0RlZiA9IENka0hlYWRlclJvd0RlZjtcbmNvbnN0IE5iQ2RrSGVhZGVyUm93ID0gQ2RrSGVhZGVyUm93O1xuY29uc3QgTmJDZGtIZWFkZXJDZWxsRGVmID0gQ2RrSGVhZGVyQ2VsbERlZjtcbmNvbnN0IE5iQ2RrRm9vdGVyUm93RGVmID0gQ2RrRm9vdGVyUm93RGVmO1xuY29uc3QgTmJDZGtGb290ZXJSb3cgPSBDZGtGb290ZXJSb3c7XG5jb25zdCBOYkNka0Zvb3RlckNlbGxEZWYgPSBDZGtGb290ZXJDZWxsRGVmO1xuY29uc3QgTmJDZGtDb2x1bW5EZWYgPSBDZGtDb2x1bW5EZWY7XG5jb25zdCBOYkNka0NlbGwgPSBDZGtDZWxsO1xuY29uc3QgTmJDZGtIZWFkZXJDZWxsID0gQ2RrSGVhZGVyQ2VsbDtcbmNvbnN0IE5iQ2RrRm9vdGVyQ2VsbCA9IENka0Zvb3RlckNlbGw7XG5jb25zdCBOQl9TVElDS1lfUE9TSVRJT05JTkdfTElTVEVORVIgPSBTVElDS1lfUE9TSVRJT05JTkdfTElTVEVORVI7XG5cbmNvbnN0IE5CX1RBQkxFX1RFTVBMQVRFID0gYFxuICA8bmctY29udGFpbmVyIG5iSGVhZGVyUm93T3V0bGV0PjwvbmctY29udGFpbmVyPlxuICA8bmctY29udGFpbmVyIG5iUm93T3V0bGV0PjwvbmctY29udGFpbmVyPlxuICA8bmctY29udGFpbmVyIG5iTm9EYXRhUm93T3V0bGV0PjwvbmctY29udGFpbmVyPlxuICA8bmctY29udGFpbmVyIG5iRm9vdGVyUm93T3V0bGV0PjwvbmctY29udGFpbmVyPlxuYDtcbmNvbnN0IE5CX1ZJRVdfUkVQRUFURVJfU1RSQVRFR1kgPSBfVklFV19SRVBFQVRFUl9TVFJBVEVHWTtcbmNvbnN0IE5CX0NPQUxFU0NFRF9TVFlMRV9TQ0hFRFVMRVIgPSBfQ09BTEVTQ0VEX1NUWUxFX1NDSEVEVUxFUjtcbmNvbnN0IE5CX1RBQkxFX1BST1ZJREVSUyA9IFtcbiAgICB7IHByb3ZpZGU6IE5CX1ZJRVdfUkVQRUFURVJfU1RSQVRFR1ksIHVzZUNsYXNzOiBfRGlzcG9zZVZpZXdSZXBlYXRlclN0cmF0ZWd5IH0sXG4gICAgeyBwcm92aWRlOiBOQl9DT0FMRVNDRURfU1RZTEVfU0NIRURVTEVSLCB1c2VDbGFzczogX0NvYWxlc2NlZFN0eWxlU2NoZWR1bGVyIH0sXG5dO1xuLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOmNvbXBvbmVudC1jbGFzcy1zdWZmaXhcbmNsYXNzIE5iVGFibGUgZXh0ZW5kcyBDZGtUYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZGlmZmVycywgY2hhbmdlRGV0ZWN0b3JSZWYsIGVsZW1lbnRSZWYsIHJvbGUsIGRpciwgZG9jdW1lbnQsIHBsYXRmb3JtLCBfdmlld1JlcGVhdGVyLCBfY29hbGVzY2VkU3R5bGVTY2hlZHVsZXIsIF92aWV3cG9ydFJ1bGVyLCBfc3RpY2t5UG9zaXRpb25pbmdMaXN0ZW5lcikge1xuICAgICAgICBzdXBlcihkaWZmZXJzLCBjaGFuZ2VEZXRlY3RvclJlZiwgZWxlbWVudFJlZiwgcm9sZSwgZGlyLCBkb2N1bWVudCwgcGxhdGZvcm0sIF92aWV3UmVwZWF0ZXIsIF9jb2FsZXNjZWRTdHlsZVNjaGVkdWxlciwgX3ZpZXdwb3J0UnVsZXIsIF9zdGlja3lQb3NpdGlvbmluZ0xpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5fdmlld1JlcGVhdGVyID0gX3ZpZXdSZXBlYXRlcjtcbiAgICAgICAgdGhpcy5fY29hbGVzY2VkU3R5bGVTY2hlZHVsZXIgPSBfY29hbGVzY2VkU3R5bGVTY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuX3N0aWNreVBvc2l0aW9uaW5nTGlzdGVuZXIgPSBfc3RpY2t5UG9zaXRpb25pbmdMaXN0ZW5lcjtcbiAgICB9XG59XG5OYlRhYmxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi10YWJsZS1ub3QtaW1wbGVtZW50ZWQnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgYCxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IE5CX1RBQkxFX1BST1ZJREVSU1xuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRhYmxlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogSXRlcmFibGVEaWZmZXJzIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogU3RyaW5nLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBBdHRyaWJ1dGUsIGFyZ3M6IFsncm9sZScsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJEaXJlY3Rpb25hbGl0eSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYlBsYXRmb3JtIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW19WSUVXX1JFUEVBVEVSX1NUUkFURUdZLF0gfV0gfSxcbiAgICB7IHR5cGU6IF9Db2FsZXNjZWRTdHlsZVNjaGVkdWxlciwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbX0NPQUxFU0NFRF9TVFlMRV9TQ0hFRFVMRVIsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IFNraXBTZWxmIH0sIHsgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfU1RJQ0tZX1BPU0lUSU9OSU5HX0xJU1RFTkVSLF0gfV0gfVxuXTtcbmNvbnN0IENPTVBPTkVOVFMkMSA9IFtcbiAgICBOYlRhYmxlLFxuICAgIC8vIFRlbXBsYXRlIGRlZnNcbiAgICBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUsXG4gICAgTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUsXG4gICAgTmJDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgTmJDZWxsRGVmRGlyZWN0aXZlLFxuICAgIE5iUm93RGVmRGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSxcbiAgICBOYkZvb3RlclJvd0RlZkRpcmVjdGl2ZSxcbiAgICAvLyBPdXRsZXRzXG4gICAgTmJEYXRhUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iTm9EYXRhUm93T3V0bGV0RGlyZWN0aXZlLFxuICAgIE5iQ2VsbE91dGxldERpcmVjdGl2ZSxcbiAgICAvLyBDZWxsIGRpcmVjdGl2ZXNcbiAgICBOYkhlYWRlckNlbGxEaXJlY3RpdmUsXG4gICAgTmJDZWxsRGlyZWN0aXZlLFxuICAgIE5iRm9vdGVyQ2VsbERpcmVjdGl2ZSxcbiAgICAvLyBSb3cgZGlyZWN0aXZlc1xuICAgIE5iSGVhZGVyUm93Q29tcG9uZW50LFxuICAgIE5iUm93Q29tcG9uZW50LFxuICAgIE5iRm9vdGVyUm93Q29tcG9uZW50LFxuXTtcbmNsYXNzIE5iVGFibGVNb2R1bGUgZXh0ZW5kcyBDZGtUYWJsZU1vZHVsZSB7XG59XG5OYlRhYmxlTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbTmJCaWRpTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFsuLi5DT01QT05FTlRTJDFdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFsuLi5DT01QT05FTlRTJDFdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IE5CX0RJQUxPR19DT05GSUcgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ0RlZmF1bHQgZGlhbG9nIG9wdGlvbnMnKTtcbi8qKlxuICogRGVzY3JpYmVzIGFsbCBhdmFpbGFibGUgb3B0aW9ucyB0aGF0IG1heSBiZSBwYXNzZWQgdG8gdGhlIE5iRGlhbG9nU2VydmljZS5cbiAqICovXG5jbGFzcyBOYkRpYWxvZ0NvbmZpZyB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0cnVlIHRoYW4gb3ZlcmxheSB3aWxsIHJlbmRlciBiYWNrZHJvcCB1bmRlciBhIGRpYWxvZy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5oYXNCYWNrZHJvcCA9IHRydWU7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGFzcyB0aGF0J2xsIGJlIGFzc2lnbmVkIHRvIHRoZSBiYWNrZHJvcCBlbGVtZW50LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmJhY2tkcm9wQ2xhc3MgPSAnb3ZlcmxheS1iYWNrZHJvcCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDbGFzcyB0aGF0J2xsIGJlIGFzc2lnbmVkIHRvIHRoZSBkaWFsb2cgb3ZlcmxheS5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5kaWFsb2dDbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGVuIG1vdXNlIGNsaWNrcyBieSBiYWNrZHJvcCB3aWxsIGNsb3NlIGEgZGlhbG9nLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmNsb3NlT25CYWNrZHJvcENsaWNrID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIElmIHRydWUgdGhlbiBlc2NhcGUgcHJlc3Mgd2lsbCBjbG9zZSBhIGRpYWxvZy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5jbG9zZU9uRXNjID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERpc2FibGVzIHNjcm9sbCBvbiBjb250ZW50IHVuZGVyIGRpYWxvZyBpZiB0cnVlIGFuZCBkb2VzIG5vdGhpbmcgb3RoZXJ3aXNlLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmhhc1Njcm9sbCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRm9jdXNlcyBkaWFsb2cgYXV0b21hdGljYWxseSBhZnRlciBvcGVuIGlmIHRydWUuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuYXV0b0ZvY3VzID0gdHJ1ZTtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBjb25maWcpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iRGlhbG9nUmVmYCBoZWxwcyB0byBtYW5pcHVsYXRlIGRpYWxvZyBhZnRlciBpdCB3YXMgY3JlYXRlZC5cbiAqIFRoZSBkaWFsb2cgY2FuIGJlIGRpc21pc3NlZCBieSB1c2luZyBgY2xvc2VgIG1ldGhvZCBvZiB0aGUgZGlhbG9nUmVmLlxuICogWW91IGNhbiBhY2Nlc3MgcmVuZGVyZWQgY29tcG9uZW50IGFzIGBjb250ZW50YCBwcm9wZXJ0eSBvZiB0aGUgZGlhbG9nUmVmLlxuICogYG9uQmFja2Ryb3BDbGlja2Agc3RyZWFtcyBjbGljayBldmVudHMgb24gdGhlIGJhY2tkcm9wIG9mIHRoZSBkaWFsb2cuXG4gKiAqL1xuY2xhc3MgTmJEaWFsb2dSZWYge1xuICAgIGNvbnN0cnVjdG9yKG92ZXJsYXlSZWYpIHtcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmID0gb3ZlcmxheVJlZjtcbiAgICAgICAgdGhpcy5vbkNsb3NlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMub25DbG9zZSA9IHRoaXMub25DbG9zZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgICAgIHRoaXMub25CYWNrZHJvcENsaWNrID0gdGhpcy5vdmVybGF5UmVmLmJhY2tkcm9wQ2xpY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGlkZXMgZGlhbG9nLlxuICAgICAqICovXG4gICAgY2xvc2UocmVzKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZi5kZXRhY2goKTtcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy5vbkNsb3NlJC5uZXh0KHJlcyk7XG4gICAgICAgIHRoaXMub25DbG9zZSQuY29tcGxldGUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogQ29udGFpbmVyIGNvbXBvbmVudCBmb3IgZWFjaCBkaWFsb2cuXG4gKiBBbGwgdGhlIGRpYWxvZ3Mgd2lsbCBiZSBhdHRhY2hlZCB0byBpdC5cbiAqIC8vIFRPRE8gYWRkIGFuaW1hdGlvbnNcbiAqICovXG5jbGFzcyBOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBlbGVtZW50UmVmLCBmb2N1c1RyYXBGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLmZvY3VzVHJhcEZhY3RvcnkgPSBmb2N1c1RyYXBGYWN0b3J5O1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dG9Gb2N1cykge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAgPSB0aGlzLmZvY3VzVHJhcEZhY3RvcnkuY3JlYXRlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLmJsdXJQcmV2aW91c2x5Rm9jdXNlZEVsZW1lbnQoKTtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNUcmFwLmZvY3VzSW5pdGlhbEVsZW1lbnQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmF1dG9Gb2N1cyAmJiB0aGlzLmZvY3VzVHJhcCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAucmVzdG9yZUZvY3VzKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXR0YWNoQ29tcG9uZW50UG9ydGFsKHBvcnRhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3J0YWxPdXRsZXQuYXR0YWNoQ29tcG9uZW50UG9ydGFsKHBvcnRhbCk7XG4gICAgfVxuICAgIGF0dGFjaFRlbXBsYXRlUG9ydGFsKHBvcnRhbCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3J0YWxPdXRsZXQuYXR0YWNoVGVtcGxhdGVQb3J0YWwocG9ydGFsKTtcbiAgICB9XG59XG5OYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZGlhbG9nLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6ICc8bmctdGVtcGxhdGUgbmJQb3J0YWxPdXRsZXQ+PC9uZy10ZW1wbGF0ZT4nXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEaWFsb2dDb25maWcgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iRm9jdXNUcmFwRmFjdG9yeVNlcnZpY2UgfVxuXTtcbk5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHBvcnRhbE91dGxldDogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbTmJQb3J0YWxPdXRsZXREaXJlY3RpdmUsIHsgc3RhdGljOiB0cnVlIH0sXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iRGlhbG9nU2VydmljZWAgaGVscHMgdG8gb3BlbiBkaWFsb2dzLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGRpYWxvZy9kaWFsb2ctc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqIEEgbmV3IGRpYWxvZyBpcyBvcGVuZWQgYnkgY2FsbGluZyB0aGUgYG9wZW5gIG1ldGhvZCB3aXRoIGEgY29tcG9uZW50IHRvIGJlIGxvYWRlZCBhbmQgYW4gb3B0aW9uYWwgY29uZmlndXJhdGlvbi5cbiAqIGBvcGVuYCBtZXRob2Qgd2lsbCByZXR1cm4gYE5iRGlhbG9nUmVmYCB0aGF0IGNhbiBiZSB1c2VkIGZvciB0aGUgZnVydGhlciBtYW5pcHVsYXRpb25zLlxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iRGlhbG9nTW9kdWxlLmZvclJvb3QoKWAgdG8geW91ciBhcHAgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkRpYWxvZ01vZHVsZS5mb3JSb290KGNvbmZpZyksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqIElmIHlvdSBhcmUgdXNpbmcgaXQgaW4gYSBsYXp5IGxvYWRlZCBtb2R1bGUgdGhhbiB5b3UgaGF2ZSB0byBpbnN0YWxsIGl0IHdpdGggYE5iRGlhbG9nTW9kdWxlLmZvckNoaWxkKClgOlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkRpYWxvZ01vZHVsZS5mb3JDaGlsZChjb25maWcpLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBMYXp5TG9hZGVkTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogIyMjIFVzYWdlXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IGRpYWxvZ1JlZiA9IHRoaXMuZGlhbG9nU2VydmljZS5vcGVuKE15RGlhbG9nQ29tcG9uZW50LCB7IC4uLiB9KTtcbiAqIGBgYFxuICpcbiAqIGBOYkRpYWxvZ1JlZmAgZ2l2ZXMgY2FwYWJpbGl0eSBhY2Nlc3MgcmVmZXJlbmNlIHRvIHRoZSByZW5kZXJlZCBkaWFsb2cgY29tcG9uZW50LFxuICogZGVzdHJveSBkaWFsb2cgYW5kIHNvbWUgb3RoZXIgb3B0aW9ucyBkZXNjcmliZWQgYmVsb3cuXG4gKlxuICogQWxzbywgeW91IGNhbiBpbmplY3QgYE5iRGlhbG9nUmVmYCBpbiBkaWFsb2cgY29tcG9uZW50LlxuICpcbiAqIGBgYHRzXG4gKiB0aGlzLmRpYWxvZ1NlcnZpY2Uub3BlbihNeURpYWxvZ0NvbXBvbmVudCwgeyAuLi4gfSk7XG4gKlxuICogLy8gbXktZGlhbG9nLmNvbXBvbmVudC50c1xuICogY29uc3RydWN0b3IocHJvdGVjdGVkIGRpYWxvZ1JlZjogTmJEaWFsb2dSZWYpIHtcbiAqIH1cbiAqXG4gKiBjbG9zZSgpIHtcbiAqICAgdGhpcy5kaWFsb2dSZWYuY2xvc2UoKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEluc3RlYWQgb2YgY29tcG9uZW50IHlvdSBjYW4gY3JlYXRlIGRpYWxvZyBmcm9tIFRlbXBsYXRlUmVmOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVGVtcGxhdGUgcmVmLCBkaWFsb2cvZGlhbG9nLXRlbXBsYXRlLmNvbXBvbmVudClcbiAqXG4gKiBUaGUgZGlhbG9nIG1heSByZXR1cm4gcmVzdWx0IHRocm91Z2ggYE5iRGlhbG9nUmVmYC4gQ2FsbGluZyBjb21wb25lbnQgY2FuIHJlY2VpdmUgdGhpcyByZXN1bHQgd2l0aCBgb25DbG9zZWBcbiAqIHN0cmVhbSBvZiBgTmJEaWFsb2dSZWZgLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoUmVzdWx0LCBkaWFsb2cvZGlhbG9nLXJlc3VsdC5jb21wb25lbnQpXG4gKlxuICogIyMjIENvbmZpZ3VyYXRpb25cbiAqXG4gKiBBcyB3ZSBtZW50aW9uZWQgYWJvdmUsIGBvcGVuYCBtZXRob2Qgb2YgdGhlIGBOYkRpYWxvZ1NlcnZpY2VgIG1heSByZWNlaXZlIG9wdGlvbmFsIGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAqIEFsc28sIHlvdSBjYW4gcHJvdmlkZSBnbG9iYWwgZGlhbG9ncyBjb25maWd1cmF0aW9uIHRocm91Z2ggYE5iRGlhbG9nTW9kdWxlLmZvclJvb3QoeyAuLi4gfSlgLlxuICpcbiAqIFRoaXMgY29uZmlnIG1heSBjb250YWluIHRoZSBmb2xsb3dpbmc6XG4gKlxuICogYGNvbnRleHRgIC0gYm90aCwgdGVtcGxhdGUgYW5kIGNvbXBvbmVudCBtYXkgcmVjZWl2ZSBkYXRhIHRocm91Z2ggYGNvbmZpZy5jb250ZXh0YCBwcm9wZXJ0eS5cbiAqIEZvciBjb21wb25lbnRzLCB0aGlzIGRhdGEgd2lsbCBiZSBhc3NpZ25lZCB0aHJvdWdoIGlucHV0cy5cbiAqIEZvciB0ZW1wbGF0ZXMsIHlvdSBjYW4gYWNjZXNzIGl0IGluc2lkZSB0ZW1wbGF0ZSBhcyAkaW1wbGljaXQuXG4gKlxuICogYGBgdHNcbiAqIHRoaXMuZGlhbG9nU2VydmljZS5vcGVuKHRlbXBsYXRlLCB7IGNvbnRleHQ6ICdwYXNzIGRhdGEgaW4gdGVtcGxhdGUnIH0pO1xuICogYGBgXG4gKlxuICogYGBgaHRtbFxuICogPG5nLXRlbXBsYXRlIGxldC1zb21lLWFkZGl0aW9uYWwtZGF0YT5cbiAqICAge3sgc29tZS1hZGRpdGlvbmFsLWRhdGEgfX1cbiAqIDxuZy10ZW1wbGF0ZS8+XG4gKiBgYGBcbiAqXG4gKiBgaGFzQmFja2Ryb3BgIC0gZGV0ZXJtaW5lcyBpcyBzZXJ2aWNlIGhhdmUgdG8gcmVuZGVyIGJhY2tkcm9wIHVuZGVyIHRoZSBkaWFsb2cuXG4gKiBEZWZhdWx0IGlzIHRydWUuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEJhY2tkcm9wLCBkaWFsb2cvZGlhbG9nLWhhcy1iYWNrZHJvcC5jb21wb25lbnQpXG4gKlxuICogYGNsb3NlT25CYWNrZHJvcENsaWNrYCAtIGNsb3NlIGRpYWxvZyBvbiBiYWNrZHJvcCBjbGljayBpZiB0cnVlLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICogQHN0YWNrZWQtZXhhbXBsZShCYWNrZHJvcCBjbGljaywgZGlhbG9nL2RpYWxvZy1iYWNrZHJvcC1jbGljay5jb21wb25lbnQpXG4gKlxuICogYGNsb3NlT25Fc2NgIC0gY2xvc2UgZGlhbG9nIG9uIGVzY2FwZSBidXR0b24gb24gdGhlIGtleWJvYXJkLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICogQHN0YWNrZWQtZXhhbXBsZShFc2NhcGUgaGl0LCBkaWFsb2cvZGlhbG9nLWVzYy5jb21wb25lbnQpXG4gKlxuICogYGhhc1Njcm9sbGAgLSBEaXNhYmxlcyBzY3JvbGwgb24gY29udGVudCB1bmRlciBkaWFsb2cgaWYgdHJ1ZSBhbmQgZG9lcyBub3RoaW5nIG90aGVyd2lzZS5cbiAqIERlZmF1bHQgaXMgZmFsc2UuXG4gKiBQbGVhc2UsIG9wZW4gZGlhbG9ncyBpbiB0aGUgc2VwYXJhdGUgd2luZG93IGFuZCB0cnkgdG8gc2Nyb2xsLlxuICogQHN0YWNrZWQtZXhhbXBsZShTY3JvbGwsIGRpYWxvZy9kaWFsb2ctc2Nyb2xsLmNvbXBvbmVudClcbiAqXG4gKiBgYXV0b0ZvY3VzYCAtIEZvY3VzZXMgZGlhbG9nIGF1dG9tYXRpY2FsbHkgYWZ0ZXIgb3BlbiBpZiB0cnVlLiBJdCdzIHVzZWZ1bCB0byBwcmV2ZW50IG1pc2NsaWNrcyBvblxuICogdHJpZ2dlciBlbGVtZW50cyBhbmQgb3BlbmluZyBtdWx0aXBsZSBkaWFsb2dzLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICpcbiAqIEFzIHlvdSBjYW4gc2VlLCBpZiB5b3Ugb3BlbiBkaWFsb2cgd2l0aCBhdXRvIGZvY3VzIGRpYWxvZyB3aWxsIGZvY3VzIGZpcnN0IGZvY3VzYWJsZSBlbGVtZW50XG4gKiBvciBqdXN0IGJsdXIgcHJldmlvdXNseSBmb2N1c2VkIGF1dG9tYXRpY2FsbHkuXG4gKiBPdGhlcndpc2UsIHdpdGhvdXQgYXV0byBmb2N1cywgdGhlIGZvY3VzIHdpbGwgc3RheSBvbiB0aGUgcHJldmlvdXNseSBmb2N1c2VkIGVsZW1lbnQuXG4gKiBQbGVhc2UsIG9wZW4gZGlhbG9ncyBpbiB0aGUgc2VwYXJhdGUgd2luZG93IGFuZCB0cnkgdG8gY2xpY2sgb24gdGhlIGJ1dHRvbiB3aXRob3V0IGZvY3VzXG4gKiBhbmQgdGhlbiBoaXQgc3BhY2UgYW55IHRpbWVzLiBNdWx0aXBsZSBzYW1lIGRpYWxvZ3Mgd2lsbCBiZSBvcGVuZWQuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEF1dG8gZm9jdXMsIGRpYWxvZy9kaWFsb2ctYXV0by1mb2N1cy5jb21wb25lbnQpXG4gKiAqL1xuY2xhc3MgTmJEaWFsb2dTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihkb2N1bWVudCwgZ2xvYmFsQ29uZmlnLCBwb3NpdGlvbkJ1aWxkZXIsIG92ZXJsYXksIGluamVjdG9yLCBjZnIpIHtcbiAgICAgICAgdGhpcy5kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLmdsb2JhbENvbmZpZyA9IGdsb2JhbENvbmZpZztcbiAgICAgICAgdGhpcy5wb3NpdGlvbkJ1aWxkZXIgPSBwb3NpdGlvbkJ1aWxkZXI7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMuaW5qZWN0b3IgPSBpbmplY3RvcjtcbiAgICAgICAgdGhpcy5jZnIgPSBjZnI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE9wZW5zIG5ldyBpbnN0YW5jZSBvZiB0aGUgZGlhbG9nLCBtYXkgcmVjZWl2ZSBvcHRpb25hbCBjb25maWcuXG4gICAgICogKi9cbiAgICBvcGVuKGNvbnRlbnQsIHVzZXJDb25maWcgPSB7fSkge1xuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgTmJEaWFsb2dDb25maWcoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmdsb2JhbENvbmZpZyksIHVzZXJDb25maWcpKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheVJlZiA9IHRoaXMuY3JlYXRlT3ZlcmxheShjb25maWcpO1xuICAgICAgICBjb25zdCBkaWFsb2dSZWYgPSBuZXcgTmJEaWFsb2dSZWYob3ZlcmxheVJlZik7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY3JlYXRlQ29udGFpbmVyKGNvbmZpZywgb3ZlcmxheVJlZik7XG4gICAgICAgIHRoaXMuY3JlYXRlQ29udGVudChjb25maWcsIGNvbnRlbnQsIGNvbnRhaW5lciwgZGlhbG9nUmVmKTtcbiAgICAgICAgdGhpcy5yZWdpc3RlckNsb3NlTGlzdGVuZXJzKGNvbmZpZywgb3ZlcmxheVJlZiwgZGlhbG9nUmVmKTtcbiAgICAgICAgcmV0dXJuIGRpYWxvZ1JlZjtcbiAgICB9XG4gICAgY3JlYXRlT3ZlcmxheShjb25maWcpIHtcbiAgICAgICAgY29uc3QgcG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICBjb25zdCBzY3JvbGxTdHJhdGVneSA9IHRoaXMuY3JlYXRlU2Nyb2xsU3RyYXRlZ3koY29uZmlnLmhhc1Njcm9sbCk7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuY3JlYXRlKHtcbiAgICAgICAgICAgIHBvc2l0aW9uU3RyYXRlZ3ksXG4gICAgICAgICAgICBzY3JvbGxTdHJhdGVneSxcbiAgICAgICAgICAgIGhhc0JhY2tkcm9wOiBjb25maWcuaGFzQmFja2Ryb3AsXG4gICAgICAgICAgICBiYWNrZHJvcENsYXNzOiBjb25maWcuYmFja2Ryb3BDbGFzcyxcbiAgICAgICAgICAgIHBhbmVsQ2xhc3M6IGNvbmZpZy5kaWFsb2dDbGFzcyxcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmdsb2JhbCgpXG4gICAgICAgICAgICAuY2VudGVyVmVydGljYWxseSgpXG4gICAgICAgICAgICAuY2VudGVySG9yaXpvbnRhbGx5KCk7XG4gICAgfVxuICAgIGNyZWF0ZVNjcm9sbFN0cmF0ZWd5KGhhc1Njcm9sbCkge1xuICAgICAgICBpZiAoaGFzU2Nyb2xsKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vdmVybGF5LnNjcm9sbFN0cmF0ZWdpZXMubm9vcCgpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLmJsb2NrKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlQ29udGFpbmVyKGNvbmZpZywgb3ZlcmxheVJlZikge1xuICAgICAgICBjb25zdCBpbmplY3RvciA9IG5ldyBOYlBvcnRhbEluamVjdG9yKHRoaXMuY3JlYXRlSW5qZWN0b3IoY29uZmlnKSwgbmV3IFdlYWtNYXAoW1tOYkRpYWxvZ0NvbmZpZywgY29uZmlnXV0pKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUG9ydGFsID0gbmV3IE5iQ29tcG9uZW50UG9ydGFsKE5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50LCBudWxsLCBpbmplY3RvciwgdGhpcy5jZnIpO1xuICAgICAgICBjb25zdCBjb250YWluZXJSZWYgPSBvdmVybGF5UmVmLmF0dGFjaChjb250YWluZXJQb3J0YWwpO1xuICAgICAgICByZXR1cm4gY29udGFpbmVyUmVmLmluc3RhbmNlO1xuICAgIH1cbiAgICBjcmVhdGVDb250ZW50KGNvbmZpZywgY29udGVudCwgY29udGFpbmVyLCBkaWFsb2dSZWYpIHtcbiAgICAgICAgaWYgKGNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZikge1xuICAgICAgICAgICAgY29uc3QgcG9ydGFsID0gdGhpcy5jcmVhdGVUZW1wbGF0ZVBvcnRhbChjb25maWcsIGNvbnRlbnQsIGRpYWxvZ1JlZik7XG4gICAgICAgICAgICBjb250YWluZXIuYXR0YWNoVGVtcGxhdGVQb3J0YWwocG9ydGFsKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHBvcnRhbCA9IHRoaXMuY3JlYXRlQ29tcG9uZW50UG9ydGFsKGNvbmZpZywgY29udGVudCwgZGlhbG9nUmVmKTtcbiAgICAgICAgICAgIGRpYWxvZ1JlZi5jb21wb25lbnRSZWYgPSBjb250YWluZXIuYXR0YWNoQ29tcG9uZW50UG9ydGFsKHBvcnRhbCk7XG4gICAgICAgICAgICBpZiAoY29uZmlnLmNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKGRpYWxvZ1JlZi5jb21wb25lbnRSZWYuaW5zdGFuY2UsIE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZy5jb250ZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlVGVtcGxhdGVQb3J0YWwoY29uZmlnLCBjb250ZW50LCBkaWFsb2dSZWYpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOYlRlbXBsYXRlUG9ydGFsKGNvbnRlbnQsIG51bGwsIHsgJGltcGxpY2l0OiBjb25maWcuY29udGV4dCwgZGlhbG9nUmVmIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXZSdyZSBjcmVhdGluZyBwb3J0YWwgd2l0aCBjdXN0b20gaW5qZWN0b3IgcHJvdmlkZWQgdGhyb3VnaCBjb25maWcgb3IgdXNpbmcgZ2xvYmFsIGluamVjdG9yLlxuICAgICAqIFRoaXMgYXBwcm9hY2ggcHJvdmlkZXMgdXMgY2FwYWJpbGl0eSBpbmplY3QgYE5iRGlhbG9nUmVmYCBpbiBkaWFsb2cgY29tcG9uZW50LlxuICAgICAqICovXG4gICAgY3JlYXRlQ29tcG9uZW50UG9ydGFsKGNvbmZpZywgY29udGVudCwgZGlhbG9nUmVmKSB7XG4gICAgICAgIGNvbnN0IGluamVjdG9yID0gdGhpcy5jcmVhdGVJbmplY3Rvcihjb25maWcpO1xuICAgICAgICBjb25zdCBwb3J0YWxJbmplY3RvciA9IG5ldyBOYlBvcnRhbEluamVjdG9yKGluamVjdG9yLCBuZXcgV2Vha01hcChbW05iRGlhbG9nUmVmLCBkaWFsb2dSZWZdXSkpO1xuICAgICAgICByZXR1cm4gbmV3IE5iQ29tcG9uZW50UG9ydGFsKGNvbnRlbnQsIGNvbmZpZy52aWV3Q29udGFpbmVyUmVmLCBwb3J0YWxJbmplY3Rvcik7XG4gICAgfVxuICAgIGNyZWF0ZUluamVjdG9yKGNvbmZpZykge1xuICAgICAgICByZXR1cm4gY29uZmlnLnZpZXdDb250YWluZXJSZWYgJiYgY29uZmlnLnZpZXdDb250YWluZXJSZWYuaW5qZWN0b3IgfHwgdGhpcy5pbmplY3RvcjtcbiAgICB9XG4gICAgcmVnaXN0ZXJDbG9zZUxpc3RlbmVycyhjb25maWcsIG92ZXJsYXlSZWYsIGRpYWxvZ1JlZikge1xuICAgICAgICBpZiAoY29uZmlnLmNsb3NlT25CYWNrZHJvcENsaWNrKSB7XG4gICAgICAgICAgICBvdmVybGF5UmVmLmJhY2tkcm9wQ2xpY2soKS5zdWJzY3JpYmUoKCkgPT4gZGlhbG9nUmVmLmNsb3NlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjb25maWcuY2xvc2VPbkVzYykge1xuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdrZXl1cCcpXG4gICAgICAgICAgICAgICAgLnBpcGUoZmlsdGVyKChldmVudCkgPT4gZXZlbnQua2V5Q29kZSA9PT0gMjcpLCB0YWtlVW50aWwoZGlhbG9nUmVmLm9uQ2xvc2UpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gZGlhbG9nUmVmLmNsb3NlKCkpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJEaWFsb2dTZXJ2aWNlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBJbmplY3RhYmxlIH1cbl07XG5OYkRpYWxvZ1NlcnZpY2UuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RPQ1VNRU5ULF0gfV0gfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRElBTE9HX0NPTkZJRyxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IEluamVjdG9yIH0sXG4gICAgeyB0eXBlOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJEaWFsb2dNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KGRpYWxvZ0NvbmZpZyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJEaWFsb2dNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBOYkRpYWxvZ1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9ESUFMT0dfQ09ORklHLCB1c2VWYWx1ZTogZGlhbG9nQ29uZmlnIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzdGF0aWMgZm9yQ2hpbGQoZGlhbG9nQ29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYkRpYWxvZ01vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIE5iRGlhbG9nU2VydmljZSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX0RJQUxPR19DT05GSUcsIHVzZVZhbHVlOiBkaWFsb2dDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJEaWFsb2dNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtOYlNoYXJlZE1vZHVsZSwgTmJPdmVybGF5TW9kdWxlXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtOYkRpYWxvZ0NvbnRhaW5lckNvbXBvbmVudF0sXG4gICAgICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbTmJEaWFsb2dDb250YWluZXJDb21wb25lbnRdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYlRvYXN0Q29tcG9uZW50YCBpcyByZXNwb25zaWJsZSBmb3IgcmVuZGVyaW5nIGVhY2ggdG9hc3Qgd2l0aCBhcHByb3ByaWF0ZSBzdHlsZXMuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRvYXN0ci1ib3JkZXItc3R5bGU6XG4gKiB0b2FzdHItYm9yZGVyLXdpZHRoOlxuICogdG9hc3RyLWJvcmRlci1yYWRpdXM6XG4gKiB0b2FzdHItcGFkZGluZzpcbiAqIHRvYXN0ci1zaGFkb3c6XG4gKiB0b2FzdHItdGV4dC1mb250LWZhbWlseTpcbiAqIHRvYXN0ci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvYXN0ci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdG9hc3RyLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b2FzdHItdGl0bGUtdGV4dC1mb250LWZhbWlseTpcbiAqIHRvYXN0ci10aXRsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvYXN0ci10aXRsZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdG9hc3RyLXRpdGxlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b2FzdHItYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1iYXNpYy1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1iYXNpYy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogdG9hc3RyLWljb24tcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24tcHJpbWFyeS1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLXN1Y2Nlc3MtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1pbmZvLXRleHQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItaWNvbi1pbmZvLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS1pbmZvLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItd2FybmluZy10ZXh0LWNvbG9yOlxuICogdG9hc3RyLWljb24td2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24td2FybmluZy1jb2xvcjpcbiAqIHRvYXN0ci1kZXN0cm95YWJsZS13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2FzdHItZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHRvYXN0ci1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWRhbmdlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWljb24tZGFuZ2VyLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2FzdHItY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogdG9hc3RyLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvYXN0ci1pY29uLWNvbnRyb2wtY29sb3I6XG4gKiB0b2FzdHItZGVzdHJveWFibGUtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9hc3RyLWRlc3Ryb3lhYmxlLWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogKi9cbmNsYXNzIE5iVG9hc3RDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBlbGVtZW50UmVmLCBzdGF0dXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgaW5mbygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgZGFuZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGJhc2ljKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgZGVzdHJveUJ5Q2xpY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvYXN0LmNvbmZpZy5kZXN0cm95QnlDbGljaztcbiAgICB9XG4gICAgZ2V0IGhhc0ljb24oKSB7XG4gICAgICAgIGNvbnN0IHsgaWNvbiB9ID0gdGhpcy50b2FzdC5jb25maWc7XG4gICAgICAgIGlmICh0eXBlb2YgaWNvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhIShpY29uICYmIGljb24uaWNvbik7XG4gICAgfVxuICAgIGdldCBjdXN0b21JY29uKCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLmljb247XG4gICAgfVxuICAgIGdldCBpY29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2FzdC5jb25maWcuaWNvbjtcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cykpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5zdGF0dXNTZXJ2aWNlLmdldFN0YXR1c0NsYXNzKHRoaXMudG9hc3QuY29uZmlnLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgb25DbGljaygpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95LmVtaXQoKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnRvYXN0LmNvbmZpZy50b2FzdENsYXNzKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLnRvYXN0LmNvbmZpZy50b2FzdENsYXNzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbk5iVG9hc3RDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRvYXN0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8ZGl2IGNsYXNzPVxcXCJpY29uLWNvbnRhaW5lclxcXCIgKm5nSWY9XFxcImhhc0ljb24gJiYgaWNvblxcXCI+XFxuICA8bmItaWNvbiBbY29uZmlnXT1cXFwiaWNvblxcXCI+PC9uYi1pY29uPlxcbjwvZGl2PlxcbjxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY29udGFpbmVyXFxcIj5cXG4gIDxzcGFuIGNsYXNzPVxcXCJ0aXRsZSBzdWJ0aXRsZVxcXCI+e3sgdG9hc3QudGl0bGUgfX08L3NwYW4+XFxuICA8ZGl2IGNsYXNzPVxcXCJtZXNzYWdlXFxcIj57eyB0b2FzdC5tZXNzYWdlIH19PC9kaXY+XFxuPC9kaXY+XFxuXCIsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6Y2VudGVyO3dpZHRoOjI1cmVtO21hcmdpbjowLjVyZW19Omhvc3QgLnRpdGxle21hcmdpbi1yaWdodDowLjI1cmVtfTpob3N0LmRlZmF1bHQgLmNvbnRlbnQtY29udGFpbmVyLDpob3N0Om5vdCguaGFzLWljb24pIC5jb250ZW50LWNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93fTpob3N0LmRlc3Ryb3ktYnktY2xpY2t7Y3Vyc29yOnBvaW50ZXJ9Omhvc3QgbmItaWNvbntmb250LXNpemU6Mi41cmVtfTpob3N0IHN2Z3t3aWR0aDoyLjVyZW07aGVpZ2h0OjIuNXJlbX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUb2FzdENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IFJlbmRlcmVyMiB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlRvYXN0Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRvYXN0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkZXN0cm95OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgc3VjY2VzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXN1Y2Nlc3MnLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgd2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgcHJpbWFyeTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXByaW1hcnknLF0gfV0sXG4gICAgZGFuZ2VyOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtZGFuZ2VyJyxdIH1dLFxuICAgIGJhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgZGVzdHJveUJ5Q2xpY2s6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmRlc3Ryb3ktYnktY2xpY2snLF0gfV0sXG4gICAgaGFzSWNvbjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuaGFzLWljb24nLF0gfV0sXG4gICAgY3VzdG9tSWNvbjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuY3VzdG9tLWljb24nLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dLFxuICAgIG9uQ2xpY2s6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydjbGljaycsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3Qgdm9pZFN0YXRlID0gc3R5bGUoe1xuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoe3sgZGlyZWN0aW9uIH19MTEwJSknLFxuICAgIGhlaWdodDogMCxcbiAgICBtYXJnaW5MZWZ0OiAnMCcsXG4gICAgbWFyZ2luUmlnaHQ6ICcwJyxcbiAgICBtYXJnaW5Ub3A6ICcwJyxcbiAgICBtYXJnaW5Cb3R0b206ICcwJyxcbn0pO1xuY29uc3QgZGVmYXVsdE9wdGlvbnMgPSB7IHBhcmFtczogeyBkaXJlY3Rpb246ICcnIH0gfTtcbmNsYXNzIE5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihsYXlvdXREaXJlY3Rpb24sIHBvc2l0aW9uSGVscGVyKSB7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uID0gbGF5b3V0RGlyZWN0aW9uO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSGVscGVyID0gcG9zaXRpb25IZWxwZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmNvbnRlbnQgPSBbXTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uLm9uRGlyZWN0aW9uQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5vbkRpcmVjdGlvbkNoYW5nZSgpKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIG9uRGlyZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCBkaXJlY3Rpb24gPSB0aGlzLnBvc2l0aW9uSGVscGVyLmlzUmlnaHRQb3NpdGlvbih0aGlzLnBvc2l0aW9uKSA/ICcnIDogJy0nO1xuICAgICAgICB0aGlzLmZhZGVJbiA9IHsgdmFsdWU6ICcnLCBwYXJhbXM6IHsgZGlyZWN0aW9uIH0gfTtcbiAgICB9XG59XG5OYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdG9hc3RyLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmItdG9hc3QgW0BmYWRlSW5dPVwiZmFkZUluXCIgKm5nRm9yPVwibGV0IHRvYXN0IG9mIGNvbnRlbnRcIiBbdG9hc3RdPVwidG9hc3RcIj48L25iLXRvYXN0PmAsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCdmYWRlSW4nLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCc6ZW50ZXInLCBbdm9pZFN0YXRlLCBhbmltYXRlKDEwMCldLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCc6bGVhdmUnLCBbYW5pbWF0ZSgxMDAsIHZvaWRTdGF0ZSldLCBkZWZhdWx0T3B0aW9ucyksXG4gICAgICAgICAgICAgICAgICAgIF0pLFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYkxheW91dERpcmVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iUG9zaXRpb25IZWxwZXIgfVxuXTtcbk5iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbnRlbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNvbnRleHQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBvc2l0aW9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0b2FzdHM6IFt7IHR5cGU6IFZpZXdDaGlsZHJlbiwgYXJnczogW05iVG9hc3RDb21wb25lbnQsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgTkJfVE9BU1RSX0NPTkZJRyA9IG5ldyBJbmplY3Rpb25Ub2tlbignRGVmYXVsdCB0b2FzdHIgb3B0aW9ucycpO1xuLyoqXG4gKiBUaGUgYE5iVG9hc3RyQ29uZmlnYCBjbGFzcyBkZXNjcmliZXMgY29uZmlndXJhdGlvbiBvZiB0aGUgYE5iVG9hc3RyU2VydmljZS5zaG93YCBhbmQgZ2xvYmFsIHRvYXN0ciBjb25maWd1cmF0aW9uLlxuICogKi9cbmNsYXNzIE5iVG9hc3RyQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgd2hlcmUgb24gdGhlIHNjcmVlbiB0b2FzdCBoYXZlIHRvIGJlIHJlbmRlcmVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gTmJHbG9iYWxMb2dpY2FsUG9zaXRpb24uVE9QX0VORDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFN0YXR1cyBjaG9vc2VzIGNvbG9yIHNjaGVtZSBmb3IgdGhlIHRvYXN0LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEdXJhdGlvbiBpcyB0aW1lb3V0IGJldHdlZW4gdG9hc3QgYXBwZWFycyBhbmQgZGlzYXBwZWFycy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5kdXJhdGlvbiA9IDMwMDA7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXN0cm95IGJ5IGNsaWNrIG1lYW5zIHlvdSBjYW4gaGlkZSB0aGUgdG9hc3QgYnkgY2xpY2tpbmcgaXQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZGVzdHJveUJ5Q2xpY2sgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgcHJldmVudER1cGxpY2F0ZXMgaXMgdHJ1ZSB0aGVuIHRoZSB0b2FzdCB3aXRoIHRoZSBzYW1lIHRpdGxlLCBtZXNzYWdlIGFuZCBzdGF0dXMgd2lsbCBub3QgYmUgcmVuZGVyZWQuXG4gICAgICAgICAqIEZpbmQgZHVwbGljYXRlcyBiZWhhdmlvdXIgZGV0ZXJtaW5lZCBieSBgcHJldmVudER1cGxpY2F0ZXNgLlxuICAgICAgICAgKiBUaGUgZGVmYXVsdCBgcHJldmlvdXNgIGR1cGxpY2F0ZSBiZWhhdmlvdXIgaXMgdXNlZC5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5wcmV2ZW50RHVwbGljYXRlcyA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyB0aGUgaG93IHRvIHRyZWF0IGR1cGxpY2F0ZXMuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuZHVwbGljYXRlc0JlaGF2aW91ciA9ICdwcmV2aW91cyc7XG4gICAgICAgIC8qXG4gICAgICAgICogVGhlIG51bWJlciBvZiB2aXNpYmxlIHRvYXN0cy4gSWYgdGhlIGxpbWl0IGV4Y2VlZGVkIHRoZSBvbGRlc3QgdG9hc3Qgd2lsbCBiZSByZW1vdmVkLlxuICAgICAgICAqICovXG4gICAgICAgIHRoaXMubGltaXQgPSBudWxsO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xhc3MgdG8gYmUgYXBwbGllZCB0byB0aGUgdG9hc3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRvYXN0Q2xhc3MgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgcmVuZGVyIGljb24gb3Igbm90LlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmhhc0ljb24gPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWNvbiBuYW1lIG9yIGljb24gY29uZmlnIG9iamVjdCB0aGF0IGNhbiBiZSBwcm92aWRlZCB0byByZW5kZXIgY3VzdG9tIGljb24uXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuaWNvbiA9ICdlbWFpbCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2FzdCBzdGF0dXMgaWNvbi1jbGFzcyBtYXBwaW5nLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmljb25zID0ge1xuICAgICAgICAgICAgZGFuZ2VyOiAnZmxhc2gtb3V0bGluZScsXG4gICAgICAgICAgICBzdWNjZXNzOiAnY2hlY2ttYXJrLW91dGxpbmUnLFxuICAgICAgICAgICAgaW5mbzogJ3F1ZXN0aW9uLW1hcmstb3V0bGluZScsXG4gICAgICAgICAgICB3YXJuaW5nOiAnYWxlcnQtdHJpYW5nbGUtb3V0bGluZScsXG4gICAgICAgICAgICBwcmltYXJ5OiAnZW1haWwtb3V0bGluZScsXG4gICAgICAgICAgICBjb250cm9sOiAnZW1haWwtb3V0bGluZScsXG4gICAgICAgICAgICBiYXNpYzogJ2VtYWlsLW91dGxpbmUnLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLnBhdGNoSWNvbihjb25maWcpO1xuICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMsIGNvbmZpZyk7XG4gICAgfVxuICAgIHBhdGNoSWNvbihjb25maWcpIHtcbiAgICAgICAgaWYgKCEoJ2ljb24nIGluIGNvbmZpZykpIHtcbiAgICAgICAgICAgIGNvbmZpZy5pY29uID0ge1xuICAgICAgICAgICAgICAgIGljb246IHRoaXMuaWNvbnNbY29uZmlnLnN0YXR1c10gfHwgdGhpcy5pY29ucy5iYXNpYyxcbiAgICAgICAgICAgICAgICBwYWNrOiAnbmVidWxhci1lc3NlbnRpYWxzJyxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iVG9hc3RSZWYge1xuICAgIGNvbnN0cnVjdG9yKHRvYXN0Q29udGFpbmVyLCB0b2FzdCkge1xuICAgICAgICB0aGlzLnRvYXN0Q29udGFpbmVyID0gdG9hc3RDb250YWluZXI7XG4gICAgICAgIHRoaXMudG9hc3QgPSB0b2FzdDtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMudG9hc3RDb250YWluZXIuZGVzdHJveSh0aGlzLnRvYXN0KTtcbiAgICB9XG59XG5jbGFzcyBOYlRvYXN0Q29udGFpbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgY29udGFpbmVyUmVmLCBwb3NpdGlvbkhlbHBlcikge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgIHRoaXMuY29udGFpbmVyUmVmID0gY29udGFpbmVyUmVmO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSGVscGVyID0gcG9zaXRpb25IZWxwZXI7XG4gICAgICAgIHRoaXMudG9hc3RzID0gW107XG4gICAgICAgIHRoaXMudG9hc3REdXBsaWNhdGVDb21wYXJlRnVuYyA9ICh0MSwgdDIpID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0MS5tZXNzYWdlID09PSB0Mi5tZXNzYWdlXG4gICAgICAgICAgICAgICAgJiYgdDEudGl0bGUgPT09IHQyLnRpdGxlXG4gICAgICAgICAgICAgICAgJiYgdDEuY29uZmlnLnN0YXR1cyA9PT0gdDIuY29uZmlnLnN0YXR1cztcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0IG5hdGl2ZUVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lclJlZi5sb2NhdGlvbi5uYXRpdmVFbGVtZW50O1xuICAgIH1cbiAgICBhdHRhY2godG9hc3QpIHtcbiAgICAgICAgaWYgKHRvYXN0LmNvbmZpZy5wcmV2ZW50RHVwbGljYXRlcyAmJiB0aGlzLmlzRHVwbGljYXRlKHRvYXN0KSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVtb3ZlVG9hc3RJZkxpbWl0UmVhY2hlZCh0b2FzdCk7XG4gICAgICAgIGNvbnN0IHRvYXN0Q29tcG9uZW50ID0gdGhpcy5hdHRhY2hUb2FzdCh0b2FzdCk7XG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZGVzdHJveUJ5Q2xpY2spIHtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlT25DbGljayh0b2FzdENvbXBvbmVudCwgdG9hc3QpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0b2FzdC5jb25maWcuZHVyYXRpb24pIHtcbiAgICAgICAgICAgIHRoaXMuc2V0RGVzdHJveVRpbWVvdXQodG9hc3QpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucHJldlRvYXN0ID0gdG9hc3Q7XG4gICAgICAgIHJldHVybiBuZXcgTmJUb2FzdFJlZih0aGlzLCB0b2FzdCk7XG4gICAgfVxuICAgIGRlc3Ryb3kodG9hc3QpIHtcbiAgICAgICAgaWYgKHRoaXMucHJldlRvYXN0ID09PSB0b2FzdCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2VG9hc3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudG9hc3RzID0gdGhpcy50b2FzdHMuZmlsdGVyKHQgPT4gdCAhPT0gdG9hc3QpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigpO1xuICAgIH1cbiAgICBpc0R1cGxpY2F0ZSh0b2FzdCkge1xuICAgICAgICByZXR1cm4gdG9hc3QuY29uZmlnLmR1cGxpY2F0ZXNCZWhhdmlvdXIgPT09ICdwcmV2aW91cydcbiAgICAgICAgICAgID8gdGhpcy5pc0R1cGxpY2F0ZVByZXZpb3VzKHRvYXN0KVxuICAgICAgICAgICAgOiB0aGlzLmlzRHVwbGljYXRlQW1vbmdBbGwodG9hc3QpO1xuICAgIH1cbiAgICBpc0R1cGxpY2F0ZVByZXZpb3VzKHRvYXN0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZUb2FzdCAmJiB0aGlzLnRvYXN0RHVwbGljYXRlQ29tcGFyZUZ1bmModGhpcy5wcmV2VG9hc3QsIHRvYXN0KTtcbiAgICB9XG4gICAgaXNEdXBsaWNhdGVBbW9uZ0FsbCh0b2FzdCkge1xuICAgICAgICByZXR1cm4gdGhpcy50b2FzdHMuc29tZSh0ID0+IHRoaXMudG9hc3REdXBsaWNhdGVDb21wYXJlRnVuYyh0LCB0b2FzdCkpO1xuICAgIH1cbiAgICByZW1vdmVUb2FzdElmTGltaXRSZWFjaGVkKHRvYXN0KSB7XG4gICAgICAgIGlmICghdG9hc3QuY29uZmlnLmxpbWl0IHx8IHRoaXMudG9hc3RzLmxlbmd0aCA8IHRvYXN0LmNvbmZpZy5saW1pdCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uSGVscGVyLmlzVG9wUG9zaXRpb24odG9hc3QuY29uZmlnLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgdGhpcy50b2FzdHMucG9wKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnRvYXN0cy5zaGlmdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaFRvYXN0KHRvYXN0KSB7XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uSGVscGVyLmlzVG9wUG9zaXRpb24odG9hc3QuY29uZmlnLnBvc2l0aW9uKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoVG9Ub3AodG9hc3QpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXR0YWNoVG9Cb3R0b20odG9hc3QpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGF0dGFjaFRvVG9wKHRvYXN0KSB7XG4gICAgICAgIHRoaXMudG9hc3RzLnVuc2hpZnQodG9hc3QpO1xuICAgICAgICB0aGlzLnVwZGF0ZUNvbnRhaW5lcigpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb250YWluZXJSZWYuaW5zdGFuY2UudG9hc3RzLmZpcnN0O1xuICAgIH1cbiAgICBhdHRhY2hUb0JvdHRvbSh0b2FzdCkge1xuICAgICAgICB0aGlzLnRvYXN0cy5wdXNoKHRvYXN0KTtcbiAgICAgICAgdGhpcy51cGRhdGVDb250YWluZXIoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyUmVmLmluc3RhbmNlLnRvYXN0cy5sYXN0O1xuICAgIH1cbiAgICBzZXREZXN0cm95VGltZW91dCh0b2FzdCkge1xuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMuZGVzdHJveSh0b2FzdCksIHRvYXN0LmNvbmZpZy5kdXJhdGlvbik7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uQ2xpY2sodG9hc3RDb21wb25lbnQsIHRvYXN0KSB7XG4gICAgICAgIHRvYXN0Q29tcG9uZW50LmRlc3Ryb3kuc3Vic2NyaWJlKCgpID0+IHRoaXMuZGVzdHJveSh0b2FzdCkpO1xuICAgIH1cbiAgICB1cGRhdGVDb250YWluZXIoKSB7XG4gICAgICAgIHBhdGNoKHRoaXMuY29udGFpbmVyUmVmLCB7IGNvbnRlbnQ6IHRoaXMudG9hc3RzLCBwb3NpdGlvbjogdGhpcy5wb3NpdGlvbiB9KTtcbiAgICB9XG59XG5jbGFzcyBOYlRvYXN0ckNvbnRhaW5lclJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3RvcihvdmVybGF5LCBwb3NpdGlvbkJ1aWxkZXIsIHBvc2l0aW9uSGVscGVyLCBjZnIsIGRvY3VtZW50KSB7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLnBvc2l0aW9uSGVscGVyID0gcG9zaXRpb25IZWxwZXI7XG4gICAgICAgIHRoaXMuY2ZyID0gY2ZyO1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSBuZXcgTWFwKCk7XG4gICAgfVxuICAgIGdldChwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBsb2dpY2FsUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uSGVscGVyLnRvTG9naWNhbFBvc2l0aW9uKHBvc2l0aW9uKTtcbiAgICAgICAgY29uc3Qgb3ZlcmxheVdpdGhDb250YWluZXIgPSB0aGlzLm92ZXJsYXlzLmdldChsb2dpY2FsUG9zaXRpb24pO1xuICAgICAgICBpZiAoIW92ZXJsYXlXaXRoQ29udGFpbmVyIHx8ICF0aGlzLmV4aXN0c0luRG9tKG92ZXJsYXlXaXRoQ29udGFpbmVyLnRvYXN0ckNvbnRhaW5lcikpIHtcbiAgICAgICAgICAgIGlmIChvdmVybGF5V2l0aENvbnRhaW5lcikge1xuICAgICAgICAgICAgICAgIG92ZXJsYXlXaXRoQ29udGFpbmVyLm92ZXJsYXlSZWYuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pbnN0YW50aWF0ZUNvbnRhaW5lcihsb2dpY2FsUG9zaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlzLmdldChsb2dpY2FsUG9zaXRpb24pLnRvYXN0ckNvbnRhaW5lcjtcbiAgICB9XG4gICAgaW5zdGFudGlhdGVDb250YWluZXIocG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgdG9hc3RyT3ZlcmxheVdpdGhDb250YWluZXIgPSB0aGlzLmNyZWF0ZUNvbnRhaW5lcihwb3NpdGlvbik7XG4gICAgICAgIHRoaXMub3ZlcmxheXMuc2V0KHBvc2l0aW9uLCB0b2FzdHJPdmVybGF5V2l0aENvbnRhaW5lcik7XG4gICAgfVxuICAgIGNyZWF0ZUNvbnRhaW5lcihwb3NpdGlvbikge1xuICAgICAgICBjb25zdCBwb3NpdGlvblN0cmF0ZWd5ID0gdGhpcy5wb3NpdGlvbkJ1aWxkZXIuZ2xvYmFsKCkucG9zaXRpb24ocG9zaXRpb24pO1xuICAgICAgICBjb25zdCByZWYgPSB0aGlzLm92ZXJsYXkuY3JlYXRlKHsgcG9zaXRpb25TdHJhdGVneSB9KTtcbiAgICAgICAgdGhpcy5hZGRDbGFzc1RvT3ZlcmxheUhvc3QocmVmKTtcbiAgICAgICAgY29uc3QgY29udGFpbmVyUmVmID0gcmVmLmF0dGFjaChuZXcgTmJDb21wb25lbnRQb3J0YWwoTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQsIG51bGwsIG51bGwsIHRoaXMuY2ZyKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvdmVybGF5UmVmOiByZWYsXG4gICAgICAgICAgICB0b2FzdHJDb250YWluZXI6IG5ldyBOYlRvYXN0Q29udGFpbmVyKHBvc2l0aW9uLCBjb250YWluZXJSZWYsIHRoaXMucG9zaXRpb25IZWxwZXIpLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRDbGFzc1RvT3ZlcmxheUhvc3Qob3ZlcmxheVJlZikge1xuICAgICAgICBvdmVybGF5UmVmLmhvc3RFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3RvYXN0ci1vdmVybGF5LWNvbnRhaW5lcicpO1xuICAgIH1cbiAgICBleGlzdHNJbkRvbSh0b2FzdENvbnRhaW5lcikge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudC5ib2R5LmNvbnRhaW5zKHRvYXN0Q29udGFpbmVyLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbn1cbk5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYk92ZXJsYXlTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iUG9zaXRpb25IZWxwZXIgfSxcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH1cbl07XG4vKipcbiAqIFRoZSBgTmJUb2FzdHJTZXJ2aWNlYCBwcm92aWRlcyBhIGNhcGFiaWxpdHkgdG8gYnVpbGQgdG9hc3Qgbm90aWZpY2F0aW9ucy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNob3djYXNlLCB0b2FzdHIvdG9hc3RyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBgTmJUb2FzdHJTZXJ2aWNlLnNob3cobWVzc2FnZSwgdGl0bGUsIGNvbmZpZylgIGFjY2VwdHMgdGhyZWUgcGFyYW1zLCB0aXRsZSBhbmQgY29uZmlnIGFyZSBvcHRpb25hbC5cbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlRvYXN0ck1vZHVsZS5mb3JSb290KClgIHRvIHlvdXIgYXBwIG1vZHVsZS5cbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJUb2FzdHJNb2R1bGUuZm9yUm9vdChjb25maWcpLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBDYWxsaW5nIGBOYlRvYXN0clNlcnZpY2Uuc2hvdyguLi4pYCB3aWxsIHJlbmRlciBuZXcgdG9hc3QgYW5kIHJldHVybiBgTmJUb2FzdHJSZWZgIHdpdGhcbiAqIGhlbHAgb2Ygd2hpY2ggeW91IG1heSBjbG9zZSBuZXdseSBjcmVhdGVkIHRvYXN0IGJ5IGNhbGxpbmcgYGNsb3NlYCBtZXRob2QuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHRvYXN0UmVmOiBOYlRvYXN0UmVmID0gdGhpcy50b2FzdHJTZXJ2aWNlLnNob3coLi4uKTtcbiAqIHRvYXN0UmVmLmNsb3NlKCk7XG4gKiBgYGBcbiAqXG4gKiBDb25maWcgYWNjZXB0cyBmb2xsb3dpbmcgb3B0aW9uczpcbiAqXG4gKiBgcG9zaXRpb25gIC0gZGV0ZXJtaW5lcyB3aGVyZSBvbiB0aGUgc2NyZWVuIHRvYXN0IHdpbGwgYmUgcmVuZGVyZWQuXG4gKiBEZWZhdWx0IGlzIGB0b3AtZW5kYC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFBvc2l0aW9uLCB0b2FzdHIvdG9hc3RyLXBvc2l0aW9ucy5jb21wb25lbnQpXG4gKlxuICogYHN0YXR1c2AgLSBjb2xvcmluZyBhbmQgaWNvbiBvZiB0aGUgdG9hc3QuXG4gKiBEZWZhdWx0IGlzIGBiYXNpY2AuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTdGF0dXMsIHRvYXN0ci90b2FzdHItc3RhdHVzZXMuY29tcG9uZW50KVxuICpcbiAqIGBkdXJhdGlvbmAgLSB0aGUgdGltZSBhZnRlciB3aGljaCB0aGUgdG9hc3Qgd2lsbCBiZSBkZXN0cm95ZWQuXG4gKiBgMGAgbWVhbnMgZW5kbGVzcyB0b2FzdCwgdGhhdCBtYXkgYmUgZGVzdHJveWVkIGJ5IGNsaWNrIG9ubHkuXG4gKiBEZWZhdWx0IGlzIDMwMDAgbXMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShEdXJhdGlvbiwgdG9hc3RyL3RvYXN0ci1kdXJhdGlvbi5jb21wb25lbnQpXG4gKlxuICogYGRlc3Ryb3lCeUNsaWNrYCAtIHByb3ZpZGVzIGEgY2FwYWJpbGl0eSB0byBkZXN0cm95IHRvYXN0IGJ5IGNsaWNrLlxuICogRGVmYXVsdCBpcyB0cnVlLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoRGVzdHJveSBieSBjbGljaywgdG9hc3RyL3RvYXN0ci1kZXN0cm95LWJ5LWNsaWNrLmNvbXBvbmVudClcbiAqXG4gKiBgcHJldmVudER1cGxpY2F0ZXNgIC0gZG9uJ3QgY3JlYXRlIG5ldyB0b2FzdCBpZiBpdCBoYXMgdGhlIHNhbWUgdGl0bGUsIG1lc3NhZ2UgYW5kIHN0YXR1cy5cbiAqIERlZmF1bHQgaXMgZmFsc2UuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQcmV2ZW50IGR1cGxpY2F0ZXMsIHRvYXN0ci90b2FzdHItcHJldmVudC1kdXBsaWNhdGVzLmNvbXBvbmVudClcbiAqXG4gKiBgZHVwbGljYXRlc0JlaGF2aW91cmAgLSBkZXRlcm1pbmVzIGhvdyB0byB0cmVhdCB0aGUgdG9hc3RzIGR1cGxpY2F0aW9uLlxuICogQ29tcGFyZSB3aXRoIHRoZSBwcmV2aW91cyBtZXNzYWdlIGBwcmV2aW91c2BcbiAqIG9yIHdpdGggYWxsIHZpc2libGUgbWVzc2FnZXMgYGFsbGAuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShQcmV2ZW50IGR1cGxpY2F0ZXMgYmVoYXZpb3VyICwgdG9hc3RyL3RvYXN0ci1wcmV2ZW50LWR1cGxpY2F0ZXMtYmVoYXZpb3VyLmNvbXBvbmVudClcbiAqXG4gKiBgbGltaXRgIC0gdGhlIG51bWJlciBvZiB2aXNpYmxlIHRvYXN0cyBpbiB0aGUgdG9hc3QgY29udGFpbmVyLiBUaGUgbnVtYmVyIG9mIHRvYXN0cyBpcyB1bmxpbWl0ZWQgYnkgZGVmYXVsdC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFByZXZlbnQgZHVwbGljYXRlcyBiZWhhdmlvdXIgLCB0b2FzdHIvdG9hc3RyLWxpbWl0LmNvbXBvbmVudClcbiAqXG4gKiBgaGFzSWNvbmAgLSBpZiB0cnVlIHRoZW4gcmVuZGVyIHRvYXN0IGljb24uXG4gKiBgaWNvbmAgLSB5b3UgY2FuIHBhc3MgaWNvbiBjbGFzcyB0aGF0IHdpbGwgYmUgYXBwbGllZCBpbnRvIHRoZSB0b2FzdC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEhhcyBpY29uLCB0b2FzdHIvdG9hc3RyLWljb24uY29tcG9uZW50KVxuICogKi9cbmNsYXNzIE5iVG9hc3RyU2VydmljZSB7XG4gICAgY29uc3RydWN0b3IoZ2xvYmFsQ29uZmlnLCBjb250YWluZXJSZWdpc3RyeSkge1xuICAgICAgICB0aGlzLmdsb2JhbENvbmZpZyA9IGdsb2JhbENvbmZpZztcbiAgICAgICAgdGhpcy5jb250YWluZXJSZWdpc3RyeSA9IGNvbnRhaW5lclJlZ2lzdHJ5O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaG93cyB0b2FzdCB3aXRoIG1lc3NhZ2UsIHRpdGxlIGFuZCB1c2VyIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIHNob3cobWVzc2FnZSwgdGl0bGUsIHVzZXJDb25maWcpIHtcbiAgICAgICAgY29uc3QgY29uZmlnID0gbmV3IE5iVG9hc3RyQ29uZmlnKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5nbG9iYWxDb25maWcpLCB1c2VyQ29uZmlnKSk7XG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGFpbmVyUmVnaXN0cnkuZ2V0KGNvbmZpZy5wb3NpdGlvbik7XG4gICAgICAgIGNvbnN0IHRvYXN0ID0geyBtZXNzYWdlLCB0aXRsZSwgY29uZmlnIH07XG4gICAgICAgIHJldHVybiBjb250YWluZXIuYXR0YWNoKHRvYXN0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvd3Mgc3VjY2VzcyB0b2FzdCB3aXRoIG1lc3NhZ2UsIHRpdGxlIGFuZCB1c2VyIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIHN1Y2Nlc3MobWVzc2FnZSwgdGl0bGUsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsIHRpdGxlLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyksIHsgc3RhdHVzOiAnc3VjY2VzcycgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaG93cyBpbmZvIHRvYXN0IHdpdGggbWVzc2FnZSwgdGl0bGUgYW5kIHVzZXIgY29uZmlnLlxuICAgICAqICovXG4gICAgaW5mbyhtZXNzYWdlLCB0aXRsZSwgY29uZmlnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNob3cobWVzc2FnZSwgdGl0bGUsIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgY29uZmlnKSwgeyBzdGF0dXM6ICdpbmZvJyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3dzIHdhcm5pbmcgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICB3YXJuaW5nKG1lc3NhZ2UsIHRpdGxlLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvdyhtZXNzYWdlLCB0aXRsZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ3dhcm5pbmcnIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2hvd3MgcHJpbWFyeSB0b2FzdCB3aXRoIG1lc3NhZ2UsIHRpdGxlIGFuZCB1c2VyIGNvbmZpZy5cbiAgICAgKiAqL1xuICAgIHByaW1hcnkobWVzc2FnZSwgdGl0bGUsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsIHRpdGxlLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyksIHsgc3RhdHVzOiAncHJpbWFyeScgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaG93cyBkYW5nZXIgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBkYW5nZXIobWVzc2FnZSwgdGl0bGUsIGNvbmZpZykge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93KG1lc3NhZ2UsIHRpdGxlLCBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIGNvbmZpZyksIHsgc3RhdHVzOiAnZGFuZ2VyJyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3dzIGRlZmF1bHQgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBkZWZhdWx0KG1lc3NhZ2UsIHRpdGxlLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hvdyhtZXNzYWdlLCB0aXRsZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ2Jhc2ljJyB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNob3dzIGNvbnRyb2wgdG9hc3Qgd2l0aCBtZXNzYWdlLCB0aXRsZSBhbmQgdXNlciBjb25maWcuXG4gICAgICogKi9cbiAgICBjb250cm9sKG1lc3NhZ2UsIHRpdGxlLCBjb25maWcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdChtZXNzYWdlLCB0aXRsZSwgT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjb25maWcpLCB7IHN0YXR1czogJ2NvbnRyb2wnIH0pKTtcbiAgICB9XG59XG5OYlRvYXN0clNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iVG9hc3RyU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iVG9hc3RyQ29uZmlnLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9UT0FTVFJfQ09ORklHLF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iVG9hc3RyQ29udGFpbmVyUmVnaXN0cnkgfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJUb2FzdHJNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KHRvYXN0ckNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJUb2FzdHJNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBOYlRvYXN0clNlcnZpY2UsXG4gICAgICAgICAgICAgICAgTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeSxcbiAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1RPQVNUUl9DT05GSUcsIHVzZVZhbHVlOiB0b2FzdHJDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJUb2FzdHJNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtOYlNoYXJlZE1vZHVsZSwgTmJPdmVybGF5TW9kdWxlLCBOYkljb25Nb2R1bGVdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iVG9hc3RyQ29udGFpbmVyQ29tcG9uZW50LCBOYlRvYXN0Q29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBlbnRyeUNvbXBvbmVudHM6IFtOYlRvYXN0ckNvbnRhaW5lckNvbXBvbmVudCwgTmJUb2FzdENvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJUb2FzdCB7XG59XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUb29sdGlwIGNvbnRhaW5lci5cbiAqIFJlbmRlcnMgcHJvdmlkZWQgdG9vbHRpcCBpbnNpZGUuXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRvb2x0aXAtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC1ib3JkZXItc3R5bGU6XG4gKiB0b29sdGlwLWJvcmRlci13aWR0aDpcbiAqIHRvb2x0aXAtYm9yZGVyLXJhZGl1czpcbiAqIHRvb2x0aXAtcGFkZGluZzpcbiAqIHRvb2x0aXAtdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtdGV4dC1mb250LWZhbWlseTpcbiAqIHRvb2x0aXAtdGV4dC1mb250LXNpemU6XG4gKiB0b29sdGlwLXRleHQtZm9udC13ZWlnaHQ6XG4gKiB0b29sdGlwLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b29sdGlwLWljb24taGVpZ2h0OlxuICogdG9vbHRpcC1pY29uLXdpZHRoOlxuICogdG9vbHRpcC1tYXgtd2lkdGg6XG4gKiB0b29sdGlwLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b29sdGlwLWJhc2ljLWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC1wcmltYXJ5LWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b29sdGlwLWluZm8tYm9yZGVyLWNvbG9yOlxuICogdG9vbHRpcC1pbmZvLXRleHQtY29sb3I6XG4gKiB0b29sdGlwLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiB0b29sdGlwLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9vbHRpcC13YXJuaW5nLWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtd2FybmluZy10ZXh0LWNvbG9yOlxuICogdG9vbHRpcC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHRvb2x0aXAtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiB0b29sdGlwLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvb2x0aXAtY29udHJvbC1ib3JkZXItY29sb3I6XG4gKiB0b29sdGlwLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHRvb2x0aXAtc2hhZG93OlxuICovXG5jbGFzcyBOYlRvb2x0aXBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFBvcG92ZXIgcG9zaXRpb24gcmVsYXRpdmVseSBob3N0IGVsZW1lbnQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMucG9zaXRpb24gPSBOYlBvc2l0aW9uLlRPUDtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0ge307XG4gICAgfVxuICAgIGdldCBiaW5kaW5nKCkge1xuICAgICAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGlvbn0gJHt0aGlzLnN0YXR1c0NsYXNzfWA7XG4gICAgfVxuICAgIGdldCBzaG93KCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IHN0YXR1c0NsYXNzKCkge1xuICAgICAgICBpZiAodGhpcy5jb250ZXh0LnN0YXR1cykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLmNvbnRleHQuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBtZXRob2QgaXMgZW1wdHkgc2luY2Ugd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZyBhZGRpdGlvbmFsbHlcbiAgICAgKiByZW5kZXIgaXMgaGFuZGxlZCBieSBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAgICovXG4gICAgcmVuZGVyQ29udGVudCgpIHsgfVxufVxuTmJUb29sdGlwQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi10b29sdGlwJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxzcGFuIGNsYXNzPVwiYXJyb3dcIj48L3NwYW4+XG4gICAgPGRpdiBjbGFzcz1cImNvbnRlbnRcIj5cbiAgICAgIDxuYi1pY29uICpuZ0lmPVwiY29udGV4dD8uaWNvblwiIFtjb25maWddPVwiY29udGV4dC5pY29uXCI+PC9uYi1pY29uPlxuICAgICAgPHNwYW4gKm5nSWY9XCJjb250ZW50XCI+e3sgY29udGVudCB9fTwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgYCxcbiAgICAgICAgICAgICAgICBhbmltYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIoJ3Nob3dUb29sdGlwJywgW1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGUoJ2luJywgc3R5bGUoeyBvcGFjaXR5OiAxIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24oJ3ZvaWQgPT4gKicsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHlsZSh7IG9wYWNpdHk6IDAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZSgxMDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCcqID0+IHZvaWQnLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZSgxMDAsIHN0eWxlKHsgb3BhY2l0eTogMCB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICAgICAgXSksXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e3otaW5kZXg6MTAwMDB9Omhvc3QgLmNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcn06aG9zdC5yaWdodCAuY29udGVudHtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZX06aG9zdCAuYXJyb3d7cG9zaXRpb246YWJzb2x1dGU7d2lkdGg6MDtoZWlnaHQ6MH06aG9zdCBuYi1pY29uK3NwYW57bWFyZ2luLWxlZnQ6MC41cmVtfTpob3N0LnJpZ2h0IG5iLWljb24rc3BhbnttYXJnaW4tcmlnaHQ6MC41cmVtfTpob3N0IC5hcnJvd3tib3JkZXItbGVmdDo2cHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJpZ2h0OjZweCBzb2xpZCB0cmFuc3BhcmVudH06aG9zdCguYm90dG9tKSAuYXJyb3d7dG9wOi02cHg7bGVmdDpjYWxjKDUwJSAtIDZweCl9Omhvc3QoLmJvdHRvbS1zdGFydCkgLmFycm93e3RvcDotNnB4fVtkaXI9bHRyXSA6aG9zdCguYm90dG9tLXN0YXJ0KSAuYXJyb3d7cmlnaHQ6NnB4fVtkaXI9cnRsXSA6aG9zdCguYm90dG9tLXN0YXJ0KSAuYXJyb3d7bGVmdDo2cHh9Omhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3t0b3A6LTZweH1bZGlyPWx0cl0gOmhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3tsZWZ0OjZweH1bZGlyPXJ0bF0gOmhvc3QoLmJvdHRvbS1lbmQpIC5hcnJvd3tyaWdodDo2cHh9Omhvc3QoLmxlZnQpIC5hcnJvdyw6aG9zdCguc3RhcnQpIC5hcnJvd3t0b3A6Y2FsYyg1MCUgLSAyLjRweCl9W2Rpcj1sdHJdIDpob3N0KC5sZWZ0KSAuYXJyb3csW2Rpcj1sdHJdIDpob3N0KC5zdGFydCkgLmFycm93e3JpZ2h0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9W2Rpcj1ydGxdIDpob3N0KC5sZWZ0KSAuYXJyb3csW2Rpcj1ydGxdIDpob3N0KC5zdGFydCkgLmFycm93e2xlZnQ6LThweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9Omhvc3QoLnN0YXJ0LXRvcCkgLmFycm93e3JpZ2h0Oi04cHg7Ym90dG9tOjZweDt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKX06aG9zdCguc3RhcnQtYm90dG9tKSAuYXJyb3d7cmlnaHQ6LThweDt0b3A6NnB4O3RyYW5zZm9ybTpyb3RhdGUoOTBkZWcpfTpob3N0KC50b3ApIC5hcnJvd3tib3R0b206LTZweDtsZWZ0OmNhbGMoNTAlIC0gNnB4KTt0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9Omhvc3QoLnRvcC1zdGFydCkgLmFycm93e2JvdHRvbTpjYWxjKC0xICogNnB4ICsgMXB4KTt0cmFuc2Zvcm06cm90YXRlKDE4MGRlZyl9W2Rpcj1sdHJdIDpob3N0KC50b3Atc3RhcnQpIC5hcnJvd3tyaWdodDo2cHh9W2Rpcj1ydGxdIDpob3N0KC50b3Atc3RhcnQpIC5hcnJvd3tsZWZ0OjZweH06aG9zdCgudG9wLWVuZCkgLmFycm93e2JvdHRvbTpjYWxjKC02cHggKyAxcHgpO3RyYW5zZm9ybTpyb3RhdGUoMTgwZGVnKX1bZGlyPWx0cl0gOmhvc3QoLnRvcC1lbmQpIC5hcnJvd3tsZWZ0OjZweH1bZGlyPXJ0bF0gOmhvc3QoLnRvcC1lbmQpIC5hcnJvd3tyaWdodDo2cHh9Omhvc3QoLnJpZ2h0KSAuYXJyb3csOmhvc3QoLmVuZCkgLmFycm93e3RvcDpjYWxjKDUwJSAtIDIuNHB4KX1bZGlyPWx0cl0gOmhvc3QoLnJpZ2h0KSAuYXJyb3csW2Rpcj1sdHJdIDpob3N0KC5lbmQpIC5hcnJvd3tsZWZ0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSgyNzBkZWcpfVtkaXI9cnRsXSA6aG9zdCgucmlnaHQpIC5hcnJvdyxbZGlyPXJ0bF0gOmhvc3QoLmVuZCkgLmFycm93e3JpZ2h0Oi04cHg7dHJhbnNmb3JtOnJvdGF0ZSg5MGRlZyl9Omhvc3QoLmVuZC10b3ApIC5hcnJvd3tsZWZ0OmNhbGMoLTZweCAtIDZweCAvIDIuNSk7Ym90dG9tOjZweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9Omhvc3QoLmVuZC1ib3R0b20pIC5hcnJvd3tsZWZ0OmNhbGMoLTZweCAtIDZweCAvIDIuNSk7dG9wOjZweDt0cmFuc2Zvcm06cm90YXRlKDI3MGRlZyl9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iVG9vbHRpcENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJUb29sdGlwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbnRlbnQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBvc2l0aW9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBiaW5kaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcycsXSB9XSxcbiAgICBzaG93OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydAc2hvd1Rvb2x0aXAnLF0gfV0sXG4gICAgY29udGV4dDogW3sgdHlwZTogSW5wdXQgfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKlxuICogVG9vbHRpcCBkaXJlY3RpdmUgZm9yIHNtYWxsIHRleHQvaWNvbiBoaW50cy5cbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlRvb2x0aXBNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVG9vbHRpcE1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgdG9vbHRpcC90b29sdGlwLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBUb29sdGlwIGNhbiBhY2NlcHQgYSBoaW50IHRleHQgYW5kL29yIGFuIGljb246XG4gKiBAc3RhY2tlZC1leGFtcGxlKFdpdGggSWNvbiwgdG9vbHRpcC90b29sdGlwLXdpdGgtaWNvbi5jb21wb25lbnQpXG4gKlxuICogU2FtZSB3YXkgYXMgUG9wb3ZlciwgdG9vbHRpcCBjYW4gYWNjZXB0IHBsYWNlbWVudCBwb3NpdGlvbiB3aXRoIGBuYlRvb2x0aXBQbGFjZW1lbnRgIHByb3BlcnR5OlxuICogQHN0YWNrZWQtZXhhbXBsZShQbGFjZW1lbnRzLCB0b29sdGlwL3Rvb2x0aXAtcGxhY2VtZW50cy5jb21wb25lbnQpXG4gKlxuICogSXQgaXMgYWxzbyBwb3NzaWJsZSB0byBzcGVjaWZ5IHRvb2x0aXAgY29sb3IgdXNpbmcgYG5iVG9vbHRpcFN0YXR1c2AgcHJvcGVydHk6XG4gKiBAc3RhY2tlZC1leGFtcGxlKENvbG9yZWQgVG9vbHRpcHMsIHRvb2x0aXAvdG9vbHRpcC1jb2xvcnMuY29tcG9uZW50KVxuICpcbiAqIFRvb2x0aXAgaGFzIGEgbnVtYmVyIG9mIHRyaWdnZXJzIHdoaWNoIHByb3ZpZGVzIGFuIGFiaWxpdHkgdG8gc2hvdyBhbmQgaGlkZSB0aGUgY29tcG9uZW50IGluIGRpZmZlcmVudCB3YXlzOlxuICpcbiAqIC0gQ2xpY2sgbW9kZSBzaG93cyB0aGUgY29tcG9uZW50IHdoZW4gYSB1c2VyIGNsaWNrcyBvbiB0aGUgaG9zdCBlbGVtZW50IGFuZCBoaWRlcyB3aGVuIHRoZSB1c2VyIGNsaWNrc1xuICogc29tZXdoZXJlIG9uIHRoZSBkb2N1bWVudCBvdXRzaWRlIHRoZSBjb21wb25lbnQuXG4gKiAtIEhpbnQgcHJvdmlkZXMgY2FwYWJpbGl0eSB0byBzaG93IHRoZSBjb21wb25lbnQgd2hlbiB0aGUgdXNlciBob3ZlcnMgb3ZlciB0aGUgaG9zdCBlbGVtZW50XG4gKiBhbmQgaGlkZSB3aGVuIHRoZSB1c2VyIGhvdmVycyBvdXQgb2YgdGhlIGhvc3QuXG4gKiAtIEhvdmVyIHdvcmtzIGxpa2UgaGludCBtb2RlIHdpdGggb25lIGV4Y2VwdGlvbiAtIHdoZW4gdGhlIHVzZXIgbW92ZXMgbW91c2UgZnJvbSBob3N0IGVsZW1lbnQgdG9cbiAqIHRoZSBjb250YWluZXIgZWxlbWVudCB0aGUgY29tcG9uZW50IHJlbWFpbnMgb3Blbiwgc28gdGhhdCBpdCBpcyBwb3NzaWJsZSB0byBpbnRlcmFjdCB3aXRoIGl0IGNvbnRlbnQuXG4gKiAtIEZvY3VzIG1vZGUgaXMgYXBwbGllZCB3aGVuIHVzZXIgZm9jdXNlcyB0aGUgZWxlbWVudC5cbiAqIC0gTm9vcCBtb2RlIC0gdGhlIGNvbXBvbmVudCB3b24ndCByZWFjdCB0byB0aGUgdXNlciBpbnRlcmFjdGlvbi5cbiAqL1xuY2xhc3MgTmJUb29sdGlwRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmLCBkeW5hbWljT3ZlcmxheUhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXIgPSBkeW5hbWljT3ZlcmxheUhhbmRsZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnRvb2x0aXBDb21wb25lbnQgPSBOYlRvb2x0aXBDb21wb25lbnQ7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogUG9zaXRpb24gd2lsbCBiZSBjYWxjdWxhdGVkIHJlbGF0aXZlbHkgaG9zdCBlbGVtZW50IGJhc2VkIG9uIHRoZSBwb3NpdGlvbi5cbiAgICAgICAgICogQ2FuIGJlIHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCwgc3RhcnQgb3IgZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IE5iUG9zaXRpb24uVE9QO1xuICAgICAgICB0aGlzLl9hZGp1c3RtZW50ID0gTmJBZGp1c3RtZW50LkNMT0NLV0lTRTtcbiAgICAgICAgdGhpcy5fdG9vbHRpcENsYXNzID0gJyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBEZXNjcmliZXMgd2hlbiB0aGUgY29udGFpbmVyIHdpbGwgYmUgc2hvd24uXG4gICAgICAgICAqIEF2YWlsYWJsZSBvcHRpb25zOiBgY2xpY2tgLCBgaG92ZXJgLCBgaGludGAsIGBmb2N1c2AgYW5kIGBub29wYFxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnRyaWdnZXIgPSBOYlRyaWdnZXIuSElOVDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgdG9vbHRpcCBvdmVybGF5IG9mZnNldCAoaW4gcGl4ZWxzKS5cbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLm9mZnNldCA9IDg7XG4gICAgICAgIHRoaXMubmJUb29sdGlwU2hvd1N0YXRlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLm92ZXJsYXlDb25maWcgPSB7IHBhbmVsQ2xhc3M6IHRoaXMudG9vbHRpcENsYXNzIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnRhaW5lciBwb3NpdGlvbiB3aWxsIGNoYW5nZSBhdXRvbWF0aWNhbGx5IGJhc2VkIG9uIHRoaXMgc3RyYXRlZ3kgaWYgY29udGFpbmVyIGNhbid0IGZpdCB2aWV3IHBvcnQuXG4gICAgICogU2V0IHRoaXMgcHJvcGVydHkgdG8gYG5vb3BgIHZhbHVlIGlmIHlvdSB3YW50IHRvIGRpc2FibGUgYXV0b21hdGljIGFkanVzdG1lbnQuXG4gICAgICogQXZhaWxhYmxlIHZhbHVlczogYGNsb2Nrd2lzZWAgKGRlZmF1bHQpLCBgY291bnRlcmNsb2Nrd2lzZWAsIGB2ZXJ0aWNhbGAsIGBob3Jpem9udGFsYCwgYG5vb3BgLlxuICAgICAqL1xuICAgIGdldCBhZGp1c3RtZW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRqdXN0bWVudDtcbiAgICB9XG4gICAgc2V0IGFkanVzdG1lbnQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fYWRqdXN0bWVudCA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgdG9vbHRpcENsYXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdG9vbHRpcENsYXNzO1xuICAgIH1cbiAgICBzZXQgdG9vbHRpcENsYXNzKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy50b29sdGlwQ2xhc3MpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rvb2x0aXBDbGFzcyA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5Q29uZmlnID0geyBwYW5lbENsYXNzOiB0aGlzLnRvb2x0aXBDbGFzcyB9O1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgaWNvbiBuYW1lIG9yIGljb24gY29uZmlnIG9iamVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgTmJJY29uQ29uZmlnfSBpY29uIG5hbWUgb3IgY29uZmlnIG9iamVjdFxuICAgICAqL1xuICAgIHNldCBpY29uKGljb24pIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQsIHsgaWNvbiB9KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc3RhdHVzXG4gICAgICovXG4gICAgc2V0IHN0YXR1cyhzdGF0dXMpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gT2JqZWN0LmFzc2lnbih0aGlzLmNvbnRleHQsIHsgc3RhdHVzIH0pO1xuICAgIH1cbiAgICBnZXQgaXNTaG93bigpIHtcbiAgICAgICAgcmV0dXJuICEhKHRoaXMuZHluYW1pY092ZXJsYXkgJiYgdGhpcy5keW5hbWljT3ZlcmxheS5pc0F0dGFjaGVkKTtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXlIYW5kbGVyXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYpXG4gICAgICAgICAgICAuY29tcG9uZW50VHlwZSh0aGlzLnRvb2x0aXBDb21wb25lbnQpXG4gICAgICAgICAgICAub2Zmc2V0KHRoaXMub2Zmc2V0KTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIHRoaXMucmVidWlsZCgpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkgPSB0aGlzLmNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KClcbiAgICAgICAgICAgIC5idWlsZCgpO1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5LmlzU2hvd25cbiAgICAgICAgICAgIC5waXBlKHNraXAoMSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGlzU2hvd24pID0+IHRoaXMubmJUb29sdGlwU2hvd1N0YXRlQ2hhbmdlLmVtaXQoeyBpc1Nob3duIH0pKTtcbiAgICB9XG4gICAgcmVidWlsZCgpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheSA9IHRoaXMuY29uZmlndXJlRHluYW1pY092ZXJsYXkoKVxuICAgICAgICAgICAgLnJlYnVpbGQoKTtcbiAgICB9XG4gICAgc2hvdygpIHtcbiAgICAgICAgdGhpcy5keW5hbWljT3ZlcmxheS5zaG93KCk7XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkuaGlkZSgpO1xuICAgIH1cbiAgICB0b2dnbGUoKSB7XG4gICAgICAgIHRoaXMuZHluYW1pY092ZXJsYXkudG9nZ2xlKCk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmR5bmFtaWNPdmVybGF5SGFuZGxlci5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGNvbmZpZ3VyZUR5bmFtaWNPdmVybGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5keW5hbWljT3ZlcmxheUhhbmRsZXJcbiAgICAgICAgICAgIC5wb3NpdGlvbih0aGlzLnBvc2l0aW9uKVxuICAgICAgICAgICAgLnRyaWdnZXIodGhpcy50cmlnZ2VyKVxuICAgICAgICAgICAgLmFkanVzdG1lbnQodGhpcy5hZGp1c3RtZW50KVxuICAgICAgICAgICAgLmNvbnRlbnQodGhpcy5jb250ZW50KVxuICAgICAgICAgICAgLmNvbnRleHQodGhpcy5jb250ZXh0KVxuICAgICAgICAgICAgLm92ZXJsYXlDb25maWcodGhpcy5vdmVybGF5Q29uZmlnKTtcbiAgICB9XG59XG5OYlRvb2x0aXBEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRvb2x0aXBdJyxcbiAgICAgICAgICAgICAgICBleHBvcnRBczogJ25iVG9vbHRpcCcsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbTmJEeW5hbWljT3ZlcmxheUhhbmRsZXIsIE5iRHluYW1pY092ZXJsYXldLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRvb2x0aXBEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBOYkR5bmFtaWNPdmVybGF5SGFuZGxlciB9XG5dO1xuTmJUb29sdGlwRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbnRlbnQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVG9vbHRpcCcsXSB9XSxcbiAgICBwb3NpdGlvbjogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJUb29sdGlwUGxhY2VtZW50JyxdIH1dLFxuICAgIGFkanVzdG1lbnQ6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVG9vbHRpcEFkanVzdG1lbnQnLF0gfV0sXG4gICAgdG9vbHRpcENsYXNzOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRvb2x0aXBDbGFzcycsXSB9XSxcbiAgICBpY29uOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRvb2x0aXBJY29uJyxdIH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJUb29sdGlwU3RhdHVzJyxdIH1dLFxuICAgIHRyaWdnZXI6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVG9vbHRpcFRyaWdnZXInLF0gfV0sXG4gICAgb2Zmc2V0OiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRvb2x0aXBPZmZzZXQnLF0gfV0sXG4gICAgbmJUb29sdGlwU2hvd1N0YXRlQ2hhbmdlOiBbeyB0eXBlOiBPdXRwdXQgfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJUb29sdGlwTW9kdWxlIHtcbn1cbk5iVG9vbHRpcE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW05iU2hhcmVkTW9kdWxlLCBOYk92ZXJsYXlNb2R1bGUsIE5iSWNvbk1vZHVsZV0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbTmJUb29sdGlwQ29tcG9uZW50LCBOYlRvb2x0aXBEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYlRvb2x0aXBEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGVudHJ5Q29tcG9uZW50czogW05iVG9vbHRpcENvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuY29uc3QgTkJfU0VMRUNUX0lOSkVDVElPTl9UT0tFTiA9IG5ldyBJbmplY3Rpb25Ub2tlbignTkJfU0VMRUNUX0lOSkVDVElPTl9UT0tFTicpO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8vIENvbXBvbmVudCBjbGFzcyBzY29wZWQgY291bnRlciBmb3IgYXJpYSBhdHRyaWJ1dGVzLlxubGV0IGxhc3RPcHRpb25JZCA9IDA7XG4vKipcbiAqIE5iT3B0aW9uQ29tcG9uZW50XG4gKlxuICogQHN0eWxlc1xuICpcbiAqIG9wdGlvbi1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLXRleHQtY29sb3I6XG4gKiBvcHRpb24tdGV4dC1mb250LWZhbWlseTpcbiAqIG9wdGlvbi1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLWhvdmVyLXRleHQtY29sb3I6XG4gKiBvcHRpb24tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tYWN0aXZlLXRleHQtY29sb3I6XG4gKiBvcHRpb24tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG9wdGlvbi1mb2N1cy10ZXh0LWNvbG9yOlxuICogb3B0aW9uLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi1zZWxlY3RlZC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogb3B0aW9uLXNlbGVjdGVkLWhvdmVyLXRleHQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtYWN0aXZlLXRleHQtY29sb3I6XG4gKiBvcHRpb24tc2VsZWN0ZWQtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG9wdGlvbi1zZWxlY3RlZC1mb2N1cy10ZXh0LWNvbG9yOlxuICogb3B0aW9uLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBvcHRpb24tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi10aW55LXRleHQtZm9udC1zaXplOlxuICogb3B0aW9uLXRpbnktdGV4dC1mb250LXdlaWdodDpcbiAqIG9wdGlvbi10aW55LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tdGlueS1wYWRkaW5nOlxuICogb3B0aW9uLXNtYWxsLXRleHQtZm9udC1zaXplOlxuICogb3B0aW9uLXNtYWxsLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBvcHRpb24tc21hbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIG9wdGlvbi1zbWFsbC1wYWRkaW5nOlxuICogb3B0aW9uLW1lZGl1bS10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1tZWRpdW0tdGV4dC1mb250LXdlaWdodDpcbiAqIG9wdGlvbi1tZWRpdW0tdGV4dC1saW5lLWhlaWdodDpcbiAqIG9wdGlvbi1tZWRpdW0tcGFkZGluZzpcbiAqIG9wdGlvbi1sYXJnZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1sYXJnZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogb3B0aW9uLWxhcmdlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tbGFyZ2UtcGFkZGluZzpcbiAqIG9wdGlvbi1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIG9wdGlvbi1naWFudC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogb3B0aW9uLWdpYW50LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBvcHRpb24tZ2lhbnQtcGFkZGluZzpcbiAqKi9cbmNsYXNzIE5iT3B0aW9uQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihwYXJlbnQsIGVsZW1lbnRSZWYsIGNkLCB6b25lLCByZW5kZXJlcikge1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuem9uZSA9IHpvbmU7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5kaXNhYmxlZEJ5R3JvdXAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEZpcmVzIHZhbHVlIHdoZW4gb3B0aW9uIHNlbGVjdGlvbiBjaGFuZ2UuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMuc2VsZWN0aW9uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmlyZXMgd2hlbiBvcHRpb24gY2xpY2tlZFxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGljayQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWxpdmUgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcG9uZW50IHNjb3BlZCBpZCBmb3IgYXJpYSBhdHRyaWJ1dGVzLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmlkID0gYG5iLW9wdGlvbi0ke2xhc3RPcHRpb25JZCsrfWA7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHBhcmVudDtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGlzYWJsZWQgfHwgdGhpcy5kaXNhYmxlZEJ5R3JvdXA7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBjbGljaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xpY2skLmFzT2JzZXJ2YWJsZSgpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGZhbHNlO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIC8vIFRPRE86ICMyMjU0XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsICduYi10cmFuc2l0aW9uJyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBzaG91bGQgd2UgcmVuZGVyIGNoZWNrYm94LlxuICAgICAqICovXG4gICAgZ2V0IHdpdGhDaGVja2JveCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXVsdGlwbGUgJiYgdGhpcy52YWx1ZSAhPSBudWxsO1xuICAgIH1cbiAgICBnZXQgY29udGVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnRleHRDb250ZW50O1xuICAgIH1cbiAgICAvLyBUT0RPOiByZXBsYWNlIHdpdGggaXNTaG93Q2hlY2tib3ggcHJvcGVydHkgdG8gY29udHJvbCB0aGlzIGJlaGF2aW91ciBvdXRzaWRlLCBpc3N1ZXMvMTk2NVxuICAgIGdldCBtdWx0aXBsZSgpIHtcbiAgICAgICAgLy8gV2UgY2hlY2sgcGFyZW50IGV4aXN0aW5nIGJlY2F1c2UgcGFyZW50IGNhbiBiZSBOYlNlbGVjdENvbXBvbmVudCBvclxuICAgICAgICAvLyBOYkF1dG9jb21wbGV0ZSBhbmQgYG1pbHRpcGxlYCBwcm9wZXJ0eSBleGlzdHMgb25seSBpbiBOYlNlbGVjdENvbXBvbmVudFxuICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5tdWx0aXBsZSA6IGZhbHNlO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWRDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0ZWQ7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZEF0dHJpYnV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAnJyA6IG51bGw7XG4gICAgfVxuICAgIGdldCB0YWJpbmRleCgpIHtcbiAgICAgICAgcmV0dXJuICctMSc7XG4gICAgfVxuICAgIGdldCBhY3RpdmVDbGFzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FjdGl2ZTtcbiAgICB9XG4gICAgO1xuICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jbGljayQubmV4dCh0aGlzKTtcbiAgICAgICAgLy8gUHJldmVudCBzY3JvbGwgb24gc3BhY2UgY2xpY2ssIGV0Yy5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG4gICAgc2VsZWN0KCkge1xuICAgICAgICB0aGlzLnNldFNlbGVjdGlvbih0cnVlKTtcbiAgICB9XG4gICAgZGVzZWxlY3QoKSB7XG4gICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKGZhbHNlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBkaXNhYmxlZCBieSBncm91cCBzdGF0ZSBhbmQgbWFya3MgY29tcG9uZW50IGZvciBjaGVjay5cbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZEJ5R3JvdXBTdGF0ZShkaXNhYmxlZCkge1xuICAgICAgICAvLyBDaGVjayBpZiB0aGUgY29tcG9uZW50IHN0aWxsIGFsaXZlIGFzIHRoZSBvcHRpb24gZ3JvdXAgZGVmZXIgbWV0aG9kIGNhbGwgc28gdGhlIGNvbXBvbmVudCBtYXkgYmVjb21lIGRlc3Ryb3llZC5cbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWRCeUdyb3VwICE9PSBkaXNhYmxlZCAmJiB0aGlzLmFsaXZlKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkQnlHcm91cCA9IGRpc2FibGVkO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRTZWxlY3Rpb24oc2VsZWN0ZWQpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluIGNhc2Ugb2YgY2hhbmdpbmcgb3B0aW9ucyBpbiBydW50aW1lIHRoZSByZWZlcmVuY2UgdG8gdGhlIHNlbGVjdGVkIG9wdGlvbiB3aWxsIGJlIGtlcHQgaW4gc2VsZWN0IGNvbXBvbmVudC5cbiAgICAgICAgICogVGhpcyBtYXkgbGVhZCB0byBleGNlcHRpb25zIHdpdGggZGV0ZWN0aW5nIGNoYW5nZXMgaW4gZGVzdHJveWVkIGNvbXBvbmVudC5cbiAgICAgICAgICpcbiAgICAgICAgICogQWxzbyBBbmd1bGFyIGNhbiBjYWxsIHdyaXRlVmFsdWUgb24gZGVzdHJveWVkIHZpZXcgKHNlbGVjdCBpbXBsZW1lbnRzIENvbnRyb2xWYWx1ZUFjY2Vzc29yKS5cbiAgICAgICAgICogYW5ndWxhci9hbmd1bGFyIzI3ODAzXG4gICAgICAgICAqICovXG4gICAgICAgIGlmICh0aGlzLmFsaXZlICYmIHRoaXMuc2VsZWN0ZWQgIT09IHNlbGVjdGVkKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkNoYW5nZS5lbWl0KHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1cygpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICB9XG4gICAgZ2V0TGFiZWwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRlbnQ7XG4gICAgfVxuICAgIHNldEFjdGl2ZVN0eWxlcygpIHtcbiAgICAgICAgdGhpcy5fYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0SW5hY3RpdmVTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMuX2FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbn1cbk5iT3B0aW9uQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1vcHRpb24nLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPG5iLWNoZWNrYm94ICpuZ0lmPVwid2l0aENoZWNrYm94XCJcbiAgICAgICAgICAgICAgICAgW2NoZWNrZWRdPVwic2VsZWN0ZWRcIlxuICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgICAgICBhcmlhLWhpZGRlbj1cInRydWVcIj5cbiAgICA8L25iLWNoZWNrYm94PlxuICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIi8qIVxcbiAqIEBsaWNlbnNlXFxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXFxuICovOmhvc3R7ZGlzcGxheTpmbGV4fTpob3N0OmhvdmVye2N1cnNvcjpwb2ludGVyfTpob3N0IG5iLWNoZWNrYm94e2Rpc3BsYXk6ZmxleDtwb2ludGVyLWV2ZW50czpub25lfVtkaXI9bHRyXSA6aG9zdCBuYi1jaGVja2JveHttYXJnaW4tcmlnaHQ6LjVyZW19W2Rpcj1ydGxdIDpob3N0IG5iLWNoZWNrYm94e21hcmdpbi1sZWZ0Oi41cmVtfTpob3N0IG5iLWNoZWNrYm94IDo6bmctZGVlcCAubGFiZWx7cGFkZGluZzowfTpob3N0KFtkaXNhYmxlZF0pe3BvaW50ZXItZXZlbnRzOm5vbmV9Omhvc3QoLm5iLXRyYW5zaXRpb24pe3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTpiYWNrZ3JvdW5kLWNvbG9yLGNvbG9yO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iT3B0aW9uQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IEluamVjdCwgYXJnczogW05CX1NFTEVDVF9JTkpFQ1RJT05fVE9LRU4sXSB9XSB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH1cbl07XG5OYk9wdGlvbkNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICB2YWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHNlbGVjdGlvbkNoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIGlkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLmlkJyxdIH1dLFxuICAgIG11bHRpcGxlOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5tdWx0aXBsZScsXSB9XSxcbiAgICBzZWxlY3RlZENsYXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zZWxlY3RlZCcsXSB9XSxcbiAgICBkaXNhYmxlZEF0dHJpYnV0ZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5kaXNhYmxlZCcsXSB9XSxcbiAgICB0YWJpbmRleDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsndGFiSW5kZXgnLF0gfV0sXG4gICAgYWN0aXZlQ2xhc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjdGl2ZScsXSB9XSxcbiAgICBvbkNsaWNrOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLCBbJyRldmVudCddLF0gfSwgeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsna2V5ZG93bi5zcGFjZScsIFsnJGV2ZW50J10sXSB9LCB7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmVudGVyJywgWyckZXZlbnQnXSxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iU2VsZWN0TGFiZWxDb21wb25lbnQge1xufVxuTmJTZWxlY3RMYWJlbENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2VsZWN0LWxhYmVsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogJzxuZy1jb250ZW50PjwvbmctY29udGVudD4nXG4gICAgICAgICAgICB9LF0gfVxuXTtcbmZ1bmN0aW9uIG5iU2VsZWN0Rm9ybUZpZWxkQ29udHJvbENvbmZpZ0ZhY3RvcnkoKSB7XG4gICAgY29uc3QgY29uZmlnID0gbmV3IE5iRm9ybUZpZWxkQ29udHJvbENvbmZpZygpO1xuICAgIGNvbmZpZy5zdXBwb3J0c1N1ZmZpeCA9IGZhbHNlO1xuICAgIHJldHVybiBjb25maWc7XG59XG4vKipcbiAqIFRoZSBgTmJTZWxlY3RDb21wb25lbnRgIHByb3ZpZGVzIGEgY2FwYWJpbGl0eSB0byBzZWxlY3Qgb25lIG9mIHRoZSBwYXNzZWQgaXRlbXMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgc2VsZWN0L3NlbGVjdC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJTZWxlY3RNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iU2VsZWN0TW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBJZiB5b3Ugd2FudCB0byB1c2UgaXQgYXMgdGhlIG11bHRpLXNlbGVjdCBjb250cm9sIHlvdSBoYXZlIHRvIG1hcmsgaXQgYXMgYG11bHRpcGxlYC5cbiAqIEluIHRoaXMgY2FzZSwgYG5iLXNlbGVjdGAgd2lsbCB3b3JrIG9ubHkgd2l0aCBhcnJheXMgLSBhY2NlcHQgYXJyYXlzIGFuZCBwcm9wYWdhdGUgYXJyYXlzLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoTXVsdGlwbGUsIHNlbGVjdC9zZWxlY3QtbXVsdGlwbGUuY29tcG9uZW50KVxuICpcbiAqIEl0ZW1zIHdpdGhvdXQgdmFsdWVzIHdpbGwgY2xlYW4gdGhlIHNlbGVjdGlvbi4gQm90aCBgbnVsbGAgYW5kIGB1bmRlZmluZWRgIHZhbHVlcyB3aWxsIGFsc28gY2xlYW4gdGhlIHNlbGVjdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKENsZWFuIHNlbGVjdGlvbiwgc2VsZWN0L3NlbGVjdC1jbGVhbi5jb21wb25lbnQpXG4gKlxuICogU2VsZWN0IG1heSBiZSBib3VuZGVkIHVzaW5nIGBzZWxlY3RlZGAgaW5wdXQ6XG4gKlxuICogYGBgaHRtbFxuICogPG5iLXNlbGVjdCBbKHNlbGVjdGVkKV09XCJzZWxlY3RlZFwiPjwvbmItc2VsZWN0ZWQ+XG4gKiBgYGBcbiAqXG4gKiBPciB5b3UgY2FuIGJpbmQgY29udHJvbCB3aXRoIGZvcm0gY29udHJvbHMgb3IgbmdNb2RlbDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNlbGVjdCBmb3JtIGJpbmRpbmcsIHNlbGVjdC9zZWxlY3QtZm9ybS5jb21wb25lbnQpXG4gKlxuICogT3B0aW9ucyBpbiB0aGUgc2VsZWN0IG1heSBiZSBncm91cGVkIHVzaW5nIGBuYi1vcHRpb24tZ3JvdXBgIGNvbXBvbmVudC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEdyb3VwaW5nLCBzZWxlY3Qvc2VsZWN0LWdyb3Vwcy5jb21wb25lbnQpXG4gKlxuICogU2VsZWN0IG1heSBoYXZlIGEgcGxhY2Vob2xkZXIgdGhhdCB3aWxsIGJlIHNob3duIHdoZW4gbm90aGluZyBzZWxlY3RlZDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFBsYWNlaG9sZGVyLCBzZWxlY3Qvc2VsZWN0LXBsYWNlaG9sZGVyLmNvbXBvbmVudClcbiAqXG4gKiBZb3UgY2FuIGRpc2FibGUgc2VsZWN0LCBvcHRpb25zIGFuZCB3aG9sZSBncm91cHMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCBzZWxlY3QsIHNlbGVjdC9zZWxlY3QtZGlzYWJsZWQuY29tcG9uZW50KVxuICpcbiAqIEFsc28sIHRoZSBjdXN0b20gbGFiZWwgbWF5IGJlIHByb3ZpZGVkIGluIHNlbGVjdC5cbiAqIFRoaXMgY3VzdG9tIGxhYmVsIHdpbGwgYmUgdXNlZCBmb3IgaW5zdGVhZCBwbGFjZWhvbGRlciB3aGVuIHNvbWV0aGluZyBzZWxlY3RlZC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBsYWJlbCwgc2VsZWN0L3NlbGVjdC1sYWJlbC5jb21wb25lbnQpXG4gKlxuICogRGVmYXVsdCBgbmItc2VsZWN0YCBzaXplIGlzIGBtZWRpdW1gIGFuZCBzdGF0dXMgaXMgYGJhc2ljYC5cbiAqIFNlbGVjdCBpcyBhdmFpbGFibGUgaW4gbXVsdGlwbGUgY29sb3JzIHVzaW5nIGBzdGF0dXNgIHByb3BlcnR5OlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2VsZWN0IHN0YXR1c2VzLCBzZWxlY3Qvc2VsZWN0LXN0YXR1cy5jb21wb25lbnQpXG4gKlxuICogVGhlcmUgYXJlIGZpdmUgc2VsZWN0IHNpemVzOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2VsZWN0IHNpemVzLCBzZWxlY3Qvc2VsZWN0LXNpemVzLmNvbXBvbmVudClcbiAqXG4gKiBBbmQgdHdvIGFkZGl0aW9uYWwgc3R5bGUgdHlwZXMgLSBgZmlsbGVkYDpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEZpbGxlZCBzZWxlY3QsIHNlbGVjdC9zZWxlY3QtZmlsbGVkLmNvbXBvbmVudClcbiAqXG4gKiBhbmQgYGhlcm9gOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2VsZWN0IGNvbG9ycywgc2VsZWN0L3NlbGVjdC1oZXJvLmNvbXBvbmVudClcbiAqXG4gKiBTZWxlY3QgaXMgYXZhaWxhYmxlIGluIGRpZmZlcmVudCBzaGFwZXMsIHRoYXQgY291bGQgYmUgY29tYmluZWQgd2l0aCB0aGUgb3RoZXIgcHJvcGVydGllczpcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNlbGVjdCBzaGFwZXMsIHNlbGVjdC9zZWxlY3Qtc2hhcGVzLmNvbXBvbmVudClcbiAqXG4gKiBCeSBkZWZhdWx0LCB0aGUgY29tcG9uZW50IHNlbGVjdHMgb3B0aW9ucyB3aG9zZSB2YWx1ZXMgYXJlIHN0cmljdGx5IGVxdWFsIChgPT09YCkgd2l0aCB0aGUgc2VsZWN0IHZhbHVlLlxuICogVG8gY2hhbmdlIHN1Y2ggYmVoYXZpb3IsIHBhc3MgYSBjdXN0b20gY29tcGFyYXRvciBmdW5jdGlvbiB0byB0aGUgYGNvbXBhcmVXaXRoYCBhdHRyaWJ1dGUuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTZWxlY3QgY3VzdG9tIGNvbXBhcmF0b3IsIHNlbGVjdC9zZWxlY3QtY29tcGFyZS13aXRoLmNvbXBvbmVudClcbiAqXG4gKiBZb3UgY2FuIGFkZCBhbiBhZGRpdGlvbmFsIGljb24gdG8gdGhlIHNlbGVjdCB2aWEgdGhlIGBuYi1mb3JtLWZpZWxkYCBjb21wb25lbnQ6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFNlbGVjdCB3aXRoIGljb24sIHNlbGVjdC9zZWxlY3QtaWNvbi5jb21wb25lbnQpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShJbnRlcmFjdGl2ZSwgc2VsZWN0L3NlbGVjdC1pbnRlcmFjdGl2ZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHNlbGVjdC1jdXJzb3I6XG4gKiBzZWxlY3QtZGlzYWJsZWQtY3Vyc29yOlxuICogc2VsZWN0LW1pbi13aWR0aDpcbiAqIHNlbGVjdC1vdXRsaW5lLXdpZHRoOlxuICogc2VsZWN0LW91dGxpbmUtY29sb3I6XG4gKiBzZWxlY3QtaWNvbi1vZmZzZXQ6XG4gKiBzZWxlY3QtdGV4dC1mb250LWZhbWlseTpcbiAqIHNlbGVjdC1wbGFjZWhvbGRlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogc2VsZWN0LXRpbnktdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3QtdGlueS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LXRpbnktdGV4dC1saW5lLWhlaWdodDpcbiAqIHNlbGVjdC10aW55LXBsYWNlaG9sZGVyLXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LXRpbnktcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC10aW55LW1heC13aWR0aDpcbiAqIHNlbGVjdC1zbWFsbC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1zbWFsbC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LXNtYWxsLXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzZWxlY3Qtc21hbGwtcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3Qtc21hbGwtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1zbWFsbC1tYXgtd2lkdGg6XG4gKiBzZWxlY3QtbWVkaXVtLXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LW1lZGl1bS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LW1lZGl1bS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogc2VsZWN0LW1lZGl1bS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1tZWRpdW0tcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1tZWRpdW0tbWF4LXdpZHRoOlxuICogc2VsZWN0LWxhcmdlLXRleHQtZm9udC1zaXplOlxuICogc2VsZWN0LWxhcmdlLXRleHQtZm9udC13ZWlnaHQ6XG4gKiBzZWxlY3QtbGFyZ2UtdGV4dC1saW5lLWhlaWdodDpcbiAqIHNlbGVjdC1sYXJnZS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1sYXJnZS1wbGFjZWhvbGRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LWxhcmdlLW1heC13aWR0aDpcbiAqIHNlbGVjdC1naWFudC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHNlbGVjdC1naWFudC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogc2VsZWN0LWdpYW50LXRleHQtbGluZS1oZWlnaHQ6XG4gKiBzZWxlY3QtZ2lhbnQtcGxhY2Vob2xkZXItdGV4dC1mb250LXNpemU6XG4gKiBzZWxlY3QtZ2lhbnQtcGxhY2Vob2xkZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHNlbGVjdC1naWFudC1tYXgtd2lkdGg6XG4gKiBzZWxlY3QtcmVjdGFuZ2xlLWJvcmRlci1yYWRpdXM6XG4gKiBzZWxlY3Qtc2VtaS1yb3VuZC1ib3JkZXItcmFkaXVzOlxuICogc2VsZWN0LXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiBzZWxlY3Qtb3V0bGluZS1ib3JkZXItc3R5bGU6XG4gKiBzZWxlY3Qtb3V0bGluZS1ib3JkZXItd2lkdGg6XG4gKiBzZWxlY3Qtb3V0bGluZS10aW55LXBhZGRpbmc6XG4gKiBzZWxlY3Qtb3V0bGluZS1zbWFsbC1wYWRkaW5nOlxuICogc2VsZWN0LW91dGxpbmUtbWVkaXVtLXBhZGRpbmc6XG4gKiBzZWxlY3Qtb3V0bGluZS1sYXJnZS1wYWRkaW5nOlxuICogc2VsZWN0LW91dGxpbmUtZ2lhbnQtcGFkZGluZzpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8tZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8tZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWluZm8tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWRhbmdlci1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtZGFuZ2VyLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtYWRqYWNlbnQtYm9yZGVyLXN0eWxlOlxuICogc2VsZWN0LW91dGxpbmUtYWRqYWNlbnQtYm9yZGVyLXdpZHRoOlxuICogc2VsZWN0LW91dGxpbmUtYmFzaWMtb3Blbi1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1iYXNpYy1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1wcmltYXJ5LW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtcHJpbWFyeS1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1zdWNjZXNzLW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtc3VjY2Vzcy1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1pbmZvLW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtaW5mby1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS13YXJuaW5nLW9wZW4tYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtd2FybmluZy1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItb3Blbi1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3Qtb3V0bGluZS1kYW5nZXItYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LW91dGxpbmUtY29udHJvbC1vcGVuLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1vdXRsaW5lLWNvbnRyb2wtYWRqYWNlbnQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1ib3JkZXItc3R5bGU6XG4gKiBzZWxlY3QtZmlsbGVkLWJvcmRlci13aWR0aDpcbiAqIHNlbGVjdC1maWxsZWQtdGlueS1wYWRkaW5nOlxuICogc2VsZWN0LWZpbGxlZC1zbWFsbC1wYWRkaW5nOlxuICogc2VsZWN0LWZpbGxlZC1tZWRpdW0tcGFkZGluZzpcbiAqIHNlbGVjdC1maWxsZWQtbGFyZ2UtcGFkZGluZzpcbiAqIHNlbGVjdC1maWxsZWQtZ2lhbnQtcGFkZGluZzpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1iYXNpYy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtcHJpbWFyeS1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1wcmltYXJ5LWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXN1Y2Nlc3MtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtc3VjY2Vzcy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1zdWNjZXNzLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8taWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1pbmZvLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWluZm8tZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtaW5mby1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtd2FybmluZy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC13YXJuaW5nLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtZGFuZ2VyLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWRhbmdlci1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtZmlsbGVkLWNvbnRyb2wtcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHNlbGVjdC1maWxsZWQtY29udHJvbC1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWZpbGxlZC1jb250cm9sLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby10aW55LXBhZGRpbmc6XG4gKiBzZWxlY3QtaGVyby1zbWFsbC1wYWRkaW5nOlxuICogc2VsZWN0LWhlcm8tbWVkaXVtLXBhZGRpbmc6XG4gKiBzZWxlY3QtaGVyby1sYXJnZS1wYWRkaW5nOlxuICogc2VsZWN0LWhlcm8tZ2lhbnQtcGFkZGluZzpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLXBsYWNlaG9sZGVyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1mb2N1cy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtaG92ZXItbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1iYXNpYy1kaXNhYmxlZC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tcHJpbWFyeS1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1wcmltYXJ5LWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tc3VjY2Vzcy1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1zdWNjZXNzLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8taW5mby1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1pbmZvLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8taG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWluZm8tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8td2FybmluZy1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby13YXJuaW5nLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLXRleHQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItcGxhY2Vob2xkZXItdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItZm9jdXMtcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1ob3Zlci1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWRhbmdlci1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tZGFuZ2VyLWRpc2FibGVkLWljb24tY29sb3I6XG4gKiBzZWxlY3QtaGVyby1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtbGVmdC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1yaWdodC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1pY29uLWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1wbGFjZWhvbGRlci10ZXh0LWNvbG9yOlxuICogc2VsZWN0LWhlcm8tY29udHJvbC1mb2N1cy1sZWZ0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWZvY3VzLXJpZ2h0LWJhY2tncm91bmQtY29sb3I6XG4gKiBzZWxlY3QtaGVyby1jb250cm9sLWhvdmVyLWxlZnQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtaG92ZXItcmlnaHQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtZGlzYWJsZWQtaWNvbi1jb2xvcjpcbiAqIHNlbGVjdC1oZXJvLWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqICovXG5jbGFzcyBOYlNlbGVjdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnQsIG92ZXJsYXksIGhvc3RSZWYsIHBvc2l0aW9uQnVpbGRlciwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgY2QsIGZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlLCBmb2N1c01vbml0b3IsIHJlbmRlcmVyLCB6b25lLCBzdGF0dXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkJ1aWxkZXIgPSBwb3NpdGlvbkJ1aWxkZXI7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlciA9IHRyaWdnZXJTdHJhdGVneUJ1aWxkZXI7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5mb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSA9IGZvY3VzS2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlO1xuICAgICAgICB0aGlzLmZvY3VzTW9uaXRvciA9IGZvY3VzTW9uaXRvcjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2VsZWN0IHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsIGBnaWFudGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICAvKipcbiAgICAgICAgICogU2VsZWN0IHN0YXR1cyAoYWRkcyBzcGVjaWZpYyBzdHlsZXMpOlxuICAgICAgICAgKiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc3RhdHVzID0gJ2Jhc2ljJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNlbGVjdCBzaGFwZXM6IGByZWN0YW5nbGVgIChkZWZhdWx0KSwgYHJvdW5kYCwgYHNlbWktcm91bmRgXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNoYXBlID0gJ3JlY3RhbmdsZSc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZWxlY3QgYXBwZWFyYW5jZXM6IGBvdXRsaW5lYCAoZGVmYXVsdCksIGBmaWxsZWRgLCBgaGVyb2BcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdvdXRsaW5lJztcbiAgICAgICAgdGhpcy5fZnVsbFdpZHRoID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSZW5kZXJzIHNlbGVjdCBwbGFjZWhvbGRlciBpZiBub3RoaW5nIHNlbGVjdGVkLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyID0gJyc7XG4gICAgICAgIHRoaXMuX2NvbXBhcmVXaXRoID0gKHYxLCB2MikgPT4gdjEgPT09IHYyO1xuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBvcHRpb25zIG92ZXJsYXkgb2Zmc2V0IChpbiBwaXhlbHMpLlxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMub3B0aW9uc092ZXJsYXlPZmZzZXQgPSA4O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBvcHRpb25zIG92ZXJsYXkgc2Nyb2xsIHN0cmF0ZWd5LlxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuc2Nyb2xsU3RyYXRlZ3kgPSAnYmxvY2snO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsbCBiZSBlbWl0dGVkIHdoZW4gc2VsZWN0ZWQgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIExpc3Qgb2Ygc2VsZWN0ZWQgb3B0aW9ucy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbCA9IFtdO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ3VycmVudCBvdmVybGF5IHBvc2l0aW9uIGJlY2F1c2Ugb2Ygd2UgaGF2ZSB0byB0b2dnbGUgb3ZlcmxheVBvc2l0aW9uXG4gICAgICAgICAqIGluIFtuZ0NsYXNzXSBkaXJlY3Rpb24gYW5kIHRoaXMgZGlyZWN0aXZlIGNhbiB1c2Ugb25seSBzdHJpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbiA9ICcnO1xuICAgICAgICB0aGlzLmFsaXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBGdW5jdGlvbiBwYXNzZWQgdGhyb3VnaCBjb250cm9sIHZhbHVlIGFjY2Vzc29yIHRvIHByb3BhZ2F0ZSBjaGFuZ2VzLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gKCkgPT4geyB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9ICgpID0+IHsgfTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuc3RhdHVzJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodGhpcy5zdGF0dXMpO1xuICAgICAgICAvKlxuICAgICAgICAgKiBAZG9jcy1wcml2YXRlXG4gICAgICAgICAqKi9cbiAgICAgICAgdGhpcy5zaXplJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodGhpcy5zaXplKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuZm9jdXNlZCQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZhbHNlKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuZGlzYWJsZWQkID0gbmV3IEJlaGF2aW9yU3ViamVjdCh0aGlzLmRpc2FibGVkKTtcbiAgICAgICAgLypcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMuZnVsbFdpZHRoJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodGhpcy5mdWxsV2lkdGgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGBvdXRsaW5lYCBzdHlsZXNcbiAgICAgKi9cbiAgICBnZXQgb3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ291dGxpbmUnO1xuICAgIH1cbiAgICBzZXQgb3V0bGluZSh2YWx1ZSkge1xuICAgICAgICBpZiAoY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ291dGxpbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYGZpbGxlZGAgc3R5bGVzXG4gICAgICovXG4gICAgZ2V0IGZpbGxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ2ZpbGxlZCc7XG4gICAgfVxuICAgIHNldCBmaWxsZWQodmFsdWUpIHtcbiAgICAgICAgaWYgKGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuYXBwZWFyYW5jZSA9ICdmaWxsZWQnO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYGhlcm9gIHN0eWxlc1xuICAgICAqL1xuICAgIGdldCBoZXJvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hcHBlYXJhbmNlID09PSAnaGVybyc7XG4gICAgfVxuICAgIHNldCBoZXJvKHZhbHVlKSB7XG4gICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnaGVybyc7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogRGlzYWJsZXMgdGhlIHNlbGVjdFxuICAgICAqL1xuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5fZGlzYWJsZWQ7XG4gICAgfVxuICAgIHNldCBkaXNhYmxlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHNldCBlbGVtZW50IHdpbGwgZmlsbCBpdHMgY29udGFpbmVyXG4gICAgICovXG4gICAgZ2V0IGZ1bGxXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Z1bGxXaWR0aDtcbiAgICB9XG4gICAgc2V0IGZ1bGxXaWR0aCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9mdWxsV2lkdGggPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRvIGNvbXBhcmUgb3B0aW9uIHZhbHVlIHdpdGggc2VsZWN0ZWQgdmFsdWUuXG4gICAgICogQnkgZGVmYXVsdCwgdmFsdWVzIGFyZSBjb21wYXJlZCB3aXRoIHN0cmljdCBlcXVhbGl0eSAoYD09PWApLlxuICAgICAqL1xuICAgIGdldCBjb21wYXJlV2l0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2NvbXBhcmVXaXRoO1xuICAgIH1cbiAgICBzZXQgY29tcGFyZVdpdGgoZm4pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbXBhcmVXaXRoID0gZm47XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGVsLmxlbmd0aCAmJiB0aGlzLmNhblNlbGVjdFZhbHVlKCkpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0aW9uKHRoaXMuc2VsZWN0ZWQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFjY2VwdHMgc2VsZWN0ZWQgaXRlbSBvciBhcnJheSBvZiBzZWxlY3RlZCBpdGVtcy5cbiAgICAgKiAqL1xuICAgIHNldCBzZWxlY3RlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLndyaXRlVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm11bHRpcGxlXG4gICAgICAgICAgICA/IHRoaXMuc2VsZWN0aW9uTW9kZWwubWFwKG8gPT4gby52YWx1ZSlcbiAgICAgICAgICAgIDogdGhpcy5zZWxlY3Rpb25Nb2RlbFswXS52YWx1ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZXMgY2FwYWJpbGl0eSBqdXN0IHdyaXRlIGBtdWx0aXBsZWAgb3ZlciB0aGUgZWxlbWVudC5cbiAgICAgKiAqL1xuICAgIGdldCBtdWx0aXBsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgIH1cbiAgICBzZXQgbXVsdGlwbGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpcyBzZWxlY3Qgb3BlbmVkLlxuICAgICAqICovXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmICYmIHRoaXMucmVmLmhhc0F0dGFjaGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaXMgc2VsZWN0IGhpZGRlbi5cbiAgICAgKiAqL1xuICAgIGdldCBpc0hpZGRlbigpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aWR0aCBvZiB0aGUgc2VsZWN0IGJ1dHRvbi5cbiAgICAgKiAqL1xuICAgIGdldCBob3N0V2lkdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJ1dHRvbi5uYXRpdmVFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgIH1cbiAgICBnZXQgc2VsZWN0QnV0dG9uQ2xhc3NlcygpIHtcbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtdO1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0aW9uTW9kZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goJ3BsYWNlaG9sZGVyJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF0aGlzLnNlbGVjdGlvbk1vZGVsLmxlbmd0aCAmJiAhdGhpcy5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKCdlbXB0eScpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgY2xhc3Nlcy5wdXNoKHRoaXMub3ZlcmxheVBvc2l0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2xhc3NlcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udGVudCByZW5kZXJlZCBpbiB0aGUgbGFiZWwuXG4gICAgICogKi9cbiAgICBnZXQgc2VsZWN0aW9uVmlldygpIHtcbiAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZWwubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VsZWN0aW9uTW9kZWwubWFwKChvcHRpb24pID0+IG9wdGlvbi5jb250ZW50KS5qb2luKCcsICcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnNlbGVjdGlvbk1vZGVsWzBdLmNvbnRlbnQ7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKHsgZGlzYWJsZWQsIHN0YXR1cywgc2l6ZSwgZnVsbFdpZHRoIH0pIHtcbiAgICAgICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmRpc2FibGVkJC5uZXh0KGRpc2FibGVkLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXR1cykge1xuICAgICAgICAgICAgdGhpcy5zdGF0dXMkLm5leHQoc3RhdHVzLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNpemUpIHtcbiAgICAgICAgICAgIHRoaXMuc2l6ZSQubmV4dChzaXplLmN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZ1bGxXaWR0aCkge1xuICAgICAgICAgICAgdGhpcy5mdWxsV2lkdGgkLm5leHQodGhpcy5mdWxsV2lkdGgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHN0YXJ0V2l0aCh0aGlzLm9wdGlvbnMpLCBmaWx0ZXIoKCkgPT4gdGhpcy5xdWV1ZSAhPSBudWxsICYmIHRoaXMuY2FuU2VsZWN0VmFsdWUoKSksIFxuICAgICAgICAvLyBDYWxsICd3cml0ZVZhbHVlJyB3aGVuIGN1cnJlbnQgY2hhbmdlIGRldGVjdGlvbiBydW4gaXMgZmluaXNoZWQuXG4gICAgICAgIC8vIFdoZW4gd3JpdGluZyBpcyBmaW5pc2hlZCwgY2hhbmdlIGRldGVjdGlvbiBzdGFydHMgYWdhaW4sIHNpbmNlXG4gICAgICAgIC8vIG1pY3JvdGFza3MgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgIC8vIFByZXZlbnRzIEV4cHJlc3Npb25DaGFuZ2VkQWZ0ZXJJdEhhc0JlZW5DaGVja2VkRXJyb3IuXG4gICAgICAgIHN3aXRjaE1hcCgob3B0aW9ucykgPT4gZnJvbShQcm9taXNlLnJlc29sdmUob3B0aW9ucykpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLndyaXRlVmFsdWUodGhpcy5xdWV1ZSkpO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbkJ1dHRvbkZvY3VzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25UcmlnZ2VycygpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uT3B0aW9uQ2xpY2soKTtcbiAgICAgICAgLy8gVE9ETzogIzIyNTRcbiAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5hbGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgICAgICBpZiAodGhpcy5yZWYpIHtcbiAgICAgICAgICAgIHRoaXMucmVmLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy50cmlnZ2VyU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93KCkge1xuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5hdHRhY2hUb092ZXJsYXkoKTtcbiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlT3B0aW9uKCk7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5yZWYuZGV0YWNoKCk7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlZ2lzdGVyT25DaGFuZ2UoZm4pIHtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmFsaXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2FuU2VsZWN0VmFsdWUoKSkge1xuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb24odmFsdWUpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0aW9uTW9kZWwubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VsZWN0cyBvcHRpb24gb3IgY2xlYXIgYWxsIHNlbGVjdGVkIG9wdGlvbnMgaWYgdmFsdWUgaXMgbnVsbC5cbiAgICAgKiAqL1xuICAgIGhhbmRsZU9wdGlvbkNsaWNrKG9wdGlvbikge1xuICAgICAgICB0aGlzLnF1ZXVlID0gbnVsbDtcbiAgICAgICAgaWYgKG9wdGlvbi52YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlc2VsZWN0IGFsbCBzZWxlY3RlZCBvcHRpb25zLlxuICAgICAqICovXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwuZm9yRWFjaCgob3B0aW9uKSA9PiBvcHRpb24uZGVzZWxlY3QoKSk7XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwgPSBbXTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgdGhpcy5lbWl0U2VsZWN0ZWQodGhpcy5tdWx0aXBsZSA/IFtdIDogbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaG93IHRvIHNlbGVjdCBvcHRpb24gYXMgbXVsdGlwbGUgb3Igc2luZ2xlLlxuICAgICAqICovXG4gICAgc2VsZWN0T3B0aW9uKG9wdGlvbikge1xuICAgICAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVNdWx0aXBsZVNlbGVjdChvcHRpb24pO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGVTZWxlY3Qob3B0aW9uKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3Qgc2luZ2xlIG9wdGlvbi5cbiAgICAgKiAqL1xuICAgIGhhbmRsZVNpbmdsZVNlbGVjdChvcHRpb24pIHtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGlvbk1vZGVsLnBvcCgpO1xuICAgICAgICBpZiAoc2VsZWN0ZWQgJiYgIXRoaXMuX2NvbXBhcmVXaXRoKHNlbGVjdGVkLnZhbHVlLCBvcHRpb24udmFsdWUpKSB7XG4gICAgICAgICAgICBzZWxlY3RlZC5kZXNlbGVjdCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0aW9uTW9kZWwgPSBbb3B0aW9uXTtcbiAgICAgICAgb3B0aW9uLnNlbGVjdCgpO1xuICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgdGhpcy5idXR0b24ubmF0aXZlRWxlbWVudC5mb2N1cygpO1xuICAgICAgICB0aGlzLmVtaXRTZWxlY3RlZChvcHRpb24udmFsdWUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTZWxlY3QgZm9yIG11bHRpcGxlIG9wdGlvbnMuXG4gICAgICogKi9cbiAgICBoYW5kbGVNdWx0aXBsZVNlbGVjdChvcHRpb24pIHtcbiAgICAgICAgaWYgKG9wdGlvbi5zZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbCA9IHRoaXMuc2VsZWN0aW9uTW9kZWwuZmlsdGVyKHMgPT4gIXRoaXMuX2NvbXBhcmVXaXRoKHMudmFsdWUsIG9wdGlvbi52YWx1ZSkpO1xuICAgICAgICAgICAgb3B0aW9uLmRlc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZGVsLnB1c2gob3B0aW9uKTtcbiAgICAgICAgICAgIG9wdGlvbi5zZWxlY3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmVtaXRTZWxlY3RlZCh0aGlzLnNlbGVjdGlvbk1vZGVsLm1hcCgob3B0KSA9PiBvcHQudmFsdWUpKTtcbiAgICB9XG4gICAgYXR0YWNoVG9PdmVybGF5KCkge1xuICAgICAgICBpZiAoIXRoaXMucmVmKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlT25Qb3NpdGlvbkNoYW5nZSgpO1xuICAgICAgICAgICAgdGhpcy5jcmVhdGVLZXlNYW5hZ2VyKCk7XG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZU9uT3ZlcmxheUtleXMoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlZi5hdHRhY2godGhpcy5wb3J0YWwpO1xuICAgIH1cbiAgICBzZXRBY3RpdmVPcHRpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLnNlbGVjdGlvbk1vZGVsLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLnNldEFjdGl2ZUl0ZW0odGhpcy5zZWxlY3Rpb25Nb2RlbFswXSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0Rmlyc3RJdGVtQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY3JlYXRlT3ZlcmxheSgpIHtcbiAgICAgICAgY29uc3Qgc2Nyb2xsU3RyYXRlZ3kgPSB0aGlzLmNyZWF0ZVNjcm9sbFN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICB0aGlzLnJlZiA9IHRoaXMub3ZlcmxheS5jcmVhdGUoe1xuICAgICAgICAgICAgcG9zaXRpb25TdHJhdGVneTogdGhpcy5wb3NpdGlvblN0cmF0ZWd5LFxuICAgICAgICAgICAgc2Nyb2xsU3RyYXRlZ3ksXG4gICAgICAgICAgICBwYW5lbENsYXNzOiB0aGlzLm9wdGlvbnNQYW5lbENsYXNzLFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlS2V5TWFuYWdlcigpIHtcbiAgICAgICAgdGhpcy5rZXlNYW5hZ2VyID0gdGhpcy5mb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZS5jcmVhdGUodGhpcy5vcHRpb25zKS53aXRoVHlwZUFoZWFkKDIwMCk7XG4gICAgfVxuICAgIGNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmNvbm5lY3RlZFRvKHRoaXMuYnV0dG9uKVxuICAgICAgICAgICAgLnBvc2l0aW9uKE5iUG9zaXRpb24uQk9UVE9NKVxuICAgICAgICAgICAgLm9mZnNldCh0aGlzLm9wdGlvbnNPdmVybGF5T2Zmc2V0KVxuICAgICAgICAgICAgLmFkanVzdG1lbnQoTmJBZGp1c3RtZW50LlZFUlRJQ0FMKTtcbiAgICB9XG4gICAgY3JlYXRlU2Nyb2xsU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llc1t0aGlzLnNjcm9sbFN0cmF0ZWd5XSgpO1xuICAgIH1cbiAgICBjcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXJcbiAgICAgICAgICAgIC50cmlnZ2VyKE5iVHJpZ2dlci5DTElDSylcbiAgICAgICAgICAgIC5ob3N0KHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50KVxuICAgICAgICAgICAgLmNvbnRhaW5lcigoKSA9PiB0aGlzLmdldENvbnRhaW5lcigpKVxuICAgICAgICAgICAgLmJ1aWxkKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uVHJpZ2dlcnMoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LnNob3ckLnN1YnNjcmliZSgoKSA9PiB0aGlzLnNob3coKSk7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LmhpZGUkXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pc09wZW4pKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoJGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0NsaWNrZWRXaXRoaW5Db21wb25lbnQoJGV2ZW50KSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPblBvc2l0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uU3RyYXRlZ3kucG9zaXRpb25DaGFuZ2VcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHBvc2l0aW9uKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICAgICAgdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbk9wdGlvbkNsaWNrKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHVzZXIgY2hhbmdlcyBwcm92aWRlZCBvcHRpb25zIGxpc3QgaW4gdGhlIHJ1bnRpbWUgd2UgaGF2ZSB0byBoYW5kbGUgdGhpc1xuICAgICAgICAgKiBhbmQgcmVzdWJzY3JpYmUgb24gb3B0aW9ucyBzZWxlY3Rpb24gY2hhbmdlcyBldmVudC5cbiAgICAgICAgICogT3RoZXJ3aXNlLCB0aGUgdXNlciB3aWxsIG5vdCBiZSBhYmxlIHRvIHNlbGVjdCBuZXcgb3B0aW9ucy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHN0YXJ0V2l0aCh0aGlzLm9wdGlvbnMpLCBzd2l0Y2hNYXAoKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBtZXJnZSguLi5vcHRpb25zLm1hcChvcHRpb24gPT4gb3B0aW9uLmNsaWNrKSk7XG4gICAgICAgIH0pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChjbGlja2VkT3B0aW9uKSA9PiB0aGlzLmhhbmRsZU9wdGlvbkNsaWNrKGNsaWNrZWRPcHRpb24pKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlT25PdmVybGF5S2V5cygpIHtcbiAgICAgICAgdGhpcy5yZWYua2V5ZG93bkV2ZW50cygpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pc09wZW4pLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEVTQ0FQRSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMua2V5TWFuYWdlci5vbktleWRvd24oZXZlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLnRhYk91dFxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIHRoaXMub25Ub3VjaGVkKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbkJ1dHRvbkZvY3VzKCkge1xuICAgICAgICB0aGlzLmZvY3VzTW9uaXRvci5tb25pdG9yKHRoaXMuYnV0dG9uKVxuICAgICAgICAgICAgLnBpcGUobWFwKG9yaWdpbiA9PiAhIW9yaWdpbiksIGZpbmFsaXplKCgpID0+IHRoaXMuZm9jdXNNb25pdG9yLnN0b3BNb25pdG9yaW5nKHRoaXMuYnV0dG9uKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUodGhpcy5mb2N1c2VkJCk7XG4gICAgfVxuICAgIGdldENvbnRhaW5lcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVmICYmIHRoaXMucmVmLmhhc0F0dGFjaGVkKCkgJiYge1xuICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICBuYXRpdmVFbGVtZW50OiB0aGlzLnJlZi5vdmVybGF5RWxlbWVudCxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFByb3BhZ2F0ZSBzZWxlY3RlZCB2YWx1ZS5cbiAgICAgKiAqL1xuICAgIGVtaXRTZWxlY3RlZChzZWxlY3RlZCkge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKHNlbGVjdGVkKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZS5lbWl0KHNlbGVjdGVkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHNlbGVjdGVkIHZhbHVlIGluIG1vZGVsLlxuICAgICAqICovXG4gICAgc2V0U2VsZWN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMubXVsdGlwbGUgJiYgIWlzQXJyYXkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FuXFwndCBhc3NpZ24gc2luZ2xlIHZhbHVlIGlmIHNlbGVjdCBpcyBtYXJrZWQgYXMgbXVsdGlwbGUnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5cXCd0IGFzc2lnbiBhcnJheSBpZiBzZWxlY3QgaXMgbm90IG1hcmtlZCBhcyBtdWx0aXBsZScpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbnMgPSB0aGlzLnNlbGVjdGlvbk1vZGVsO1xuICAgICAgICB0aGlzLnNlbGVjdGlvbk1vZGVsID0gW107XG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgICB2YWx1ZS5mb3JFYWNoKG9wdGlvbiA9PiB0aGlzLnNlbGVjdFZhbHVlKG9wdGlvbikpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gZmluZCBvcHRpb25zIHdoaWNoIHdlcmUgc2VsZWN0ZWQgYmVmb3JlIGFuZCB0cmlnZ2VyIGRlc2VsZWN0XG4gICAgICAgIHByZXZpb3VzbHlTZWxlY3RlZE9wdGlvbnNcbiAgICAgICAgICAgIC5maWx0ZXIoKG9wdGlvbikgPT4gIXRoaXMuc2VsZWN0aW9uTW9kZWwuaW5jbHVkZXMob3B0aW9uKSlcbiAgICAgICAgICAgIC5mb3JFYWNoKChvcHRpb24pID0+IG9wdGlvbi5kZXNlbGVjdCgpKTtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VsZWN0cyB2YWx1ZS5cbiAgICAgKiAqL1xuICAgIHNlbGVjdFZhbHVlKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGNvcnJlc3BvbmRpbmcgPSB0aGlzLm9wdGlvbnMuZmluZCgob3B0aW9uKSA9PiB0aGlzLl9jb21wYXJlV2l0aChvcHRpb24udmFsdWUsIHZhbHVlKSk7XG4gICAgICAgIGlmIChjb3JyZXNwb25kaW5nKSB7XG4gICAgICAgICAgICBjb3JyZXNwb25kaW5nLnNlbGVjdCgpO1xuICAgICAgICAgICAgdGhpcy5zZWxlY3Rpb25Nb2RlbC5wdXNoKGNvcnJlc3BvbmRpbmcpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNldHMgdG91Y2hlZCBpZiBmb2N1cyBtb3ZlZCBvdXRzaWRlIG9mIGJ1dHRvbiBhbmQgb3ZlcmxheSxcbiAgICAgKiBpZ25vcmluZyB0aGUgY2FzZSB3aGVuIGZvY3VzIG1vdmVkIHRvIG9wdGlvbnMgb3ZlcmxheS5cbiAgICAgKi9cbiAgICB0cnlTZXRUb3VjaGVkKCkge1xuICAgICAgICBpZiAodGhpcy5pc0hpZGRlbikge1xuICAgICAgICAgICAgdGhpcy5vblRvdWNoZWQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0NsaWNrZWRXaXRoaW5Db21wb25lbnQoJGV2ZW50KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudCA9PT0gJGV2ZW50LnRhcmdldCB8fCB0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudC5jb250YWlucygkZXZlbnQudGFyZ2V0KTtcbiAgICB9XG4gICAgY2FuU2VsZWN0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiAhISh0aGlzLm9wdGlvbnMgJiYgdGhpcy5vcHRpb25zLmxlbmd0aCk7XG4gICAgfVxuICAgIGdldCB0aW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzbWFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IGdpYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIGdldCBpbmZvKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdpbmZvJztcbiAgICB9XG4gICAgZ2V0IHN1Y2Nlc3MoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgfVxuICAgIGdldCBkYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgY29udHJvbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnY29udHJvbCc7XG4gICAgfVxuICAgIGdldCByZWN0YW5nbGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNoYXBlID09PSAncmVjdGFuZ2xlJztcbiAgICB9XG4gICAgZ2V0IHJvdW5kKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaGFwZSA9PT0gJ3JvdW5kJztcbiAgICB9XG4gICAgZ2V0IHNlbWlSb3VuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGUgPT09ICdzZW1pLXJvdW5kJztcbiAgICB9XG59XG5OYlNlbGVjdENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc2VsZWN0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogXCI8YnV0dG9uIFtkaXNhYmxlZF09XFxcImRpc2FibGVkXFxcIlxcbiAgICAgICAgW25nQ2xhc3NdPVxcXCJzZWxlY3RCdXR0b25DbGFzc2VzXFxcIlxcbiAgICAgICAgKGJsdXIpPVxcXCJ0cnlTZXRUb3VjaGVkKClcXFwiXFxuICAgICAgICAoa2V5ZG93bi5hcnJvd0Rvd24pPVxcXCJzaG93KClcXFwiXFxuICAgICAgICAoa2V5ZG93bi5hcnJvd1VwKT1cXFwic2hvdygpXFxcIlxcbiAgICAgICAgY2xhc3M9XFxcInNlbGVjdC1idXR0b25cXFwiXFxuICAgICAgICB0eXBlPVxcXCJidXR0b25cXFwiXFxuICAgICAgICAjc2VsZWN0QnV0dG9uPlxcblxcbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVxcXCJzZWxlY3Rpb25Nb2RlbC5sZW5ndGg7IGVsc2UgcGxhY2Vob2xkZXJUZW1wbGF0ZVxcXCI+XFxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cXFwiY3VzdG9tTGFiZWw7IGVsc2UgZGVmYXVsdFNlbGVjdGlvblRlbXBsYXRlXFxcIj5cXG4gICAgICAgIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItc2VsZWN0LWxhYmVsXFxcIj48L25nLWNvbnRlbnQ+XFxuICAgICAgPC9uZy1jb250YWluZXI+XFxuXFxuICAgICAgPG5nLXRlbXBsYXRlICNkZWZhdWx0U2VsZWN0aW9uVGVtcGxhdGU+e3sgc2VsZWN0aW9uVmlldyB9fTwvbmctdGVtcGxhdGU+XFxuICAgIDwvbmctY29udGFpbmVyPlxcblxcbiAgICA8bmctdGVtcGxhdGUgI3BsYWNlaG9sZGVyVGVtcGxhdGU+e3sgcGxhY2Vob2xkZXIgfX08L25nLXRlbXBsYXRlPlxcblxcbiAgICA8bmItaWNvbiBpY29uPVxcXCJjaGV2cm9uLWRvd24tb3V0bGluZVxcXCIgcGFjaz1cXFwibmVidWxhci1lc3NlbnRpYWxzXFxcIiAoY2xpY2spPVxcXCJkaXNhYmxlZCAmJiAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcXFwiIGFyaWEtaGlkZGVuPVxcXCJ0cnVlXFxcIj5cXG4gICAgPC9uYi1pY29uPlxcbjwvYnV0dG9uPlxcblxcbjxuYi1vcHRpb24tbGlzdCAqbmJQb3J0YWwgW3NpemVdPVxcXCJzaXplXFxcIiBbcG9zaXRpb25dPVxcXCJvdmVybGF5UG9zaXRpb25cXFwiIFtzdHlsZS53aWR0aC5weF09XFxcImhvc3RXaWR0aFxcXCIgW25nQ2xhc3NdPVxcXCJvcHRpb25zTGlzdENsYXNzXFxcIj5cXG4gIDxuZy1jb250ZW50IHNlbGVjdD1cXFwibmItb3B0aW9uLCBuYi1vcHRpb24tZ3JvdXBcXFwiPjwvbmctY29udGVudD5cXG48L25iLW9wdGlvbi1saXN0PlxcblwiLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5iU2VsZWN0Q29tcG9uZW50KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1NFTEVDVF9JTkpFQ1RJT05fVE9LRU4sIHVzZUV4aXN0aW5nOiBOYlNlbGVjdENvbXBvbmVudCB9LFxuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5iRm9ybUZpZWxkQ29udHJvbCwgdXNlRXhpc3Rpbmc6IE5iU2VsZWN0Q29tcG9uZW50IH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJGb3JtRmllbGRDb250cm9sQ29uZmlnLCB1c2VGYWN0b3J5OiBuYlNlbGVjdEZvcm1GaWVsZENvbnRyb2xDb25maWdGYWN0b3J5IH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIi8qIVxcbiAqIEBsaWNlbnNlXFxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXFxuICovOmhvc3R7ZGlzcGxheTppbmxpbmUtYmxvY2s7bWF4LXdpZHRoOjEwMCV9W2Rpcj1sdHJdIDpob3N0IC5zZWxlY3QtYnV0dG9ue3RleHQtYWxpZ246bGVmdH1bZGlyPWx0cl0gOmhvc3QgLnNlbGVjdC1idXR0b24gbmItaWNvbntyaWdodDowLjJlbX1bZGlyPXJ0bF0gOmhvc3QgLnNlbGVjdC1idXR0b257dGV4dC1hbGlnbjpyaWdodH1bZGlyPXJ0bF0gOmhvc3QgLnNlbGVjdC1idXR0b24gbmItaWNvbntsZWZ0OjAuMmVtfTpob3N0KC5mdWxsLXdpZHRoKXt3aWR0aDoxMDAlfTpob3N0KC5uYi10cmFuc2l0aW9uKSAuc2VsZWN0LWJ1dHRvbnt0cmFuc2l0aW9uLWR1cmF0aW9uOjAuMTVzO3RyYW5zaXRpb24tcHJvcGVydHk6YmFja2dyb3VuZC1jb2xvcixib3JkZXItY29sb3IsYm9yZGVyLXJhZGl1cyxib3gtc2hhZG93LGNvbG9yO3RyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uOmVhc2UtaW59LnNlbGVjdC1idXR0b257cG9zaXRpb246cmVsYXRpdmU7d2lkdGg6MTAwJTtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt0ZXh0LXRyYW5zZm9ybTpub25lO3doaXRlLXNwYWNlOm5vd3JhcH1uYi1pY29ue2ZvbnQtc2l6ZToxLjVlbTtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zaXRpb24tZHVyYXRpb246MC4xNXM7dHJhbnNpdGlvbi1wcm9wZXJ0eTp0cmFuc2Zvcm07dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbn1bZGlyPWx0cl0gbmItaWNvbntyaWdodDouNXJlbX1bZGlyPXJ0bF0gbmItaWNvbntsZWZ0Oi41cmVtfTpob3N0KC5vcGVuKSBuYi1pY29ue3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpIHJvdGF0ZSgxODBkZWcpfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlNlbGVjdENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5U2VydmljZSB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmJQb3NpdGlvbkJ1aWxkZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJGb2N1c01vbml0b3IgfSxcbiAgICB7IHR5cGU6IFJlbmRlcmVyMiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iU2VsZWN0Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNpemU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2hhcGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGFwcGVhcmFuY2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG9wdGlvbnNMaXN0Q2xhc3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG9wdGlvbnNQYW5lbENsYXNzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvdXRsaW5lOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFwcGVhcmFuY2Utb3V0bGluZScsXSB9XSxcbiAgICBmaWxsZWQ6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuYXBwZWFyYW5jZS1maWxsZWQnLF0gfV0sXG4gICAgaGVybzogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hcHBlYXJhbmNlLWhlcm8nLF0gfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZ1bGxXaWR0aDogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5mdWxsLXdpZHRoJyxdIH1dLFxuICAgIHBsYWNlaG9sZGVyOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjb21wYXJlV2l0aDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0ZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG11bHRpcGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBvcHRpb25zT3ZlcmxheU9mZnNldDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2Nyb2xsU3RyYXRlZ3k6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGFkZGl0aW9uYWxDbGFzc2VzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcycsXSB9XSxcbiAgICBzZWxlY3RlZENoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG9wdGlvbnM6IFt7IHR5cGU6IENvbnRlbnRDaGlsZHJlbiwgYXJnczogW05iT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0sXSB9XSxcbiAgICBjdXN0b21MYWJlbDogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbTmJTZWxlY3RMYWJlbENvbXBvbmVudCxdIH1dLFxuICAgIHBvcnRhbDogW3sgdHlwZTogVmlld0NoaWxkLCBhcmdzOiBbTmJQb3J0YWxEaXJlY3RpdmUsXSB9XSxcbiAgICBidXR0b246IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogWydzZWxlY3RCdXR0b24nLCB7IHJlYWQ6IEVsZW1lbnRSZWYgfSxdIH1dLFxuICAgIGlzT3BlbjogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Mub3BlbicsXSB9XSxcbiAgICB0aW55OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXRpbnknLF0gfV0sXG4gICAgc21hbGw6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtc21hbGwnLF0gfV0sXG4gICAgbWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBsYXJnZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1sYXJnZScsXSB9XSxcbiAgICBnaWFudDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1naWFudCcsXSB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBpbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICByZWN0YW5nbGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNoYXBlLXJlY3RhbmdsZScsXSB9XSxcbiAgICByb3VuZDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2hhcGUtcm91bmQnLF0gfV0sXG4gICAgc2VtaVJvdW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaGFwZS1zZW1pLXJvdW5kJyxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTmJPcHRpb25Hcm91cENvbXBvbmVudFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBvcHRpb24tZ3JvdXAtdGV4dC1jb2xvcjpcbiAqIG9wdGlvbi1ncm91cC10aW55LXN0YXJ0LXBhZGRpbmc6XG4gKiBvcHRpb24tZ3JvdXAtc21hbGwtc3RhcnQtcGFkZGluZzpcbiAqIG9wdGlvbi1ncm91cC1tZWRpdW0tc3RhcnQtcGFkZGluZzpcbiAqIG9wdGlvbi1ncm91cC1sYXJnZS1zdGFydC1wYWRkaW5nOlxuICogb3B0aW9uLWdyb3VwLWdpYW50LXN0YXJ0LXBhZGRpbmc6XG4gKiovXG5jbGFzcyBOYk9wdGlvbkdyb3VwQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkQXR0cmlidXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZCA/ICcnIDogbnVsbDtcbiAgICB9XG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5hc3luY1VwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5hc3luY1VwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyBkaXNhYmxlZCBzdGF0ZSBmb3IgZWFjaCBvcHRpb24gdG8gY3VycmVudCBncm91cCBkaXNhYmxlZCBzdGF0ZS5cbiAgICAgKi9cbiAgICB1cGRhdGVPcHRpb25zRGlzYWJsZWRTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmZvckVhY2goKG9wdGlvbikgPT4gb3B0aW9uLnNldERpc2FibGVkQnlHcm91cFN0YXRlKHRoaXMuZGlzYWJsZWQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvcHRpb25zIGRpc2FibGVkIHN0YXRlIGFmdGVyIHByb21pc2UgcmVzb2x1dGlvbi5cbiAgICAgKiBUaGlzIHdheSBjaGFuZ2UgZGV0ZWN0aW9uIHdpbGwgYmUgdHJpZ2dlcmVkIGFmdGVyIG9wdGlvbnMgc3RhdGUgdXBkYXRlZC5cbiAgICAgKiBVc2UgdGhpcyBtZXRob2Qgd2hlbiB1cGRhdGluZyBvcHRpb25zIGR1cmluZyBjaGFuZ2UgZGV0ZWN0aW9uIHJ1biAoZS5nLiBRdWVyeUxpc3QuY2hhbmdlcywgbGlmZWN5Y2xlIGhvb2tzKS5cbiAgICAgKi9cbiAgICBhc3luY1VwZGF0ZU9wdGlvbnNEaXNhYmxlZFN0YXRlKCkge1xuICAgICAgICAvLyBXcmFwIFByb21pc2UgaW50byBPYnNlcnZhYmxlIHdpdGggYHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKWAgdG8gcHJldmVudCB1cGRhdGUgaWYgY29tcG9uZW50IGRlc3Ryb3llZC5cbiAgICAgICAgZnJvbShQcm9taXNlLnJlc29sdmUoKSlcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy51cGRhdGVPcHRpb25zRGlzYWJsZWRTdGF0ZSgpKTtcbiAgICB9XG59XG5OYk9wdGlvbkdyb3VwQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1vcHRpb24tZ3JvdXAnLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPHNwYW4gY2xhc3M9XCJvcHRpb24tZ3JvdXAtdGl0bGVcIj57eyB0aXRsZSB9fTwvc3Bhbj5cbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1vcHRpb24sIG5nLWNvbnRhaW5lclwiPjwvbmctY29udGVudD5cbiAgYCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6YmxvY2t9Lm9wdGlvbi1ncm91cC10aXRsZXtkaXNwbGF5OmJsb2NrfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYk9wdGlvbkdyb3VwQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRpdGxlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBkaXNhYmxlZDogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWRBdHRyaWJ1dGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuZGlzYWJsZWQnLF0gfV0sXG4gICAgb3B0aW9uczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJPcHRpb25Db21wb25lbnQsIHsgZGVzY2VuZGFudHM6IHRydWUgfSxdIH1dXG59O1xuXG4vKipcbiAqIFRoZSBgTmJPcHRpb25MaXN0Q29tcG9uZW50YCBpcyBjb250YWluZXIgY29tcG9uZW50IGZvciBgTmJPcHRpb25Hcm91cENvbXBvbmVudGAgYW5kYE5iT3B0aW9uQ29tcG9uZW50YCBsaXN0LlxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBvcHRpb24tbGlzdC1tYXgtaGVpZ2h0OlxuICogb3B0aW9uLWxpc3Qtc2hhZG93OlxuICogb3B0aW9uLWxpc3QtYmFja2dyb3VuZC1jb2xvcjpcbiAqIG9wdGlvbi1saXN0LWJvcmRlci1zdHlsZTpcbiAqIG9wdGlvbi1saXN0LWJvcmRlci13aWR0aDpcbiAqIG9wdGlvbi1saXN0LWJvcmRlci1jb2xvcjpcbiAqIG9wdGlvbi1saXN0LWJvcmRlci1yYWRpdXM6XG4gKiBvcHRpb24tbGlzdC1hZGphY2VudC1ib3JkZXItY29sb3I6XG4gKiBvcHRpb24tbGlzdC1hZGphY2VudC1ib3JkZXItc3R5bGU6XG4gKiBvcHRpb24tbGlzdC1hZGphY2VudC1ib3JkZXItd2lkdGg6XG4gKiAqL1xuY2xhc3MgTmJPcHRpb25MaXN0Q29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaXplID0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBwb3NpdGlvblRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb24gPT09IE5iUG9zaXRpb24uVE9QO1xuICAgIH1cbiAgICBnZXQgcG9zaXRpb25Cb3R0b20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uID09PSBOYlBvc2l0aW9uLkJPVFRPTTtcbiAgICB9XG4gICAgZ2V0IHNpemVUaW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzaXplU21hbGwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdzbWFsbCc7XG4gICAgfVxuICAgIGdldCBzaXplTWVkaXVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgZ2V0IHNpemVMYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IHNpemVHaWFudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2dpYW50JztcbiAgICB9XG59XG5OYk9wdGlvbkxpc3RDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLW9wdGlvbi1saXN0JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDx1bCBjbGFzcz1cIm9wdGlvbi1saXN0XCI+XG4gICAgICA8bmctY29udGVudD48L25nLWNvbnRlbnQ+XG4gICAgPC91bD5cbiAgYCxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYk9wdGlvbkxpc3RDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcG9zaXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHBvc2l0aW9uVG9wOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5wb3NpdGlvbi10b3AnLF0gfV0sXG4gICAgcG9zaXRpb25Cb3R0b206IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnBvc2l0aW9uLWJvdHRvbScsXSB9XSxcbiAgICBzaXplVGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNpemVTbWFsbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1zbWFsbCcsXSB9XSxcbiAgICBzaXplTWVkaXVtOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLW1lZGl1bScsXSB9XSxcbiAgICBzaXplTGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgc2l6ZUdpYW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLWdpYW50JyxdIH1dXG59O1xuXG5jb25zdCBOQl9PUFRJT05fTElTVF9DT01QT05FTlRTID0gW1xuICAgIE5iT3B0aW9uTGlzdENvbXBvbmVudCxcbiAgICBOYk9wdGlvbkNvbXBvbmVudCxcbiAgICBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LFxuXTtcbmNsYXNzIE5iT3B0aW9uTW9kdWxlIHtcbn1cbk5iT3B0aW9uTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfT1BUSU9OX0xJU1RfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkNoZWNrYm94TW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9PUFRJT05fTElTVF9DT01QT05FTlRTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuY29uc3QgTkJfU0VMRUNUX0NPTVBPTkVOVFMgPSBbXG4gICAgTmJTZWxlY3RDb21wb25lbnQsXG4gICAgTmJTZWxlY3RMYWJlbENvbXBvbmVudCxcbl07XG5jbGFzcyBOYlNlbGVjdE1vZHVsZSB7XG59XG5OYlNlbGVjdE1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYlNoYXJlZE1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJPdmVybGF5TW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkJ1dHRvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJJbnB1dE1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJDYXJkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iT3B0aW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgICAgICAuLi5OQl9TRUxFQ1RfQ09NUE9ORU5UUyxcbiAgICAgICAgICAgICAgICAgICAgTmJPcHRpb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFsuLi5OQl9TRUxFQ1RfQ09NUE9ORU5UU10sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLy8gQ29tcG9uZW50IGNsYXNzIHNjb3BlZCBjb3VudGVyIGZvciBhcmlhIGF0dHJpYnV0ZXMuXG5sZXQgbGFzdEF1dG9jb21wbGV0ZUlkID0gMDtcbi8qKlxuICogVGhlIGBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudGAgb3ZlcmxheSBjb21wb25lbnQuXG4gKiBQcm92aWRlcyBhbiBgTmJPcHRpb25MaXN0YCBvdmVybGF5IGNvbXBvbmVudC5cbiAqICovXG5jbGFzcyBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY2QpIHtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENvbXBvbmVudCBzY29wZWQgaWQgZm9yIGFyaWEgYXR0cmlidXRlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5pZCA9IGBuYi1hdXRvY29tcGxldGUtJHtsYXN0QXV0b2NvbXBsZXRlSWQrK31gO1xuICAgICAgICAvKipcbiAgICAgICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAgICAgKiBDdXJyZW50IG92ZXJsYXkgcG9zaXRpb24gYmVjYXVzZSBvZiB3ZSBoYXZlIHRvIHRvZ2dsZSBvdmVybGF5UG9zaXRpb25cbiAgICAgICAgICogaW4gW25nQ2xhc3NdIGRpcmVjdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX292ZXJsYXlQb3NpdGlvbiA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQXV0b2NvbXBsZXRlIHNpemUsIGF2YWlsYWJsZSBzaXplczpcbiAgICAgICAgICogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCAoZGVmYXVsdCksIGBsYXJnZWAsIGBnaWFudGBcbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICAvKipcbiAgICAgICAgICogRmxhZyBwYXNzZWQgYXMgaW5wdXQgdG8gYWx3YXlzIG1ha2UgZmlyc3Qgb3B0aW9uIGFjdGl2ZS5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5hY3RpdmVGaXJzdCA9IGZhbHNlO1xuICAgICAgICAvKipcbiAgICAgICAgICogV2lsbCBiZSBlbWl0dGVkIHdoZW4gc2VsZWN0ZWQgdmFsdWUgY2hhbmdlcy5cbiAgICAgICAgICogKi9cbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICB9XG4gICAgZ2V0IG92ZXJsYXlQb3NpdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX292ZXJsYXlQb3NpdGlvbjtcbiAgICB9XG4gICAgc2V0IG92ZXJsYXlQb3NpdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLl9vdmVybGF5UG9zaXRpb24gPSB2YWx1ZTtcbiAgICAgICAgLy8gTmVlZCBydW4gY2hhbmdlIGRldGVjdGlvbiBhZnRlciBmaXJzdCBzZXQgZnJvbSBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZVxuICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aWR0aCBvZiB0aGUgaW5wdXQuXG4gICAgICogKi9cbiAgICBnZXQgaG9zdFdpZHRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgdGhpcy5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXV0b2NvbXBsZXRlIGtub3dzIG5vdGhpbmcgYWJvdXQgaG9zdCBodG1sIGlucHV0IGVsZW1lbnQuXG4gICAgICogU28sIGF0dGFjaCBtZXRob2Qgc2V0IGlucHV0IGhvc3RSZWYgZm9yIHN0eWxpbmcuXG4gICAgICogKi9cbiAgICBzZXRIb3N0KGhvc3RSZWYpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmID0gaG9zdFJlZjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvcGFnYXRlIHNlbGVjdGVkIHZhbHVlLlxuICAgICAqICovXG4gICAgZW1pdFNlbGVjdGVkKHNlbGVjdGVkKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFuZ2UuZW1pdChzZWxlY3RlZCk7XG4gICAgfVxuICAgIGdldCB0aW55KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAndGlueSc7XG4gICAgfVxuICAgIGdldCBzbWFsbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ3NtYWxsJztcbiAgICB9XG4gICAgZ2V0IG1lZGl1bSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ21lZGl1bSc7XG4gICAgfVxuICAgIGdldCBsYXJnZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZSA9PT0gJ2xhcmdlJztcbiAgICB9XG4gICAgZ2V0IGdpYW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnZ2lhbnQnO1xuICAgIH1cbn1cbk5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1hdXRvY29tcGxldGUnLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBcIjxuYi1vcHRpb24tbGlzdCAqbmJQb3J0YWxcXG4gICAgICAgICAgICAgICAgW3NpemVdPVxcXCJzaXplXFxcIlxcbiAgICAgICAgICAgICAgICBbcG9zaXRpb25dPVxcXCJvdmVybGF5UG9zaXRpb25cXFwiXFxuICAgICAgICAgICAgICAgIFtzdHlsZS53aWR0aC5weF09XFxcImhvc3RXaWR0aFxcXCJcXG4gICAgICAgICAgICAgICAgcm9sZT1cXFwibGlzdGJveFxcXCJcXG4gICAgICAgICAgICAgICAgW2lkXT1cXFwiaWRcXFwiXFxuICAgICAgICAgICAgICAgIFtjbGFzcy5lbXB0eV09XFxcIiFvcHRpb25zPy5sZW5ndGhcXFwiXFxuICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cXFwib3B0aW9uc0xpc3RDbGFzc1xcXCI+XFxuICA8bmctY29udGVudCBzZWxlY3Q9XFxcIm5iLW9wdGlvbiwgbmItb3B0aW9uLWdyb3VwXFxcIj48L25nLWNvbnRlbnQ+XFxuPC9uYi1vcHRpb24tbGlzdD5cXG5cIixcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0KDpob3Zlcil7Y3Vyc29yOnBvaW50ZXJ9bmItb3B0aW9uLWxpc3QuZW1wdHl7Ym9yZGVyOm5vbmV9XFxuXCJdXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogQ2hhbmdlRGV0ZWN0b3JSZWYgfVxuXTtcbk5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGhhbmRsZURpc3BsYXlGbjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgYWN0aXZlRmlyc3Q6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG9wdGlvbnNMaXN0Q2xhc3M6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG9wdGlvbnNQYW5lbENsYXNzOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3RlZENoYW5nZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG9wdGlvbnM6IFt7IHR5cGU6IENvbnRlbnRDaGlsZHJlbiwgYXJnczogW05iT3B0aW9uQ29tcG9uZW50LCB7IGRlc2NlbmRhbnRzOiB0cnVlIH0sXSB9XSxcbiAgICBwb3J0YWw6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogW05iUG9ydGFsRGlyZWN0aXZlLF0gfV0sXG4gICAgdGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNtYWxsOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXNtYWxsJyxdIH1dLFxuICAgIG1lZGl1bTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1tZWRpdW0nLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgZ2lhbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtZ2lhbnQnLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYkF1dG9jb21wbGV0ZURpcmVjdGl2ZWAgcHJvdmlkZXMgYSBjYXBhYmlsaXR5IHRvIGV4cGFuZCBpbnB1dCB3aXRoXG4gKiBgTmJBdXRvY29tcGxldGVDb21wb25lbnRgIG92ZXJsYXkgY29udGFpbmluZyBvcHRpb25zIHRvIHNlbGVjdCBhbmQgZmlsbCBpbnB1dCB3aXRoLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIGF1dG9jb21wbGV0ZS9hdXRvY29tcGxldGUtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iQXV0b2NvbXBsZXRlTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYkF1dG9jb21wbGV0ZU1vZHVsZSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgUGFnZU1vZHVsZSB7IH1cbiAqIGBgYFxuICogIyMjIFVzYWdlXG4gKlxuICogWW91IGNhbiBiaW5kIGNvbnRyb2wgd2l0aCBmb3JtIGNvbnRyb2xzIG9yIG5nTW9kZWwuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShBdXRvY29tcGxldGUgZm9ybSBiaW5kaW5nLCBhdXRvY29tcGxldGUvYXV0b2NvbXBsZXRlLWZvcm0uY29tcG9uZW50KVxuICpcbiAqIE9wdGlvbnMgaW4gdGhlIGF1dG9jb21wbGV0ZSBtYXkgYmUgZ3JvdXBlZCB1c2luZyBgbmItb3B0aW9uLWdyb3VwYCBjb21wb25lbnQuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShHcm91cGluZywgYXV0b2NvbXBsZXRlL2F1dG9jb21wbGV0ZS1ncm91cC5jb21wb25lbnQpXG4gKlxuICogQXV0b2NvbXBsZXRlIG1heSBjaGFuZ2Ugc2VsZWN0ZWQgb3B0aW9uIHZhbHVlIHZpYSBwcm92aWRlZCBmdW5jdGlvbi5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBkaXNwbGF5LCBhdXRvY29tcGxldGUvYXV0b2NvbXBsZXRlLWN1c3RvbS1kaXNwbGF5LmNvbXBvbmVudClcbiAqXG4gKiBBbHNvLCBhdXRvY29tcGxldGUgbWF5IG1ha2UgZmlyc3Qgb3B0aW9uIGluIG9wdGlvbiBsaXN0IGFjdGl2ZSBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoQWN0aXZlIGZpcnN0LCBhdXRvY29tcGxldGUvYXV0b2NvbXBsZXRlLWFjdGl2ZS1maXJzdC5jb21wb25lbnQpXG4gKlxuICogKi9cbmNsYXNzIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihob3N0UmVmLCBvdmVybGF5LCBjZCwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgcG9zaXRpb25CdWlsZGVyLCBhY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnksIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuaG9zdFJlZiA9IGhvc3RSZWY7XG4gICAgICAgIHRoaXMub3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyID0gdHJpZ2dlclN0cmF0ZWd5QnVpbGRlcjtcbiAgICAgICAgdGhpcy5wb3NpdGlvbkJ1aWxkZXIgPSBwb3NpdGlvbkJ1aWxkZXI7XG4gICAgICAgIHRoaXMuYWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5ID0gYWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5O1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLl9vbkNoYW5nZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5fb25Ub3VjaGVkID0gKCkgPT4geyB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogRGV0ZXJtaW5lcyBvcHRpb25zIG92ZXJsYXkgb2Zmc2V0IChpbiBwaXhlbHMpLlxuICAgICAgICAgKiovXG4gICAgICAgIHRoaXMub3ZlcmxheU9mZnNldCA9IDg7XG4gICAgICAgIHRoaXMuX2ZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlID0gdHJ1ZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERldGVybWluZXMgb3B0aW9ucyBvdmVybGF5IHNjcm9sbCBzdHJhdGVneS5cbiAgICAgICAgICoqL1xuICAgICAgICB0aGlzLnNjcm9sbFN0cmF0ZWd5ID0gJ2Jsb2NrJztcbiAgICAgICAgdGhpcy5yb2xlID0gJ2NvbWJvYm94JztcbiAgICAgICAgdGhpcy5hcmlhQXV0b2NvbXBsZXRlID0gJ2xpc3QnO1xuICAgICAgICB0aGlzLmhhc1BvcHVwID0gJ3RydWUnO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlzIGF1dG9jb21wbGV0ZSBvdmVybGF5IG9wZW5lZC5cbiAgICAgKiAqL1xuICAgIGdldCBpc09wZW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlSZWYgJiYgdGhpcy5vdmVybGF5UmVmLmhhc0F0dGFjaGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaXMgYXV0b2NvbXBsZXRlIG92ZXJsYXkgY2xvc2VkLlxuICAgICAqICovXG4gICAgZ2V0IGlzQ2xvc2VkKCkge1xuICAgICAgICByZXR1cm4gIXRoaXMuaXNPcGVuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhdXRvY29tcGxldGUgY29tcG9uZW50LlxuICAgICAqICovXG4gICAgZ2V0IGF1dG9jb21wbGV0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9jb21wbGV0ZTtcbiAgICB9XG4gICAgc2V0IGF1dG9jb21wbGV0ZShhdXRvY29tcGxldGUpIHtcbiAgICAgICAgdGhpcy5fYXV0b2NvbXBsZXRlID0gYXV0b2NvbXBsZXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBpbnB1dCB3aWxsIGJlIGZvY3VzZWQgd2hlbiB0aGUgY29udHJvbCB2YWx1ZSBpcyBjaGFuZ2VkXG4gICAgICogKi9cbiAgICBnZXQgZm9jdXNJbnB1dE9uVmFsdWVDaGFuZ2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9mb2N1c0lucHV0T25WYWx1ZUNoYW5nZTtcbiAgICB9XG4gICAgc2V0IGZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2ZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNPcGVuICYmIHRoaXMuYXV0b2NvbXBsZXRlLm9wdGlvbnMubGVuZ3RoICYmIHRoaXMuYXV0b2NvbXBsZXRlLm92ZXJsYXlQb3NpdGlvbiA9PT0gTmJQb3NpdGlvbi5UT1A7XG4gICAgfVxuICAgIGdldCBib3R0b20oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzT3BlbiAmJiB0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmxlbmd0aCAmJiB0aGlzLmF1dG9jb21wbGV0ZS5vdmVybGF5UG9zaXRpb24gPT09IE5iUG9zaXRpb24uQk9UVE9NO1xuICAgIH1cbiAgICBnZXQgYXJpYUV4cGFuZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4gJiYgdGhpcy5pc09wZW4udG9TdHJpbmcoKTtcbiAgICB9XG4gICAgZ2V0IGFyaWFPd25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc09wZW4gPyB0aGlzLmF1dG9jb21wbGV0ZS5pZCA6IG51bGw7XG4gICAgfVxuICAgIGdldCBhcmlhQWN0aXZlRGVzY2VuZGFudCgpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmlzT3BlbiAmJiB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbSkgPyB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbS5pZCA6IG51bGw7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kgPSB0aGlzLmNyZWF0ZVRyaWdnZXJTdHJhdGVneSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uVHJpZ2dlcnMoKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLnRyaWdnZXJTdHJhdGVneSkge1xuICAgICAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnBvc2l0aW9uU3RyYXRlZ3kpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneS5kaXNwb3NlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheVJlZikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmLmRpc3Bvc2UoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICBoYW5kbGVJbnB1dCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudFZhbHVlID0gdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlKGN1cnJlbnRWYWx1ZSk7XG4gICAgICAgIHRoaXMuc2V0SG9zdElucHV0VmFsdWUodGhpcy5nZXREaXNwbGF5VmFsdWUoY3VycmVudFZhbHVlKSk7XG4gICAgICAgIHRoaXMuc2hvdygpO1xuICAgIH1cbiAgICBoYW5kbGVLZXlkb3duKCkge1xuICAgICAgICB0aGlzLnNob3coKTtcbiAgICB9XG4gICAgaGFuZGxlQmx1cigpIHtcbiAgICAgICAgdGhpcy5fb25Ub3VjaGVkKCk7XG4gICAgfVxuICAgIHNob3coKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFRvT3ZlcmxheSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRBY3RpdmVJdGVtKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGlkZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuZGV0YWNoKCk7XG4gICAgICAgICAgICAvLyBOZWVkIHRvIHVwZGF0ZSBjbGFzcyB2aWEgQEhvc3RCaW5kaW5nXG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVJbnB1dFZhbHVlVXBkYXRlKHZhbHVlKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLl9vbkNoYW5nZSA9IGZuO1xuICAgIH1cbiAgICByZWdpc3Rlck9uVG91Y2hlZChmbikge1xuICAgICAgICB0aGlzLl9vblRvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWRTdGF0ZShkaXNhYmxlZCkge1xuICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50LCAnZGlzYWJsZWQnLCBkaXNhYmxlZCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uT3B0aW9uQ2xpY2soKSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJZiB0aGUgdXNlciBjaGFuZ2VzIHByb3ZpZGVkIG9wdGlvbnMgbGlzdCBpbiB0aGUgcnVudGltZSB3ZSBoYXZlIHRvIGhhbmRsZSB0aGlzXG4gICAgICAgICAqIGFuZCByZXN1YnNjcmliZSBvbiBvcHRpb25zIHNlbGVjdGlvbiBjaGFuZ2VzIGV2ZW50LlxuICAgICAgICAgKiBPdGhlcndpc2UsIHRoZSB1c2VyIHdpbGwgbm90IGJlIGFibGUgdG8gc2VsZWN0IG5ldyBvcHRpb25zLlxuICAgICAgICAgKiAqL1xuICAgICAgICB0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHRhcCgoKSA9PiB0aGlzLnNldEFjdGl2ZUl0ZW0oKSksIHN0YXJ0V2l0aCh0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zKSwgc3dpdGNoTWFwKChvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2UoLi4ub3B0aW9ucy5tYXAob3B0aW9uID0+IG9wdGlvbi5jbGljaykpO1xuICAgICAgICB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoY2xpY2tlZE9wdGlvbikgPT4gdGhpcy5oYW5kbGVJbnB1dFZhbHVlVXBkYXRlKGNsaWNrZWRPcHRpb24udmFsdWUpKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlT25Qb3NpdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5LnBvc2l0aW9uQ2hhbmdlXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChwb3NpdGlvbikgPT4ge1xuICAgICAgICAgICAgdGhpcy5hdXRvY29tcGxldGUub3ZlcmxheVBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgICAgICAgICB0aGlzLmNkLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldEFjdGl2ZUl0ZW0oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbTtcbiAgICB9XG4gICAgc2V0dXBBdXRvY29tcGxldGUoKSB7XG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlLnNldEhvc3QodGhpcy5jdXN0b21PdmVybGF5SG9zdCB8fCB0aGlzLmhvc3RSZWYpO1xuICAgIH1cbiAgICBnZXREaXNwbGF5VmFsdWUodmFsdWUpIHtcbiAgICAgICAgY29uc3QgZGlzcGxheUZuID0gdGhpcy5hdXRvY29tcGxldGUuaGFuZGxlRGlzcGxheUZuO1xuICAgICAgICByZXR1cm4gZGlzcGxheUZuID8gZGlzcGxheUZuKHZhbHVlKSA6IHZhbHVlO1xuICAgIH1cbiAgICBnZXRDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlSZWYgJiYgdGhpcy5pc09wZW4gJiYge1xuICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICBuYXRpdmVFbGVtZW50OiB0aGlzLm92ZXJsYXlSZWYub3ZlcmxheUVsZW1lbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBoYW5kbGVJbnB1dFZhbHVlVXBkYXRlKHZhbHVlKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXRIb3N0SW5wdXRWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIHRoaXMuX29uQ2hhbmdlKHZhbHVlKTtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNJbnB1dE9uVmFsdWVDaGFuZ2UpIHtcbiAgICAgICAgICAgIHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGUuZW1pdFNlbGVjdGVkKHZhbHVlKTtcbiAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uVHJpZ2dlcnMoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LnNob3ckXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pc0Nsb3NlZCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuc2hvdygpKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuaGlkZSRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLmlzT3BlbikpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuaGlkZSgpKTtcbiAgICB9XG4gICAgY3JlYXRlVHJpZ2dlclN0cmF0ZWd5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyXG4gICAgICAgICAgICAudHJpZ2dlcihOYlRyaWdnZXIuRk9DVVMpXG4gICAgICAgICAgICAuaG9zdCh0aGlzLmhvc3RSZWYubmF0aXZlRWxlbWVudClcbiAgICAgICAgICAgIC5jb250YWluZXIoKCkgPT4gdGhpcy5nZXRDb250YWluZXIoKSlcbiAgICAgICAgICAgIC5idWlsZCgpO1xuICAgIH1cbiAgICBjcmVhdGVLZXlNYW5hZ2VyKCkge1xuICAgICAgICB0aGlzLmtleU1hbmFnZXIgPSB0aGlzLmFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeVxuICAgICAgICAgICAgLmNyZWF0ZSh0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zKTtcbiAgICB9XG4gICAgc2V0SG9zdElucHV0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQudmFsdWUgPSB0aGlzLmdldERpc3BsYXlWYWx1ZSh2YWx1ZSk7XG4gICAgfVxuICAgIGNyZWF0ZVBvc2l0aW9uU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc2l0aW9uQnVpbGRlclxuICAgICAgICAgICAgLmNvbm5lY3RlZFRvKHRoaXMuY3VzdG9tT3ZlcmxheUhvc3QgfHwgdGhpcy5ob3N0UmVmKVxuICAgICAgICAgICAgLnBvc2l0aW9uKE5iUG9zaXRpb24uQk9UVE9NKVxuICAgICAgICAgICAgLm9mZnNldCh0aGlzLm92ZXJsYXlPZmZzZXQpXG4gICAgICAgICAgICAuYWRqdXN0bWVudChOYkFkanVzdG1lbnQuVkVSVElDQUwpO1xuICAgIH1cbiAgICBzdWJzY3JpYmVPbk92ZXJsYXlLZXlzKCkge1xuICAgICAgICB0aGlzLm92ZXJsYXlSZWYua2V5ZG93bkV2ZW50cygpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChldmVudCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2ZW50LmtleUNvZGUgPT09IEVTQ0FQRSAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IEVOVEVSKSB7XG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBhY3RpdmVJdGVtID0gdGhpcy5nZXRBY3RpdmVJdGVtKCk7XG4gICAgICAgICAgICAgICAgaWYgKCFhY3RpdmVJdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVJbnB1dFZhbHVlVXBkYXRlKGFjdGl2ZUl0ZW0udmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLm9uS2V5ZG93bihldmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzZXRBY3RpdmVJdGVtKCkge1xuICAgICAgICAvLyBJZiBhdXRvY29tcGxldGUgaGFzIGFjdGl2ZUZpcnN0IGlucHV0IHNldCB0byB0cnVlLFxuICAgICAgICAvLyBrZXlNYW5hZ2VyIHNldCBmaXJzdCBvcHRpb24gYWN0aXZlLCBvdGhlcndpc2UgLSByZXNldCBhY3RpdmUgb3B0aW9uLlxuICAgICAgICBjb25zdCBtb2RlID0gdGhpcy5hdXRvY29tcGxldGUuYWN0aXZlRmlyc3RcbiAgICAgICAgICAgID8gTmJLZXlNYW5hZ2VyQWN0aXZlSXRlbU1vZGUuRklSU1RfQUNUSVZFXG4gICAgICAgICAgICA6IE5iS2V5TWFuYWdlckFjdGl2ZUl0ZW1Nb2RlLlJFU0VUX0FDVElWRTtcbiAgICAgICAgdGhpcy5rZXlNYW5hZ2VyLnNldEFjdGl2ZUl0ZW0obW9kZSk7XG4gICAgICAgIHRoaXMuY2QuZGV0ZWN0Q2hhbmdlcygpO1xuICAgIH1cbiAgICBhdHRhY2hUb092ZXJsYXkoKSB7XG4gICAgICAgIGlmICghdGhpcy5vdmVybGF5UmVmKSB7XG4gICAgICAgICAgICB0aGlzLnNldHVwQXV0b2NvbXBsZXRlKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5UmVmLmF0dGFjaCh0aGlzLmF1dG9jb21wbGV0ZS5wb3J0YWwpO1xuICAgIH1cbiAgICBjcmVhdGVPdmVybGF5KCkge1xuICAgICAgICBjb25zdCBzY3JvbGxTdHJhdGVneSA9IHRoaXMuY3JlYXRlU2Nyb2xsU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmID0gdGhpcy5vdmVybGF5LmNyZWF0ZSh7IHBvc2l0aW9uU3RyYXRlZ3k6IHRoaXMucG9zaXRpb25TdHJhdGVneSwgc2Nyb2xsU3RyYXRlZ3ksIHBhbmVsQ2xhc3M6IHRoaXMuYXV0b2NvbXBsZXRlLm9wdGlvbnNQYW5lbENsYXNzIH0pO1xuICAgIH1cbiAgICBpbml0T3ZlcmxheSgpIHtcbiAgICAgICAgdGhpcy5wb3NpdGlvblN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVQb3NpdGlvblN0cmF0ZWd5KCk7XG4gICAgICAgIHRoaXMuY3JlYXRlS2V5TWFuYWdlcigpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uUG9zaXRpb25DaGFuZ2UoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk9wdGlvbkNsaWNrKCk7XG4gICAgICAgIHRoaXMuY2hlY2tPdmVybGF5VmlzaWJpbGl0eSgpO1xuICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPbk92ZXJsYXlLZXlzKCk7XG4gICAgfVxuICAgIGNoZWNrT3ZlcmxheVZpc2liaWxpdHkoKSB7XG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlLm9wdGlvbnMuY2hhbmdlc1xuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmF1dG9jb21wbGV0ZS5vcHRpb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY3JlYXRlU2Nyb2xsU3RyYXRlZ3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXkuc2Nyb2xsU3RyYXRlZ2llc1t0aGlzLnNjcm9sbFN0cmF0ZWd5XSgpO1xuICAgIH1cbn1cbk5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdpbnB1dFtuYkF1dG9jb21wbGV0ZV0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTmJBdXRvY29tcGxldGVEaXJlY3RpdmUpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXVsdGk6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBOYlRyaWdnZXJTdHJhdGVneUJ1aWxkZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iQWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5U2VydmljZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH1cbl07XG5OYkF1dG9jb21wbGV0ZURpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBhdXRvY29tcGxldGU6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iQXV0b2NvbXBsZXRlJyxdIH1dLFxuICAgIG92ZXJsYXlPZmZzZXQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZvY3VzSW5wdXRPblZhbHVlQ2hhbmdlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzY3JvbGxTdHJhdGVneTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgY3VzdG9tT3ZlcmxheUhvc3Q6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRvcDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItYXV0b2NvbXBsZXRlLXBvc2l0aW9uLXRvcCcsXSB9XSxcbiAgICBib3R0b206IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm5iLWF1dG9jb21wbGV0ZS1wb3NpdGlvbi1ib3R0b20nLF0gfV0sXG4gICAgcm9sZTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5yb2xlJyxdIH1dLFxuICAgIGFyaWFBdXRvY29tcGxldGU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1hdXRvY29tcGxldGUnLF0gfV0sXG4gICAgaGFzUG9wdXA6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuaGFzcG9wdXAnLF0gfV0sXG4gICAgYXJpYUV4cGFuZGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLmFyaWEtZXhwYW5kZWQnLF0gfV0sXG4gICAgYXJpYU93bnM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1vd25zJyxdIH1dLFxuICAgIGFyaWFBY3RpdmVEZXNjZW5kYW50OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLmFyaWEtYWN0aXZlZGVzY2VuZGFudCcsXSB9XSxcbiAgICBoYW5kbGVJbnB1dDogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2lucHV0JyxdIH1dLFxuICAgIGhhbmRsZUtleWRvd246IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmFycm93RG93bicsXSB9LCB7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmFycm93VXAnLF0gfV0sXG4gICAgaGFuZGxlQmx1cjogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2JsdXInLF0gfV1cbn07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IE5CX0FVVE9DT01QTEVURV9DT01QT05FTlRTID0gW1xuICAgIE5iQXV0b2NvbXBsZXRlQ29tcG9uZW50LFxuICAgIE5iQXV0b2NvbXBsZXRlRGlyZWN0aXZlLFxuXTtcbmNsYXNzIE5iQXV0b2NvbXBsZXRlTW9kdWxlIHtcbn1cbk5iQXV0b2NvbXBsZXRlTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgRm9ybXNNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iT3ZlcmxheU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJDYXJkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYk9wdGlvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfQVVUT0NPTVBMRVRFX0NPTVBPTkVOVFMsXG4gICAgICAgICAgICAgICAgICAgIE5iT3B0aW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbLi4uTkJfQVVUT0NPTVBMRVRFX0NPTVBPTkVOVFNdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbnZhciBOYldpbmRvd1N0YXRlO1xuKGZ1bmN0aW9uIChOYldpbmRvd1N0YXRlKSB7XG4gICAgTmJXaW5kb3dTdGF0ZVtcIk1JTklNSVpFRFwiXSA9IFwibWluaW1pemVkXCI7XG4gICAgTmJXaW5kb3dTdGF0ZVtcIk1BWElNSVpFRFwiXSA9IFwibWF4aW1pemVkXCI7XG4gICAgTmJXaW5kb3dTdGF0ZVtcIkZVTExfU0NSRUVOXCJdID0gXCJmdWxsLXNjcmVlblwiO1xufSkoTmJXaW5kb3dTdGF0ZSB8fCAoTmJXaW5kb3dTdGF0ZSA9IHt9KSk7XG5jb25zdCBOQl9XSU5ET1dfREVGQVVMVF9CVVRUT05TX0NPTkZJRyA9IHtcbiAgICBtaW5pbWl6ZTogdHJ1ZSxcbiAgICBtYXhpbWl6ZTogdHJ1ZSxcbiAgICBmdWxsU2NyZWVuOiB0cnVlLFxufTtcbi8qKlxuICogV2luZG93IGNvbmZpZ3VyYXRpb24gb3B0aW9ucy5cbiAqL1xuY2xhc3MgTmJXaW5kb3dDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKC4uLmNvbmZpZ3MpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdpbmRvdyB0aXRsZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGl0bGUgPSAnJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgd2luZG93IHN0YXRlLiBGdWxsIHNjcmVlbiBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbml0aWFsU3RhdGUgPSBOYldpbmRvd1N0YXRlLkZVTExfU0NSRUVOO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGFuIGJhY2tkcm9wIHdpbGwgYmUgcmVuZGVyZWQgYmVoaW5kIHdpbmRvdy5cbiAgICAgICAgICogQnkgZGVmYXVsdCBzZXQgdG8gdHJ1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaGFzQmFja2Ryb3AgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgc2V0IHRvIHRydWUgbW91c2UgY2xpY2tzIG9uIGJhY2tkcm9wIHdpbGwgY2xvc2UgYSB3aW5kb3cuXG4gICAgICAgICAqIERlZmF1bHQgaXMgdHJ1ZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2xvc2VPbkJhY2tkcm9wQ2xpY2sgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdHJ1ZSB0aGVuIGVzY2FwZSBwcmVzcyB3aWxsIGNsb3NlIGEgd2luZG93LlxuICAgICAgICAgKiBEZWZhdWx0IGlzIHRydWUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNsb3NlT25Fc2MgPSB0cnVlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQ2xhc3MgdG8gYmUgYXBwbGllZCB0byB0aGUgd2luZG93LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aW5kb3dDbGFzcyA9ICcnO1xuICAgICAgICAvKipcbiAgICAgICAgICogQm90aCwgdGVtcGxhdGUgYW5kIGNvbXBvbmVudCBtYXkgcmVjZWl2ZSBkYXRhIHRocm91Z2ggYGNvbmZpZy5jb250ZXh0YCBwcm9wZXJ0eS5cbiAgICAgICAgICogRm9yIGNvbXBvbmVudHMsIHRoaXMgZGF0YSB3aWxsIGJlIHNldCBhcyBjb21wb25lbnQgcHJvcGVydGllcy5cbiAgICAgICAgICogRm9yIHRlbXBsYXRlcywgeW91IGNhbiBhY2Nlc3MgaXQgaW5zaWRlIHRlbXBsYXRlIGFzICRpbXBsaWNpdC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29udGV4dCA9IHt9O1xuICAgICAgICAvKipcbiAgICAgICAgICogV2hlcmUgdGhlIGF0dGFjaGVkIGNvbXBvbmVudCBzaG91bGQgbGl2ZSBpbiBBbmd1bGFyJ3MgKmxvZ2ljYWwqIGNvbXBvbmVudCB0cmVlLlxuICAgICAgICAgKiBUaGlzIGFmZmVjdHMgd2hhdCBpcyBhdmFpbGFibGUgZm9yIGluamVjdGlvbiBhbmQgdGhlIGNoYW5nZSBkZXRlY3Rpb24gb3JkZXIgZm9yIHRoZVxuICAgICAgICAgKiBjb21wb25lbnQgaW5zdGFudGlhdGVkIGluc2lkZSBvZiB0aGUgd2luZG93LiBUaGlzIGRvZXMgbm90IGFmZmVjdCB3aGVyZSB0aGUgd2luZG93XG4gICAgICAgICAqIGNvbnRlbnQgd2lsbCBiZSByZW5kZXJlZC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudmlld0NvbnRhaW5lclJlZiA9IG51bGw7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaW5kb3dzIGNvbnRyb2wgYnV0dG9ucyBjYW4gYmUgaGlkZGVuIGJ5IHNldHRpbmcgYWNjb3JkaW5nIHByb3BlcnR5IHRvIGZhbHNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5idXR0b25zID0ge307XG4gICAgICAgIE9iamVjdC5hc3NpZ24odGhpcywgLi4uY29uZmlncyk7XG4gICAgICAgIHRoaXMuYXBwbHlEZWZhdWx0QnV0dG9uQ29uZmlnKCk7XG4gICAgfVxuICAgIGFwcGx5RGVmYXVsdEJ1dHRvbkNvbmZpZygpIHtcbiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCB7IGJ1dHRvbnM6IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgTkJfV0lORE9XX0RFRkFVTFRfQlVUVE9OU19DT05GSUcpLCB0aGlzLmJ1dHRvbnMpIH0pO1xuICAgIH1cbn1cbmNvbnN0IE5CX1dJTkRPV19DT05URU5UID0gbmV3IEluamVjdGlvblRva2VuKCdOZWJ1bGFyIFdpbmRvdyBDb250ZW50Jyk7XG5jb25zdCBOQl9XSU5ET1dfQ09ORklHID0gbmV3IEluamVjdGlvblRva2VuKCdOZWJ1bGFyIFdpbmRvdyBDb25maWcnKTtcbmNvbnN0IE5CX1dJTkRPV19DT05URVhUID0gbmV3IEluamVjdGlvblRva2VuKCdOZWJ1bGFyIFdpbmRvdyBDb250ZXh0Jyk7XG5cbi8qKlxuICogVGhlIGBOYldpbmRvd1JlZmAgaGVscHMgdG8gbWFuaXB1bGF0ZSB3aW5kb3cgYWZ0ZXIgaXQgd2FzIGNyZWF0ZWQuXG4gKiBUaGUgd2luZG93IGNhbiBiZSBkaXNtaXNzZWQgYnkgdXNpbmcgYGNsb3NlYCBtZXRob2Qgb2YgdGhlIHdpbmRvd1JlZi5cbiAqIFlvdSBjYW4gYWNjZXNzIHJlbmRlcmVkIGNvbXBvbmVudCBhcyBgY29tcG9uZW50UmVmYCBwcm9wZXJ0eSBvZiB0aGUgd2luZG93UmVmLlxuICovXG5jbGFzcyBOYldpbmRvd1JlZiB7XG4gICAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xuICAgICAgICB0aGlzLnN0YXRlQ2hhbmdlJCA9IG5ldyBSZXBsYXlTdWJqZWN0KDEpO1xuICAgICAgICB0aGlzLl9jbG9zZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbG9zZWQkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IGNvbmZpZy5pbml0aWFsU3RhdGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgd2luZG93IHN0YXRlLlxuICAgICAqL1xuICAgIGdldCBzdGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGVWYWx1ZTtcbiAgICB9XG4gICAgc2V0IHN0YXRlKG5ld1N0YXRlKSB7XG4gICAgICAgIGlmIChuZXdTdGF0ZSAmJiB0aGlzLnN0YXRlVmFsdWUgIT09IG5ld1N0YXRlKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZTdGF0ZVZhbHVlID0gdGhpcy5zdGF0ZTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGVWYWx1ZSA9IG5ld1N0YXRlO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZSQubmV4dCh7IG9sZFN0YXRlOiB0aGlzLnByZXZTdGF0ZVZhbHVlLCBuZXdTdGF0ZSB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbWl0cyB3aGVuIHdpbmRvdyBzdGF0ZSBjaGFuZ2UuXG4gICAgICovXG4gICAgZ2V0IHN0YXRlQ2hhbmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZUNoYW5nZSQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVtaXRzIHdoZW4gd2luZG93IHdhcyBjbG9zZWQuXG4gICAgICovXG4gICAgZ2V0IG9uQ2xvc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNsb3NlZCQuYXNPYnNlcnZhYmxlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1pbmltaXplIHdpbmRvdy5cbiAgICAgKi9cbiAgICBtaW5pbWl6ZSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iV2luZG93U3RhdGUuTUlOSU1JWkVEO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXhpbWl6ZSB3aW5kb3cuXG4gICAgICovXG4gICAgbWF4aW1pemUoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBOYldpbmRvd1N0YXRlLk1BWElNSVpFRDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0IHdpbmRvdyBvbiB0b3AuXG4gICAgICovXG4gICAgZnVsbFNjcmVlbigpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IE5iV2luZG93U3RhdGUuRlVMTF9TQ1JFRU47XG4gICAgfVxuICAgIHRvUHJldmlvdXNTdGF0ZSgpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHRoaXMucHJldlN0YXRlVmFsdWU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENsb3NlcyB3aW5kb3cuXG4gICAgICogKi9cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2Nsb3NlZCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2Nsb3NlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuY29tcG9uZW50UmVmLmRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5zdGF0ZUNoYW5nZSQuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQkLm5leHQoKTtcbiAgICAgICAgdGhpcy5jbG9zZWQkLmNvbXBsZXRlKCk7XG4gICAgfVxufVxuXG5jbGFzcyBOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQge1xufVxuTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi13aW5kb3dzLWNvbnRhaW5lcicsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGA8bmctY29udGFpbmVyICN2aWV3Q29udGFpbmVyUmVmPjwvbmctY29udGFpbmVyPmAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmZsZXg7YWxpZ24taXRlbXM6ZmxleC1lbmQ7b3ZlcmZsb3cteDphdXRvfTpob3N0IDo6bmctZGVlcCBuYi13aW5kb3c6bm90KC5mdWxsLXNjcmVlbil7bWFyZ2luOjAgMnJlbX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHZpZXdDb250YWluZXJSZWY6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogWyd2aWV3Q29udGFpbmVyUmVmJywgeyByZWFkOiBWaWV3Q29udGFpbmVyUmVmLCBzdGF0aWM6IHRydWUgfSxdIH1dXG59O1xuXG5jbGFzcyBOYldpbmRvd0NvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoY29udGVudCwgY29udGV4dCwgd2luZG93UmVmLCBjb25maWcsIGZvY3VzVHJhcEZhY3RvcnksIGVsZW1lbnRSZWYsIHJlbmRlcmVyKSB7XG4gICAgICAgIHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMud2luZG93UmVmID0gd2luZG93UmVmO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5mb2N1c1RyYXBGYWN0b3J5ID0gZm9jdXNUcmFwRmFjdG9yeTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIH1cbiAgICBnZXQgaXNGdWxsU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy53aW5kb3dSZWYuc3RhdGUgPT09IE5iV2luZG93U3RhdGUuRlVMTF9TQ1JFRU47XG4gICAgfVxuICAgIGdldCBtYXhpbWl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvd1JlZi5zdGF0ZSA9PT0gTmJXaW5kb3dTdGF0ZS5NQVhJTUlaRUQ7XG4gICAgfVxuICAgIGdldCBtaW5pbWl6ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLndpbmRvd1JlZi5zdGF0ZSA9PT0gTmJXaW5kb3dTdGF0ZS5NSU5JTUlaRUQ7XG4gICAgfVxuICAgIGdldCBzaG93TWluaW1pemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmZpZy5idXR0b25zLm1pbmltaXplO1xuICAgIH1cbiAgICBnZXQgc2hvd01heGltaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuYnV0dG9ucy5tYXhpbWl6ZTtcbiAgICB9XG4gICAgZ2V0IHNob3dGdWxsU2NyZWVuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25maWcuYnV0dG9ucy5mdWxsU2NyZWVuO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5mb2N1c1RyYXAgPSB0aGlzLmZvY3VzVHJhcEZhY3RvcnkuY3JlYXRlKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50KTtcbiAgICAgICAgdGhpcy5mb2N1c1RyYXAuYmx1clByZXZpb3VzbHlGb2N1c2VkRWxlbWVudCgpO1xuICAgICAgICB0aGlzLmZvY3VzVHJhcC5mb2N1c0luaXRpYWxFbGVtZW50KCk7XG4gICAgICAgIGlmICh0aGlzLmNvbmZpZy53aW5kb3dDbGFzcykge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJlci5hZGRDbGFzcyh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCwgdGhpcy5jb25maWcud2luZG93Q2xhc3MpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3Q2hlY2tlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm92ZXJsYXlDb250YWluZXIgfHwgdGhpcy5vdmVybGF5Q29udGFpbmVyLmlzQXR0YWNoZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jb250ZW50IGluc3RhbmNlb2YgVGVtcGxhdGVSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoVGVtcGxhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYXR0YWNoQ29tcG9uZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzVHJhcCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c1RyYXAucmVzdG9yZUZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgICBtaW5pbWl6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMud2luZG93UmVmLnN0YXRlID09PSBOYldpbmRvd1N0YXRlLk1JTklNSVpFRCkge1xuICAgICAgICAgICAgdGhpcy53aW5kb3dSZWYudG9QcmV2aW91c1N0YXRlKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndpbmRvd1JlZi5taW5pbWl6ZSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG1heGltaXplKCkge1xuICAgICAgICB0aGlzLndpbmRvd1JlZi5tYXhpbWl6ZSgpO1xuICAgIH1cbiAgICBmdWxsU2NyZWVuKCkge1xuICAgICAgICB0aGlzLndpbmRvd1JlZi5mdWxsU2NyZWVuKCk7XG4gICAgfVxuICAgIG1heGltaXplT3JGdWxsU2NyZWVuKCkge1xuICAgICAgICBpZiAodGhpcy53aW5kb3dSZWYuc3RhdGUgPT09IE5iV2luZG93U3RhdGUuTUlOSU1JWkVEICYmIHRoaXMuc2hvd01heGltaXplKSB7XG4gICAgICAgICAgICB0aGlzLm1heGltaXplKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmZ1bGxTY3JlZW4oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy53aW5kb3dSZWYuY2xvc2UoKTtcbiAgICB9XG4gICAgYXR0YWNoVGVtcGxhdGUoKSB7XG4gICAgICAgIHRoaXMub3ZlcmxheUNvbnRhaW5lclxuICAgICAgICAgICAgLmF0dGFjaFRlbXBsYXRlUG9ydGFsKG5ldyBOYlRlbXBsYXRlUG9ydGFsKHRoaXMuY29udGVudCwgbnVsbCwgdGhpcy5jb250ZXh0KSk7XG4gICAgfVxuICAgIGF0dGFjaENvbXBvbmVudCgpIHtcbiAgICAgICAgY29uc3QgcG9ydGFsID0gbmV3IE5iQ29tcG9uZW50UG9ydGFsKHRoaXMuY29udGVudCwgbnVsbCwgbnVsbCwgdGhpcy5jZnIpO1xuICAgICAgICBjb25zdCByZWYgPSB0aGlzLm92ZXJsYXlDb250YWluZXIuYXR0YWNoQ29tcG9uZW50UG9ydGFsKHBvcnRhbCwgdGhpcy5jb250ZXh0KTtcbiAgICAgICAgcmVmLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICB9XG59XG5OYldpbmRvd0NvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItd2luZG93JyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuYi1jYXJkPlxuICAgICAgPG5iLWNhcmQtaGVhZGVyPlxuICAgICAgICA8ZGl2IGNka0ZvY3VzSW5pdGlhbCBjbGFzcz1cInRpdGxlXCIgdGFiaW5kZXg9XCItMVwiPnt7IGNvbmZpZy50aXRsZSB9fTwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJidXR0b25zXCI+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cInNob3dNaW5pbWl6ZVwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBuYkJ1dHRvbiBnaG9zdCAoY2xpY2spPVwibWluaW1pemUoKVwiPlxuICAgICAgICAgICAgICA8bmItaWNvbiBpY29uPVwibWludXMtb3V0bGluZVwiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93TWF4aW1pemVcIj5cbiAgICAgICAgICAgIDxidXR0b24gbmJCdXR0b24gZ2hvc3QgKm5nSWY9XCJpc0Z1bGxTY3JlZW5cIiAoY2xpY2spPVwibWF4aW1pemUoKVwiPlxuICAgICAgICAgICAgICA8bmItaWNvbiBpY29uPVwiY29sbGFwc2Utb3V0bGluZVwiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJzaG93RnVsbFNjcmVlblwiPlxuICAgICAgICAgICAgPGJ1dHRvbiBuYkJ1dHRvbiBnaG9zdCAqbmdJZj1cIm1pbmltaXplZCB8fCBtYXhpbWl6ZWRcIiAoY2xpY2spPVwibWF4aW1pemVPckZ1bGxTY3JlZW4oKVwiPlxuICAgICAgICAgICAgICA8bmItaWNvbiBpY29uPVwiZXhwYW5kLW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCI+PC9uYi1pY29uPlxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICA8YnV0dG9uIG5iQnV0dG9uIGdob3N0IChjbGljayk9XCJjbG9zZSgpXCI+XG4gICAgICAgICAgICA8bmItaWNvbiBpY29uPVwiY2xvc2Utb3V0bGluZVwiIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIj48L25iLWljb24+XG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uYi1jYXJkLWhlYWRlcj5cbiAgICAgIDxuYi1jYXJkLWJvZHkgKm5nSWY9XCJtYXhpbWl6ZWQgfHwgaXNGdWxsU2NyZWVuXCI+XG4gICAgICAgIDxuYi1vdmVybGF5LWNvbnRhaW5lcj48L25iLW92ZXJsYXktY29udGFpbmVyPlxuICAgICAgPC9uYi1jYXJkLWJvZHk+XG4gICAgPC9uYi1jYXJkPlxuICBgLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZmxleDoxIDAgYXV0bzttaW4td2lkdGg6MjByZW19Omhvc3QgbmItY2FyZHttYXJnaW46MH06aG9zdCBuYi1jYXJkLWhlYWRlcntkaXNwbGF5OmZsZXg7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6Y2VudGVyO292ZXJmbG93OmhpZGRlbn06aG9zdCAudGl0bGV7ZmxleDoxIDAgYXV0bzttYXJnaW4tcmlnaHQ6M3JlbTtvdmVyZmxvdzpoaWRkZW47dGV4dC1vdmVyZmxvdzplbGxpcHNpczt3aGl0ZS1zcGFjZTpub3dyYXB9Omhvc3QgLmJ1dHRvbnN7d2lkdGg6OS41cmVtO2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1lbmR9Omhvc3QgLmJ1dHRvbnMgW25iQnV0dG9uXXtmbGV4OjAgMCAzcmVtfTpob3N0KC5mdWxsLXNjcmVlbil7cG9zaXRpb246Zml4ZWQ7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsIC01MCUpfTpob3N0KC5tYXhpbWl6ZWQpIG5iLWNhcmR7Ym9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czowO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjB9Omhvc3QoLm1pbmltaXplZCkgbmItY2FyZHtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjA7Ym9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6MDtoZWlnaHQ6YXV0b306aG9zdCgubWluaW1pemVkKSBuYi1jYXJkIG5iLWNhcmQtaGVhZGVye2JvcmRlci1ib3R0b206bm9uZX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJXaW5kb3dDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX1dJTkRPV19DT05URU5ULF0gfV0gfSxcbiAgICB7IHR5cGU6IE9iamVjdCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfV0lORE9XX0NPTlRFWFQsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJXaW5kb3dSZWYgfSxcbiAgICB7IHR5cGU6IE5iV2luZG93Q29uZmlnIH0sXG4gICAgeyB0eXBlOiBOYkZvY3VzVHJhcEZhY3RvcnlTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfVxuXTtcbk5iV2luZG93Q29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNmcjogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgaXNGdWxsU2NyZWVuOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5mdWxsLXNjcmVlbicsXSB9XSxcbiAgICBtYXhpbWl6ZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm1heGltaXplZCcsXSB9XSxcbiAgICBtaW5pbWl6ZWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLm1pbmltaXplZCcsXSB9XSxcbiAgICBvdmVybGF5Q29udGFpbmVyOiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFtOYk92ZXJsYXlDb250YWluZXJDb21wb25lbnQsXSB9XVxufTtcblxuLyoqXG4gKiBUaGUgYE5iV2luZG93U2VydmljZWAgY2FuIGJlIHVzZWQgdG8gb3BlbiB3aW5kb3dzLlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHdpbmRvdy93aW5kb3ctc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iV2luZG93TW9kdWxlYCB0byB5b3VyIGFwcCBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iV2luZG93TW9kdWxlLmZvclJvb3QoY29uZmlnKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQXBwTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogSWYgeW91IGFyZSB1c2luZyBpdCBpbiBhIGxhenkgbG9hZGVkIG1vZHVsZSB0aGFuIHlvdSBoYXZlIHRvIGluc3RhbGwgYE5iV2luZG93TW9kdWxlLmZvckNoaWxkYDpcbiAqIGBgYHRzXG4gKiBATmdNb2R1bGUoe1xuICogICBpbXBvcnRzOiBbXG4gKiAgICAgLy8gLi4uXG4gKiAgICAgTmJXaW5kb3dNb2R1bGUuZm9yQ2hpbGQoY29uZmlnKSxcbiAqICAgXSxcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgTGF6eUxvYWRlZE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIEEgbmV3IHdpbmRvdyBjYW4gYmUgb3BlbmVkIGJ5IGNhbGxpbmcgdGhlIGBvcGVuYCBtZXRob2Qgd2l0aCBhIGNvbXBvbmVudCBvciB0ZW1wbGF0ZSB0byBiZSBsb2FkZWRcbiAqIGFuZCBhbiBvcHRpb25hbCBjb25maWd1cmF0aW9uLlxuICogYG9wZW5gIG1ldGhvZCB3aWxsIHJldHVybiBgTmJXaW5kb3dSZWZgIHRoYXQgY2FuIGJlIHVzZWQgZm9yIHRoZSBmdXJ0aGVyIG1hbmlwdWxhdGlvbnMuXG4gKlxuICogYGBgdHNcbiAqIGNvbnN0IHdpbmRvd1JlZiA9IHRoaXMud2luZG93U2VydmljZS5vcGVuKE15Q29tcG9uZW50LCB7IC4uLiB9KTtcbiAqIGBgYFxuICpcbiAqIGBOYldpbmRvd1JlZmAgZ2l2ZXMgeW91IGFiaWxpdHkgbWFuaXB1bGF0ZSBvcGVuZWQgd2luZG93LlxuICogQWxzbywgeW91IGNhbiBpbmplY3QgYE5iV2luZG93UmVmYCBpbnNpZGUgcHJvdmlkZWQgY29tcG9uZW50IHdoaWNoIHJlbmRlcmVkIGluIHdpbmRvdy5cbiAqXG4gKiBgYGB0c1xuICogdGhpcy53aW5kb3dTZXJ2aWNlLm9wZW4oTXlXaW5kb3dDb21wb25lbnQsIHsgLi4uIH0pO1xuICpcbiAqIC8vIG15LmNvbXBvbmVudC50c1xuICogY29uc3RydWN0b3IocHJvdGVjdGVkIHdpbmRvd1JlZjogTmJXaW5kb3dSZWYpIHtcbiAqIH1cbiAqXG4gKiBtaW5pbWl6ZSgpIHtcbiAqICAgdGhpcy53aW5kb3dSZWYubWluaW1pemUoKTtcbiAqIH1cbiAqXG4gKiBjbG9zZSgpIHtcbiAqICAgdGhpcy53aW5kb3dSZWYuY2xvc2UoKTtcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEluc3RlYWQgb2YgY29tcG9uZW50IHlvdSBjYW4gY3JlYXRlIHdpbmRvdyBmcm9tIFRlbXBsYXRlUmVmLiBBcyB1c3VhbCB5b3UgY2FuIGFjY2VzcyBjb250ZXh0IHByb3ZpZGVkIHZpYSBjb25maWdcbiAqIHZpYSBgbGV0LWAgdmFyaWFibGVzLiBBbHNvIHlvdSBjYW4gZ2V0IHJlZmVyZW5jZSB0byB0aGUgYE5iV2luZG93UmVmYCBpbiBjb250ZXh0J3MgYHdpbmRvd1JlZmAgcHJvcGVydHkuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShXaW5kb3cgY29udGVudCBmcm9tIFRlbXBsYXRlUmVmLCB3aW5kb3cvdGVtcGxhdGUtd2luZG93LmNvbXBvbmVudClcbiAqXG4gKiAjIyMgQ29uZmlndXJhdGlvblxuICpcbiAqIEFzIG1lbnRpb25lZCBhYm92ZSwgYG9wZW5gIG1ldGhvZCBvZiB0aGUgYE5iV2luZG93U2VydmljZWAgbWF5IHJlY2VpdmUgb3B0aW9uYWwgY29uZmlndXJhdGlvbiBvcHRpb25zLlxuICogQWxzbywgeW91IGNhbiBtb2RpZnkgZGVmYXVsdCB3aW5kb3dzIGNvbmZpZ3VyYXRpb24gdGhyb3VnaCBgTmJXaW5kb3dNb2R1bGUuZm9yUm9vdCh7IC4uLiB9KWAuXG4gKiBZb3UgY2FuIHJlYWQgYWJvdXQgYWxsIGF2YWlsYWJsZSBvcHRpb25zIG9uIFtBUEkgdGFiXShkb2NzL2NvbXBvbmVudHMvd2luZG93L2FwaSNuYndpbmRvd2NvbmZpZykuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShDb25maWd1cmF0aW9uLCB3aW5kb3cvd2luZG93cy1iYWNrZHJvcC5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiBjb25maWd1cmUgd2hpY2ggYnV0dG9ucyBhcmUgYXZhaWxhYmxlIGluIGEgd2luZG93IHZpYSB0aGUgYGJ1dHRvbnNgIHByb3BlcnR5IG9mIHRoZSB3aW5kb3cgY29uZmlnLlxuICogQHN0YWNrZWQtZXhhbXBsZShDb250cm9sIGJ1dHRvbnMsIHdpbmRvdy93aW5kb3ctY29udHJvbHMuY29tcG9uZW50KVxuICpcbiAqL1xuY2xhc3MgTmJXaW5kb3dTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIsIG92ZXJsYXlTZXJ2aWNlLCBvdmVybGF5UG9zaXRpb25CdWlsZGVyLCBibG9ja1Njcm9sbFN0cmF0ZWd5LCBkZWZhdWx0V2luZG93c0NvbmZpZywgY2ZyLCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlciA9IGNvbXBvbmVudEZhY3RvcnlSZXNvbHZlcjtcbiAgICAgICAgdGhpcy5vdmVybGF5U2VydmljZSA9IG92ZXJsYXlTZXJ2aWNlO1xuICAgICAgICB0aGlzLm92ZXJsYXlQb3NpdGlvbkJ1aWxkZXIgPSBvdmVybGF5UG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLmJsb2NrU2Nyb2xsU3RyYXRlZ3kgPSBibG9ja1Njcm9sbFN0cmF0ZWd5O1xuICAgICAgICB0aGlzLmRlZmF1bHRXaW5kb3dzQ29uZmlnID0gZGVmYXVsdFdpbmRvd3NDb25maWc7XG4gICAgICAgIHRoaXMuY2ZyID0gY2ZyO1xuICAgICAgICB0aGlzLm9wZW5XaW5kb3dzID0gW107XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogT3BlbnMgbmV3IHdpbmRvdy5cbiAgICAgKiBAcGFyYW0gd2luZG93Q29udGVudFxuICAgICAqIEBwYXJhbSB3aW5kb3dDb25maWdcbiAgICAgKiAqL1xuICAgIG9wZW4od2luZG93Q29udGVudCwgd2luZG93Q29uZmlnID0ge30pIHtcbiAgICAgICAgaWYgKHRoaXMuc2hvdWxkQ3JlYXRlV2luZG93c0NvbnRhaW5lcigpKSB7XG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVdpbmRvd3NDb250YWluZXIoKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgTmJXaW5kb3dDb25maWcodGhpcy5kZWZhdWx0V2luZG93c0NvbmZpZywgd2luZG93Q29uZmlnKTtcbiAgICAgICAgY29uc3Qgd2luZG93UmVmID0gbmV3IE5iV2luZG93UmVmKGNvbmZpZyk7XG4gICAgICAgIHdpbmRvd1JlZi5jb21wb25lbnRSZWYgPSB0aGlzLmFwcGVuZFdpbmRvdyh3aW5kb3dDb250ZW50LCBjb25maWcsIHdpbmRvd1JlZik7XG4gICAgICAgIHRoaXMub3BlbldpbmRvd3MucHVzaCh3aW5kb3dSZWYpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvRXZlbnRzKHdpbmRvd1JlZik7XG4gICAgICAgIHJldHVybiB3aW5kb3dSZWY7XG4gICAgfVxuICAgIHNob3VsZENyZWF0ZVdpbmRvd3NDb250YWluZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmKSB7XG4gICAgICAgICAgICBjb25zdCBjb250YWluZXJFbCA9IHRoaXMud2luZG93c0NvbnRhaW5lclZpZXdSZWYuZWxlbWVudC5uYXRpdmVFbGVtZW50O1xuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmRvY3VtZW50LmJvZHkuY29udGFpbnMoY29udGFpbmVyRWwpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBjcmVhdGVXaW5kb3dzQ29udGFpbmVyKCkge1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5UmVmKSB7XG4gICAgICAgICAgICB0aGlzLm92ZXJsYXlSZWYuZGlzcG9zZSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheVJlZiA9IHRoaXMub3ZlcmxheVNlcnZpY2UuY3JlYXRlKHtcbiAgICAgICAgICAgIHNjcm9sbFN0cmF0ZWd5OiB0aGlzLm92ZXJsYXlTZXJ2aWNlLnNjcm9sbFN0cmF0ZWdpZXMubm9vcCgpLFxuICAgICAgICAgICAgcG9zaXRpb25TdHJhdGVneTogdGhpcy5vdmVybGF5UG9zaXRpb25CdWlsZGVyLmdsb2JhbCgpLmJvdHRvbSgpLnJpZ2h0KCksXG4gICAgICAgICAgICBoYXNCYWNrZHJvcDogdHJ1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHdpbmRvd3NDb250YWluZXJQb3J0YWwgPSBuZXcgTmJDb21wb25lbnRQb3J0YWwoTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50LCBudWxsLCBudWxsLCB0aGlzLmNmcik7XG4gICAgICAgIGNvbnN0IG92ZXJsYXlSZWYgPSB0aGlzLm92ZXJsYXlSZWYuYXR0YWNoKHdpbmRvd3NDb250YWluZXJQb3J0YWwpO1xuICAgICAgICB0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmID0gb3ZlcmxheVJlZi5pbnN0YW5jZS52aWV3Q29udGFpbmVyUmVmO1xuICAgIH1cbiAgICBhcHBlbmRXaW5kb3coY29udGVudCwgY29uZmlnLCB3aW5kb3dSZWYpIHtcbiAgICAgICAgY29uc3QgY29udGV4dCA9IGNvbnRlbnQgaW5zdGFuY2VvZiBUZW1wbGF0ZVJlZlxuICAgICAgICAgICAgPyB7ICRpbXBsaWNpdDogY29uZmlnLmNvbnRleHQsIHdpbmRvd1JlZiB9XG4gICAgICAgICAgICA6IGNvbmZpZy5jb250ZXh0O1xuICAgICAgICBjb25zdCBwcm92aWRlcnMgPSBbXG4gICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1dJTkRPV19DT05URU5ULCB1c2VWYWx1ZTogY29udGVudCB9LFxuICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9XSU5ET1dfQ09OVEVYVCwgdXNlVmFsdWU6IGNvbnRleHQgfSxcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTmJXaW5kb3dDb25maWcsIHVzZVZhbHVlOiBjb25maWcgfSxcbiAgICAgICAgICAgIHsgcHJvdmlkZTogTmJXaW5kb3dSZWYsIHVzZVZhbHVlOiB3aW5kb3dSZWYgfSxcbiAgICAgICAgXTtcbiAgICAgICAgY29uc3QgcGFyZW50SW5qZWN0b3IgPSBjb25maWcudmlld0NvbnRhaW5lclJlZlxuICAgICAgICAgICAgPyBjb25maWcudmlld0NvbnRhaW5lclJlZi5pbmplY3RvclxuICAgICAgICAgICAgOiB0aGlzLndpbmRvd3NDb250YWluZXJWaWV3UmVmLmluamVjdG9yO1xuICAgICAgICBjb25zdCBpbmplY3RvciA9IEluamVjdG9yLmNyZWF0ZSh7IHBhcmVudDogcGFyZW50SW5qZWN0b3IsIHByb3ZpZGVycyB9KTtcbiAgICAgICAgY29uc3Qgd2luZG93RmFjdG9yeSA9IHRoaXMuY29tcG9uZW50RmFjdG9yeVJlc29sdmVyLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KE5iV2luZG93Q29tcG9uZW50KTtcbiAgICAgICAgY29uc3QgcmVmID0gdGhpcy53aW5kb3dzQ29udGFpbmVyVmlld1JlZi5jcmVhdGVDb21wb25lbnQod2luZG93RmFjdG9yeSwgbnVsbCwgaW5qZWN0b3IpO1xuICAgICAgICByZWYuaW5zdGFuY2UuY2ZyID0gdGhpcy5jZnI7XG4gICAgICAgIHJlZi5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICAgIHJldHVybiByZWY7XG4gICAgfVxuICAgIHN1YnNjcmliZVRvRXZlbnRzKHdpbmRvd1JlZikge1xuICAgICAgICBpZiAod2luZG93UmVmLmNvbmZpZy5jbG9zZU9uQmFja2Ryb3BDbGljaykge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmLmJhY2tkcm9wQ2xpY2soKS5zdWJzY3JpYmUoKCkgPT4gd2luZG93UmVmLmNsb3NlKCkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh3aW5kb3dSZWYuY29uZmlnLmNsb3NlT25Fc2MpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5rZXlkb3duRXZlbnRzKClcbiAgICAgICAgICAgICAgICAucGlwZShmaWx0ZXIoKGV2ZW50KSA9PiBldmVudC5rZXlDb2RlID09PSAyNykpXG4gICAgICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB3aW5kb3dSZWYuY2xvc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93UmVmLnN0YXRlQ2hhbmdlLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNoZWNrQW5kVXBkYXRlT3ZlcmxheSgpKTtcbiAgICAgICAgd2luZG93UmVmLm9uQ2xvc2Uuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3BlbldpbmRvd3Muc3BsaWNlKHRoaXMub3BlbldpbmRvd3MuaW5kZXhPZih3aW5kb3dSZWYpLCAxKTtcbiAgICAgICAgICAgIHRoaXMuY2hlY2tBbmRVcGRhdGVPdmVybGF5KCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjaGVja0FuZFVwZGF0ZU92ZXJsYXkoKSB7XG4gICAgICAgIGNvbnN0IGZ1bGxTY3JlZW5XaW5kb3dzID0gdGhpcy5vcGVuV2luZG93cy5maWx0ZXIodyA9PiB3LnN0YXRlID09PSBOYldpbmRvd1N0YXRlLkZVTExfU0NSRUVOKTtcbiAgICAgICAgaWYgKGZ1bGxTY3JlZW5XaW5kb3dzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tTY3JvbGxTdHJhdGVneS5lbmFibGUoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tTY3JvbGxTdHJhdGVneS5kaXNhYmxlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZ1bGxTY3JlZW5XaW5kb3dzLnNvbWUodyA9PiB3LmNvbmZpZy5oYXNCYWNrZHJvcCkpIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5iYWNrZHJvcEVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub3ZlcmxheVJlZi5iYWNrZHJvcEVsZW1lbnQuc2V0QXR0cmlidXRlKCdoaWRkZW4nLCAnJyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5OYldpbmRvd1NlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iV2luZG93U2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5U2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyIH0sXG4gICAgeyB0eXBlOiBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyIH0sXG4gICAgeyB0eXBlOiBOYldpbmRvd0NvbmZpZywgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfV0lORE9XX0NPTkZJRyxdIH1dIH0sXG4gICAgeyB0eXBlOiBDb21wb25lbnRGYWN0b3J5UmVzb2x2ZXIgfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfRE9DVU1FTlQsXSB9XSB9XG5dO1xuXG5jbGFzcyBOYldpbmRvd01vZHVsZSB7XG4gICAgc3RhdGljIGZvclJvb3QoZGVmYXVsdENvbmZpZykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iV2luZG93TW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgTmJXaW5kb3dTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfV0lORE9XX0NPTkZJRywgdXNlVmFsdWU6IGRlZmF1bHRDb25maWcgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyBmb3JDaGlsZChkZWZhdWx0Q29uZmlnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJXaW5kb3dNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICBOYldpbmRvd1NlcnZpY2UsXG4gICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOQl9XSU5ET1dfQ09ORklHLCB1c2VWYWx1ZTogZGVmYXVsdENvbmZpZyB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfTtcbiAgICB9XG59XG5OYldpbmRvd01vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTmJPdmVybGF5TW9kdWxlLCBOYkNhcmRNb2R1bGUsIE5iSWNvbk1vZHVsZSwgTmJCdXR0b25Nb2R1bGVdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICBOYldpbmRvd3NDb250YWluZXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iV2luZG93Q29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbTmJXaW5kb3dzQ29udGFpbmVyQ29tcG9uZW50LCBOYldpbmRvd0NvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBUaGUgYE5iVGltZVBpY2tlckRpcmVjdGl2ZWAgaXMgZm9ybSBjb250cm9sIHRoYXQgZ2l2ZXMgeW91IGFiaWxpdHkgdG8gc2VsZWN0IGEgdGltZS4gVGhlIHRpbWVwaWNrZXJcbiAqIGlzIHNob3duIHdoZW4gaW5wdXQgcmVjZWl2ZXMgYSBgZm9jdXNgIGV2ZW50LlxuICogYGBgaHRtbFxuICogPGlucHV0IFtuYlRpbWVwaWNrZXJdPVwidGltZXBpY2tlclwiPlxuICogPG5iLXRpbWVwaWNrZXIgI3RpbWVwaWNrZXI+PC9uYi10aW1lcGlja2VyPlxuICogYGBgXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgdGltZXBpY2tlci90aW1lcGlja2VyLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiAjIyMgSW5zdGFsbGF0aW9uXG4gKlxuICogSW1wb3J0IGBOYlRpbWVwaWNrZXJNb2R1bGUuZm9yUm9vdCgpYCB0byB5b3VyIHJvb3QgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlRpbWVwaWNrZXJNb2R1bGUuZm9yUm9vdCgpLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBBcHBNb2R1bGUgeyB9XG4gKiBgYGBcbiAqIEFuZCBgTmJUaW1lcGlja2VyTW9kdWxlYCB0byB5b3VyIGZlYXR1cmUgbW9kdWxlLlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlRpbWVwaWNrZXJNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKlxuICogYGBgXG4gKiA8ZGl2IGlkPVwibmF0aXZlLXBhcnNlLWlzc3VlXCIgY2xhc3M9XCJub3RlIG5vdGUtd2FybmluZ1wiPlxuICogPGRpdiBjbGFzcz1cIm5vdGUtdGl0bGVcIj5Ob3RlPC9kaXY+XG4gKiA8ZGl2IGNsYXNzPVwibm90ZS1ib2R5XCI+XG4gKiBUaW1lcGlja2VyIHVzZXMgbmF0aXZlIERhdGUgb2JqZWN0IGJ5IGRlZmF1bHQsIHdoaWNoIGRvZXNuJ3Qgc3VwcG9ydCBwYXJzaW5nIGJ5IGN1c3RvbSBmb3JtYXQuXG4gKiBBY2NvcmRpbmcgdG8gdGhlIEVDTUFTY3JpcHQgc3BlY2lmaWNhdGlvbiwgdGhlIG9ubHkgc3VwcG9ydGVkIGZvcm1hdCBpcyBhIGZvcm1hdCBkZXNjcmliZWQgYnkgSVNPIDgwNjEgc3RhbmRhcmQuXG4gKiBUaGlzIHN0YW5kYXJkIHJlcXVpcmVzIGRhdGUgcGFydCB0byBiZSBpbmNsdWRlZCBpbiB0aGUgZGF0ZSBzdHJpbmcsXG4gKiBtZWFuaW5nIHlvdSBoYXZlIHRvIHR5cGUgYSBkYXRlK3RpbWUgaW4gdGhlIGlucHV0LlxuICogV2UgaGlnaGx5IHJlY29tbWVuZCB5b3UgdG8gdXNlIE5iRGF0ZUZuc0RhdGVNb2R1bGUgb3IgTmJNb21lbnREYXRlTW9kdWxlIHRvIGJlIGFibGUgdG8gc3VwcG9ydCB0aW1lIG9ubHkgc3RyaW5ncyBpblxuICogdGhlIHRpbWVwaWNrZXIgaW5wdXRzLiBUaGVzZSBtb2R1bGVzIHVzZSBkYXRlLWZucyBhbmQgbW9tZW50IGRhdGUgbGlicmFyaWVzLCB3aGljaCBwcm92aWRlIGNhcGFiaWxpdGllc1xuICogdG8gcGFyc2UgdGltZSBvbmx5IHN0cmluZ3MuXG4gKiBTZWUgXCJGb3JtYXR0aW5nIElzc3VlXCIgYXRcbiAqIDxhIGhyZWY9XCJodHRwczovL2FrdmVvLmdpdGh1Yi5pby9uZWJ1bGFyL2RvY3MvY29tcG9uZW50cy9kYXRlcGlja2VyL292ZXJ2aWV3I2Zvcm1hdHRpbmctaXNzdWVcIj5EYXRlIHBpY2tlciBkb2NzPC9hPlxuICogZm9yIGluc3RhbGxhdGlvbiBpbnN0cnVjdGlvbnMuXG4gKiA8L2Rpdj5cbiAqIDwvZGl2PlxuICogPGhyPlxuICpcbiAqICMjIyBVc2FnZVxuICpcbiAqIFRvIHNob3cgc2Vjb25kcyBjb2x1bW4gYWxvbmcgd2l0aCBob3VycyBhbmQgbWludXRlcyB1c2UgYHdpdGhTZWNvbmRzYCBpbnB1dFxuICpcbiAqIGBgYGh0bWxcbiAqIDxpbnB1dCBbbmJUaW1lcGlja2VyXT1cInRpbWVwaWNrZXJcIj5cbiAqIDxuYi10aW1lcGlja2VyICN0aW1lcGlja2VyIHdpdGhTZWNvbmRzPjwvbmItdGltZXBpY2tlcj5cbiAqIGBgYFxuICogQHN0YWNrZWQtZXhhbXBsZShUaW1lIHBpY2tlciB3aXRoIHNlY29uZHMsIHRpbWVwaWNrZXIvdGltZXBpY2tlci13aXRoLXNlY29uZHMuY29tcG9uZW50KVxuICpcbiAqIFRvIGZvcmNlIHRpbWVwaWNrZXIgd29yayBpbiAxMiBob3VycyBmb3JtYXQsIHVzZSBgdHdlbHZlSG91cnNGb3JtYXRgIGlucHV0LlxuICogQnkgZGVmYXVsdCwgdGltZXBpY2tlciBjaG9vc2UgMTIgb3IgMjQgZm9ybWF0cyBiYXNlZCBvbiBhcHBsaWNhdGlvbiBsb2NhbGUgc3RhbmRhcmRzXG4gKlxuICogYGBgaHRtbFxuICogPGlucHV0IFtuYlRpbWVwaWNrZXJdPVwidGltZXBpY2tlclwiIHR3ZWx2ZUhvdXJzRm9ybWF0PlxuICogPG5iLXRpbWVwaWNrZXIgI3RpbWVwaWNrZXI+PC9uYi10aW1lcGlja2VyPlxuICogYGBgXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShUd2VsdmUgaG91cnMgZm9ybWF0IHNob3djYXNlLCB0aW1lcGlja2VyL3RpbWVwaWNrZXItdHdlbHZlLWhvdXJzLWZvcm1hdC5jb21wb25lbnQpXG4gKlxuICogQSBzaW5nbGUgY29sdW1uIHBpY2tlciB3aXRoIG9wdGlvbnMgdmFsdWUgYXMgdGltZSBhbmQgbWludXRlLCBzbyB1c2VycyB3b27igJl0IGJlIGFibGUgdG8gcGlja1xuICogaG91cnMgYW5kIG1pbnV0ZXMgaW5kaXZpZHVhbGx5LlxuICogWW91IGNhbiBjb250cm9sIG9wdGlvbnMgbWludXRlcyBvZmZzZXQgdmlhIGBzdGVwYCBpbnB1dCwgZS5nLjogMTE6MDAsIDExOjIwLCAxMTo0MC4uLidcbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFNpbmdsZSBjb2x1bW4sIHRpbWVwaWNrZXIvdGltZXBpY2tlci1zaW5nbGUtY29sdW1uLmNvbXBvbmVudClcbiAqXG4gKiBUaW1lcGlja2VyIHN1cHBvcnQgZm9ybXMgYW5kIHJlYWN0aXZlIGZvcm1zIEFQSSBzbyB5b3UgY2FuIHByb3ZpZGUgdmFsdWUgdXNpbmcgYGZvcm1Db250cm9sYCBhbmQgYG5nTW9kZWxgIGRpcmVjdGl2ZXNcbiAqIEBzdGFja2VkLWV4YW1wbGUoRm9ybSBjb250cm9sLCB0aW1lcGlja2VyL3RpbWVwaWNrZXItZm9ybS1jb250cm9sLmNvbXBvbmVudClcbiAqXG4gKiA8aW5wdXQgW25iVGltZXBpY2tlcl09XCJ0aW1lcGlja2VyXCIgdHdlbHZlSG91cnNGb3JtYXQ+XG4gKiA8bmItdGltZXBpY2tlciAjdGltZXBpY2tlIFtmb3JtQ29udHJvbF09XCJmb3JtQ29udHJvbFwiPjwvbmItdGltZXBpY2tlcj5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKE5nTW9kZWwsIHRpbWVwaWNrZXIvdGltZXBpY2tlci1uZy1tb2RlbC5jb21wb25lbnQpXG4gKlxuICogPGlucHV0IFtuYlRpbWVwaWNrZXJdPVwidGltZXBpY2tlclwiIHR3ZWx2ZUhvdXJzRm9ybWF0PlxuICogPG5iLXRpbWVwaWNrZXIgI3RpbWVwaWNrZSBbbmdNb2RlbF09XCJkYXRlXCI+PC9uYi10aW1lcGlja2VyPlxuICpcbiAqIFlvdSBjYW4gcHJvdmlkZSBsb2NhbGl6ZWQgdmVyc2lvbnMgb2YgdGhlIHRpbWVwaWNrZXIgdGV4dCB2aWEgdGhlIGBsb2NhbGl6YXRpb25gIHByb3BlcnR5IG9mIHRoZSBjb25maWdcbiAqIG9iamVjdCBwYXNzZWQgdG8gdGhlIGBmb3JSb290YCBvciBgZm9yQ2hpbGRgIG1ldGhvZHMgb2YgdGhlIGBOYlRpbWVwaWNrZXJNb2R1bGVgOlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlRpbWVwaWNrZXJNb2R1bGUuZm9yUm9vdCh7XG4gKiAgICAgICBsb2NhbGl6YXRpb246IHtcbiAqICAgICAgICAgaG91cnNUZXh0OiAnSHInLFxuICogICAgICAgICBtaW51dGVzVGV4dDogJ01pbicsXG4gKiAgICAgICAgIHNlY29uZHNUZXh0OiAnU2VjJyxcbiAqICAgICAgICAgYW1wbVRleHQ6ICdBbS9QbScsXG4gKiAgICAgICB9XG4gKiAgICAgfSksXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIEFwcE1vZHVsZSB7IH1cbiAqIGBgYFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiB0aW1lcGlja2VyLWNlbGwtdGV4dC1jb2xvcjpcbiAqIHRpbWVwaWNrZXItY2VsbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGltZXBpY2tlci1jZWxsLWhvdmVyLXRleHQtY29sb3I6XG4gKiB0aW1lcGlja2VyLWNlbGwtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRpbWVwaWNrZXItY2VsbC1mb2N1cy10ZXh0LWNvbG9yOlxuICogdGltZXBpY2tlci1jZWxsLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGltZXBpY2tlci1jZWxsLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogdGltZXBpY2tlci1jZWxsLXRleHQtZm9udC1zaXplOlxuICogdGltZXBpY2tlci1jZWxsLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0aW1lcGlja2VyLWNlbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIHRpbWVwaWNrZXItY2VsbC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdGltZXBpY2tlci1jZWxsLWhlaWdodDpcbiAqIHRpbWVwaWNrZXItaGVhZGVyLWNlbGwtdGV4dC1jb2xvcjpcbiAqIHRpbWVwaWNrZXItaGVhZGVyLWNlbGwtdGV4dC1mb250LXNpemU6XG4gKiB0aW1lcGlja2VyLWhlYWRlci1jZWxsLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0aW1lcGlja2VyLWhlYWRlci1jZWxsLWhlaWdodDpcbiAqIHRpbWVwaWNrZXItaGVhZGVyLWNlbGwtdGV4dC1saW5lLWhlaWdodDpcbiAqIHRpbWVwaWNrZXItaGVhZGVyLWNlbGwtdGV4dC1mb250LXdlaWdodDpcbiAqIHRpbWVwaWNrZXItYm9yZGVyLWNvbG9yOlxuICogdGltZXBpY2tlci1ib3JkZXItc3R5bGU6XG4gKiB0aW1lcGlja2VyLWJvcmRlci13aWR0aDpcbiAqIHRpbWVwaWNrZXItc2Nyb2xsYmFyLWNvbG9yOlxuICogdGltZXBpY2tlci1zY3JvbGxiYXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRpbWVwaWNrZXItc2Nyb2xsYmFyLXdpZHRoOlxuICogdGltZXBpY2tlci1zaW5nbGUtY29sdW1uLXdpZHRoOlxuICogdGltZXBpY2tlci1tdWx0aXBsZS1jb2x1bW4td2lkdGg6XG4gKiB0aW1lcGlja2VyLXRpdGxlLWhlaWdodDpcbiAqIHRpbWVwaWNrZXItdGl0bGUtcGFkZGluZzpcbiAqIHRpbWVwaWNrZXItY29udGFpbmVyLXdpZHRoOlxuICogdGltZXBpY2tlci1jb250YWluZXItaGVpZ2h0OlxuICogKi9cbmNsYXNzIE5iVGltZVBpY2tlckRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IoZG9jdW1lbnQsIHBvc2l0aW9uQnVpbGRlciwgaG9zdFJlZiwgdHJpZ2dlclN0cmF0ZWd5QnVpbGRlciwgb3ZlcmxheSwgY2QsIGNhbGVuZGFyVGltZU1vZGVsU2VydmljZSwgZGF0ZVNlcnZpY2UsIHJlbmRlcmVyLCBwbGFjZWhvbGRlcikge1xuICAgICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgICAgIHRoaXMucG9zaXRpb25CdWlsZGVyID0gcG9zaXRpb25CdWlsZGVyO1xuICAgICAgICB0aGlzLmhvc3RSZWYgPSBob3N0UmVmO1xuICAgICAgICB0aGlzLnRyaWdnZXJTdHJhdGVneUJ1aWxkZXIgPSB0cmlnZ2VyU3RyYXRlZ3lCdWlsZGVyO1xuICAgICAgICB0aGlzLm92ZXJsYXkgPSBvdmVybGF5O1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlID0gY2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRhdGVTZXJ2aWNlID0gZGF0ZVNlcnZpY2U7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGltZSBwaWNrZXIgb3ZlcmxheSBvZmZzZXQuXG4gICAgICAgICAqICovXG4gICAgICAgIHRoaXMub3ZlcmxheU9mZnNldCA9IDg7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uVG91Y2hlZCA9ICgpID0+IHtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgdGltZXBpY2tlciBjb21wb25lbnQuXG4gICAgICogKi9cbiAgICBnZXQgdGltZXBpY2tlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbWVQaWNrZXJDb21wb25lbnQ7XG4gICAgfVxuICAgIHNldCB0aW1lcGlja2VyKHRpbWVQaWNrZXIpIHtcbiAgICAgICAgdGhpcy5fdGltZVBpY2tlckNvbXBvbmVudCA9IHRpbWVQaWNrZXI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgaHRtbCBpbnB1dCBlbGVtZW50LlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiAqL1xuICAgIGdldCBpbnB1dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaG9zdFJlZi5uYXRpdmVFbGVtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBEZXRlcm1pbmVzIGlzIHRpbWVwaWNrZXIgb3ZlcmxheSBvcGVuZWQuXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqICovXG4gICAgZ2V0IGlzT3BlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheVJlZiAmJiB0aGlzLm92ZXJsYXlSZWYuaGFzQXR0YWNoZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpcyB0aW1lcGlja2VyIG92ZXJsYXkgY2xvc2VkLlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiAqL1xuICAgIGdldCBpc0Nsb3NlZCgpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBob3N0IGlucHV0IHZhbHVlLlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiAqL1xuICAgIGdldCBpbnB1dFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWx1ZTtcbiAgICB9XG4gICAgc2V0IGlucHV0VmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25JbnB1dENoYW5nZSgpO1xuICAgICAgICBpZiAoIXRoaXMucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuc2V0UHJvcGVydHkodGhpcy5pbnB1dCwgJ3BsYWNlaG9sZGVyJywgdGhpcy50aW1lcGlja2VyLnRpbWVGb3JtYXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5ID0gdGhpcy5jcmVhdGVUcmlnZ2VyU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy5zdWJzY3JpYmVPblRyaWdnZXJzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlVG9CbHVyKCk7XG4gICAgfVxuICAgIHNob3coKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLmF0dGFjaFRvT3ZlcmxheSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhpZGUoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgICAgdGhpcy5vdmVybGF5UmVmLmRldGFjaCgpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBwaWNrZXIgdG8gdGhlIHRpbWVwaWNrZXIgcG9ydGFsLlxuICAgICAqIEBkb2NzLXByaXZhdGVcbiAgICAgKiAqL1xuICAgIGF0dGFjaFRvT3ZlcmxheSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLm92ZXJsYXlSZWYpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0dXBUaW1lcGlja2VyKCk7XG4gICAgICAgICAgICB0aGlzLmluaXRPdmVybGF5KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vdmVybGF5UmVmLmF0dGFjaCh0aGlzLnRpbWVwaWNrZXIucG9ydGFsKTtcbiAgICB9XG4gICAgc2V0dXBUaW1lcGlja2VyKCkge1xuICAgICAgICBpZiAodGhpcy5kYXRlU2VydmljZS5nZXRJZCgpID09PSAnbmF0aXZlJyAmJiBpc0Rldk1vZGUoKSkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdEYXRlLnBhcnNlIGRvZXMgbm90IHN1cHBvcnQgcGFyc2luZyB0aW1lIHdpdGggY3VzdG9tIGZvcm1hdC4nICtcbiAgICAgICAgICAgICAgICAnIFNlZSBkZXRhaWxzIGhlcmUgaHR0cHM6Ly9ha3Zlby5naXRodWIuaW8vbmVidWxhci9kb2NzL2NvbXBvbmVudHMvZGF0ZXBpY2tlci9vdmVydmlldyNuYXRpdmUtcGFyc2UtaXNzdWUnKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRpbWVwaWNrZXIuc2V0SG9zdCh0aGlzLmhvc3RSZWYpO1xuICAgICAgICBpZiAodGhpcy5pbnB1dFZhbHVlKSB7XG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldElkKCkgPT09ICduYXRpdmUnID8gdGhpcy5wYXJzZU5hdGl2ZURhdGVTdHJpbmcodGhpcy5pbnB1dFZhbHVlKSA6IHRoaXMuaW5wdXRWYWx1ZTtcbiAgICAgICAgICAgIHRoaXMudGltZXBpY2tlci5kYXRlID0gdGhpcy5kYXRlU2VydmljZS5wYXJzZSh2YWwsIHRoaXMudGltZXBpY2tlci50aW1lRm9ybWF0KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudGltZXBpY2tlci5kYXRlID0gdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UuZ2V0UmVzZXRUaW1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW5pdE92ZXJsYXkoKSB7XG4gICAgICAgIHRoaXMucG9zaXRpb25TdHJhdGVneSA9IHRoaXMuY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uQXBwbHlDbGljaygpO1xuICAgICAgICB0aGlzLmNyZWF0ZU92ZXJsYXkoKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlT25BcHBseUNsaWNrKCkge1xuICAgICAgICB0aGlzLnRpbWVwaWNrZXIub25TZWxlY3RUaW1lLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKS5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0aW1lID0gdGhpcy5kYXRlU2VydmljZS5mb3JtYXQodmFsdWUudGltZSwgdGhpcy50aW1lcGlja2VyLnRpbWVGb3JtYXQpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICB0aGlzLmlucHV0VmFsdWUgPSB0aW1lO1xuICAgICAgICAgICAgdGhpcy50aW1lcGlja2VyLmRhdGUgPSB2YWx1ZS50aW1lO1xuICAgICAgICAgICAgdGhpcy5vbkNoYW5nZSh2YWx1ZS50aW1lKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5zYXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0SW5wdXRWYWx1ZSA9IHRpbWU7XG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjcmVhdGVPdmVybGF5KCkge1xuICAgICAgICBjb25zdCBzY3JvbGxTdHJhdGVneSA9IHRoaXMuY3JlYXRlU2Nyb2xsU3RyYXRlZ3koKTtcbiAgICAgICAgdGhpcy5vdmVybGF5UmVmID0gdGhpcy5vdmVybGF5LmNyZWF0ZSh7IHBvc2l0aW9uU3RyYXRlZ3k6IHRoaXMucG9zaXRpb25TdHJhdGVneSwgc2Nyb2xsU3RyYXRlZ3kgfSk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uVHJpZ2dlcnMoKSB7XG4gICAgICAgIHRoaXMudHJpZ2dlclN0cmF0ZWd5LnNob3ckXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gdGhpcy5pc0Nsb3NlZCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuc2hvdygpKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyU3RyYXRlZ3kuaGlkZSRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLmlzT3BlbikpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHRoaXMubGFzdElucHV0VmFsdWUgfHwgJyc7XG4gICAgICAgICAgICB0aGlzLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNyZWF0ZVRyaWdnZXJTdHJhdGVneSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJpZ2dlclN0cmF0ZWd5QnVpbGRlclxuICAgICAgICAgICAgLnRyaWdnZXIoTmJUcmlnZ2VyLkZPQ1VTKVxuICAgICAgICAgICAgLmhvc3QodGhpcy5ob3N0UmVmLm5hdGl2ZUVsZW1lbnQpXG4gICAgICAgICAgICAuY29udGFpbmVyKCgpID0+IHRoaXMuZ2V0Q29udGFpbmVyKCkpXG4gICAgICAgICAgICAuYnVpbGQoKTtcbiAgICB9XG4gICAgY3JlYXRlUG9zaXRpb25TdHJhdGVneSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zaXRpb25CdWlsZGVyXG4gICAgICAgICAgICAuY29ubmVjdGVkVG8odGhpcy5ob3N0UmVmKVxuICAgICAgICAgICAgLnBvc2l0aW9uKE5iUG9zaXRpb24uQk9UVE9NKVxuICAgICAgICAgICAgLm9mZnNldCh0aGlzLm92ZXJsYXlPZmZzZXQpXG4gICAgICAgICAgICAuYWRqdXN0bWVudChOYkFkanVzdG1lbnQuVkVSVElDQUwpO1xuICAgIH1cbiAgICBnZXRDb250YWluZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm92ZXJsYXlSZWYgJiYgdGhpcy5pc09wZW4gJiYge1xuICAgICAgICAgICAgbG9jYXRpb246IHtcbiAgICAgICAgICAgICAgICBuYXRpdmVFbGVtZW50OiB0aGlzLm92ZXJsYXlSZWYub3ZlcmxheUVsZW1lbnQsXG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjcmVhdGVTY3JvbGxTdHJhdGVneSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3ZlcmxheS5zY3JvbGxTdHJhdGVnaWVzLmJsb2NrKCk7XG4gICAgfVxuICAgIHN1YnNjcmliZU9uSW5wdXRDaGFuZ2UoKSB7XG4gICAgICAgIGZyb21FdmVudCh0aGlzLmlucHV0LCAnaW5wdXQnKVxuICAgICAgICAgICAgLnBpcGUobWFwKCgpID0+IHRoaXMuaW5wdXRWYWx1ZSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB0aGlzLmhhbmRsZUlucHV0Q2hhbmdlKHZhbHVlKSk7XG4gICAgfVxuICAgIHN1YnNjcmliZVRvQmx1cigpIHtcbiAgICAgICAgbWVyZ2UodGhpcy50aW1lcGlja2VyLmJsdXIsIGZyb21FdmVudCh0aGlzLmlucHV0LCAnYmx1cicpLnBpcGUoZmlsdGVyKCgpID0+ICF0aGlzLmlzT3BlbiAmJiB0aGlzLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgIT09IHRoaXMuaW5wdXQpKSkucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMub25Ub3VjaGVkKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgaW5wdXQgdmFsdWUgYW5kIHdyaXRlIGlmIGl0IGlzbid0IG51bGwuXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqICovXG4gICAgaGFuZGxlSW5wdXRDaGFuZ2UodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0ZVNlcnZpY2UuZ2V0SWQoKSA9PT0gJ25hdGl2ZScpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogTmF0aXZlIGRhdGUgc2VydmljZSBkb250IHBhcnNlIG9ubHkgdGltZSBzdHJpbmcgdmFsdWUsXG4gICAgICAgICAgICAgKiBhbmQgd2UgYWRkaW5nIHllYXIgbW91dGggYW5kIGRheSB0byBjb252ZXJ0IHN0cmluZyB0byB2YWxpZCBkYXRlIGZvcm1hdFxuICAgICAgICAgICAgICoqL1xuICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnBhcnNlTmF0aXZlRGF0ZVN0cmluZyh2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNWYWxpZERhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKHZhbHVlLCB0aGlzLnRpbWVwaWNrZXIudGltZUZvcm1hdCk7XG4gICAgICAgIGlmIChpc1ZhbGlkRGF0ZSkge1xuICAgICAgICAgICAgdGhpcy5sYXN0SW5wdXRWYWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IHRoaXMuZGF0ZVNlcnZpY2UucGFyc2UodmFsdWUsIHRoaXMudGltZXBpY2tlci50aW1lRm9ybWF0KTtcbiAgICAgICAgICAgIHRoaXMub25DaGFuZ2UoZGF0ZSk7XG4gICAgICAgICAgICB0aGlzLnRpbWVwaWNrZXIuZGF0ZSA9IGRhdGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWVwaWNrZXIuZGF0ZSA9IHZhbHVlO1xuICAgICAgICAgICAgY29uc3QgdGltZVN0cmluZyA9IHRoaXMuZGF0ZVNlcnZpY2UuZm9ybWF0KHZhbHVlLCB0aGlzLnRpbWVwaWNrZXIudGltZUZvcm1hdCkudG9VcHBlckNhc2UoKTtcbiAgICAgICAgICAgIHRoaXMuaW5wdXRWYWx1ZSA9IHRpbWVTdHJpbmc7XG4gICAgICAgICAgICB0aGlzLmxhc3RJbnB1dFZhbHVlID0gdGltZVN0cmluZztcbiAgICAgICAgfVxuICAgIH1cbiAgICB3cml0ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVmFsdWUodmFsdWUpO1xuICAgIH1cbiAgICByZWdpc3Rlck9uQ2hhbmdlKGZuKSB7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSBmbjtcbiAgICB9XG4gICAgcmVnaXN0ZXJPblRvdWNoZWQoZm4pIHtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSBmbjtcbiAgICB9XG4gICAgcGFyc2VOYXRpdmVEYXRlU3RyaW5nKHZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGRhdGUgPSB0aGlzLmRhdGVTZXJ2aWNlLnRvZGF5KCk7XG4gICAgICAgIGNvbnN0IHllYXIgPSB0aGlzLmRhdGVTZXJ2aWNlLmdldFllYXIoZGF0ZSk7XG4gICAgICAgIGNvbnN0IG1vbnRoID0gdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UucGFkZFRvVHdvU3ltYm9scyh0aGlzLmRhdGVTZXJ2aWNlLmdldE1vbnRoKGRhdGUpKTtcbiAgICAgICAgY29uc3QgZGF5ID0gdGhpcy5jYWxlbmRhclRpbWVNb2RlbFNlcnZpY2UucGFkZFRvVHdvU3ltYm9scyh0aGlzLmRhdGVTZXJ2aWNlLmdldERhdGUoZGF0ZSkpO1xuICAgICAgICByZXR1cm4gYCR7eWVhcn0tJHttb250aH0tJHtkYXl9ICR7dmFsdWV9YDtcbiAgICB9XG59XG5OYlRpbWVQaWNrZXJEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ2lucHV0W25iVGltZXBpY2tlcl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gTmJUaW1lUGlja2VyRGlyZWN0aXZlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUaW1lUGlja2VyRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iT3ZlcmxheVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBOYkNhbGVuZGFyVGltZU1vZGVsU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBTdHJpbmcsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEF0dHJpYnV0ZSwgYXJnczogWydwbGFjZWhvbGRlcicsXSB9XSB9XG5dO1xuTmJUaW1lUGlja2VyRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRpbWVwaWNrZXI6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVGltZXBpY2tlcicsXSB9XSxcbiAgICBvdmVybGF5T2Zmc2V0OiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcblxuY2xhc3MgTmJUaW1lUGlja2VyQ2VsbENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3Iobmdab25lLCBwbGF0Zm9ybVNlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5uZ1pvbmUgPSBuZ1pvbmU7XG4gICAgICAgIHRoaXMucGxhdGZvcm1TZXJ2aWNlID0gcGxhdGZvcm1TZXJ2aWNlO1xuICAgICAgICB0aGlzLnNlbGVjdGVkQ2hhbmdlJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMudW5zZWxlY3RlZCQgPSB0aGlzLnNlbGVjdGVkQ2hhbmdlJC5waXBlKGZpbHRlcigoc2VsZWN0ZWQpID0+ICFzZWxlY3RlZCkpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5zZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIHNldCBzZWxlY3RlZChzZWxlY3RlZCkge1xuICAgICAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICAgICAgICB0aGlzLnNjcm9sbFRvRWxlbWVudCgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFuZ2UkLm5leHQoc2VsZWN0ZWQpO1xuICAgIH1cbiAgICA7XG4gICAgZ2V0IHNlbGVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XG4gICAgfVxuICAgIG9uQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0LmVtaXQoeyB2YWx1ZTogdGhpcy52YWx1ZSB9KTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCkge1xuICAgICAgICAgICAgLy8gU2luY2Ugd2UgcmVuZGVyIHRpbWVwaWNrZXIgaW4gdGhlIG92ZXJsYXksIGF0IHRoZSBtb21lbnQgdGhpcyBob29rIGNhbGxlZCxcbiAgICAgICAgICAgIC8vIHRpbWVwaWNrZXIgY291bGQgYmUgbm90IGZ1bGx5IHJlbmRlcmVkIGFuZCBwbGFjZWQuIEJlY2F1c2Ugb2YgaXQsIHdlJ3JlIHdhaXRpbmcgZm9yIEFuZ3VsYXJcbiAgICAgICAgICAgIC8vIHRvIGZpbmlzaCBjaGFuZ2UgZGV0ZWN0aW9uIHJ1biBhbmQgb25seSB0aGVuIHNjcm9sbCB0byB0aGUgc2VsZWN0ZWQgY2VsbC5cbiAgICAgICAgICAgIHRoaXMubmdab25lLm9uU3RhYmxlXG4gICAgICAgICAgICAgICAgLnBpcGUodGFrZSgxKSwgdGFrZVVudGlsKG1lcmdlKHRoaXMudW5zZWxlY3RlZCQsIHRoaXMuZGVzdHJveSQpKSlcbiAgICAgICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuc2Nyb2xsVG9FbGVtZW50KCkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNjcm9sbFRvRWxlbWVudCgpIHtcbiAgICAgICAgaWYgKHRoaXMudmFsdWVDb250YWluZXJFbGVtZW50ICYmIHRoaXMucGxhdGZvcm1TZXJ2aWNlLmlzQnJvd3Nlcikge1xuICAgICAgICAgICAgdGhpcy5uZ1pvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gdGhpcy52YWx1ZUNvbnRhaW5lckVsZW1lbnQubmF0aXZlRWxlbWVudC5zY3JvbGxJbnRvVmlldyh7IGJsb2NrOiAnY2VudGVyJyB9KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLmNvbXBsZXRlKCk7XG4gICAgfVxufVxuTmJUaW1lUGlja2VyQ2VsbENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItdGltZXBpY2tlci1jZWxsJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxkaXYgI3ZhbHVlQ29udGFpbmVyPnt7IHZhbHVlIH19PC9kaXY+XG4gIGAsXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt1c2VyLXNlbGVjdDpub25lfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRpbWVQaWNrZXJDZWxsQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlBsYXRmb3JtIH1cbl07XG5OYlRpbWVQaWNrZXJDZWxsQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNlbGVjdGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2VsZWN0OiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgdmFsdWVDb250YWluZXJFbGVtZW50OiBbeyB0eXBlOiBWaWV3Q2hpbGQsIGFyZ3M6IFsndmFsdWVDb250YWluZXInLF0gfV0sXG4gICAgb25DbGljazogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iVGltZXBpY2tlck1vZHVsZSB7XG4gICAgc3RhdGljIGZvclJvb3QoY29uZmlnID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5nTW9kdWxlOiBOYlRpbWVwaWNrZXJNb2R1bGUsXG4gICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5CX1RJTUVfUElDS0VSX0NPTkZJRywgdXNlVmFsdWU6IGNvbmZpZyB9XSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIGZvckNoaWxkKGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuZ01vZHVsZTogTmJUaW1lcGlja2VyTW9kdWxlLFxuICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOQl9USU1FX1BJQ0tFUl9DT05GSUcsIHVzZVZhbHVlOiBjb25maWcgfV0sXG4gICAgICAgIH07XG4gICAgfVxufVxuTmJUaW1lcGlja2VyTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIENvbW1vbk1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJPdmVybGF5TW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkxpc3RNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FyZE1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhcktpdE1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW05iQ2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJUaW1lUGlja2VyQ29tcG9uZW50LCBOYlRpbWVQaWNrZXJDZWxsQ29tcG9uZW50LCBOYlRpbWVQaWNrZXJEaXJlY3RpdmVdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iVGltZVBpY2tlckNvbXBvbmVudCwgTmJUaW1lUGlja2VyQ2VsbENvbXBvbmVudCwgTmJUaW1lUGlja2VyRGlyZWN0aXZlXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlIGV4dGVuZHMgTmJEYXRlcGlja2VyQWRhcHRlciB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnBpY2tlciA9IE5iRGF0ZXBpY2tlckNvbXBvbmVudDtcbiAgICB9XG4gICAgcGFyc2UoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLnBhcnNlKGRhdGUsIGZvcm1hdCk7XG4gICAgfVxuICAgIGZvcm1hdChkYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuZm9ybWF0KGRhdGUsIGZvcm1hdCk7XG4gICAgfVxuICAgIGlzVmFsaWQoZGF0ZSwgZm9ybWF0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKGRhdGUsIGZvcm1hdCk7XG4gICAgfVxufVxuTmJEYXRlQWRhcHRlclNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iRGF0ZUFkYXB0ZXJTZXJ2aWNlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJEYXRlU2VydmljZSB9XG5dO1xuY2xhc3MgTmJSYW5nZUFkYXB0ZXJTZXJ2aWNlIGV4dGVuZHMgTmJEYXRlcGlja2VyQWRhcHRlciB7XG4gICAgY29uc3RydWN0b3IoZGF0ZVNlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5kYXRlU2VydmljZSA9IGRhdGVTZXJ2aWNlO1xuICAgICAgICB0aGlzLnBpY2tlciA9IE5iUmFuZ2VwaWNrZXJDb21wb25lbnQ7XG4gICAgfVxuICAgIHBhcnNlKHJhbmdlLCBmb3JtYXQpIHtcbiAgICAgICAgY29uc3QgW3N0YXJ0LCBlbmRdID0gcmFuZ2Uuc3BsaXQoJy0nKS5tYXAoc3ViRGF0ZSA9PiBzdWJEYXRlLnRyaW0oKSk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzdGFydDogdGhpcy5kYXRlU2VydmljZS5wYXJzZShzdGFydCwgZm9ybWF0KSxcbiAgICAgICAgICAgIGVuZDogdGhpcy5kYXRlU2VydmljZS5wYXJzZShlbmQsIGZvcm1hdCksXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZvcm1hdChyYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGlmICghcmFuZ2UpIHtcbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzdGFydCA9IHRoaXMuZGF0ZVNlcnZpY2UuZm9ybWF0KHJhbmdlLnN0YXJ0LCBmb3JtYXQpO1xuICAgICAgICBjb25zdCBpc1N0YXJ0VmFsaWQgPSB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKHN0YXJ0LCBmb3JtYXQpO1xuICAgICAgICBpZiAoIWlzU3RhcnRWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVuZCA9IHRoaXMuZGF0ZVNlcnZpY2UuZm9ybWF0KHJhbmdlLmVuZCwgZm9ybWF0KTtcbiAgICAgICAgY29uc3QgaXNFbmRWYWxpZCA9IHRoaXMuZGF0ZVNlcnZpY2UuaXNWYWxpZERhdGVTdHJpbmcoZW5kLCBmb3JtYXQpO1xuICAgICAgICBpZiAoaXNFbmRWYWxpZCkge1xuICAgICAgICAgICAgcmV0dXJuIGAke3N0YXJ0fSAtICR7ZW5kfWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gc3RhcnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNWYWxpZChyYW5nZSwgZm9ybWF0KSB7XG4gICAgICAgIGNvbnN0IFtzdGFydCwgZW5kXSA9IHJhbmdlLnNwbGl0KCctJykubWFwKHN1YkRhdGUgPT4gc3ViRGF0ZS50cmltKCkpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5pc1ZhbGlkRGF0ZVN0cmluZyhzdGFydCwgZm9ybWF0KSAmJiB0aGlzLmRhdGVTZXJ2aWNlLmlzVmFsaWREYXRlU3RyaW5nKGVuZCwgZm9ybWF0KTtcbiAgICB9XG59XG5OYlJhbmdlQWRhcHRlclNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iUmFuZ2VBZGFwdGVyU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfVxuXTtcbmNsYXNzIE5iRGF0ZVRpbWVBZGFwdGVyU2VydmljZSBleHRlbmRzIE5iRGF0ZXBpY2tlckFkYXB0ZXIge1xuICAgIGNvbnN0cnVjdG9yKGRhdGVTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZGF0ZVNlcnZpY2UgPSBkYXRlU2VydmljZTtcbiAgICAgICAgdGhpcy5waWNrZXIgPSBOYkRhdGVUaW1lUGlja2VyQ29tcG9uZW50O1xuICAgIH1cbiAgICBwYXJzZShkYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UucGFyc2UoZGF0ZSwgZm9ybWF0KTtcbiAgICB9XG4gICAgZm9ybWF0KGRhdGUsIGZvcm1hdCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRlU2VydmljZS5mb3JtYXQoZGF0ZSwgZm9ybWF0KTtcbiAgICB9XG4gICAgaXNWYWxpZChkYXRlLCBmb3JtYXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0ZVNlcnZpY2UuaXNWYWxpZERhdGVTdHJpbmcoZGF0ZSwgZm9ybWF0KTtcbiAgICB9XG59XG5OYkRhdGVUaW1lQWRhcHRlclNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iRGF0ZVRpbWVBZGFwdGVyU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iRGF0ZVNlcnZpY2UgfVxuXTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYkRhdGVwaWNrZXJNb2R1bGUge1xuICAgIHN0YXRpYyBmb3JSb290KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmdNb2R1bGU6IE5iRGF0ZXBpY2tlck1vZHVsZSxcbiAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgIERhdGVQaXBlLFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkJfREFURV9BREFQVEVSLFxuICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgdXNlQ2xhc3M6IE5iRGF0ZUFkYXB0ZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOQl9EQVRFX0FEQVBURVIsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB1c2VDbGFzczogTmJSYW5nZUFkYXB0ZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOQl9EQVRFX0FEQVBURVIsXG4gICAgICAgICAgICAgICAgICAgIG11bHRpOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB1c2VDbGFzczogTmJEYXRlVGltZUFkYXB0ZXJTZXJ2aWNlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICB9O1xuICAgIH1cbn1cbk5iRGF0ZXBpY2tlck1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYk92ZXJsYXlNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJNb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZU1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJDYXJkTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkJhc2VDYWxlbmRhck1vZHVsZSxcbiAgICAgICAgICAgICAgICAgICAgTmJUaW1lcGlja2VyTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyS2l0TW9kdWxlLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZXhwb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBOYkRhdGVwaWNrZXJEaXJlY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgIE5iRGF0ZXBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJSYW5nZXBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJEYXRlVGltZVBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJDYWxlbmRhcldpdGhUaW1lQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICAgICAgTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyV2l0aFRpbWVDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iRGF0ZVRpbWVQaWNrZXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iRGF0ZXBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJSYW5nZXBpY2tlckNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJCYXNlUGlja2VyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgZW50cnlDb21wb25lbnRzOiBbXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJEYXRlcGlja2VyQ29udGFpbmVyQ29tcG9uZW50LFxuICAgICAgICAgICAgICAgICAgICBOYkNhbGVuZGFyV2l0aFRpbWVDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVGhlIGBOYlJhZGlvQ29tcG9uZW50YCBwcm92aWRlcyB0aGUgc2FtZSBmdW5jdGlvbmFsaXR5IGFzIG5hdGl2ZSBgPGlucHV0IHR5cGU9XCJyYWRpb1wiPmBcbiAqIHdpdGggTmVidWxhciBzdHlsZXMgYW5kIGFuaW1hdGlvbnMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgcmFkaW8vcmFkaW8tc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iUmFkaW9Nb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKlxuICogYGBgdHNcbiAqIEBOZ01vZHVsZSh7XG4gKiAgIGltcG9ydHM6IFtcbiAqICAgICAvLyAuLi5cbiAqICAgICBOYlJhZGlvTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKlxuICogIyMjIFVzYWdlXG4gKlxuICogUmFkaW8gYnV0dG9ucyBzaG91bGQgYmUgd3JhcHBlZCBpbiBgbmItcmFkaW8tZ3JvdXBgIHRvIHByb3ZpZGUgZm9ybSBiaW5kaW5ncy5cbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItcmFkaW8tZ3JvdXAgWyhuZ01vZGVsKV09XCJzZWxlY3RlZE9wdGlvblwiPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIxXCI+T3B0aW9uIDE8L25iLXJhZGlvPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIyXCI+T3B0aW9uIDI8L25iLXJhZGlvPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIzXCI+T3B0aW9uIDM8L25iLXJhZGlvPlxuICogPC9uYi1yYWRpby1ncm91cD5cbiAqIGBgYFxuICpcbiAqIFlvdSBjYW4gZGlzYWJsZSBzb21lIHJhZGlvcyBpbiB0aGUgZ3JvdXAgdXNpbmcgYSBgZGlzYWJsZWRgIGF0dHJpYnV0ZS5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKERpc2FibGVkLCByYWRpby9yYWRpby1kaXNhYmxlZC5jb21wb25lbnQpXG4gKlxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiByYWRpby13aWR0aDpcbiAqIHJhZGlvLWhlaWdodDpcbiAqIHJhZGlvLWJvcmRlci1zdHlsZTpcbiAqIHJhZGlvLWJvcmRlci13aWR0aDpcbiAqIHJhZGlvLXRleHQtZm9udC1mYW1pbHk6XG4gKiByYWRpby10ZXh0LWZvbnQtc2l6ZTpcbiAqIHJhZGlvLXRleHQtZm9udC13ZWlnaHQ6XG4gKiByYWRpby10ZXh0LWxpbmUtaGVpZ2h0OlxuICogcmFkaW8tb3V0bGluZS1jb2xvcjpcbiAqIHJhZGlvLW91dGxpbmUtd2lkdGg6XG4gKiByYWRpby1iYXNpYy10ZXh0LWNvbG9yOlxuICogcmFkaW8tYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtZm9jdXMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWhvdmVyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiByYWRpby1iYXNpYy1hY3RpdmUtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tYmFzaWMtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1iYXNpYy1kaXNhYmxlZC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWJhc2ljLWRpc2FibGVkLWNoZWNrZWQtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1mb2N1cy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktaG92ZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWFjdGl2ZS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1wcmltYXJ5LWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tcHJpbWFyeS1kaXNhYmxlZC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXByaW1hcnktZGlzYWJsZWQtY2hlY2tlZC1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWZvY3VzLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1ob3Zlci1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtYWN0aXZlLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXN1Y2Nlc3MtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1zdWNjZXNzLWRpc2FibGVkLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tc3VjY2Vzcy1kaXNhYmxlZC1jaGVja2VkLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWluZm8tdGV4dC1jb2xvcjpcbiAqIHJhZGlvLWluZm8tYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8taW5mby1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1pbmZvLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1pbmZvLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWluZm8tZm9jdXMtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8taW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8taW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby1pbmZvLWhvdmVyLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWluZm8taG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8taW5mby1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8taW5mby1hY3RpdmUtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8taW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8taW5mby1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1pbmZvLWRpc2FibGVkLXRleHQtY29sb3I6XG4gKiByYWRpby1pbmZvLWRpc2FibGVkLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWluZm8tZGlzYWJsZWQtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1pbmZvLWRpc2FibGVkLWNoZWNrZWQtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8td2FybmluZy10ZXh0LWNvbG9yOlxuICogcmFkaW8td2FybmluZy1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZm9jdXMtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1mb2N1cy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctaG92ZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWFjdGl2ZS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby13YXJuaW5nLWRpc2FibGVkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZGlzYWJsZWQtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8td2FybmluZy1kaXNhYmxlZC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLXdhcm5pbmctZGlzYWJsZWQtY2hlY2tlZC1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWZvY3VzLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1mb2N1cy1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1kYW5nZXItaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItaG92ZXItaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tZGFuZ2VyLWFjdGl2ZS1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1kaXNhYmxlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHJhZGlvLWRhbmdlci1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiByYWRpby1kYW5nZXItZGlzYWJsZWQtY2hlY2tlZC1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1jb250cm9sLXRleHQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtaW5uZXItY2lyY2xlLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiByYWRpby1jb250cm9sLWZvY3VzLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1ob3Zlci1pbm5lci1jaXJjbGUtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtYWN0aXZlLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHJhZGlvLWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1kaXNhYmxlZC10ZXh0LWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1kaXNhYmxlZC1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiByYWRpby1jb250cm9sLWRpc2FibGVkLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogcmFkaW8tY29udHJvbC1kaXNhYmxlZC1jaGVja2VkLWlubmVyLWNpcmNsZS1jb2xvcjpcbiAqICovXG5jbGFzcyBOYlJhZGlvQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZCwgcmVuZGVyZXIsIHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuc3RhdHVzU2VydmljZSA9IHN0YXR1c1NlcnZpY2U7XG4gICAgICAgIHRoaXMuX2NoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSAnYmFzaWMnO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgICAgICB0aGlzLmJsdXIgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG4gICAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX25hbWUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9uYW1lID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja2VkO1xuICAgIH1cbiAgICBzZXQgY2hlY2tlZCh2YWx1ZSkge1xuICAgICAgICBjb25zdCBib29sVmFsdWUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgICAgICBpZiAodGhpcy5fY2hlY2tlZCAhPT0gYm9vbFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9jaGVja2VkID0gYm9vbFZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuX3ZhbHVlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICB9XG4gICAgc2V0IGRpc2FibGVkKGRpc2FibGVkKSB7XG4gICAgICAgIGNvbnN0IGJvb2xWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eShkaXNhYmxlZCk7XG4gICAgICAgIGlmICh0aGlzLl9kaXNhYmxlZCAhPT0gYm9vbFZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlZCA9IGJvb2xWYWx1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdwcmltYXJ5JztcbiAgICB9XG4gICAgZ2V0IGlzU3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCBpc1dhcm5pbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3dhcm5pbmcnO1xuICAgIH1cbiAgICBnZXQgaXNEYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBpc0luZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgaXNCYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgaXNDb250cm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IGFkZGl0aW9uYWxDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0dXNTZXJ2aWNlLmlzQ3VzdG9tU3RhdHVzKHRoaXMuc3RhdHVzKSkge1xuICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy5zdGF0dXMpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIG9uQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICB0aGlzLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIG9uQ2xpY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxuICAgIC8qXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqIFdlIHVzZSB0aGlzIG1ldGhvZCB3aGVuIHNldHRpbmcgcmFkaW8gaW5wdXRzIGZyb20gcmFkaW8gZ3JvdXAgY29tcG9uZW50LlxuICAgICAqIE90aGVyd2lzZSBBbmd1bGFyIHdvbid0IGRldGVjdCBjaGFuZ2VzIGluIHJhZGlvIHRlbXBsYXRlIGFzIGNhY2hlZCBsYXN0IHJlbmRlcmVkXG4gICAgICogdmFsdWUgZGlkbid0IHVwZGF0ZWQuXG4gICAgICoqL1xuICAgIF9tYXJrRm9yQ2hlY2soKSB7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgfVxuICAgIC8qXG4gICAgICogQGRvY3MtcHJpdmF0ZVxuICAgICAqIFVzZSB0aGlzIG1ldGhvZCB3aGVuIHNldHRpbmcgcmFkaW8gbmFtZSBmcm9tIHJhZGlvIGdyb3VwIGNvbXBvbmVudC5cbiAgICAgKiBJbiBjYXNlIG9wdGlvbiAnbmFtZScgaXNuJ3Qgc2V0IG9uIG5iLXJhZGlvIGNvbXBvbmVudCB3ZSBuZWVkIHRvIHNldCBuYW1lXG4gICAgICogcmlnaHQgYXdheSwgc28gaXQgd29uJ3Qgb3ZlcmxhcCB3aXRoIG9wdGlvbnMgd2l0aG91dCBuYW1lcyBmcm9tIG90aGVyIHJhZGlvXG4gICAgICogZ3JvdXBzLiBPdGhlcndpc2UgdGhleSBhbGwgd291bGQgaGF2ZSBzYW1lIG5hbWUgYW5kIHdpbGwgYmUgY29uc2lkZXJlZCBhc1xuICAgICAqIG9wdGlvbnMgZnJvbSBvbmUgZ3JvdXAgc28gb25seSB0aGUgbGFzdCBvcHRpb24gd2lsbCBzdGF5IHNlbGVjdGVkLlxuICAgICAqKi9cbiAgICBfc2V0TmFtZShuYW1lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIGlmICh0aGlzLmlucHV0KSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLnNldFByb3BlcnR5KHRoaXMuaW5wdXQubmF0aXZlRWxlbWVudCwgJ25hbWUnLCBuYW1lKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbk5iUmFkaW9Db21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXJhZGlvJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxsYWJlbD5cbiAgICAgIDxpbnB1dFxuICAgICAgICAjaW5wdXRcbiAgICAgICAgdHlwZT1cInJhZGlvXCJcbiAgICAgICAgY2xhc3M9XCJuYXRpdmUtaW5wdXQgdmlzdWFsbHktaGlkZGVuXCJcbiAgICAgICAgW25hbWVdPVwibmFtZVwiXG4gICAgICAgIFt2YWx1ZV09XCJ2YWx1ZVwiXG4gICAgICAgIFtjaGVja2VkXT1cImNoZWNrZWRcIlxuICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAoY2hhbmdlKT1cIm9uQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAoY2xpY2spPVwib25DbGljaygkZXZlbnQpXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cIm91dGVyLWNpcmNsZVwiPjwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwiaW5uZXItY2lyY2xlXCI+PC9zcGFuPlxuICAgICAgPHNwYW4gY2xhc3M9XCJ0ZXh0XCI+XG4gICAgICAgIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cbiAgICAgIDwvc3Bhbj5cbiAgICA8L2xhYmVsPlxuICBgLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICAgICAgICAgICAgICAgIHN0eWxlczogW1wiOmhvc3R7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpyZWxhdGl2ZX06aG9zdCBsYWJlbHtkaXNwbGF5OmlubGluZS1mbGV4O21hcmdpbjowO21pbi1oZWlnaHQ6aW5oZXJpdDtwYWRkaW5nOjAuMzc1cmVtIDA7YWxpZ24taXRlbXM6Y2VudGVyfVtkaXI9bHRyXSA6aG9zdCBsYWJlbHtwYWRkaW5nLXJpZ2h0OjEuNXJlbX1bZGlyPXJ0bF0gOmhvc3QgbGFiZWx7cGFkZGluZy1sZWZ0OjEuNXJlbX06aG9zdCAub3V0ZXItY2lyY2xlLDpob3N0IC5pbm5lci1jaXJjbGV7Ym9yZGVyLXJhZGl1czo1MCU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1bZGlyPWx0cl0gOmhvc3QgLm91dGVyLWNpcmNsZSxbZGlyPWx0cl0gOmhvc3QgLmlubmVyLWNpcmNsZXtsZWZ0OjB9W2Rpcj1ydGxdIDpob3N0IC5vdXRlci1jaXJjbGUsW2Rpcj1ydGxdIDpob3N0IC5pbm5lci1jaXJjbGV7cmlnaHQ6MH06aG9zdCAuaW5uZXItY2lyY2xle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpIHNjYWxlKDAuNil9W2Rpcj1sdHJdIDpob3N0IC50ZXh0e3BhZGRpbmctbGVmdDouNXJlbX1bZGlyPXJ0bF0gOmhvc3QgLnRleHR7cGFkZGluZy1yaWdodDouNXJlbX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJSYWRpb0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IE5iU3RhdHVzU2VydmljZSB9XG5dO1xuTmJSYWRpb0NvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBuYW1lOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjaGVja2VkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB2YWx1ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgdmFsdWVDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBibHVyOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgaW5wdXQ6IFt7IHR5cGU6IFZpZXdDaGlsZCwgYXJnczogWydpbnB1dCcsIHsgcmVhZDogRWxlbWVudFJlZiB9LF0gfV0sXG4gICAgaXNQcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBpc1N1Y2Nlc3M6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1zdWNjZXNzJyxdIH1dLFxuICAgIGlzV2FybmluZzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLXdhcm5pbmcnLF0gfV0sXG4gICAgaXNEYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgaXNJbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICBpc0Jhc2ljOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtYmFzaWMnLF0gfV0sXG4gICAgaXNDb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUaGUgYE5iUmFkaW9Hcm91cENvbXBvbmVudGAgaXMgdGhlIHdyYXBwZXIgZm9yIGBuYi1yYWRpb2AgYnV0dG9uLlxuICogSXQgcHJvdmlkZXMgZm9ybSBiaW5kaW5nczpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItcmFkaW8tZ3JvdXAgWyhuZ01vZGVsKV09XCJzZWxlY3RlZE9wdGlvblwiPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIxXCI+T3B0aW9uIDE8L25iLXJhZGlvPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIyXCI+T3B0aW9uIDI8L25iLXJhZGlvPlxuICogICA8bmItcmFkaW8gdmFsdWU9XCIzXCI+T3B0aW9uIDM8L25iLXJhZGlvPlxuICogPC9uYi1yYWRpby1ncm91cD5cbiAqIGBgYFxuICpcbiAqIEFsc28sIHlvdSBjYW4gdXNlIGB2YWx1ZWAgYW5kIGB2YWx1ZUNoYW5nZWAgZm9yIGJpbmRpbmcgd2l0aG91dCBmb3Jtcy5cbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItcmFkaW8tZ3JvdXAgWyh2YWx1ZSldPVwic2VsZWN0ZWRPcHRpb25cIj5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMVwiPk9wdGlvbiAxPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiMlwiPk9wdGlvbiAyPC9uYi1yYWRpbz5cbiAqICAgPG5iLXJhZGlvIHZhbHVlPVwiM1wiPk9wdGlvbiAzPC9uYi1yYWRpbz5cbiAqIDwvbmItcmFkaW8tZ3JvdXA+XG4gKiBgYGBcbiAqXG4gKiBSYWRpbyBpdGVtcyBuYW1lIGhhcyB0byBiZSBwcm92aWRlZCB0aHJvdWdoIGBuYW1lYCBpbnB1dCBwcm9wZXJ0eSBvZiB0aGUgcmFkaW8gZ3JvdXAuXG4gKlxuICogYGBgaHRtbFxuICogPG5iLXJhZGlvLWdyb3VwIG5hbWU9XCJteS1yYWRpby1ncm91cFwiPlxuICogICAuLi5cbiAqIDwvbmItcmFkaW8tZ3JvdXA+XG4gKiBgYGBcbiAqXG4gKiBZb3UgY2FuIGNoYW5nZSByYWRpbyBncm91cCBzdGF0dXMgYnkgc2V0dGluZyBgc3RhdHVzYCBpbnB1dC5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU3RhdHVzZXMsIHJhZGlvL3JhZGlvLXN0YXR1c2VzLmNvbXBvbmVudClcbiAqXG4gKiBBbHNvLCB5b3UgY2FuIGRpc2FibGUgdGhlIHdob2xlIGdyb3VwIHVzaW5nIGBkaXNhYmxlZGAgYXR0cmlidXRlLlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCBncm91cCwgcmFkaW8vcmFkaW8tZGlzYWJsZWQtZ3JvdXAuY29tcG9uZW50KVxuICpcbiAqIFJhZGlvIGdyb3VwIHN1cHBvcnRzIGBuZ01vZGVsYCBhbmQgcmVhY3RpdmUgZm9ybXM6XG4gKiBAc3RhY2tlZC1leGFtcGxlKFJhZGlvIEdyb3VwIHdpdGggZm9ybXMsIHJhZGlvL3JhZGlvLWZvcm0uY29tcG9uZW50KVxuICpcbiAqICovXG5jbGFzcyBOYlJhZGlvR3JvdXBDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGhvc3RFbGVtZW50LCBwbGF0Zm9ybUlkLCBkb2N1bWVudCkge1xuICAgICAgICB0aGlzLmhvc3RFbGVtZW50ID0gaG9zdEVsZW1lbnQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm1JZCA9IHBsYXRmb3JtSWQ7XG4gICAgICAgIHRoaXMuZG9jdW1lbnQgPSBkb2N1bWVudDtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMub25DaGFuZ2UgPSAodmFsdWUpID0+IHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fdmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZXMoKTtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9uYW1lO1xuICAgIH1cbiAgICBzZXQgbmFtZShuYW1lKSB7XG4gICAgICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgICAgICB0aGlzLnVwZGF0ZU5hbWVzKCk7XG4gICAgfVxuICAgIGdldCBkaXNhYmxlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rpc2FibGVkO1xuICAgIH1cbiAgICBzZXQgZGlzYWJsZWQoZGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5fZGlzYWJsZWQgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkoZGlzYWJsZWQpO1xuICAgICAgICB0aGlzLnVwZGF0ZURpc2FibGVkKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJhZGlvIGJ1dHRvbnMgc3RhdHVzLlxuICAgICAqIFBvc3NpYmxlIHZhbHVlcyBhcmUgYHByaW1hcnlgIChkZWZhdWx0KSwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgaW5mb2AuXG4gICAgICovXG4gICAgZ2V0IHN0YXR1cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcbiAgICB9XG4gICAgc2V0IHN0YXR1cyh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fc3RhdHVzID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVN0YXR1cygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcbiAgICAgICAgLy8gSW4gY2FzZSBvcHRpb24gJ25hbWUnIGlzbid0IHNldCBvbiBuYi1yYWRpbyBjb21wb25lbnQsXG4gICAgICAgIC8vIHdlIG5lZWQgdG8gc2V0IGl0J3MgbmFtZSByaWdodCBhd2F5LCBzbyBpdCB3b24ndCBvdmVybGFwIHdpdGggb3B0aW9uc1xuICAgICAgICAvLyB3aXRob3V0IG5hbWVzIGZyb20gb3RoZXIgcmFkaW8gZ3JvdXBzLiBPdGhlcndpc2UgdGhleSBhbGwgd291bGQgaGF2ZVxuICAgICAgICAvLyBzYW1lIG5hbWUgYW5kIHdpbGwgYmUgY29uc2lkZXJlZCBhcyBvcHRpb25zIGZyb20gb25lIGdyb3VwIHNvIG9ubHkgdGhlXG4gICAgICAgIC8vIGxhc3Qgb3B0aW9uIHdpbGwgc3RheSBzZWxlY3RlZC5cbiAgICAgICAgdGhpcy51cGRhdGVOYW1lcygpO1xuICAgICAgICB0aGlzLnJhZGlvcy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodGhpcy5yYWRpb3MpLCBcbiAgICAgICAgLy8gJ2NoYW5nZXMnIGVtaXQgZHVyaW5nIGNoYW5nZSBkZXRlY3Rpb24gcnVuIGFuZCB3ZSBjYW4ndCB1cGRhdGVcbiAgICAgICAgLy8gb3B0aW9uIHByb3BlcnRpZXMgcmlnaHQgb2Ygc2luY2UgdGhleSBhbHJlYWR5IHdhcyBpbml0aWFsaXplZC5cbiAgICAgICAgLy8gSW5zdGVhZCB3ZSBzY2hlZHVsZSBtaWNyb3Rhc2sgdG8gdXBkYXRlIHJhZGlvcyBhZnRlciBjaGFuZ2UgZGV0ZWN0aW9uXG4gICAgICAgIC8vIHJ1biBpcyBmaW5pc2hlZCBhbmQgdHJpZ2dlciBvbmUgbW9yZSBjaGFuZ2UgZGV0ZWN0aW9uIHJ1bi5cbiAgICAgICAgc3dpdGNoTWFwKChyYWRpb3MpID0+IGZyb20oUHJvbWlzZS5yZXNvbHZlKHJhZGlvcykpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLnVwZGF0ZUFuZFN1YnNjcmliZVRvUmFkaW9zKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfVxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfVxuICAgIHdyaXRlVmFsdWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIH1cbiAgICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGlzRGlzYWJsZWQ7XG4gICAgfVxuICAgIHVwZGF0ZUFuZFN1YnNjcmliZVRvUmFkaW9zKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlRnJvbUNoZWNrZWRPcHRpb24oKTtcbiAgICAgICAgdGhpcy51cGRhdGVOYW1lcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZhbHVlcygpO1xuICAgICAgICB0aGlzLnVwZGF0ZURpc2FibGVkKCk7XG4gICAgICAgIHRoaXMudXBkYXRlU3RhdHVzKCk7XG4gICAgICAgIHRoaXMuc3Vic2NyaWJlT25SYWRpb3NWYWx1ZUNoYW5nZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZU9uUmFkaW9zQmx1cigpO1xuICAgIH1cbiAgICB1cGRhdGVOYW1lcygpIHtcbiAgICAgICAgaWYgKHRoaXMucmFkaW9zKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGlvcy5mb3JFYWNoKChyYWRpbykgPT4gcmFkaW8uX3NldE5hbWUodGhpcy5uYW1lKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVmFsdWVzKCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUFuZE1hcmtGb3JDaGVja1JhZGlvcygocmFkaW8pID0+IHJhZGlvLmNoZWNrZWQgPSByYWRpby52YWx1ZSA9PT0gdGhpcy52YWx1ZSk7XG4gICAgfVxuICAgIHVwZGF0ZURpc2FibGVkKCkge1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGlzYWJsZWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUFuZE1hcmtGb3JDaGVja1JhZGlvcygocmFkaW8pID0+IHJhZGlvLmRpc2FibGVkID0gdGhpcy5kaXNhYmxlZCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlT25SYWRpb3NWYWx1ZUNoYW5nZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLnJhZGlvcyB8fCAhdGhpcy5yYWRpb3MubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgbWVyZ2UoLi4udGhpcy5yYWRpb3MubWFwKChyYWRpbykgPT4gcmFkaW8udmFsdWVDaGFuZ2UpKVxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKG1lcmdlKHRoaXMucmFkaW9zLmNoYW5nZXMsIHRoaXMuZGVzdHJveSQpKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLndyaXRlVmFsdWUodmFsdWUpO1xuICAgICAgICAgICAgdGhpcy5wcm9wYWdhdGVWYWx1ZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBwcm9wYWdhdGVWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlT25SYWRpb3NCbHVyKCkge1xuICAgICAgICBjb25zdCBoYXNOb1JhZGlvcyA9ICF0aGlzLnJhZGlvcyB8fCAhdGhpcy5yYWRpb3MubGVuZ3RoO1xuICAgICAgICBpZiAoIWlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkgfHwgaGFzTm9SYWRpb3MpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBob3N0RWxlbWVudCA9IHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudDtcbiAgICAgICAgZnJvbUV2ZW50KGhvc3RFbGVtZW50LCAnZm9jdXNpbicpXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoZXZlbnQgPT4gaG9zdEVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSksIHN3aXRjaE1hcCgoKSA9PiBtZXJnZShmcm9tRXZlbnQodGhpcy5kb2N1bWVudCwgJ2ZvY3VzaW4nKSwgZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICdjbGljaycpKSksIGZpbHRlcihldmVudCA9PiAhaG9zdEVsZW1lbnQuY29udGFpbnMoZXZlbnQudGFyZ2V0KSksIHRha2VVbnRpbChtZXJnZSh0aGlzLnJhZGlvcy5jaGFuZ2VzLCB0aGlzLmRlc3Ryb3kkKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMub25Ub3VjaGVkKCkpO1xuICAgIH1cbiAgICB1cGRhdGVTdGF0dXMoKSB7XG4gICAgICAgIHRoaXMudXBkYXRlQW5kTWFya0ZvckNoZWNrUmFkaW9zKChyYWRpbykgPT4gcmFkaW8uc3RhdHVzID0gdGhpcy5zdGF0dXMpO1xuICAgIH1cbiAgICB1cGRhdGVBbmRNYXJrRm9yQ2hlY2tSYWRpb3ModXBkYXRlRm4pIHtcbiAgICAgICAgaWYgKHRoaXMucmFkaW9zKSB7XG4gICAgICAgICAgICB0aGlzLnJhZGlvcy5mb3JFYWNoKChyYWRpbykgPT4ge1xuICAgICAgICAgICAgICAgIHVwZGF0ZUZuKHJhZGlvKTtcbiAgICAgICAgICAgICAgICByYWRpby5fbWFya0ZvckNoZWNrKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVWYWx1ZUZyb21DaGVja2VkT3B0aW9uKCkge1xuICAgICAgICBjb25zdCBjaGVja2VkUmFkaW8gPSB0aGlzLnJhZGlvcy5maW5kKChyYWRpbykgPT4gcmFkaW8uY2hlY2tlZCk7XG4gICAgICAgIGNvbnN0IGlzVmFsdWVNaXNzaW5nID0gdGhpcy52YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHRoaXMudmFsdWUgPT09IG51bGw7XG4gICAgICAgIGlmIChjaGVja2VkUmFkaW8gJiYgaXNWYWx1ZU1pc3NpbmcgJiYgY2hlY2tlZFJhZGlvLnZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gY2hlY2tlZFJhZGlvLnZhbHVlO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJSYWRpb0dyb3VwQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi1yYWRpby1ncm91cCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi1yYWRpb1wiPjwvbmctY29udGVudD5gLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm92aWRlOiBOR19WQUxVRV9BQ0NFU1NPUixcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZUV4aXN0aW5nOiBmb3J3YXJkUmVmKCgpID0+IE5iUmFkaW9Hcm91cENvbXBvbmVudCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iUmFkaW9Hcm91cENvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbUExBVEZPUk1fSUQsXSB9XSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9ET0NVTUVOVCxdIH1dIH1cbl07XG5OYlJhZGlvR3JvdXBDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdmFsdWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIG5hbWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGF0dXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHJhZGlvczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJSYWRpb0NvbXBvbmVudCwgeyBkZXNjZW5kYW50czogdHJ1ZSB9LF0gfV0sXG4gICAgdmFsdWVDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlJhZGlvTW9kdWxlIHtcbn1cbk5iUmFkaW9Nb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtOYlJhZGlvQ29tcG9uZW50LCBOYlJhZGlvR3JvdXBDb21wb25lbnRdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iUmFkaW9Db21wb25lbnQsIE5iUmFkaW9Hcm91cENvbXBvbmVudF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xubGV0IHRhZ1VuaXF1ZUlkID0gMDtcbi8qKlxuICpcbiAqIFRvIHNob3cgYSBjcm9zcyBvbiBhIHRhZyBhbmQgZW5hYmxlIGByZW1vdmVgIGV2ZW50IGFkZCB0aGUgYHJlbW92YWJsZWAgYXR0cmlidXRlLlxuICogQHN0YWNrZWQtZXhhbXBsZShSZW1vdmFibGUgdGFncywgdGFnL3RhZy1yZW1vdmFibGUuY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gY2hhbmdlIGFwcGVhcmFuY2UgdmlhIGBhcHBlYXJhbmNlYCBpbnB1dDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVGFnIEFwcGVhcmFuY2UsIHRhZy90YWctYXBwZWFyYW5jZS5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiBjaGFuZ2Ugc3RhdHVzIHZpYSBgc3RhdHVzYCBpbnB1dDpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVGFnIFN0YXR1cywgdGFnL3RhZy1zdGF0dXMuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiB0YWctdGV4dC1mb250LWZhbWlseTpcbiAqIHRhZy10ZXh0LXRyYW5zZm9ybTpcbiAqIHRhZy1ib3JkZXItd2lkdGg6XG4gKiB0YWctYm9yZGVyLXN0eWxlOlxuICogdGFnLWJvcmRlci1yYWRpdXM6XG4gKiB0YWctdGlueS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRhZy10aW55LXRleHQtZm9udC13ZWlnaHQ6XG4gKiB0YWctdGlueS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdGFnLXRpbnktcGFkZGluZzpcbiAqIHRhZy10aW55LWNsb3NlLW9mZnNldDpcbiAqIHRhZy1zbWFsbC10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRhZy1zbWFsbC10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdGFnLXNtYWxsLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0YWctc21hbGwtcGFkZGluZzpcbiAqIHRhZy1zbWFsbC1jbG9zZS1vZmZzZXQ6XG4gKiB0YWctbWVkaXVtLXRleHQtZm9udC1zaXplOlxuICogdGFnLW1lZGl1bS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdGFnLW1lZGl1bS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdGFnLW1lZGl1bS1wYWRkaW5nOlxuICogdGFnLW1lZGl1bS1jbG9zZS1vZmZzZXQ6XG4gKiB0YWctbGFyZ2UtdGV4dC1mb250LXNpemU6XG4gKiB0YWctbGFyZ2UtdGV4dC1mb250LXdlaWdodDpcbiAqIHRhZy1sYXJnZS10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdGFnLWxhcmdlLXBhZGRpbmc6XG4gKiB0YWctbGFyZ2UtY2xvc2Utb2Zmc2V0OlxuICogdGFnLWdpYW50LXRleHQtZm9udC1zaXplOlxuICogdGFnLWdpYW50LXRleHQtZm9udC13ZWlnaHQ6XG4gKiB0YWctZ2lhbnQtdGV4dC1saW5lLWhlaWdodDpcbiAqIHRhZy1naWFudC1wYWRkaW5nOlxuICogdGFnLWdpYW50LWNsb3NlLW9mZnNldDpcbiAqIHRhZy1maWxsZWQtYmFzaWMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1iYXNpYy10ZXh0LWNvbG9yOlxuICogdGFnLWZpbGxlZC1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1iYXNpYy1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1iYXNpYy1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtcHJpbWFyeS1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLXByaW1hcnktdGV4dC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtcHJpbWFyeS1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXByaW1hcnktaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1wcmltYXJ5LXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXByaW1hcnktc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1zdWNjZXNzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXN1Y2Nlc3MtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtc3VjY2Vzcy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1zdWNjZXNzLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtc3VjY2Vzcy1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1zdWNjZXNzLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtaW5mby10ZXh0LWNvbG9yOlxuICogdGFnLWZpbGxlZC1pbmZvLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLWluZm8taG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLWluZm8tc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtaW5mby1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtd2FybmluZy1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLXdhcm5pbmctdGV4dC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtd2FybmluZy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXdhcm5pbmctaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC13YXJuaW5nLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctZmlsbGVkLXdhcm5pbmctc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtZGFuZ2VyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiB0YWctZmlsbGVkLWRhbmdlci1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtZGFuZ2VyLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1kYW5nZXItaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLWZpbGxlZC1kYW5nZXItc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtZGFuZ2VyLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1maWxsZWQtY29udHJvbC10ZXh0LWNvbG9yOlxuICogdGFnLWZpbGxlZC1jb250cm9sLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLWZpbGxlZC1jb250cm9sLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLWNvbnRyb2wtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0YWctZmlsbGVkLWNvbnRyb2wtc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1maWxsZWQtY29udHJvbC1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1iYXNpYy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWJhc2ljLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWJhc2ljLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWJhc2ljLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWJhc2ljLWhvdmVyLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1iYXNpYy1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtYmFzaWMtc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtcHJpbWFyeS10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtcHJpbWFyeS1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktYWN0aXZlLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1wcmltYXJ5LWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktaG92ZXItdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXByaW1hcnktc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtcHJpbWFyeS1zZWxlY3RlZC10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1zdWNjZXNzLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXN1Y2Nlc3MtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1ob3Zlci10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1zZWxlY3RlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtc3VjY2Vzcy1zZWxlY3RlZC1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1zdWNjZXNzLXNlbGVjdGVkLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWluZm8tdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWluZm8tYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtaW5mby1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLWhvdmVyLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1pbmZvLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWluZm8tc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtd2FybmluZy10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtd2FybmluZy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctYWN0aXZlLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS13YXJuaW5nLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctaG92ZXItdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctc2VsZWN0ZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLXdhcm5pbmctc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtd2FybmluZy1zZWxlY3RlZC10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtZGFuZ2VyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtZGFuZ2VyLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1kYW5nZXItYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1kYW5nZXItYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWRhbmdlci1hY3RpdmUtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWRhbmdlci1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWRhbmdlci1ob3Zlci10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtZGFuZ2VyLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1kYW5nZXItc2VsZWN0ZWQtYm9yZGVyLWNvbG9yOlxuICogdGFnLW91dGxpbmUtZGFuZ2VyLXNlbGVjdGVkLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWNvbnRyb2wtYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLWFjdGl2ZS10ZXh0LWNvbG9yOlxuICogdGFnLW91dGxpbmUtY29udHJvbC1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdGFnLW91dGxpbmUtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLWhvdmVyLXRleHQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLXNlbGVjdGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0YWctb3V0bGluZS1jb250cm9sLXNlbGVjdGVkLWJvcmRlci1jb2xvcjpcbiAqIHRhZy1vdXRsaW5lLWNvbnRyb2wtc2VsZWN0ZWQtdGV4dC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJUYWdDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKF9ob3N0RWxlbWVudCwgY2QsIHJlbmRlcmVyLCB6b25lLCBzdGF0dXNTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuX2hvc3RFbGVtZW50ID0gX2hvc3RFbGVtZW50O1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5fZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9yZW1vdmFibGUgPSBmYWxzZTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRhZyBhcHBlYXJhbmNlOiBgZmlsbGVkYCwgYG91dGxpbmVgLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ2ZpbGxlZCc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWcgc3RhdHVzOiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBpbmZvYCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUYWcgc2l6ZTogYHRpbnlgLCBgc21hbGxgLCBgbWVkaXVtYCwgYGxhcmdlYCwgYGdpYW50YC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICB0aGlzLnJvbGUgPSAnb3B0aW9uJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gdGhlIHVzZXIgcmVtb3ZlcyB0aGUgdGFnXG4gICAgICAgICAqICh3aGV0aGVyIGJ5IGNsaWNraW5nIG9uIHRoZSByZW1vdmUgYnV0dG9uIG9yIGJ5IHByZXNzaW5nIGBkZWxldGVgIG9yIGBiYWNrc3BhY2VgIGtleSkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbW92ZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgICAgICAgdGhpcy5faXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5faWQgPSBgbmItdGFnLSR7dGFnVW5pcXVlSWQrK31gO1xuICAgIH1cbiAgICBnZXQgZGVzdHJveSQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kZXN0cm95JC5hc09ic2VydmFibGUoKTtcbiAgICB9XG4gICAgZ2V0IHNlbGVjdGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XG4gICAgfVxuICAgIHNldCBzZWxlY3RlZCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RlZCAhPT0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWQgPSAhdGhpcy5zZWxlY3RlZDtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRDaGFuZ2UuZW1pdCh7IHRhZzogdGhpcywgc2VsZWN0ZWQ6IHRoaXMuc2VsZWN0ZWQgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgd2hldGhlciB0aGUgdXNlciBjYW4gcmVtb3ZlIGEgdGFnIG9yIG5vdC5cbiAgICAgKi9cbiAgICBnZXQgcmVtb3ZhYmxlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVtb3ZhYmxlO1xuICAgIH1cbiAgICBzZXQgcmVtb3ZhYmxlKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3JlbW92YWJsZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBmaWxsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmFwcGVhcmFuY2UgPT09ICdmaWxsZWQnO1xuICAgIH1cbiAgICBzZXQgZmlsbGVkKHZhbHVlKSB7XG4gICAgICAgIGlmIChjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmFwcGVhcmFuY2UgPSAnZmlsbGVkJztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgb3V0bGluZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwZWFyYW5jZSA9PT0gJ291dGxpbmUnO1xuICAgIH1cbiAgICBzZXQgb3V0bGluZSh2YWx1ZSkge1xuICAgICAgICBpZiAoY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKSkge1xuICAgICAgICAgICAgdGhpcy5hcHBlYXJhbmNlID0gJ291dGxpbmUnO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBiYXNpYygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnYmFzaWMnO1xuICAgIH1cbiAgICBnZXQgcHJpbWFyeSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAncHJpbWFyeSc7XG4gICAgfVxuICAgIGdldCBzdWNjZXNzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdzdWNjZXNzJztcbiAgICB9XG4gICAgZ2V0IGluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgd2FybmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnd2FybmluZyc7XG4gICAgfVxuICAgIGdldCBkYW5nZXIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Rhbmdlcic7XG4gICAgfVxuICAgIGdldCBjb250cm9sKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICdjb250cm9sJztcbiAgICB9XG4gICAgZ2V0IHRpbnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICd0aW55JztcbiAgICB9XG4gICAgZ2V0IHNtYWxsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnc21hbGwnO1xuICAgIH1cbiAgICBnZXQgbWVkaXVtKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbWVkaXVtJztcbiAgICB9XG4gICAgZ2V0IGxhcmdlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaXplID09PSAnbGFyZ2UnO1xuICAgIH1cbiAgICBnZXQgZ2lhbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09ICdnaWFudCc7XG4gICAgfVxuICAgIGdldCBhZGRpdGlvbmFsQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKHRoaXMuc3RhdHVzU2VydmljZS5pc0N1c3RvbVN0YXR1cyh0aGlzLnN0YXR1cykpIHtcbiAgICAgICAgICAgIHJldHVybiBbdGhpcy5zdGF0dXNTZXJ2aWNlLmdldFN0YXR1c0NsYXNzKHRoaXMuc3RhdHVzKV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBfcmVtb3ZlKCkge1xuICAgICAgICBpZiAodGhpcy5yZW1vdmFibGUpIHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlLmVtaXQodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuX2hvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQsICduYi10cmFuc2l0aW9uJyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbmdPbkRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX2Rlc3Ryb3kkLm5leHQodGhpcyk7XG4gICAgfVxuICAgIF90b2dnbGVTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAhdGhpcy5zZWxlY3RlZDtcbiAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0QWN0aXZlU3R5bGVzKCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzQWN0aXZlKSB7XG4gICAgICAgICAgICB0aGlzLl9pc0FjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHNldEluYWN0aXZlU3R5bGVzKCkge1xuICAgICAgICBpZiAodGhpcy5faXNBY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuX2lzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJUYWdDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRhZycsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwie3sgdGV4dCB9fVxcbjxuYi1pY29uICpuZ0lmPVxcXCJyZW1vdmFibGVcXFwiXFxuICAgICAgICAgKGNsaWNrKT1cXFwiX3JlbW92ZSgpXFxcIlxcbiAgICAgICAgIGNsYXNzPVxcXCJuYi10YWctcmVtb3ZlIHNpemUte3tzaXplfX1cXFwiXFxuICAgICAgICAgaWNvbj1cXFwiY2xvc2Utb3V0bGluZVxcXCJcXG4gICAgICAgICBwYWNrPVxcXCJuZWJ1bGFyLWVzc2VudGlhbHNcXFwiXFxuICAgICAgICAgYXJpYS1oaWRkZW49XFxcInRydWVcXFwiPlxcbjwvbmItaWNvbj5cXG5cIixcbiAgICAgICAgICAgICAgICBleHBvcnRBczogJ25iVGFnJyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRhZ0NvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9LFxuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlRhZ0NvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICB0ZXh0OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzZWxlY3RlZDogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zZWxlY3RlZCcsXSB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1zZWxlY3RlZCcsXSB9XSxcbiAgICByZW1vdmFibGU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGFwcGVhcmFuY2U6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHN0YXR1czogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgc2l6ZTogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgcm9sZTogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLnJvbGUnLF0gfV0sXG4gICAgcmVtb3ZlOiBbeyB0eXBlOiBPdXRwdXQgfV0sXG4gICAgc2VsZWN0ZWRDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBfaXNBY3RpdmU6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmFjdGl2ZScsXSB9XSxcbiAgICBfaWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuaWQnLF0gfV0sXG4gICAgZmlsbGVkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hcHBlYXJhbmNlLWZpbGxlZCcsXSB9XSxcbiAgICBvdXRsaW5lOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5hcHBlYXJhbmNlLW91dGxpbmUnLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICBpbmZvOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtaW5mbycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgY29udHJvbDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWNvbnRyb2wnLF0gfV0sXG4gICAgdGlueTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS10aW55JyxdIH1dLFxuICAgIHNtYWxsOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zaXplLXNtYWxsJyxdIH1dLFxuICAgIG1lZGl1bTogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc2l6ZS1tZWRpdW0nLF0gfV0sXG4gICAgbGFyZ2U6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtbGFyZ2UnLF0gfV0sXG4gICAgZ2lhbnQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnNpemUtZ2lhbnQnLF0gfV0sXG4gICAgYWRkaXRpb25hbENsYXNzZXM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzJyxdIH1dLFxuICAgIF9yZW1vdmU6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmRlbGV0ZScsXSB9LCB7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duLmJhY2tzcGFjZScsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKlxuICogYFtuYlRhZ0lucHV0XWAgZGlyZWN0aXZlIGNvbm5lY3RzIGlucHV0IHdpdGggYSBgbmItdGFnLWxpc3RgIGNvbXBvbmVudC5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFRhZyBJbnB1dCwgdGFnL3RhZy1pbnB1dC5jb21wb25lbnQpXG4gKlxuICogQGFkZGl0aW9uYWwtZXhhbXBsZShUYWcgSW5wdXQgd2l0aCBBdXRvY29tcGxldGUsIHRhZy90YWctaW5wdXQtd2l0aC1hdXRvY29tcGxldGUuY29tcG9uZW50KVxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiB0YWctbGlzdC10aW55LXRhZy1vZmZzZXQ6XG4gKiB0YWctbGlzdC1zbWFsbC10YWctb2Zmc2V0OlxuICogdGFnLWxpc3QtbWVkaXVtLXRhZy1vZmZzZXQ6XG4gKiB0YWctbGlzdC1sYXJnZS10YWctb2Zmc2V0OlxuICogdGFnLWxpc3QtZ2lhbnQtdGFnLW9mZnNldDpcbiAqIHRhZy1saXN0LXdpdGgtaW5wdXQtdGlueS1wYWRkaW5nOlxuICogdGFnLWxpc3Qtd2l0aC1pbnB1dC1zbWFsbC1wYWRkaW5nOlxuICogdGFnLWxpc3Qtd2l0aC1pbnB1dC1tZWRpdW0tcGFkZGluZzpcbiAqIHRhZy1saXN0LXdpdGgtaW5wdXQtbGFyZ2UtcGFkZGluZzpcbiAqIHRhZy1saXN0LXdpdGgtaW5wdXQtZ2lhbnQtcGFkZGluZzpcbiAqL1xuY2xhc3MgTmJUYWdJbnB1dERpcmVjdGl2ZSBleHRlbmRzIE5iSW5wdXREaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKF9ob3N0RWxlbWVudCwgZm9jdXNNb25pdG9yLCByZW5kZXJlciwgem9uZSwgc3RhdHVzU2VydmljZSkge1xuICAgICAgICBzdXBlcihfaG9zdEVsZW1lbnQsIGZvY3VzTW9uaXRvciwgcmVuZGVyZXIsIHpvbmUsIHN0YXR1c1NlcnZpY2UpO1xuICAgICAgICB0aGlzLl9ob3N0RWxlbWVudCA9IF9ob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy5mb2N1c01vbml0b3IgPSBmb2N1c01vbml0b3I7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5rZXlEb3duJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB3aGljaCBrZXlzIHNob3VsZCB0cmlnZ2VyIHRhZyBhZGQgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNlcGFyYXRvcktleXMgPSBbRU5URVJdO1xuICAgICAgICAvKipcbiAgICAgICAgICogRW1pdHMgd2hlbiBhIHRhZyBuZWVkIHRvIGJlIGFkZGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWdBZGQgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgICAgIHRoaXMubmJUYWdJbnB1dENsYXNzID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IF92YWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQudmFsdWU7XG4gICAgfVxuICAgIF9vbktleWRvd24oZXZlbnQpIHtcbiAgICAgICAgdGhpcy5rZXlEb3duJC5uZXh0KGV2ZW50KTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICBzdXBlci5uZ0FmdGVyVmlld0luaXQoKTtcbiAgICAgICAgdGhpcy5rZXlEb3duJFxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh7IGtleUNvZGUgfSkgPT4gdGhpcy5pc1NlcGFyYXRvcktleShrZXlDb2RlKSksIG1hcCgoKSA9PiB0aGlzLl92YWx1ZSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlKSA9PiB0aGlzLnRhZ0FkZC5lbWl0KHsgdmFsdWUsIGlucHV0OiB0aGlzLl9ob3N0RWxlbWVudCB9KSk7XG4gICAgfVxuICAgIGlzU2VwYXJhdG9yS2V5KGtleUNvZGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VwYXJhdG9yS2V5cy5pbmNsdWRlcyhrZXlDb2RlKTtcbiAgICB9XG59XG5OYlRhZ0lucHV0RGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdpbnB1dFtuYlRhZ0lucHV0XScsXG4gICAgICAgICAgICAgICAgZXhwb3J0QXM6ICduYlRhZ0lucHV0JyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBwcm92aWRlOiBOYkZvcm1GaWVsZENvbnRyb2wsIHVzZUV4aXN0aW5nOiBOYlRhZ0lucHV0RGlyZWN0aXZlIH0sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUYWdJbnB1dERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IE5iRm9jdXNNb25pdG9yIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfSxcbiAgICB7IHR5cGU6IE5nWm9uZSB9LFxuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlRhZ0lucHV0RGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHNlcGFyYXRvcktleXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRhZ0FkZDogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIG5iVGFnSW5wdXRDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItdGFnLWlucHV0JyxdIH1dLFxuICAgIF9vbktleWRvd246IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydrZXlkb3duJywgWyckZXZlbnQnXSxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqXG4gKiBgbmItdGFnLWxpc3RgIGNvbXBvbmVudCBkaXNwbGF5cyBhIGxpc3Qgb2YgYG5iLXRhZ2AgY29tcG9uZW50cy5cbiAqXG4gKiBAc3RhY2tlZC1leGFtcGxlKFRhZyBMaXN0IFNob3djYXNlLCB0YWcvdGFnLXNob3djYXNlLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogdGFnLWxpc3QtdGlueS10YWctb2Zmc2V0OlxuICogdGFnLWxpc3Qtc21hbGwtdGFnLW9mZnNldDpcbiAqIHRhZy1saXN0LW1lZGl1bS10YWctb2Zmc2V0OlxuICogdGFnLWxpc3QtbGFyZ2UtdGFnLW9mZnNldDpcbiAqIHRhZy1saXN0LWdpYW50LXRhZy1vZmZzZXQ6XG4gKiB0YWctbGlzdC13aXRoLWlucHV0LXRpbnktcGFkZGluZzpcbiAqIHRhZy1saXN0LXdpdGgtaW5wdXQtc21hbGwtcGFkZGluZzpcbiAqIHRhZy1saXN0LXdpdGgtaW5wdXQtbWVkaXVtLXBhZGRpbmc6XG4gKiB0YWctbGlzdC13aXRoLWlucHV0LWxhcmdlLXBhZGRpbmc6XG4gKiB0YWctbGlzdC13aXRoLWlucHV0LWdpYW50LXBhZGRpbmc6XG4gKiB0YWctbGlzdC13aXRoLWlucHV0LXJlY3RhbmdsZS1ib3JkZXItcmFkaXVzOlxuICogdGFnLWxpc3Qtd2l0aC1pbnB1dC1zZW1pLXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKiB0YWctbGlzdC13aXRoLWlucHV0LXJvdW5kLWJvcmRlci1yYWRpdXM6XG4gKi9cbmNsYXNzIE5iVGFnTGlzdENvbXBvbmVudCB7XG4gICAgY29uc3RydWN0b3IoaG9zdEVsZW1lbnQsIGNkLCByZW5kZXJlciwgem9uZSwgZm9jdXNNb25pdG9yLCBhY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnksIGRpcmVjdGlvblNlcnZpY2UsIHN0YXR1c1NlcnZpY2UpIHtcbiAgICAgICAgdGhpcy5ob3N0RWxlbWVudCA9IGhvc3RFbGVtZW50O1xuICAgICAgICB0aGlzLmNkID0gY2Q7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5mb2N1c01vbml0b3IgPSBmb2N1c01vbml0b3I7XG4gICAgICAgIHRoaXMuYWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5ID0gYWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5O1xuICAgICAgICB0aGlzLmRpcmVjdGlvblNlcnZpY2UgPSBkaXJlY3Rpb25TZXJ2aWNlO1xuICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UgPSBzdGF0dXNTZXJ2aWNlO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5rZXlEb3duJCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMudGFnQ2xpY2skID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250cm9scyB0YWdzIG9mZnNldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2l6ZSA9ICdtZWRpdW0nO1xuICAgICAgICB0aGlzLnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5yb2xlID0gJ2xpc3Rib3gnO1xuICAgICAgICB0aGlzLl9tdWx0aXBsZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmFjdGl2ZVRhZ0lkID0gbnVsbDtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEVtaXRzIHdoZW4gdGFnIG5lZWQgdG8gYmUgcmVtb3ZlZCAod2hldGhlciBiZWNhdXNlIG9mIGNsaWNrIG9uIHRoZSByZW1vdmUgYnV0dG9uXG4gICAgICAgICAqIG9yIHdoZW4gYGRlbGV0ZWAgb3IgYGJhY2tzcGFjZWAga2V5IHByZXNzZWQpLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50YWdSZW1vdmUgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIGdldCBtdWx0aXBsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX211bHRpcGxlO1xuICAgIH1cbiAgICBzZXQgbXVsdGlwbGUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fbXVsdGlwbGUgPSBjb252ZXJ0VG9Cb29sUHJvcGVydHkodmFsdWUpO1xuICAgIH1cbiAgICBnZXQgX2hhc0lucHV0KCkge1xuICAgICAgICByZXR1cm4gISF0aGlzLnRhZ0lucHV0O1xuICAgIH1cbiAgICBnZXQgX2lzRm9jdXNlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9jdXNlZDtcbiAgICB9XG4gICAgZ2V0IF9pc0Z1bGxXaWR0aCgpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICByZXR1cm4gISEoKF9hID0gdGhpcy50YWdJbnB1dCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZ1bGxXaWR0aCk7XG4gICAgfVxuICAgIGdldCBfaW5wdXRDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgYHNoYXBlLSR7dGhpcy50YWdJbnB1dC5zaGFwZX1gLFxuICAgICAgICAgICAgICAgIGBzaXplLSR7dGhpcy50YWdJbnB1dC5maWVsZFNpemV9YCxcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3ModGhpcy50YWdJbnB1dC5zdGF0dXMpLFxuICAgICAgICAgICAgXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2BzaXplLSR7dGhpcy5zaXplfWBdO1xuICAgIH1cbiAgICBfb25LZXlkb3duKGV2ZW50KSB7XG4gICAgICAgIHRoaXMua2V5RG93biQubmV4dChldmVudCk7XG4gICAgfVxuICAgIF9vbkNsaWNrKHsgdGFyZ2V0IH0pIHtcbiAgICAgICAgY29uc3QgY2xpY2tlZFRhZyA9IHRoaXMudGFncy5maW5kKCh0YWcpID0+IHRhZy5faG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCA9PT0gdGFyZ2V0KTtcbiAgICAgICAgaWYgKGNsaWNrZWRUYWcpIHtcbiAgICAgICAgICAgIHRoaXMudGFnQ2xpY2skLm5leHQoY2xpY2tlZFRhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuZm9jdXNNb25pdG9yLm1vbml0b3IodGhpcy5ob3N0RWxlbWVudCwgdHJ1ZSlcbiAgICAgICAgICAgIC5waXBlKG1hcChvcmlnaW4gPT4gISFvcmlnaW4pLCBmaW5hbGl6ZSgoKSA9PiB0aGlzLmZvY3VzTW9uaXRvci5zdG9wTW9uaXRvcmluZyh0aGlzLmhvc3RFbGVtZW50KSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGlzRm9jdXNlZCkgPT4gdGhpcy5vbkZvY3VzQ2hhbmdlKGlzRm9jdXNlZCkpO1xuICAgIH1cbiAgICBuZ0FmdGVyQ29udGVudEluaXQoKSB7XG4gICAgICAgIHRoaXMuaW5pdEtleU1hbmFnZXIoKTtcbiAgICAgICAgdGhpcy5zZXRBdXRvY29tcGxldGVDdXN0b21Ib3N0KCk7XG4gICAgfVxuICAgIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcbiAgICAgICAgdGhpcy5saXN0ZW5Ub0xheW91dERpcmVjdGlvbkNoYW5nZSgpO1xuICAgICAgICB0aGlzLmxpc3Rlbkxpc3RLZXlEb3duKCk7XG4gICAgICAgIHRoaXMubGlzdGVuSW5wdXRLZXlEb3duKCk7XG4gICAgICAgIHRoaXMubGlzdGVuVGFnQ2xpY2soKTtcbiAgICAgICAgdGhpcy5saXN0ZW5UYWdSZW1vdmUoKTtcbiAgICAgICAgdGhpcy5saXN0ZW5UYWdEZXN0cm95KCk7XG4gICAgICAgIHRoaXMubGlzdGVuQWN0aXZlVGFnQ2hhbmdlKCk7XG4gICAgICAgIHRoaXMubGlzdGVuTm9UYWdzKCk7XG4gICAgICAgIC8vIFRPRE86ICMyMjU0XG4gICAgICAgIHRoaXMuem9uZS5ydW5PdXRzaWRlQW5ndWxhcigoKSA9PiBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50LCAnbmItdHJhbnNpdGlvbicpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB9XG4gICAgaW5pdEtleU1hbmFnZXIoKSB7XG4gICAgICAgIHRoaXMua2V5TWFuYWdlciA9IHRoaXMuYWN0aXZlRGVzY2VuZGFudEtleU1hbmFnZXJGYWN0b3J5XG4gICAgICAgICAgICAuY3JlYXRlKHRoaXMudGFncylcbiAgICAgICAgICAgIC53aXRoSG9yaXpvbnRhbE9yaWVudGF0aW9uKHRoaXMuZGlyZWN0aW9uU2VydmljZS5nZXREaXJlY3Rpb24oKSlcbiAgICAgICAgICAgIC53aXRoV3JhcCgpO1xuICAgIH1cbiAgICBsaXN0ZW5Ub0xheW91dERpcmVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5kaXJlY3Rpb25TZXJ2aWNlLm9uRGlyZWN0aW9uQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGRpcmVjdGlvbikgPT4gdGhpcy5rZXlNYW5hZ2VyLndpdGhIb3Jpem9udGFsT3JpZW50YXRpb24oZGlyZWN0aW9uKSk7XG4gICAgfVxuICAgIGxpc3Rlbkxpc3RLZXlEb3duKCkge1xuICAgICAgICBjb25zdCB0YWdMaXN0S2V5RG93biQgPSB0aGlzLmtleURvd24kXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHsgdGFyZ2V0IH0pID0+IHRhcmdldCA9PT0gdGhpcy5ob3N0RWxlbWVudC5uYXRpdmVFbGVtZW50KSk7XG4gICAgICAgIGNvbnN0IGFjdGl2ZVRhZ0tleURvd24kID0gdGFnTGlzdEtleURvd24kXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKCkgPT4gISF0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbSkpO1xuICAgICAgICB0YWdMaXN0S2V5RG93biRcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGV2ZW50KSA9PiB0aGlzLmtleU1hbmFnZXIub25LZXlkb3duKGV2ZW50KSk7XG4gICAgICAgIGFjdGl2ZVRhZ0tleURvd24kXG4gICAgICAgICAgICAucGlwZShmaWx0ZXIoKHsga2V5Q29kZSB9KSA9PiBrZXlDb2RlID09PSBTUEFDRSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVRhZyh0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbSk7XG4gICAgICAgICAgICAvLyBQcmV2ZW50cyBwYWdlIHNjcm9sbC5cbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0pO1xuICAgICAgICBhY3RpdmVUYWdLZXlEb3duJFxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCh7IGtleUNvZGUgfSkgPT4gdGhpcy5pc0JhY2tzcGFjZU9yRGVsZXRlKGtleUNvZGUpKSwgbWFwKCgpID0+IHRoaXMua2V5TWFuYWdlci5hY3RpdmVJdGVtKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgodGFnVG9SZW1vdmUpID0+IHRhZ1RvUmVtb3ZlLl9yZW1vdmUoKSk7XG4gICAgfVxuICAgIGxpc3RlbklucHV0S2V5RG93bigpIHtcbiAgICAgICAgY29uc3QgaW5wdXRLZXlEb3duJCA9IHRoaXMua2V5RG93biRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyB0YXJnZXQgfSkgPT4geyB2YXIgX2E7IHJldHVybiB0YXJnZXQgPT09ICgoX2EgPSB0aGlzLnRhZ0lucHV0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX2hvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQpOyB9KSk7XG4gICAgICAgIGlucHV0S2V5RG93biRcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoeyBrZXlDb2RlIH0pID0+IHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnRhZ0lucHV0Ll92YWx1ZSA9PT0gJycgJiYgdGhpcy5pc0JhY2tzcGFjZU9yRGVsZXRlKGtleUNvZGUpICYmIHRoaXMudGFncy5sZW5ndGggPiAwO1xuICAgICAgICB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmhvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgICAgIHRoaXMua2V5TWFuYWdlci5zZXRMYXN0SXRlbUFjdGl2ZSgpO1xuICAgICAgICAgICAgdGhpcy5jZC5tYXJrRm9yQ2hlY2soKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxpc3RlblRhZ0NsaWNrKCkge1xuICAgICAgICB0aGlzLnRhZ0NsaWNrJFxuICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoY2xpY2tlZFRhZykgPT4ge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVUYWcoY2xpY2tlZFRhZyk7XG4gICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0QWN0aXZlSXRlbShjbGlja2VkVGFnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxpc3RlblRhZ1JlbW92ZSgpIHtcbiAgICAgICAgdGhpcy50YWdzLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHN0YXJ0V2l0aCh0aGlzLnRhZ3MpLCBzd2l0Y2hNYXAoKHRhZ3MpID0+IG1lcmdlKC4uLnRhZ3MubWFwKCh0YWcpID0+IHRhZy5yZW1vdmUpKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKHRhZ1RvUmVtb3ZlKSA9PiB0aGlzLnRhZ1JlbW92ZS5lbWl0KHRhZ1RvUmVtb3ZlKSk7XG4gICAgfVxuICAgIGxpc3RlblRhZ0Rlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMudGFncy5jaGFuZ2VzXG4gICAgICAgICAgICAucGlwZShzdGFydFdpdGgodGhpcy50YWdzKSwgc3dpdGNoTWFwKCh0YWdzKSA9PiBtZXJnZSguLi50YWdzLm1hcCgodGFnKSA9PiB0YWcuZGVzdHJveSQpKSksIGZpbHRlcigoZGVzdHJveWVkVGFnKSA9PiBkZXN0cm95ZWRUYWcgPT09IHRoaXMua2V5TWFuYWdlci5hY3RpdmVJdGVtKSwgbWFwKChkZXN0cm95ZWRUYWcpID0+IGRlc3Ryb3llZFRhZyA9PT0gdGhpcy50YWdzLmxhc3QpLCB0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChpc0xhc3RUYWdEZXN0cm95ZWQpID0+IHtcbiAgICAgICAgICAgIGlmIChpc0xhc3RUYWdEZXN0cm95ZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0UHJldmlvdXNJdGVtQWN0aXZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0TmV4dEl0ZW1BY3RpdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGxpc3Rlbk5vVGFncygpIHtcbiAgICAgICAgdGhpcy50YWdzLmNoYW5nZXNcbiAgICAgICAgICAgIC5waXBlKHN0YXJ0V2l0aCh0aGlzLnRhZ3MpLCBmaWx0ZXIoKHRhZ3MpID0+IHRhZ3MubGVuZ3RoID09PSAwKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmZvY3VzSW5wdXRJZkFjdGl2ZSgpKTtcbiAgICB9XG4gICAgbGlzdGVuQWN0aXZlVGFnQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLmtleU1hbmFnZXIuY2hhbmdlXG4gICAgICAgICAgICAucGlwZShtYXAoKCkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSB0aGlzLmtleU1hbmFnZXIuYWN0aXZlSXRlbSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9pZDsgfSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGFjdGl2ZVRhZ0lkKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhZ0lkID0gYWN0aXZlVGFnSWQ7XG4gICAgICAgICAgICB0aGlzLmNkLm1hcmtGb3JDaGVjaygpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgb25Gb2N1c0NoYW5nZShpc0ZvY3VzZWQpIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICB0aGlzLmZvY3VzZWQgPSBpc0ZvY3VzZWQ7XG4gICAgICAgIHRoaXMuY2QubWFya0ZvckNoZWNrKCk7XG4gICAgICAgIGlmICghaXNGb2N1c2VkIHx8ICgoX2EgPSB0aGlzLnRhZ0lucHV0KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZm9jdXNlZCQudmFsdWUpKSB7XG4gICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0QWN0aXZlSXRlbSgtMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRm9jdXMgaW5wdXQgd2hlbiBmb2N1c2luZyB0YWcgbGlzdCB3aXRob3V0IHRhZ3MuIE90aGVyd2lzZSBzZWxlY3QgZmlyc3QgdGFnLlxuICAgICAgICBpZiAodGhpcy50YWdzLmxlbmd0aCA9PT0gMCAmJiB0aGlzLl9oYXNJbnB1dCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c0lucHV0KCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmtleU1hbmFnZXIuc2V0Rmlyc3RJdGVtQWN0aXZlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaXNCYWNrc3BhY2VPckRlbGV0ZShrZXlDb2RlKSB7XG4gICAgICAgIHJldHVybiBrZXlDb2RlID09PSBCQUNLU1BBQ0UgfHwga2V5Q29kZSA9PT0gREVMRVRFO1xuICAgIH1cbiAgICBzZXRBdXRvY29tcGxldGVDdXN0b21Ib3N0KCkge1xuICAgICAgICBpZiAodGhpcy5hdXRvY29tcGxldGVEaXJlY3RpdmUpIHtcbiAgICAgICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlRGlyZWN0aXZlLmN1c3RvbU92ZXJsYXlIb3N0ID0gdGhpcy5ob3N0RWxlbWVudDtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0b2dnbGVUYWcodGFnVG9Ub2dnbGUpIHtcbiAgICAgICAgdGFnVG9Ub2dnbGUuX3RvZ2dsZVNlbGVjdGlvbigpO1xuICAgICAgICBpZiAodGFnVG9Ub2dnbGUuc2VsZWN0ZWQgJiYgIXRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHRoaXMudGFncy5mb3JFYWNoKCh0YWcpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGFnICE9PSB0YWdUb1RvZ2dsZSkge1xuICAgICAgICAgICAgICAgICAgICB0YWcuc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1c0lucHV0KCkge1xuICAgICAgICBpZiAodGhpcy5faGFzSW5wdXQpIHtcbiAgICAgICAgICAgIHRoaXMudGFnSW5wdXQuX2hvc3RFbGVtZW50Lm5hdGl2ZUVsZW1lbnQuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmb2N1c0lucHV0SWZBY3RpdmUoKSB7XG4gICAgICAgIGlmICh0aGlzLl9pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuTmJUYWdMaXN0Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICduYi10YWctbGlzdCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8ZGl2IGNsYXNzPVwibmItdGFnLWxpc3QtdGFncy13cmFwcGVyXCI+XG4gICAgICA8bmctY29udGVudCBzZWxlY3Q9XCJuYi10YWcsIGlucHV0W25iVGFnSW5wdXRdXCI+PC9uZy1jb250ZW50PlxuICAgIDwvZGl2PlxuICBgLFxuICAgICAgICAgICAgICAgIGV4cG9ydEFzOiAnbmJUYWdMaXN0JyxcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRhZ0xpc3RDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogUmVuZGVyZXIyIH0sXG4gICAgeyB0eXBlOiBOZ1pvbmUgfSxcbiAgICB7IHR5cGU6IE5iRm9jdXNNb25pdG9yIH0sXG4gICAgeyB0eXBlOiBOYkFjdGl2ZURlc2NlbmRhbnRLZXlNYW5hZ2VyRmFjdG9yeVNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iTGF5b3V0RGlyZWN0aW9uU2VydmljZSB9LFxuICAgIHsgdHlwZTogTmJTdGF0dXNTZXJ2aWNlIH1cbl07XG5OYlRhZ0xpc3RDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgdGFnczogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJUYWdDb21wb25lbnQsXSB9XSxcbiAgICB0YWdJbnB1dDogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbTmJUYWdJbnB1dERpcmVjdGl2ZSxdIH1dLFxuICAgIGF1dG9jb21wbGV0ZURpcmVjdGl2ZTogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbTmJBdXRvY29tcGxldGVEaXJlY3RpdmUsXSB9XSxcbiAgICBzaXplOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0YWJJbmRleDogW3sgdHlwZTogSW5wdXQgfSwgeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydhdHRyLnRhYmluZGV4JyxdIH1dLFxuICAgIHJvbGU6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnYXR0ci5yb2xlJyxdIH1dLFxuICAgIG11bHRpcGxlOiBbeyB0eXBlOiBJbnB1dCB9LCB7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1tdWx0aXNlbGVjdGFibGUnLF0gfV0sXG4gICAgYWN0aXZlVGFnSWQ6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2F0dHIuYXJpYS1hY3RpdmVkZXNjZW5kYW50JyxdIH1dLFxuICAgIHRhZ1JlbW92ZTogW3sgdHlwZTogT3V0cHV0IH1dLFxuICAgIF9oYXNJbnB1dDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItdGFnLWxpc3Qtd2l0aC1pbnB1dCcsXSB9XSxcbiAgICBfaXNGb2N1c2VkOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5mb2N1cycsXSB9XSxcbiAgICBfaXNGdWxsV2lkdGg6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLmlucHV0LWZ1bGwtd2lkdGgnLF0gfV0sXG4gICAgX2lucHV0Q2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV0sXG4gICAgX29uS2V5ZG93bjogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2tleWRvd24nLCBbJyRldmVudCddLF0gfV0sXG4gICAgX29uQ2xpY2s6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydjbGljaycsIFsnJGV2ZW50J10sXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJUYWdNb2R1bGUge1xufVxuTmJUYWdNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgQ29tbW9uTW9kdWxlLFxuICAgICAgICAgICAgICAgICAgICBOYkljb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJUYWdDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iVGFnTGlzdENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJUYWdJbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJUYWdDb21wb25lbnQsXG4gICAgICAgICAgICAgICAgICAgIE5iVGFnTGlzdENvbXBvbmVudCxcbiAgICAgICAgICAgICAgICAgICAgTmJUYWdJbnB1dERpcmVjdGl2ZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgTkJfREVGQVVMVF9ST1dfTEVWRUwgPSAwO1xuLyoqXG4gKiBJbXBsaWNpdCBjb250ZXh0IG9mIGNlbGxzIGFuZCByb3dzXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWRQcmVzZW50YXRpb25Ob2RlIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBEYXRhIG9iamVjdCBhc3NvY2lhdGVkIHdpdGggcm93XG4gICAgICovXG4gICAgZGF0YSwgY2hpbGRyZW4sIFxuICAgIC8qKlxuICAgICAqIFJvdyBleHBhbmQgc3RhdGVcbiAgICAgKi9cbiAgICBleHBhbmRlZCwgbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IGNoaWxkcmVuO1xuICAgICAgICB0aGlzLmV4cGFuZGVkID0gZXhwYW5kZWQ7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiByb3cgaGFzIGNoaWxkIHJvd3NcbiAgICAgKi9cbiAgICBoYXNDaGlsZHJlbigpIHtcbiAgICAgICAgcmV0dXJuICEhdGhpcy5jaGlsZHJlbiAmJiAhIXRoaXMuY2hpbGRyZW4ubGVuZ3RoO1xuICAgIH1cbn1cblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlRyZWVHcmlkRGF0YVNlcnZpY2Uge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRlZmF1bHRHZXR0ZXJzID0ge1xuICAgICAgICAgICAgZGF0YUdldHRlcjogbm9kZSA9PiBub2RlLmRhdGEsXG4gICAgICAgICAgICBjaGlsZHJlbkdldHRlcjogZCA9PiBkLmNoaWxkcmVuIHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGV4cGFuZGVkR2V0dGVyOiBkID0+ICEhZC5leHBhbmRlZCxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9QcmVzZW50YXRpb25Ob2Rlcyhub2RlcywgY3VzdG9tR2V0dGVycywgbGV2ZWwgPSBOQl9ERUZBVUxUX1JPV19MRVZFTCkge1xuICAgICAgICBjb25zdCBnZXR0ZXJzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCB0aGlzLmRlZmF1bHRHZXR0ZXJzKSwgY3VzdG9tR2V0dGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzLm1hcE5vZGVzKG5vZGVzLCBnZXR0ZXJzLCBsZXZlbCk7XG4gICAgfVxuICAgIG1hcE5vZGVzKG5vZGVzLCBnZXR0ZXJzLCBsZXZlbCkge1xuICAgICAgICBjb25zdCB7IGRhdGFHZXR0ZXIsIGNoaWxkcmVuR2V0dGVyLCBleHBhbmRlZEdldHRlciB9ID0gZ2V0dGVycztcbiAgICAgICAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNoaWxkcmVuTm9kZXMgPSBjaGlsZHJlbkdldHRlcihub2RlKTtcbiAgICAgICAgICAgIGxldCBjaGlsZHJlbjtcbiAgICAgICAgICAgIGlmIChjaGlsZHJlbk5vZGVzKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLnRvUHJlc2VudGF0aW9uTm9kZXMoY2hpbGRyZW5Ob2RlcywgZ2V0dGVycywgbGV2ZWwgKyAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgTmJUcmVlR3JpZFByZXNlbnRhdGlvbk5vZGUoZGF0YUdldHRlcihub2RlKSwgY2hpbGRyZW4sIGV4cGFuZGVkR2V0dGVyKG5vZGUpLCBsZXZlbCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBmbGF0dGVuRXhwYW5kZWQobm9kZXMpIHtcbiAgICAgICAgcmV0dXJuIG5vZGVzLnJlZHVjZSgocmVzLCBub2RlKSA9PiB7XG4gICAgICAgICAgICByZXMucHVzaChub2RlKTtcbiAgICAgICAgICAgIGlmIChub2RlLmV4cGFuZGVkICYmIG5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgICAgIHJlcy5wdXNoKC4uLnRoaXMuZmxhdHRlbkV4cGFuZGVkKG5vZGUuY2hpbGRyZW4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXM7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG4gICAgY29weShub2Rlcykge1xuICAgICAgICByZXR1cm4gbm9kZXMubWFwKChub2RlKSA9PiB7XG4gICAgICAgICAgICBsZXQgY2hpbGRyZW47XG4gICAgICAgICAgICBpZiAobm9kZS5oYXNDaGlsZHJlbigpKSB7XG4gICAgICAgICAgICAgICAgY2hpbGRyZW4gPSB0aGlzLmNvcHkobm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3IE5iVHJlZUdyaWRQcmVzZW50YXRpb25Ob2RlKG5vZGUuZGF0YSwgY2hpbGRyZW4sIG5vZGUuZXhwYW5kZWQsIG5vZGUubGV2ZWwpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5OYlRyZWVHcmlkRGF0YVNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG4vKipcbiAqIFNlcnZpY2UgdXNlZCB0byBmaWx0ZXIgdHJlZSBncmlkIGRhdGEuIFNlYXJjaGVkIHNlYXJjaFN0cmluZyBpbiBhbGwgb2JqZWN0IHZhbHVlcy5cbiAqIElmIHlvdSBuZWVkIGN1c3RvbSBmaWx0ZXIsIHlvdSBjYW4gZXh0ZW5kIHRoaXMgc2VydmljZSBhbmQgb3ZlcnJpZGUgZmlsdGVyUHJlZGljYXRlIG9yIHdob2xlIGZpbHRlciBtZXRob2QuXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWRGaWx0ZXJTZXJ2aWNlIHtcbiAgICBmaWx0ZXIocXVlcnksIGRhdGEpIHtcbiAgICAgICAgaWYgKCFxdWVyeSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRhdGEucmVkdWNlKChmaWx0ZXJlZCwgbm9kZSkgPT4ge1xuICAgICAgICAgICAgbGV0IGZpbHRlcmVkQ2hpbGRyZW47XG4gICAgICAgICAgICBpZiAobm9kZS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkQ2hpbGRyZW4gPSB0aGlzLmZpbHRlcihxdWVyeSwgbm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICAgICAgbm9kZS5jaGlsZHJlbiA9IGZpbHRlcmVkQ2hpbGRyZW47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBub2RlLmV4cGFuZGVkID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAoZmlsdGVyZWRDaGlsZHJlbiAmJiBmaWx0ZXJlZENoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIG5vZGUuZXhwYW5kZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmZpbHRlclByZWRpY2F0ZShub2RlLmRhdGEsIHF1ZXJ5KSkge1xuICAgICAgICAgICAgICAgIGZpbHRlcmVkLnB1c2gobm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmlsdGVyZWQ7XG4gICAgICAgIH0sIFtdKTtcbiAgICB9XG4gICAgZmlsdGVyUHJlZGljYXRlKGRhdGEsIHNlYXJjaFF1ZXJ5KSB7XG4gICAgICAgIGNvbnN0IHByZXBhcmVkUXVlcnkgPSBzZWFyY2hRdWVyeS50cmltKCkudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgT2JqZWN0LnZhbHVlcyhkYXRhKSkge1xuICAgICAgICAgICAgY29uc3QgcHJlcGFyZWRWYWwgPSBgJHt2YWx9YC50cmltKCkudG9Mb2NhbGVMb3dlckNhc2UoKTtcbiAgICAgICAgICAgIGlmIChwcmVwYXJlZFZhbC5pbmNsdWRlcyhwcmVwYXJlZFF1ZXJ5KSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5OYlRyZWVHcmlkRmlsdGVyU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbnZhciBOYlNvcnREaXJlY3Rpb247XG4oZnVuY3Rpb24gKE5iU29ydERpcmVjdGlvbikge1xuICAgIE5iU29ydERpcmVjdGlvbltcIkFTQ0VORElOR1wiXSA9IFwiYXNjXCI7XG4gICAgTmJTb3J0RGlyZWN0aW9uW1wiREVTQ0VORElOR1wiXSA9IFwiZGVzY1wiO1xuICAgIE5iU29ydERpcmVjdGlvbltcIk5PTkVcIl0gPSBcIlwiO1xufSkoTmJTb3J0RGlyZWN0aW9uIHx8IChOYlNvcnREaXJlY3Rpb24gPSB7fSkpO1xuY29uc3Qgc29ydERpcmVjdGlvbnMgPSBbXG4gICAgTmJTb3J0RGlyZWN0aW9uLkFTQ0VORElORyxcbiAgICBOYlNvcnREaXJlY3Rpb24uREVTQ0VORElORyxcbiAgICBOYlNvcnREaXJlY3Rpb24uTk9ORSxcbl07XG4vKipcbiAqIERpcmVjdGl2ZSB0cmlnZ2VycyBzb3J0IG1ldGhvZCBvZiBwYXNzZWQgb2JqZWN0IHdoZW4gc29ydCBoZWFkZXIgY2hhbmdlcyBkaXJlY3Rpb25cbiAqL1xuY2xhc3MgTmJTb3J0RGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zb3J0ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAgIH1cbiAgICBlbWl0U29ydChzb3J0UmVxdWVzdCkge1xuICAgICAgICBpZiAodGhpcy5zb3J0YWJsZSAmJiB0aGlzLnNvcnRhYmxlLnNvcnQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydGFibGUuc29ydChzb3J0UmVxdWVzdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zb3J0LmVtaXQoc29ydFJlcXVlc3QpO1xuICAgIH1cbn1cbk5iU29ydERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbeyBzZWxlY3RvcjogJ1tuYlNvcnRdJyB9LF0gfVxuXTtcbk5iU29ydERpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBzb3J0YWJsZTogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJTb3J0JyxdIH1dLFxuICAgIHNvcnQ6IFt7IHR5cGU6IE91dHB1dCB9XVxufTtcbi8qKlxuICogRGlyZWN0aXZlIGZvciBoZWFkZXJzIHNvcnQgaWNvbnMuIE1hcmsgeW91IGljb24gaW1wbGVtZW50YXRpb24gd2l0aCB0aGlzIHN0cnVjdHVyYWwgZGlyZWN0aXZlIGFuZFxuICogaXQnbGwgc2V0IHRlbXBsYXRlJ3MgaW1wbGljaXQgY29udGV4dCB3aXRoIGN1cnJlbnQgZGlyZWN0aW9uLiBDb250ZXh0IGFsc28gaGFzIGBpc0FzY2VuZGluZ2AsXG4gKiBgaXNEZXNjZW5kaW5nYCBhbmQgYGlzTm9uZWAgcHJvcGVydGllcy5cbiAqL1xuY2xhc3MgTmJTb3J0SGVhZGVySWNvbkRpcmVjdGl2ZSB7XG59XG5OYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7IHNlbGVjdG9yOiAnW25iU29ydEhlYWRlckljb25dJyB9LF0gfVxuXTtcbmNsYXNzIE5iU29ydEljb25Db21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IE5iU29ydERpcmVjdGlvbi5OT05FO1xuICAgIH1cbiAgICBpc0FzY2VuZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBOYlNvcnREaXJlY3Rpb24uQVNDRU5ESU5HO1xuICAgIH1cbiAgICBpc0Rlc2NlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJTb3J0RGlyZWN0aW9uLkRFU0NFTkRJTkc7XG4gICAgfVxuICAgIGlzRGlyZWN0aW9uU2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0FzY2VuZGluZygpIHx8IHRoaXMuaXNEZXNjZW5kaW5nKCk7XG4gICAgfVxufVxuTmJTb3J0SWNvbkNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItc29ydC1pY29uJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpc0RpcmVjdGlvblNldCgpXCI+XG4gICAgICA8bmItaWNvbiAqbmdJZj1cImlzQXNjZW5kaW5nKClcIiBpY29uPVwiY2hldnJvbi1kb3duLW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9uYi1pY29uPlxuICAgICAgPG5iLWljb24gKm5nSWY9XCJpc0Rlc2NlbmRpbmcoKVwiIGljb249XCJjaGV2cm9uLXVwLW91dGxpbmVcIiBwYWNrPVwibmVidWxhci1lc3NlbnRpYWxzXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCI+PC9uYi1pY29uPlxuICAgIDwvbmctY29udGFpbmVyPlxuICBgXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iU29ydEljb25Db21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZGlyZWN0aW9uOiBbeyB0eXBlOiBJbnB1dCB9XVxufTtcbi8qKlxuICogTWFya3MgaGVhZGVyIGFzIHNvcnQgaGVhZGVyIHNvIGl0IGVtaXR0aW5nIHNvcnQgZXZlbnQgd2hlbiBjbGlja2VkLlxuICovXG5jbGFzcyBOYlNvcnRIZWFkZXJDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHNvcnQsIGNvbHVtbkRlZikge1xuICAgICAgICB0aGlzLnNvcnQgPSBzb3J0O1xuICAgICAgICB0aGlzLmNvbHVtbkRlZiA9IGNvbHVtbkRlZjtcbiAgICAgICAgdGhpcy5kaXNhYmxlZFZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERpc2FibGUgc29ydCBoZWFkZXJcbiAgICAgKi9cbiAgICBzZXQgZGlzYWJsZWQodmFsdWUpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZFZhbHVlID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IGRpc2FibGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaXNhYmxlZFZhbHVlO1xuICAgIH1cbiAgICBzb3J0SWZFbmFibGVkKCkge1xuICAgICAgICBpZiAoIXRoaXMuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc29ydERhdGEoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0FzY2VuZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uID09PSBOYlNvcnREaXJlY3Rpb24uQVNDRU5ESU5HO1xuICAgIH1cbiAgICBpc0Rlc2NlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGlvbiA9PT0gTmJTb3J0RGlyZWN0aW9uLkRFU0NFTkRJTkc7XG4gICAgfVxuICAgIHNvcnREYXRhKCkge1xuICAgICAgICBjb25zdCBzb3J0UmVxdWVzdCA9IHRoaXMuY3JlYXRlU29ydFJlcXVlc3QoKTtcbiAgICAgICAgdGhpcy5zb3J0LmVtaXRTb3J0KHNvcnRSZXF1ZXN0KTtcbiAgICB9XG4gICAgZ2V0SWNvbkNvbnRleHQoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAkaW1wbGljaXQ6IHRoaXMuZGlyZWN0aW9uLFxuICAgICAgICAgICAgaXNBc2NlbmRpbmc6IHRoaXMuaXNBc2NlbmRpbmcoKSxcbiAgICAgICAgICAgIGlzRGVzY2VuZGluZzogdGhpcy5pc0Rlc2NlbmRpbmcoKSxcbiAgICAgICAgICAgIGlzTm9uZTogIXRoaXMuaXNBc2NlbmRpbmcoKSAmJiAhdGhpcy5pc0Rlc2NlbmRpbmcoKSxcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZ2V0RGlzYWJsZWRBdHRyaWJ1dGVWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlzYWJsZWQgPyAnJyA6IG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZVNvcnRSZXF1ZXN0KCkge1xuICAgICAgICB0aGlzLmRpcmVjdGlvbiA9IHRoaXMuZ2V0TmV4dERpcmVjdGlvbigpO1xuICAgICAgICByZXR1cm4geyBkaXJlY3Rpb246IHRoaXMuZGlyZWN0aW9uLCBjb2x1bW46IHRoaXMuY29sdW1uRGVmLm5hbWUgfTtcbiAgICB9XG4gICAgZ2V0TmV4dERpcmVjdGlvbigpIHtcbiAgICAgICAgY29uc3Qgc29ydERpcmVjdGlvbkN5Y2xlID0gc29ydERpcmVjdGlvbnM7XG4gICAgICAgIGxldCBuZXh0RGlyZWN0aW9uSW5kZXggPSBzb3J0RGlyZWN0aW9uQ3ljbGUuaW5kZXhPZih0aGlzLmRpcmVjdGlvbikgKyAxO1xuICAgICAgICBpZiAobmV4dERpcmVjdGlvbkluZGV4ID49IHNvcnREaXJlY3Rpb25DeWNsZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIG5leHREaXJlY3Rpb25JbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvcnREaXJlY3Rpb25DeWNsZVtuZXh0RGlyZWN0aW9uSW5kZXhdO1xuICAgIH1cbn1cbk5iU29ydEhlYWRlckNvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iU29ydEhlYWRlcl0nLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGJ1dHRvblxuICAgICAgY2xhc3M9XCJuYi10cmVlLWdyaWQtaGVhZGVyLWNoYW5nZS1zb3J0LWJ1dHRvblwiXG4gICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgIFthdHRyLmRpc2FibGVkXT1cImdldERpc2FibGVkQXR0cmlidXRlVmFsdWUoKVwiXG4gICAgICAoY2xpY2spPVwic29ydERhdGEoKVwiPlxuICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgIDwvYnV0dG9uPlxuICAgIDxuYi1zb3J0LWljb24gKm5nSWY9XCIhc29ydEljb247IGVsc2UgY3VzdG9tSWNvblwiIFtkaXJlY3Rpb25dPVwiZGlyZWN0aW9uXCI+PC9uYi1zb3J0LWljb24+XG4gICAgPG5nLXRlbXBsYXRlICNjdXN0b21JY29uIFtuZ1RlbXBsYXRlT3V0bGV0XT1cInNvcnRJY29uXCIgW25nVGVtcGxhdGVPdXRsZXRDb250ZXh0XT1cImdldEljb25Db250ZXh0KClcIj48L25nLXRlbXBsYXRlPlxuICBgXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iU29ydEhlYWRlckNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iU29ydERpcmVjdGl2ZSB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9TT1JUX0hFQURFUl9DT0xVTU5fREVGLF0gfV0gfVxuXTtcbk5iU29ydEhlYWRlckNvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBzb3J0SWNvbjogW3sgdHlwZTogQ29udGVudENoaWxkLCBhcmdzOiBbTmJTb3J0SGVhZGVySWNvbkRpcmVjdGl2ZSwgeyByZWFkOiBUZW1wbGF0ZVJlZiB9LF0gfV0sXG4gICAgZGlyZWN0aW9uOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlNvcnRIZWFkZXInLF0gfV0sXG4gICAgZGlzYWJsZWQ6IFt7IHR5cGU6IElucHV0IH0sIHsgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MuZGlzYWJsZWQnLF0gfV0sXG4gICAgc29ydElmRW5hYmxlZDogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJyxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogU2VydmljZSB1c2VkIHRvIHNvcnQgdHJlZSBncmlkIGRhdGEuIFVzZXMgQXJyYXkucHJvdG90eXBlLnNvcnQgbWV0aG9kLlxuICogSWYgeW91IG5lZWQgY3VzdG9tIHNvcnRpbmcsIHlvdSBjYW4gZXh0ZW5kIHRoaXMgc2VydmljZSBhbmQgb3ZlcnJpZGUgY29tcGFyYXRvciBvciB3aG9sZSBzb3J0IG1ldGhvZC5cbiAqL1xuY2xhc3MgTmJUcmVlR3JpZFNvcnRTZXJ2aWNlIHtcbiAgICBzb3J0KHJlcXVlc3QsIGRhdGEpIHtcbiAgICAgICAgaWYgKCFyZXF1ZXN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBzb3J0ZWQgPSBkYXRhLnNvcnQoKG5hLCBuYikgPT4gdGhpcy5jb21wYXJhdG9yKHJlcXVlc3QsIG5hLCBuYikpO1xuICAgICAgICBmb3IgKGNvbnN0IG5vZGUgb2YgZGF0YSkge1xuICAgICAgICAgICAgaWYgKG5vZGUuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBub2RlLmNoaWxkcmVuID0gdGhpcy5zb3J0KHJlcXVlc3QsIG5vZGUuY2hpbGRyZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzb3J0ZWQ7XG4gICAgfVxuICAgIGNvbXBhcmF0b3IocmVxdWVzdCwgbmEsIG5iKSB7XG4gICAgICAgIGNvbnN0IGtleSA9IHJlcXVlc3QuY29sdW1uO1xuICAgICAgICBjb25zdCBkaXIgPSByZXF1ZXN0LmRpcmVjdGlvbjtcbiAgICAgICAgY29uc3QgYSA9IG5hLmRhdGFba2V5XTtcbiAgICAgICAgY29uc3QgYiA9IG5iLmRhdGFba2V5XTtcbiAgICAgICAgbGV0IHJlcyA9IDA7XG4gICAgICAgIGlmIChhID4gYikge1xuICAgICAgICAgICAgcmVzID0gMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYSA8IGIpIHtcbiAgICAgICAgICAgIHJlcyA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkaXIgPT09IE5iU29ydERpcmVjdGlvbi5BU0NFTkRJTkcgPyByZXMgOiByZXMgKiAtMTtcbiAgICB9XG59XG5OYlRyZWVHcmlkU29ydFNlcnZpY2UuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlRyZWVHcmlkU2VydmljZSB7XG4gICAgZXhwYW5kKGRhdGEsIHJvdywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmQoZGF0YSwgcm93KTtcbiAgICAgICAgbm9kZS5leHBhbmRlZCA9IHRydWU7XG4gICAgICAgIGlmIChvcHRpb25zLmRlZXAgJiYgbm9kZS5oYXNDaGlsZHJlbigpKSB7XG4gICAgICAgICAgICBub2RlLmNoaWxkcmVuLmZvckVhY2goKG4pID0+IHRoaXMuZXhwYW5kKGRhdGEsIG4uZGF0YSwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbGxhcHNlKGRhdGEsIHJvdywgb3B0aW9ucyA9IHt9KSB7XG4gICAgICAgIGNvbnN0IG5vZGUgPSB0aGlzLmZpbmQoZGF0YSwgcm93KTtcbiAgICAgICAgbm9kZS5leHBhbmRlZCA9IGZhbHNlO1xuICAgICAgICBpZiAob3B0aW9ucy5kZWVwICYmIG5vZGUuaGFzQ2hpbGRyZW4oKSkge1xuICAgICAgICAgICAgbm9kZS5jaGlsZHJlbi5mb3JFYWNoKChuKSA9PiB0aGlzLmNvbGxhcHNlKGRhdGEsIG4uZGF0YSwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRvZ2dsZShkYXRhLCByb3csIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBjb25zdCBub2RlID0gdGhpcy5maW5kKGRhdGEsIHJvdyk7XG4gICAgICAgIGlmIChub2RlLmV4cGFuZGVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbGxhcHNlKGRhdGEsIHJvdywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmV4cGFuZChkYXRhLCByb3csIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZpbmQoZGF0YSwgcm93KSB7XG4gICAgICAgIGNvbnN0IHRvQ2hlY2sgPSBbLi4uZGF0YV07XG4gICAgICAgIGZvciAoY29uc3Qgbm9kZSBvZiB0b0NoZWNrKSB7XG4gICAgICAgICAgICBpZiAobm9kZS5kYXRhID09PSByb3cpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChub2RlLmhhc0NoaWxkcmVuKCkpIHtcbiAgICAgICAgICAgICAgICB0b0NoZWNrLnB1c2goLi4ubm9kZS5jaGlsZHJlbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5OYlRyZWVHcmlkU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWREYXRhU291cmNlIGV4dGVuZHMgTmJEYXRhU291cmNlIHtcbiAgICBjb25zdHJ1Y3Rvcihzb3J0U2VydmljZSwgZmlsdGVyU2VydmljZSwgdHJlZUdyaWRTZXJ2aWNlLCB0cmVlR3JpZERhdGFTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuc29ydFNlcnZpY2UgPSBzb3J0U2VydmljZTtcbiAgICAgICAgdGhpcy5maWx0ZXJTZXJ2aWNlID0gZmlsdGVyU2VydmljZTtcbiAgICAgICAgdGhpcy50cmVlR3JpZFNlcnZpY2UgPSB0cmVlR3JpZFNlcnZpY2U7XG4gICAgICAgIHRoaXMudHJlZUdyaWREYXRhU2VydmljZSA9IHRyZWVHcmlkRGF0YVNlcnZpY2U7XG4gICAgICAgIC8qKiBTdHJlYW0gZW1pdHRpbmcgcmVuZGVyIGRhdGEgdG8gdGhlIHRhYmxlIChkZXBlbmRzIG9uIG9yZGVyZWQgZGF0YSBjaGFuZ2VzKS4gKi9cbiAgICAgICAgdGhpcy5yZW5kZXJEYXRhID0gbmV3IEJlaGF2aW9yU3ViamVjdChbXSk7XG4gICAgICAgIHRoaXMuZmlsdGVyUmVxdWVzdCA9IG5ldyBCZWhhdmlvclN1YmplY3QoJycpO1xuICAgICAgICB0aGlzLnNvcnRSZXF1ZXN0ID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcbiAgICB9XG4gICAgc2V0RGF0YShkYXRhLCBjdXN0b21HZXR0ZXJzKSB7XG4gICAgICAgIGxldCBwcmVzZW50YXRpb25EYXRhID0gW107XG4gICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBwcmVzZW50YXRpb25EYXRhID0gdGhpcy50cmVlR3JpZERhdGFTZXJ2aWNlLnRvUHJlc2VudGF0aW9uTm9kZXMoZGF0YSwgY3VzdG9tR2V0dGVycyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kYXRhID0gbmV3IEJlaGF2aW9yU3ViamVjdChwcmVzZW50YXRpb25EYXRhKTtcbiAgICAgICAgdGhpcy51cGRhdGVDaGFuZ2VTdWJzY3JpcHRpb24oKTtcbiAgICB9XG4gICAgY29ubmVjdChjb2xsZWN0aW9uVmlld2VyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlckRhdGE7XG4gICAgfVxuICAgIGRpc2Nvbm5lY3QoY29sbGVjdGlvblZpZXdlcikge1xuICAgIH1cbiAgICBleHBhbmQocm93KSB7XG4gICAgICAgIHRoaXMudHJlZUdyaWRTZXJ2aWNlLmV4cGFuZCh0aGlzLmRhdGEudmFsdWUsIHJvdyk7XG4gICAgICAgIHRoaXMuZGF0YS5uZXh0KHRoaXMuZGF0YS52YWx1ZSk7XG4gICAgfVxuICAgIGNvbGxhcHNlKHJvdykge1xuICAgICAgICB0aGlzLnRyZWVHcmlkU2VydmljZS5jb2xsYXBzZSh0aGlzLmRhdGEudmFsdWUsIHJvdyk7XG4gICAgICAgIHRoaXMuZGF0YS5uZXh0KHRoaXMuZGF0YS52YWx1ZSk7XG4gICAgfVxuICAgIHRvZ2dsZShyb3csIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy50cmVlR3JpZFNlcnZpY2UudG9nZ2xlKHRoaXMuZGF0YS52YWx1ZSwgcm93LCBvcHRpb25zKTtcbiAgICAgICAgdGhpcy5kYXRhLm5leHQodGhpcy5kYXRhLnZhbHVlKTtcbiAgICB9XG4gICAgdG9nZ2xlQnlJbmRleChkYXRhSW5kZXgsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3Qgbm9kZSA9IHRoaXMucmVuZGVyRGF0YS52YWx1ZSAmJiB0aGlzLnJlbmRlckRhdGEudmFsdWVbZGF0YUluZGV4XTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlKG5vZGUuZGF0YSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0TGV2ZWwocm93SW5kZXgpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gdGhpcy5yZW5kZXJEYXRhLnZhbHVlW3Jvd0luZGV4XTtcbiAgICAgICAgcmV0dXJuIHJvdyA/IHJvdy5sZXZlbCA6IE5CX0RFRkFVTFRfUk9XX0xFVkVMO1xuICAgIH1cbiAgICBzb3J0KHNvcnRSZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMuc29ydFJlcXVlc3QubmV4dChzb3J0UmVxdWVzdCk7XG4gICAgfVxuICAgIGZpbHRlcihzZWFyY2hRdWVyeSkge1xuICAgICAgICB0aGlzLmZpbHRlclJlcXVlc3QubmV4dChzZWFyY2hRdWVyeSk7XG4gICAgfVxuICAgIHVwZGF0ZUNoYW5nZVN1YnNjcmlwdGlvbigpIHtcbiAgICAgICAgY29uc3QgZGF0YVN0cmVhbSA9IHRoaXMuZGF0YTtcbiAgICAgICAgY29uc3QgZmlsdGVyZWREYXRhID0gY29tYmluZUxhdGVzdChbZGF0YVN0cmVhbSwgdGhpcy5maWx0ZXJSZXF1ZXN0XSlcbiAgICAgICAgICAgIC5waXBlKG1hcCgoW2RhdGFdKSA9PiB0aGlzLnRyZWVHcmlkRGF0YVNlcnZpY2UuY29weShkYXRhKSksIG1hcChkYXRhID0+IHRoaXMuZmlsdGVyRGF0YShkYXRhKSkpO1xuICAgICAgICBjb25zdCBzb3J0ZWREYXRhID0gY29tYmluZUxhdGVzdChbZmlsdGVyZWREYXRhLCB0aGlzLnNvcnRSZXF1ZXN0XSlcbiAgICAgICAgICAgIC5waXBlKG1hcCgoW2RhdGFdKSA9PiB0aGlzLnNvcnREYXRhKGRhdGEpKSk7XG4gICAgICAgIHNvcnRlZERhdGFcbiAgICAgICAgICAgIC5waXBlKG1hcCgoZGF0YSkgPT4gdGhpcy50cmVlR3JpZERhdGFTZXJ2aWNlLmZsYXR0ZW5FeHBhbmRlZChkYXRhKSkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKChkYXRhKSA9PiB0aGlzLnJlbmRlckRhdGEubmV4dChkYXRhKSk7XG4gICAgfVxuICAgIGZpbHRlckRhdGEoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJTZXJ2aWNlLmZpbHRlcih0aGlzLmZpbHRlclJlcXVlc3QudmFsdWUsIGRhdGEpO1xuICAgIH1cbiAgICBzb3J0RGF0YShkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRTZXJ2aWNlLnNvcnQodGhpcy5zb3J0UmVxdWVzdC52YWx1ZSwgZGF0YSk7XG4gICAgfVxufVxuY2xhc3MgTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyIHtcbiAgICBjb25zdHJ1Y3RvcihmaWx0ZXJTZXJ2aWNlLCBzb3J0U2VydmljZSwgdHJlZUdyaWRTZXJ2aWNlLCB0cmVlR3JpZERhdGFTZXJ2aWNlKSB7XG4gICAgICAgIHRoaXMuZmlsdGVyU2VydmljZSA9IGZpbHRlclNlcnZpY2U7XG4gICAgICAgIHRoaXMuc29ydFNlcnZpY2UgPSBzb3J0U2VydmljZTtcbiAgICAgICAgdGhpcy50cmVlR3JpZFNlcnZpY2UgPSB0cmVlR3JpZFNlcnZpY2U7XG4gICAgICAgIHRoaXMudHJlZUdyaWREYXRhU2VydmljZSA9IHRyZWVHcmlkRGF0YVNlcnZpY2U7XG4gICAgfVxuICAgIGNyZWF0ZShkYXRhLCBjdXN0b21HZXR0ZXJzKSB7XG4gICAgICAgIGNvbnN0IGRhdGFTb3VyY2UgPSBuZXcgTmJUcmVlR3JpZERhdGFTb3VyY2UodGhpcy5zb3J0U2VydmljZSwgdGhpcy5maWx0ZXJTZXJ2aWNlLCB0aGlzLnRyZWVHcmlkU2VydmljZSwgdGhpcy50cmVlR3JpZERhdGFTZXJ2aWNlKTtcbiAgICAgICAgZGF0YVNvdXJjZS5zZXREYXRhKGRhdGEsIGN1c3RvbUdldHRlcnMpO1xuICAgICAgICByZXR1cm4gZGF0YVNvdXJjZTtcbiAgICB9XG59XG5OYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IEluamVjdGFibGUgfVxuXTtcbk5iVHJlZUdyaWREYXRhU291cmNlQnVpbGRlci5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iVHJlZUdyaWRGaWx0ZXJTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlRyZWVHcmlkU29ydFNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IE5iVHJlZUdyaWRTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYlRyZWVHcmlkRGF0YVNlcnZpY2UgfVxuXTtcblxuLypcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jb25zdCBOQl9UUkVFX0dSSUQgPSBuZXcgSW5qZWN0aW9uVG9rZW4oJ05CX1RSRUVfR1JJRCcpO1xuXG5jbGFzcyBOYkNvbHVtbnNTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3RvcihkaWZmZXJzKSB7XG4gICAgICAgIHRoaXMuZGlmZmVycyA9IGRpZmZlcnM7XG4gICAgICAgIHRoaXMuY29sdW1uSGlkZSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmNvbHVtblNob3ckID0gbmV3IFN1YmplY3QoKTtcbiAgICB9XG4gICAgc2V0Q29sdW1ucyhjb2x1bW5zKSB7XG4gICAgICAgIGlmICghdGhpcy5jaGFuZ2VzRGlmZmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5nZXNEaWZmZXIgPSB0aGlzLmRpZmZlcnMuZmluZChjb2x1bW5zIHx8IFtdKS5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5jaGFuZ2VzRGlmZmVyLmRpZmYoY29sdW1ucykpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsQ29sdW1ucyA9IEFycmF5LmZyb20oY29sdW1ucyk7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVDb2x1bW5zID0gQXJyYXkuZnJvbShjb2x1bW5zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRWaXNpYmxlQ29sdW1ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUNvbHVtbnM7XG4gICAgfVxuICAgIGhpZGVDb2x1bW4oY29sdW1uKSB7XG4gICAgICAgIGNvbnN0IHRvUmVtb3ZlID0gdGhpcy52aXNpYmxlQ29sdW1ucy5pbmRleE9mKGNvbHVtbik7XG4gICAgICAgIGlmICh0b1JlbW92ZSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnZpc2libGVDb2x1bW5zLnNwbGljZSh0b1JlbW92ZSwgMSk7XG4gICAgICAgICAgICB0aGlzLmNvbHVtbkhpZGUkLm5leHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG93Q29sdW1uKGNvbHVtbikge1xuICAgICAgICBpZiAodGhpcy52aXNpYmxlQ29sdW1ucy5pbmNsdWRlcyhjb2x1bW4pKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52aXNpYmxlQ29sdW1ucy5zcGxpY2UodGhpcy5maW5kSW5zZXJ0SW5kZXgoY29sdW1uKSwgMCwgY29sdW1uKTtcbiAgICAgICAgdGhpcy5jb2x1bW5TaG93JC5uZXh0KCk7XG4gICAgfVxuICAgIG9uQ29sdW1uc0NoYW5nZSgpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlKHRoaXMuY29sdW1uU2hvdyQsIHRoaXMuY29sdW1uSGlkZSQpO1xuICAgIH1cbiAgICBmaW5kSW5zZXJ0SW5kZXgoY29sdW1uKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxJbmRleCA9IHRoaXMuYWxsQ29sdW1ucy5pbmRleE9mKGNvbHVtbik7XG4gICAgICAgIGlmIChpbml0aWFsSW5kZXggPT09IDAgfHwgIXRoaXMudmlzaWJsZUNvbHVtbnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5pdGlhbEluZGV4ID09PSB0aGlzLmFsbENvbHVtbnMubGVuZ3RoIC0gMSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlzaWJsZUNvbHVtbnMubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxlZnRTaWJsaW5nSW5kZXggPSBpbml0aWFsSW5kZXggLSAxO1xuICAgICAgICBmb3IgKGxldCBpID0gbGVmdFNpYmxpbmdJbmRleDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIGNvbnN0IGxlZnRTaWJsaW5nID0gdGhpcy5hbGxDb2x1bW5zW2ldO1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnZpc2libGVDb2x1bW5zLmluZGV4T2YobGVmdFNpYmxpbmcpO1xuICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbmRleCArIDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmlnaHRTaWJsaW5nSW5kZXggPSBpbml0aWFsSW5kZXggKyAxO1xuICAgICAgICBmb3IgKGxldCBpID0gcmlnaHRTaWJsaW5nSW5kZXg7IGkgPCB0aGlzLmFsbENvbHVtbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHJpZ2h0U2libGluZyA9IHRoaXMuYWxsQ29sdW1uc1tpXTtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy52aXNpYmxlQ29sdW1ucy5pbmRleE9mKHJpZ2h0U2libGluZyk7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2FuJ3QgcmVzdG9yZSBjb2x1bW4gcG9zaXRpb24uYCk7XG4gICAgfVxufVxuTmJDb2x1bW5zU2VydmljZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogSW5qZWN0YWJsZSB9XG5dO1xuTmJDb2x1bW5zU2VydmljZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IEl0ZXJhYmxlRGlmZmVycyB9XG5dO1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogVHJlZSBncmlkIGNvbXBvbmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGRpc3BsYXkgbmVzdGVkIHJvd3Mgb2YgZGF0YS5cbiAqIFN1cHBvcnRzIGZpbHRlcmluZyBhbmQgc29ydGluZy5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU2hvd2Nhc2UsIHRyZWUtZ3JpZC90cmVlLWdyaWQtc2hvd2Nhc2UuY29tcG9uZW50KVxuICpcbiAqICMjIyBJbnN0YWxsYXRpb25cbiAqXG4gKiBJbXBvcnQgYE5iVHJlZUdyaWRNb2R1bGVgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVHJlZUdyaWRNb2R1bGUsXG4gKiAgIF0sXG4gKiB9KVxuICogZXhwb3J0IGNsYXNzIFBhZ2VNb2R1bGUgeyB9XG4gKiBgYGBcbiAqXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBBcyB0aGUgbW9zdCBiYXNpYyB1c2FnZSB5b3UgbmVlZCB0byBkZWZpbmUgW25iVHJlZUdyaWRSb3dEZWZdKGRvY3MvY29tcG9uZW50cy90cmVlZ3JpZC9hcGkjbmJ0cmVlZ3JpZHJvd2RlZmRpcmVjdGl2ZSlcbiAqIHdoZXJlIHlvdSBzaG91bGQgcGFzcyBjb2x1bW5zIHRvIGRpc3BsYXkgaW4gcm93cyBhbmRcbiAqIFtuYlRyZWVHcmlkQ29sdW1uRGVmXShkb2NzL2NvbXBvbmVudHMvdHJlZWdyaWQvYXBpI25idHJlZWdyaWRjb2x1bW5kZWZkaXJlY3RpdmUpIC0gY29tcG9uZW50IGNvbnRhaW5pbmcgY2VsbFxuICogZGVmaW5pdGlvbnMgZm9yIGVhY2ggY29sdW1uIHBhc3NlZCB0byByb3cgZGVmaW5pdGlvbi5cbiAqIEBzdGFja2VkLWV4YW1wbGUoQmFzaWMsIHRyZWUtZ3JpZC90cmVlLWdyaWQtYmFzaWMuY29tcG9uZW50KVxuICpcbiAqIGBOYlRyZWVHcmlkQ29tcG9uZW50YCdzIHNvdXJjZSBpbnB1dCBhbmQgYE5iVHJlZUdyaWREYXRhU291cmNlQnVpbGRlci5jcmVhdGVgIGV4cGVjdGluZyBkYXRhIHRvIGJlIGFuIGFycmF5IG9mXG4gKiBvYmplY3RzIHdpdGggYGRhdGFgLCBgY2hpbGRyZW5gIGFuZCBgZXhwYW5kZWRgIHByb3BlcnRpZXMuIElmIHlvdXIgZGF0YSBkb2Vzbid0IG1hdGNoIHRoaXMgaW50ZXJmYWNlLCB5b3UgY2FuIHBhc3NcbiAqIGdldHRlciBmdW5jdGlvbnMgZm9yIGVhY2ggcHJvcGVydHkgYXMgYXJndW1lbnRzIHRvIGBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIuY3JlYXRlYCBtZXRob2QuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBub2RlIHN0cnVjdHVyZSwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1jdXN0b20tbm9kZS1zdHJ1Y3R1cmUuY29tcG9uZW50KVxuICpcbiAqIFRvIHVzZSBzb3J0aW5nIHlvdSBjYW4gYWRkIGBuYlNvcnRgIGRpcmVjdGl2ZSB0byB0YWJsZSBhbmQgc3Vic2NyaWJlIHRvIGBzb3J0YCBtZXRob2QuIFdoZW4gdXNlciBjbGljayBvbiBoZWFkZXIsXG4gKiBzb3J0IGV2ZW50IHdpbGwgYmUgZW1pdHRlZC4gRXZlbnQgb2JqZWN0IGNvbnRhaW4gY2xpY2tlZCBjb2x1bW4gbmFtZSBhbmQgZGVzaXJlZCBzb3J0IGRpcmVjdGlvbi5cbiAqIEBzdGFja2VkLWV4YW1wbGUoU29ydGFibGUsIHRyZWUtZ3JpZC90cmVlLWdyaWQtc29ydGFibGUuY29tcG9uZW50KVxuICpcbiAqIFlvdSBjYW4gdXNlIGBEYXRhIFNvdXJjZSBCdWlsZGVyYCB0byBjcmVhdGUgYE5iVHJlZUdyaWREYXRhU291cmNlYCB3aGljaCB3b3VsZCBoYXZlIHRvZ2dsZSwgc29ydCBhbmRcbiAqIGZpbHRlciBtZXRob2RzLiBUaGVuIHlvdSBjYW4gY2FsbCB0aGlzIG1ldGhvZHMgdG8gY2hhbmdlIHNvcnQgb3IgdG9nZ2xlIHJvd3MgcHJvZ3JhbW1hdGljYWxseS4gQWxzbyBgbmJTb3J0YCBhbmRcbiAqIGBuYkZpbHRlcklucHV0YCBkaXJlY3RpdmVzIGJvdGggc3VwcG9ydCBgTmJUcmVlR3JpZERhdGFTb3VyY2VgLCBzbyB5b3UgY2FuIHBhc3MgaXQgZGlyZWN0bHkgYXMgYW4gaW5wdXQgYW5kXG4gKiBkaXJlY3RpdmVzIHdpbGwgdHJpZ2dlciBzb3J0LCB0b2dnbGUgdGhlbXNlbHZlcy5cbiAqIEBzdGFja2VkLWV4YW1wbGUoRGF0YSBTb3VyY2UgQnVpbGRlciwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogWW91IGNhbiBjcmVhdGUgcmVzcG9uc2l2ZSBncmlkIGJ5IHNldHRpbmcgYGhpZGVPbmAgYW5kIGBzaG93T25gIGlucHV0cyBvZlxuICogW25iVHJlZUdyaWRDb2x1bW5EZWZdKGRvY3MvY29tcG9uZW50cy90cmVlLWdyaWQvYXBpI25idHJlZWdyaWRjb2x1bW5kZWZkaXJlY3RpdmUpIGRpcmVjdGl2ZS5cbiAqIFdoZW4gdmlld3BvcnQgcmVhY2hlcyBzcGVjaWZpZWQgd2lkdGggZ3JpZCBoaWRlcyBvciBzaG93cyBjb2x1bW5zLlxuICogQHN0YWNrZWQtZXhhbXBsZShSZXNwb25zaXZlIGNvbHVtbnMsIHRyZWUtZ3JpZC90cmVlLWdyaWQtcmVzcG9uc2l2ZS5jb21wb25lbnQpXG4gKlxuICogVG8gY3VzdG9taXplIHNvcnQgb3Igcm93IHRvZ2dsZSBpY29ucyB5b3UgY2FuIHVzZSBgbmJTb3J0SGVhZGVySWNvbmAgYW5kIGBuYlRyZWVHcmlkUm93VG9nZ2xlYCBkaXJlY3RpdmVzXG4gKiByZXNwZWN0aXZlbHkuIGBuYlNvcnRIZWFkZXJJY29uYCBpcyBhIHN0cnVjdHVyYWwgZGlyZWN0aXZlIGFuZCBpdCdzIGltcGxpY2l0IGNvbnRleHQgc2V0IHRvIGN1cnJlbnQgZGlyZWN0aW9uLlxuICogQWxzbyBjb250ZXh0IGhhcyB0aHJlZSBwcm9wZXJ0aWVzOiBgaXNBc2NlbmRpbmdgLCBgaXNEZXNjZW5kaW5nYCBhbmQgYGlzTm9uZWAuXG4gKiBAc3RhY2tlZC1leGFtcGxlKEN1c3RvbSBpY29ucywgdHJlZS1ncmlkL3RyZWUtZ3JpZC1jdXN0b20taWNvbnMuY29tcG9uZW50KVxuICpcbiAqIEJ5IGRlZmF1bHQsIHJvdyB0byB0b2dnbGUgaGFwcGVucyB3aGVuIHVzZXIgY2xpY2tzIGFueXdoZXJlIGluIHRoZSByb3cuIEFsc28gZG91YmxlIGNsaWNrIGV4cGFuZHMgcm93IGRlZXBseS5cbiAqIFRvIGRpc2FibGUgdGhpcyB5b3UgY2FuIHNldCBgW2NsaWNrVG9Ub2dnbGVdPVwiZmFsc2VcImAgaW5wdXQgb2YgYG5iVHJlZUdyaWRSb3dgLlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlIGNsaWNrIHRvZ2dsZSwgdHJlZS1ncmlkL3RyZWUtZ3JpZC1kaXNhYmxlLWNsaWNrLXRvZ2dsZS5jb21wb25lbnQpXG4gKlxuICogQHN0eWxlc1xuICpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci13aWR0aDpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci1zdHlsZTpcbiAqIHRyZWUtZ3JpZC1jZWxsLWJvcmRlci1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1yb3ctbWluLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1jZWxsLXBhZGRpbmc6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtY29sb3I6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtZm9udC1mYW1pbHk6XG4gKiB0cmVlLWdyaWQtaGVhZGVyLXRleHQtZm9udC1zaXplOlxuICogdHJlZS1ncmlkLWhlYWRlci10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdHJlZS1ncmlkLWhlYWRlci10ZXh0LWxpbmUtaGVpZ2h0OlxuICogdHJlZS1ncmlkLWZvb3Rlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWNvbG9yOlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWZvbnQtZmFtaWx5OlxuICogdHJlZS1ncmlkLWZvb3Rlci10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRyZWUtZ3JpZC1mb290ZXItdGV4dC1mb250LXdlaWdodDpcbiAqIHRyZWUtZ3JpZC1mb290ZXItdGV4dC1saW5lLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1yb3ctYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1yb3ctZXZlbi1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy1ob3Zlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWNvbG9yOlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWZvbnQtZmFtaWx5OlxuICogdHJlZS1ncmlkLXJvdy10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRyZWUtZ3JpZC1yb3ctdGV4dC1mb250LXdlaWdodDpcbiAqIHRyZWUtZ3JpZC1yb3ctdGV4dC1saW5lLWhlaWdodDpcbiAqIHRyZWUtZ3JpZC1zb3J0LWhlYWRlci1idXR0b24tYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRyZWUtZ3JpZC1zb3J0LWhlYWRlci1idXR0b24tYm9yZGVyOlxuICogdHJlZS1ncmlkLXNvcnQtaGVhZGVyLWJ1dHRvbi1wYWRkaW5nOlxuICovXG5jbGFzcyBOYlRyZWVHcmlkQ29tcG9uZW50IGV4dGVuZHMgTmJUYWJsZSB7XG4gICAgY29uc3RydWN0b3IoZGF0YVNvdXJjZUJ1aWxkZXIsIGRpZmZlcnMsIGNoYW5nZURldGVjdG9yUmVmLCBlbGVtZW50UmVmLCByb2xlLCBkaXIsIGRvY3VtZW50LCBwbGF0Zm9ybSwgd2luZG93LCBfdmlld1JlcGVhdGVyLCBfY29hbGVzY2VkU3R5bGVTY2hlZHVsZXIsIF92aWV3cG9ydFJ1bGVyLCBfc3RpY2t5UG9zaXRpb25pbmdMaXN0ZW5lcikge1xuICAgICAgICBzdXBlcihkaWZmZXJzLCBjaGFuZ2VEZXRlY3RvclJlZiwgZWxlbWVudFJlZiwgcm9sZSwgZGlyLCBkb2N1bWVudCwgcGxhdGZvcm0sIF92aWV3UmVwZWF0ZXIsIF9jb2FsZXNjZWRTdHlsZVNjaGVkdWxlciwgX3ZpZXdwb3J0UnVsZXIsIF9zdGlja3lQb3NpdGlvbmluZ0xpc3RlbmVyKTtcbiAgICAgICAgdGhpcy5kYXRhU291cmNlQnVpbGRlciA9IGRhdGFTb3VyY2VCdWlsZGVyO1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICAgICAgdGhpcy5fdmlld1JlcGVhdGVyID0gX3ZpZXdSZXBlYXRlcjtcbiAgICAgICAgdGhpcy5fY29hbGVzY2VkU3R5bGVTY2hlZHVsZXIgPSBfY29hbGVzY2VkU3R5bGVTY2hlZHVsZXI7XG4gICAgICAgIHRoaXMuX3N0aWNreVBvc2l0aW9uaW5nTGlzdGVuZXIgPSBfc3RpY2t5UG9zaXRpb25pbmdMaXN0ZW5lcjtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMubGV2ZWxQYWRkaW5nID0gJyc7XG4gICAgICAgIHRoaXMuZXF1YWxDb2x1bW5zV2lkdGhWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnRyZWVDbGFzcyA9IHRydWU7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBwbGF0Zm9ybTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHRhYmxlJ3MgZGF0YVxuICAgICAqIEBwYXJhbSBkYXRhXG4gICAgICogQHR5cGUgezxUPltdIHwgTmJUcmVlR3JpZERhdGFTb3VyY2V9XG4gICAgICovXG4gICAgc2V0IHNvdXJjZShkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkYXRhIGluc3RhbmNlb2YgTmJUcmVlR3JpZERhdGFTb3VyY2UpIHtcbiAgICAgICAgICAgIHRoaXMuX3NvdXJjZSA9IGRhdGE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zb3VyY2UgPSB0aGlzLmRhdGFTb3VyY2VCdWlsZGVyLmNyZWF0ZShkYXRhKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSB0aGlzLl9zb3VyY2U7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1ha2UgYWxsIGNvbHVtbnMgZXF1YWwgd2lkdGguIEZhbHNlIGJ5IGRlZmF1bHQuXG4gICAgICovXG4gICAgc2V0IGVxdWFsQ29sdW1uc1dpZHRoKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuZXF1YWxDb2x1bW5zV2lkdGhWYWx1ZSA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWx1ZSk7XG4gICAgfVxuICAgIGdldCBlcXVhbENvbHVtbnNXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXF1YWxDb2x1bW5zV2lkdGhWYWx1ZTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLmNoZWNrRGVmc0NvdW50KCk7XG4gICAgICAgIGNvbnN0IHJvd3NDaGFuZ2UkID0gbWVyZ2UodGhpcy5fY29udGVudFJvd0RlZnMuY2hhbmdlcywgdGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMuY2hhbmdlcywgdGhpcy5fY29udGVudEZvb3RlclJvd0RlZnMuY2hhbmdlcyk7XG4gICAgICAgIHJvd3NDaGFuZ2UkLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNoZWNrRGVmc0NvdW50KCkpO1xuICAgICAgICBpZiAodGhpcy5wbGF0Zm9ybS5pc0Jyb3dzZXIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJsZUNvbHVtbnMoKTtcbiAgICAgICAgICAgIGNvbnN0IHdpbmRvd1Jlc2l6ZSQgPSBmcm9tRXZlbnQodGhpcy53aW5kb3csICdyZXNpemUnKS5waXBlKGRlYm91bmNlVGltZSg1MCkpO1xuICAgICAgICAgICAgbWVyZ2Uocm93c0NoYW5nZSQsIHRoaXMuX2NvbnRlbnRDb2x1bW5EZWZzLmNoYW5nZXMsIHdpbmRvd1Jlc2l6ZSQpXG4gICAgICAgICAgICAgICAgLnBpcGUodGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy51cGRhdGVWaXNpYmxlQ29sdW1ucygpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgc3VwZXIubmdPbkRlc3Ryb3koKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgdG9nZ2xlUm93KHJvdywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5nZXRSb3dDb250ZXh0KHJvdyk7XG4gICAgICAgIHRoaXMuX3NvdXJjZS50b2dnbGUoY29udGV4dC4kaW1wbGljaXQuZGF0YSwgb3B0aW9ucyk7XG4gICAgfVxuICAgIHRvZ2dsZUNlbGxSb3coY2VsbCkge1xuICAgICAgICBjb25zdCBjb250ZXh0ID0gdGhpcy5nZXRDZWxsQ29udGV4dChjZWxsKTtcbiAgICAgICAgdGhpcy5fc291cmNlLnRvZ2dsZShjb250ZXh0LiRpbXBsaWNpdC5kYXRhKTtcbiAgICB9XG4gICAgZ2V0Q29sdW1uV2lkdGgoKSB7XG4gICAgICAgIGlmICh0aGlzLmVxdWFsQ29sdW1uc1dpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7MTAwIC8gdGhpcy5nZXRDb2x1bW5zQ291bnQoKX0lYDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIGdldENlbGxMZXZlbChjZWxsLCBjb2x1bW5OYW1lKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRmlyc3RDb2x1bW4oY29sdW1uTmFtZSkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENlbGxDb250ZXh0KGNlbGwpLiRpbXBsaWNpdC5sZXZlbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTkJfREVGQVVMVF9ST1dfTEVWRUw7XG4gICAgfVxuICAgIGdldFJvd0NvbnRleHQocm93KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHRCeVJvd0VsKHJvdy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgICBnZXRDZWxsQ29udGV4dChjZWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbnRleHRCeUNlbGxFbChjZWxsLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCk7XG4gICAgfVxuICAgIGdldENvbnRleHRCeUNlbGxFbChjZWxsRWwpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29udGV4dEJ5Um93RWwoY2VsbEVsLnBhcmVudEVsZW1lbnQpO1xuICAgIH1cbiAgICBnZXRDb250ZXh0QnlSb3dFbChyb3dFbCkge1xuICAgICAgICBjb25zdCByb3dzQ29udGFpbmVyID0gdGhpcy5fcm93T3V0bGV0LnZpZXdDb250YWluZXI7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcm93c0NvbnRhaW5lci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3Qgcm93Vmlld1JlZiA9IHJvd3NDb250YWluZXIuZ2V0KGkpO1xuICAgICAgICAgICAgaWYgKHJvd1ZpZXdSZWYucm9vdE5vZGVzLmluY2x1ZGVzKHJvd0VsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb3dWaWV3UmVmLmNvbnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0Q29sdW1ucygpIHtcbiAgICAgICAgbGV0IHJvd0RlZjtcbiAgICAgICAgaWYgKHRoaXMuX2NvbnRlbnRIZWFkZXJSb3dEZWZzLmxlbmd0aCkge1xuICAgICAgICAgICAgcm93RGVmID0gdGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMuZmlyc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByb3dEZWYgPSB0aGlzLl9jb250ZW50Um93RGVmcy5maXJzdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShyb3dEZWYuZ2V0VmlzaWJsZUNvbHVtbnMoKSB8fCBbXSk7XG4gICAgfVxuICAgIGdldENvbHVtbnNDb3VudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29sdW1ucygpLmxlbmd0aDtcbiAgICB9XG4gICAgaXNGaXJzdENvbHVtbihjb2x1bW5OYW1lKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldENvbHVtbnMoKVswXSA9PT0gY29sdW1uTmFtZTtcbiAgICB9XG4gICAgY2hlY2tEZWZzQ291bnQoKSB7XG4gICAgICAgIGlmICh0aGlzLl9jb250ZW50Um93RGVmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIG11bHRpcGxlIHJvdyBkZWZpbml0aW9uc2ApO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9jb250ZW50SGVhZGVyUm93RGVmcy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEZvdW5kIG11bHRpcGxlIGhlYWRlciByb3cgZGVmaW5pdGlvbnNgKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5fY29udGVudEZvb3RlclJvd0RlZnMubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBGb3VuZCBtdWx0aXBsZSBmb290ZXIgcm93IGRlZmluaXRpb25zYCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdXBkYXRlVmlzaWJsZUNvbHVtbnMoKSB7XG4gICAgICAgIGNvbnN0IHdpZHRoID0gdGhpcy53aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgY29uc3QgY29sdW1uRGVmcyA9IHRoaXMuX2NvbnRlbnRDb2x1bW5EZWZzO1xuICAgICAgICBjb25zdCBjb2x1bW5zVG9IaWRlID0gY29sdW1uRGVmc1xuICAgICAgICAgICAgLmZpbHRlcigoY29sKSA9PiBjb2wuc2hvdWxkSGlkZSh3aWR0aCkpXG4gICAgICAgICAgICAubWFwKGNvbCA9PiBjb2wubmFtZSk7XG4gICAgICAgIGNvbnN0IGNvbHVtbnNUb1Nob3cgPSBjb2x1bW5EZWZzXG4gICAgICAgICAgICAuZmlsdGVyKChjb2wpID0+IGNvbC5zaG91bGRTaG93KHdpZHRoKSlcbiAgICAgICAgICAgIC5tYXAoY29sID0+IGNvbC5uYW1lKTtcbiAgICAgICAgaWYgKCFjb2x1bW5zVG9IaWRlLmxlbmd0aCAmJiAhY29sdW1uc1RvU2hvdy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByb3dEZWZzID0gW1xuICAgICAgICAgICAgdGhpcy5fY29udGVudEhlYWRlclJvd0RlZnMuZmlyc3QsXG4gICAgICAgICAgICB0aGlzLl9jb250ZW50Um93RGVmcy5maXJzdCxcbiAgICAgICAgICAgIHRoaXMuX2NvbnRlbnRGb290ZXJSb3dEZWZzLmZpcnN0LFxuICAgICAgICBdLmZpbHRlcihkID0+ICEhZCk7XG4gICAgICAgIGZvciAoY29uc3Qgcm93RGVmIG9mIHJvd0RlZnMpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgY29sdW1uIG9mIGNvbHVtbnNUb0hpZGUpIHtcbiAgICAgICAgICAgICAgICByb3dEZWYuaGlkZUNvbHVtbihjb2x1bW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCBjb2x1bW4gb2YgY29sdW1uc1RvU2hvdykge1xuICAgICAgICAgICAgICAgIHJvd0RlZi5zaG93Q29sdW1uKGNvbHVtbik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5OYlRyZWVHcmlkQ29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICd0YWJsZVtuYlRyZWVHcmlkXScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IE5CX1RBQkxFX1RFTVBMQVRFLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICAgICAgICAgICAgICB7IHByb3ZpZGU6IE5CX1RSRUVfR1JJRCwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDb21wb25lbnQgfSxcbiAgICAgICAgICAgICAgICAgICAgTmJDb2x1bW5zU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgLi4uTkJfVEFCTEVfUFJPVklERVJTLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHt0YWJsZS1sYXlvdXQ6Zml4ZWQ7Ym9yZGVyLXNwYWNpbmc6MDtib3JkZXItY29sbGFwc2U6Y29sbGFwc2U7d2lkdGg6MTAwJTttYXgtd2lkdGg6MTAwJTtvdmVyZmxvdzphdXRvfTo6bmctZGVlcCAubmItdHJlZS1ncmlkLWNlbGwsOjpuZy1kZWVwIC5uYi10cmVlLWdyaWQtaGVhZGVyLWNlbGwsOjpuZy1kZWVwIC5uYi10cmVlLWdyaWQtZm9vdGVyLWNlbGx7b3ZlcmZsb3c6aGlkZGVufVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyIH0sXG4gICAgeyB0eXBlOiBJdGVyYWJsZURpZmZlcnMgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBTdHJpbmcsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEF0dHJpYnV0ZSwgYXJnczogWydyb2xlJyxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYkRpcmVjdGlvbmFsaXR5IH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0RPQ1VNRU5ULF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iUGxhdGZvcm0gfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfV0lORE9XLF0gfV0gfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfVklFV19SRVBFQVRFUl9TVFJBVEVHWSxdIH1dIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX0NPQUxFU0NFRF9TVFlMRV9TQ0hFRFVMRVIsXSB9XSB9LFxuICAgIHsgdHlwZTogTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciB9LFxuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBPcHRpb25hbCB9LCB7IHR5cGU6IFNraXBTZWxmIH0sIHsgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfU1RJQ0tZX1BPU0lUSU9OSU5HX0xJU1RFTkVSLF0gfV0gfVxuXTtcbk5iVHJlZUdyaWRDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgc291cmNlOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRyZWVHcmlkJyxdIH1dLFxuICAgIGxldmVsUGFkZGluZzogW3sgdHlwZTogSW5wdXQgfV0sXG4gICAgZXF1YWxDb2x1bW5zV2lkdGg6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRyZWVDbGFzczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MubmItdHJlZS1ncmlkJyxdIH1dXG59O1xuXG4vKipcbiAqIERhdGEgcm93IGRlZmluaXRpb24gZm9yIHRoZSB0cmVlLWdyaWQuXG4gKiBDYXB0dXJlcyB0aGUgaGVhZGVyIHJvdydzIHRlbXBsYXRlIGFuZCBjb2x1bW5zIHRvIGRpc3BsYXkuXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUgZXh0ZW5kcyBOYlJvd0RlZkRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUsIGRpZmZlcnMsIGNvbHVtbnNTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLCBkaWZmZXJzKTtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZSA9IGNvbHVtbnNTZXJ2aWNlO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIHN1cGVyLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICBpZiAoY2hhbmdlc1snY29sdW1ucyddKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbnModGhpcy5jb2x1bW5zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5zZXRDb2x1bW5zKGNvbHVtbnMpO1xuICAgIH1cbiAgICBnZXRWaXNpYmxlQ29sdW1ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uc1NlcnZpY2UuZ2V0VmlzaWJsZUNvbHVtbnMoKTtcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBoaWRlQ29sdW1uKGNvbHVtbikge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLmhpZGVDb2x1bW4oY29sdW1uKTtcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBzaG93Q29sdW1uKGNvbHVtbikge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLnNob3dDb2x1bW4oY29sdW1uKTtcbiAgICB9XG59XG5OYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZFJvd0RlZl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkUm93RGVmRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfSxcbiAgICB7IHR5cGU6IEl0ZXJhYmxlRGlmZmVycyB9LFxuICAgIHsgdHlwZTogTmJDb2x1bW5zU2VydmljZSB9XG5dO1xuTmJUcmVlR3JpZFJvd0RlZkRpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBjb2x1bW5zOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRyZWVHcmlkUm93RGVmQ29sdW1ucycsXSB9XVxufTtcbmNsYXNzIE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUgZXh0ZW5kcyBOYkhlYWRlclJvd0RlZkRpcmVjdGl2ZSB7XG4gICAgY29uc3RydWN0b3IodGVtcGxhdGUsIGRpZmZlcnMsIGNvbHVtbnNTZXJ2aWNlKSB7XG4gICAgICAgIHN1cGVyKHRlbXBsYXRlLCBkaWZmZXJzKTtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZSA9IGNvbHVtbnNTZXJ2aWNlO1xuICAgIH1cbiAgICBuZ09uQ2hhbmdlcyhjaGFuZ2VzKSB7XG4gICAgICAgIHN1cGVyLm5nT25DaGFuZ2VzKGNoYW5nZXMpO1xuICAgICAgICBpZiAoY2hhbmdlc1snY29sdW1ucyddKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbHVtbnModGhpcy5jb2x1bW5zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1cGRhdGVDb2x1bW5zKGNvbHVtbnMpIHtcbiAgICAgICAgdGhpcy5jb2x1bW5zU2VydmljZS5zZXRDb2x1bW5zKGNvbHVtbnMpO1xuICAgIH1cbiAgICBnZXRWaXNpYmxlQ29sdW1ucygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sdW1uc1NlcnZpY2UuZ2V0VmlzaWJsZUNvbHVtbnMoKTtcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBoaWRlQ29sdW1uKGNvbHVtbikge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLmhpZGVDb2x1bW4oY29sdW1uKTtcbiAgICB9XG4gICAgLyoqIEBkb2NzLXByaXZhdGUgKi9cbiAgICBzaG93Q29sdW1uKGNvbHVtbikge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLnNob3dDb2x1bW4oY29sdW1uKTtcbiAgICB9XG59XG5OYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZEhlYWRlclJvd0RlZl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtIZWFkZXJSb3dEZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlLmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogVGVtcGxhdGVSZWYgfSxcbiAgICB7IHR5cGU6IEl0ZXJhYmxlRGlmZmVycyB9LFxuICAgIHsgdHlwZTogTmJDb2x1bW5zU2VydmljZSB9XG5dO1xuTmJUcmVlR3JpZEhlYWRlclJvd0RlZkRpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBjb2x1bW5zOiBbeyB0eXBlOiBJbnB1dCwgYXJnczogWyduYlRyZWVHcmlkSGVhZGVyUm93RGVmJyxdIH1dXG59O1xuY2xhc3MgTmJUcmVlR3JpZEZvb3RlclJvd0RlZkRpcmVjdGl2ZSBleHRlbmRzIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcih0ZW1wbGF0ZSwgZGlmZmVycywgY29sdW1uc1NlcnZpY2UpIHtcbiAgICAgICAgc3VwZXIodGVtcGxhdGUsIGRpZmZlcnMpO1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlID0gY29sdW1uc1NlcnZpY2U7XG4gICAgfVxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXMpIHtcbiAgICAgICAgc3VwZXIubmdPbkNoYW5nZXMoY2hhbmdlcyk7XG4gICAgICAgIGlmIChjaGFuZ2VzWydjb2x1bW5zJ10pIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29sdW1ucyh0aGlzLmNvbHVtbnMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVwZGF0ZUNvbHVtbnMoY29sdW1ucykge1xuICAgICAgICB0aGlzLmNvbHVtbnNTZXJ2aWNlLnNldENvbHVtbnMoY29sdW1ucyk7XG4gICAgfVxuICAgIGdldFZpc2libGVDb2x1bW5zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb2x1bW5zU2VydmljZS5nZXRWaXNpYmxlQ29sdW1ucygpO1xuICAgIH1cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIGhpZGVDb2x1bW4oY29sdW1uKSB7XG4gICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2UuaGlkZUNvbHVtbihjb2x1bW4pO1xuICAgIH1cbiAgICAvKiogQGRvY3MtcHJpdmF0ZSAqL1xuICAgIHNob3dDb2x1bW4oY29sdW1uKSB7XG4gICAgICAgIHRoaXMuY29sdW1uc1NlcnZpY2Uuc2hvd0NvbHVtbihjb2x1bW4pO1xuICAgIH1cbn1cbk5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRyZWVHcmlkRm9vdGVyUm93RGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0Zvb3RlclJvd0RlZiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBUZW1wbGF0ZVJlZiB9LFxuICAgIHsgdHlwZTogSXRlcmFibGVEaWZmZXJzIH0sXG4gICAgeyB0eXBlOiBOYkNvbHVtbnNTZXJ2aWNlIH1cbl07XG5OYlRyZWVHcmlkRm9vdGVyUm93RGVmRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNvbHVtbnM6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVHJlZUdyaWRGb290ZXJSb3dEZWYnLF0gfV1cbn07XG4vKipcbiAqIENlbGwgZGVmaW5pdGlvbiBmb3IgYSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGRhdGEgcm93IGNlbGwgYXMgd2VsbCBhcyBjZWxsLXNwZWNpZmljIHByb3BlcnRpZXMuXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlIGV4dGVuZHMgTmJDZWxsRGVmRGlyZWN0aXZlIHtcbn1cbk5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJUcmVlR3JpZENlbGxEZWZdJyxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrQ2VsbERlZiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG4vKipcbiAqIEhlYWRlciBjZWxsIGRlZmluaXRpb24gZm9yIHRoZSBuYi10YWJsZS5cbiAqIENhcHR1cmVzIHRoZSB0ZW1wbGF0ZSBvZiBhIGNvbHVtbidzIGhlYWRlciBjZWxsIGFuZCBhcyB3ZWxsIGFzIGNlbGwtc3BlY2lmaWMgcHJvcGVydGllcy5cbiAqL1xuY2xhc3MgTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUgZXh0ZW5kcyBOYkhlYWRlckNlbGxEZWZEaXJlY3RpdmUge1xufVxuTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRyZWVHcmlkSGVhZGVyQ2VsbERlZl0nLFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtIZWFkZXJDZWxsRGVmLCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbi8qKlxuICogRm9vdGVyIGNlbGwgZGVmaW5pdGlvbiBmb3IgdGhlIG5iLXRhYmxlLlxuICogQ2FwdHVyZXMgdGhlIHRlbXBsYXRlIG9mIGEgY29sdW1uJ3MgZm9vdGVyIGNlbGwgYW5kIGFzIHdlbGwgYXMgY2VsbC1zcGVjaWZpYyBwcm9wZXJ0aWVzLlxuICovXG5jbGFzcyBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSBleHRlbmRzIE5iRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSB7XG59XG5OYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iVHJlZUdyaWRGb290ZXJDZWxsRGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0Zvb3RlckNlbGxEZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkRm9vdGVyQ2VsbERlZkRpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG5jb25zdCBOQl9ST1dfRE9VQkxFX0NMSUNLX0RFTEFZID0gMjAwO1xuLyoqXG4gKiBDZWxscyBjb250YWluZXIuIEFkZHMgdGhlIHJpZ2h0IGNsYXNzIGFuZCByb2xlLlxuICovXG5jbGFzcyBOYlRyZWVHcmlkUm93Q29tcG9uZW50IGV4dGVuZHMgTmJSb3dDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKHRyZWUsIGVsZW1lbnRSZWYpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICAgICAgdGhpcy5kb3VibGVDbGljayQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICAvKipcbiAgICAgICAgICogVGltZSB0byB3YWl0IGZvciBzZWNvbmQgY2xpY2sgdG8gZXhwYW5kIHJvdyBkZWVwbHkuXG4gICAgICAgICAqIDIwMG1zIGJ5IGRlZmF1bHQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRvdWJsZUNsaWNrRGVsYXkgPSBOQl9ST1dfRE9VQkxFX0NMSUNLX0RFTEFZO1xuICAgICAgICAvKipcbiAgICAgICAgICogVG9nZ2xlIHJvdyBvbiBjbGljay4gRW5hYmxlZCBieSBkZWZhdWx0LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jbGlja1RvVG9nZ2xlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICB9XG4gICAgdG9nZ2xlSWZFbmFibGVkTm9kZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmNsaWNrVG9Ub2dnbGUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aW1lcihOQl9ST1dfRE9VQkxFX0NMSUNLX0RFTEFZKVxuICAgICAgICAgICAgLnBpcGUodGFrZSgxKSwgdGFrZVVudGlsKHRoaXMuZG91YmxlQ2xpY2skKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy50cmVlLnRvZ2dsZVJvdyh0aGlzKSk7XG4gICAgfVxuICAgIHRvZ2dsZUlmRW5hYmxlZE5vZGVEZWVwKCkge1xuICAgICAgICBpZiAoIXRoaXMuY2xpY2tUb1RvZ2dsZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZG91YmxlQ2xpY2skLm5leHQoKTtcbiAgICAgICAgdGhpcy50cmVlLnRvZ2dsZVJvdyh0aGlzLCB7IGRlZXA6IHRydWUgfSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRvdWJsZUNsaWNrJC5jb21wbGV0ZSgpO1xuICAgIH1cbn1cbk5iVHJlZUdyaWRSb3dDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ3RyW25iVHJlZUdyaWRSb3ddJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYDxuZy1jb250YWluZXIgbmJDZWxsT3V0bGV0PjwvbmctY29udGFpbmVyPmAsXG4gICAgICAgICAgICAgICAgaG9zdDoge1xuICAgICAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmItdHJlZS1ncmlkLXJvdycsXG4gICAgICAgICAgICAgICAgICAgICdyb2xlJzogJ3JvdycsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrUm93LCB1c2VFeGlzdGluZzogTmJUcmVlR3JpZFJvd0NvbXBvbmVudCB9XVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkUm93Q29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogdW5kZWZpbmVkLCBkZWNvcmF0b3JzOiBbeyB0eXBlOiBJbmplY3QsIGFyZ3M6IFtOQl9UUkVFX0dSSUQsXSB9XSB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9XG5dO1xuTmJUcmVlR3JpZFJvd0NvbXBvbmVudC5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBkb3VibGVDbGlja0RlbGF5OiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBjbGlja1RvVG9nZ2xlOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICB0b2dnbGVJZkVuYWJsZWROb2RlOiBbeyB0eXBlOiBIb3N0TGlzdGVuZXIsIGFyZ3M6IFsnY2xpY2snLF0gfV0sXG4gICAgdG9nZ2xlSWZFbmFibGVkTm9kZURlZXA6IFt7IHR5cGU6IEhvc3RMaXN0ZW5lciwgYXJnczogWydkYmxjbGljaycsXSB9XVxufTtcbmNsYXNzIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQgZXh0ZW5kcyBOYkhlYWRlclJvd0NvbXBvbmVudCB7XG59XG5OYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICd0cltuYlRyZWVHcmlkSGVhZGVyUm93XScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5gLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1oZWFkZXItcm93JyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAncm93JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtIZWFkZXJSb3csIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50IH1dXG4gICAgICAgICAgICB9LF0gfVxuXTtcbmNsYXNzIE5iVHJlZUdyaWRGb290ZXJSb3dDb21wb25lbnQgZXh0ZW5kcyBOYkZvb3RlclJvd0NvbXBvbmVudCB7XG59XG5OYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50LmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBDb21wb25lbnQsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICd0cltuYlRyZWVHcmlkRm9vdGVyUm93XScsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IGBcbiAgICA8bmctY29udGFpbmVyIG5iQ2VsbE91dGxldD48L25nLWNvbnRhaW5lcj5gLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1mb290ZXItcm93JyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAncm93JyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogTmJDZGtGb290ZXJSb3csIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50IH1dXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBDb2x1bW4gZGVmaW5pdGlvbiBmb3IgdGhlIHRyZWUtZ3JpZC5cbiAqIERlZmluZXMgYSBzZXQgb2YgY2VsbHMgYXZhaWxhYmxlIGZvciBhIHRhYmxlIGNvbHVtbi5cbiAqL1xuY2xhc3MgTmJUcmVlR3JpZENvbHVtbkRlZkRpcmVjdGl2ZSBleHRlbmRzIE5iQ29sdW1uRGVmRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5oaWRlT25WYWx1ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hvd09uVmFsdWUgPSBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb2x1bW4gbmFtZVxuICAgICAqL1xuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcbiAgICB9XG4gICAgc2V0IG5hbWUodmFsdWUpIHtcbiAgICAgICAgdGhpcy5fc2V0TmFtZUlucHV0KHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQW1vdW50IG9mIHBpeGVscyBvZiB2aWV3cG9ydCBhdCB3aGljaCBjb2x1bW4gc2hvdWxkIGJlIGhpZGRlbi5cbiAgICAgKiB0eXBlIG51bWJlclxuICAgICAqL1xuICAgIGdldCBoaWRlT24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhpZGVPblZhbHVlO1xuICAgIH1cbiAgICBzZXQgaGlkZU9uKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGlkZU9uVmFsdWUgPSAhdmFsdWUgJiYgdmFsdWUgIT09IDBcbiAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgOiBwYXJzZUludCh2YWx1ZSwgMTApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbW91bnQgb2YgcGl4ZWxzIG9mIHZpZXdwb3J0IGF0IHdoaWNoIGNvbHVtbiBzaG91bGQgYmUgc2hvd24uXG4gICAgICogdHlwZSBudW1iZXJcbiAgICAgKi9cbiAgICBnZXQgc2hvd09uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zaG93T25WYWx1ZTtcbiAgICB9XG4gICAgc2V0IHNob3dPbih2YWx1ZSkge1xuICAgICAgICB0aGlzLnNob3dPblZhbHVlID0gIXZhbHVlICYmIHZhbHVlICE9PSAwXG4gICAgICAgICAgICA/IG51bGxcbiAgICAgICAgICAgIDogcGFyc2VJbnQodmFsdWUsIDEwKTtcbiAgICB9XG4gICAgbmdPbkNoYW5nZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmhpZGVPbiAhPSBudWxsICYmIHRoaXMuc2hvd09uICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgaGlkZU9uIGFuZCBzaG93T24gYXJlIG11dHVhbGx5IGV4Y2x1c2l2ZSBhbmQgY2FuJ3QgYmUgdXNlZCBzaW11bHRhbmVvdXNseS5gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzaG91bGRIaWRlKHdpZHRoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5zaG91bGRTaG93KHdpZHRoKTtcbiAgICB9XG4gICAgc2hvdWxkU2hvdyh3aWR0aCkge1xuICAgICAgICBpZiAodGhpcy5oaWRlT24gPT0gbnVsbCAmJiB0aGlzLnNob3dPbiA9PSBudWxsKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oaWRlT24gIT0gbnVsbCkge1xuICAgICAgICAgICAgcmV0dXJuIHdpZHRoID4gdGhpcy5oaWRlT247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdpZHRoID49IHRoaXMuc2hvd09uO1xuICAgIH1cbn1cbk5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYlRyZWVHcmlkQ29sdW1uRGVmXScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTmJDZGtDb2x1bW5EZWYsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgICAgICAgICAgICAgICAgIHsgcHJvdmlkZTogTkJfU09SVF9IRUFERVJfQ09MVU1OX0RFRiwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUgfSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIG5hbWU6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iVHJlZUdyaWRDb2x1bW5EZWYnLF0gfV0sXG4gICAgaGlkZU9uOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzaG93T246IFt7IHR5cGU6IElucHV0IH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNsYXNzIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlIGV4dGVuZHMgTmJDZWxsRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3Rvcihjb2x1bW5EZWYsIGVsZW1lbnRSZWYsIHRyZWUsIHBsYXRmb3JtSWQsIHdpbmRvdywgc2FuaXRpemVyLCBkaXJlY3Rpb25TZXJ2aWNlLCBjb2x1bW5TZXJ2aWNlLCBjZCkge1xuICAgICAgICBzdXBlcihjb2x1bW5EZWYsIGVsZW1lbnRSZWYpO1xuICAgICAgICB0aGlzLnBsYXRmb3JtSWQgPSBwbGF0Zm9ybUlkO1xuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcbiAgICAgICAgdGhpcy5zYW5pdGl6ZXIgPSBzYW5pdGl6ZXI7XG4gICAgICAgIHRoaXMuZGlyZWN0aW9uU2VydmljZSA9IGRpcmVjdGlvblNlcnZpY2U7XG4gICAgICAgIHRoaXMuY29sdW1uU2VydmljZSA9IGNvbHVtblNlcnZpY2U7XG4gICAgICAgIHRoaXMuY2QgPSBjZDtcbiAgICAgICAgdGhpcy5kZXN0cm95JCA9IG5ldyBTdWJqZWN0KCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbExlZnRQYWRkaW5nID0gJyc7XG4gICAgICAgIHRoaXMuaW5pdGlhbFJpZ2h0UGFkZGluZyA9ICcnO1xuICAgICAgICB0aGlzLnRyZWUgPSB0cmVlO1xuICAgICAgICB0aGlzLmNvbHVtbkRlZiA9IGNvbHVtbkRlZjtcbiAgICAgICAgdGhpcy5lbGVtZW50UmVmID0gZWxlbWVudFJlZjtcbiAgICB9XG4gICAgZ2V0IGNvbHVtbldpZHRoKCkge1xuICAgICAgICB0aGlzLmxhdGVzdFdpZHRoID0gdGhpcy50cmVlLmdldENvbHVtbldpZHRoKCk7XG4gICAgICAgIGlmICh0aGlzLmxhdGVzdFdpZHRoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXRlc3RXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGxlZnRQYWRkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmlzTHRyKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJ0UGFkZGluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXQgcmlnaHRQYWRkaW5nKCkge1xuICAgICAgICBpZiAodGhpcy5kaXJlY3Rpb25TZXJ2aWNlLmlzUnRsKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFN0YXJ0UGFkZGluZygpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHN0eWxlJCQxID0gdGhpcy53aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCk7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxMZWZ0UGFkZGluZyA9IHN0eWxlJCQxLnBhZGRpbmdMZWZ0O1xuICAgICAgICAgICAgdGhpcy5pbml0aWFsUmlnaHRQYWRkaW5nID0gc3R5bGUkJDEucGFkZGluZ1JpZ2h0O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY29sdW1uU2VydmljZS5vbkNvbHVtbnNDaGFuZ2UoKVxuICAgICAgICAgICAgLnBpcGUoZmlsdGVyKCgpID0+IHRoaXMubGF0ZXN0V2lkdGggIT09IHRoaXMudHJlZS5nZXRDb2x1bW5XaWR0aCgpKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB0aGlzLmNkLmRldGVjdENoYW5nZXMoKSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5jb21wbGV0ZSgpO1xuICAgIH1cbiAgICB0b2dnbGVSb3coKSB7XG4gICAgICAgIHRoaXMudHJlZS50b2dnbGVDZWxsUm93KHRoaXMpO1xuICAgIH1cbiAgICBnZXQgaW5pdGlhbFN0YXJ0UGFkZGluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGlyZWN0aW9uU2VydmljZS5pc0x0cigpXG4gICAgICAgICAgICA/IHRoaXMuaW5pdGlhbExlZnRQYWRkaW5nXG4gICAgICAgICAgICA6IHRoaXMuaW5pdGlhbFJpZ2h0UGFkZGluZztcbiAgICB9XG4gICAgZ2V0U3RhcnRQYWRkaW5nKCkge1xuICAgICAgICBjb25zdCByb3dMZXZlbCA9IHRoaXMudHJlZS5nZXRDZWxsTGV2ZWwodGhpcywgdGhpcy5jb2x1bW5EZWYubmFtZSk7XG4gICAgICAgIGlmIChyb3dMZXZlbCA9PT0gTkJfREVGQVVMVF9ST1dfTEVWRUwpIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG5lc3RpbmdMZXZlbCA9IHJvd0xldmVsICsgMTtcbiAgICAgICAgbGV0IHBhZGRpbmcgPSAnJztcbiAgICAgICAgaWYgKHRoaXMudHJlZS5sZXZlbFBhZGRpbmcpIHtcbiAgICAgICAgICAgIHBhZGRpbmcgPSBgY2FsYygke3RoaXMudHJlZS5sZXZlbFBhZGRpbmd9ICogJHtuZXN0aW5nTGV2ZWx9KWA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5pbml0aWFsU3RhcnRQYWRkaW5nKSB7XG4gICAgICAgICAgICBwYWRkaW5nID0gYGNhbGMoJHt0aGlzLmluaXRpYWxTdGFydFBhZGRpbmd9ICogJHtuZXN0aW5nTGV2ZWx9KWA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFwYWRkaW5nKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zYW5pdGl6ZXIuYnlwYXNzU2VjdXJpdHlUcnVzdFN0eWxlKHBhZGRpbmcpO1xuICAgIH1cbn1cbk5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICd0ZFtuYlRyZWVHcmlkQ2VsbF0nLFxuICAgICAgICAgICAgICAgIGhvc3Q6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NsYXNzJzogJ25iLXRyZWUtZ3JpZC1jZWxsJyxcbiAgICAgICAgICAgICAgICAgICAgJ3JvbGUnOiAnZ3JpZGNlbGwnLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0NlbGwsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX1RSRUVfR1JJRCxdIH1dIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW1BMQVRGT1JNX0lELF0gfV0gfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfV0lORE9XLF0gfV0gfSxcbiAgICB7IHR5cGU6IERvbVNhbml0aXplciB9LFxuICAgIHsgdHlwZTogTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBOYkNvbHVtbnNTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9XG5dO1xuTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29sdW1uV2lkdGg6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ3N0eWxlLndpZHRoJyxdIH1dLFxuICAgIGxlZnRQYWRkaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydzdHlsZS5wYWRkaW5nLWxlZnQnLF0gfV0sXG4gICAgcmlnaHRQYWRkaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydzdHlsZS5wYWRkaW5nLXJpZ2h0JyxdIH1dXG59O1xuY2xhc3MgTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmUgZXh0ZW5kcyBOYkhlYWRlckNlbGxEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGNvbHVtbkRlZiwgZWxlbWVudFJlZiwgdHJlZSwgY29sdW1uU2VydmljZSwgY2QpIHtcbiAgICAgICAgc3VwZXIoY29sdW1uRGVmLCBlbGVtZW50UmVmKTtcbiAgICAgICAgdGhpcy5jb2x1bW5TZXJ2aWNlID0gY29sdW1uU2VydmljZTtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICB9XG4gICAgZ2V0IGNvbHVtbldpZHRoKCkge1xuICAgICAgICB0aGlzLmxhdGVzdFdpZHRoID0gdGhpcy50cmVlLmdldENvbHVtbldpZHRoKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxhdGVzdFdpZHRoIHx8IG51bGw7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmNvbHVtblNlcnZpY2Uub25Db2x1bW5zQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLmxhdGVzdFdpZHRoICE9PSB0aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG59XG5OYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAndGhbbmJUcmVlR3JpZEhlYWRlckNlbGxdJyxcbiAgICAgICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi10cmVlLWdyaWQtaGVhZGVyLWNlbGwnLFxuICAgICAgICAgICAgICAgICAgICAncm9sZSc6ICdjb2x1bW5oZWFkZXInLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkNka0hlYWRlckNlbGwsIHVzZUV4aXN0aW5nOiBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZSB9XSxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmUuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBOYlRyZWVHcmlkQ29sdW1uRGVmRGlyZWN0aXZlIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiB1bmRlZmluZWQsIGRlY29yYXRvcnM6IFt7IHR5cGU6IEluamVjdCwgYXJnczogW05CX1RSRUVfR1JJRCxdIH1dIH0sXG4gICAgeyB0eXBlOiBOYkNvbHVtbnNTZXJ2aWNlIH0sXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9XG5dO1xuTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgY29sdW1uV2lkdGg6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ3N0eWxlLndpZHRoJyxdIH1dXG59O1xuY2xhc3MgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmUgZXh0ZW5kcyBOYkZvb3RlckNlbGxEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKGNvbHVtbkRlZiwgZWxlbWVudFJlZiwgdHJlZSwgY29sdW1uU2VydmljZSwgY2QpIHtcbiAgICAgICAgc3VwZXIoY29sdW1uRGVmLCBlbGVtZW50UmVmKTtcbiAgICAgICAgdGhpcy5jb2x1bW5TZXJ2aWNlID0gY29sdW1uU2VydmljZTtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgdGhpcy50cmVlID0gdHJlZTtcbiAgICB9XG4gICAgZ2V0IGNvbHVtbldpZHRoKCkge1xuICAgICAgICB0aGlzLmxhdGVzdFdpZHRoID0gdGhpcy50cmVlLmdldENvbHVtbldpZHRoKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxhdGVzdFdpZHRoIHx8IG51bGw7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmNvbHVtblNlcnZpY2Uub25Db2x1bW5zQ2hhbmdlKClcbiAgICAgICAgICAgIC5waXBlKGZpbHRlcigoKSA9PiB0aGlzLmxhdGVzdFdpZHRoICE9PSB0aGlzLnRyZWUuZ2V0Q29sdW1uV2lkdGgoKSksIHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jZC5kZXRlY3RDaGFuZ2VzKCkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG59XG5OYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAndGRbbmJUcmVlR3JpZEZvb3RlckNlbGxdJyxcbiAgICAgICAgICAgICAgICBob3N0OiB7XG4gICAgICAgICAgICAgICAgICAgICdjbGFzcyc6ICduYi10cmVlLWdyaWQtZm9vdGVyLWNlbGwnLFxuICAgICAgICAgICAgICAgICAgICAncm9sZSc6ICdncmlkY2VsbCcsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFt7IHByb3ZpZGU6IE5iQ2RrRm9vdGVyQ2VsbCwgdXNlRXhpc3Rpbmc6IE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlIH1dLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUgfSxcbiAgICB7IHR5cGU6IEVsZW1lbnRSZWYgfSxcbiAgICB7IHR5cGU6IHVuZGVmaW5lZCwgZGVjb3JhdG9yczogW3sgdHlwZTogSW5qZWN0LCBhcmdzOiBbTkJfVFJFRV9HUklELF0gfV0gfSxcbiAgICB7IHR5cGU6IE5iQ29sdW1uc1NlcnZpY2UgfSxcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH1cbl07XG5OYlRyZWVHcmlkRm9vdGVyQ2VsbERpcmVjdGl2ZS5wcm9wRGVjb3JhdG9ycyA9IHtcbiAgICBjb2x1bW5XaWR0aDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnc3R5bGUud2lkdGgnLF0gfV1cbn07XG5cbi8qXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY2xhc3MgTmJGaWx0ZXJEaXJlY3RpdmUge1xuICAgIGZpbHRlcihmaWx0ZXJSZXF1ZXN0KSB7XG4gICAgICAgIHRoaXMuZmlsdGVyYWJsZS5maWx0ZXIoZmlsdGVyUmVxdWVzdCk7XG4gICAgfVxufVxuTmJGaWx0ZXJEaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3sgc2VsZWN0b3I6ICdbbmJGaWx0ZXJdJyB9LF0gfVxuXTtcbk5iRmlsdGVyRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGZpbHRlcmFibGU6IFt7IHR5cGU6IElucHV0LCBhcmdzOiBbJ25iRmlsdGVyJyxdIH1dXG59O1xuLyoqXG4gKiBIZWxwZXIgZGlyZWN0aXZlIHRvIHRyaWdnZXIgZGF0YSBzb3VyY2UncyBmaWx0ZXIgbWV0aG9kIHdoZW4gdXNlciB0eXBlcyBpbiBpbnB1dFxuICovXG5jbGFzcyBOYkZpbHRlcklucHV0RGlyZWN0aXZlIGV4dGVuZHMgTmJGaWx0ZXJEaXJlY3RpdmUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xuICAgICAgICB0aGlzLnNlYXJjaCQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3kkID0gbmV3IFN1YmplY3QoKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIERlYm91bmNlIHRpbWUgYmVmb3JlIHRyaWdnZXJpbmcgZmlsdGVyIG1ldGhvZC4gU2V0IGluIG1pbGxpc2Vjb25kcy5cbiAgICAgICAgICogRGVmYXVsdCAyMDAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRlYm91bmNlVGltZSA9IDIwMDtcbiAgICB9XG4gICAgbmdPbkluaXQoKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoJFxuICAgICAgICAgICAgLnBpcGUoZGVib3VuY2VUaW1lKHRoaXMuZGVib3VuY2VUaW1lKSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgocXVlcnkpID0+IHtcbiAgICAgICAgICAgIHN1cGVyLmZpbHRlcihxdWVyeSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5zZWFyY2gkLmNvbXBsZXRlKCk7XG4gICAgfVxuICAgIGZpbHRlcihldmVudCkge1xuICAgICAgICB0aGlzLnNlYXJjaCQubmV4dChldmVudC50YXJnZXQudmFsdWUpO1xuICAgIH1cbn1cbk5iRmlsdGVySW5wdXREaXJlY3RpdmUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IERpcmVjdGl2ZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ1tuYkZpbHRlcklucHV0XScsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbeyBwcm92aWRlOiBOYkZpbHRlckRpcmVjdGl2ZSwgdXNlRXhpc3Rpbmc6IE5iRmlsdGVySW5wdXREaXJlY3RpdmUgfV0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcbk5iRmlsdGVySW5wdXREaXJlY3RpdmUucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZmlsdGVyYWJsZTogW3sgdHlwZTogSW5wdXQsIGFyZ3M6IFsnbmJGaWx0ZXJJbnB1dCcsXSB9XSxcbiAgICBkZWJvdW5jZVRpbWU6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGZpbHRlcjogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2lucHV0JywgWyckZXZlbnQnXSxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogV2hlbiB1c2luZyBjdXN0b20gcm93IHRvZ2dsZSwgYXBwbHkgdGhpcyBkaXJlY3RpdmUgb24geW91ciB0b2dnbGUgdG8gdG9nZ2xlIHJvdyBvbiBlbGVtZW50IGNsaWNrLlxuICovXG5jbGFzcyBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlIHtcbiAgICBjb25zdHJ1Y3RvcihjZWxsKSB7XG4gICAgICAgIHRoaXMuY2VsbCA9IGNlbGw7XG4gICAgfVxuICAgIHRvZ2dsZVJvdygkZXZlbnQpIHtcbiAgICAgICAgdGhpcy5jZWxsLnRvZ2dsZVJvdygpO1xuICAgICAgICAkZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxufVxuTmJUcmVlR3JpZFJvd1RvZ2dsZURpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iVHJlZUdyaWRSb3dUb2dnbGVdJyxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJUcmVlR3JpZFJvd1RvZ2dsZURpcmVjdGl2ZS5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlIH1cbl07XG5OYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlLnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHRvZ2dsZVJvdzogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJywgWyckZXZlbnQnXSxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8qKlxuICogTmJUcmVlR3JpZFJvd1RvZ2dsZUNvbXBvbmVudFxuICovXG5jbGFzcyBOYlRyZWVHcmlkUm93VG9nZ2xlQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZWxsKSB7XG4gICAgICAgIHRoaXMuY2VsbCA9IGNlbGw7XG4gICAgfVxuICAgIHNldCBleHBhbmRlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZGVkVmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGV4cGFuZGVkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5leHBhbmRlZFZhbHVlO1xuICAgIH1cbiAgICB0b2dnbGVSb3coJGV2ZW50KSB7XG4gICAgICAgIHRoaXMuY2VsbC50b2dnbGVSb3coKTtcbiAgICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbn1cbk5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRyZWUtZ3JpZC1yb3ctdG9nZ2xlJyxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogYFxuICAgIDxidXR0b24gY2xhc3M9XCJyb3ctdG9nZ2xlLWJ1dHRvblwiIFthdHRyLmFyaWEtbGFiZWxdPVwiZXhwYW5kZWQgPyAnY29sbGFwc2UnIDogJ2V4cGFuZCdcIj5cbiAgICAgIDxuYi1pY29uIFtpY29uXT1cImV4cGFuZGVkID8gJ2NoZXZyb24tZG93bi1vdXRsaW5lJyA6ICdjaGV2cm9uLXJpZ2h0LW91dGxpbmUnXCJcbiAgICAgICAgICAgICAgIHBhY2s9XCJuZWJ1bGFyLWVzc2VudGlhbHNcIlxuICAgICAgICAgICAgICAgYXJpYS1oaWRkZW49XCJ0cnVlXCI+XG4gICAgICA8L25iLWljb24+XG4gICAgPC9idXR0b24+XG4gIGAsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbYFxuICAgIGJ1dHRvbiB7XG4gICAgICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgICAgIGJvcmRlcjogbm9uZTtcbiAgICAgIHBhZGRpbmc6IDA7XG4gICAgfVxuICBgXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRyZWVHcmlkUm93VG9nZ2xlQ29tcG9uZW50LmN0b3JQYXJhbWV0ZXJzID0gKCkgPT4gW1xuICAgIHsgdHlwZTogTmJUcmVlR3JpZENlbGxEaXJlY3RpdmUgfVxuXTtcbk5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQucHJvcERlY29yYXRvcnMgPSB7XG4gICAgZXhwYW5kZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIHRvZ2dsZVJvdzogW3sgdHlwZTogSG9zdExpc3RlbmVyLCBhcmdzOiBbJ2NsaWNrJywgWyckZXZlbnQnXSxdIH1dXG59O1xuXG4vKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbmNvbnN0IENPTVBPTkVOVFMkMiA9IFtcbiAgICAvLyBUcmVlIEdyaWRcbiAgICBOYlRyZWVHcmlkQ29tcG9uZW50LFxuICAgIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZFJvd0NvbXBvbmVudCxcbiAgICBOYlRyZWVHcmlkQ2VsbERlZkRpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkQ2VsbERpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkSGVhZGVyUm93RGVmRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRIZWFkZXJSb3dDb21wb25lbnQsXG4gICAgTmJUcmVlR3JpZEhlYWRlckNlbGxEZWZEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZEhlYWRlckNlbGxEaXJlY3RpdmUsXG4gICAgTmJUcmVlR3JpZEZvb3RlclJvd0RlZkRpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50LFxuICAgIE5iVHJlZUdyaWRGb290ZXJDZWxsRGVmRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRGb290ZXJDZWxsRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUsXG4gICAgLy8gU29ydCBkaXJlY3RpdmVzXG4gICAgTmJTb3J0RGlyZWN0aXZlLFxuICAgIE5iU29ydEhlYWRlckNvbXBvbmVudCxcbiAgICBOYlNvcnRJY29uQ29tcG9uZW50LFxuICAgIC8vIEZpbHRlciBkaXJlY3RpdmVzXG4gICAgTmJGaWx0ZXJEaXJlY3RpdmUsXG4gICAgTmJGaWx0ZXJJbnB1dERpcmVjdGl2ZSxcbiAgICBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlLFxuICAgIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQsXG4gICAgTmJTb3J0SGVhZGVySWNvbkRpcmVjdGl2ZSxcbl07XG5jbGFzcyBOYlRyZWVHcmlkTW9kdWxlIHtcbn1cbk5iVHJlZUdyaWRNb2R1bGUuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IE5nTW9kdWxlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIE5iVGFibGVNb2R1bGUsIE5iSWNvbk1vZHVsZV0sXG4gICAgICAgICAgICAgICAgZGVjbGFyYXRpb25zOiBbLi4uQ09NUE9ORU5UUyQyXSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJUYWJsZU1vZHVsZSwgLi4uQ09NUE9ORU5UUyQyXSxcbiAgICAgICAgICAgICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAgICAgICAgICAgICAgTmJUcmVlR3JpZFNvcnRTZXJ2aWNlLFxuICAgICAgICAgICAgICAgICAgICBOYlRyZWVHcmlkRmlsdGVyU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTmJUcmVlR3JpZFNlcnZpY2UsXG4gICAgICAgICAgICAgICAgICAgIE5iVHJlZUdyaWREYXRhU2VydmljZSxcbiAgICAgICAgICAgICAgICAgICAgTmJUcmVlR3JpZERhdGFTb3VyY2VCdWlsZGVyLFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuLyoqXG4gKiBUb2dnbGUgaXMgYSBjb250cm9sIHJlcHJlc2VudGluZyBgb25gIGFuZCBgb2ZmYCBzdGF0ZXMuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShTaG93Y2FzZSwgdG9nZ2xlL3RvZ2dsZS1zaG93Y2FzZS5jb21wb25lbnQpXG4gKlxuICogIyMjIEluc3RhbGxhdGlvblxuICpcbiAqIEltcG9ydCBgTmJUb2dnbGVDb21wb25lbnRgIHRvIHlvdXIgZmVhdHVyZSBtb2R1bGUuXG4gKiBgYGB0c1xuICogQE5nTW9kdWxlKHtcbiAqICAgaW1wb3J0czogW1xuICogICAgIC8vIC4uLlxuICogICAgIE5iVG9nZ2xlTW9kdWxlLFxuICogICBdLFxuICogfSlcbiAqIGV4cG9ydCBjbGFzcyBQYWdlTW9kdWxlIHsgfVxuICogYGBgXG4gKiAjIyMgVXNhZ2VcbiAqXG4gKiBUb2dnbGUgbWF5IGhhdmUgb25lIG9mIHRoZSBmb2xsb3dpbmcgc3RhdHVzZXM6IGBiYXNpY2AsIGBwcmltYXJ5YCwgYHN1Y2Nlc3NgLCBgd2FybmluZ2AsIGBkYW5nZXJgLCBgaW5mb2AsIGBjb250cm9sYFxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVG9nZ2xlIHN0YXR1cywgdG9nZ2xlL3RvZ2dsZS1zdGF0dXMuY29tcG9uZW50KVxuICpcbiAqIFRvZ2dsZSBjYW4gYmUgZGlzYWJsZWQgdmlhIGBkaXNhYmxlZGAgaW5wdXQuXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShEaXNhYmxlZCBUb2dnbGVzLCB0b2dnbGUvdG9nZ2xlLWRpc2FibGVkLmNvbXBvbmVudClcbiAqXG4gKiBUb2dnbGUgbWF5IGhhdmUgYSBsYWJlbCB3aXRoIGZvbGxvd2luZyBwb3NpdGlvbnM6IGBsZWZ0YCwgYHJpZ2h0YCwgYHN0YXJ0YCwgYGVuZGAgKGRlZmF1bHQpXG4gKlxuICogQHN0YWNrZWQtZXhhbXBsZShUb2dnbGVzIFdpdGggTGFiZWxzLCB0b2dnbGUvdG9nZ2xlLWxhYmVsLXBvc2l0aW9uLmNvbXBvbmVudC50cylcbiAqXG4gKiBZb3UgY2FuIHNldCBjb250cm9sIHN0YXRlIHZpYSBgY2hlY2tlZGAgYmluZGluZzpcbiAqXG4gKiBgYGBodG1sXG4gKiA8bmItdG9nZ2xlIFsoY2hlY2tlZCldPVwiY2hlY2tlZFwiPjwvbmItdG9nZ2xlPlxuICogYGBgXG4gKlxuICogT3IgaXQgY291bGQgYmUgc2V0IHZpYSByZWFjdGl2ZSBmb3JtcyBvciBuZ01vZGVsIGJpbmRpbmdzOlxuICpcbiAqIEBzdGFja2VkLWV4YW1wbGUoVG9nZ2xlIGZvcm0gYmluZGluZywgdG9nZ2xlL3RvZ2dsZS1mb3JtLmNvbXBvbmVudClcbiAqXG4gKiBAc3R5bGVzXG4gKlxuICogdG9nZ2xlLWhlaWdodDpcbiAqIHRvZ2dsZS13aWR0aDpcbiAqIHRvZ2dsZS1ib3JkZXItd2lkdGg6XG4gKiB0b2dnbGUtYm9yZGVyLXJhZGl1czpcbiAqIHRvZ2dsZS1vdXRsaW5lLXdpZHRoOlxuICogdG9nZ2xlLW91dGxpbmUtY29sb3I6XG4gKiB0b2dnbGUtc3dpdGNoZXItc2l6ZTpcbiAqIHRvZ2dsZS1zd2l0Y2hlci1pY29uLXNpemU6XG4gKiB0b2dnbGUtdGV4dC1mb250LWZhbWlseTpcbiAqIHRvZ2dsZS10ZXh0LWZvbnQtc2l6ZTpcbiAqIHRvZ2dsZS10ZXh0LWZvbnQtd2VpZ2h0OlxuICogdG9nZ2xlLXRleHQtbGluZS1oZWlnaHQ6XG4gKiB0b2dnbGUtY3Vyc29yOlxuICogdG9nZ2xlLWRpc2FibGVkLWN1cnNvcjpcbiAqIHRvZ2dsZS1iYXNpYy10ZXh0LWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZm9jdXMtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZm9jdXMtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWZvY3VzLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtaG92ZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWhvdmVyLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1hY3RpdmUtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1iYXNpYy1hY3RpdmUtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtYWN0aXZlLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWRpc2FibGVkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWJhc2ljLWRpc2FibGVkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZGlzYWJsZWQtY2hlY2tlZC1zd2l0Y2hlci1jaGVja21hcmstY29sb3I6XG4gKiB0b2dnbGUtYmFzaWMtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtcHJpbWFyeS1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1wcmltYXJ5LWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLXByaW1hcnktZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtc3VjY2Vzcy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1zdWNjZXNzLWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLXN1Y2Nlc3MtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtaW5mby1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtaW5mby1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1pbmZvLWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLWluZm8tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtd2FybmluZy1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS13YXJuaW5nLWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLXdhcm5pbmctZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWNoZWNrZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1mb2N1cy1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWZvY3VzLWNoZWNrZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZm9jdXMtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWhvdmVyLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItaG92ZXItY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItYWN0aXZlLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWFjdGl2ZS1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtZGFuZ2VyLWFjdGl2ZS1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZGlzYWJsZWQtYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1kaXNhYmxlZC1zd2l0Y2hlci1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWRhbmdlci1kaXNhYmxlZC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1kYW5nZXItZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLXRleHQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtY2hlY2tlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1jaGVja2VkLXN3aXRjaGVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1jaGVja2VkLXN3aXRjaGVyLWNoZWNrbWFyay1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWZvY3VzLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1mb2N1cy1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1mb2N1cy1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1mb2N1cy1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWhvdmVyLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1ob3Zlci1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1ob3Zlci1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1ob3Zlci1jaGVja2VkLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWFjdGl2ZS1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtYWN0aXZlLWJvcmRlci1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWFjdGl2ZS1jaGVja2VkLWJhY2tncm91bmQtY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1hY3RpdmUtY2hlY2tlZC1ib3JkZXItY29sb3I6XG4gKiB0b2dnbGUtY29udHJvbC1kaXNhYmxlZC1iYWNrZ3JvdW5kLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZGlzYWJsZWQtYm9yZGVyLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZGlzYWJsZWQtc3dpdGNoZXItYmFja2dyb3VuZC1jb2xvcjpcbiAqIHRvZ2dsZS1jb250cm9sLWRpc2FibGVkLWNoZWNrZWQtc3dpdGNoZXItY2hlY2ttYXJrLWNvbG9yOlxuICogdG9nZ2xlLWNvbnRyb2wtZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqL1xuY2xhc3MgTmJUb2dnbGVDb21wb25lbnQge1xuICAgIGNvbnN0cnVjdG9yKGNoYW5nZURldGVjdG9yLCBsYXlvdXREaXJlY3Rpb24sIHJlbmRlcmVyLCBob3N0RWxlbWVudCwgem9uZSwgc3RhdHVzU2VydmljZSkge1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yID0gY2hhbmdlRGV0ZWN0b3I7XG4gICAgICAgIHRoaXMubGF5b3V0RGlyZWN0aW9uID0gbGF5b3V0RGlyZWN0aW9uO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuaG9zdEVsZW1lbnQgPSBob3N0RWxlbWVudDtcbiAgICAgICAgdGhpcy56b25lID0gem9uZTtcbiAgICAgICAgdGhpcy5zdGF0dXNTZXJ2aWNlID0gc3RhdHVzU2VydmljZTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSA9ICgpID0+IHsgfTtcbiAgICAgICAgdGhpcy5vblRvdWNoZWQgPSAoKSA9PiB7IH07XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLl9jaGVja2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2dnbGUgc3RhdHVzLlxuICAgICAgICAgKiBQb3NzaWJsZSB2YWx1ZXMgYXJlOiBgYmFzaWNgLCBgcHJpbWFyeWAsIGBzdWNjZXNzYCwgYHdhcm5pbmdgLCBgZGFuZ2VyYCwgYGluZm9gLCBgY29udHJvbGAuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXR1cyA9ICdiYXNpYyc7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUb2dnbGUgbGFiZWwgcG9zaXRpb24uXG4gICAgICAgICAqIFBvc3NpYmxlIHZhbHVlcyBhcmU6IGBsZWZ0YCwgYHJpZ2h0YCwgYHN0YXJ0YCwgYGVuZGAgKGRlZmF1bHQpXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmxhYmVsUG9zaXRpb24gPSAnZW5kJztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIE91dHB1dCB3aGVuIGNoZWNrZWQgc3RhdGUgaXMgY2hhbmdlZCBieSBhIHVzZXJcbiAgICAgICAgICogQHR5cGUgRXZlbnRFbWl0dGVyPGJvb2xlYW4+XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoZWNrZWRDaGFuZ2UgPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRvZ2dsZSBjaGVja2VkXG4gICAgICogQHR5cGUge2Jvb2xlYW59XG4gICAgICovXG4gICAgZ2V0IGNoZWNrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jaGVja2VkO1xuICAgIH1cbiAgICBzZXQgY2hlY2tlZCh2YWx1ZSkge1xuICAgICAgICB0aGlzLl9jaGVja2VkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgaW5wdXQgZGlzYWJsZWQgc3RhdGVcbiAgICAgKi9cbiAgICBnZXQgZGlzYWJsZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9kaXNhYmxlZDtcbiAgICB9XG4gICAgc2V0IGRpc2FibGVkKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX2Rpc2FibGVkID0gY29udmVydFRvQm9vbFByb3BlcnR5KHZhbHVlKTtcbiAgICB9XG4gICAgZ2V0IHByaW1hcnkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ3ByaW1hcnknO1xuICAgIH1cbiAgICBnZXQgc3VjY2VzcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnc3VjY2Vzcyc7XG4gICAgfVxuICAgIGdldCB3YXJuaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09ICd3YXJuaW5nJztcbiAgICB9XG4gICAgZ2V0IGRhbmdlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSAnZGFuZ2VyJztcbiAgICB9XG4gICAgZ2V0IGluZm8oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2luZm8nO1xuICAgIH1cbiAgICBnZXQgYmFzaWMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2Jhc2ljJztcbiAgICB9XG4gICAgZ2V0IGNvbnRyb2woKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gJ2NvbnRyb2wnO1xuICAgIH1cbiAgICBnZXQgYWRkaXRpb25hbENsYXNzZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YXR1c1NlcnZpY2UuaXNDdXN0b21TdGF0dXModGhpcy5zdGF0dXMpKSB7XG4gICAgICAgICAgICByZXR1cm4gW3RoaXMuc3RhdHVzU2VydmljZS5nZXRTdGF0dXNDbGFzcyh0aGlzLnN0YXR1cyldO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgZ2V0IGxhYmVsTGVmdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxQb3NpdGlvbiA9PT0gJ2xlZnQnO1xuICAgIH1cbiAgICBnZXQgbGFiZWxSaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxQb3NpdGlvbiA9PT0gJ3JpZ2h0JztcbiAgICB9XG4gICAgZ2V0IGxhYmVsU3RhcnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxhYmVsUG9zaXRpb24gPT09ICdzdGFydCc7XG4gICAgfVxuICAgIGdldCBsYWJlbEVuZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubGFiZWxQb3NpdGlvbiA9PT0gJ2VuZCc7XG4gICAgfVxuICAgIG5nT25Jbml0KCkge1xuICAgICAgICB0aGlzLmxheW91dERpcmVjdGlvbi5vbkRpcmVjdGlvbkNoYW5nZSgpXG4gICAgICAgICAgICAucGlwZSh0YWtlVW50aWwodGhpcy5kZXN0cm95JCkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKCgpID0+IHRoaXMuY2hhbmdlRGV0ZWN0b3IuZGV0ZWN0Q2hhbmdlcygpKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuaG9zdEVsZW1lbnQubmF0aXZlRWxlbWVudCwgJ25iLXRyYW5zaXRpb24nKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBuZ09uRGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5kZXN0cm95JC5uZXh0KCk7XG4gICAgICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgICB9XG4gICAgY2hlY2tTdGF0ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hlY2tlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGF5b3V0RGlyZWN0aW9uLmlzTHRyKCkgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmxheW91dERpcmVjdGlvbi5pc0x0cigpID8gJ2xlZnQnIDogJ3JpZ2h0JztcbiAgICB9XG4gICAgcmVnaXN0ZXJPbkNoYW5nZShmbikge1xuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gZm47XG4gICAgfVxuICAgIHJlZ2lzdGVyT25Ub3VjaGVkKGZuKSB7XG4gICAgICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gICAgfVxuICAgIHdyaXRlVmFsdWUodmFsKSB7XG4gICAgICAgIHRoaXMuY2hlY2tlZCA9IHZhbDtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcbiAgICB9XG4gICAgc2V0RGlzYWJsZWRTdGF0ZSh2YWwpIHtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGNvbnZlcnRUb0Jvb2xQcm9wZXJ0eSh2YWwpO1xuICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yLm1hcmtGb3JDaGVjaygpO1xuICAgIH1cbiAgICB1cGRhdGVWYWx1ZShldmVudCkge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldDtcbiAgICAgICAgdGhpcy5jaGVja2VkID0gaW5wdXQuY2hlY2tlZDtcbiAgICAgICAgdGhpcy5jaGVja2VkQ2hhbmdlLmVtaXQodGhpcy5jaGVja2VkKTtcbiAgICAgICAgdGhpcy5vbkNoYW5nZSh0aGlzLmNoZWNrZWQpO1xuICAgIH1cbiAgICBvbklucHV0Q2xpY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfVxufVxuTmJUb2dnbGVDb21wb25lbnQuZGVjb3JhdG9ycyA9IFtcbiAgICB7IHR5cGU6IENvbXBvbmVudCwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBzZWxlY3RvcjogJ25iLXRvZ2dsZScsXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uczogW1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyKCdwb3NpdGlvbicsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlKCdyaWdodCcsIHN0eWxlKHsgcmlnaHQ6IDAsIGxlZnQ6ICcqJyB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSgnbGVmdCcsIHN0eWxlKHsgbGVmdDogMCwgcmlnaHQ6ICcqJyB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uKCc6ZW50ZXInLCBbYW5pbWF0ZSgwKV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbigncmlnaHQgPD0+IGxlZnQnLCBbYW5pbWF0ZSgnMC4xNXMnKV0pLFxuICAgICAgICAgICAgICAgICAgICBdKSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBgXG4gICAgPGxhYmVsIGNsYXNzPVwidG9nZ2xlLWxhYmVsXCI+XG4gICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCJcbiAgICAgICAgICAgICBjbGFzcz1cIm5hdGl2ZS1pbnB1dCB2aXN1YWxseS1oaWRkZW5cIlxuICAgICAgICAgICAgIHJvbGU9XCJzd2l0Y2hcIlxuICAgICAgICAgICAgIFthdHRyLmFyaWEtY2hlY2tlZF09XCJjaGVja2VkXCJcbiAgICAgICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICAgICAgIFtjaGVja2VkXT1cImNoZWNrZWRcIlxuICAgICAgICAgICAgIChjaGFuZ2UpPVwidXBkYXRlVmFsdWUoJGV2ZW50KVwiXG4gICAgICAgICAgICAgKGJsdXIpPVwib25Ub3VjaGVkKClcIlxuICAgICAgICAgICAgIChjbGljayk9XCJvbklucHV0Q2xpY2soJGV2ZW50KVwiPlxuICAgICAgPGRpdiBjbGFzcz1cInRvZ2dsZVwiIFtjbGFzcy5jaGVja2VkXT1cImNoZWNrZWRcIj5cbiAgICAgICAgPHNwYW4gW0Bwb3NpdGlvbl09XCJjaGVja1N0YXRlKClcIiBjbGFzcz1cInRvZ2dsZS1zd2l0Y2hlclwiPlxuICAgICAgICAgIDxuYi1pY29uICpuZ0lmPVwiY2hlY2tlZFwiIGljb249XCJjaGVja21hcmstYm9sZC1vdXRsaW5lXCIgcGFjaz1cIm5lYnVsYXItZXNzZW50aWFsc1wiPjwvbmItaWNvbj5cbiAgICAgICAgPC9zcGFuPlxuICAgICAgPC9kaXY+XG4gICAgICA8c3BhbiBjbGFzcz1cInRleHRcIj5cbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgPC9zcGFuPlxuICAgIDwvbGFiZWw+XG4gIGAsXG4gICAgICAgICAgICAgICAgcHJvdmlkZXJzOiBbe1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZTogTkdfVkFMVUVfQUNDRVNTT1IsXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VFeGlzdGluZzogZm9yd2FyZFJlZigoKSA9PiBOYlRvZ2dsZUNvbXBvbmVudCksXG4gICAgICAgICAgICAgICAgICAgICAgICBtdWx0aTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfV0sXG4gICAgICAgICAgICAgICAgY2hhbmdlRGV0ZWN0aW9uOiBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneS5PblB1c2gsXG4gICAgICAgICAgICAgICAgc3R5bGVzOiBbXCI6aG9zdHtkaXNwbGF5OmlubGluZS1mbGV4O291dGxpbmU6bm9uZX06aG9zdCgudG9nZ2xlLWxhYmVsLWxlZnQpIC50ZXh0Om5vdCg6ZW1wdHkpe3BhZGRpbmctcmlnaHQ6MC42ODc1cmVtfVtkaXI9bHRyXSA6aG9zdCgudG9nZ2xlLWxhYmVsLWxlZnQpIC50ZXh0Om5vdCg6ZW1wdHkpe29yZGVyOi0xfVtkaXI9cnRsXSA6aG9zdCgudG9nZ2xlLWxhYmVsLWxlZnQpIC50ZXh0Om5vdCg6ZW1wdHkpe29yZGVyOjF9Omhvc3QoLnRvZ2dsZS1sYWJlbC1yaWdodCkgLnRleHQ6bm90KDplbXB0eSl7cGFkZGluZy1sZWZ0OjAuNjg3NXJlbX1bZGlyPWx0cl0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1yaWdodCkgLnRleHQ6bm90KDplbXB0eSl7b3JkZXI6MX1bZGlyPXJ0bF0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1yaWdodCkgLnRleHQ6bm90KDplbXB0eSl7b3JkZXI6LTF9Omhvc3QoLnRvZ2dsZS1sYWJlbC1zdGFydCkgLnRvZ2dsZS1sYWJlbHtmbGV4LWRpcmVjdGlvbjpyb3ctcmV2ZXJzZX1bZGlyPWx0cl0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1zdGFydCkgLnRvZ2dsZS1sYWJlbCAudGV4dDpub3QoOmVtcHR5KXtwYWRkaW5nLXJpZ2h0Oi42ODc1cmVtfVtkaXI9cnRsXSA6aG9zdCgudG9nZ2xlLWxhYmVsLXN0YXJ0KSAudG9nZ2xlLWxhYmVsIC50ZXh0Om5vdCg6ZW1wdHkpe3BhZGRpbmctbGVmdDouNjg3NXJlbX1bZGlyPWx0cl0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1lbmQpIC50ZXh0Om5vdCg6ZW1wdHkpe3BhZGRpbmctbGVmdDouNjg3NXJlbX1bZGlyPXJ0bF0gOmhvc3QoLnRvZ2dsZS1sYWJlbC1lbmQpIC50ZXh0Om5vdCg6ZW1wdHkpe3BhZGRpbmctcmlnaHQ6LjY4NzVyZW19Omhvc3QoLm5iLXRyYW5zaXRpb24pIC50b2dnbGV7dHJhbnNpdGlvbi1kdXJhdGlvbjowLjE1czt0cmFuc2l0aW9uLXByb3BlcnR5OmJhY2tncm91bmQtY29sb3IsYm9yZGVyLGJveC1zaGFkb3c7dHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246ZWFzZS1pbn0udG9nZ2xlLWxhYmVse3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6aW5saW5lLWZsZXg7YWxpZ24taXRlbXM6Y2VudGVyfS50b2dnbGV7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtZmxleDtib3gtc2l6aW5nOmNvbnRlbnQtYm94fS50b2dnbGUtc3dpdGNoZXJ7cG9zaXRpb246YWJzb2x1dGU7Ym9yZGVyLXJhZGl1czo1MCU7bWFyZ2luOjFweH0udG9nZ2xlLXN3aXRjaGVyIG5iLWljb257cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTtsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsIC01MCUpfVxcblwiXVxuICAgICAgICAgICAgfSxdIH1cbl07XG5OYlRvZ2dsZUNvbXBvbmVudC5jdG9yUGFyYW1ldGVycyA9ICgpID0+IFtcbiAgICB7IHR5cGU6IENoYW5nZURldGVjdG9yUmVmIH0sXG4gICAgeyB0eXBlOiBOYkxheW91dERpcmVjdGlvblNlcnZpY2UgfSxcbiAgICB7IHR5cGU6IFJlbmRlcmVyMiB9LFxuICAgIHsgdHlwZTogRWxlbWVudFJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBOYlN0YXR1c1NlcnZpY2UgfVxuXTtcbk5iVG9nZ2xlQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIGNoZWNrZWQ6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGRpc2FibGVkOiBbeyB0eXBlOiBJbnB1dCB9XSxcbiAgICBzdGF0dXM6IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGxhYmVsUG9zaXRpb246IFt7IHR5cGU6IElucHV0IH1dLFxuICAgIGNoZWNrZWRDaGFuZ2U6IFt7IHR5cGU6IE91dHB1dCB9XSxcbiAgICBwcmltYXJ5OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtcHJpbWFyeScsXSB9XSxcbiAgICBzdWNjZXNzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtc3VjY2VzcycsXSB9XSxcbiAgICB3YXJuaW5nOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtd2FybmluZycsXSB9XSxcbiAgICBkYW5nZXI6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1kYW5nZXInLF0gfV0sXG4gICAgaW5mbzogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3Muc3RhdHVzLWluZm8nLF0gfV0sXG4gICAgYmFzaWM6IFt7IHR5cGU6IEhvc3RCaW5kaW5nLCBhcmdzOiBbJ2NsYXNzLnN0YXR1cy1iYXNpYycsXSB9XSxcbiAgICBjb250cm9sOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy5zdGF0dXMtY29udHJvbCcsXSB9XSxcbiAgICBhZGRpdGlvbmFsQ2xhc3NlczogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MnLF0gfV0sXG4gICAgbGFiZWxMZWZ0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2dnbGUtbGFiZWwtbGVmdCcsXSB9XSxcbiAgICBsYWJlbFJpZ2h0OiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2dnbGUtbGFiZWwtcmlnaHQnLF0gfV0sXG4gICAgbGFiZWxTdGFydDogW3sgdHlwZTogSG9zdEJpbmRpbmcsIGFyZ3M6IFsnY2xhc3MudG9nZ2xlLWxhYmVsLXN0YXJ0JyxdIH1dLFxuICAgIGxhYmVsRW5kOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcy50b2dnbGUtbGFiZWwtZW5kJyxdIH1dXG59O1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgQWt2ZW8uIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuIFNlZSBMaWNlbnNlLnR4dCBpbiB0aGUgcHJvamVjdCByb290IGZvciBsaWNlbnNlIGluZm9ybWF0aW9uLlxuICovXG5jbGFzcyBOYlRvZ2dsZU1vZHVsZSB7XG59XG5OYlRvZ2dsZU1vZHVsZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogTmdNb2R1bGUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgaW1wb3J0czogW1xuICAgICAgICAgICAgICAgICAgICBDb21tb25Nb2R1bGUsXG4gICAgICAgICAgICAgICAgICAgIE5iSWNvbk1vZHVsZSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgIGRlY2xhcmF0aW9uczogW05iVG9nZ2xlQ29tcG9uZW50XSxcbiAgICAgICAgICAgICAgICBleHBvcnRzOiBbTmJUb2dnbGVDb21wb25lbnRdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbmNsYXNzIE5iUHJlZml4RGlyZWN0aXZlIHtcbn1cbk5iUHJlZml4RGlyZWN0aXZlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBEaXJlY3RpdmUsIGFyZ3M6IFt7XG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6ICdbbmJQcmVmaXhdJyxcbiAgICAgICAgICAgIH0sXSB9XG5dO1xuXG5jbGFzcyBOYlN1ZmZpeERpcmVjdGl2ZSB7XG59XG5OYlN1ZmZpeERpcmVjdGl2ZS5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogRGlyZWN0aXZlLCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW25iU3VmZml4XScsXG4gICAgICAgICAgICB9LF0gfVxuXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuZnVuY3Rpb24gdGhyb3dGb3JtQ29udHJvbEVsZW1lbnROb3RGb3VuZCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5iRm9ybUZpZWxkQ29tcG9uZW50IG11c3QgY29udGFpbiBbbmJJbnB1dF1gKTtcbn1cbi8qXG4gKiBOYkZvcm1GaWVsZENvbXBvbmVudFxuICpcbiAqIEBzdHlsZXNcbiAqXG4gKiBmb3JtLWZpZWxkLWFkZG9uLWJhc2ljLXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWJhc2ljLWhpZ2hsaWdodC10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1wcmltYXJ5LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXByaW1hcnktaGlnaGxpZ2h0LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXN1Y2Nlc3MtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tc3VjY2Vzcy1oaWdobGlnaHQtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24taW5mby10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1pbmZvLWhpZ2hsaWdodC10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi13YXJuaW5nLXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXdhcm5pbmctaGlnaGxpZ2h0LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWRhbmdlci10ZXh0LWNvbG9yOlxuICogZm9ybS1maWVsZC1hZGRvbi1kYW5nZXItaGlnaGxpZ2h0LXRleHQtY29sb3I6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWNvbnRyb2wtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tY29udHJvbC1oaWdobGlnaHQtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tZGlzYWJsZWQtdGV4dC1jb2xvcjpcbiAqIGZvcm0tZmllbGQtYWRkb24tdGlueS1oZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXRpbnktd2lkdGg6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXRpbnktaWNvbi1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi10aW55LWZvbnQtc2l6ZTpcbiAqIGZvcm0tZmllbGQtYWRkb24tdGlueS1saW5lLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tdGlueS1mb250LXdlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tc21hbGwtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1zbWFsbC13aWR0aDpcbiAqIGZvcm0tZmllbGQtYWRkb24tc21hbGwtaWNvbi1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1zbWFsbC1mb250LXNpemU6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLXNtYWxsLWxpbmUtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1zbWFsbC1mb250LXdlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbWVkaXVtLWhlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbWVkaXVtLXdpZHRoOlxuICogZm9ybS1maWVsZC1hZGRvbi1tZWRpdW0taWNvbi1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1tZWRpdW0tZm9udC1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1tZWRpdW0tbGluZS1oZWlnaHQ6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLW1lZGl1bS1mb250LXdlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbGFyZ2UtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1sYXJnZS13aWR0aDpcbiAqIGZvcm0tZmllbGQtYWRkb24tbGFyZ2UtaWNvbi1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1sYXJnZS1mb250LXNpemU6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWxhcmdlLWxpbmUtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1sYXJnZS1mb250LXdlaWdodDpcbiAqIGZvcm0tZmllbGQtYWRkb24tZ2lhbnQtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1naWFudC13aWR0aDpcbiAqIGZvcm0tZmllbGQtYWRkb24tZ2lhbnQtaWNvbi1zaXplOlxuICogZm9ybS1maWVsZC1hZGRvbi1naWFudC1mb250LXNpemU6XG4gKiBmb3JtLWZpZWxkLWFkZG9uLWdpYW50LWxpbmUtaGVpZ2h0OlxuICogZm9ybS1maWVsZC1hZGRvbi1naWFudC1mb250LXdlaWdodDpcbiAqKi9cbmNsYXNzIE5iRm9ybUZpZWxkQ29tcG9uZW50IHtcbiAgICBjb25zdHJ1Y3RvcihjZCwgem9uZSwgZWxlbWVudFJlZiwgcmVuZGVyZXIpIHtcbiAgICAgICAgdGhpcy5jZCA9IGNkO1xuICAgICAgICB0aGlzLnpvbmUgPSB6b25lO1xuICAgICAgICB0aGlzLmVsZW1lbnRSZWYgPSBlbGVtZW50UmVmO1xuICAgICAgICB0aGlzLnJlbmRlcmVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuZGVzdHJveSQgPSBuZXcgU3ViamVjdCgpO1xuICAgICAgICB0aGlzLmZvcm1Db250cm9sU3RhdGUkID0gbmV3IFJlcGxheVN1YmplY3QoMSk7XG4gICAgICAgIHRoaXMucHJlZml4Q2xhc3NlcyQgPSB0aGlzLmZvcm1Db250cm9sU3RhdGUkLnBpcGUobWFwKHMgPT4gdGhpcy5nZXRBZGRvbkNsYXNzZXMoJ3ByZWZpeCcsIHMpKSk7XG4gICAgICAgIHRoaXMuc3VmZml4Q2xhc3NlcyQgPSB0aGlzLmZvcm1Db250cm9sU3RhdGUkLnBpcGUobWFwKHMgPT4gdGhpcy5nZXRBZGRvbkNsYXNzZXMoJ3N1ZmZpeCcsIHMpKSk7XG4gICAgfVxuICAgIG5nQWZ0ZXJDb250ZW50Q2hlY2tlZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmZvcm1Db250cm9sKSB7XG4gICAgICAgICAgICB0aHJvd0Zvcm1Db250cm9sRWxlbWVudE5vdEZvdW5kKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbmdBZnRlckNvbnRlbnRJbml0KCkge1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvRm9ybUNvbnRyb2xTdGF0ZUNoYW5nZSgpO1xuICAgICAgICB0aGlzLnN1YnNjcmliZVRvQWRkb25DaGFuZ2UoKTtcbiAgICB9XG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICAvLyBUT0RPOiAjMjI1NFxuICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCAnbmItdHJhbnNpdGlvbicpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIG5nT25EZXN0cm95KCkge1xuICAgICAgICB0aGlzLmRlc3Ryb3kkLm5leHQoKTtcbiAgICB9XG4gICAgc2hvdWxkU2hvd1ByZWZpeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9ybUNvbnRyb2xDb25maWcoKS5zdXBwb3J0c1ByZWZpeCAmJiAhIXRoaXMucHJlZml4Lmxlbmd0aDtcbiAgICB9XG4gICAgc2hvdWxkU2hvd1N1ZmZpeCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Rm9ybUNvbnRyb2xDb25maWcoKS5zdXBwb3J0c1N1ZmZpeCAmJiAhIXRoaXMuc3VmZml4Lmxlbmd0aDtcbiAgICB9XG4gICAgc3Vic2NyaWJlVG9Gb3JtQ29udHJvbFN0YXRlQ2hhbmdlKCkge1xuICAgICAgICBjb25zdCB7IGRpc2FibGVkJCwgZm9jdXNlZCQsIHNpemUkLCBzdGF0dXMkLCBmdWxsV2lkdGgkIH0gPSB0aGlzLmZvcm1Db250cm9sO1xuICAgICAgICBjb21iaW5lTGF0ZXN0KFtkaXNhYmxlZCQsIGZvY3VzZWQkLCBzaXplJCwgc3RhdHVzJCwgZnVsbFdpZHRoJF0pXG4gICAgICAgICAgICAucGlwZShtYXAoKFtkaXNhYmxlZCwgZm9jdXNlZCwgc2l6ZSwgc3RhdHVzLCBmdWxsV2lkdGhdKSA9PiAoeyBkaXNhYmxlZCwgZm9jdXNlZCwgc2l6ZSwgc3RhdHVzLCBmdWxsV2lkdGggfSkpLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCgob2xkU3RhdGUsIHN0YXRlJCQxKSA9PiB0aGlzLmlzU3RhdGVzRXF1YWwob2xkU3RhdGUsIHN0YXRlJCQxKSksIHRhcCgoeyBzaXplLCBmdWxsV2lkdGggfSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm9ybUZpZWxkQ2xhc3NlcyA9IFtgbmItZm9ybS1maWVsZC1zaXplLSR7c2l6ZX1gXTtcbiAgICAgICAgICAgIGlmICghZnVsbFdpZHRoKSB7XG4gICAgICAgICAgICAgICAgZm9ybUZpZWxkQ2xhc3Nlcy5wdXNoKCduYi1mb3JtLWZpZWxkLWxpbWl0ZWQtd2lkdGgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZm9ybUZpZWxkQ2xhc3NlcyA9IGZvcm1GaWVsZENsYXNzZXMuam9pbignICcpO1xuICAgICAgICB9KSwgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpKVxuICAgICAgICAgICAgLnN1YnNjcmliZSh0aGlzLmZvcm1Db250cm9sU3RhdGUkKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlVG9BZGRvbkNoYW5nZSgpIHtcbiAgICAgICAgbWVyZ2UodGhpcy5wcmVmaXguY2hhbmdlcywgdGhpcy5zdWZmaXguY2hhbmdlcylcbiAgICAgICAgICAgIC5waXBlKHRha2VVbnRpbCh0aGlzLmRlc3Ryb3kkKSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKCkgPT4gdGhpcy5jZC5tYXJrRm9yQ2hlY2soKSk7XG4gICAgfVxuICAgIGdldEFkZG9uQ2xhc3NlcyhhZGRvbiwgc3RhdGUkJDEpIHtcbiAgICAgICAgY29uc3QgY2xhc3NlcyA9IFtcbiAgICAgICAgICAgICduYi1mb3JtLWZpZWxkLWFkZG9uJyxcbiAgICAgICAgICAgIGBuYi1mb3JtLWZpZWxkLSR7YWRkb259LSR7c3RhdGUkJDEuc2l6ZX1gLFxuICAgICAgICBdO1xuICAgICAgICBpZiAoc3RhdGUkJDEuZGlzYWJsZWQpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgbmItZm9ybS1maWVsZC1hZGRvbi1kaXNhYmxlZGApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHN0YXRlJCQxLmZvY3VzZWQpIHtcbiAgICAgICAgICAgIGNsYXNzZXMucHVzaChgbmItZm9ybS1maWVsZC1hZGRvbi0ke3N0YXRlJCQxLnN0YXR1c30taGlnaGxpZ2h0YCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGFzc2VzLnB1c2goYG5iLWZvcm0tZmllbGQtYWRkb24tJHtzdGF0ZSQkMS5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNsYXNzZXM7XG4gICAgfVxuICAgIGdldEZvcm1Db250cm9sQ29uZmlnKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtQ29udHJvbENvbmZpZyB8fCBuZXcgTmJGb3JtRmllbGRDb250cm9sQ29uZmlnKCk7XG4gICAgfVxuICAgIGlzU3RhdGVzRXF1YWwob2xkU3RhdGUsIHN0YXRlJCQxKSB7XG4gICAgICAgIHJldHVybiBvbGRTdGF0ZS5zdGF0dXMgPT09IHN0YXRlJCQxLnN0YXR1cyAmJlxuICAgICAgICAgICAgb2xkU3RhdGUuZGlzYWJsZWQgPT09IHN0YXRlJCQxLmRpc2FibGVkICYmXG4gICAgICAgICAgICBvbGRTdGF0ZS5mb2N1c2VkID09PSBzdGF0ZSQkMS5mb2N1c2VkICYmXG4gICAgICAgICAgICBvbGRTdGF0ZS5mdWxsV2lkdGggPT09IHN0YXRlJCQxLmZ1bGxXaWR0aCAmJlxuICAgICAgICAgICAgb2xkU3RhdGUuc2l6ZSA9PT0gc3RhdGUkJDEuc2l6ZTtcbiAgICB9XG59XG5OYkZvcm1GaWVsZENvbXBvbmVudC5kZWNvcmF0b3JzID0gW1xuICAgIHsgdHlwZTogQ29tcG9uZW50LCBhcmdzOiBbe1xuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnbmItZm9ybS1maWVsZCcsXG4gICAgICAgICAgICAgICAgdGVtcGxhdGU6IFwiPGRpdiAqbmdJZj1cXFwic2hvdWxkU2hvd1ByZWZpeCgpXFxcIiBbbmdDbGFzc109XFxcInByZWZpeENsYXNzZXMkIHwgYXN5bmNcXFwiPlxcbiAgPG5nLWNvbnRlbnQgc2VsZWN0PVxcXCJbbmJQcmVmaXhdXFxcIj48L25nLWNvbnRlbnQ+XFxuPC9kaXY+XFxuXFxuPGRpdiBjbGFzcz1cXFwibmItZm9ybS1jb250cm9sLWNvbnRhaW5lclxcXCJcXG4gICAgIFtjbGFzcy5uYi1mb3JtLWZpZWxkLWNvbnRyb2wtd2l0aC1wcmVmaXhdPVxcXCJzaG91bGRTaG93UHJlZml4KClcXFwiXFxuICAgICBbY2xhc3MubmItZm9ybS1maWVsZC1jb250cm9sLXdpdGgtc3VmZml4XT1cXFwic2hvdWxkU2hvd1N1ZmZpeCgpXFxcIj5cXG4gIDxuZy1jb250ZW50PjwvbmctY29udGVudD5cXG48L2Rpdj5cXG5cXG48ZGl2ICpuZ0lmPVxcXCJzaG91bGRTaG93U3VmZml4KClcXFwiIFtuZ0NsYXNzXT1cXFwic3VmZml4Q2xhc3NlcyQgfCBhc3luY1xcXCI+XFxuICA8bmctY29udGVudCBzZWxlY3Q9XFxcIltuYlN1ZmZpeF1cXFwiPjwvbmctY29udGVudD5cXG48L2Rpdj5cXG5cIixcbiAgICAgICAgICAgICAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICAgICAgICAgICAgICBzdHlsZXM6IFtcIjpob3N0e2Rpc3BsYXk6ZmxleDthbGlnbi1pdGVtczpjZW50ZXJ9Lm5iLWZvcm0tY29udHJvbC1jb250YWluZXJ7d2lkdGg6MTAwJX1cXG5cIl1cbiAgICAgICAgICAgIH0sXSB9XG5dO1xuTmJGb3JtRmllbGRDb21wb25lbnQuY3RvclBhcmFtZXRlcnMgPSAoKSA9PiBbXG4gICAgeyB0eXBlOiBDaGFuZ2VEZXRlY3RvclJlZiB9LFxuICAgIHsgdHlwZTogTmdab25lIH0sXG4gICAgeyB0eXBlOiBFbGVtZW50UmVmIH0sXG4gICAgeyB0eXBlOiBSZW5kZXJlcjIgfVxuXTtcbk5iRm9ybUZpZWxkQ29tcG9uZW50LnByb3BEZWNvcmF0b3JzID0ge1xuICAgIHByZWZpeDogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJQcmVmaXhEaXJlY3RpdmUsIHsgZGVzY2VuZGFudHM6IHRydWUgfSxdIH1dLFxuICAgIHN1ZmZpeDogW3sgdHlwZTogQ29udGVudENoaWxkcmVuLCBhcmdzOiBbTmJTdWZmaXhEaXJlY3RpdmUsIHsgZGVzY2VuZGFudHM6IHRydWUgfSxdIH1dLFxuICAgIGZvcm1Db250cm9sOiBbeyB0eXBlOiBDb250ZW50Q2hpbGQsIGFyZ3M6IFtOYkZvcm1GaWVsZENvbnRyb2wsIHsgc3RhdGljOiBmYWxzZSB9LF0gfV0sXG4gICAgZm9ybUNvbnRyb2xDb25maWc6IFt7IHR5cGU6IENvbnRlbnRDaGlsZCwgYXJnczogW05iRm9ybUZpZWxkQ29udHJvbENvbmZpZywgeyBzdGF0aWM6IGZhbHNlIH0sXSB9XSxcbiAgICBmb3JtRmllbGRDbGFzc2VzOiBbeyB0eXBlOiBIb3N0QmluZGluZywgYXJnczogWydjbGFzcycsXSB9XVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IEFrdmVvLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cbiAqL1xuY29uc3QgQ09NUE9ORU5UUyQzID0gW1xuICAgIE5iRm9ybUZpZWxkQ29tcG9uZW50LFxuICAgIE5iUHJlZml4RGlyZWN0aXZlLFxuICAgIE5iU3VmZml4RGlyZWN0aXZlLFxuXTtcbmNsYXNzIE5iRm9ybUZpZWxkTW9kdWxlIHtcbn1cbk5iRm9ybUZpZWxkTW9kdWxlLmRlY29yYXRvcnMgPSBbXG4gICAgeyB0eXBlOiBOZ01vZHVsZSwgYXJnczogW3tcbiAgICAgICAgICAgICAgICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcbiAgICAgICAgICAgICAgICBkZWNsYXJhdGlvbnM6IFsuLi5DT01QT05FTlRTJDNdLFxuICAgICAgICAgICAgICAgIGV4cG9ydHM6IFsuLi5DT01QT05FTlRTJDNdLFxuICAgICAgICAgICAgfSxdIH1cbl07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBBa3Zlby4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4gU2VlIExpY2Vuc2UudHh0IGluIHRoZSBwcm9qZWN0IHJvb3QgZm9yIGxpY2Vuc2UgaW5mb3JtYXRpb24uXG4gKi9cbi8vIFRPRE86IGV4cG9ydCBhbGwgY29tcG9uZW50c1xuXG4vKipcbiAqIEdlbmVyYXRlZCBidW5kbGUgaW5kZXguIERvIG5vdCBlZGl0LlxuICovXG5cbmV4cG9ydCB7IE5iQ2FsZW5kYXJBY3Rpb25zQ29tcG9uZW50IGFzIMm1ZSwgTmJBY3RpdmVEZXNjZW5kYW50S2V5TWFuYWdlckZhY3RvcnlTZXJ2aWNlIGFzIMm1ZCwgTmJGb2N1c0tleU1hbmFnZXJGYWN0b3J5U2VydmljZSBhcyDJtWMsIE5iQ3VzdG9tTWVzc2FnZVNlcnZpY2UgYXMgybVmLCBOYkNhbGVuZGFyV2l0aFRpbWVDb21wb25lbnQgYXMgybVoLCBOYk1lbnVJbnRlcm5hbFNlcnZpY2UgYXMgybVhLCBOYlNoYXJlZE1vZHVsZSBhcyDJtWIsIE5iVGltZVBpY2tlckNlbGxDb21wb25lbnQgYXMgybVnLCBOYkNhbGVuZGFyRGF5Q2VsbENvbXBvbmVudCwgTmJEYXRlVGltZVBpY2tlckNvbXBvbmVudCwgTmJDYWxlbmRhclllYXJQaWNrZXJDb21wb25lbnQsIE5iQ2FsZW5kYXJNb250aFBpY2tlckNvbXBvbmVudCwgTU9OVEhTX0lOX1ZJRVcsIE1PTlRIU19JTl9DT0xVTU4sIE5iQ2FsZW5kYXJEYXlQaWNrZXJDb21wb25lbnQsIE5iQ2FsZW5kYXJWaWV3TW9kZUNvbXBvbmVudCwgTmJDYWxlbmRhclBhZ2VhYmxlTmF2aWdhdGlvbkNvbXBvbmVudCwgTmJDYWxlbmRhckRheXNOYW1lc0NvbXBvbmVudCwgTmJDYWxlbmRhcldlZWtOdW1iZXJDb21wb25lbnQsIE5iQ2FsZW5kYXJNb250aENlbGxDb21wb25lbnQsIE5iQ2FsZW5kYXJZZWFyQ2VsbENvbXBvbmVudCwgTmJDYWxlbmRhclBpY2tlclJvd0NvbXBvbmVudCwgTmJDYWxlbmRhclBpY2tlckNvbXBvbmVudCwgTmJDYWxlbmRhck1vbnRoTW9kZWxTZXJ2aWNlLCBOYk5hdGl2ZURhdGVTZXJ2aWNlLCBOYkRhdGVTZXJ2aWNlLCBOYk1lbnVTZXJ2aWNlLCBOYk1lbnVJdGVtLCBOYlNpZGViYXJTZXJ2aWNlLCBOQl9USEVNRV9PUFRJT05TLCBOQl9NRURJQV9CUkVBS1BPSU5UUywgTkJfQlVJTFRfSU5fSlNfVEhFTUVTLCBOQl9KU19USEVNRVMsIE5CX1dJTkRPVywgTkJfRE9DVU1FTlQsIHdpbmRvd0ZhY3RvcnksIE5iVGhlbWVNb2R1bGUsIE5iVGhlbWVTZXJ2aWNlLCBOYlNwaW5uZXJTZXJ2aWNlLCBERUZBVUxUX01FRElBX0JSRUFLUE9JTlRTLCBOYk1lZGlhQnJlYWtwb2ludHNTZXJ2aWNlLCBOYkNvbG9ySGVscGVyLCBOYkxheW91dERpcmVjdGlvbiwgTkJfTEFZT1VUX0RJUkVDVElPTiwgTmJMYXlvdXREaXJlY3Rpb25TZXJ2aWNlLCBOYkxheW91dFNjcm9sbFNlcnZpY2UsIE5iTGF5b3V0UnVsZXJTZXJ2aWNlLCBOYlN0YXR1c1NlcnZpY2UsIEJVSUxUX0lOX1RIRU1FUywgTmJKU1RoZW1lc1JlZ2lzdHJ5LCBDT1JQT1JBVEVfVEhFTUUsIENPU01JQ19USEVNRSwgREVGQVVMVF9USEVNRSwgREFSS19USEVNRSwgTmJDYXJkTW9kdWxlLCBOYkNhcmRIZWFkZXJDb21wb25lbnQsIE5iQ2FyZEJvZHlDb21wb25lbnQsIE5iQ2FyZEZvb3RlckNvbXBvbmVudCwgTmJDYXJkQ29tcG9uZW50LCBOYkZsaXBDYXJkQ29tcG9uZW50LCBOYlJldmVhbENhcmRDb21wb25lbnQsIE5iQ2FyZEZyb250Q29tcG9uZW50LCBOYkNhcmRCYWNrQ29tcG9uZW50LCBOYkNhbGVuZGFyTW9kdWxlLCBOYkNhbGVuZGFyQ29tcG9uZW50LCBOYkNhbGVuZGFyUmFuZ2VNb2R1bGUsIE5iQ2FsZW5kYXJSYW5nZUNvbXBvbmVudCwgTmJCYXNlQ2FsZW5kYXJDb21wb25lbnQsIE5iQmFzZUNhbGVuZGFyTW9kdWxlLCBOYkJhc2VDYWxlbmRhclJhbmdlQ2VsbCwgTmJDYWxlbmRhclJhbmdlRGF5Q2VsbENvbXBvbmVudCwgTmJDYWxlbmRhclJhbmdlTW9udGhDZWxsQ29tcG9uZW50LCBOYkNhbGVuZGFyUmFuZ2VZZWFyQ2VsbENvbXBvbmVudCwgTmJDYWxlbmRhclllYXJNb2RlbFNlcnZpY2UsIE5iQ2FsZW5kYXJUaW1lTW9kZWxTZXJ2aWNlLCBOYkNhbGVuZGFyVmlld01vZGUsIE5iQ2FsZW5kYXJTaXplLCBOYkNhbGVuZGFyS2l0TW9kdWxlLCBOYkxheW91dE1vZHVsZSwgTmJMYXlvdXRDb21wb25lbnQsIE5iTGF5b3V0Q29sdW1uQ29tcG9uZW50LCBOYkxheW91dEhlYWRlckNvbXBvbmVudCwgTmJMYXlvdXRGb290ZXJDb21wb25lbnQsIE5iUmVzdG9yZVNjcm9sbFRvcEhlbHBlciwgTmJNZW51TW9kdWxlLCBOYlRvZ2dsZVN0YXRlcywgTmJNZW51SXRlbUNvbXBvbmVudCwgTmJNZW51Q29tcG9uZW50LCBOYlJvdXRlVGFic2V0TW9kdWxlLCBOYlJvdXRlVGFic2V0Q29tcG9uZW50LCBOYlNpZGViYXJNb2R1bGUsIE5iU2lkZWJhckhlYWRlckNvbXBvbmVudCwgTmJTaWRlYmFyRm9vdGVyQ29tcG9uZW50LCBOYlNpZGViYXJDb21wb25lbnQsIE5iVGFic2V0TW9kdWxlLCBOYlRhYkNvbXBvbmVudCwgTmJUYWJzZXRDb21wb25lbnQsIE5iVXNlck1vZHVsZSwgTmJVc2VyQ29tcG9uZW50LCBOYkFjdGlvbnNNb2R1bGUsIE5iQWN0aW9uQ29tcG9uZW50LCBOYkFjdGlvbnNDb21wb25lbnQsIE5iU2VhcmNoTW9kdWxlLCBOYlNlYXJjaFNlcnZpY2UsIE5iU2VhcmNoRmllbGRDb21wb25lbnQsIE5iU2VhcmNoQ29tcG9uZW50LCBOYkNoZWNrYm94Q29tcG9uZW50LCBOYkNoZWNrYm94TW9kdWxlLCBOYkJhZGdlQ29tcG9uZW50LCBOYkJhZGdlTW9kdWxlLCBOYlBvcG92ZXJEaXJlY3RpdmUsIE5iUG9wb3Zlck1vZHVsZSwgTmJQb3BvdmVyQ29tcG9uZW50LCBOYkNvbnRleHRNZW51RGlyZWN0aXZlLCBOYkNvbnRleHRNZW51Q29tcG9uZW50LCBOYkNvbnRleHRNZW51TW9kdWxlLCBOYlByb2dyZXNzQmFyQ29tcG9uZW50LCBOYlByb2dyZXNzQmFyTW9kdWxlLCBOYkFsZXJ0Q29tcG9uZW50LCBOYkFsZXJ0TW9kdWxlLCBOYkNoYXRDb21wb25lbnQsIE5iQ2hhdE1lc3NhZ2VDb21wb25lbnQsIE5iQ2hhdE1lc3NhZ2VNYXBDb21wb25lbnQsIE5iQ2hhdE1lc3NhZ2VGaWxlQ29tcG9uZW50LCBOYkNoYXRNZXNzYWdlUXVvdGVDb21wb25lbnQsIE5iQ2hhdE1lc3NhZ2VUZXh0Q29tcG9uZW50LCBOYkNoYXRGb3JtQ29tcG9uZW50LCBOYkNoYXRNb2R1bGUsIE5iQ2hhdE9wdGlvbnMsIE5iQ2hhdEF2YXRhckNvbXBvbmVudCwgTmJDaGF0Q3VzdG9tTWVzc2FnZURpcmVjdGl2ZSwgTmJTcGlubmVyQ29tcG9uZW50LCBOYlNwaW5uZXJEaXJlY3RpdmUsIE5iU3Bpbm5lck1vZHVsZSwgTkJfU1RFUFBFUiwgTmJTdGVwcGVyQ29tcG9uZW50LCBOYlN0ZXBDb21wb25lbnQsIE5iU3RlcHBlck5leHREaXJlY3RpdmUsIE5iU3RlcHBlclByZXZpb3VzRGlyZWN0aXZlLCBOYlN0ZXBwZXJNb2R1bGUsIE5iQWNjb3JkaW9uQ29tcG9uZW50LCBOYkFjY29yZGlvbkl0ZW1Db21wb25lbnQsIE5iQWNjb3JkaW9uSXRlbUJvZHlDb21wb25lbnQsIE5iQWNjb3JkaW9uSXRlbUhlYWRlckNvbXBvbmVudCwgTmJBY2NvcmRpb25Nb2R1bGUsIE5iQnV0dG9uLCBOYkJ1dHRvbkNvbXBvbmVudCwgTmJCdXR0b25Nb2R1bGUsIE5iQnV0dG9uR3JvdXBDb21wb25lbnQsIE5iQnV0dG9uR3JvdXBNb2R1bGUsIE5iQnV0dG9uVG9nZ2xlRGlyZWN0aXZlLCBOYkxpc3RDb21wb25lbnQsIE5iTGlzdEl0ZW1Db21wb25lbnQsIE5iTGlzdE1vZHVsZSwgTmJMaXN0UGFnZVRyYWNrZXJEaXJlY3RpdmUsIE5iU2Nyb2xsYWJsZUNvbnRhaW5lckRpbWVudGlvbnMsIE5iSW5maW5pdGVMaXN0RGlyZWN0aXZlLCBOYklucHV0RGlyZWN0aXZlLCBOYklucHV0TW9kdWxlLCBOYk92ZXJsYXlNb2R1bGUsIHBhdGNoLCBjcmVhdGVDb250YWluZXIsIE5iT3ZlcmxheVNlcnZpY2UsIE5iQWRqdXN0bWVudCwgTmJQb3NpdGlvbiwgTmJBZGp1c3RhYmxlQ29ubmVjdGVkUG9zaXRpb25TdHJhdGVneSwgTmJHbG9iYWxQb3NpdGlvblN0cmF0ZWd5LCBOYlBvc2l0aW9uQnVpbGRlclNlcnZpY2UsIE5iUG9zaXRpb25lZENvbnRhaW5lckNvbXBvbmVudCwgTmJPdmVybGF5Q29udGFpbmVyQ29tcG9uZW50LCBOYlRyaWdnZXIsIE5iVHJpZ2dlclN0cmF0ZWd5QmFzZSwgTmJDbGlja1RyaWdnZXJTdHJhdGVneSwgTmJIb3ZlclRyaWdnZXJTdHJhdGVneSwgTmJIaW50VHJpZ2dlclN0cmF0ZWd5LCBOYkZvY3VzVHJpZ2dlclN0cmF0ZWd5LCBOYk5vb3BUcmlnZ2VyU3RyYXRlZ3ksIE5iVHJpZ2dlclN0cmF0ZWd5QnVpbGRlclNlcnZpY2UsIE5iUG9ydGFsRGlyZWN0aXZlLCBOYlBvcnRhbE91dGxldERpcmVjdGl2ZSwgTmJDb21wb25lbnRQb3J0YWwsIE5iT3ZlcmxheSwgTmJPdmVybGF5UG9zaXRpb25CdWlsZGVyLCBOYlRlbXBsYXRlUG9ydGFsLCBOYk92ZXJsYXlDb250YWluZXIsIE5iRmxleGlibGVDb25uZWN0ZWRQb3NpdGlvblN0cmF0ZWd5LCBOYlBvcnRhbEluamVjdG9yLCBOYkNka01hcHBpbmdNb2R1bGUsIE5iR2xvYmFsTG9naWNhbFBvc2l0aW9uLCBOYkdsb2JhbFBoeXNpY2FsUG9zaXRpb24sIE5iUG9zaXRpb25IZWxwZXIsIE5iRHluYW1pY092ZXJsYXksIE5iRHluYW1pY092ZXJsYXlDaGFuZ2UsIE5iRHluYW1pY092ZXJsYXlIYW5kbGVyLCBOYlBsYXRmb3JtLCBOYkZvY3VzTW9uaXRvciwgTmJBMTF5TW9kdWxlLCBOYkZvY3VzVHJhcCwgTmJGb2N1c1RyYXBGYWN0b3J5U2VydmljZSwgTmJDZGtBZGFwdGVyTW9kdWxlLCBOYkJsb2NrU2Nyb2xsU3RyYXRlZ3lBZGFwdGVyLCBOYlNjcm9sbFN0cmF0ZWd5T3B0aW9ucywgTmJPdmVybGF5Q29udGFpbmVyQWRhcHRlciwgTmJTY3JvbGxEaXNwYXRjaGVyQWRhcHRlciwgTmJWaWV3cG9ydFJ1bGVyQWRhcHRlciwgTmJEaXJlY3Rpb25hbGl0eSwgTmJCaWRpTW9kdWxlLCBOYkNlbGxEZWZEaXJlY3RpdmUsIE5iSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSwgTmJGb290ZXJDZWxsRGVmRGlyZWN0aXZlLCBOQl9TT1JUX0hFQURFUl9DT0xVTU5fREVGLCBOYkNvbHVtbkRlZkRpcmVjdGl2ZSwgTmJIZWFkZXJDZWxsRGlyZWN0aXZlLCBOYkZvb3RlckNlbGxEaXJlY3RpdmUsIE5iQ2VsbERpcmVjdGl2ZSwgTmJEYXRhU291cmNlLCBOYkRhdGFSb3dPdXRsZXREaXJlY3RpdmUsIE5iSGVhZGVyUm93T3V0bGV0RGlyZWN0aXZlLCBOYkZvb3RlclJvd091dGxldERpcmVjdGl2ZSwgTmJOb0RhdGFSb3dPdXRsZXREaXJlY3RpdmUsIE5iQ2VsbE91dGxldERpcmVjdGl2ZSwgTmJIZWFkZXJSb3dEZWZEaXJlY3RpdmUsIE5iRm9vdGVyUm93RGVmRGlyZWN0aXZlLCBOYlJvd0RlZkRpcmVjdGl2ZSwgTmJIZWFkZXJSb3dDb21wb25lbnQsIE5iRm9vdGVyUm93Q29tcG9uZW50LCBOYlJvd0NvbXBvbmVudCwgTkJfVEFCTEVfVEVNUExBVEUsIE5CX1ZJRVdfUkVQRUFURVJfU1RSQVRFR1ksIE5CX0NPQUxFU0NFRF9TVFlMRV9TQ0hFRFVMRVIsIE5CX1RBQkxFX1BST1ZJREVSUywgTmJUYWJsZSwgTmJUYWJsZU1vZHVsZSwgTkJfRElBTE9HX0NPTkZJRywgTmJEaWFsb2dDb25maWcsIE5iRGlhbG9nUmVmLCBOYkRpYWxvZ1NlcnZpY2UsIE5iRGlhbG9nTW9kdWxlLCBOYlRvYXN0ck1vZHVsZSwgTmJUb2FzdFJlZiwgTmJUb2FzdENvbnRhaW5lciwgTmJUb2FzdHJDb250YWluZXJSZWdpc3RyeSwgTmJUb2FzdHJTZXJ2aWNlLCBOYlRvYXN0LCBOYlRvYXN0Q29tcG9uZW50LCBOQl9UT0FTVFJfQ09ORklHLCBOYlRvYXN0ckNvbmZpZywgTmJUb2FzdHJDb250YWluZXJDb21wb25lbnQsIE5iVG9vbHRpcE1vZHVsZSwgTmJUb29sdGlwRGlyZWN0aXZlLCBOYlRvb2x0aXBDb21wb25lbnQsIE5iU2VsZWN0TW9kdWxlLCBOYlNlbGVjdExhYmVsQ29tcG9uZW50LCBuYlNlbGVjdEZvcm1GaWVsZENvbnRyb2xDb25maWdGYWN0b3J5LCBOYlNlbGVjdENvbXBvbmVudCwgTmJPcHRpb25Nb2R1bGUsIE5iT3B0aW9uQ29tcG9uZW50LCBOYk9wdGlvbkdyb3VwQ29tcG9uZW50LCBOYk9wdGlvbkxpc3RDb21wb25lbnQsIE5CX1NFTEVDVF9JTkpFQ1RJT05fVE9LRU4sIE5iQXV0b2NvbXBsZXRlTW9kdWxlLCBOYkF1dG9jb21wbGV0ZUNvbXBvbmVudCwgTmJBdXRvY29tcGxldGVEaXJlY3RpdmUsIE5iV2luZG93TW9kdWxlLCBOYldpbmRvd1NlcnZpY2UsIE5iV2luZG93UmVmLCBOYldpbmRvd1N0YXRlLCBOQl9XSU5ET1dfREVGQVVMVF9CVVRUT05TX0NPTkZJRywgTmJXaW5kb3dDb25maWcsIE5CX1dJTkRPV19DT05URU5ULCBOQl9XSU5ET1dfQ09ORklHLCBOQl9XSU5ET1dfQ09OVEVYVCwgTmJXaW5kb3dDb21wb25lbnQsIE5iV2luZG93c0NvbnRhaW5lckNvbXBvbmVudCwgTmJUaW1lcGlja2VyTW9kdWxlLCBOQl9USU1FX1BJQ0tFUl9DT05GSUcsIE5CX0RFRkFVTFRfVElNRVBJQ0tFUl9MT0NBTElaQVRJT05fQ09ORklHLCBOYlRpbWVQaWNrZXJDb21wb25lbnQsIE5iVGltZVBpY2tlckRpcmVjdGl2ZSwgTmJEYXRlcGlja2VyTW9kdWxlLCBOYkRhdGVwaWNrZXJBZGFwdGVyLCBOYkRhdGVwaWNrZXIsIE5CX0RBVEVfQURBUFRFUiwgTkJfREFURV9TRVJWSUNFX09QVElPTlMsIE5iRGF0ZXBpY2tlckRpcmVjdGl2ZSwgTmJEYXRlQWRhcHRlclNlcnZpY2UsIE5iUmFuZ2VBZGFwdGVyU2VydmljZSwgTmJEYXRlVGltZUFkYXB0ZXJTZXJ2aWNlLCBOYkRhdGVwaWNrZXJDb250YWluZXJDb21wb25lbnQsIE5iQmFzZVBpY2tlciwgTmJCYXNlUGlja2VyQ29tcG9uZW50LCBOYkRhdGVwaWNrZXJDb21wb25lbnQsIE5iUmFuZ2VwaWNrZXJDb21wb25lbnQsIE5iRGlhbG9nQ29udGFpbmVyQ29tcG9uZW50LCBOYlJhZGlvTW9kdWxlLCBOYlJhZGlvR3JvdXBDb21wb25lbnQsIE5iUmFkaW9Db21wb25lbnQsIE5iVGFnTW9kdWxlLCBOYlRhZ0NvbXBvbmVudCwgTmJUYWdMaXN0Q29tcG9uZW50LCBOYlRhZ0lucHV0RGlyZWN0aXZlLCBOYlRyZWVHcmlkTW9kdWxlLCBOYlRyZWVHcmlkQ29tcG9uZW50LCBOQl9ST1dfRE9VQkxFX0NMSUNLX0RFTEFZLCBOYlRyZWVHcmlkUm93Q29tcG9uZW50LCBOYlRyZWVHcmlkSGVhZGVyUm93Q29tcG9uZW50LCBOYlRyZWVHcmlkRm9vdGVyUm93Q29tcG9uZW50LCBOQl9UUkVFX0dSSUQsIE5iU29ydERpcmVjdGlvbiwgTmJTb3J0RGlyZWN0aXZlLCBOYlNvcnRIZWFkZXJJY29uRGlyZWN0aXZlLCBOYlNvcnRJY29uQ29tcG9uZW50LCBOYlNvcnRIZWFkZXJDb21wb25lbnQsIE5iVHJlZUdyaWRSb3dUb2dnbGVDb21wb25lbnQsIE5iVHJlZUdyaWRDb2x1bW5EZWZEaXJlY3RpdmUsIE5iVHJlZUdyaWRDZWxsRGlyZWN0aXZlLCBOYlRyZWVHcmlkSGVhZGVyQ2VsbERpcmVjdGl2ZSwgTmJUcmVlR3JpZEZvb3RlckNlbGxEaXJlY3RpdmUsIE5iVHJlZUdyaWRSb3dEZWZEaXJlY3RpdmUsIE5iVHJlZUdyaWRIZWFkZXJSb3dEZWZEaXJlY3RpdmUsIE5iVHJlZUdyaWRGb290ZXJSb3dEZWZEaXJlY3RpdmUsIE5iVHJlZUdyaWRDZWxsRGVmRGlyZWN0aXZlLCBOYlRyZWVHcmlkSGVhZGVyQ2VsbERlZkRpcmVjdGl2ZSwgTmJUcmVlR3JpZEZvb3RlckNlbGxEZWZEaXJlY3RpdmUsIE5iRmlsdGVyRGlyZWN0aXZlLCBOYkZpbHRlcklucHV0RGlyZWN0aXZlLCBOYlRyZWVHcmlkUm93VG9nZ2xlRGlyZWN0aXZlLCBOQl9ERUZBVUxUX1JPV19MRVZFTCwgTmJUcmVlR3JpZFByZXNlbnRhdGlvbk5vZGUsIE5iVHJlZUdyaWREYXRhU291cmNlLCBOYlRyZWVHcmlkRGF0YVNvdXJjZUJ1aWxkZXIsIE5iVHJlZUdyaWREYXRhU2VydmljZSwgTmJUcmVlR3JpZEZpbHRlclNlcnZpY2UsIE5iVHJlZUdyaWRTZXJ2aWNlLCBOYlRyZWVHcmlkU29ydFNlcnZpY2UsIE5iQ29sdW1uc1NlcnZpY2UsIE5iSWNvbk1vZHVsZSwgTmJJY29uQ29tcG9uZW50LCBOYkZvbnRJY29uLCBOYlN2Z0ljb24sIE5iSWNvblBhY2tUeXBlLCBOYkljb25EZWZpbml0aW9uLCBOYkljb25MaWJyYXJpZXMsIE5iVG9nZ2xlTW9kdWxlLCBOYlRvZ2dsZUNvbXBvbmVudCwgTmJGb3JtRmllbGRNb2R1bGUsIE5iRm9ybUZpZWxkQ29tcG9uZW50LCBOYlByZWZpeERpcmVjdGl2ZSwgTmJTdWZmaXhEaXJlY3RpdmUsIE5iRm9ybUZpZWxkQ29udHJvbCwgTmJGb3JtRmllbGRDb250cm9sQ29uZmlnIH07XG4iXX0=","map":null,"metadata":{},"sourceType":"module"}